{"version":3,"file":"bot/js/bot.958.5fd5b139c686d8969214.js","mappings":"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","sources":["webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/images.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_defnoreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_defreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_callnoreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_callreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_ifreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_create_with.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_repeat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_length.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_isEmpty.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_indexOf.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_getIndex.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_setIndex.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_getSublist.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_split.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_sort.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_repeat_ext.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_repeat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_whileUntil.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_for.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_forEach.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_flow_statements.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Variable/variables_get.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Variable/variables_set.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/after_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/check_result.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/read_details.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/trade_again.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/before_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/ask_price.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/payout.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/during_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/sell_at_market.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/check_sell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/sell_price.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/bb_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/bba_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/ema_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/emaa_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/rsi_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/rsia_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/sma_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/smaa_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/macda_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/input_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_up.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_down.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/fast_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/slow_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/signal_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/tick.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ticks.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ohlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ohlc_values.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/readOhlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/get_ohlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/check_direction.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/tick_analysis.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/last_digit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/lastDigitList.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/stat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/stat_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/is_candle_black.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/ohlc_values_in_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/read_ohlc_obj.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/balance.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/barrier_offset.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/block_holder.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/loader.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/notify.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/notify_telegram.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/total_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/total_runs.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/useless_block.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/console.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/epoch.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/timeout.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/todatetime.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/totimestamp.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/tickdelay.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_market.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_tradetype.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_contracttype.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_candleinterval.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_restartbuysell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_restartonerror.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_tradeoptions.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_multiplier.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/multiplier_stop_loss.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/accumulator_take_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/multiplier_take_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_accumulator.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_compare.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/controls_if.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_boolean.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_operation.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_null.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_ternary.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_negate.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_change.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_constant.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_constrain.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_modulo.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number_positive.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number_property.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_on_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_random_float.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_random_int.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_round.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_arithmetic.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_single.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_trig.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_join.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_append.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_length.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_isEmpty.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_indexOf.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_charAt.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_getSubstring.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_changeCase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_trim.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_print.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_prompt_ext.js"],"sourcesContent":["export const defineContract =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAlQTFRFAAAAMzMzMzMzaARWNQAAAAN0Uk5TAID/7PezGAAAACFJREFUeJxjYEAFUqtWLQFSCgwMHDipplXUF0ShoI5ABgDTPwulgF1l+wAAAABJRU5ErkJggg==';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAAGXcA1uAAAAAXNSR0IArs4c6QAAAK9JREFUSA3tVUkOgCAMROP/f4PfU4iOaWQKLYmBg71AOksXTAyhGkeKKuECjTSDUwcFxVdNawNgQ10omJNKROqiJbMJsKJZgKgEouuESRYVFVxO35JTnxGDvk9aWQ5GCXfSPbRbsLHysr0lBeMESaKE3hkmbKk230SY9Ulky5rG/SVJU8udPrMU5s7w9bEugUlN886MWiJN86/o2dywFQ17g10b+dlJefH9X0t9X+YETM6gfmoeI+MAAAAASUVORK5CYII=';\n\nexport const blueInfo =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAABOUlEQVQ4EaVTu07DQBDcOVuUpEaEUEETiY9IYYnHLyAaGlq+IF9AF9HQIEV8AQjJBR+BlAYqQhA1lCj2smPrEMFrIsQVPt3uzO6sbw7yY/WOXvs6L45FNFNFj2lAp/bNkSYX08u1yXcK4qE/1JX3x9mZCk5ENcT4wg6UED1f3eqeTob4YK4qQPLbw8utdR0sEFoPuOtsr++ySNWJnT1yksh+EnDQrKODmmMKOHM5L+492SwgChSlXjeK2DghTXbS6oe1zFwUcmPKGtwqYBxybQTNPAS7z6424I8QGZqFeFUxFPe6u8jTuGsq/EWuf10+3o2G2iRubmmQXFOAfCmyFYA80J7m1bIV05agK40b6G3a08NtHj7vMe7dBDk11wD/tjI9TW8DMvp1HMo2THwHVPf1Gnng+utz/gS/LY1YxBZd7wAAAABJRU5ErkJggg==';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAWBJREFUOI2dk81KQmEQhp/5zgHRjhtz0apMXBUSdAcVLWrnxhswsHARSLcRhYm00CvIRbugrCtIaJHtIqlFQUsPBeY50yINM7WfZzV8M+/MOzCfMED8wE2q0Q0VVgSJASjaNEJNoHy7Fb7ur5dekChooGO7ewJZwAw27uIBh6Gok2+kpf3ZIFHQgG+7JwpLI4RfULiYiDprjbS0DYBvu/u/FXenLr88u7sAEj9wk2rp1TDb1VQQXyF9/Dp0HctnwajRjWFiAF9BRxuxOpZmJF5qNRTmfmt/gGujMD0qW00FOUoFxzWYsRnjcnHK+smBGoGHn6rGcG8Qzv6v11MjUObjwr5Rf/K4fByaAvA8IxUBmC21ikDub8Mp3OXC2wYgFHXyCOd/kNcitrMD3QNqpKUdmnTWUYqMWKdnG6UQsZz1elbeoO839kgUW/MdSzOisgrEus9N0FPPSOV+M3zTX/8O8E9xAaZDaSsAAAAASUVORK5CYII=';\n\nexport const purchase =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAIRQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzxeXsBQAAACx0Uk5TAAG7tbYCR//Y2a15rhj7+hmse95G391Iehd4tNIy0bJSsZJykXFRMRLxEbk1pp94AAAA7UlEQVR4nO2R2RaCMAxEi1VHQXBfAUXcQP7//xSOgC2J1Vd1Htq0J7dJOkL89auyWrIM263OG0AXvTLso/sGYMMpQwcDc77reW4VD72REXBg14cxJqZ8a/rc9wxz09j3FOsJX2BpAMZYqQ0axl5rY+rnhjb6i/zYEi8lPwV8okaAkC4eYkve7xDRQIQ9eR/jQAMHHJn7mAZinJjKu2KXUlnyXs8kECIodkBZ8t+4kECClAZSXOleUyQUUD7U1MMIHeBsqIyQvrKwNrBGcDawRnA21EY0OqVtqI3QxNmQ/x8jxgYhMjo/4/L/+mbdAKHBEAKASOAzAAAAAElFTkSuQmCC';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAvlJREFUaAXtmU1u00AUxxPEGoluKMcgJ8gCARsW9CZ0ReEU5BwFiYpWqtgYiQuQFSygJ2CRLV2E39+ZZ42dGc84XxIwT3p9X//34VfbsZPRaGNaQkpGPNu4yGESGfHUOtnYte0b6G8NdABJu7NoG4KXmi1GwUTACwtYomzp5r9ripP3/KB8zj7q4P4t0z9o9PfJowM0NhD6D9NN+sFm1xb05Rjybe171nKkDBLqfw6yt1Oqjjo3F4XArbli1dfmT7YpgOQGWPanLgjfFXyn6x9sU+QMfhdKxL/1OfSAGreh4vIR643H8pQ4hydRQCAAPv9owJ7AF1YH/bKr+z7FsPMbdBP8ZNNNOuwE+6v0bPILpJLAXsAvUrgSLxsoG4hsgAtoDDe3CoPhW7uFW8yXOffzcxK++ElOfxzwDXcxafAmhvscfjO8opdBgSfwjedqVPxaXbB5A0op5P+GH8ZwqXgwj6RtaO1kiDYJBiJOJop+HuScRZGyLfcUq2p5nJHVgAnrQzepXF/HnMIVnEckt84Os02qSkdfYN/Pq75KnpPQPFVYMZOBBq2B/EaxFVWApga0x2WT8vu64UIyq0EoMdfXeuC3JFZxhP7L7ByZe0Q5tQqmbKBsoGygbOCv2wAfHU/1SQp9Sw0P5nuNJCeFPUicYY7hW8fHqaYOr4dR5UQfSFN1dhJnAD1a/4RF2RsFq8d10Q0ce+LYyYy9RWiulw/R615gIEiOvuASpb/IDeRv7aLxq7r9FgOQbwvY7g2s72ho0vurgjuIfYmPfbMNijGhvsoSnQxKHABW7brDcvkhN23IBVS5otPc4hvgrHa1QW5/CpvR26loHkKuQuuvc/L7+BDO4sT0tiZ6ZL6dSgrr/VGkd54WrdzpYUM4FVJNF1u0CieM7g90CfjoM4Dn8BTu3v6u8LW2jZ3rA1rXlKz0Zy/Ehk7dlma7bkDdmav9cte1m3o0mLgmweugAW6gUHfuau/n/LeZaHLtGu1DXFufIssGygb+kw38ARimnBqQbBHiAAAAAElFTkSuQmCC';\n\nexport const sellContract =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMZQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzsMQO9wAAAEJ0Uk5TAEnj/xnzWcgSZVrxvQFt9AlD34If9dBpcPij0X7mSLyziAyl7H1k3dYbAu2qn6eA1LGN6G66uPucBP23ERPXJIPGaDxgqAAAAQdJREFUeJztlFlvwjAQhBeP4yQlKVfvg7acvQ+g90H5/3+qViWSjQ2RLfGYebC0q/k2sTw2UaVKG1RNwEGilgFOfk1kAKAXiWDdHwSQSxcDFMJ1QAhlA5FAzDxbdVbEEJEBSCWQpMyz3WjmRZpAKFkAtBKZO1ptoNHJB8jk38KAIIzZ/J1d1PeAffaNOAzMTTMd4DCiIxwXuyXACU5T6p6dOwNd4KJHpkoA6gODoYmUATQaA5dXHgBdqxvcOgN39zqYDxg4A494IppgWgIUD24GPL+84i3vWAdXjMb75EM3Pr+yhh0NM3zf/Z85m2+Hz4r374IVK+JN/hfI64p6PwLez0ylShvQHzxCDnS9VqsZAAAAAElFTkSuQmCC';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAA45JREFUaAXtWDFrFUEQzoU0QhpjFVRs/Cc2Sf6AxD4BQSF/QBFtbPwDYici2ImFIqaVlBEEK7FICBaxCFEQRM/v29vZzO7O3dv3uGCEXdg3M998M7O7d7e37+bmZmpt2y4xEPLITABHazpOC0wLwt5wtVKHDGBeFJEg7og+okTaVY5hUgslSQwGFJhb2tZ6mARI3XQ77x/YbzQR9mlMTpc4u3rDoWEFomXtGe5+0zSXg28oCL69IT8r/kwJYocLF0p1yi2ITwl2YiL6+MTq5iQZiUNvtO24GaAywLc+5FfUqp7tFdCXUeulo0bMMfoy+WY8QdUcMU0O/xfPuZ/6fOJtyZH56chABcC94oMXFWyqOlffs2YFXge4hi3gu05gEU3Mj24ZklvDtkUCfgHdfMiBu+cXMnos3QbGZHDsQVyyEs+CYaYh9yzxNaauQF2BWVaATzL6WG01GwMzE4TgfhSdGzKyAUi8z5HvzEKA5Ez08TOkA34jGInCeDT5H2EX6Di9O+k17+d2nW1kwDjz0JL6Pa85xfKRS5BP0T8oV6aSWwYqFoPQHiqoVyUxc5pgwgLnM3loFxNXZJIQATRMULHgf+5596AfKlemmrkIou2gZxfQJ6b/Lfov9CdZVgDAN9B5fLFnANy9TyH7ijyD72pPch5ZeIu7uynjwOGqQrDI1H+zJJ6Jtb6gK2mH1jVnSFcx+0O86qsrUFegrkBdgboC/9MKZK91vPBG/ac88mLEnxmt5Hxjs2kfTDnHTH3M0HlKdNTioYxtXfM7KB6X9gddiJA8OHHgPESx8UCVXbEQaCjg30bnMf+c4TYh1kCX702szTFwLK6ZQRoUIiSPllwNHjOLBw7uFfQf6GxH6LtO635u6lpDOuicCGtzDO6YCxndGWY8SWymswBE6F2XoG0PIN3EIVfQ36G/KkhhUhDrmunUYDFRByU6cvBsL+0Qyh30iV8QkzSRKcki0DKKiVZwgiHXPDrv4W8+74uEUmz6+Ml3RjGxpzTiP/ocL4UC+5HHvgo2rfTx5ROQAC+5K5hfsNOBgLeAzgH/RtftNYzzKd+yweOuIzuRzlE+AUmMaH6QkK3U/Owi3FQi7gH6+xQfssHnzsPGmu5zDfkOwc9QrPNZRGCyD0/9YWpiwYSAWrJlRlfcGhdDo//dPtca5GMGeFuLxR5cc8bSuQ3rXPwvv6mBqtcVqCtQV+Dfr8BfZ6VurZP8obgAAAAASUVORK5CYII=';\n\nexport const finishSign =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABJQTFRFAAAAMzMzMzMzMzMzMzMzMzMzbxxq5QAAAAZ0Uk5TALX/40m0LpdrJAAAADpJREFUeJxjYBi0QBCXhBJOCTRggktCGVkCQiE4g0ACWRTZwwMrMTjDCl/UYk8MDDjAyJUQxSUx6AAAWjIi1ZSdqFYAAAAASUVORK5CYII=';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAa5JREFUaAXtV1tywzAIdDq5Rg/Ui/SGzYl8j1brzqYYidHDYWw60g/iIWABKc6yGOsG+XdaSr/uFLe0dkZkNC25Wt6U7zq7C05zJMH9FofBd0IymZIKR4qYWAyh95LfbCgAxYLwd/e3h+yJm0YQWiurk2V4cXkzaALO5owKAJV7E7gsr9zzQBaBiirVXaV3KYeTbtDVyNOgUIFU9q+CeFj0bBs9sL/k5fhJnSXHOakbnzxmUKH3kl5m0JK1ZQ/fxQBHncqk3Uskg217mX2mHBC4I3APMAB6HglfgXQPXvqaZgXBRTu4PqTT+M+1+00uPtfW+94rRy/cEbgHKJYIY8pRGykLz/7jEkmIslwt8mSzSrtsbznMDBsF7lM0A1Q74V6iagbTYFZgVsC7Ani7sbzjjPrPPhu1o4skv6YPj3edG/jDAOQXjQxgAe+1p0/rXPhfgvAAih+9bJukVgtfNSq9/plb+A6EB9A8QmePCkdG0/AdCA+geYR068hbo0W9pr326Tz+p35qP+SbAVjPHB2dRcOP0ARw1ugwbvgOtFziR0J72T807MSkswKDFfgBlTxsE+QpCHoAAAAASUVORK5CYII=';\n\nexport const caution = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABsklEQV\nRoQ+1YS07DMBB9VlG2tJuWZVDYU04CN6BHKCfAnACOADcoJyHsiZRtu0m7rYiMItIFldqZ2ONaEc7Wo5d5n7ETK/T8UT3vH5FAaA\ndZDlQ6TbcYPBtgqqBSn00bmFIBeYL6YaTLknoXSaBt/gNQQwpMdt2sE9Q3FAmSwPIxW0CpW9nmmGjGvE+eirtj1TQBnVWnV/+35S\nZOF7q4dCRwZZh6eSmb6K+jIjMc+KcE9pVbajshgjkQCbQTFR2Qyq4Uzv5W520XijMQZ6BVQCq7UjhxBrgfPHGIQw8x1ymqLthJTD\nXGXY8EbLc/rsJUXTAH4i4UeheKDoR2gBpO7rr7EPf9Yqu9WswBdc5VTabObBLUU+erxaaZlU6nBmevAK5lmiNRPhW+Z2Nd5lQl+U\nu5A6h0Otxi8AKoewrUbd28JajnI12uOThsAjuwlc5mBmiICEfKbBQwH+uicZr9dCbgKVLsyHT+IzskhVykukVGjIB7pOwiI07AMl\nLWkfFCoAHlR8otMt4I0JGSiYx3AgciJRaZkxD4Gymgy8HEPgDaQqtzoOtLfNZHAj7V5WD33oEfb0MpQATTN7IAAAAASUVORK5CYI\nI=`;\n\nexport const plusIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==';\n\nexport const plusIconLight =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==';\n\nexport const minusIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC6ElEQVR4Ae2bA6weURCFp7bd4NnaOyeo3Qa1zaiKXpzUbazajJ3UjVXbtm1rGqO6u/sv5uXf74t91nfvHEpISEhISAgO5PAwU4nlvANHcBmP8Z0/8xNcwRHegeWmkochhzRS0hDjsBF3IHb5Nm8yYwoakRZMBVbjA8Sb/I7XooziBbXMGD4I8S8fNGNRi+KgrBnm8hNIAD7EvLJmFCnVeCpeQAL0mZlG1SgauAhHICF4hIsofHgYPkJC8iMPoFCpjsWQcOUloV1KmXV5JyR8eWdmXQqekuZ8DBKNfKykOQVLWTauQyL0elk2BQfa4S4kYu+a9sFdPFchMXilsEUgty5OQmLyVEltShVeAYnR5ZQapg8kZvuRfwpb4FncAfgpWpJfsA2iwG3kD9MRokOnE/mgJi5DlHjZx6IHMyCKnOH5+PNtTQH4FtUkL/AUiDInkxdwWV2AK+Qe0w2iT9NN//M/mPdBeQP+rDLAp/IG5AYzHKJTM1z796dFXkFuwDmIUs+5Wn9B9OpisW96aw5gepMNzIQodqY9wDLVAZaRDd6nOQDvIxs4C3EjBYzLCGfJBt/WHIBv2wO8VB3gpT3AT9UBftgDfFEd4AvZwHPNAfCcbPAtzQH4Vho8RnW/yPaSDSyv6p8SszUH4FlkA/00B3D6ko2CRqoXNA3JDp+B6JTPkAXtt/Hy9PitUt4AnyD65M/lDcgd2KoywBZyC3dVGaBrGvxeV7zBwVO8bjE9UBXgIdUkb/Bs7d9AFlBL0zYr1STvOJ20BDAd03PUgAgt+SkkZp9Zhj20rw5Mnyo98MQrghg5OxFbgBOBTJAWtsAV7UN/Fkx7/WOXFpzMqAdfncxk9Pgvw987IOHLOzLrhtfcWKJ//N6CMxgftBcgLHARHwjl2B/gouhKQFOCLwFFX8Oap7+GZV/0jONDqRXheDxqxV5F5LX8XnkV0f5P24xVXAZ1j5P3Rx33Cz/BFT4aRh03ISEhISHhF9FSCRjypNzcAAAAAElFTkSuQmCC';\n\nexport const lockIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACxklEQVR4Ae2aA4wdURSGT223Udf7Gizn/ieo2zg1Yqe23aC2jag2Yie7QW3bto2pMfehO53duTPJ+f54+A0vDgmCUPzkJamuWMM32P6Z61iruuYlUfBRqbyQz7EdJ+d4gUqloJJWEVPwlu3EwVuelFaRgge34etsFzHXrdZBu/Zr2HYXrAnMfcithQNsuw8O5NYi82SXxx62/y/YHalApon38OAT9mAjz/6a9diDT3EkVpNZVLeYJ3+V+3Bdxytel/vgVKx1VTcyh1WTn7Ot5QOmxHswrA58l20tzw2+CVjMtpaHVuOEL3wGburbYDGZgevinXYyd6y0f26Vwnc0gXeqHpkAU7TTf428Im2Xx6+192AqGaA0P9Su5EgqIjxIU39ApclvVCP96XfxZy2DC86tVSPyGx6jXf/xrrYeqOmPIb/BNucp5OWQC6wGmsBW8hs+6TiBG+QSre16gvxGe4ULyCUodL5B5Df47DiBDa633+hsOZHfaK/wCtcCK517CLaACIiACIiACOQkYwQK+SnbJZynKMSInGQqTrKr8k58Ztu/4DPvzK5KxUOkAo6x7X9wzMOokf60mglWkncQwSdjAp8QIa/wNLYNZhp5BUdNCuAYeYXfmBTgV94FbLMJpYAIiIAIiIAIiIAIiMB1zFItrJpf0xKz+HqoBPACnamUYzel0BkvQiKAtyqfYmBZeBsKAdWb4oBeYRC4lmDKtDSuBl4AYykBGBt4AQYlIF8FXiBSnRIQqV7SAiKQrygBlhV4gcRFAzwmDJ/RshSPsnwt1D8y1TskTQlGzD0Bb0PTmOOOemOOO+JFyJrTPFs157pc11xzWnpkIiACIiACIiACIiACz40KPJdSA8wwKjCDvKJSTZbbcAp5BytCWPCklZwdDV/JmVb0hx1+F/1hh9eiPw1O4eH+lF1yAQ8v2rMvCIIgCF8Av9j925HZ5hYAAAAASUVORK5CYII=';\n","import { localize } from '@deriv/translations';\nimport { plusIconLight } from '../../images';\nimport { appendCollapsedProcedureBlocksFields, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.procedures_defnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n        this.is_adding = false;\n        this.timeout_id;\n        this.jsonInit(this.definition());\n\n        if (Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT) {\n            this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);\n        }\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a ➕-icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconLight, 24, 24, '+', () => this.onAddClick());\n\n        const dropdown_path = `${this.workspace.options.pathToMedia}dropdown-arrow.svg`;\n        // Render a v-icon for adding parameters\n        const fieldImageCollapse = new Blockly.FieldImage(\n            dropdown_path,\n            16,\n            16,\n            'v',\n            () => this.toggleCollapseWithDelay(true),\n            false,\n            true\n        );\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.appendDummyInput('COLLAPSED_INPUT').appendField(fieldImageCollapse);\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: localize('function {{ function_name }} {{ function_params }}', {\n                function_name: '%1',\n                function_params: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Function with no return value'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Function'),\n            description: localize(\n                'This block creates a function, which is a group of instructions that can be executed at any time. Place other blocks in here to perform any kind of action that you need in your strategy. When all the instructions in a function have been carried out, your bot will continue with the remaining blocks in your strategy. Click the “do something” field to give it a name of your choice. Click the plus icon to send a value (as a named variable) to your function.'\n            ),\n        };\n    },\n    /**\n     * Sets the block colour and updates this procedure's caller blocks\n     * to reflect the same name on a change.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_DELETE, Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE];\n\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || !allowedEvents.includes(event.type)) {\n            return;\n        }\n        if (event.type === Blockly.Events.BLOCK_CREATE || Blockly.Events.BLOCK_CHANGE) {\n            // Sync names between definition- and execution-block\n            if (event.blockId === this.id && event.name === 'NAME') {\n                this.getProcedureCallers().forEach(block => {\n                    block.setFieldValue(event.newValue, 'NAME');\n                });\n            }\n            appendCollapsedProcedureBlocksFields(this);\n        }\n    },\n    /**\n     * Prompt the user for parameter name\n     * @this Blockly.Block\n     */\n    onAddClick() {\n        if (this.is_adding || this.workspace.options.readOnly || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n\n        this.is_adding = true;\n        clearTimeout(this.timeout_id);\n\n        // Wrap in setTimeout so block doesn't stick to mouse (Blockly.Events.END_DRAG event isn't blocked).\n        this.timeout_id = setTimeout(() => {\n            const promptMessage = localize('Specify a parameter name:');\n            Blockly.dialog.prompt(promptMessage, '', paramName => {\n                if (paramName) {\n                    const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, paramName, '');\n                    if (variable) {\n                        this.arguments.push(paramName);\n                        this.argument_var_models.push(variable);\n\n                        const paramField = this.getField('PARAMS');\n                        paramField.setText(`${localize('with: ')} ${this.arguments.join(', ')}`);\n\n                        this.getProcedureCallers().forEach(block => {\n                            block.setProcedureParameters(this.arguments);\n                            block.initSvg();\n                            block.renderEfficiently();\n                        });\n                    }\n                }\n                this.is_adding = false;\n            });\n        }, 0);\n    },\n    /**\n     * Add or remove the statement block from this function definition.\n     * @param {boolean} hasStatements True if a statement block is needed.\n     * @this Blockly.Block\n     */\n    setStatements(hasStatements) {\n        if (this.hasStatements === hasStatements) {\n            return;\n        }\n\n        if (hasStatements) {\n            this.appendStatementInput('STACK').appendField('');\n            if (this.getInput('RETURN')) {\n                this.moveInputBefore('STACK', 'RETURN');\n            }\n        } else {\n            this.removeInput('STACK', true);\n        }\n\n        this.hasStatements = hasStatements;\n    },\n    /**\n     * Update the display of parameters for this procedure definition block.\n     * @private\n     * @this Blockly.Block\n     */\n    updateParams() {\n        let paramString = '';\n\n        if (this.arguments.length) {\n            paramString = `${localize('with:')} ${this.arguments.join(', ')}`;\n        }\n\n        // The params field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Blockly.Events.disable();\n        try {\n            this.setFieldValue(paramString, 'PARAMS');\n        } finally {\n            Blockly.Events.enable();\n        }\n    },\n    /**\n     * Create XML to represent the argument inputs.\n     * @param {boolean=} optParamIds If true include the IDs of the parameter\n     *     quarks.  Used by Blockly.Procedures.mutateCallers for reconnection.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom(optParamIds) {\n        const container = document.createElement('mutation');\n\n        if (optParamIds) {\n            container.setAttribute('name', this.getFieldValue('NAME'));\n        }\n\n        this.argument_var_models.forEach((arg, i) => {\n            const parameter = document.createElement('arg');\n            parameter.setAttribute('name', arg.name);\n            parameter.setAttribute('varid', arg.getId());\n\n            if (optParamIds && this.paramIds) {\n                parameter.setAttribute('paramId', this.paramIds[i]);\n            }\n            container.appendChild(parameter);\n        });\n\n        // Save whether the statement input is visible.\n        if (!this.hasStatements) {\n            container.setAttribute('statements', 'false');\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the argument inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                const var_name = childNode.getAttribute('name');\n                const var_id = childNode.getAttribute('varid') || childNode.getAttribute('varId');\n                const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, var_id, var_name, '');\n\n                this.arguments.push(var_name);\n\n                if (variable !== null) {\n                    this.argument_var_models.push(variable);\n                } else {\n                    // eslint-disable-next-line no-console\n                    console.log(`Failed to create a variable with name ${var_name}, ignoring.`);\n                }\n            }\n        });\n\n        this.updateParams();\n\n        // Show or hide the statement input.\n        this.setStatements(xmlElement.getAttribute('statements') !== 'false');\n    },\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES NOT have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, false];\n    },\n    /**\n     * Return all procedure callers related to this block.\n     * @return {!Array.<Blockly.Block>} List of procedure caller blocks\n     * @this Blockly.Block\n     */\n    getProcedureCallers() {\n        return this.workspace\n            .getAllBlocks(false)\n            .filter(block => block.type === this.callType && block.data === this.id);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<string>} List of variable names.\n     * @this Blockly.Block\n     */\n    getVars() {\n        return this.arguments;\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argument_var_models;\n    },\n    /**\n     * Add custom menu options to this block's context menu.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        modifyContextMenu(options);\n        if (Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n        // Add option to create caller.\n        const option = { enabled: true };\n        const name = this.getFieldValue('NAME');\n        option.text = localize('Create \"%1\"').replace('%1', name);\n\n        const xmlMutation = document.createElement('mutation');\n        xmlMutation.setAttribute('name', name);\n\n        this.arguments.forEach(argumentName => {\n            const xmlArg = document.createElement('arg');\n            xmlArg.setAttribute('name', argumentName);\n            xmlMutation.appendChild(xmlArg);\n        });\n\n        const xmlBlock = document.createElement('block');\n        xmlBlock.setAttribute('type', this.callType);\n        xmlBlock.appendChild(xmlMutation);\n        option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n        options.push(option);\n\n        // Add options to create getters for each parameter.\n        if (!this.isCollapsed()) {\n            this.argument_var_models.forEach(argumentVarModel => {\n                const getOption = { enabled: true };\n\n                getOption.text = localize('Create \"get %1\"').replace('%1', argumentVarModel.name);\n\n                const xmlField = Blockly.Variables.generateVariableFieldDom(argumentVarModel);\n                const xmlOptionBlock = document.createElement('block');\n\n                xmlOptionBlock.setAttribute('type', 'variables_get');\n                xmlOptionBlock.appendChild(xmlField);\n\n                getOption.callback = Blockly.ContextMenu.callbackFactory(this, xmlOptionBlock);\n                options.push(getOption);\n            });\n        }\n    },\n    callType: 'procedures_callnoreturn',\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.procedures_defnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.CATEGORY_NAME\n    );\n\n    let branch = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'STACK');\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n        const id = block.id.replace(/\\$/g, '$$$$'); // Issue 251.\n\n        branch =\n            Blockly.JavaScript.prefixLines(\n                Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g, `'${id}'`),\n                Blockly.JavaScript.INDENT\n            ) + branch;\n    }\n\n    if (Blockly.JavaScript.INFINITE_LOOP_TRAP) {\n        branch = Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g, `'${block.id}'`) + branch;\n    }\n\n    let returnValue =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'RETURN',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || '';\n    if (returnValue) {\n        returnValue = `${Blockly.JavaScript.INDENT}return ${returnValue};\\n`;\n    }\n\n    const args = block.arguments.map(\n        argumentName => Blockly.JavaScript.variableDB_.getName(argumentName, Blockly.Variables.CATEGORY_NAME) // eslint-disable-line no-underscore-dangle\n    );\n\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.javascriptGenerator.scrub_(\n        block,\n        `\n    function ${functionName}(${args.join(', ')}) {\n        ${branch}\n        ${returnValue}\n    }\\n`\n    );\n\n    // Add % so as not to collide with helper functions in definitions list.\n    // eslint-disable-next-line no-underscore-dangle\n    Blockly.JavaScript.javascriptGenerator.definitions_[`%${functionName}`] = code;\n    return null;\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../../images';\n\nBlockly.Blocks.procedures_defreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        this.jsonInit(this.definition());\n\n        if (Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT) {\n            this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);\n        }\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a ➕-icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 24, 24, '+', () => this.onAddClick());\n\n        const dropdown_path = `${this.workspace.options.pathToMedia}dropdown-arrow.svg`;\n        // Render a v-icon for adding parameters\n        const fieldImageCollapse = new Blockly.FieldImage(\n            dropdown_path,\n            16,\n            16,\n            'v',\n            () => this.toggleCollapseWithDelay(true),\n            false,\n            true\n        );\n\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.moveInputBefore('ADD_ICON', 'RETURN');\n        this.appendDummyInput('COLLAPSED_INPUT').appendField(fieldImageCollapse);\n        this.moveInputBefore('COLLAPSED_INPUT', 'RETURN');\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: localize('function {{ function_name }} {{ function_params }} {{ dummy }}', {\n                function_name: '%1',\n                function_params: '%2',\n                dummy: '%3',\n            }),\n            message1: 'return %1',\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'RETURN',\n                    check: null,\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Function that returns a value'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Function that returns a value'),\n            description: localize(\n                'This block is similar to the one above, except that this returns a value. The returned value can be assigned to a variable of your choice.'\n            ),\n        };\n    },\n    onAddClick: Blockly.Blocks.procedures_defnoreturn.onAddClick,\n    onchange: Blockly.Blocks.procedures_defnoreturn.onchange,\n    setStatements: Blockly.Blocks.procedures_defnoreturn.setStatements,\n    updateParams: Blockly.Blocks.procedures_defnoreturn.updateParams,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, true];\n    },\n    getProcedureCallers: Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,\n    getVars: Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById: Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    displayRenamedVar: Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,\n    customContextMenu: Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    registerWorkspaceListener: Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener,\n    callType: 'procedures_callreturn',\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.procedures_defreturn =\n    Blockly.JavaScript.javascriptGenerator.forBlock.procedures_defnoreturn;\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.procedures_callnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n        this.previousDisabledState = false;\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Custom function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            display_name: localize('Custom function'),\n            description: '',\n        };\n    },\n    /**\n     * Procedure calls cannot exist without the corresponding procedure\n     * definition.  Enforce this link whenever an event is fired.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible) {\n            // Block is deleted or is in a flyout.\n            return;\n        }\n\n        if (!event.recordUndo) {\n            // Events not generated by user. Skip handling.\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.indexOf(this.id) !== -1) {\n            // Look for the case where a procedure call was created (usually through\n            // paste) and there is no matching definition.  In this case, create\n            // an empty definition block with the correct signature.\n            const name = this.getProcedureCall();\n            let def = Blockly.Procedures.getDefinition(name, this.workspace);\n            if (\n                def &&\n                (def.type !== this.defType || JSON.stringify(def.arguments) !== JSON.stringify(this.arguments))\n            ) {\n                // The signatures don't match.\n                def = null;\n            }\n\n            if (def) {\n                this.data = def.id;\n                return;\n            }\n            Blockly.Events.setGroup(event.group);\n            /**\n             * Create matching definition block.\n             * <xml>\n             *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n             *     <mutation name=\"test\">\n             *       <arg name=\"x\"></arg>\n             *     </mutation>\n             *     <field name=\"NAME\">test</field>\n             *   </block>\n             * </xml>\n             */\n            const xml = document.createElement('xml');\n            const block = document.createElement('block');\n            block.setAttribute('type', this.defType);\n\n            const xy = this.getRelativeToSurfaceXY();\n            const x = xy.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1);\n            const y = xy.y + Blockly.SNAP_RADIUS * 2;\n\n            block.setAttribute('x', x);\n            block.setAttribute('y', y);\n\n            const mutation = this.mutationToDom();\n\n            block.appendChild(mutation);\n\n            const field = document.createElement('field');\n            field.setAttribute('name', 'NAME');\n            field.appendChild(document.createTextNode(this.getProcedureCall()));\n\n            block.appendChild(field);\n            xml.appendChild(block);\n\n            Blockly.Xml.domToWorkspace(xml, this.workspace);\n            Blockly.Events.setGroup(false);\n            const procedure_definition = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            this.data = procedure_definition.id;\n        } else if (event.type === Blockly.Events.BLOCK_DELETE) {\n            // Look for the case where a procedure definition has been deleted,\n            // leaving this block (a procedure call) orphaned.  In this case, delete\n            // the orphan.\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (!def) {\n                Blockly.Events.setGroup(event.group);\n                this.dispose(true, false);\n                Blockly.Events.setGroup(false);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.element === 'disabled') {\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (def && def.id === event.blockId) {\n                // in most cases the old group should be ''\n                const oldGroup = Blockly.Events.getGroup();\n\n                if (oldGroup) {\n                    // This should only be possible programatically and may indicate a problem\n                    // with event grouping. If you see this message please investigate. If the\n                    // use ends up being valid we may need to reorder events in the undo stack.\n                    // eslint-disable-next-line no-console\n                    console.log('Saw an existing group while responding to a definition change');\n                }\n\n                Blockly.Events.setGroup(event.group);\n\n                if (event.newValue) {\n                    this.previousDisabledState = this.disabled;\n                    this.setDisabled(true);\n                } else {\n                    this.setDisabled(this.previousDisabledState);\n                }\n\n                Blockly.Events.setGroup(oldGroup);\n            }\n        }\n    },\n    /**\n     * Returns the related procedure definition block.\n     * @return {Blockly.Block} Procedure definition block.\n     * @this Blockly.Block\n     */\n    getProcedureDefinition(name) {\n        // Assume that a procedure definition is a top block.\n        return this.workspace.getTopBlocks(false).find(block => {\n            if (block.getProcedureDef) {\n                const tuple = block.getProcedureDef();\n                return tuple && Blockly.Names.equals(tuple[0], name);\n            }\n            return false;\n        });\n    },\n    /**\n     * Returns the name of the procedure this block calls.\n     * @return {string} Procedure name.\n     * @this Blockly.Block\n     */\n    getProcedureCall() {\n        // The NAME field is guaranteed to exist, null will never be returned.\n        return /** @type {string} */ (this.getFieldValue('NAME'));\n    },\n    /**\n     * Notification that a procedure is renaming.\n     * If the name matches this block's procedure, rename it.\n     * @param {string} oldName Previous name of procedure.\n     * @param {string} newName Renamed procedure.\n     * @this Blockly.Block\n     */\n    renameProcedure(oldName, newName) {\n        if (Blockly.Names.equals(oldName, this.getProcedureCall())) {\n            this.setFieldValue(newName, 'NAME');\n        }\n    },\n    /**\n     * Notification that the procedure's parameters have changed.\n     * @param {!Array.<string>} paramNames New param names, e.g. ['x', 'y', 'z'].\n     * @private\n     * @this Blockly.Block\n     */\n    setProcedureParameters(paramNames) {\n        // Rebuild the block's arguments.\n        this.arguments = [].concat(paramNames);\n\n        // And rebuild the argument model list.\n        this.argument_var_models = this.arguments.map(argumentName =>\n            Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, argumentName, '')\n        );\n\n        this.updateShape();\n    },\n    /**\n     * Modify this block to have the correct number of arguments.\n     * @private\n     * @this Blockly.Block\n     */\n    updateShape() {\n        this.arguments.forEach((argumentName, i) => {\n            let field = this.getField(`ARGNAME${i}`);\n            if (field) {\n                // Ensure argument name is up to date.\n                // The argument name field is deterministic based on the mutation,\n                // no need to fire a change event.\n                Blockly.Events.disable();\n                try {\n                    field.setValue(argumentName);\n                } finally {\n                    Blockly.Events.enable();\n                }\n            } else {\n                // Add new input.\n                field = new Blockly.FieldLabel(argumentName);\n                const input = this.appendValueInput(`ARG${i}`).appendField(field, `ARGNAME${i}`);\n                input.init();\n            }\n        });\n\n        // Remove deleted inputs.\n        let i = this.arguments.length;\n        while (this.getInput(`ARG${i}`)) {\n            this.removeInput(`ARG${i}`);\n            i++;\n        }\n\n        // Add 'with:' if there are parameters, remove otherwise.\n        const topRow = this.getInput('TOPROW');\n\n        if (topRow) {\n            if (this.arguments.length) {\n                if (!this.getField('WITH')) {\n                    topRow.appendField(localize('with:'), 'WITH');\n                    topRow.init();\n                }\n            } else if (this.getField('WITH')) {\n                topRow.removeField('WITH');\n            }\n        }\n    },\n    /**\n     * Create XML to represent the (non-editable) name and arguments.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('name', this.getProcedureCall());\n\n        this.arguments.forEach(argumentName => {\n            const parameter = document.createElement('arg');\n            parameter.setAttribute('name', argumentName);\n            container.appendChild(parameter);\n        });\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the (non-editable) name and parameters.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const name = xmlElement.getAttribute('name');\n        this.renameProcedure(this.getProcedureCall(), name);\n\n        const args = [];\n        const paramIds = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                args.push(childNode.getAttribute('name'));\n                paramIds.push(childNode.getAttribute('paramId'));\n            }\n        });\n\n        this.setProcedureParameters(args, paramIds);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argument_var_models;\n    },\n    /**\n     * Add menu option to find the definition block for this call.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        modifyContextMenu(options);\n        const name = this.getProcedureCall();\n        const { workspace } = this;\n\n        const option = { enabled: true };\n        option.text = localize('Highlight function definition');\n        option.callback = () => {\n            const def = this.getProcedureDefinition(name);\n            if (def) {\n                workspace.centerOnBlock(def.id);\n                def.select();\n            }\n        };\n\n        options.push(option);\n    },\n    defType: 'procedures_defnoreturn',\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.procedures_callnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.CATEGORY_NAME\n    );\n    const args = block.arguments.map(\n        (arg, i) =>\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                `ARG${i}`,\n                Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n            ) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.procedures_callreturn = {\n    init() {\n        this.arguments = [];\n        this.previousDisabledState = false;\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Custom function'),\n            category: Blockly.Categories.Functions,\n            inputsInline: true,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Custom function'),\n            description: '',\n        };\n    },\n    onchange: Blockly.Blocks.procedures_callnoreturn.onchange,\n    getProcedureDefinition: Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,\n    getProcedureCall: Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure: Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,\n    updateShape: Blockly.Blocks.procedures_callnoreturn.updateShape,\n    mutationToDom: Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVarModels: Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    customContextMenu: Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType: 'procedures_defreturn',\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.procedures_callreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.CATEGORY_NAME\n    );\n    const args = block.arguments.map(\n        (arg, i) =>\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                `ARG${i}`,\n                Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n            ) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Block for conditionally returning a value from a procedure.\n * @this Blockly.Block\n */\nBlockly.Blocks.procedures_ifreturn = {\n    init() {\n        this.hasReturnValue = true;\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('if {{ condition }} return {{ value }}', { condition: '%1', value: '%2' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'CONDITION',\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Prematurely returns a value within a function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Conditional return'),\n            description: localize(\n                'This block returns a value when a condition is true. Use this block within either of the function blocks above.'\n            ),\n        };\n    },\n    /**\n     * Create XML to represent whether this block has a return value.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('value', Number(this.hasReturnValue));\n        return container;\n    },\n    /**\n     * Parse XML to restore whether this block has a return value.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const value = xmlElement.getAttribute('value');\n        this.hasReturnValue = value === '1';\n\n        if (!this.hasReturnValue) {\n            this.removeInput('VALUE');\n            this.appendDummyInput('VALUE').appendField(localize('return'));\n            this.initSvg();\n            this.renderEfficiently();\n        }\n    },\n    /**\n     * Called whenever anything on the workspace changes.\n     * Add warning if this flow block is not nested inside a loop.\n     * @param {!Blockly.Events.Abstract} e Change event.\n     * @this Blockly.Block\n     */\n    onchange(/* e */) {\n        if (!this.workspace.isDragging || this.workspace.isDragging()) {\n            return; // Don't change state at the start of a drag.\n        }\n\n        let legal = false;\n\n        // Is the block nested in a procedure?\n        let block = this;\n        do {\n            if (this.FUNCTION_TYPES.indexOf(block.type) !== -1) {\n                legal = true;\n                break;\n            }\n            block = block.getSurroundParent();\n        } while (block);\n\n        if (legal) {\n            const rerender = () => {\n                this.initSvg();\n                this.renderEfficiently();\n            };\n\n            // If needed, toggle whether this block has a return value.\n            if (block.type === 'procedures_defnoreturn' && this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendDummyInput('VALUE').appendField(localize('return'));\n                rerender();\n                this.hasReturnValue = false;\n            } else if (block.type === 'procedures_defreturn' && !this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendValueInput('VALUE').appendField(localize('return'));\n                rerender();\n                this.hasReturnValue = true;\n            }\n\n            if (!Blockly.derivWorkspace.isFlyoutVisible) {\n                this.setDisabled(false);\n            }\n        } else if (!Blockly.derivWorkspace.isFlyoutVisible && !this.getInheritedDisabled()) {\n            this.setDisabled(true);\n        }\n    },\n    /**\n     * List of block types that are functions and thus do not need warnings.\n     * To add a new function type add this to your code:\n     * Blockly.Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n     */\n    FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.procedures_ifreturn = block => {\n    const condition =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'CONDITION',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || 'false';\n\n    let branch;\n    if (block.hasReturnValue) {\n        const value =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'VALUE',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || 'null';\n        branch = `return ${value};\\n`;\n    } else {\n        branch = 'return;\\n';\n    }\n\n    const code = `\n    if (${condition}) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../../images';\nimport { runIrreversibleEvents, runGroupedEvents, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_create_with = {\n    protected_statements: ['STACK'],\n    allowed_children: ['lists_statement'],\n    init() {\n        const field_image = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('ADD_ICON').appendField(field_image);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to create list with', { variable: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: localize('list'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block creates a list with strings and numbers.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create list'),\n            description: localize('This block creates a list with strings and numbers.'),\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            const statement_block = this.workspace.newBlock('lists_statement');\n            statement_block.required_parent_id = this.id;\n            statement_block.setMovable(false);\n            statement_block.initSvg();\n            statement_block.renderEfficiently();\n\n            const connection = this.getLastConnectionInStatement('STACK');\n            connection.connect(statement_block.previousConnection);\n        });\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            // Only allow \"text_statement\" type blocks\n            const blocks_in_stack = this.getBlocksInStatement('STACK');\n            blocks_in_stack.forEach(block => {\n                if (!this.allowed_children.includes(block.type)) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(/* healStack */ false);\n                    });\n                }\n            });\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\n// Head's up! This is also the code generation for the \"text_join\" block.\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_create_with = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const blocks_in_stack = block.getBlocksInStatement('STACK');\n    const elements = blocks_in_stack.map(b => {\n        const value = Blockly.JavaScript.javascriptGenerator.forBlock[b.type](b);\n        return Array.isArray(value) ? value[0] : value;\n    });\n\n    const code = `${var_name} = [${elements.join(', ')}];\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('create list with item {{ input_item }} repeated {{ number }} times', {\n                input_item: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'ITEM',\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            inputsInline: true,\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Creates a list by repeating a given item'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat an item'),\n            description: localize('Creates a list with a given item repeated for a specific number of times.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            ITEM: emptyTextValidator,\n            NUM: emptyTextValidator,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_repeat = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const function_name = Blockly.JavaScript.javascriptGenerator.provideFunction_('listsRepeat', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }`,\n    ]);\n\n    const element =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'ITEM',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || 'null';\n    const repeat_count =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'NUM',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || '0';\n    const code = `${function_name}(${element}, ${repeat_count})`;\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('length of {{ input_list }}', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            inputsInline: true,\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the total number of items in a given list.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List Length'),\n            description: localize('This block gives you the total number of items in a given list.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_length = block => {\n    const list =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || '[]';\n\n    const code = `${list}.length`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('list {{ input_list }} is empty', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: ['Array'],\n                },\n            ],\n            inputsInline: true,\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Checks if a given list is empty'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Is list empty?'),\n            description: localize(\n                'This block checks if a given list is empty. It returns “True” if the list is empty, “False” if otherwise.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_isEmpty = block => {\n    const list =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || '[]';\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === list) !== -1;\n\n    const code = isVariable ? `!${list} || !${list}.length` : `!${list}.length`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in list {{ input_list }} find {{ first_or_last }} occurence of item {{ input_value }}',\n                {\n                    input_list: '%1',\n                    first_or_last: '%2',\n                    input_value: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'END',\n                    options: [\n                        [localize('first'), 'FIRST'],\n                        [localize('last'), 'LAST'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            output: 'Number',\n            inputsInline: true,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the position of an item in a given list.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List item position'),\n            description: localize('This block gives you the position of an item in a given list.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n            FIND: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_indexOf = block => {\n    const operator = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const item =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'FIND',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || \"''\";\n    const list =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || \"''\";\n\n    const code = `${list}.${operator}(${item})`;\n\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION];\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_getIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [localize('get'), 'GET'],\n            [localize('get and remove'), 'GET_REMOVE'],\n            [localize('remove'), 'REMOVE'],\n        ];\n        this.WHERE_OPTIONS = [\n            ['#', 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n            [localize('last'), 'LAST'],\n            [localize('random'), 'RANDOM'],\n        ];\n        const modeMenu = new Blockly.FieldDropdown(this.MODE_OPTIONS, value => {\n            const isStatement = value === 'REMOVE';\n            this.updateStatement(isStatement);\n        });\n\n        this.appendValueInput('VALUE').setCheck('Array').appendField(localize('in list'));\n        this.appendDummyInput().appendField(modeMenu, 'MODE');\n        this.appendDummyInput('AT');\n        const block_color =\n            Blockly.Colours.Base.colour || Blockly.Colours.Base.colourSecondary || Blockly.Colours.Base.colourTertiary;\n        this.setColour(block_color);\n        this.setTooltip(\n            'This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list.'\n        );\n        this.setInputsInline(true);\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n        this.updateAt(true);\n    },\n    meta() {\n        return {\n            display_name: localize('Get list item'),\n            description: localize(\n                'This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isStatement = !this.outputConnection;\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('statement', isStatement);\n        container.setAttribute('at', isAt);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isStatement = xmlElement.getAttribute('statement') === 'true';\n        this.updateStatement(isStatement);\n\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateStatement(newStatement) {\n        const oldStatement = !this.outputConnection;\n\n        if (newStatement !== oldStatement) {\n            this.unplug(true, true);\n\n            this.setOutput(!newStatement);\n            this.setPreviousStatement(newStatement);\n            this.setNextStatement(newStatement);\n\n            this.initSvg();\n        }\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput('AT').appendField(menu, 'WHERE');\n\n        this.initSvg();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_getIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'GET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const listOrder =\n        where === 'RANDOM'\n            ? Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n            : Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n    const list = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'VALUE', listOrder) || '[]';\n\n    let code, order;\n\n    if (where === 'FIRST') {\n        if (mode === 'GET') {\n            code = `${list}[0]`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.shift()`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.shift();\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'GET') {\n            code = `${list}.slice(-1)[0]`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.pop()`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.pop();\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT');\n        if (mode === 'GET') {\n            code = `${list}[${at}]`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT', 1, true);\n        if (mode === 'GET') {\n            code = `${list}.slice(${at})[0]`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('listsGetRandomItem', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }`,\n        ]);\n\n        code = `${functionName}(${list}, ${mode !== 'GET'})`;\n\n        if (mode === 'GET' || mode === 'GET_REMOVE') {\n            order = Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${code};\\n`;\n        }\n    }\n\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_setIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [localize('set'), 'SET'],\n            [localize('insert at'), 'INSERT'],\n        ];\n        this.WHERE_OPTIONS = [\n            [localize('#'), 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n            [localize('last'), 'LAST'],\n            [localize('random'), 'RANDOM'],\n        ];\n\n        this.appendValueInput('LIST').setCheck('Array').appendField(localize('in list'));\n        this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS), 'MODE');\n        this.appendDummyInput('AT');\n        this.appendValueInput('TO').appendField(localize('as'));\n\n        const block_color =\n            Blockly.Colours.Base.colour || Blockly.Colours.Base.colourSecondary || Blockly.Colours.Base.colourTertiary;\n        this.setColour(block_color);\n\n        this.setPreviousStatement(true, null);\n        this.setNextStatement(true, null);\n        this.setTooltip(\n            localize(\n                'This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.'\n            )\n        );\n        this.updateAt(true);\n    },\n    meta() {\n        return {\n            display_name: localize('Set list item'),\n            description: localize(\n                'This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at', isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.moveInputBefore('AT', 'TO');\n        this.getInput('AT').appendField(menu, 'WHERE');\n        this.initSvg();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_setIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'SET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const value =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TO',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT\n        ) || 'null';\n\n    let list =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'LIST',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || '[]';\n\n    const cacheList = () => {\n        if (list.match(/^\\w+$/)) {\n            return '';\n        }\n\n        // eslint-disable-next-line no-underscore-dangle\n        const listVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpList', Blockly.Variables.CATEGORY_NAME);\n        const code = `var ${listVar} = ${list};\\n`;\n\n        list = listVar;\n        return code;\n    };\n\n    let code;\n\n    if (where === 'FIRST') {\n        if (mode === 'SET') {\n            code = `${list}[0] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.unshift(${value});\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'SET') {\n            code = cacheList();\n            code += `${list}[${list}.length - 1] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.push(${value});\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT');\n        if (mode === 'SET') {\n            code = `${list}[${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.javascriptGenerator.getAdjusted(\n            block,\n            'AT',\n            1,\n            false,\n            Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION\n        );\n        code = cacheList();\n        if (mode === 'SET') {\n            code = `${list}[${list}.length - ${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${list}.length - ${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        code = cacheList();\n\n        // eslint-disable-next-line no-underscore-dangle\n        const xVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpX', Blockly.Variables.CATEGORY_NAME);\n\n        code += `var ${xVar} = Math.floor(Math.random() * ${list}.length);\\n`;\n\n        if (mode === 'SET') {\n            code += `${list}[${xVar}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code += `${list}.splice(${xVar}, 0, ${value});\\n`;\n        }\n    }\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_getSublist = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [localize('get sub-list from #'), 'FROM_START'],\n            [localize('get sub-list from # from end'), 'FROM_END'],\n            [localize('get sub-list from first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [localize('#'), 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('last'), 'LAST'],\n        ];\n\n        this.appendValueInput('LIST').appendField(localize('in list'));\n        this.appendDummyInput('AT1');\n        this.appendDummyInput('AT2');\n\n        // eslint-disable-next-line no-underscore-dangle\n        const block_color =\n            Blockly.Colours.Base.colour || Blockly.Colours.Base.colourSecondary || Blockly.Colours.Base.colourTertiary;\n        this.setColour(block_color);\n\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n        this.setInputsInline(true);\n        this.setTooltip(\n            localize('This block creates a list of items from an existing list, using specific item positions.')\n        );\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    meta() {\n        return {\n            display_name: localize('Get sub-list'),\n            description: localize(\n                'This block creates a list of items from an existing list, using specific item positions.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, isAt) {\n        this.removeInput(`AT${n}`);\n\n        if (isAt) {\n            this.appendValueInput(`AT${n}`).setCheck('Number');\n        } else {\n            this.appendDummyInput(`AT${n}`);\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(n, newAt);\n                this.setFieldValue(value, `WHERE${n}`);\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.renderEfficiently();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_getSublist = block => {\n    const list =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'LIST',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || '[]';\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1, at2, code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = `${list}.slice(0)`;\n    } else if (list.match(/^\\w+$/) || (where1 !== 'FROM_END' && where2 === 'FROM_START')) {\n        if (where1 === 'FROM_START') {\n            at1 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT1');\n        } else if (where1 === 'FROM_END') {\n            at1 = Blockly.JavaScript.javascriptGenerator.getAdjusted(\n                block,\n                'AT1',\n                1,\n                false,\n                Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION\n            );\n            at1 = `${list}.length - ${at1}`;\n        } else if (where1 === 'FIRST') {\n            at1 = '0';\n        }\n\n        if (where2 === 'FROM_START') {\n            at2 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT2', 1);\n        } else if (where2 === 'FROM_END') {\n            at2 = Blockly.JavaScript.javascriptGenerator.getAdjusted(\n                block,\n                'AT2',\n                0,\n                false,\n                Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION\n            );\n            at2 = `${list}.length - ${at2}`;\n        } else if (where2 === 'LAST') {\n            at2 = `${list}.length`;\n        }\n\n        code = `${list}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT2');\n        const where_pascal_case = {\n            FROM_START: 'FromStart',\n            FROM_END: 'FromEnd',\n            FIRST: 'First',\n            LAST: 'Last',\n        };\n\n        const getIndex = (list_name, where, opt_at) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${list_name}.length - 1 - ${opt_at}`;\n            } else if (where === 'LAST') {\n                return `${list_name}.length - 1`;\n            }\n            return `${opt_at}`;\n        };\n\n        const has_at1 = where1 === 'FROM_END' || where1 === 'FROM_START';\n        const has_at2 = where2 === 'FROM_END' || where2 === 'FROM_START';\n\n        // eslint-disable-next-line no-underscore-dangle\n        const function_name = Blockly.JavaScript.javascriptGenerator.provideFunction_(\n            `subsequence${where_pascal_case[where1]}${where_pascal_case[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence${has_at1 ? ', at1' : ''}${has_at2 ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end = ${getIndex('sequence', where2, 'at2')} + 1;\n\n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${function_name}(${list}${has_at1 ? `, ${at1}` : ''}${has_at2 ? `, ${at2}` : ''})`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_split = {\n    init() {\n        const dropdown = new Blockly.FieldDropdown(\n            [\n                [localize('make list from text'), 'SPLIT'],\n                [localize('make text from list'), 'JOIN'],\n            ],\n            newMode => this.updateType(newMode)\n        );\n\n        this.appendValueInput('INPUT').setCheck('String').appendField(dropdown, 'MODE');\n        this.appendValueInput('DELIM')\n            .setCheck('String')\n            .appendField('', 'SPACE1')\n            .appendField(localize('with delimiter'), 'DELIM_LABEL');\n        this.appendDummyInput().appendField('', 'SPACE2');\n\n        this.setOutput(true, 'Array');\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n\n        this.setColour(Blockly.Colours.Base.colour);\n        // eslint-disable-next-line no-underscore-dangle\n\n        this.setTooltip(\n            localize(\n                'This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text.'\n            )\n        );\n    },\n    meta() {\n        return {\n            display_name: localize('Create list from text'),\n            description: localize(\n                'This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('mode', this.getFieldValue('MODE'));\n        return container;\n    },\n    domToMutation(xmlElement) {\n        this.updateType(xmlElement.getAttribute('mode'));\n    },\n    updateType(newMode) {\n        const delimInput = this.getInput('DELIM');\n        const spaceField = this.getField('SPACE1');\n\n        if (newMode === 'SPLIT') {\n            this.outputConnection.setCheck('Array');\n            this.getInput('INPUT').setCheck('String');\n\n            // Create extra spacing for OUTPUT_SHAPE_SQUARE (i.e. string shapes)\n            if (!spaceField) {\n                delimInput.insertFieldAt(0, '', 'SPACE1');\n            }\n        } else {\n            this.outputConnection.setCheck('String');\n            this.getInput('INPUT').setCheck(null);\n\n            if (spaceField) {\n                delimInput.removeField('SPACE1');\n            }\n        }\n\n        this.initSvg();\n        this.renderEfficiently();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_split = block => {\n    const input = Blockly.JavaScript.javascriptGenerator.valueToCode(\n        block,\n        'INPUT',\n        Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n    );\n    const delimiter =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'DELIM',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || \"''\";\n    const mode = block.getFieldValue('MODE');\n\n    let code;\n\n    if (mode === 'SPLIT') {\n        code = `${input || \"''\"}.split(${delimiter})`;\n    } else if (mode === 'JOIN') {\n        code = `${input || '[]'}.join(${delimiter})`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_sort = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('sort {{ sort_type }} {{ sort_direction }} {{ input_list }}', {\n                sort_type: '%1',\n                sort_direction: '%2',\n                input_list: '%3',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE',\n                    options: [\n                        [localize('numeric'), 'NUMERIC'],\n                        [localize('alphabetic'), 'TEXT'],\n                    ],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'DIRECTION',\n                    options: [\n                        [localize('ascending'), '1'],\n                        [localize('descending'), '-1'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            inputsInline: true,\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Sorts the items in a given list'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sort list'),\n            description: localize(\n                'Sorts the items in a given list, by their numeric or alphabetical value, in either ascending or descending order.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            LIST: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_sort = block => {\n    const list =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'LIST',\n            Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL\n        ) || '[]';\n    const direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\n    const type = block.getFieldValue('TYPE');\n    // eslint-disable-next-line no-underscore-dangle\n    const getCompareFunctionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('listsGetSortCompare', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString() > b.toString() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }`,\n    ]);\n\n    const code = `${list}.sort().slice(0).sort(${getCompareFunctionName}(\"${type}\", ${direction}))`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { minusIconDark } from '../../images';\nimport { runIrreversibleEvents, runGroupedEvents, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lists_statement = {\n    required_parent_type: 'lists_create_with',\n    init() {\n        this.required_parent_id = '';\n        const field_image = new Blockly.FieldImage(minusIconDark, 25, 25, '', () => this.onIconClick());\n        this.jsonInit(this.definition());\n        this.appendDummyInput('REMOVE_ICON').appendField(field_image);\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List Statement'),\n            description: '',\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            this.unplug(true);\n            this.dispose();\n        });\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            const surround_parent = this.getSurroundParent();\n\n            if (!surround_parent) {\n                runIrreversibleEvents(() => {\n                    this.dispose();\n                });\n            } else if (!this.required_parent_id && surround_parent.type === this.required_parent_type) {\n                // Create connection between parent and orphaned child.\n                this.required_parent_id = surround_parent.id;\n            } else if (surround_parent.id !== this.required_parent_id) {\n                // Someone pretending to be this child's parent. Find original parent and reconnect.\n                // Happens when someone tries to connect a statement block and Blockly automagically\n                // reconnects the children to this foreign statement block.\n                const all_blocks = this.workspace.getAllBlocks();\n                const original_parent = all_blocks.find(block => block.id === this.required_parent_id);\n\n                if (original_parent) {\n                    const last_connection = original_parent.getLastConnectionInStatement('STACK');\n\n                    runIrreversibleEvents(() => {\n                        last_connection.connect(this.previousConnection);\n                    });\n                } else {\n                    // Dispose child if it became a child of an illegal parent and original parent\n                    // is nowhere to be found.\n                    runIrreversibleEvents(() => {\n                        this.dispose(/* healStack */ true);\n                    });\n                }\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lists_statement = block => {\n    const code =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || 'null';\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.controls_repeat_ext = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('repeat {{ number }} times', { number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TIMES',\n                    check: 'Number',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Repeats inside instructions specified number of times'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat (2)'),\n            description: localize(\n                'This block is similar to the block above, except that the number of times it repeats is determined by a given variable.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TIMES: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_repeat_ext = block => {\n    let repeats;\n    if (block.getField('TIMES')) {\n        repeats = String(Number(block.getFieldValue('TIMES')));\n    } else {\n        repeats =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'TIMES',\n                Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n            ) || '0';\n    }\n\n    const branch = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'DO');\n    let code = '';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const loopVar = Blockly.JavaScript.variableDB_.getDistinctName('count', Blockly.Variables.CATEGORY_NAME);\n    let endVar = repeats;\n\n    if (!repeats.match(/^\\w+$/) && !Blockly.isNumber(repeats)) {\n        // eslint-disable-next-line no-underscore-dangle\n        endVar = Blockly.JavaScript.variableDB_.getDistinctName('repeat_end', Blockly.Variables.CATEGORY_NAME);\n        code += `var ${endVar} = ${repeats};\\n`;\n    }\n\n    code += `\n    for (var ${loopVar} = 0; ${loopVar} < ${endVar}; ${loopVar}++) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.controls_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'controls_repeat',\n            message0: localize('repeat {{ number }} times', { number: '%1' }),\n            args0: [\n                {\n                    type: 'field_number',\n                    name: 'TIMES',\n                    value: 10,\n                    min: 0,\n                    precision: 1,\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Repeats inside instructions specified number of times'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat (1)'),\n            description: localize(\n                'This block repeats the instructions contained within for a specific number of times.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_repeat =\n    Blockly.JavaScript.javascriptGenerator.forBlock.controls_repeat_ext;\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.controls_whileUntil = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('repeat {{ while_or_until }} {{ boolean }}', { while_or_until: '%1', boolean: '%2' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MODE',\n                    options: [\n                        [localize('while'), 'WHILE'],\n                        [localize('until'), 'UNTIL'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                    check: 'Boolean',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block repeats instructions as long as a given condition is true'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat While/Until'),\n            description: localize('This block repeats instructions as long as a given condition is true.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            BOOL: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_whileUntil = block => {\n    const branch = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'DO');\n    const until = block.getFieldValue('MODE') === 'UNTIL';\n    const order = until\n        ? Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT\n        : Blockly.JavaScript.javascriptGenerator.ORDER_NONE;\n    let argument0 = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'BOOL', order) || 'false';\n\n    if (until) {\n        argument0 = `!${argument0}`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const maxLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('maxLoops', Blockly.Variables.CATEGORY_NAME);\n    // eslint-disable-next-line no-underscore-dangle\n    const currentLoopVar = Blockly.JavaScript.variableDB_.getDistinctName(\n        'currentLoop',\n        Blockly.Variables.CATEGORY_NAME\n    );\n\n    return `\n        var ${maxLoopVar} = 10000;\n        var ${currentLoopVar} = 0;\n\n        while (${argument0}) {\n            if (${currentLoopVar} > ${maxLoopVar}) {\n                throw new Error(\"${localize('Infinite loop detected')}\");\n            } else {\n                ${currentLoopVar}++;\n            }\n            \n            ${branch}\n        }\\n`;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.controls_for = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'count with {{ variable }} from {{ start_number }} to {{ end_number }} by {{ step_size }}',\n                {\n                    variable: '%1',\n                    start_number: '%2',\n                    end_number: '%3',\n                    step_size: '%4',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: null,\n                },\n                {\n                    type: 'input_value',\n                    name: 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TO',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'BY',\n                    check: 'Number',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.'\n            ),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Iterate (1)'),\n            description: localize(\n                'This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            FROM: null,\n            TO: null,\n            BY: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_for = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VAR'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'FROM',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT\n        ) || '0';\n    const argument1 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TO',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT\n        ) || '0';\n    const increment =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'BY',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT\n        ) || '1';\n\n    let branch = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.javascriptGenerator.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    if (Blockly.isNumber(argument0) && Blockly.isNumber(argument1) && Blockly.isNumber(increment)) {\n        const up = parseFloat(argument0) <= parseFloat(argument1);\n        const operator = up ? '<=' : '>=';\n        const step = Math.abs(parseFloat(increment));\n\n        const assignment = `${variable0} = ${argument0}`;\n        const condition = `${variable0} ${operator} ${argument1}`;\n        const statement = `${variable0} ${up ? '+=' : '-='} ${step}`;\n\n        code = `\n        for (${assignment}; ${condition}; ${statement}) {\n            ${branch}\n        }\\n`;\n    } else {\n        // Cache non-trivial values to variables to prevent repeated look-ups.\n        let startVar = argument0;\n        if (!argument0.match(/^\\w+$/) && !Blockly.isNumber(argument0)) {\n            // eslint-disable-next-line no-underscore-dangle\n            startVar = Blockly.JavaScript.variableDB_.getDistinctName(\n                `${variable0}_start`,\n                Blockly.Variables.CATEGORY_NAME\n            );\n            code = `var ${startVar} = ${argument0};\\n`;\n        }\n\n        let endVar = argument1;\n        if (!argument1.match(/^\\w+$/) && !Blockly.isNumber(argument1)) {\n            // eslint-disable-next-line no-underscore-dangle\n            endVar = Blockly.JavaScript.variableDB_.getDistinctName(\n                `${variable0}_end`,\n                Blockly.Variables.CATEGORY_NAME\n            );\n            code += `var ${endVar} = ${argument1};\\n`;\n        }\n\n        // Determine loop direction at start, in case one of the bounds changes during loop execution.\n        // eslint-disable-next-line no-underscore-dangle\n        const incVar = Blockly.JavaScript.variableDB_.getDistinctName(\n            `${variable0}_inc`,\n            Blockly.Variables.CATEGORY_NAME\n        );\n        const incVal = Blockly.isNumber(increment) ? Math.abs(increment) : `Math.abs(${increment})`;\n\n        code += `\n        var ${incVar} = ${incVal};\n        if (${startVar} > ${endVar}) {\n            ${incVar} = -${incVar};\n        }\n        for (\n           ${variable0} = ${startVar}; \n           ${incVar} >= 0 ? ${variable0} <= ${endVar} : ${variable0} >= ${endVar};\n           ${variable0} += ${incVar}\n        ) {\n            ${branch};\n        }\\n`;\n    }\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.controls_forEach = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('for each item {{ variable }} in list {{ input_list }}', {\n                variable: '%1',\n                input_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: null,\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                    check: 'Array',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Iterates through a given list'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Iterate (2)'),\n            description: localize(\n                'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            LIST: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_forEach = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VAR'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'LIST',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT\n        ) || '[]';\n\n    let branch = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.javascriptGenerator.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    // Cache non-trivial values to variables to prevent repeated look-ups.\n    let listVar = argument0;\n    if (!argument0.match(/^\\w+$/)) {\n        // eslint-disable-next-line no-underscore-dangle\n        listVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.CATEGORY_NAME);\n        code = `var ${listVar} = ${argument0};\\n`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const indexVar = Blockly.JavaScript.variableDB_.getDistinctName(\n        `${variable0}_list`,\n        Blockly.Variables.CATEGORY_NAME\n    );\n\n    code += `\n    for (var ${indexVar} in ${listVar}) {\n        ${variable0} = ${listVar}[${indexVar}];\n        ${branch}\n    }\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.controls_flow_statements = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ break_or_continue }} of loop', { break_or_continue: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'FLOW',\n                    options: [\n                        [localize('break out'), 'BREAK'],\n                        [localize('continue with next iteration'), 'CONTINUE'],\n                    ],\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n            ),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Break out/continue'),\n            description: localize(\n                'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_flow_statements = block => {\n    const keyword = block.getFieldValue('FLOW') === 'BREAK' ? 'break' : 'continue';\n    return `${keyword};\\n`;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.variables_get = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'variables_get',\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special4.colour,\n            colourSecondary: Blockly.Colours.Special4.colourSecondary,\n            colourTertiary: Blockly.Colours.Special4.colourTertiary,\n            tooltip: localize('Gets variable value'),\n            category: Blockly.Categories.Variables,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('User-defined variable'),\n            description: '',\n        };\n    },\n    onchange(event) {\n        if (event.type === Blockly.Events.VAR_RENAME) {\n            const all_blocks = this.workspace.getAllBlocks();\n            const function_blocks = all_blocks.filter(block => block.category_ === 'custom_functions');\n            const old_param = event.oldName;\n            const new_param = event.newName;\n            function_blocks.forEach(block => {\n                if (block.arguments?.length) {\n                    const param_index = block.arguments.findIndex(item => item === old_param);\n                    if (param_index !== -1) {\n                        block.arguments[param_index] = new_param;\n                        const param_field = block.getField('PARAMS');\n                        if (param_field) {\n                            block.setFieldValue(`${localize('with: ')} ${block.arguments.join(', ')}`, 'PARAMS');\n                        }\n                        const with_field = block.getField('WITH');\n                        if (with_field) {\n                            block.updateShape();\n                        }\n                    }\n                }\n            });\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.variables_get = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.CATEGORY_NAME);\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.variables_set = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'field_variable',\n            message0: localize('set {{ variable }} to {{ value }}', {\n                variable: '%1',\n                value: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Sets variable value'),\n            category: Blockly.Categories.Variables,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Set variable'),\n            description: localize('Assigns a given value to a variable'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.variables_set = block => {\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT\n        ) || '0';\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.CATEGORY_NAME);\n\n    const code = `${varName} = ${argument0};\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { finishSign } from '../../images';\nimport { appendCollapsedMainBlocksFields, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.after_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            message2: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: finishSign,\n                    width: 25,\n                    height: 25,\n                    alt: 'F',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('4. Restart trading conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'AFTERPURCHASE_STACK',\n                    check: 'TradeAgain',\n                },\n            ],\n            args2: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 380,\n                    height: 10,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Get the last trade information and result, then trade again.'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Restart trading conditions'),\n            description: localize('Here is where you can decide if your bot should continue trading.'),\n        };\n    },\n    onchange(event) {\n        if (\n            event.type === Blockly.Events.BLOCK_CHANGE ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart)\n        ) {\n            if (this.isCollapsed()) {\n                appendCollapsedMainBlocksFields(this);\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.after_purchase = block => {\n    const stack = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'AFTERPURCHASE_STACK');\n    const code = `\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n        Bot.isTradeAgain(false);\n        return false;\n    };`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.contract_check_result = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Result is {{ win_or_loss }}', { win_or_loss: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CHECK_RESULT',\n                    options: config.lists.CHECK_RESULT,\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if the result of the last trade matches the selection'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last trade result'),\n            description: localize('You can check the result of the last trade with this block.'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (\n            event.type === Blockly.Events.BLOCK_CREATE ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart)\n        ) {\n            const top_parent = this.getTopParent();\n\n            if (top_parent) {\n                const is_illegal_root_block = top_parent.isMainBlock() && top_parent.type !== 'after_purchase';\n\n                if (is_illegal_root_block) {\n                    this.setDisabled(true);\n                }\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.contract_check_result = block => {\n    const checkWith = block.getFieldValue('CHECK_RESULT');\n\n    const code = `Bot.isResult('${checkWith}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.read_details = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Contract Details: {{ contract_detail }}', { contract_detail: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'DETAIL_INDEX',\n                    options: config.lists.DETAILS,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND, // TODO: Investigate why block glitches in square shape.\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Reads a selected property from contract details list'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Contract details'),\n            description: localize('This block gives you information about your last contract.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['after_purchase'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.read_details = block => {\n    const detailIndex = block.getFieldValue('DETAIL_INDEX');\n\n    const code = `Bot.readDetails(${detailIndex})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.trade_again = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Trade again'),\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            tooltip: localize('These blocks transfer control to the Purchase conditions block.'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade again'),\n            description: localize(\n                'This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract.'\n            ),\n            key_words: localize('restart'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['after_purchase'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_again = () => {\n    const code = `\n        Bot.isTradeAgain(true);\\n\n        return true;\\n\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { purchase } from '../../images';\nimport { appendCollapsedMainBlocksFields, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.before_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n        this.setDeletable(false);\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            message2: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: purchase,\n                    width: 25,\n                    height: 25,\n                    alt: 'P',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('2. Purchase conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'BEFOREPURCHASE_STACK',\n                    check: 'Purchase',\n                },\n            ],\n            args2: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 380,\n                    height: 10,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Specify contract type and purchase conditions.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    onchange(event) {\n        if (\n            event.type === Blockly.Events.BLOCK_CHANGE ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart)\n        ) {\n            if (this.isCollapsed()) {\n                appendCollapsedMainBlocksFields(this);\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase conditions'),\n            description: localize(\n                'This block is mandatory. Only one copy of this block is allowed. You can place the Purchase block (see below) here as well as conditional blocks to define your purchase conditions.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.before_purchase = block => {\n    const stack = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'BEFOREPURCHASE_STACK');\n\n    const code = `BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { getContractTypeOptions } from '../../../shared';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.purchase = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Purchase {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            previousStatement: null,\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            tooltip: localize('This block purchases contract of a specified type.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase'),\n            description: localize(\n                'Use this block to purchase the specific contract you want. You may add multiple Purchase blocks together with conditional blocks to define your purchase conditions. This block can only be used within the Purchase conditions block.'\n            ),\n            key_words: localize('buy'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.populatePurchaseList(event);\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TYPE_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.populatePurchaseList(event);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart && event.blockId === this.id) {\n            const purchase_type_list = this.getField('PURCHASE_LIST');\n            const purchase_options = purchase_type_list.menuGenerator_; // eslint-disable-line\n\n            if (purchase_options[0][0] === '') {\n                this.populatePurchaseList(event);\n            }\n        }\n    },\n    populatePurchaseList(event) {\n        const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n\n        if (trade_definition_block) {\n            const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n            const trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n            const contract_type_block = trade_definition_block.getChildByType('trade_definition_contracttype');\n            const contract_type = contract_type_block.getFieldValue('TYPE_LIST');\n            const purchase_type_list = this.getField('PURCHASE_LIST');\n            const purchase_type = purchase_type_list.getValue();\n            const contract_type_options = getContractTypeOptions(contract_type, trade_type);\n\n            purchase_type_list.updateOptions(contract_type_options, {\n                default_value: purchase_type,\n                event_group: event.group,\n                should_pretend_empty: true,\n            });\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['before_purchase'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.purchase = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.purchase('${purchaseList}');\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.ask_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ask Price {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns the purchase price for the selected trade type.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase price'),\n            description: localize(\n                'This block returns the purchase price for the selected trade type. This block can be used only in the \"Purchase conditions\" root block.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.purchase.onchange,\n    populatePurchaseList: Blockly.Blocks.purchase.populatePurchaseList,\n    enforceLimitations: Blockly.Blocks.purchase.enforceLimitations,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.ask_price = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getAskPrice('${purchaseList}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.payout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Payout {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns the potential payout for the selected trade type'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Potential payout'),\n            description: localize(\n                'This block returns the potential payout for the selected trade type. This block can be used only in the \"Purchase conditions\" root block.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.purchase.onchange,\n    populatePurchaseList: Blockly.Blocks.purchase.populatePurchaseList,\n    enforceLimitations: Blockly.Blocks.purchase.enforceLimitations,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.payout = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getPayout('${purchaseList}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { sellContract } from '../../images';\nimport { appendCollapsedMainBlocksFields, modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.during_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            message2: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: sellContract,\n                    width: 25,\n                    height: 25,\n                    alt: 'S',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('3. Sell conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DURING_PURCHASE_STACK',\n                    check: 'SellAtMarket',\n                },\n            ],\n            args2: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 380,\n                    height: 10,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Sell your active contract if needed (optional)'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sell conditions'),\n            description: localize(\n                'Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (\n            event.type === Blockly.Events.BLOCK_CHANGE ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart)\n        ) {\n            if (this.isCollapsed()) {\n                appendCollapsedMainBlocksFields(this);\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.during_purchase = block => {\n    const stack = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'DURING_PURCHASE_STACK');\n\n    const code = `BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.sell_at_market = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell at market price'),\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Use this block to sell your contract at the market price.'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sell at market price'),\n            description: localize('Use this block to sell your contract at the market price.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.sell_at_market = () => 'Bot.sellAtMarket();\\n';\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.check_sell = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell is available'),\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if active contract can be sold before expiration at current market price'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Can contract be sold?'),\n            description: localize(\n                'This block helps you check if your contract can be sold. If your contract can be sold, it returns “True”. Otherwise, it returns an empty string.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.check_sell = () => {\n    const code = 'Bot.isSellAvailable()';\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.sell_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell profit/loss'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the profit/loss from selling at market price'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Profit/loss from selling'),\n            description: localize(\n                'This block gives you the potential profit or loss if you decide to sell your contract.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.sell_price = () => {\n    const code = 'Bot.getSellPrice()';\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.bb_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Bollinger Bands {{ band_type }} {{ dummy }}', {\n                variable: '%1',\n                band_type: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'bb',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Bollinger Bands (BB) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Bollinger Bands (BB)'),\n            description: localize(\n                'BB is a technical analysis indicator that’s commonly used by traders. The idea behind BB is that the market price stays within the upper and lower bands for 95% of the time. The bands are the standard deviations of the market price, while the line in the middle is a simple moving average line. If the price reaches either the upper or lower band, there’s a possibility of a trend reversal.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            const blocksInStatement = this.getBlocksInStatement('STATEMENT');\n            blocksInStatement.forEach(block => {\n                if (!this.required_child_blocks.includes(block.type)) {\n                    Blockly.Events.disable();\n                    block.unplug(false);\n                    Blockly.Events.enable();\n                }\n            });\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.bb_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const bb_result = block.getFieldValue('BBRESULT_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const std_dev_up = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER');\n    const std_dev_down = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER');\n    const code = `${var_name} = Bot.bb(${input}, { \n        periods: ${period}, \n        stdDevUp: ${std_dev_up}, \n        stdDevDown: ${std_dev_down} \n    }, ${bb_result});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.bba_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Bollinger Bands Array {{ band_type }} {{ dummy }}', {\n                variable: '%1',\n                band_type: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'bba',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Bollinger Bands (BB) list from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Bollinger Bands Array (BBA)'),\n            description: localize(\n                'Similar to BB. This block gives you a choice of returning the values of either the lower band, higher band, or the SMA line in the middle.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.bba_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const bb_result = block.getFieldValue('BBRESULT_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const std_dev_up = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER');\n    const std_dev_down = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER');\n    const code = `${var_name} = Bot.bba(${input}, { \n        periods: ${period}, \n        stdDevUp: ${std_dev_up}, \n        stdDevDown: ${std_dev_down} \n    }, ${bb_result});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.ema_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Exponential Moving Average {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'ema',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Exponential Moving Average (EMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Exponential Moving Average (EMA)'),\n            description: localize(\n                'EMA is a type of moving average that places more significance on the most recent data points. It’s also known as the exponentially weighted moving average. EMA is different from SMA in that it reacts more significantly to recent price changes.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.ema_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.ema(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.emaa_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Exponential Moving Average Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'emaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Exponential Moving Average (EMA) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Exponential Moving Average Array (EMAA)'),\n            description: localize(\n                'This block is similar to EMA, except that it gives you the entire EMA line based on the input list and the given period.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.emaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.emaa(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.rsi_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Relative Strength Index {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'rsi',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Relative Strength Index (RSI) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Relative Strength Index (RSI)'),\n            description: localize(\n                'RSI is a technical analysis tool that helps you identify the market trend. It will give you a value from 0 to 100. An RSI value of 70 and above means that the asset is overbought and the current trend may reverse, while a value of 30 and below means that the asset is oversold.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.rsi_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.rsi(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.rsia_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Relative Strength Index Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'rsia',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Relative Strength Index (RSI) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Relative Strength Index Array (RSIA)'),\n            description: localize(\n                'Similar to RSI, this block gives you a list of values for each entry in the input list.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.rsia_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.rsia(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.sma_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Simple Moving Average {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'sma',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Simple Moving Average (SMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Simple Moving Average (SMA)'),\n            description: localize(\n                'SMA is a frequently used indicator in technical analysis. It calculates the average market price over a specified period, and is usually used to identify market trend direction: up or down. For example, if the SMA is moving upwards, it means the market trend is up. '\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.sma_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.sma(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.smaa_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Simple Moving Average Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'smaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Simple Moving Average line from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Simple Moving Average Array (SMAA)'),\n            description: localize(\n                'Similar to SMA, this block gives you the entire SMA line containing a list of all values for a given period.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.smaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.smaa(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.macda_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'fast_ema_period', 'slow_ema_period', 'signal_ema_period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to MACD Array {{ dropdown }} {{ dummy }}', {\n                variable: '%1',\n                dropdown: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'macda',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'MACDFIELDS_LIST',\n                    options: config.macdFields,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Moving Average Convergence Divergence (MACD) from a list'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Moving Average Convergence Divergence'),\n            description: localize(\n                'MACD is calculated by subtracting the long-term EMA (26 periods) from the short-term EMA (12 periods). If the short-term EMA is greater or lower than the long-term EMA than there’s a possibility of a trend reversal.'\n            ),\n        };\n    },\n\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.macda_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const macd_field = block.getFieldValue('MACDFIELDS_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const fast_ema_period = block.childValueToCode('fast_ema_period', 'FAST_EMA_PERIOD');\n    const slow_ema_period = block.childValueToCode('slow_ema_period', 'SLOW_EMA_PERIOD');\n    const signal_ema_period = block.childValueToCode('signal_ema_period', 'SIGNAL_EMA_PERIOD');\n    const code = `${var_name} = Bot.macda(${input}, { \n        fastEmaPeriod: ${fast_ema_period},\n        slowEmaPeriod: ${slow_ema_period},\n        signalEmaPeriod: ${signal_ema_period},\n    }, ${macd_field});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { runIrreversibleEvents, modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.input_list = {\n    init() {\n        this.jsonInit({\n            message0: localize('Input List {{ input_list }}', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'INPUT_LIST',\n                    check: 'Array',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        const setParentId = () => {\n            const surround_parent = this.getSurroundParent();\n            if (surround_parent && !this.required_parent_id && this.allowed_parents.includes(surround_parent.type)) {\n                this.required_parent_id = surround_parent.id;\n            }\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            setParentId();\n        } else if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            setParentId();\n\n            const surround_parent = this.getSurroundParent();\n            const has_parent = !!surround_parent;\n            const is_illegal_parent = !has_parent || surround_parent.id !== this.required_parent_id;\n\n            if (!has_parent || is_illegal_parent) {\n                runIrreversibleEvents(() => {\n                    this.unplug(true);\n\n                    // Attempt to re-connect this child to its original parent.\n                    const all_blocks = this.workspace.getAllBlocks();\n                    const parent_block = all_blocks.find(block => block.id === this.required_parent_id);\n\n                    if (parent_block) {\n                        const parent_connection = parent_block.getLastConnectionInStatement('STATEMENT');\n                        parent_connection.connect(this.previousConnection);\n                    } else {\n                        this.dispose();\n                    }\n                });\n            }\n        }\n    },\n    allowed_parents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n    getRequiredValueInputs() {\n        return {\n            INPUT_LIST: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.input_list = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Period {{ input_period }}', { input_period: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    allowed_parents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n    getRequiredValueInputs() {\n        return {\n            PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.period = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.std_dev_multiplier_up = {\n    init() {\n        this.jsonInit({\n            message0: localize('Standard Deviation Up Multiplier {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'UPMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['bb_statement', 'bba_statement'],\n    getRequiredValueInputs() {\n        return {\n            UPMULTIPLIER: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.std_dev_multiplier_up = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.std_dev_multiplier_down = {\n    init() {\n        this.jsonInit({\n            message0: localize('Standard Deviation Down Multiplier {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DOWNMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['bb_statement', 'bba_statement'],\n    getRequiredValueInputs() {\n        return {\n            DOWNMULTIPLIER: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.std_dev_multiplier_down = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.fast_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Fast EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'FAST_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            FAST_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.fast_ema_period = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.slow_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Slow EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'SLOW_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            SLOW_EMA_PERIOD: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.slow_ema_period = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.signal_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Signal EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'SIGNAL_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            SIGNAL_EMA_PERIOD: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.signal_ema_period = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.tick = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Tick'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the value of the last tick'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last tick'),\n            description: localize('This block gives you the value of the last tick.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.Blocks.tick_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Tick String'),\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the value of the latest tick in string format'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick value'),\n            description: localize('Tick value Description'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.tick.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.tick = block => {\n    const parent = block.getParent();\n    const type_list = ['notify', 'text_print'];\n    return [\n        `Bot.getLastTick(false, ${type_list.includes(parent?.type)})`,\n        Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n    ];\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.tick_string = () => [\n    'Bot.getLastTick(false, true)',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.ticks = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ticks list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a list of the last 1000 tick values.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick list'),\n            description: localize('This block gives you a list of the last 1000 tick values.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.Blocks.ticks_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ticks String List'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of tick values in string format'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick List String'),\n            description: localize('Tick List String Description'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange: Blockly.Blocks.ticks.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.ticks = block => {\n    const parent = block.getParent();\n    const type_list = ['notify', 'text_print'];\n    return [`Bot.getTicks(${type_list.includes(parent?.type)})`, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.ticks_string = () => [\n    'Bot.getTicks(true)',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Candles List with interval here 2: {{ candle_interval_type }}', {\n                candle_interval_type: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a list of candles within a selected time interval.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get candle list'),\n            description: localize('This block gives you a list of candles within a selected time interval.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n\n    const code = `Bot.getOhlc({ granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.ohlc_values = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Make a List of {{ candle_property }} values in candles list with interval: {{ candle_interval_type }}',\n                {\n                    candle_property: '%1',\n                    candle_interval_type: '%2',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'Returns a list of specific values from a candle list according to selected time interval'\n            ),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create a list of candle values (1)'),\n            description: localize(\n                'This block gives you the selected candle value from a list of candles within the selected time interval.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.ohlc_values = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n\n    const code = `Bot.getOhlc({ field: '${ohlcField}', granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.read_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('In candles list read {{ candle_property }} # from end {{ input_number }}', {\n                candle_property: '%1',\n                input_number: '%2',\n            }),\n            message1: localize('with interval: %1'),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Read the selected candle value'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Read candle value (1)'),\n            description: localize('This block gives you the specified candle value for a selected time interval.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            CANDLEINDEX: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.read_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const index =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'CANDLEINDEX',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ field: '${ohlcField}', index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.get_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('in candle list get # from end {{ input_number }}', { input_number: '%1' }),\n            message1: localize('with interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Candle',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a specific candle from within the selected time interval.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get candle'),\n            description: localize('This block gives you a specific candle from within the selected time interval.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            CANDLEINDEX: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.get_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const index =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'CANDLEINDEX',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.check_direction = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Direction is {{ direction_type }}', { direction_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CHECK_DIRECTION',\n                    options: config.lists.CHECK_DIRECTION,\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if the market direction matches the selection'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Market direction'),\n            description: localize(\n                'This block is used to determine if the market price moves in the selected direction or not. It gives you a value of “True” or “False”.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.check_direction = block => {\n    const checkWith = block.getFieldValue('CHECK_DIRECTION');\n\n    const code = `Bot.checkDirection('${checkWith}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.tick_analysis = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: localize('The content of this block is called on every tick'),\n                    class: 'blocklyTextTickAnalysis',\n                },\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TICKANALYSIS_STACK',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('You can use this block to analyze the ticks, regardless of your trades'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Run on every tick'),\n            description: localize(\n                'The content of this block is called on every tick. Place this block outside of any root block.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.tick_analysis = block => {\n    const stack = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'TICKANALYSIS_STACK') || '';\n    const code = `\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        ${stack}\n    });\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.last_digit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Digit'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the last digit of the latest tick'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last Digit'),\n            description: localize('This block gives you the last digit of the latest tick value.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.last_digit = () => [\n    'Bot.getLastDigit()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.lastDigitList = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last digits list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of last digits of 1000 recent tick values'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last Digits List'),\n            description: localize('This block gives you a list of the last digits of the last 1000 tick values.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.lastDigitList = () => [\n    'Bot.getLastDigitList()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.stat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Current Stat'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the Current Stat'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Current Stat'),\n            description: localize('This block gives you the Current Stat value.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.stat = () => [\n    'Bot.getCurrentStat()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.stat_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Current stat list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of last digits of 1000 recent tick values'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Current stat list'),\n            description: localize('This block gives you a list of the cuurent stats of the last 1000 tick values.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.stat_list = () => [\n    'Bot.getStatList()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.is_candle_black = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Is candle {{ input_candle }} black?', { input_candle: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                    check: 'Candle',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns \"True\" if the given candle is black'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Is candle black?'),\n            description: localize(\n                'This block returns “True” if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCOBJ: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.is_candle_black = block => {\n    const ohlcObj =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'OHLCOBJ',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '{}';\n\n    const code = `Bot.isCandleBlack(${ohlcObj})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.ohlc_values_in_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Make a list of {{ candle_property }} values from candles list {{ candle_list }}', {\n                candle_property: '%1',\n                candle_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCLIST',\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a list of specific values from a given candle list'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create a list of candle values (2)'),\n            description: localize('This block gives you the selected candle value from a list of candles.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCLIST: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.ohlc_values_in_list = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST') || 'open';\n    const ohlcList =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'OHLCLIST',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '[]';\n\n    const code = `Bot.candleValues(${ohlcList}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.read_ohlc_obj = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Read {{ candle_property }} value in candle {{ input_candle }}', {\n                candle_property: '%1',\n                input_candle: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the selected candle value.'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Read candle value (2)'),\n            description: localize('This block gives you the selected candle value.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCOBJ: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.read_ohlc_obj = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const ohlcObj =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'OHLCOBJ',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '{}';\n\n    const code = `Bot.candleField(${ohlcObj}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.balance = {\n    init() {\n        this.jsonInit(this.definition());\n        const balanceTypeField = this.getField('BALANCE_TYPE');\n        balanceTypeField.setValidator(value => {\n            if (value === 'STR') {\n                this.setOutput(true, 'String');\n            } else if (value === 'NUM') {\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            return undefined;\n        });\n    },\n    definition() {\n        return {\n            message0: localize('Balance: %1'),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BALANCE_TYPE',\n                    options: config.lists.BALANCE_TYPE,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns account balance'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Account balance'),\n            description: localize(\n                'This block gives you the balance of your account either as a number or a string of text.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.balance = block => {\n    const balanceType = block.getFieldValue('BALANCE_TYPE');\n\n    const code = `Bot.getBalance('${balanceType}')`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\nimport { modifyContextMenu } from '../../../../utils';\n\n// This block is a remnant of a very old Binary Bot version.\n// needs to be here for backward compatibility.\nBlockly.Blocks.barrier_offset = {\n    init() {\n        this.jsonInit({\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BARRIEROFFSET_IN',\n                    options: config.BARRIER_TYPES,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Adds a sign to a number to create a barrier offset. (deprecated)'),\n            category: Blockly.Categories.Miscellaneous,\n        });\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.barrier_offset = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.block_holder = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: 'Ignore',\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'USELESS_STACK',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Put your blocks in here to prevent them from being removed'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Ignore'),\n            description: localize(\n                'Use this block if you want some instructions to be ignored when your bot runs. Instructions within this block won’t be executed.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.block_holder = () => '';\n","import { localize } from '@deriv/translations';\nimport { loadBlocksFromRemote, runIrreversibleEvents, modifyContextMenu } from '../../../../utils';\nimport { observer as globalObserver } from '../../../../../utils/observer';\nimport { LogTypes } from '../../../../../constants/messages';\n\nBlockly.Blocks.loader = {\n    init() {\n        this.blocks_added_by_me = [];\n        this.current_url = '';\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Load block from URL: {{ input_url }}', { input_url: '%1' }),\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'URL',\n                    text: 'http://www.example.com/block.xml',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Loads blocks from URL'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Loads from URL'),\n            description: localize(\n                'This block allows you to load blocks from a URL if you have them stored on a remote server, and they will be loaded only when your bot runs.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.current_url = this.getFieldValue('URL');\n            const loader_blocks = this.workspace.getAllBlocks().filter(block => block.type === 'loader');\n\n            loader_blocks.forEach(loader_block => {\n                if (loader_block.id !== this.id && loader_block.current_url === this.current_url) {\n                    this.setDisabled(true);\n                }\n            });\n\n            if (!this.disabled) {\n                this.loadBlocksFromCurrentUrl();\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === this.id) {\n            if (event.newValue && event.oldValue !== event.newValue) {\n                if (event.newValue === this.current_url) {\n                    this.setDisabled(false);\n                } else if (this.isValidUrl(event.newValue) && !this.isKnownUrl(event.newValue)) {\n                    this.setDisabled(false);\n                    this.loadBlocksFromCurrentUrl();\n                } else {\n                    this.setDisabled(true);\n                }\n            }\n        }\n    },\n    loadBlocksFromCurrentUrl() {\n        this.current_url = this.getFieldValue('URL');\n\n        runIrreversibleEvents(() => {\n            // Remove blocks previously loaded by this block.\n            this.blocks_added_by_me.forEach(block => block.dispose());\n        });\n\n        loadBlocksFromRemote(this)\n            .then(() => {\n                globalObserver.emit('ui.log.success', { log_type: LogTypes.LOAD_BLOCK });\n            })\n            .catch(error_msg => {\n                globalObserver.emit('ui.log.error', error_msg);\n                this.setDisabled(true);\n            });\n    },\n    isKnownUrl(url) {\n        const loader_blocks = this.workspace.getAllBlocks().filter(block => block.type === 'loader');\n        return loader_blocks.some(block => block.id !== this.id && block.current_url === url);\n    },\n    isValidUrl(url) {\n        const url_pattern = /[^/]*\\.[a-zA-Z]{3}$/;\n        return String(url).match(url_pattern);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.loader = () => {};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../../../utils';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.notify = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Notify {{ notification_type }} with sound: {{ notification_sound }} {{ input_message }}',\n                {\n                    notification_type: '%1',\n                    notification_sound: '%2',\n                    input_message: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'NOTIFICATION_TYPE',\n                    options: config.lists.NOTIFICATION_TYPE,\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'NOTIFICATION_SOUND',\n                    options: config.lists.NOTIFICATION_SOUND,\n                },\n                {\n                    type: 'input_value',\n                    name: 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Displays a notification and optionally play selected sound'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Notify'),\n            description: localize(\n                'This block displays a message. You can specify the color of the message and choose from 6 different sound options.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.notify = block => {\n    const notificationType = block.getFieldValue('NOTIFICATION_TYPE');\n    const sound = block.getFieldValue('NOTIFICATION_SOUND');\n    const message_block = block.getInputTargetBlock('MESSAGE');\n    let variable_name = null;\n\n    if (message_block.type === 'variables_get') {\n        const variable_id = message_block.getFieldValue('VAR');\n        variable_name = Blockly.derivWorkspace.getVariableById(variable_id).name;\n    }\n\n    const message =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'MESSAGE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || `\"${localize('<empty message>')}\"`;\n\n    const code = `Bot.notify({ className: 'journal__text--${notificationType}', message: ${message}, sound: '${sound}', block_id: '${block.id}', variable_name: '${variable_name}' });\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.notify_telegram = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Notify Telegram %1 Access Token: %2 Chat ID: %3 Message: %4'),\n            args0: [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_ACCESS_TOKEN',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_CHAT_ID',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_MESSAGE',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Sends a message to Telegram'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Notify Telegram'),\n            description: localize('This block sends a message to a Telegram channel.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TELEGRAM_ACCESS_TOKEN: emptyTextValidator,\n            TELEGRAM_CHAT_ID: emptyTextValidator,\n            TELEGRAM_MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.notify_telegram = block => {\n    const access_token =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TELEGRAM_ACCESS_TOKEN',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '';\n    const chat_id =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TELEGRAM_CHAT_ID',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '';\n    const message =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TELEGRAM_MESSAGE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '';\n\n    if (!access_token || !chat_id || !message) {\n        return '';\n    }\n\n    const code = `Bot.notifyTelegram(${access_token}, ${chat_id}, ${message});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.total_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Total profit/loss'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the total profit/loss'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Total profit/loss'),\n            description: localize(\n                'This block gives you the total profit/loss of your trading strategy since your bot started running. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) ||\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id))\n        ) {\n            const input_statement = this.getRootInputTargetBlock();\n\n            if (input_statement === 'INITIALIZATION') {\n                this.unplug(true);\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.Blocks.total_profit_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Total Profit String'),\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the total profit in string format'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Total Profit String'),\n            description: localize('Total Profit String Description'),\n        };\n    },\n    onchange: Blockly.Blocks.total_profit.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.total_profit = () => [\n    'Bot.getTotalProfit(false)',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\nBlockly.JavaScript.javascriptGenerator.forBlock.total_profit_string = () => [\n    'Bot.getTotalProfit(true)',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.total_runs = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Number of runs'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the number of runs'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Number of runs'),\n            description: localize(\n                'This block gives you the total number of times your bot has run. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.total_profit.onchange,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.total_runs = () => [\n    'Bot.getTotalRuns()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.useless_block = {\n    init() {\n        this.jsonInit({\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: localize('Conversion Helper Block'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('This block was required to correctly convert your old strategy.'),\n            category: Blockly.Categories.Miscellaneous,\n            nextStatement: null,\n            previousStatement: null,\n        });\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.useless_block = () => {};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.console = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Console {{ message_type }} value: {{ input_message }}', {\n                message_type: '%1',\n                input_message: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CONSOLE_TYPE',\n                    options: [\n                        [localize('Log'), 'log'],\n                        [localize('Warn'), 'warn'],\n                        [localize('Error'), 'error'],\n                        [localize('Table'), 'table'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Display messages in the developer’s console.'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Console'),\n            description: localize(\n                \"This block displays messages in the developer's console with an input that can be either a string of text, a number, boolean, or an array of data.\"\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            MESSAGE: emptyTextValidator,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.console = block => {\n    const console_type = block.getFieldValue('CONSOLE_TYPE') || 'log';\n    const message =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'MESSAGE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || `\"${localize('<empty message>')}\"`;\n\n    const code = `Bot.console({ type: '${console_type}', message: ${message}});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.epoch = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Seconds Since Epoch'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the number of seconds since January 1st, 1970'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Second Since Epoch'),\n            description: localize('This block returns the number of seconds since January 1st, 1970.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.epoch = () => [\n    'Bot.getTime()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.timeout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ dummy }} {{ stack_input }} Run after {{ number }} second(s)', {\n                dummy: '%1',\n                stack_input: '%2',\n                number: '%3',\n            }),\n            args0: [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TIMEOUTSTACK',\n                },\n                {\n                    type: 'input_value',\n                    name: 'SECONDS',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Run the blocks inside after a given number of seconds'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Delayed run'),\n            description: localize(\n                'This block delays execution for a given number of seconds. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    getRequiredValueInputs() {\n        return {\n            SECONDS: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.timeout = block => {\n    const stack = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'TIMEOUTSTACK');\n    const seconds =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'SECONDS',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '1';\n\n    const code = `sleep(${seconds});\\n${stack}\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.todatetime = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('To date/time {{ input_timestamp }} {{ dummy }}', {\n                input_timestamp: '%1',\n                dummy: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TIMESTAMP',\n                    check: 'Number',\n                },\n                {\n                    // Extra dummy for spacing.\n                    type: 'input_dummy',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.'\n            ),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Convert to date/time'),\n            description: localize(\n                'This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TIMESTAMP: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.todatetime = block => {\n    const timestamp = Blockly.JavaScript.javascriptGenerator.valueToCode(\n        block,\n        'TIMESTAMP',\n        Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n    );\n    const invalid_timestamp = `${localize('Invalid timestamp')}:`;\n\n    // eslint-disable-next-line no-underscore-dangle\n    const function_name = Blockly.JavaScript.javascriptGenerator.provideFunction_('timestampToDateString', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(timestamp) {\n            var datetime = new Date(timestamp * 1000);\n\n            if (!datetime.getTime()) {\n                return \"${invalid_timestamp} \" + timestamp;\n            }\n\n            var getTwoDigitValue = function(input) {\n                return input < 10 ? '0' + input : input;\n            }\n\n            var year    = datetime.getFullYear();\n            var month   = getTwoDigitValue(datetime.getMonth() + 1);\n            var day     = getTwoDigitValue(datetime.getDate());\n            var hours   = getTwoDigitValue(datetime.getHours());\n            var minutes = getTwoDigitValue(datetime.getMinutes());\n            var seconds = getTwoDigitValue(datetime.getSeconds());\n\n            var formatGmtOffset = function() {\n                var gmt_offset_raw = datetime.getTimezoneOffset();\n                var sign           = gmt_offset_raw > 0 ? '-' : '+';\n                var gmt_offset     = Math.abs(gmt_offset_raw);\n                var hour           = Math.floor(gmt_offset / 60);\n                var minute         = gmt_offset - hour * 60;\n\n                return 'GMT' + sign + getTwoDigitValue(hour) + getTwoDigitValue(minute);\n            }\n\n            var date_string = year + '-' + month + '-' + day;\n            var time_string = hours + ':' + minutes + ':' + seconds;\n\n            return date_string + ' ' + time_string + ' ' + formatGmtOffset();\n        }`,\n    ]);\n\n    const code = `${function_name}(${timestamp})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../../../utils';\n\nBlockly.Blocks.totimestamp = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('To timestamp {{ input_datetime }} {{ dummy }}', { input_datetime: '%1', dummy: '%2' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DATETIME',\n                },\n                {\n                    // Extra dummy for spacing.\n                    type: 'input_dummy',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'Converts a string representing a date/time string into seconds since Epoch. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825. Time and time zone offset are optional.'\n            ),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Convert to timestamp'),\n            description: localize(\n                'This block converts a string of text that represents the date and time into seconds since the Unix Epoch (1 January 1970). The time and time zone offset are optional. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    getRequiredValueInputs() {\n        return {\n            DATETIME: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.totimestamp = block => {\n    const datetime_string = Blockly.JavaScript.javascriptGenerator.valueToCode(\n        block,\n        'DATETIME',\n        Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n    );\n    const code = `Bot.dateTimeStringToTimestamp(${datetime_string})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu, evaluateExpression } from '../../../../utils';\nimport DBotStore from '../../../../dbot-store';\n\nBlockly.Blocks.tick_delay = {\n    init() {\n        this.jsonInit(this.definition());\n        const { client } = DBotStore.instance;\n        if (client && client.is_logged_in) {\n            this.workspace_to_code = Blockly.JavaScript.javascriptGenerator.workspaceToCode(Blockly.derivWorkspace);\n        }\n    },\n    definition() {\n        return {\n            message0: localize('{{ stack_input }} Run after {{ number }} tick(s)', {\n                stack_input: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_statement',\n                    name: 'TICKDELAYSTACK',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TICKDELAYVALUE',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Run the blocks inside after a given number of ticks'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick Delayed run'),\n            description: localize(\n                'This block delays execution for a given number of ticks. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    getRequiredValueInputs() {\n        return {\n            TICKDELAYVALUE: input_value => {\n                const evaluated_result = evaluateExpression(input_value);\n                if (evaluated_result === 'invalid_input') {\n                    // this was done to check if any equation or varible assignment is present in the code.\n                    if (this.workspace_to_code && this.workspace_to_code.includes(input_value)) {\n                        return false;\n                    }\n                    this.error_message = localize('Invalid Input {{ input_value }}.', { input_value });\n                    return true;\n                }\n\n                if (evaluated_result < 0) {\n                    this.error_message = localize('Values cannot be negative. Provided value: {{ input_value }}.', {\n                        input_value,\n                    });\n                    return true;\n                }\n            },\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.tick_delay = block => {\n    const stack = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'TICKDELAYSTACK');\n    const ticks_value =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TICKDELAYVALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '1';\n\n    const code = `Bot.getDelayTickValue(${ticks_value})\\n${stack}\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { defineContract } from '../../images';\nimport DBotStore from '../../../dbot-store';\nimport { runIrreversibleEvents, modifyContextMenu, appendCollapsedMainBlocksFields } from '../../../utils';\nimport { removeErrorHandlingEventListener, initErrorHandlingListener } from '../../../../utils';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.trade_definition = {\n    init() {\n        this.jsonInit(this.definition());\n        this.setDeletable(false);\n        this.isInit = false;\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            message2: '%1 %2 %3',\n            message3: '%1',\n            message4: '%1 %2 %3',\n            message5: '%1',\n            message6: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: defineContract,\n                    width: 25,\n                    height: 25,\n                    alt: 'T',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('1. Trade parameters'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'TRADE_OPTIONS',\n                },\n            ],\n            args2: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 4,\n                    height: 25,\n                },\n                {\n                    type: 'field_label',\n                    text: localize('Run once at start:'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'INITIALIZATION',\n                    check: null,\n                },\n            ],\n            args4: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 4,\n                    height: 25,\n                },\n                {\n                    type: 'field_label',\n                    text: localize('Trade options:'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args5: [\n                {\n                    type: 'input_statement',\n                    name: 'SUBMARKET',\n                },\n            ],\n            args6: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 380,\n                    height: 10,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Here is where you define the parameters of your contract.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade parameters'),\n            description: localize('Here is where you define the parameters of your contract.'),\n            key_words: localize('market, trade type, contract type'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange(event) {\n        if (event.type === Blockly.Events.SELECTED && !this.isInit) {\n            this.isInit = true;\n            initErrorHandlingListener('keydown');\n        } else if (Blockly.getSelected() === null && this.isInit) {\n            this.isInit = false;\n            removeErrorHandlingEventListener('keydown');\n        }\n        if (!this.workspace || this.workspace.isDragging() || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n        if (\n            event.type === Blockly.Events.BLOCK_CHANGE ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart)\n        ) {\n            // Enforce only trade_definition_<type> blocks in TRADE_OPTIONS statement.\n            const blocks_in_trade_options = this.getBlocksInStatement('TRADE_OPTIONS');\n\n            if (blocks_in_trade_options.length > 0) {\n                blocks_in_trade_options.forEach(block => {\n                    if (!/^trade_definition_.+$/.test(block.type)) {\n                        runIrreversibleEvents(() => {\n                            block.unplug(true);\n                        });\n                    }\n                });\n            } else {\n                runIrreversibleEvents(() => {\n                    this.dispose();\n                });\n            }\n            if (this.isCollapsed()) {\n                appendCollapsedMainBlocksFields(this);\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition = block => {\n    const { client } = DBotStore.instance;\n\n    if (!client || !client.is_logged_in) {\n        throw new Error('Please login');\n    }\n\n    const { loginid } = client;\n    const account = client.getToken(loginid);\n    const market_block = block.getChildByType('trade_definition_market');\n    const trade_type_block = block.getChildByType('trade_definition_tradetype');\n    const contract_type_block = block.getChildByType('trade_definition_contracttype');\n    const candle_interval_block = block.getChildByType('trade_definition_candleinterval');\n    const restart_on_error_block = block.getChildByType('trade_definition_restartonerror');\n    const restart_on_buy_sell_block = block.getChildByType('trade_definition_restartbuysell');\n\n    const symbol = market_block.getFieldValue('SYMBOL_LIST');\n    const trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n    const contract_type = contract_type_block.getFieldValue('TYPE_LIST');\n    const candle_interval = candle_interval_block.getFieldValue('CANDLEINTERVAL_LIST');\n    const should_restart_on_error = restart_on_error_block.getFieldValue('RESTARTONERROR') !== 'FALSE';\n    const should_restart_on_buy_sell = restart_on_buy_sell_block.getFieldValue('TIME_MACHINE_ENABLED') !== 'FALSE';\n\n    const { opposites } = config;\n    const contract_type_list =\n        contract_type === 'both'\n            ? opposites[trade_type.toUpperCase()].map(opposite => Object.keys(opposite)[0])\n            : [contract_type];\n\n    const initialization = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'INITIALIZATION');\n    const trade_options_statement = Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'SUBMARKET');\n\n    const code = `  \n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('${account}', {\n          symbol              : '${symbol}',\n          contractTypes       : ${JSON.stringify(contract_type_list)},\n          candleInterval      : '${candle_interval || 'FALSE'}',\n          shouldRestartOnError: ${should_restart_on_error},\n          timeMachineEnabled  : ${should_restart_on_buy_sell},\n        });\n        ${initialization.trim()}\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        BinaryBotPrivateHasCalledTradeOptions = false;\n        Bot.highlightBlock('${block.id}');\n        ${trade_options_statement.trim()}\n      };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { runIrreversibleEvents, modifyContextMenu } from '../../../utils';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\n/* eslint-disable */\nBlockly.Blocks.trade_definition_market = {\n    init() {\n        this.jsonInit({\n            message0: localize('Market: {{ input_market }} > {{ input_submarket }} > {{ input_symbol }}', {\n                input_market: '%1',\n                input_submarket: '%2',\n                input_symbol: '%3',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'SUBMARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'SYMBOL_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange(event) {\n        const allowed_events = ['BLOCK_CREATE', 'BLOCK_CHANGE', 'BLOCK_DRAG'];\n        const is_allowed_event =\n            allowed_events.findIndex(event_name => event.type === Blockly.Events[event_name]) !== -1;\n\n        if (\n            !this.workspace ||\n            Blockly.derivWorkspace.isFlyoutVisible ||\n            this.workspace.isDragging() ||\n            !is_allowed_event\n        ) {\n            return;\n        }\n\n        this.enforceLimitations();\n\n        const { active_symbols } = ApiHelpers.instance;\n        const market_dropdown = this.getField('MARKET_LIST');\n        const submarket_dropdown = this.getField('SUBMARKET_LIST');\n        const symbol_dropdown = this.getField('SYMBOL_LIST');\n        const market = market_dropdown.getValue();\n        const submarket = submarket_dropdown.getValue();\n        const symbol = symbol_dropdown.getValue();\n\n        // Temporary solution to remove Crytocurrencies from\n        // market options until multipliers are available for DBot\n        const market_options = active_symbols\n            .getMarketDropdownOptions()\n            .filter(option => option[1] !== 'cryptocurrency');\n\n        const populateMarketDropdown = () => {\n            market_dropdown?.updateOptions(market_options, {\n                default_value: market,\n                should_pretend_empty: true,\n                event_group: event.group,\n            });\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            populateMarketDropdown();\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === this.id) {\n            if (event.name === 'MARKET_LIST') {\n                submarket_dropdown.updateOptions(active_symbols.getSubmarketDropdownOptions(market), {\n                    default_value: submarket,\n                    should_pretend_empty: true,\n                    event_group: event.group,\n                });\n            } else if (event.name === 'SUBMARKET_LIST') {\n                symbol_dropdown.updateOptions(active_symbols.getSymbolDropdownOptions(submarket), {\n                    default_value: symbol,\n                    should_pretend_empty: true,\n                    event_group: event.group,\n                });\n            }\n        } else if (\n            event.type === Blockly.Events.BLOCK_DRAG &&\n            !event.isStart &&\n            event.blockId === this.getRootBlock().id\n        ) {\n            if (market_dropdown.isEmpty() || submarket_dropdown.isEmpty() || symbol_dropdown.isEmpty()) {\n                populateMarketDropdown();\n            }\n        }\n    },\n    enforceLimitations() {\n        runIrreversibleEvents(() => {\n            if (!this.isDescendantOf('trade_definition')) {\n                this.unplug(false); // Unplug without reconnecting siblings\n\n                const top_blocks = this.workspace.getTopBlocks();\n                const trade_definition_block = top_blocks.find(block => block.type === 'trade_definition');\n\n                // Reconnect self to trade definition block.\n                if (trade_definition_block) {\n                    const connection = trade_definition_block.getLastConnectionInStatement('TRADE_OPTIONS');\n                    connection.connect(this.previousConnection);\n                } else {\n                    this.dispose();\n                }\n            }\n            // These blocks cannot be disabled.\n            else if (this.disabled) {\n                this.setDisabled(false);\n            }\n        });\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_market = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.trade_definition_tradetype = {\n    init() {\n        this.jsonInit({\n            message0: localize('Trade Type: {{ trade_type_category }} > {{ trade_type }}', {\n                trade_type_category: '%1',\n                trade_type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TRADETYPECAT_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'TRADETYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradetype = () => {};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { getContractTypeOptions } from '../../../shared';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.trade_definition_contracttype = {\n    init() {\n        this.jsonInit({\n            message0: localize('Contract Type: {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            tooltip: localize(\n                'If the contract type is “Both”, then the Purchase Conditions should include both Rise and Fall using the “Conditional Block\"'\n            ),\n            previousStatement: null,\n            nextStatement: null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TRADETYPE_LIST') {\n                const trade_type = event.newValue;\n                const contract_type_list = this.getField('TYPE_LIST');\n                const contract_type_options = [];\n\n                const trade_types = getContractTypeOptions('both', trade_type);\n\n                if (trade_types.length > 1) {\n                    contract_type_options.push([localize('Both'), 'both']);\n                }\n\n                contract_type_options.push(...trade_types);\n\n                if (contract_type_options.length === 0) {\n                    contract_type_options.push(...config.NOT_AVAILABLE_DROPDOWN_OPTIONS);\n                }\n\n                contract_type_list.updateOptions(contract_type_options, {\n                    event_group: event.group,\n                    default_value: is_load_event ? contract_type_list.getValue() : undefined,\n                });\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_contracttype = () => '';\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.trade_definition_candleinterval = {\n    init() {\n        this.jsonInit({\n            message0: localize('Default Candle Interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals.slice(1),\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_candleinterval = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.trade_definition_restartbuysell = {\n    init() {\n        this.jsonInit({\n            message0: localize('Restart buy/sell on error (disable for better performance): {{ checkbox }}', {\n                checkbox: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_checkbox',\n                    name: 'TIME_MACHINE_ENABLED',\n                    checked: false,\n                    class: 'blocklyCheckbox',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n        this.setOnChange(() => {\n            const next_block = this?.getNextBlock();\n            if (next_block?.type !== 'trade_definition_restartonerror') {\n                next_block?.unplug(true);\n            }\n        });\n    },\n    onchange(/* event */) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n    required_inputs: ['TIME_MACHINE_ENABLED'],\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_restartbuysell = () => {};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../../utils';\n\nBlockly.Blocks.trade_definition_restartonerror = {\n    init() {\n        this.jsonInit({\n            message0: localize('Restart last trade on error (bot ignores the unsuccessful trade): {{ checkbox }}', {\n                checkbox: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_checkbox',\n                    name: 'RESTARTONERROR',\n                    checked: true,\n                    class: 'blocklyCheckbox',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setNextStatement(false);\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n    required_inputs: ['RESTARTONERROR'],\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_restartonerror = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { runIrreversibleEvents, runGroupedEvents, modifyContextMenu, setCurrency } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\nBlockly.Blocks.trade_definition_tradeoptions = {\n    durations: [],\n    init() {\n        this.jsonInit(this.definition());\n        this.setInputsInline(true);\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        const is_stake = this.type === 'trade_definition_tradeoptions';\n        return {\n            message0: localize('Duration: {{ duration_unit }} {{ duration_value }}', {\n                duration_unit: '%1',\n                duration_value: '%2',\n            }),\n            message1: `${is_stake ? localize('Stake') : localize('Payout')}: %1 %2 %3`,\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'DURATIONTYPE_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'DURATION',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_label',\n                    name: 'AMOUNT_LIMITS',\n                    text: '',\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options such as duration and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade options'),\n            description: localize(\n                'Define your trade options such as duration and stake. Some options are only applicable for certain trade types.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    onchange(event) {\n        if (event.type === 'change') {\n            const selected_block = this.workspace.getBlockById(event.blockId);\n            selected_block?.parentBlock_?.inputList\n                .filter(item => ['DURATION', 'AMOUNT'].includes(item.name))\n                .forEach(input => {\n                    const input_target = input.connection.targetBlock();\n                    const value = input_target.getFieldValue('NUM')?.toString();\n                    if (value?.startsWith('0')) {\n                        const new_value = value.includes('.') ? parseFloat(`${value}`) : parseInt(`${value}`);\n                        input_target.setFieldValue(new_value.toString(), 'NUM');\n                    }\n                });\n        }\n\n        if (!this.workspace || this.workspace.isDragging() || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_duration = this.getFieldValue('DURATIONTYPE_LIST');\n        this.selected_barrier_types = [\n            this.getFieldValue('BARRIEROFFSETTYPE_LIST') || config.BARRIER_TYPES[0][1],\n            this.getFieldValue('SECONDBARRIEROFFSETTYPE_LIST') || config.BARRIER_TYPES[1][1],\n        ];\n\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart)\n        ) {\n            setCurrency(this);\n            this.updateAmountLimits();\n        }\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateBarrierInputs(false, false);\n                this.updateDurationInput(false, false);\n                this.updatePredictionInput(false);\n                this.updateAmountLimits();\n            } else {\n                this.updateBarrierInputs(true, true);\n                this.enforceSingleBarrierType('BARRIEROFFSETTYPE_LIST', true);\n                this.updateDurationInput(true, true);\n                this.updatePredictionInput(true);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateBarrierInputs(false, false);\n                    this.enforceSingleBarrierType(event.name, true);\n                    this.updateDurationInput(false, false);\n                    this.updatePredictionInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'DURATIONTYPE_LIST': {\n                        this.updateBarrierInputs(true, true);\n                        this.enforceSingleBarrierType('BARRIEROFFSETTYPE_LIST', true);\n                        this.updateDurationInput(false, true);\n                        break;\n                    }\n                    case 'BARRIEROFFSETTYPE_LIST':\n                    case 'SECONDBARRIEROFFSETTYPE_LIST': {\n                        this.updateBarrierInputs(false, true);\n                        this.enforceSingleBarrierType(event.name, false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateBarrierInputs(true, true);\n                this.enforceSingleBarrierType(event.name, true);\n                this.updateDurationInput(true, true);\n                this.updatePredictionInput(true);\n                this.updateAmountLimits();\n            }\n        } else if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart && event.blockId === this.id) {\n            // Ensure this block is populated after initial drag from flyout.\n            if (!this.selected_duration) {\n                const fake_creation_event = new Blockly.Events.BlockCreate(this);\n                fake_creation_event.recordUndo = false;\n                Blockly.Events.fire(fake_creation_event);\n            } else if (this.selected_trade_type === 'multiplier') {\n                this.updateDurationInput(false, false);\n            }\n        }\n    },\n    createPredictionInput(prediction_range) {\n        runIrreversibleEvents(() => {\n            if (prediction_range.length === 0) {\n                this.removeInput('PREDICTION_LABEL', true);\n                this.removeInput('PREDICTION', true);\n            } else if (!this.getInput('PREDICTION')) {\n                this.appendDummyInput('PREDICTION_LABEL').appendField(localize('Prediction:'));\n\n                const prediction_input = this.appendValueInput('PREDICTION');\n                const shadow_block = this.workspace.newBlock('math_number_positive');\n\n                shadow_block.setInputsInline(true);\n                shadow_block.setShadow(true);\n                shadow_block.setFieldValue(prediction_range[0], 'NUM');\n                shadow_block.outputConnection.connect(prediction_input.connection);\n                shadow_block.initSvg();\n                shadow_block.renderEfficiently();\n            }\n        });\n    },\n    createBarrierInputs(barriers) {\n        runIrreversibleEvents(() => {\n            const input_names = ['BARRIEROFFSET', 'SECONDBARRIEROFFSET'];\n\n            for (let i = 0; i < barriers.values.length; i++) {\n                const label = barriers.values.length === 1 ? localize('Barrier') : config.BARRIER_LABELS[i];\n                let input = this.getInput(input_names[i]);\n\n                if (input) {\n                    input.fieldRow[0].setText(label);\n                } else {\n                    input = this.appendValueInput(input_names[i])\n                        .appendField(label, `${input_names[i]}_LABEL`)\n                        .appendField(new Blockly.FieldDropdown(config.BARRIER_TYPES), `${input_names[i]}TYPE_LIST`);\n\n                    const shadow_block = this.workspace.newBlock('math_number_positive');\n\n                    shadow_block.setInputsInline(true);\n                    shadow_block.setShadow(true);\n                    shadow_block.setFieldValue(barriers.values[i], 'NUM');\n                    shadow_block.outputConnection.connect(input.connection);\n                    shadow_block.initSvg();\n                    shadow_block.renderEfficiently();\n                }\n            }\n\n            // Remove any extra inputs (quietly) if not required\n            for (let i = input_names.length; i > barriers.values.length; i--) {\n                this.removeInput(input_names[i - 1], true);\n            }\n        });\n    },\n    updateAmountLimits() {\n        const { account_limits } = ApiHelpers.instance;\n        const { currency, landing_company_shortcode } = DBotStore.instance.client;\n        account_limits.getStakePayoutLimits(currency, landing_company_shortcode, this.selected_market).then(limits => {\n            if (!this.getField('AMOUNT_LIMITS')) {\n                return;\n            }\n            this.amount_limits = limits;\n            const { max_payout, min_stake } = limits;\n            if (max_payout && min_stake && this.selected_trade_type !== 'multiplier') {\n                runIrreversibleEvents(() => {\n                    this.setFieldValue(\n                        localize('(min: {{min_stake}} - max: {{max_payout}})', {\n                            min_stake,\n                            max_payout,\n                        }),\n                        'AMOUNT_LIMITS'\n                    );\n                });\n            }\n        });\n    },\n    updateDurationInput(should_use_default_unit, should_update_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'accumulator' && this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const accumulator_block = this.workspace.newBlock('trade_definition_accumulator');\n                    accumulator_block.initSvg();\n                    accumulator_block.render();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n\n                    const child_connection = accumulator_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const stake_input = accumulator_block.getInput('AMOUNT');\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.renderEfficiently();\n\n                    const take_profit_block = this.workspace.newBlock('accumulator_take_profit');\n                    const take_profit_input = take_profit_block.getInput('AMOUNT');\n\n                    const take_profit_shadow_block = this.workspace.newBlock('math_number_positive');\n                    take_profit_shadow_block.setShadow(true);\n                    take_profit_shadow_block.setFieldValue(0, 'NUM');\n                    take_profit_block.setDisabled(true);\n                    take_profit_shadow_block.outputConnection.connect(take_profit_input.connection);\n                    take_profit_shadow_block.initSvg();\n                    take_profit_shadow_block.renderEfficiently();\n\n                    accumulator_block\n                        .getLastConnectionInStatement('ACCUMULATOR_PARAMS')\n                        .connect(take_profit_block.previousConnection);\n                    take_profit_block.initSvg();\n                    take_profit_block.renderEfficiently();\n\n                    this.dispose();\n                });\n            });\n        } else if (this.selected_trade_type === 'multiplier' && this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const multiplier_block = this.workspace.newBlock('trade_definition_multiplier');\n                    multiplier_block.initSvg();\n                    multiplier_block.renderEfficiently();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = multiplier_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const stake_input = multiplier_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setInputsInline(true);\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.renderEfficiently();\n\n                    const take_profit_block = this.workspace.newBlock('multiplier_take_profit');\n                    const take_profit_input = take_profit_block.getInput('AMOUNT');\n\n                    const take_profit_shadow_block = this.workspace.newBlock('math_number_positive');\n                    take_profit_shadow_block.setInputsInline(true);\n                    take_profit_shadow_block.setShadow(true);\n                    take_profit_shadow_block.setFieldValue(0, 'NUM');\n                    take_profit_shadow_block.outputConnection.connect(take_profit_input.connection);\n                    take_profit_shadow_block.initSvg();\n                    take_profit_shadow_block.renderEfficiently();\n\n                    multiplier_block\n                        .getLastConnectionInStatement('MULTIPLIER_PARAMS')\n                        .connect(take_profit_block.previousConnection);\n                    take_profit_block.initSvg();\n                    take_profit_block.renderEfficiently();\n\n                    const stop_loss_block = this.workspace.newBlock('multiplier_stop_loss');\n                    const stop_loss_input = stop_loss_block.getInput('AMOUNT');\n\n                    const stop_loss_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stop_loss_shadow_block.setInputsInline(true);\n                    stop_loss_shadow_block.setShadow(true);\n                    stop_loss_shadow_block.setFieldValue(0, 'NUM');\n                    stop_loss_shadow_block.outputConnection.connect(stop_loss_input.connection);\n                    stop_loss_shadow_block.initSvg();\n                    stop_loss_shadow_block.renderEfficiently();\n\n                    multiplier_block\n                        .getLastConnectionInStatement('MULTIPLIER_PARAMS')\n                        .connect(stop_loss_block.previousConnection);\n                    stop_loss_block.initSvg();\n                    stop_loss_block.renderEfficiently();\n\n                    this.dispose();\n                });\n            });\n        } else {\n            contracts_for.getDurations(this.selected_symbol, this.selected_trade_type).then(durations => {\n                // Keep duration in memory so we can later reference them for validation\n                this.durations = durations;\n\n                const duration_field_dropdown = this.getField('DURATIONTYPE_LIST');\n                const duration_input = this.getInput('DURATION');\n                const duration_options = durations.map(duration => [duration.display, duration.unit]);\n\n                duration_field_dropdown?.updateOptions(duration_options, {\n                    default_value: should_use_default_unit ? undefined : duration_field_dropdown.getValue(),\n                });\n\n                if (should_update_value && duration_input && duration_input.connection) {\n                    const target_block = duration_input.connection.targetBlock();\n\n                    if (target_block && target_block.isShadow()) {\n                        const min_duration = durations.find(duration => duration.unit === this.selected_duration);\n\n                        if (min_duration) {\n                            runIrreversibleEvents(() => {\n                                target_block.setFieldValue(min_duration.min, 'NUM');\n                            });\n                        }\n                    }\n                }\n            });\n        }\n        const {\n            workspaces: {\n                indentWorkspace: { x, y },\n            },\n        } = config;\n        setTimeout(() => {\n            window.Blockly.getMainWorkspace().cleanUp(x, y);\n        }, 10);\n    },\n    updateBarrierInputs(should_use_default_type, should_use_default_values) {\n        const { contracts_for } = ApiHelpers.instance;\n        const { BARRIER_TYPES } = config;\n\n        contracts_for\n            .getBarriers(\n                this.selected_symbol,\n                this.selected_trade_type,\n                this.selected_duration,\n                this.selected_barrier_types\n            )\n            .then(barriers => {\n                this.createBarrierInputs(barriers);\n\n                const input_names = ['BARRIEROFFSET', 'SECONDBARRIEROFFSET'];\n\n                for (let i = 0; i < barriers.values.length; i++) {\n                    const barrier_field_dropdown = this.getField(`${input_names[i]}TYPE_LIST`);\n                    const { ABSOLUTE_BARRIER_DROPDOWN_OPTION } = config;\n                    const barrier_field_value = should_use_default_type\n                        ? BARRIER_TYPES[i][1]\n                        : barrier_field_dropdown.getValue();\n\n                    if (this.selected_duration === 'd') {\n                        // Only absolute types are allowed.\n                        barrier_field_dropdown.updateOptions(ABSOLUTE_BARRIER_DROPDOWN_OPTION, {\n                            default_value: 'absolute',\n                        });\n                    } else if (barriers.allow_both_types || barriers.allow_absolute_type) {\n                        // Both offset + absolute types are allowed.\n                        const options = [].concat(BARRIER_TYPES, ABSOLUTE_BARRIER_DROPDOWN_OPTION);\n\n                        barrier_field_dropdown.updateOptions(options, {\n                            default_value: barrier_field_value,\n                        });\n                    } else {\n                        // Only offset types are allowed.\n                        barrier_field_dropdown.updateOptions(BARRIER_TYPES, {\n                            default_value: barrier_field_value,\n                        });\n                    }\n\n                    const { connection } = this.getInput(input_names[i]);\n\n                    if (should_use_default_values && connection) {\n                        const target_block = connection.targetBlock();\n\n                        if (target_block && target_block.isShadow()) {\n                            const barrier_value = barriers.values[i] !== false ? barriers.values[i] : '';\n\n                            runIrreversibleEvents(() => {\n                                target_block.setFieldValue(barrier_value, 'NUM');\n                            });\n                        }\n                    }\n                }\n            });\n    },\n    updatePredictionInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        contracts_for.getPredictionRange(this.selected_symbol, this.selected_trade_type).then(prediction_range => {\n            this.createPredictionInput(prediction_range);\n\n            if (prediction_range.length > 0) {\n                const prediction_input = this.getInput('PREDICTION');\n                const { connection } = prediction_input;\n\n                if (should_use_default_value && connection) {\n                    const target_block = connection.targetBlock();\n\n                    if (target_block && target_block.isShadow()) {\n                        const initial_prediction = Math.max(1, prediction_range[0]);\n\n                        runIrreversibleEvents(() => {\n                            target_block.setFieldValue(initial_prediction, 'NUM');\n                        });\n                    }\n                }\n            }\n        });\n    },\n    enforceSingleBarrierType(barrier_input_name, should_force_distinct) {\n        const new_value = this.getFieldValue(barrier_input_name || '');\n        const other_barrier_input_name =\n            barrier_input_name === 'BARRIEROFFSETTYPE_LIST' ? 'SECONDBARRIEROFFSETTYPE_LIST' : 'BARRIEROFFSETTYPE_LIST';\n        const other_barrier_field = this.getField(other_barrier_input_name);\n        const { BARRIER_TYPES } = config;\n\n        if (other_barrier_field) {\n            const has_other_barrier = BARRIER_TYPES.findIndex(type => type[1] === new_value) !== -1;\n            const other_barrier_type = other_barrier_field.getValue();\n\n            runIrreversibleEvents(() => {\n                if (has_other_barrier && (other_barrier_type === 'absolute' || should_force_distinct)) {\n                    const other_barrier_value = BARRIER_TYPES.find(type => type[1] !== new_value);\n                    other_barrier_field.setValue(other_barrier_value[1]);\n                } else if (new_value === 'absolute' && other_barrier_type !== 'absolute') {\n                    other_barrier_field.setValue('absolute');\n                }\n            });\n        }\n    },\n    domToMutation(xmlElement) {\n        const has_first_barrier = xmlElement.getAttribute('has_first_barrier') === 'true';\n        const has_second_barrier = xmlElement.getAttribute('has_second_barrier') === 'true';\n        const has_prediction = xmlElement.getAttribute('has_prediction') === 'true';\n\n        if (has_first_barrier && has_second_barrier) {\n            this.createBarrierInputs({ values: [1, -1] }); // These values are overwritten with XML values.\n        } else if (has_first_barrier) {\n            this.createBarrierInputs({ values: [1] });\n        } else if (has_prediction) {\n            this.createPredictionInput([1]);\n        }\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n\n        container.setAttribute('has_first_barrier', !!this.getInput('BARRIEROFFSET'));\n        container.setAttribute('has_second_barrier', !!this.getInput('SECONDBARRIEROFFSET'));\n        container.setAttribute('has_prediction', !!this.getInput('PREDICTION'));\n\n        return container;\n    },\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n            DURATION: input => {\n                const input_number = Number(input);\n\n                if (isNaN(input_number) || !this.durations.length) {\n                    return false;\n                }\n\n                const duration = this.durations.find(d => d.unit === this.selected_duration);\n\n                if (duration) {\n                    const { min, max } = duration;\n                    const is_valid_duration = input_number >= min && input_number <= max;\n\n                    if (min === max) {\n                        this.error_message = localize(\n                            'Duration value is not allowed. To run the bot, please enter {{min}}.',\n                            { min }\n                        );\n                    } else {\n                        this.error_message = localize(\n                            'Duration value is not allowed. To run the bot, please enter a value between {{min}} to {{max}}.',\n                            { min, max }\n                        );\n                    }\n\n                    return !is_valid_duration;\n                }\n\n                return false;\n            },\n        };\n    },\n};\n\nBlockly.Blocks.trade_definition_tradeoptions_payout = Blockly.Blocks.trade_definition_tradeoptions;\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradeoptions = block => {\n    const amount =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'AMOUNT',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '0';\n    const { currency } = DBotStore.instance.client;\n    const duration_type = block.getFieldValue('DURATIONTYPE_LIST') || '0';\n    const duration_value =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'DURATION',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '0';\n\n    // Determine decimal places for rounding the stake, this is done so Martingale multipliers\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const getBarrierValue = (barrier_offset_type, value) => {\n        // Variables should not be encapsulated in quotes\n        if (/^(\\d+(\\.\\d+)?)$/.test(value)) {\n            return barrier_offset_type === 'absolute' ? `'${value}'` : `'${barrier_offset_type}${value}'`;\n        }\n        return barrier_offset_type === 'absolute' ? value : `'${barrier_offset_type}' + ${value}`;\n    };\n\n    let prediction_value, barrier_offset_value, second_barrier_offset_value;\n\n    if (block.getInput('PREDICTION')) {\n        prediction_value =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'PREDICTION',\n                Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n            ) || '-1';\n    }\n\n    if (block.getInput('BARRIEROFFSET')) {\n        const barrier_offset_type = block.getFieldValue('BARRIEROFFSETTYPE_LIST');\n        const value =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'BARRIEROFFSET',\n                Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n            ) || '0';\n        barrier_offset_value = getBarrierValue(barrier_offset_type, value);\n    }\n\n    if (block.getInput('SECONDBARRIEROFFSET')) {\n        const barrier_offset_type = block.getFieldValue('SECONDBARRIEROFFSETTYPE_LIST');\n        const value =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'SECONDBARRIEROFFSET',\n                Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n            ) || '0';\n        second_barrier_offset_value = getBarrierValue(barrier_offset_type, value);\n    }\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            duration           : ${duration_value},\n            duration_unit      : '${duration_type}',\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            prediction         : ${prediction_value || 'undefined'},\n            barrierOffset      : ${barrier_offset_value || 'undefined'},\n            secondBarrierOffset: ${second_barrier_offset_value || 'undefined'},\n            basis              : '${block.type === 'trade_definition_tradeoptions' ? 'stake' : 'payout'}',\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradeoptions_payout =\n    Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradeoptions;\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { runGroupedEvents, runIrreversibleEvents, modifyContextMenu, setCurrency } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\nBlockly.Blocks.trade_definition_multiplier = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Multiplier: {{ multiplier }}', {\n                multiplier: '%1',\n            }),\n            message1: `${localize('Stake')}: %1 %2 %3`,\n            message2: '%1',\n            message3: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MULTIPLIERTYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_label',\n                    name: 'AMOUNT_LIMITS',\n                    text: '',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'MULTIPLIER_PARAMS',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options such as multiplier and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Multiplier trade options'),\n            description: localize(\n                'Define your trade options such as multiplier and stake. This block can only be used with the multipliers trade type. If you select another trade type, this block will be replaced with the Trade options block.'\n            ),\n        };\n    },\n    validateBlocksInStatement() {\n        // Enforce only multiplier_<type> blocks in MULTIPLIER_PARAMS statement.\n        const blocks_in_multiplier = this.getBlocksInStatement('MULTIPLIER_PARAMS');\n\n        if (blocks_in_multiplier.length > 0) {\n            const block_types_in_multiplier = [];\n            blocks_in_multiplier.forEach(block => {\n                block_types_in_multiplier.push(block.type);\n                const block_multiplier_take_profit = block.childValueToCode('multiplier_take_profit', 'AMOUNT');\n                const block_multiplier_stop_loss = block.childValueToCode('multiplier_stop_loss', 'AMOUNT');\n                if (block_multiplier_take_profit <= 0 || block_multiplier_stop_loss <= 0) {\n                    block.setDisabled(true);\n                }\n\n                if (block.type === 'multiplier_stop_loss' && block_multiplier_stop_loss > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (block.type === 'multiplier_take_profit' && block_multiplier_take_profit > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (\n                    !/^multiplier_.+$/.test(block.type) ||\n                    new Set(block_types_in_multiplier).size !== block_types_in_multiplier.length\n                ) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(true);\n                    });\n                }\n            });\n        }\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_multiplier = this.getFieldValue('MULTIPLIERTYPE_LIST');\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateMultiplierInput(false);\n            } else {\n                this.updateMultiplierInput(true);\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            this.validateBlocksInStatement();\n            setCurrency(this);\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateMultiplierInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'MULTIPLIERTYPE_LIST': {\n                        this.updateMultiplierInput(false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateMultiplierInput(true);\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            this.validateBlocksInStatement();\n            if (event.blockId === this.id) {\n                // Ensure this block is populated after initial drag from flyout.\n                if (!this.selected_multiplier) {\n                    const fake_creation_event = new Blockly.Events.BlockCreate(this);\n                    fake_creation_event.recordUndo = false;\n                    Blockly.Events.fire(fake_creation_event);\n                } else if (this.selected_trade_type !== 'multiplier') {\n                    this.updateMultiplierInput(true);\n                }\n            }\n        }\n    },\n\n    updateMultiplierInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'multiplier') {\n            contracts_for.getMultiplierRange(this.selected_symbol, this.selected_trade_type).then(multiplier_range => {\n                if (multiplier_range.length > 0) {\n                    const multiplier_list_dropdown = this.getField('MULTIPLIERTYPE_LIST');\n                    const multiplier_options = multiplier_range.map(value => {\n                        const option = value.toString();\n                        return [option, option];\n                    });\n\n                    multiplier_list_dropdown?.updateOptions(multiplier_options, {\n                        default_value: should_use_default_value ? undefined : multiplier_list_dropdown.getValue(),\n                    });\n                }\n            });\n            return;\n        }\n\n        if (this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const {\n                        workspaces: {\n                            indentWorkspace: { x, y },\n                        },\n                    } = config;\n\n                    const duration_block = this.workspace.newBlock('trade_definition_tradeoptions');\n                    duration_block.initSvg();\n                    duration_block.renderEfficiently();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = duration_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const duration_input = duration_block.getInput('DURATION');\n\n                    const duration_shadow_block = this.workspace.newBlock('math_number_positive');\n                    duration_shadow_block.setShadow(true);\n                    duration_shadow_block.outputConnection.connect(duration_input.connection);\n                    duration_shadow_block.initSvg();\n                    duration_shadow_block.renderEfficiently();\n\n                    const stake_input = duration_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.renderEfficiently();\n\n                    this.dispose();\n                    window.Blockly.getMainWorkspace().cleanUp(x, y);\n                });\n            });\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_multiplier = block => {\n    const amount =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'AMOUNT',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '0';\n    const { currency } = DBotStore.instance.client;\n    const { setContractUpdateConfig } = DBotStore.instance;\n    const multiplier_value = block.getFieldValue('MULTIPLIERTYPE_LIST') || '1';\n    const stop_loss =\n        !block.getChildByType('multiplier_stop_loss')?.disabled &&\n        block.childValueToCode('multiplier_stop_loss', 'AMOUNT');\n    const take_profit =\n        !block.getChildByType('multiplier_take_profit')?.disabled &&\n        block.childValueToCode('multiplier_take_profit', 'AMOUNT');\n    const limit_order = {\n        stop_loss: stop_loss ? `+(Number(${stop_loss}).toFixed(2))` : undefined,\n        take_profit: take_profit ? `+(Number(${take_profit}).toFixed(2))` : undefined,\n    };\n\n    setContractUpdateConfig(take_profit, stop_loss);\n    // Determine decimal places for rounding the stake, this is done so Martingale multipliers\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            multiplier         : ${multiplier_value},\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            limit_order        : ${JSON.stringify(limit_order)},\n            basis              : 'stake',\n            stop_loss          : ${limit_order.stop_loss},\n            take_profit        : ${limit_order.take_profit},\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu, setCurrency } from '../../../utils';\n\nconst description = localize(\n    'Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n);\n\nBlockly.Blocks.multiplier_stop_loss = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Stop Loss: {{ currency }} {{ stop_loss }}', {\n                currency: '%1',\n                stop_loss: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: description,\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Stop loss (Multiplier)'),\n            description,\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) ||\n            (event.type === Blockly.Events.BLOCK_CHANGE && !event.isStart)\n        ) {\n            setCurrency(this);\n        }\n    },\n    restricted_parents: ['trade_definition_multiplier'],\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Stop loss must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.multiplier_stop_loss = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\nimport { excludeOptionFromContextMenu, modifyContextMenu, setCurrency } from '../../../utils';\n\nconst description = localize(\n    'Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the accumulator trade type.'\n);\n\nBlockly.Blocks.accumulator_take_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Take Profit: {{ currency }} {{ take_profit }}', {\n                currency: '%1',\n                take_profit: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: description,\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Take Profit (Accumulator)'),\n            description,\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) ||\n            (event.type === Blockly.Events.BLOCK_CHANGE && !event.isStart)\n        ) {\n            setCurrency(this);\n        }\n    },\n    customContextMenu(menu) {\n        const menu_items = [localize('Enable Block'), localize('Disable Block')];\n        excludeOptionFromContextMenu(menu, menu_items);\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['trade_definition_accumulator'],\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Take profit must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.accumulator_take_profit = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\nimport { modifyContextMenu, setCurrency } from '../../../utils';\n\nconst description = localize(\n    'Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n);\n\nBlockly.Blocks.multiplier_take_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Take Profit: {{ currency }} {{ take_profit }}', {\n                currency: '%1',\n                take_profit: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: description,\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Take Profit (Multiplier)'),\n            description,\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) ||\n            (event.type === Blockly.Events.BLOCK_CHANGE && !event.isStart)\n        ) {\n            setCurrency(this);\n        }\n    },\n    restricted_parents: ['trade_definition_multiplier'],\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Take profit must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.multiplier_take_profit = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { modifyContextMenu, runGroupedEvents, runIrreversibleEvents, setCurrency } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\nimport { handleProposalRequestForAccumulators } from '../../../accumulators-proposal-handler';\n\nBlockly.Blocks.trade_definition_accumulator = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Growth Rate: {{ accumulator }}', {\n                accumulator: '%1',\n            }),\n            message1: `${localize('Stake')}: %1 %2`,\n            message2: '%1',\n            message3: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'GROWTHRATE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'ACCUMULATOR_PARAMS',\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options, such as accumulator and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Accumulator trade options'),\n            description: localize(\n                'Define your trade options such as accumulator and stake. This block can only be used with the accumulator trade type. If you select another trade type, this block will be replaced with the Trade options block.'\n            ),\n        };\n    },\n    validateBlocksInStatement() {\n        // Enforce only accumulator_<type> blocks in ACCUMULATOR_PARAMS statement.\n        const blocks_in_accumulator = this.getBlocksInStatement('ACCUMULATOR_PARAMS');\n\n        if (blocks_in_accumulator.length > 0) {\n            const block_types_in_accumulator = [];\n            blocks_in_accumulator.forEach(block => {\n                block_types_in_accumulator.push(block.type);\n\n                const block_accumulator_take_profit = block.childValueToCode('accumulator_take_profit', 'AMOUNT');\n\n                if (block_accumulator_take_profit <= 0) {\n                    block.setDisabled(true);\n                }\n\n                if (block.type === 'accumulator_take_profit' && block_accumulator_take_profit > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (\n                    !/^accumulator_.+$/.test(block.type) ||\n                    new Set(block_types_in_accumulator).size !== block_types_in_accumulator.length\n                ) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(true);\n                    });\n                }\n            });\n        }\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n        handleProposalRequestForAccumulators(this);\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_growth_rate = this.getFieldValue('GROWTHRATE_LIST');\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateAccumulatorInput(false);\n            } else {\n                this.updateAccumulatorInput(true);\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            setCurrency(this);\n            this.validateBlocksInStatement();\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateAccumulatorInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'GROWTHRATE_LIST': {\n                        this.updateAccumulatorInput(false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateAccumulatorInput(true);\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            this.validateBlocksInStatement();\n            if (event.blockId === this.id) {\n                // Ensure this block is populated after initial drag from flyout.\n                if (!this.selected_growth_rate) {\n                    const fake_creation_event = new Blockly.Events.Create(this);\n                    fake_creation_event.recordUndo = false;\n                    Blockly.Events.fire(fake_creation_event);\n                } else if (this.selected_trade_type !== 'accumulator') {\n                    this.updateAccumulatorInput(true);\n                }\n            }\n        }\n    },\n    updateAmountLimits: Blockly.Blocks.trade_definition_tradeoptions.updateAmountLimits,\n    updateAccumulatorInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'accumulator') {\n            contracts_for.getAccumulationRange().then(accumulator_range => {\n                if (accumulator_range.length > 0) {\n                    const accumulator_list_dropdown = this.getField('GROWTHRATE_LIST');\n                    const accumulator_options = accumulator_range.map(value => {\n                        const option = value.toString();\n                        return [`${option * 100}%`, option];\n                    });\n\n                    accumulator_list_dropdown?.updateOptions(accumulator_options, {\n                        default_value: should_use_default_value ? undefined : accumulator_list_dropdown.getValue(),\n                    });\n                }\n            });\n            return;\n        }\n\n        if (this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const {\n                        workspaces: {\n                            indentWorkspace: { x, y },\n                        },\n                    } = config;\n\n                    const duration_block = this.workspace.newBlock('trade_definition_tradeoptions');\n                    duration_block.initSvg();\n                    duration_block.render();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = duration_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const duration_input = duration_block.getInput('DURATION');\n\n                    const duration_shadow_block = this.workspace.newBlock('math_number_positive');\n                    duration_shadow_block.setShadow(true);\n                    duration_shadow_block.outputConnection.connect(duration_input.connection);\n                    duration_shadow_block.initSvg();\n                    duration_shadow_block.render(true);\n\n                    const stake_input = duration_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.render(true);\n\n                    this.dispose();\n                    Blockly.derivWorkspace.cleanUp(x, y);\n                });\n            });\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.trade_definition_accumulator = block => {\n    const amount =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'AMOUNT',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '0';\n    const { currency } = DBotStore.instance.client;\n    const { setContractUpdateConfig } = DBotStore.instance;\n    const growth_rate = block.getFieldValue('GROWTHRATE_LIST') || '1';\n    const take_profit =\n        !block.getChildByType('accumulator_take_profit')?.disabled &&\n        block.childValueToCode('accumulator_take_profit', 'AMOUNT');\n\n    const limit_order = {\n        take_profit: take_profit ? `+(Number(${take_profit}).toFixed(2))` : undefined,\n    };\n\n    setContractUpdateConfig(undefined, take_profit);\n    // Determine decimal places for rounding the stake, this is done so Martingale accumulators\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            growth_rate        : ${growth_rate},\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            limit_order        : ${JSON.stringify(limit_order)},\n            basis              : 'stake',\n            take_profit          : ${limit_order.take_profit},\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.logic_compare = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['=', 'EQ'],\n                        ['\\u2260', 'NEQ'],\n                        ['\\u200F<', 'LT'],\n                        ['\\u200F\\u2264', 'LTE'],\n                        ['\\u200F>', 'GT'],\n                        ['\\u200F\\u2265', 'GTE'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            inputsInline: true,\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Compares two values'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Compare'),\n            description: localize('This block compares two values and is used to build a conditional structure.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.logic_compare = block => {\n    const operatorMapping = {\n        EQ: '==',\n        NEQ: '!=',\n        LT: '<',\n        LTE: '<=',\n        GT: '>',\n        GTE: '>=',\n    };\n\n    const operator = operatorMapping[block.getFieldValue('OP') || 'EQ'];\n    const order = ['==', '!='].includes(operator)\n        ? Blockly.JavaScript.javascriptGenerator.ORDER_EQUALITY\n        : Blockly.JavaScript.javascriptGenerator.ORDER_RELATIONAL;\n\n    const argument0 = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'A', order) || 'false';\n    const argument1 = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'B', order) || 'false';\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark, minusIconDark } from '../images';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.controls_if = {\n    init() {\n        this.value_connections = [null];\n        this.statement_connections = [null];\n        this.else_statement_connection = null;\n        this.else_if_count = 0;\n        this.else_count = 0;\n        this.jsonInit(this.definition());\n        this.updateShape();\n    },\n    definition() {\n        return {\n            message0: localize('if {{ condition }} then', { condition: '%1' }),\n            message1: '%1',\n            message2: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'IF0',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_image',\n                    src: ' ', // this is here to add extra padding\n                    width: 150,\n                    height: 1,\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_statement',\n                    name: 'DO0',\n                },\n            ],\n            inputsInline: true,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Conditional block'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Conditional block'),\n            description: localize(\n                'This block evaluates a statement and will perform an action only when the statement is true.'\n            ),\n        };\n    },\n    /**\n     * Create XML to represent the number of else-if and else inputs.\n     * @return {Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n\n        if (this.else_if_count) {\n            container.setAttribute('elseif', this.else_if_count);\n        }\n\n        if (this.else_count) {\n            container.setAttribute('else', 1);\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the else-if and else inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.else_if_count = parseInt(xmlElement.getAttribute('elseif')) || 0;\n        this.else_count = parseInt(xmlElement.getAttribute('else')) || 0;\n        this.rebuildShape();\n    },\n    rebuildShape() {\n        const value_connections = [null];\n        const statement_connections = [null];\n        const else_statement_connection = this.getInput('ELSE')?.connection?.targetConnection || null;\n\n        let i = 1;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const input_names = this.getIfInputNames(i);\n            const if_input = this.getInput(input_names.IF);\n\n            if (!if_input) {\n                break;\n            }\n\n            const do_input = this.getInput(input_names.DO);\n            value_connections.push(if_input.connection.targetConnection);\n            statement_connections.push(do_input.connection.targetConnection);\n            i++;\n        }\n\n        this.updateShape();\n        this.reconnectChildBlocks(value_connections, statement_connections, else_statement_connection);\n    },\n    update(updateFn) {\n        Blockly.Events.setGroup(true);\n\n        const old_mutation_dom = this.mutationToDom();\n        const old_mutation = old_mutation_dom && Blockly.Xml.domToText(old_mutation_dom);\n        const is_rendered = this.rendered;\n\n        this.rendered = false;\n\n        if (updateFn) {\n            updateFn.call(this);\n        }\n\n        this.updateShape();\n        this.rendered = is_rendered;\n        this.initSvg();\n\n        const group = Blockly.Events.getGroup();\n        const new_mutation_dom = this.mutationToDom();\n        const new_mutation = new_mutation_dom && Blockly.Xml.domToText(new_mutation_dom);\n\n        if (old_mutation !== new_mutation) {\n            const change_event = new Blockly.Events.BlockChange(this, 'mutation', null, old_mutation, new_mutation);\n            Blockly.Events.fire(change_event);\n\n            setTimeout(() => {\n                Blockly.Events.setGroup(group);\n                this.bumpNeighbours();\n                Blockly.Events.setGroup(false);\n            }, Blockly.BUMP_DELAY);\n        }\n\n        if (this.rendered) {\n            this.renderEfficiently();\n        }\n\n        Blockly.Events.setGroup(false);\n    },\n    updateShape() {\n        if (this.getInput('ELSE')) {\n            this.removeInput('ELSE');\n            this.removeInput('ELSE_LABEL');\n            this.removeInput('DELETE_ELSE');\n        }\n\n        let i = 1;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const input_names = this.getIfInputNames(i);\n\n            if (!this.getInput(input_names.IF)) {\n                break;\n            }\n\n            this.removeInput(input_names.IF_LABEL);\n            this.removeInput(input_names.IF);\n            this.removeInput(input_names.THEN_LABEL);\n            this.removeInput(input_names.DELETE_ICON);\n            this.removeInput(input_names.DO);\n\n            i++;\n        }\n\n        if (this.getInput('MUTATOR')) {\n            this.removeInput('MUTATOR'); // \"+\" icon.\n        }\n\n        // Rebuild else if statements\n        for (let j = 1; j <= this.else_if_count; j++) {\n            const input_names = this.getIfInputNames(j);\n            const removeElseIf = () => this.modifyElseIf(false, j);\n\n            this.appendDummyInput(input_names.IF_LABEL).appendField(localize('else if'));\n            this.appendValueInput(input_names.IF).setCheck('Boolean');\n            this.appendDummyInput(input_names.THEN_LABEL).appendField(localize('then'));\n            this.appendDummyInput(input_names.DELETE_ICON).appendField(\n                new Blockly.FieldImage(minusIconDark, 24, 24, '-', removeElseIf)\n            );\n            this.appendStatementInput(input_names.DO);\n        }\n\n        // Rebuild else statement\n        if (this.else_count > 0) {\n            const removeElse = () => this.modifyElse(false);\n            this.appendDummyInput('ELSE_LABEL').appendField(localize('else'));\n            this.appendDummyInput('DELETE_ELSE').appendField(\n                new Blockly.FieldImage(minusIconDark, 24, 24, '-', removeElse, false)\n            );\n            this.appendStatementInput('ELSE');\n        }\n\n        const addElseIf = () => {\n            if (this.else_count === 0) {\n                this.modifyElse(true);\n            } else {\n                if (!this.else_if_count) {\n                    this.else_if_count = 0;\n                }\n\n                this.modifyElseIf(true);\n            }\n        };\n\n        // Re-add the \"+\" icon\n        this.appendDummyInput('MUTATOR').appendField(\n            new Blockly.FieldImage(plusIconDark, 24, 24, '+', addElseIf, false)\n        );\n\n        this.initSvg();\n        this.queueRender();\n    },\n    storeConnections(arg = 0) {\n        this.value_connections = [null];\n        this.statement_connections = [null];\n        this.else_statement_connection = null;\n\n        for (let i = 1; i <= this.else_if_count; i++) {\n            if (arg !== i) {\n                const input_names = this.getIfInputNames(i);\n\n                this.value_connections.push(this.getInput(input_names.IF).connection.targetConnection);\n                this.statement_connections.push(this.getInput(input_names.DO).connection.targetConnection);\n            }\n        }\n\n        const else_input = this.getInput('ELSE');\n\n        if (else_input) {\n            this.else_statement_connection = else_input.connection.targetConnection;\n        }\n    },\n    reconnectChildBlocks(opt_value_conns, opt_statement_conns, opt_else_statement_conns) {\n        const value_connections = opt_value_conns ?? this.value_connections;\n        const statement_connections = opt_statement_conns ?? this.statement_connections;\n        const else_statement_connection = opt_else_statement_conns ?? this.else_statement_connection;\n\n        for (let i = 1; i <= this.else_if_count; i++) {\n            const input_names = this.getIfInputNames(i);\n            const value_connection = value_connections[i];\n            const statement_connection = statement_connections[i];\n\n            const if_input = this.getInput(input_names.IF);\n            if (value_connection && if_input) {\n                if_input.connection.disconnect();\n                if_input.connection.connect(value_connection);\n            }\n\n            const do_input = this.getInput(input_names.DO);\n            if (statement_connection && do_input) {\n                do_input.connection.disconnect();\n                do_input.connection.connect(statement_connection);\n            }\n        }\n\n        const else_input = this.getInput('ELSE');\n        if (else_statement_connection && else_input) {\n            else_input.connection.disconnect();\n            else_input.connection.connect(else_statement_connection);\n        }\n    },\n    modifyElse(is_add) {\n        const update = () => {\n            this.else_count += is_add ? 1 : -1;\n        };\n\n        this.storeConnections();\n        this.update(update);\n        this.reconnectChildBlocks();\n    },\n    modifyElseIf(is_add, opt_idx) {\n        this.storeConnections(opt_idx);\n\n        const update = () => {\n            this.else_if_count += is_add ? 1 : -1;\n        };\n\n        this.update(update);\n        this.reconnectChildBlocks();\n    },\n    getRequiredValueInputs() {\n        const required_inputs = {};\n        this.inputList\n            .filter(input => /^IF[0-9]*?$/.test(input.name))\n            .forEach(input => (required_inputs[input.name] = null));\n\n        return required_inputs;\n    },\n    getIfInputNames: idx => {\n        return {\n            IF_LABEL: `IF_LABEL${idx}`,\n            IF: `IF${idx}`,\n            THEN_LABEL: `THEN_LABEL${idx}`,\n            DELETE_ICON: `DELETE_ICON${idx}`,\n            DO: `DO${idx}`,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.controls_if = block => {\n    // If/elseif/else condition.\n    let n = 0;\n    let code = '';\n\n    do {\n        const condition =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                `IF${n}`,\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || 'false';\n\n        // i.e. (else)? if { // code }\n        const keyword = n > 0 ? 'else if' : 'if';\n        code += `\n        ${keyword} (${condition}) {\n            ${Blockly.JavaScript.javascriptGenerator.statementToCode(block, `DO${n}`)}\n        }`;\n        n++;\n    } while (block.getInput(`IF${n}`));\n\n    if (block.getInput('ELSE')) {\n        code += `\n        else {\n            ${Blockly.JavaScript.javascriptGenerator.statementToCode(block, 'ELSE')}\n        }`;\n    }\n\n    return `${code}\\n`;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.logic_boolean = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BOOL',\n                    options: [\n                        [localize('true'), 'TRUE'],\n                        [localize('false'), 'FALSE'],\n                    ],\n                },\n            ],\n            inputsInline: true,\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns either True or False'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('True-False'),\n            description: localize('This is a single block that returns a boolean value, either true or false.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.logic_boolean = block => {\n    const code = block.getFieldValue('BOOL') === 'TRUE' ? 'true' : 'false';\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.logic_operation = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('and'), 'AND'],\n                        [localize('or'), 'OR'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            inputsInline: true,\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Performs selected logic operation'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Logic operation'),\n            description: localize('This block performs the \"AND\" or the \"OR\" logic operation.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.logic_operation = block => {\n    const selectedOperator = block.getFieldValue('OP');\n\n    let operator, order;\n\n    if (selectedOperator === 'AND') {\n        operator = '&&';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_AND;\n    } else if (selectedOperator === 'OR') {\n        operator = '||';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_OR;\n    }\n\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'A',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || 'false';\n    const argument1 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'B',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || 'false';\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.logic_null = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            inputsInline: true,\n            message0: 'null',\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block assigns a null value to an item or statement.'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Null'),\n            description: localize('This block assigns a null value to an item or statement.'),\n        };\n    },\n};\nBlockly.JavaScript.javascriptGenerator.forBlock.logic_null = () => [\n    'null',\n    Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.logic_ternary = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('test {{ condition }}', { condition: '%1' }),\n            message1: localize('if true {{ return_value }}', { return_value: '%1' }),\n            message2: localize('if false {{ return_value }}', { return_value: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'IF',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'THEN',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_value',\n                    name: 'ELSE',\n                },\n            ],\n            inputsInline: true,\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'This block tests if a given value is true or false and returns “True” or “False” accordingly.'\n            ),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Test value'),\n            description: localize(\n                'This block tests if a given value is true or false and returns “True” or “False” accordingly.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            IF: null,\n            THEN: null,\n            ELSE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.logic_ternary = block => {\n    const valueIf =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'IF',\n            Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL\n        ) || 'false';\n    const valueThen =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'THEN',\n            Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL\n        ) || 'null';\n    const valueElse =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'ELSE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL\n        ) || 'null';\n\n    const code = `(${valueIf} ? ${valueThen} : ${valueElse})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.logic_negate = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('not {{ boolean }}', { boolean: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                },\n            ],\n            inputsInline: true,\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Converts a given True or False to the opposite value'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Logic negation'),\n            description: localize('This block converts the boolean value (true or false) to its opposite.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            BOOL: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.logic_negate = block => {\n    const order = Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT;\n    const argument0 = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'BOOL', order) || 'true';\n\n    const code = `!${argument0}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_change = {\n    /**\n     * Initializes the block, in most cases this calls the jsonInit function, in some\n     * cases it may add extra properties to the block object.\n     * https://developers.google.com/blockly/reference/js/Blockly.Block#jsonInit\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: localize('change {{ variable }} by {{ number }}', {\n                variable: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'DELTA',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block adds the given number to the selected variable'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            display_name: localize('Change variable'),\n            description: localize('This block adds the given number to the selected variable.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DELTA: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_change = block => {\n    const variable = block.getFieldValue('VAR');\n    // eslint-disable-next-line no-underscore-dangle\n    const argument0 = Blockly.JavaScript.variableDB_.getName(variable, Blockly.Variables.CATEGORY_NAME);\n    const argument1 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'DELTA',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION\n        ) || '0';\n    const code = `${argument0} = (typeof ${argument0} === 'number' ? ${argument0} : 0) + ${argument1};`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_constant = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CONSTANT',\n                    options: [\n                        ['\\u03C0', 'PI'],\n                        ['\\u2107', 'E'],\n                        ['\\u03d5', 'GOLDEN_RATIO'],\n                        ['sqrt(2)', 'SQRT2'],\n                        ['sqrt(\\u00bd)', 'SQRT1_2'],\n                        ['\\u221e', 'INFINITY'],\n                    ],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the selected constant values.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Mathematical constants'),\n            description: localize('This block gives you the selected constant values.'),\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_constant = block => {\n    const constant = block.getFieldValue('CONSTANT');\n\n    let code, order;\n\n    if (constant === 'PI') {\n        code = 'Math.PI';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n    } else if (constant === 'E') {\n        code = 'Math.E';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n    } else if (constant === 'GOLDEN_RATIO') {\n        code = '(1 + Math.sqrt(5)) / 2';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION;\n    } else if (constant === 'SQRT2') {\n        code = 'Math.SQRT2';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n    } else if (constant === 'SQRT1_2') {\n        code = 'Math.SQRT1_2';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n    } else if (constant === 'INFINITY') {\n        code = 'Infinity';\n        order = Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC;\n    }\n\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_constrain = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('constrain {{ number }} low {{ low_number }} high {{ high_number }}', {\n                number: '%1',\n                low_number: '%2',\n                high_number: '%3',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'LOW',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'HIGH',\n                    check: 'Number',\n                },\n            ],\n            inputsInline: true,\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block constrains a given number so that it is within a set range.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Constrain within a range'),\n            description: localize('This block constrains a given number so that it is within a set range.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n            LOW: null,\n            HIGH: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_constrain = block => {\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || '0';\n    const argument1 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'LOW',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || '0';\n    const argument2 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'HIGH',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || '0';\n\n    const code = `Math.min(Math.max(${argument0}, ${argument1}), ${argument2})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_modulo = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('remainder of {{ number1 }} ÷ {{ number2 }}', {\n                number1: '%1',\n                number2: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DIVIDEND',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'DIVISOR',\n                    check: 'Number',\n                },\n            ],\n            inputsInline: true,\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the remainder after a division'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Remainder after division'),\n            description: localize('Returns the remainder after the division of the given numbers.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DIVIDEND: null,\n            DIVISOR: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_modulo = block => {\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'DIVIDEND',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS\n        ) || '0';\n    const argument1 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'DIVISOR',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS\n        ) || '0';\n\n    const code = `${argument0} % ${argument1}`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_number = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const fieldInput = this.getField('NUM');\n        fieldInput.setValidator(input => this.numberValidator(input));\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_number',\n                    name: 'NUM',\n                    value: 0,\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Please use `.` as a decimal separator for fractional numbers.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Number'),\n            description: localize(\n                'Enter an integer or fractional number into this block. Please use `.` as a decimal separator for fractional numbers.'\n            ),\n        };\n    },\n    numberValidator(input) {\n        if (/^-?([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(input) && input < Number.MAX_SAFE_INTEGER) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_number = block => {\n    const code = block.getFieldValue('NUM');\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_number_positive = {\n    init: Blockly.Blocks.math_number.init,\n    definition: Blockly.Blocks.math_number.definition,\n    meta() {\n        return {\n            display_name: localize('Math Number Positive'),\n            description: localize('Math Number Description'),\n        };\n    },\n    numberValidator(input) {\n        if (/^([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(input) && input < Number.MAX_SAFE_INTEGER) {\n            return undefined;\n        }\n        return null;\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_number_positive = block => {\n    return Blockly.JavaScript.javascriptGenerator.forBlock.math_number(block);\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_number_property = {\n    init() {\n        this.jsonInit(this.definition());\n\n        this.setOnChange(event => {\n            if (event.name === 'PROPERTY') {\n                const hasDivisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n                this.updateShape(hasDivisorInput);\n            }\n        });\n    },\n    definition() {\n        return {\n            message0: localize('{{ number }} is {{ type }}', {\n                number: '%1',\n                type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'NUMBER_TO_CHECK',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'PROPERTY',\n                    options: [\n                        [localize('even'), 'EVEN'],\n                        [localize('odd'), 'ODD'],\n                        [localize('prime'), 'PRIME'],\n                        [localize('whole'), 'WHOLE'],\n                        [localize('positive'), 'POSITIVE'],\n                        [localize('negative'), 'NEGATIVE'],\n                        [localize('divisible by'), 'DIVISIBLE_BY'],\n                    ],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            toolip: localize('This block tests a given number according to the selection'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Test a number'),\n            description: localize(\n                'This block tests a given number according to the selection and it returns a value of “True” or “False”. Available options: Even, Odd, Prime, Whole, Positive, Negative, Divisible'\n            ),\n        };\n    },\n    domToMutation(xmlElement) {\n        const hasDivisorInput = xmlElement.getAttribute('divisor_input') === 'true';\n        this.updateShape(hasDivisorInput);\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const divisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n        container.setAttribute('divisor_input', divisorInput);\n        return container;\n    },\n    updateShape(hasDivisorInput) {\n        if (hasDivisorInput) {\n            const inputExists = this.getInput('DIVISOR');\n            if (inputExists) {\n                this.removeInput('DIVISOR');\n            } else {\n                this.appendValueInput('DIVISOR').setCheck('Number');\n                this.initSvg();\n                this.renderEfficiently();\n            }\n        }\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    getRequiredValueInputs() {\n        return {\n            NUMBER_TO_CHECK: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_number_property = block => {\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'NUMBER_TO_CHECK',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS\n        ) || '0';\n    const property = block.getFieldValue('PROPERTY');\n\n    let code;\n\n    if (property === 'PRIME') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathIsPrime', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }`,\n        ]);\n        code = `${functionName}(${argument0})`;\n        return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n    } else if (property === 'EVEN') {\n        code = `${argument0} % 2 === 0`;\n    } else if (property === 'ODD') {\n        code = `${argument0} % 2 === 1`;\n    } else if (property === 'WHOLE') {\n        code = `${argument0} % 1 === 0`;\n    } else if (property === 'POSITIVE') {\n        code = `${argument0} > 0`;\n    } else if (property === 'NEGATIVE') {\n        code = `${argument0} < 0`;\n    } else if (property === 'DIVISIBLE_BY') {\n        const divisor =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'DIVISOR',\n                Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS\n            ) || '0';\n        code = `${argument0} % ${divisor} == 0`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_EQUALITY];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_on_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ calculation }} of list {{ input_list }}', {\n                calculation: '%1',\n                input_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('sum'), 'SUM'],\n                        [localize('min'), 'MIN'],\n                        [localize('max'), 'MAX'],\n                        [localize('average'), 'AVERAGE'],\n                        [localize('median'), 'MEDIAN'],\n                        [localize('mode'), 'MODE'],\n                        [localize('antimode'), 'ANTIMODE'],\n                        [localize('standard deviation'), 'STD_DEV'],\n                        [localize('random item'), 'RANDOM'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Aggregate operations'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Aggregate operations'),\n            description: localize(\n                'This block performs the following operations on a given list: sum, minimum, maximum, average, median, mode, antimode, standard deviation, random item.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        const type_list = [\n            'variables_get',\n            'lists_getSublist',\n            'ohlc_values',\n            'lists_split',\n            'ohlc',\n            'ticks',\n            'lists_repeat',\n            'lastDigitList',\n            'ohlc_values_in_list',\n            'procedures_callreturn',\n        ];\n        return {\n            LIST: () => {\n                return !type_list.includes(this.childBlocks_[0]?.type);\n            },\n        };\n    },\n};\n\n/* eslint-disable no-underscore-dangle */\nBlockly.JavaScript.javascriptGenerator.forBlock.math_on_list = block => {\n    const operation = block.getFieldValue('OP');\n\n    let code, list;\n\n    if (operation === 'SUM') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                },0);\n            }`,\n        ]);\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MIN') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return Math.min.apply(null, (recursiveList(myList, final_list) || [0]));\n            }`,\n        ]);\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MAX') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return Math.max.apply(null, (recursiveList(myList, final_list) || [0]));\n            }`,\n        ]);\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'AVERAGE') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                }, 0) / myList.length;\n            }`,\n        ]);\n\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MEDIAN') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathMedian', [\n            `\n            Array.prototype.swap = function (x,y) {\n                var b = this[x];\n                this[x] = this[y];\n                this[y] = b;\n                return this;\n            }\n\n            function partition(arr, start, end){\n                var pivotValue = arr[end];\n                var pivotIndex = start;\n                for (var i = start; i < end; i++) {\n                    if (arr[i] < pivotValue) {\n                    arr.swap(pivotIndex, i);\n                    pivotIndex++;\n                    }\n                }\n                arr.swap(end, pivotIndex);\n                return pivotIndex;\n            };\n\n            function quickSort(arr) {\n                var stack = [];\n                stack.push(0);\n                stack.push(arr.length - 1);\n\n                while(stack[stack.length - 1] >= 0){\n                    end = stack.pop();\n                    start = stack.pop();\n                    pivotIndex = partition(arr, start, end);\n                    if (pivotIndex - 1 > start){\n                        stack.push(start);\n                        stack.push(pivotIndex - 1);\n                    }\n                    if (pivotIndex + 1 < end){\n                        stack.push(pivotIndex + 1);\n                        stack.push(end);\n                    }\n                }\n\n            }\n\n            function calculateMedian(final_list){\n                quickSort(final_list);\n\n                if (final_list.length % 2 == 0) {\n                    return (final_list[final_list.length / 2 - 1] + final_list[final_list.length / 2]) / 2;\n                }\n                return final_list[(final_list.length - 1) / 2];\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return calculateMedian(recursiveList(myList, final_list));\n            }`,\n        ]);\n\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MODE') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathModes', [\n            `\n            function calculateMathMode(values){\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n\n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathMode(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'ANTIMODE') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathAntiMode', [\n            `\n            function calculateMathAntiMode(values){\n                var antiMode = [];\n                var counts = [];\n                var minCount = 1;\n                var countArray = [];\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                }\n\n                 minCount = Math.min.apply(null, counts.map(function(element) {\n                     return element[1];\n                 }));\n\n                 for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == minCount) {\n                        antiMode.push(counts[j][0]);\n                    }\n                }\n\n                return antiMode;\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathAntiMode(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'STD_DEV') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathStandardDeviation', [\n            `\n            function calculateMathStandardDeviation(numbers){\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }, 0) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathStandardDeviation(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'RANDOM') {\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathRandomList', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                var final_list = recursiveList(list, final_list);\n                var x = Math.floor(Math.random() * final_list.length);\n                return final_list[x];\n            }`,\n        ]);\n\n        list =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'LIST',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_random_float = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('random fraction'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a random fraction between 0.0 to 1.0'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Random fraction number'),\n            description: localize('This block gives you a random fraction between 0.0 to 1.0.'),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_random_float = () => [\n    'Math.random()',\n    Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL,\n];\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_random_int = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('random integer from {{ start_number }} to {{ end_number }}', {\n                start_number: '%1',\n                end_number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TO',\n                    check: 'Number',\n                },\n            ],\n            inputsInline: true,\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a random number from within a set range'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Random integer'),\n            description: localize('This block gives you a random number from within a set range.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            FROM: null,\n            TO: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_random_int = block => {\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'FROM',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || '0';\n    const argument1 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TO',\n            Blockly.JavaScript.javascriptGenerator.ORDER_COMMA\n        ) || '0';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('mathRandomInt', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }`,\n    ]);\n\n    const code = `${functionName}(${argument0}, ${argument1})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\n// https://github.com/google/blockly/blob/master/generators/javascript/math.js\nBlockly.Blocks.math_round = {\n    /**\n     * Check if a number is even, odd, prime, whole, positive, or negative\n     * or if it is divisible by certain number. Returns true or false.\n     * @this Blockly.Block\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['round', 'ROUND'],\n                        ['round up', 'ROUNDUP'],\n                        ['round down', 'ROUNDDOWN'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Rounds a given number to an integer'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Rounding operation'),\n            description: localize(\n                'This block rounds a given number according to the selection: round, round up, round down.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_round = block => {\n    const operation = block.getFieldValue('OP');\n    const argument0 =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'NUM',\n            Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n        ) || '0';\n\n    let code;\n\n    if (operation === 'ROUND') {\n        code = `Math.round(${argument0})`;\n    } else if (operation === 'ROUNDUP') {\n        code = `Math.ceil(${argument0})`;\n    } else if (operation === 'ROUNDDOWN') {\n        code = `Math.floor(${argument0})`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_arithmetic = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['+', 'ADD'],\n                        ['-', 'MINUS'],\n                        ['*', 'MULTIPLY'],\n                        ['/', 'DIVIDE'],\n                        ['^', 'POWER'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            inputsInline: true,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block performs arithmetic operations between two numbers.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Arithmetical operations'),\n            description: localize('This block performs arithmetic operations between two numbers.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_arithmetic = block => {\n    const operators = {\n        ADD: ['+', Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION],\n        MINUS: ['-', Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION],\n        MULTIPLY: ['*', Blockly.JavaScript.javascriptGenerator.ORDER_MULTIPLICATION],\n        DIVIDE: ['/', Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION],\n        POWER: [null, Blockly.JavaScript.javascriptGenerator.ORDER_COMMA], // Handle power separately.\n    };\n\n    const tuple = operators[block.getFieldValue('OP')];\n    const operator = tuple[0];\n    const order = tuple[1];\n\n    const argument0 = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'A', order) || '0';\n    const argument1 = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'B', order) || '0';\n\n    let code;\n\n    // Power in JavaScript requires a special case since it has no operator.\n    if (!operator) {\n        code = `Math.pow(${argument0}, ${argument1})`;\n        return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n    }\n\n    code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_single = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('square root'), 'ROOT'],\n                        [localize('absolute'), 'ABS'],\n                        ['-', 'NEG'],\n                        ['ln', 'LN'],\n                        ['log10', 'LOG10'],\n                        ['e^', 'EXP'],\n                        ['10^', 'POW10'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Operations on a given number'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Operations on a given number'),\n            description: localize('This block performs the selected operations to a given number.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_single = block => {\n    const operator = block.getFieldValue('OP');\n\n    let code, arg;\n\n    if (operator === 'NEG') {\n        // Negation is a special case given its different operator precedence.\n        arg =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'NUM',\n                Blockly.JavaScript.javascriptGenerator.ORDER_UNARY_NEGATION\n            ) || '0';\n        if (arg[0] === '-') {\n            // --3 is not legal in JS\n            arg = ` ${arg}`;\n        }\n        code = `-${arg}`;\n        return [code, Blockly.JavaScript.javascriptGenerator.ORDER_UNARY_NEGATION];\n    }\n\n    if (['SIN', 'COS', 'TAN'].includes(operator)) {\n        arg =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'NUM',\n                Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION\n            ) || '0';\n    } else {\n        arg =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'NUM',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || '0';\n    }\n\n    // First, handle cases which generate values that don't need parentheses\n    // wrapping the code.\n    if (operator === 'ABS') {\n        code = `Math.abs(${arg})`;\n    } else if (operator === 'ROOT') {\n        code = `Math.sqrt(${arg})`;\n    } else if (operator === 'LN') {\n        code = `Math.log(${arg})`;\n    } else if (operator === 'EXP') {\n        code = `Math.pow(Math.E, ${arg})`;\n    } else if (operator === 'POW10') {\n        code = `Math.pow(10, ${arg})`;\n    } else if (operator === 'ROUND') {\n        code = `Math.round(${arg})`;\n    } else if (operator === 'ROUNDUP') {\n        code = `Math.ceil(${arg})`;\n    } else if (operator === 'ROUNDDOWN') {\n        code = `Math.floor(${arg})`;\n    } else if (operator === 'SIN') {\n        code = `Math.sin(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'COS') {\n        code = `Math.cos(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'TAN') {\n        code = `Math.tan(${arg} / 180 * Math.PI)`;\n    }\n\n    if (code) {\n        return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n    }\n\n    // Second, handle cases which generate values that may need parentheses\n    // wrapping the code.\n    if (operator === 'LOG10') {\n        code = `Math.log(${arg}) / Math.log(10)`;\n    } else if (operator === 'ASIN') {\n        code = `Math.asin(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ACOS') {\n        code = `Math.acos(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ATAN') {\n        code = `Math.atan(${arg}) / Math.PI * 180`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION];\n};\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.math_trig = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['sin', 'SIN'],\n                        ['cos', 'COS'],\n                        ['tan', 'TAN'],\n                        ['asin', 'ASIN'],\n                        ['acos', 'ACOS'],\n                        ['atan', 'ATAN'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Trigonometric functions'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Trigonometric functions'),\n            description: localize('This block performs trigonometric functions.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.math_trig = Blockly.JavaScript.javascriptGenerator.forBlock.math_single;\n","import { localize } from '@deriv/translations';\nimport { modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'TEXT',\n                },\n            ],\n            inputsInline: true,\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Enter some text here'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Text'),\n            description: localize('A  block that can contain text.'),\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.javascriptGenerator.quote_(block.getFieldValue('TEXT'));\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../images';\nimport { runGroupedEvents, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_join = {\n    protected_statements: ['STACK'],\n    allowed_children: ['text_statement'],\n    init() {\n        const field_image = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('ADD_ICON').appendField(field_image);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to create text with', { variable: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: localize('text'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            inputsInline: true,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Text join'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Text join'),\n            description: localize(\n                'Creates a single text string from combining the text value of each attached item, without spaces in between. The number of items can be added accordingly.'\n            ),\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || Blockly.derivWorkspace.isFlyoutVisible) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            const text_block = this.workspace.newBlock('text_statement');\n            text_block.required_parent_id = this.id;\n            text_block.setMovable(true);\n            text_block.initSvg();\n            text_block?.renderEfficiently();\n\n            const shadow_block = this.workspace.newBlock('text');\n            shadow_block.setShadow(true);\n            shadow_block.setFieldValue('', 'TEXT');\n            shadow_block.initSvg();\n\n            shadow_block?.renderEfficiently();\n\n            const text_input = text_block.getInput('TEXT');\n            text_input.connection.connect(shadow_block.outputConnection);\n\n            const connection = this.getLastConnectionInStatement('STACK');\n            connection.connect(text_block.previousConnection);\n        });\n\n        // TODO: Open editor and focus so user can add string right away?\n        // const inputField = shadow_block.getField('TEXT');\n        // inputField.showEditor_();\n    },\n    onchange: Blockly.Blocks.lists_create_with.onchange,\n};\n\n// Blockly.JavaScript.text_join = Blockly.JavaScript.lists_create_with;\nBlockly.JavaScript.javascriptGenerator.forBlock.text_join = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.CATEGORY_NAME\n    );\n    const blocks_in_stack = block.getBlocksInStatement('STACK');\n    const elements = blocks_in_stack.map(b => {\n        const value = Blockly.JavaScript.javascriptGenerator.forBlock[b.type](b);\n        return Array.isArray(value) ? value[0] : value;\n    });\n\n    const code = `${var_name} = [${elements}].join(\" \");\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { minusIconDark } from '../images';\nimport { runIrreversibleEvents, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_statement = {\n    required_parent_type: 'text_join',\n    init() {\n        this.required_parent_id = '';\n        const field_image = new Blockly.FieldImage(minusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('REMOVE_ICON').appendField(field_image);\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Text Statement'),\n            description: '',\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || Blockly.derivWorkspace.isFlyoutVisible || this.workspace.isDragging()) {\n            return;\n        }\n\n        const surround_parent = this.getSurroundParent();\n\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            this.setMovable(true);\n            if (!this.required_parent_id && surround_parent?.type === this.required_parent_type) {\n                this.required_parent_id = surround_parent.id;\n            }\n        }\n\n        if (event.type === Blockly.Events.BLOCK_DRAG && !event.isStart) {\n            const stack_blocks = Blockly.getMainWorkspace().getBlockById(event.blockId);\n\n            if (this.required_parent_id && (!surround_parent || surround_parent.id !== this.required_parent_id)) {\n                const original_parent = Blockly.getMainWorkspace().getBlockById(this.required_parent_id);\n\n                if (original_parent) {\n                    const first_block_in_stack = original_parent.getInputTargetBlock('STACK');\n\n                    if (first_block_in_stack) {\n                        const last_connection = original_parent.getLastConnectionInStatement('STACK');\n                        runIrreversibleEvents(() => {\n                            last_connection.connect(this.previousConnection);\n                        });\n                    } else {\n                        runIrreversibleEvents(() => {\n                            original_parent.getInput('STACK').connection.connect(stack_blocks.previousConnection);\n                        });\n                    }\n                }\n            }\n        }\n    },\n    onIconClick: Blockly.Blocks.lists_statement.onIconClick,\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_statement = block => {\n    const code = `String(${Blockly.JavaScript.javascriptGenerator.valueToCode(\n        block,\n        'TEXT',\n        Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC\n    )})`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_append = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('to {{ variable }} append text {{ input_text }}', {\n                variable: '%1',\n                input_text: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('text'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Appends a given text to a variable'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Append'),\n            description: localize('Appends a given text to a variable.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_append = block => {\n    const forceString = value => {\n        const strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n        if (strRegExp.test(value)) {\n            return value;\n        }\n        return `String(${value})`;\n    };\n\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.CATEGORY_NAME);\n    const value =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TEXT',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || \"''\";\n\n    const code = `${varName} += ${forceString(value)};\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('length of {{ input_text }}', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Text String Length'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Text String Length'),\n            description: localize(\n                'Returns the number of characters of a given string of text, including numbers, spaces, punctuation marks, and symbols.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_length = block => {\n    const text =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL\n        ) || \"''\";\n\n    const code = `${text}.length`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('text {{ input_text }} is empty', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: ['String'],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Tests if a given text string is empty'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Text Is empty'),\n            description: localize('Tests whether a string of text is empty. Returns a boolean value (true or false).'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_isEmpty = block => {\n    const text =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || \"''\";\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === text) !== -1;\n\n    const code = isVariable ? `!${text} || !${text}.length` : `!${text}.length`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in text {{ input_text1 }} find {{ first_or_last }} occurence of text {{ input_text2 }}',\n                {\n                    input_text1: '%1',\n                    first_or_last: '%2',\n                    input_text2: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'END',\n                    options: [\n                        [localize('first'), 'FIRST'],\n                        [localize('last'), 'LAST'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            inputsInline: true,\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Search for a given string'),\n            cateogry: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Search for string'),\n            description: localize(\n                'Searches through a string of text for a specific occurrence of a given character or word, and returns the position.'\n            ),\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n            FIND: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_indexOf = block => {\n    const functionName = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const substring =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'FIND',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || \"''\";\n    const text =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'VALUE',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || \"''\";\n\n    const code = `${text}.${functionName}(${substring})`;\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION];\n    }\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_charAt = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const dropdown = this.getField('WHERE');\n        dropdown.setValidator(value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== this.isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.updateAt(true);\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    definition() {\n        return {\n            message0: localize('in text %1 get %2'),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE',\n                    options: [\n                        [localize('letter #'), 'FROM_START'],\n                        [localize('letter # from end'), 'FROM_END'],\n                        [localize('first letter'), 'FIRST'],\n                        [localize('last letter'), 'LAST'],\n                        [localize('random letter'), 'RANDOM'],\n                    ],\n                },\n            ],\n            inputsInline: true,\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a specific character from a given string'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get character'),\n            description: localize(\n                'Returns the specific character from a given string of text according to the selected option. '\n            ),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('at', !!this.isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        }\n\n        this.isAt = isAt;\n        this.initSvg();\n        this.renderEfficiently();\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n            AT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_charAt = block => {\n    const where = block.getFieldValue('WHERE') || 'FROM_START';\n    const textOrder =\n        where === 'RANDOM'\n            ? Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            : Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;\n    const text = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'VALUE', textOrder) || \"''\";\n\n    let code;\n\n    if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT');\n        // Adjust index if using one-based indices\n        code = `${text}.charAt(${at})`;\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT', 1, true);\n        code = `${text}.slice(${at}).charAt(0)`;\n    } else if (where === 'FIRST') {\n        code = `${text}.charAt(0)`;\n    } else if (where === 'LAST') {\n        code = `${text}.slice(-1)`;\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('textRandomLetter', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_getSubstring = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [localize('letter #'), 'FROM_START'],\n            [localize('letter # from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [localize('letter #'), 'FROM_START'],\n            [localize('letter # from end'), 'FROM_END'],\n            [localize('last'), 'LAST'],\n        ];\n\n        this.jsonInit(this.definition());\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in text {{ input_text }} get substring from {{ position1 }} {{ index1 }} to {{ position2 }} {{ index2 }}',\n                {\n                    input_text: '%1',\n                    position1: '%2',\n                    index1: '%3',\n                    position2: '%4',\n                    index2: '%5',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'STRING',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE1',\n                    options: this.WHERE_OPTIONS_1,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT1',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE2',\n                    options: this.WHERE_OPTIONS_2,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT2',\n                },\n            ],\n            inputsInline: true,\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a specific portion of a given string of text.'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get substring'),\n            description: localize('Returns a specific portion of a given string of text.'),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, is_at) {\n        const input = this.getInput(`AT${n}`);\n        let old_label_text;\n\n        // Keep track of initial FieldLabel, we'll restore this when\n        // input types were changed.\n        if (input) {\n            input.fieldRow.some(field => {\n                if (field instanceof Blockly.FieldLabel) {\n                    old_label_text = field.text_; // eslint-disable-line no-underscore-dangle\n                }\n            });\n            this.removeInput(`AT${n}`);\n        }\n\n        const new_input = is_at ? this.appendValueInput(`AT${n}`).setCheck('Number') : this.appendDummyInput(`AT${n}`);\n\n        if (old_label_text) {\n            new_input.insertFieldAt(0, new Blockly.FieldLabel(old_label_text));\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const new_at = ['FROM_START', 'FROM_END'].includes(value);\n\n            if (new_at !== is_at) {\n                this.updateAt(n, new_at);\n                this.setFieldValue(value, `WHERE${n}`);\n\n                return null;\n            }\n\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.renderEfficiently();\n    },\n    getRequiredValueInputs() {\n        const hasInput = input_name => this.getInput(input_name)?.type === Blockly.INPUT_VALUE;\n        return {\n            STRING: emptyTextValidator,\n            ...(hasInput('AT1') ? { AT1: emptyTextValidator } : {}),\n            ...(hasInput('AT2') ? { AT2: emptyTextValidator } : {}),\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_getSubstring = block => {\n    const text =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'STRING',\n            Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL\n        ) || \"''\";\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1, at2, code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = text;\n    } else if (\n        text.match(/^'?\\w+'?$/) ||\n        (where1 !== 'FROM_END' && where1 !== 'LAST' && where2 !== 'FROM_END' && where2 !== 'LAST')\n    ) {\n        switch (where1) {\n            case 'FROM_START': {\n                at1 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT1');\n                break;\n            }\n            case 'FROM_END': {\n                at1 = Blockly.JavaScript.javascriptGenerator.getAdjusted(\n                    block,\n                    'AT1',\n                    1,\n                    false,\n                    Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION\n                );\n                at1 = `${text}.length - ${at1}`;\n                break;\n            }\n            case 'FIRST': {\n                at1 = '0';\n                break;\n            }\n            default:\n                break;\n        }\n\n        switch (where2) {\n            case 'FROM_START': {\n                at2 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT2', 1);\n                break;\n            }\n            case 'FROM_END': {\n                at2 = Blockly.JavaScript.javascriptGenerator.getAdjusted(\n                    block,\n                    'AT2',\n                    0,\n                    false,\n                    Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION\n                );\n                at2 = `${text}.length - ${at2}`;\n                break;\n            }\n            case 'LAST': {\n                at2 = `${text}.length`;\n                break;\n            }\n            default:\n                break;\n        }\n\n        code = `${text}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.javascriptGenerator.getAdjusted(block, 'AT2');\n\n        const getIndex = (string_name, where, opt_at) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${string_name}.length - 1 - ${opt_at}`;\n            } else if (where === 'LAST') {\n                return `${string_name}.length - 1`;\n            }\n            return opt_at;\n        };\n        const where_pascal_case = {\n            FIRST: 'First',\n            LAST: 'Last',\n            FROM_START: 'FromStart',\n            FROM_END: 'FromEnd',\n        };\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_(\n            `subsequence${where_pascal_case[where1]}${where_pascal_case[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence\n                    ${where1 === 'FROM_END' || where1 === 'FROM_START' ? ', at1' : ''}\n                    ${where2 === 'FROM_END' || where2 === 'FROM_START' ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end   = ${getIndex('sequence', where2, 'at2')} + 1;\n                    \n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${functionName}(\n            ${text}\n            ${where1 === 'FROM_END' || where1 === 'FROM_START' ? `, ${at1}` : ''}\n            ${where2 === 'FROM_END' || where2 === 'FROM_START' ? `, ${at2}` : ''}\n        )`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_changeCase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Transform {{ input_text }} to {{ transform_type }}', {\n                input_text: '%1',\n                transform_type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'CASE',\n                    options: [\n                        [localize('UPPER CASE'), 'UPPERCASE'],\n                        [localize('lower case'), 'LOWERCASE'],\n                        [localize('Title Case'), 'TITLECASE'],\n                    ],\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Changes text case accordingly'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Change text case'),\n            description: localize(\n                'Changes the capitalisation of a string of text to Upper case, Lower case, Title case.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_changeCase = block => {\n    const operators = {\n        UPPERCASE: '.toUpperCase()',\n        LOWERCASE: '.toLowerCase()',\n        TITLECASE: null,\n    };\n    const operator = operators[block.getFieldValue('CASE')];\n    const textOrder = operator\n        ? Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        : Blockly.JavaScript.javascriptGenerator.ORDER_NONE;\n    const text = Blockly.JavaScript.javascriptGenerator.valueToCode(block, 'TEXT', textOrder) || \"''\";\n\n    let code;\n\n    if (operator) {\n        code = `${text}${operator}`;\n    } else {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.javascriptGenerator.provideFunction_('textToTitleCase', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_trim = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('trim spaces from {{ side }} of {{ input_text }}', { side: '%1', input_text: '%2' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MODE',\n                    options: [\n                        [localize('both sides'), 'BOTH'],\n                        [localize('left side'), 'LEFT'],\n                        [localize('right side'), 'RIGHT'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Trims spaces'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Trim spaces'),\n            description: localize('Trims the spaces within a given string or text.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_trim = block => {\n    const operators = {\n        LEFT: \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n        RIGHT: \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n        BOTH: '.trim()',\n    };\n\n    const operator = operators[block.getFieldValue('MODE')];\n    const text =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TEXT',\n            Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER\n        ) || \"''\";\n\n    const code = `${text}${operator}`;\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_print = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('print {{ input_text }}', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Displays a dialog window with a message'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    meta() {\n        return {\n            display_name: localize('Print'),\n            description: localize(\n                'This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click \"OK\".'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_print = block => {\n    const msg =\n        Blockly.JavaScript.javascriptGenerator.valueToCode(\n            block,\n            'TEXT',\n            Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n        ) || \"''\";\n    const code = `window.alert(${msg});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator, modifyContextMenu } from '../../utils';\n\nBlockly.Blocks.text_prompt_ext = {\n    init() {\n        this.jsonInit(this.definition());\n        const typeField = this.getField('TYPE');\n        typeField.setValidator(value => {\n            if (value === 'TEXT') {\n                this.setOutput(true, 'String');\n            } else if (value === 'NUMBER') {\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.renderEfficiently();\n            return undefined;\n        });\n    },\n    customContextMenu(menu) {\n        modifyContextMenu(menu);\n    },\n    definition() {\n        return {\n            message0: localize('prompt for {{ string_or_number }} with message {{ input_text }}', {\n                string_or_number: '%1',\n                input_text: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE',\n                    options: [\n                        [localize('string'), 'TEXT'],\n                        [localize('number'), 'NUMBER'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output:\n                typeof this.getFieldValue === 'function' && this.getFieldValue('TYPE') === 'TEXT' ? 'String' : 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            tooltip: localize('Request an input'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Request an input'),\n            description: localize(\n                'This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click \"OK\".'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.javascriptGenerator.forBlock.text_prompt_ext = block => {\n    let msg, code;\n\n    if (block.getField('TEXT')) {\n        // Internal message\n        // eslint-disable-next-line no-underscore-dangle\n        msg = Blockly.JavaScript.javascriptGenerator.quote_(block.getFieldValue('TEXT'));\n    } else {\n        // External message\n        msg =\n            Blockly.JavaScript.javascriptGenerator.valueToCode(\n                block,\n                'TEXT',\n                Blockly.JavaScript.javascriptGenerator.ORDER_NONE\n            ) || \"''\";\n    }\n\n    if (block.getFieldValue('TYPE') === 'NUMBER') {\n        code = `parseFloat(window.prompt(${msg}))`;\n    } else {\n        code = `window.prompt(${msg})`;\n    }\n\n    return [code, Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL];\n};\n"],"names":["defineContract","blueInfo","purchase","sellContract","finishSign","plusIconDark","plusIconLight","minusIconDark","Blockly","Blocks","procedures_defnoreturn","init","_this","this","arguments","argument_var_models","is_adding","timeout_id","jsonInit","definition","Msg","PROCEDURES_DEFNORETURN_COMMENT","setCommentText","getField","setValidator","Procedures","rename","fieldImage","FieldImage","onAddClick","dropdown_path","concat","workspace","options","pathToMedia","fieldImageCollapse","toggleCollapseWithDelay","appendDummyInput","appendField","setStatements","message0","localize","function_name","function_params","args0","type","name","text","inputsInline","colour","Colours","Special2","colourSecondary","colourTertiary","tooltip","category","Categories","Functions","meta","display_name","description","onchange","event","allowedEvents","Events","BLOCK_DELETE","BLOCK_CREATE","BLOCK_CHANGE","derivWorkspace","isFlyoutVisible","includes","blockId","id","getProcedureCallers","forEach","block","setFieldValue","newValue","appendCollapsedProcedureBlocksFields","_this2","readOnly","clearTimeout","setTimeout","promptMessage","dialog","prompt","paramName","variable","Variables","getOrCreateVariablePackage","push","setText","join","setProcedureParameters","initSvg","renderEfficiently","hasStatements","appendStatementInput","getInput","moveInputBefore","removeInput","updateParams","paramString","length","disable","enable","mutationToDom","optParamIds","_this3","container","document","createElement","setAttribute","getFieldValue","arg","i","parameter","getId","paramIds","appendChild","domToMutation","xmlElement","_this4","childNodes","childNode","nodeName","toLowerCase","var_name","getAttribute","var_id","console","log","getProcedureDef","_this5","getAllBlocks","filter","callType","data","getVars","getVarModels","customContextMenu","_this6","modifyContextMenu","option","enabled","replace","xmlMutation","argumentName","xmlArg","xmlBlock","callback","ContextMenu","callbackFactory","isCollapsed","argumentVarModel","getOption","xmlField","generateVariableFieldDom","xmlOptionBlock","JavaScript","javascriptGenerator","forBlock","functionName","variableDB_","getName","CATEGORY_NAME","branch","statementToCode","STATEMENT_PREFIX","prefixLines","INDENT","INFINITE_LOOP_TRAP","returnValue","valueToCode","ORDER_NONE","args","map","code","scrub_","definitions_","procedures_defreturn","dummy","message1","args1","check","renameVarById","displayRenamedVar","registerWorkspaceListener","procedures_callnoreturn","previousDisabledState","previousStatement","nextStatement","recordUndo","ids","indexOf","getProcedureCall","def","getDefinition","defType","JSON","stringify","setGroup","group","xml","xy","getRelativeToSurfaceXY","x","SNAP_RADIUS","RTL","y","mutation","field","createTextNode","Xml","domToWorkspace","procedure_definition","dispose","element","oldGroup","getGroup","disabled","setDisabled","getProcedureDefinition","getTopBlocks","find","tuple","Names","equals","renameProcedure","oldName","newName","paramNames","updateShape","setValue","FieldLabel","appendValueInput","topRow","removeField","centerOnBlock","select","ORDER_COMMA","procedures_callreturn","output","outputShape","OUTPUT_SHAPE_ROUND","ORDER_FUNCTION_CALL","procedures_ifreturn","hasReturnValue","condition","value","Number","isDragging","legal","FUNCTION_TYPES","getSurroundParent","rerender","getInheritedDisabled","lists_create_with","protected_statements","allowed_children","field_image","onIconClick","bind","Base","List","runGroupedEvents","statement_block","newBlock","required_parent_id","setMovable","getLastConnectionInStatement","connect","previousConnection","BLOCK_DRAG","isStart","getBlocksInStatement","runIrreversibleEvents","unplug","menu","elements","b","Array","isArray","lists_repeat","input_item","number","getRequiredValueInputs","ITEM","emptyTextValidator","NUM","provideFunction_","FUNCTION_NAME_PLACEHOLDER_","repeat_count","lists_length","input_list","VALUE","list","ORDER_MEMBER","lists_isEmpty","getAllVariables","findIndex","ORDER_LOGICAL_NOT","lists_indexOf","first_or_last","input_value","FIND","operator","item","oneBasedIndex","ORDER_ADDITION","lists_getIndex","MODE_OPTIONS","WHERE_OPTIONS","modeMenu","FieldDropdown","isStatement","updateStatement","setCheck","block_color","setColour","setTooltip","setInputsInline","setOutput","setOutputShape","updateAt","outputConnection","isAt","INPUT_VALUE","newStatement","setPreviousStatement","setNextStatement","newAt","order","mode","where","listOrder","at","getAdjusted","lists_setIndex","ORDER_ASSIGNMENT","cacheList","match","listVar","getDistinctName","ORDER_SUBTRACTION","xVar","lists_getSublist","WHERE_OPTIONS_1","WHERE_OPTIONS_2","isAt1","isAt2","n","at1","at2","where1","where2","where_pascal_case","FROM_START","FROM_END","FIRST","LAST","getIndex","list_name","opt_at","has_at1","has_at2","lists_split","dropdown","newMode","updateType","delimInput","spaceField","insertFieldAt","input","delimiter","lists_sort","sort_type","sort_direction","LIST","direction","getCompareFunctionName","lists_statement","required_parent_type","surround_parent","original_parent","last_connection","ORDER_ATOMIC","controls_repeat_ext","Loop","TIMES","repeats","String","loopVar","endVar","isNumber","controls_repeat","min","precision","controls_whileUntil","while_or_until","boolean","BOOL","until","argument0","maxLoopVar","currentLoopVar","controls_for","start_number","end_number","step_size","FROM","TO","BY","variable0","argument1","increment","addLoopTrap","up","parseFloat","step","Math","abs","assignment","statement","startVar","incVar","incVal","controls_forEach","indexVar","controls_flow_statements","break_or_continue","keyword","variables_get","Special4","VAR_RENAME","function_blocks","category_","old_param","new_param","_block$arguments","param_index","variables_set","varName","after_purchase","message2","src","width","height","alt","class","args2","RootBlock","After_Purchase","appendCollapsedMainBlocksFields","stack","contract_check_result","win_or_loss","config","lists","CHECK_RESULT","top_parent","getTopParent","isMainBlock","checkWith","read_details","contract_detail","DETAILS","restricted_parents","detailIndex","trade_again","Special1","key_words","before_purchase","setDeletable","Before_Purchase","contract_type","populatePurchaseList","menuGenerator_","trade_definition_block","getTradeDefinitionBlock","trade_type","getChildByType","purchase_type_list","purchase_type","getValue","contract_type_options","getContractTypeOptions","updateOptions","default_value","event_group","should_pretend_empty","purchaseList","ask_price","enforceLimitations","payout","during_purchase","During_Purchase","sell_at_market","check_sell","sell_price","bb_statement","required_child_blocks","band_type","bbResult","Indicators","bb_result","childValueToCode","period","std_dev_up","std_dev_down","bba_statement","ema_statement","emaa_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement","macda_statement","macdFields","macd_field","fast_ema_period","slow_ema_period","signal_ema_period","setParentId","allowed_parents","has_parent","is_illegal_parent","parent_block","INPUT_LIST","input_period","PERIOD","std_dev_multiplier_up","input_number","UPMULTIPLIER","std_dev_multiplier_down","DOWNMULTIPLIER","FAST_EMA_PERIOD","SLOW_EMA_PERIOD","SIGNAL_EMA_PERIOD","tick","Tick_Analysis","tick_string","parent","getParent","ticks","ticks_string","ohlc","candle_interval_type","candleIntervals","selectedGranularity","ohlc_values","candle_property","ohlcFields","granularity","ohlcField","read_ohlc","CANDLEINDEX","index","get_ohlc","check_direction","direction_type","CHECK_DIRECTION","tick_analysis","last_digit","lastDigitList","stat","stat_list","is_candle_black","input_candle","Candle","OHLCOBJ","ohlcObj","ohlc_values_in_list","candle_list","OHLCLIST","ohlcList","read_ohlc_obj","balance","BALANCE_TYPE","Miscellaneous","balanceType","barrier_offset","BARRIER_TYPES","block_holder","loader","blocks_added_by_me","current_url","input_url","loader_block","loadBlocksFromCurrentUrl","oldValue","isValidUrl","isKnownUrl","loadBlocksFromRemote","then","globalObserver","emit","log_type","LogTypes","LOAD_BLOCK","error_msg","url","some","notify","notification_type","notification_sound","input_message","NOTIFICATION_TYPE","NOTIFICATION_SOUND","Special3","MESSAGE","notificationType","sound","message_block","getInputTargetBlock","variable_name","variable_id","getVariableById","message","notify_telegram","TELEGRAM_ACCESS_TOKEN","TELEGRAM_CHAT_ID","TELEGRAM_MESSAGE","access_token","chat_id","total_profit","getRootInputTargetBlock","total_profit_string","total_runs","useless_block","message_type","console_type","epoch","Time","timeout","stack_input","SECONDS","seconds","todatetime","input_timestamp","TIMESTAMP","timestamp","invalid_timestamp","totimestamp","input_datetime","DATETIME","datetime_string","tick_delay","client","DBotStore","instance","is_logged_in","workspace_to_code","workspaceToCode","TICKDELAYVALUE","evaluated_result","evaluateExpression","error_message","ticks_value","trade_definition","isInit","message3","message4","message5","message6","args3","args4","args5","args6","Trade_Definition","SELECTED","getSelected","removeErrorHandlingEventListener","initErrorHandlingListener","blocks_in_trade_options","test","Error","loginid","account","getToken","market_block","trade_type_block","contract_type_block","candle_interval_block","restart_on_error_block","restart_on_buy_sell_block","symbol","candle_interval","should_restart_on_error","should_restart_on_buy_sell","opposites","contract_type_list","toUpperCase","opposite","Object","keys","initialization","trade_options_statement","trim","trade_definition_market","input_market","input_submarket","input_symbol","is_allowed_event","event_name","active_symbols","ApiHelpers","market_dropdown","submarket_dropdown","symbol_dropdown","market","submarket","market_options","getMarketDropdownOptions","populateMarketDropdown","getSubmarketDropdownOptions","getSymbolDropdownOptions","getRootBlock","isEmpty","isDescendantOf","trade_definition_tradetype","trade_type_category","trade_definition_contracttype","is_load_event","trade_types","apply","_toConsumableArray","NOT_AVAILABLE_DROPDOWN_OPTIONS","undefined","trade_definition_candleinterval","slice","trade_definition_restartbuysell","checkbox","checked","setOnChange","next_block","getNextBlock","required_inputs","trade_definition_restartonerror","trade_definition_tradeoptions","durations","is_stake","duration_unit","duration_value","getCurrencyDisplayCode","CURRENCY","_selected_block$paren","selected_block","getBlockById","parentBlock_","inputList","_input_target$getFiel","input_target","connection","targetBlock","toString","startsWith","new_value","parseInt","selected_symbol","selected_market","selected_trade_type_category","selected_trade_type","selected_duration","selected_barrier_types","setCurrency","updateAmountLimits","updateBarrierInputs","updateDurationInput","updatePredictionInput","enforceSingleBarrierType","fake_creation_event","BlockCreate","fire","createPredictionInput","prediction_range","prediction_input","shadow_block","setShadow","createBarrierInputs","barriers","input_names","values","label","BARRIER_LABELS","fieldRow","account_limits","_DBotStore$instance$c","currency","landing_company_shortcode","getStakePayoutLimits","limits","amount_limits","max_payout","min_stake","should_use_default_unit","should_update_value","contracts_for","accumulator_block","render","parent_connection","child_connection","stake_input","stake_shadow_block","take_profit_block","take_profit_input","take_profit_shadow_block","multiplier_block","stop_loss_block","stop_loss_input","stop_loss_shadow_block","getDurations","duration_field_dropdown","duration_input","duration_options","duration","display","unit","target_block","isShadow","min_duration","_config$workspaces$in","workspaces","indentWorkspace","window","getMainWorkspace","cleanUp","should_use_default_type","should_use_default_values","getBarriers","_loop","barrier_field_dropdown","ABSOLUTE_BARRIER_DROPDOWN_OPTION","barrier_field_value","allow_both_types","allow_absolute_type","barrier_value","should_use_default_value","getPredictionRange","initial_prediction","max","barrier_input_name","should_force_distinct","other_barrier_input_name","other_barrier_field","has_other_barrier","other_barrier_type","other_barrier_value","has_first_barrier","has_second_barrier","has_prediction","_this7","AMOUNT","_this7$amount_limits","_this7$amount_limits2","isNaN","DURATION","d","is_valid_duration","trade_definition_tradeoptions_payout","prediction_value","barrier_offset_value","second_barrier_offset_value","amount","duration_type","decimal_places","getDecimalPlaces","stake_amount","getBarrierValue","barrier_offset_type","trade_definition_multiplier","multiplier","validateBlocksInStatement","blocks_in_multiplier","block_types_in_multiplier","block_multiplier_take_profit","block_multiplier_stop_loss","Set","size","selected_multiplier","updateMultiplierInput","duration_block","duration_shadow_block","getMultiplierRange","multiplier_range","multiplier_list_dropdown","multiplier_options","_this2$amount_limits","_this2$amount_limits2","_block$getChildByType","_block$getChildByType2","setContractUpdateConfig","multiplier_value","stop_loss","take_profit","limit_order","multiplier_stop_loss","accumulator_take_profit","menu_items","excludeOptionFromContextMenu","multiplier_take_profit","trade_definition_accumulator","accumulator","blocks_in_accumulator","block_types_in_accumulator","block_accumulator_take_profit","handleProposalRequestForAccumulators","selected_growth_rate","updateAccumulatorInput","Create","getAccumulationRange","accumulator_range","accumulator_list_dropdown","accumulator_options","growth_rate","logic_compare","Logic","A","B","EQ","NEQ","LT","LTE","GT","GTE","ORDER_EQUALITY","ORDER_RELATIONAL","controls_if","value_connections","statement_connections","else_statement_connection","else_if_count","else_count","rebuildShape","_this$getInput","_this$getInput$connec","targetConnection","getIfInputNames","if_input","IF","do_input","DO","reconnectChildBlocks","update","updateFn","old_mutation_dom","old_mutation","domToText","is_rendered","rendered","call","new_mutation_dom","new_mutation","change_event","BlockChange","bumpNeighbours","BUMP_DELAY","IF_LABEL","THEN_LABEL","DELETE_ICON","j","modifyElseIf","modifyElse","queueRender","storeConnections","else_input","opt_value_conns","opt_statement_conns","opt_else_statement_conns","value_connection","statement_connection","disconnect","is_add","opt_idx","idx","logic_boolean","logic_operation","selectedOperator","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","logic_null","logic_ternary","return_value","THEN","ELSE","valueIf","ORDER_CONDITIONAL","valueThen","valueElse","logic_negate","math_change","Mathematical","DELTA","math_constant","constant","ORDER_DIVISION","math_constrain","low_number","high_number","LOW","HIGH","argument2","math_modulo","number1","number2","DIVIDEND","DIVISOR","ORDER_MODULUS","math_number","numberValidator","MAX_SAFE_INTEGER","math_number_positive","math_number_property","hasDivisorInput","toolip","divisorInput","NUMBER_TO_CHECK","property","divisor","math_on_list","calculation","type_list","_this$childBlocks_$","childBlocks_","operation","math_random_float","math_random_int","math_round","math_arithmetic","ADD","MINUS","MULTIPLY","ORDER_MULTIPLICATION","DIVIDE","POWER","math_single","ORDER_UNARY_NEGATION","math_trig","Text","quote_","text_join","text_block","text_statement","stack_blocks","text_append","input_text","TEXT","forceString","text_length","text_isEmpty","text_indexOf","input_text1","input_text2","cateogry","substring","text_charAt","AT","textOrder","text_getSubstring","position1","index1","position2","index2","is_at","old_label_text","text_","new_input","new_at","hasInput","input_name","_this2$getInput","_objectSpread","STRING","AT1","AT2","string_name","text_changeCase","transform_type","UPPERCASE","LOWERCASE","TITLECASE","text_trim","side","LEFT","RIGHT","BOTH","text_print","msg","text_prompt_ext","string_or_number"],"sourceRoot":""}