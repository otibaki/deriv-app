"use strict";(self.webpackChunk_deriv_appstore=self.webpackChunk_deriv_appstore||[]).push([[280],{7033:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(9155),r=n.n(a),o=n(3877),i=n(2641),l=n(5299),c=n(4530),s=n(6464),m=n(636);const u=function(){var e=(0,m.A)(),t=e.eligible_svg_to_bvi_derived_accounts,n=e.eligible_svg_to_bvi_financial_accounts,a=e.eligible_svg_to_vanuatu_derived_accounts,l=e.eligible_svg_to_vanuatu_financial_accounts,c="Existing account",s="New account";return e.no_of_svg_accounts_to_migrate>1&&(c="Existing accounts",s="New accounts"),r().createElement("div",{className:"mt5-migration-modal__migration_content-items__list"},r().createElement("div",{className:"mt5-migration-modal__migration_content-items__list--container"},r().createElement(o.Text,{weight:"bold",size:"xs"},r().createElement(i.Localize,{i18n_default_text:"{{existing_account_title}}",values:{existing_account_title:c}})),r().createElement("div",{className:"mt5-migration-modal__migration_content-items__list--container__icons"},(t||a)&&r().createElement(o.Icon,{icon:"IcMt5SvgStandard",size:96,data_testid:"dt_migrate_from_svg_standard"}),(n||l)&&r().createElement(o.Icon,{icon:"IcMt5SvgFinancial",size:96,data_testid:"dt_migrate_from_svg_financial"}))),r().createElement("div",{className:"mt5-migration-modal__migration_content-items__list--container"},r().createElement(o.Text,{weight:"bold",size:"xs"},r().createElement(i.Localize,{i18n_default_text:"{{new_account_title}}",values:{new_account_title:s}})),r().createElement("div",{className:"mt5-migration-modal__migration_content-items__list--container__icons"},t&&r().createElement(o.Icon,{icon:"IcMt5BviStandard",size:96,data_testid:"dt_migrate_to_bvi_standard"}),n&&r().createElement(o.Icon,{icon:"IcMt5BviFinancial",size:96,data_testid:"dt_migrate_to_bvi_financial"}),a&&r().createElement(o.Icon,{icon:"IcMt5VanuatuStandard",size:96,data_testid:"dt_migrate_to_vanuatu_standard"}),l&&r().createElement(o.Icon,{icon:"IcMt5VanuatuFinancial",size:96,data_testid:"dt_migrate_to_vanuatu_financial"}))))};var _=r().createContext({show_modal_front_side:!1,setShowModalFrontSide:function(){return null}}),d=function(){return(0,a.useContext)(_)};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v=(0,l.observer)((function(){var e,t,n=(0,c.A)().ui,a=n.is_mobile,l=n.setMT5MigrationModalEnabled,_=d().setShowModalFrontSide,g=(0,m.A)(),f=g.getEligibleAccountToMigrate,E=g.eligible_account_to_migrate_label,v=g.has_derived_mt5_to_migrate,b=g.has_derived_and_financial_mt5,y=function(){return b?{platform:(0,s.getCFDPlatformNames)(s.CFD_PLATFORMS.MT5),type_1:(0,s.getFormattedJurisdictionMarketTypes)(s.JURISDICTION_MARKET_TYPES.DERIVED),type_2:(0,s.getFormattedJurisdictionMarketTypes)(s.JURISDICTION_MARKET_TYPES.FINANCIAL),from_account:(0,s.getFormattedJurisdictionCode)(s.Jurisdiction.SVG)}:{platform:(0,s.getCFDPlatformNames)(s.CFD_PLATFORMS.MT5),type:(0,s.getFormattedJurisdictionMarketTypes)(v?s.JURISDICTION_MARKET_TYPES.DERIVED:s.JURISDICTION_MARKET_TYPES.FINANCIAL),from_account:(0,s.getFormattedJurisdictionCode)(s.Jurisdiction.SVG)}};return r().createElement(r().Fragment,null,r().createElement("div",{className:"mt5-migration-modal__container"},r().createElement("div",null,r().createElement(o.Text,{as:"p",size:a?"xs":"s",align:"center"},b?r().createElement(i.Localize,{i18n_default_text:"Enhance your trading experience by upgrading your <0>{{platform}} {{type_1}}</0> <1/>and <0>{{type_2}} {{from_account}}</0> account(s).",values:p({},y()),components:[r().createElement("strong",{key:0})]}):r().createElement(i.Localize,{i18n_default_text:"Enhance your trading experience by upgrading your <0/><1>{{platform}} {{type}} {{from_account}} </1> account(s).",values:p({},y()),components:[r().createElement("br",{key:0}),r().createElement("strong",{key:1})]}))),r().createElement("div",{className:"mt5-migration-modal__migration_content"},r().createElement("div",{className:"mt5-migration-modal__migration_content-items"},r().createElement(u,null))),r().createElement("div",{className:"mt5-migration-modal__migration_infobox"},r().createElement(o.HintBox,{icon:"IcInfoBlue",message:r().createElement(o.Text,{as:"p",size:a?"xxxs":"xxs"},b?r().createElement(i.Localize,{i18n_default_text:"Your existing <0>{{platform}} {{type_1}}</0> <1/>and <0>{{type_2}} {{from_account}}</0> account(s) will remain accessible.",values:p({},y()),components:[r().createElement("strong",{key:0})]}):r().createElement(i.Localize,{i18n_default_text:"Your existing <0>{{platform}} {{type}} {{from_account}}</0> account(s) will remain accessible.",values:p({},y()),components:[r().createElement("strong",{key:0})]})),is_info:!0})),r().createElement("div",null,r().createElement(o.Text,{as:"p",size:a?"xxs":"xs",align:"center"},b?r().createElement(i.Localize,{i18n_default_text:"By clicking on <0>Next</0> you agree to move your {{platform}} {{type_1}} and {{type_2}} {{from_account}} account(s) under Deriv {{account_to_migrate}} Ltd’s <1>terms and conditions</1>.",components:[r().createElement("strong",{key:0}),r().createElement(o.StaticUrl,{key:1,className:"link",href:null===(e=s.DBVI_COMPANY_NAMES[f()])||void 0===e?void 0:e.tnc_url})],values:p(p({},y()),{},{account_to_migrate:E})}):r().createElement(i.Localize,{i18n_default_text:"By clicking on <0>Next</0> you agree to move your {{platform}} {{type}} {{from_account}} account(s) under <2/>Deriv {{account_to_migrate}} Ltd’s <1>terms and conditions</1>.",components:[r().createElement("strong",{key:0}),r().createElement(o.StaticUrl,{key:1,className:"link",href:null===(t=s.DBVI_COMPANY_NAMES[f()])||void 0===t?void 0:t.tnc_url,is_document:!0}),a?null:r().createElement("br",{key:2})],values:p(p({},y()),{},{account_to_migrate:E})})))),r().createElement(o.Modal.Footer,{has_separator:!0},r().createElement(o.Button,{type:"button",has_effect:!0,large:!0,primary:!0,onClick:function(){_(!1),l(!0)}},r().createElement(i.Localize,{i18n_default_text:"Next"}))))}));var b=n(9188),y=n(6991);const x=(0,l.observer)((function(){var e=(0,c.A)(),t=e.ui,n=e.common,a=e.client,l=t.toggleMT5MigrationModal,u=t.setMT5MigrationModalEnabled,_=t.is_mobile,d=a.email,g=n.setAppstorePlatform,f=(0,b.E)(),p=f.setJurisdictionSelectedShortcode,E=f.setSentEmailModalStatus,v=f.submitMt5Password,x=(0,m.A)().getEligibleAccountToMigrate,h=r().useRef(null),w=_?"xxs":"xs",M=function(){u(!1),l(!1),s.WS.verifyEmail(d,"trading_platform_mt5_password_reset",{url_parameters:{redirect_to:10}}),E(!0)};return r().createElement(y.l1,{initialValues:{password:""},enableReinitialize:!0,validate:function(e){var t,n={};return(0,s.validLength)(e.password,{min:8,max:25})?(0,s.validPassword)(e.password)||(n.password=(0,s.getErrorMessages)().password()):n.password=(0,i.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),(null===(t=e.password)||void 0===t?void 0:t.toLowerCase())===d.toLowerCase()&&(n.password=(0,i.localize)("Your password cannot be the same as your email address.")),n},innerRef:h,validateOnMount:!0,onSubmit:function(e,t){v(e,t).then((function(){g(s.CFD_PLATFORMS.MT5),p(x()),l(!1)}))}},(function(e){var t=e.errors,n=e.handleBlur,a=e.handleChange,l=e.handleSubmit,c=e.isSubmitting,s=(e.touched,e.values);return r().createElement("form",{onSubmit:l},r().createElement("div",{className:"mt5-migration-modal__container"},r().createElement("div",{className:"mt5-migration-modal__password-header-container"},r().createElement(o.Text,{as:"p",size:w},r().createElement(i.Localize,{i18n_default_text:"Enter your Deriv MT5 password to upgrade your account(s)."}))),r().createElement("div",{className:"mt5-migration-modal__password-input-container"},r().createElement(o.PasswordInput,{autoComplete:"off",label:(0,i.localize)("Deriv MT5 password"),name:"password",value:s.password,onBlur:n,onChange:a})),r().createElement("div",{className:"mt5-migration-modal__password-hint"},r().createElement(o.InlineMessage,{type:"information",size:"sm"},r().createElement(o.Text,{as:"p",size:"xxs"},r().createElement(i.Localize,{i18n_default_text:"We've introduced additional password requirements to increase your account security. Your password should:"})),r().createElement("ul",{className:"mt5-migration-modal__password-hint-items"},r().createElement("li",null,r().createElement(o.Text,{as:"p",size:"xxs",weight:"bold"},r().createElement(i.Localize,{i18n_default_text:"Be between 8 to 16 characters."}))),r().createElement("li",null,r().createElement(o.Text,{as:"p",size:"xxs",weight:"bold"},r().createElement(i.Localize,{i18n_default_text:"Contain at least one special character."})))),r().createElement(o.Text,{as:"p",size:"xxs"},r().createElement(i.Localize,{i18n_default_text:"If your current password doesn't match these requirements, you'll need to create a new one in the next step."}))))),r().createElement(o.Modal.Footer,null,r().createElement(o.FormSubmitButton,{is_disabled:!!t.password||c,is_absolute:_,label:(0,i.localize)("Upgrade"),has_cancel:!0,onCancel:M,cancel_label:(0,i.localize)("Forgot password?"),is_loading:c})))}))})),h=(0,l.observer)((function(){var e=(0,c.A)().ui.is_mobile,t=d().show_modal_front_side;return r().createElement(o.Div100vhContainer,{className:"mt5-migration-modal__mobile-container",height_offset:"150px",is_bypassed:!e},t?r().createElement(v,null):r().createElement(x,null))}));function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=o.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}const S=(0,l.observer)((function(){var e=(0,c.A)(),t=e.ui,n=e.modules.cfd,a=t.disableApp,l=t.enableApp,s=t.is_mt5_migration_modal_open,m=t.is_mobile,u=t.toggleMT5MigrationModal,d=t.setMT5MigrationModalEnabled,g=t.is_mt5_migration_modal_enabled,f=n.mt5_migration_error,p=n.setMT5MigrationError,E=n.setIsFromMt5MigrationModal,v=w(r().useState(!0),2),b=v[0],y=v[1],x=r().createElement(o.Text,{size:m?"xs":"s",weight:"bold"},b?r().createElement(i.Localize,{i18n_default_text:"Upgrade your MT5 account(s)"}):r().createElement(i.Localize,{i18n_default_text:"Enter your Deriv MT5 password"}));r().useEffect((function(){y(!g)}),[g,y,s]);var M=function(){d(!1),E(!1),u(!1)};return r().createElement("div",null,r().createElement(r().Suspense,{fallback:r().createElement(o.UILoader,null)},r().createElement(_.Provider,{value:{show_modal_front_side:b,setShowModalFrontSide:y}},r().createElement(o.Dialog,{title:(0,i.localize)("Sorry for the interruption"),confirm_button_text:(0,i.localize)("Try again"),onConfirm:function(){p(""),d(!1),u(!0)},disableApp:a,enableApp:l,has_close_icon:!0,className:"mt5-migration-modal__error-dialog",is_visible:!!f,onClose:function(){p(""),M()}},r().createElement(i.Localize,{i18n_default_text:"{{mt5_migration_error}}",values:{mt5_migration_error:f}})),r().createElement(o.DesktopWrapper,null,r().createElement(o.Modal,{className:"mt5-migration-modal",disableApp:a,enableApp:l,exit_classname:"cfd-modal--custom-exit",is_open:s&&!f,title:x,toggleModal:M,width:b?"58.8rem":"43.2rem",has_return_icon:!b,onReturn:function(){return y(!0)}},r().createElement(h,null))),r().createElement(o.MobileWrapper,null,r().createElement(o.PageOverlay,{is_open:s,header_classname:"mt5-migration-modal__mobile-header",portal_id:"deriv_app",header:x,onClickClose:M,has_return_icon:!b,onReturn:function(){return y(!0)}},r().createElement(h,null))))))}))}}]);