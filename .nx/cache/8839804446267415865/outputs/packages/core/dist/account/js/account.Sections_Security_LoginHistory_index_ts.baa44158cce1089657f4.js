"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_LoginHistory_index_ts"],{"./Sections/Security/LoginHistory/index.ts":(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var l=t("react"),i=t.n(l),a=t("@deriv/components"),o=t("@deriv/stores"),_=t("@deriv/shared"),r=t("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),n=t("./Components/load-error-message/index.ts"),c=t("@deriv-com/translations"),d=t("../../../node_modules/react/jsx-runtime.js");const x=()=>({date_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Date and time"}),action_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Action"}),browser_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Browser"}),ip_title:(0,d.jsx)(c.Localize,{i18n_default_text:"IP address"}),status_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Status"})}),h=e=>{let{id:s,date:t,action:l,browser:i,ip:o,status:_}=e;return(0,d.jsxs)(a.Table.Row,{className:"login-history__table__row",children:[(0,d.jsx)(a.Table.Cell,{children:(0,d.jsx)(a.Text,{line_height:"xs",size:"xs",children:t})}),(0,d.jsx)(a.Table.Cell,{className:"login-history__table__row__cell login-history__table__row__cell--action",children:(0,d.jsx)(c.Localize,{i18n_default_text:"{{action}}",values:{action:l}})}),(0,d.jsx)(a.Table.Cell,{children:"Unknown"===i?(0,d.jsx)(c.Localize,{i18n_default_text:"Unknown"}):i}),(0,d.jsx)(a.Table.Cell,{children:o}),(0,d.jsx)(a.Table.Cell,{children:(0,d.jsx)(c.Localize,{i18n_default_text:"{{status}}",values:{status:_}})})]},s)};var u=t("../../../node_modules/clsx/dist/clsx.mjs");const j=e=>{let{title:s,text:t,className:i,align:o="left"}=e;return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(a.Text,{as:"h3",align:o,weight:"bold",className:"login-history__list__row__cell--title",children:s}),(0,d.jsx)(a.Text,{className:(0,u.A)(i,{"login-history__list__row__cell--right":"right"===o}),line_height:"xs",size:"xs",align:o,children:t})]})},g=e=>{let{id:s,date:t,action:l,browser:i,ip:o,status:_}=e;const{date_title:n,browser_title:h,action_title:g,ip_title:m,status_title:w}=x(),{isDesktop:b}=(0,r.Y)();return(0,d.jsxs)("div",{className:(0,u.A)("login-history__list__wrapper"),children:[(0,d.jsx)(a.Table.Row,{className:"login-history__list__row login-history__list__row--with-margin",children:(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{title:n,text:t})})}),(0,d.jsxs)(a.Table.Row,{className:"login-history__list__row login-history__list__row--with-margin",children:[(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{className:"login-history__list__row__cell--browser",title:h,text:"Unknown"===i?(0,d.jsx)(c.Localize,{i18n_default_text:"Unknown"}):i})}),(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{className:"login-history__list__row__cell--action",title:g,text:(0,d.jsx)(c.Localize,{i18n_default_text:"{{action}}",values:{action:l}})})})]}),(0,d.jsxs)(a.Table.Row,{className:"login-history__list__row",children:[(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{className:"login-history__list__row__cell--ip-value",title:m,text:o})}),b&&(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{title:w,text:(0,d.jsx)(c.Localize,{i18n_default_text:"{{status}}",values:{status:_}})})})]})]},s)},m=e=>{let{data:s}=e;const{isDesktop:t}=(0,r.Y)();return t?((e,s)=>(0,d.jsxs)(a.Table,{fixed:!0,className:"login-history__table",children:[(0,d.jsx)(a.Table.Header,{children:(0,d.jsx)(a.Table.Row,{className:"login-history__table__header",children:Object.entries(e).map((e=>{let[s,t]=e;return(0,d.jsx)(a.Table.Head,{children:t},s)}))})}),(0,d.jsx)(a.Table.Body,{children:s.map((e=>(0,d.jsx)(h,{...e},e.id)))})]}))(x(),s):(e=>(0,d.jsx)(a.Table,{className:"login-history__list",children:(0,d.jsx)(a.Table.Body,{children:e.map((e=>(0,d.jsx)(g,{...e},e.id)))})}))(s)};var w=t("@deriv/utils");const b=(0,o.observer)((()=>{const{client:e}=(0,o.useStore)(),{isDesktop:s}=(0,r.Y)(),{is_switching:t}=e,[l,c]=i().useState(!0),[x,h]=i().useState(""),[u,j]=i().useState([]),g=(0,_.useIsMounted)();return i().useEffect((()=>{(async()=>{if(g()){const e=await _.WS.authorized.fetchLoginHistory(50);if(c(!1),e.error)h(e.error.message);else{const s=(0,w.getLoginHistoryFormattedData)(e.login_history);j(s)}}})()}),[]),t?(0,d.jsx)(a.Loading,{}):l?(0,d.jsx)(a.Loading,{is_fullscreen:!1,className:"account__initial-loader"}):x?(0,d.jsx)(n.A,{error_message:x}):(0,d.jsx)(a.ThemedScrollbars,{is_bypassed:!s,className:"login-history",children:u.length>0?(0,d.jsx)(m,{data:u}):null})}))}}]);