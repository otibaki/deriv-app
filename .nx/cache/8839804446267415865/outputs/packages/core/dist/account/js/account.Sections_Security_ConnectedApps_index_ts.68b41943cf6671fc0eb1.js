"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_ConnectedApps_index_ts"],{"./Components/article/index.ts":(e,s,t)=>{t.d(s,{A:()=>c});var a=t("react"),n=t("@deriv/components"),i=t("@deriv-com/translations"),o=t("../../../node_modules/clsx/dist/clsx.mjs"),l=t("../../../node_modules/react/jsx-runtime.js");const c=e=>{let{title:s,descriptions:t,onClickLearnMore:c,className:r}=e;const d=t?.length>0,p=1===t?.length;return(0,l.jsxs)("article",{className:(0,o.A)("da-article",r),children:[(0,l.jsx)(n.Text,{as:"h4",color:"prominent",line_height:"m",size:"xs",weight:"bold",className:"da-article__header",children:s}),d&&(0,l.jsx)(a.Fragment,{children:p?(0,l.jsx)(n.Text,{as:"p",size:"xxs",line_height:"m",children:t[0]}):(0,l.jsx)("ul",{className:"da-article__list",children:t.map(((e,s)=>(0,l.jsx)("li",{children:(0,l.jsx)(n.Text,{size:"xxs",line_height:"xs",children:e})},s)))})}),c&&(0,l.jsxs)("div",{className:"da-article__learn-more",onClick:c,children:[(0,l.jsx)(n.Text,{size:"xxs",color:"loss-danger",line_height:"s",children:(0,l.jsx)(i.Localize,{i18n_default_text:"Learn more"})}),(0,l.jsx)(n.Icon,{icon:"IcChevronRight",className:"da-article__learn-more-icon",color:"red"})]})]})}},"./Sections/Security/ConnectedApps/index.ts":(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var a=t("react"),n=t("@deriv/components"),i=t("@deriv/stores"),o=t("@deriv/shared"),l=t("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),c=t("./Components/error-component/index.ts"),r=t("@deriv-com/translations"),d=t("./Components/article/index.ts"),p=t("../../../node_modules/react/jsx-runtime.js");const x=()=>{window.open("https://community.deriv.com/t/api-tokens-managing-access-on-third-party-applications-and-mobile-apps/29159","_blank","noopener")},_=()=>(0,p.jsx)(d.A,{title:(0,p.jsx)(r.Localize,{i18n_default_text:"Want to know more about APIs?"}),descriptions:[(0,p.jsx)(r.Localize,{i18n_default_text:"Go to our Deriv community and learn about APIs, API tokens, ways to use Deriv APIs, and more."},0)],onClickLearnMore:x});var h=t("../../../node_modules/clsx/dist/clsx.mjs");const u=[{key:1,text:(0,p.jsx)(r.Localize,{i18n_default_text:"Connected apps are authorised applications associated with your account through your API token or the OAuth authorisation process. They can act on your behalf within the limitations that you have set."})},{key:2,text:(0,p.jsx)(r.Localize,{i18n_default_text:"As a user, you are responsible for sharing access and for actions that occur in your account (even if they were initiated by a third-party app on your behalf)."})},{key:3,text:(0,p.jsx)(r.Localize,{i18n_default_text:"Please note that only third-party apps will be displayed on this page. Official Deriv apps will not appear here."})}],m=e=>{let{class_name:s,text_color:t}=e;const{isDesktop:a}=(0,l.Y)(),i=a?"xxs":"xxxs";return(0,p.jsx)(n.Text,{as:"ol",size:i,color:t,className:(0,h.A)("connected-apps__bullets--list",s),children:u.map((e=>(0,p.jsx)("li",{children:e.text},e.key)))})},j=(0,i.observer)((()=>{const{isDesktop:e}=(0,l.Y)(),s=e?"xxs":"xxxs";return(0,p.jsx)(n.InlineMessage,{type:"information",size:"md",message:(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(n.Text,{as:"h4",weight:"bold",size:s,children:(0,p.jsx)(r.Localize,{i18n_default_text:"What are connected apps?"})}),(0,p.jsx)(m,{class_name:"connected-apps__bullets--with-apps"})]})})})),f=()=>{window.open("https://api.deriv.com/","_blank","noopener")},g=()=>(0,p.jsx)(d.A,{title:(0,p.jsx)(r.Localize,{i18n_default_text:"Earn more with Deriv API"}),descriptions:[(0,p.jsx)(r.Localize,{i18n_default_text:"Use our powerful, flexible, and free API to build a custom trading platform for yourself or for your business."},0)],onClickLearnMore:f}),v=()=>{const{isDesktop:e}=(0,l.Y)(),s=e?"xs":"xxs";return(0,p.jsxs)("div",{className:"connected-apps__empty--wrapper",children:[(0,p.jsx)(n.Text,{size:s,align:"center",weight:"bold",children:(0,p.jsx)(r.Localize,{i18n_default_text:"You currently don't have any third-party authorised apps associated with your account."})}),(0,p.jsx)(m,{text_color:"primary",class_name:"connected-apps__bullets--without-apps"})]})},z=e=>{let{title:s,content:t}=e;return(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(n.Text,{size:"xxs",weight:"bold",children:s}),(0,p.jsx)(n.Text,{size:"xxs",children:t})]})},y=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>({read:(0,r.localize)("Read"),trade:(0,r.localize)("Trade"),trading_information:(0,r.localize)("Trading information"),payments:(0,r.localize)("Payments"),admin:(0,r.localize)("Admin")}[e]))).join(", ")},k=e=>{let{connected_apps:s,handleToggleModal:t}=e;return(0,p.jsx)("div",{className:"connected-apps__list--wrapper",children:s.map((e=>(0,p.jsxs)("div",{className:"connected-apps__list--template",children:[(0,p.jsxs)("div",{className:"connected-apps__list--row",children:[(0,p.jsx)("div",{className:"connected-apps__list--name",children:(0,p.jsx)(z,{title:(0,p.jsx)(r.Localize,{i18n_default_text:"Name"}),content:e.name})}),(0,p.jsx)("div",{className:"connected-apps__list--last-login",children:(0,p.jsx)(z,{title:(0,p.jsx)(r.Localize,{i18n_default_text:"Last login"}),content:(0,o.toMoment)(e.last_used).format("YYYY-MM-DD HH:mm:ss")})})]}),(0,p.jsxs)("div",{className:"connected-apps__list--row",children:[(0,p.jsx)("div",{className:"connected-apps__list--permission",children:(0,p.jsx)(z,{title:(0,p.jsx)(r.Localize,{i18n_default_text:"Permission"}),content:y(e.scopes)})}),(0,p.jsx)("div",{className:"connected-apps__list--revoke",children:(0,p.jsx)(n.Button,{small:!0,secondary:!0,onClick:()=>t(e.app_id),children:(0,p.jsx)(r.Localize,{i18n_default_text:"Revoke access"})})})]})]},e.app_id)))})},b=e=>{let{connected_apps:s,handleToggleModal:t}=e;return(0,p.jsxs)("div",{className:"connected-apps__tabular--wrapper",children:[[(0,p.jsx)(r.Localize,{i18n_default_text:"Name"},"name"),(0,p.jsx)(r.Localize,{i18n_default_text:"Permission"},"permission"),(0,p.jsx)(r.Localize,{i18n_default_text:"Last login"},"last_login"),(0,p.jsx)(r.Localize,{i18n_default_text:"Action"},"action")].map(((e,s)=>(0,p.jsx)(n.Text,{size:"xs",weight:"bold",className:(0,h.A)("connected-apps__tabular--cell connected-apps__tabular--header",{"connected-apps__tabular--skip-left-padding":0===s}),children:e},e.key))),s.map((e=>(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(n.Text,{size:"xs",className:"connected-apps__tabular--cell connected-apps__tabular--skip-left-padding",children:e.name}),(0,p.jsx)(n.Text,{size:"xs",className:"connected-apps__tabular--cell",children:y(e.scopes)}),(0,p.jsx)(n.Text,{size:"xs",className:"connected-apps__tabular--cell",children:(0,o.toMoment)(e.last_used).format("YYYY-MM-DD HH:mm:ss")}),(0,p.jsx)("span",{className:"connected-apps__tabular--cell",children:(0,p.jsx)(n.Button,{small:!0,secondary:!0,onClick:()=>t(e.app_id),children:(0,p.jsx)(r.Localize,{i18n_default_text:"Revoke access"})})})]},e.app_id)))]})},w=e=>{let{handleRevokeAccess:s,handleToggleModal:t,is_modal_open:a}=e;return(0,p.jsx)(n.Modal,{is_open:a,className:"connected-apps",width:"44rem",children:(0,p.jsx)(n.Modal.Body,{children:(0,p.jsxs)("div",{className:"connected-apps-modal--wrapper",children:[(0,p.jsxs)("div",{className:"connected-apps-modal--icon",children:[(0,p.jsx)(n.Icon,{icon:"IcAccountTrashCan",size:128}),(0,p.jsx)(n.Text,{as:"p",color:"prominent",weight:"bold",children:(0,p.jsx)(r.Localize,{i18n_default_text:"Confirm revoke access?"})})]}),(0,p.jsxs)("div",{className:"connected-apps-modal--buttons",children:[(0,p.jsx)(n.Button,{large:!0,secondary:!0,onClick:()=>t(),children:(0,p.jsx)(r.Localize,{i18n_default_text:"Back"})}),(0,p.jsx)(n.Button,{large:!0,primary:!0,onClick:s,children:(0,p.jsx)(r.Localize,{i18n_default_text:"Confirm"})})]})]})})})},N=(0,i.observer)((()=>{const{isDesktop:e}=(0,l.Y)(),[s,t]=(0,a.useState)(!0),[i,r]=(0,a.useState)(!1),[d,x]=(0,a.useState)(null),[h,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)([]);(0,a.useEffect)((()=>{z().catch((e=>console.error("error: ",e)))}),[]);const z=async()=>{const e=await o.WS.authorized.send({oauth_apps:1});e.error||(t(!1),f(e.oauth_apps))},y=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r((e=>!e)),x(e)}),[]),N=(0,a.useCallback)((async e=>{t(!0),(await o.WS.authorized.send({revoke_oauth_app:e})).error?(t(!1),u(!0)):z().catch((e=>console.error("error: ",e)))}),[]),L=(0,a.useCallback)((()=>{r(!1),N(d)}),[N,d]);return s?(0,p.jsx)(n.Loading,{is_fullscreen:!1}):(0,p.jsxs)("div",{className:"connected-apps__wrapper",children:[(0,p.jsxs)("section",{children:[h&&(0,p.jsx)(c.A,{}),m.length?(0,p.jsxs)("div",{className:"connected-apps__content--wrapper",children:[(0,p.jsx)(j,{}),e?(0,p.jsx)(b,{connected_apps:m,handleToggleModal:y}):(0,p.jsx)(k,{connected_apps:m,handleToggleModal:y})]}):(0,p.jsx)(v,{})]}),(0,p.jsxs)("section",{className:"connected-apps__articles--wrapper",children:[(0,p.jsx)(_,{}),(0,p.jsx)(g,{})]}),(0,p.jsx)(w,{handleRevokeAccess:L,handleToggleModal:y,is_modal_open:i})]})})),L=N}}]);