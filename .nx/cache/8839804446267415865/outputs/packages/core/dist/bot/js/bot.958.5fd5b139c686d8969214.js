"use strict";(self.webpackChunk_deriv_bot_web_ui=self.webpackChunk_deriv_bot_web_ui||[]).push([[958],{8235:(t,e,o)=>{o.d(e,{JN:()=>r,NO:()=>n,Ov:()=>i,mG:()=>s,v_:()=>l,yD:()=>u,ye:()=>a,ys:()=>c});var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAAGXcA1uAAAAAXNSR0IArs4c6QAAAK9JREFUSA3tVUkOgCAMROP/f4PfU4iOaWQKLYmBg71AOksXTAyhGkeKKuECjTSDUwcFxVdNawNgQ10omJNKROqiJbMJsKJZgKgEouuESRYVFVxO35JTnxGDvk9aWQ5GCXfSPbRbsLHysr0lBeMESaKE3hkmbKk230SY9Ulky5rG/SVJU8udPrMU5s7w9bEugUlN886MWiJN86/o2dywFQ17g10b+dlJefH9X0t9X+YETM6gfmoeI+MAAAAASUVORK5CYII=",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAWBJREFUOI2dk81KQmEQhp/5zgHRjhtz0apMXBUSdAcVLWrnxhswsHARSLcRhYm00CvIRbugrCtIaJHtIqlFQUsPBeY50yINM7WfZzV8M+/MOzCfMED8wE2q0Q0VVgSJASjaNEJNoHy7Fb7ur5dekChooGO7ewJZwAw27uIBh6Gok2+kpf3ZIFHQgG+7JwpLI4RfULiYiDprjbS0DYBvu/u/FXenLr88u7sAEj9wk2rp1TDb1VQQXyF9/Dp0HctnwajRjWFiAF9BRxuxOpZmJF5qNRTmfmt/gGujMD0qW00FOUoFxzWYsRnjcnHK+smBGoGHn6rGcG8Qzv6v11MjUObjwr5Rf/K4fByaAvA8IxUBmC21ikDub8Mp3OXC2wYgFHXyCOd/kNcitrMD3QNqpKUdmnTWUYqMWKdnG6UQsZz1elbeoO839kgUW/MdSzOisgrEus9N0FPPSOV+M3zTX/8O8E9xAaZDaSsAAAAASUVORK5CYII=",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAvlJREFUaAXtmU1u00AUxxPEGoluKMcgJ8gCARsW9CZ0ReEU5BwFiYpWqtgYiQuQFSygJ2CRLV2E39+ZZ42dGc84XxIwT3p9X//34VfbsZPRaGNaQkpGPNu4yGESGfHUOtnYte0b6G8NdABJu7NoG4KXmi1GwUTACwtYomzp5r9ripP3/KB8zj7q4P4t0z9o9PfJowM0NhD6D9NN+sFm1xb05Rjybe171nKkDBLqfw6yt1Oqjjo3F4XArbli1dfmT7YpgOQGWPanLgjfFXyn6x9sU+QMfhdKxL/1OfSAGreh4vIR643H8pQ4hydRQCAAPv9owJ7AF1YH/bKr+z7FsPMbdBP8ZNNNOuwE+6v0bPILpJLAXsAvUrgSLxsoG4hsgAtoDDe3CoPhW7uFW8yXOffzcxK++ElOfxzwDXcxafAmhvscfjO8opdBgSfwjedqVPxaXbB5A0op5P+GH8ZwqXgwj6RtaO1kiDYJBiJOJop+HuScRZGyLfcUq2p5nJHVgAnrQzepXF/HnMIVnEckt84Os02qSkdfYN/Pq75KnpPQPFVYMZOBBq2B/EaxFVWApga0x2WT8vu64UIyq0EoMdfXeuC3JFZxhP7L7ByZe0Q5tQqmbKBsoGygbOCv2wAfHU/1SQp9Sw0P5nuNJCeFPUicYY7hW8fHqaYOr4dR5UQfSFN1dhJnAD1a/4RF2RsFq8d10Q0ce+LYyYy9RWiulw/R615gIEiOvuASpb/IDeRv7aLxq7r9FgOQbwvY7g2s72ho0vurgjuIfYmPfbMNijGhvsoSnQxKHABW7brDcvkhN23IBVS5otPc4hvgrHa1QW5/CpvR26loHkKuQuuvc/L7+BDO4sT0tiZ6ZL6dSgrr/VGkd54WrdzpYUM4FVJNF1u0CieM7g90CfjoM4Dn8BTu3v6u8LW2jZ3rA1rXlKz0Zy/Ehk7dlma7bkDdmav9cte1m3o0mLgmweugAW6gUHfuau/n/LeZaHLtGu1DXFufIssGygb+kw38ARimnBqQbBHiAAAAAElFTkSuQmCC",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAA45JREFUaAXtWDFrFUEQzoU0QhpjFVRs/Cc2Sf6AxD4BQSF/QBFtbPwDYici2ImFIqaVlBEEK7FICBaxCFEQRM/v29vZzO7O3dv3uGCEXdg3M998M7O7d7e37+bmZmpt2y4xEPLITABHazpOC0wLwt5wtVKHDGBeFJEg7og+okTaVY5hUgslSQwGFJhb2tZ6mARI3XQ77x/YbzQR9mlMTpc4u3rDoWEFomXtGe5+0zSXg28oCL69IT8r/kwJYocLF0p1yi2ITwl2YiL6+MTq5iQZiUNvtO24GaAywLc+5FfUqp7tFdCXUeulo0bMMfoy+WY8QdUcMU0O/xfPuZ/6fOJtyZH56chABcC94oMXFWyqOlffs2YFXge4hi3gu05gEU3Mj24ZklvDtkUCfgHdfMiBu+cXMnos3QbGZHDsQVyyEs+CYaYh9yzxNaauQF2BWVaATzL6WG01GwMzE4TgfhSdGzKyAUi8z5HvzEKA5Ez08TOkA34jGInCeDT5H2EX6Di9O+k17+d2nW1kwDjz0JL6Pa85xfKRS5BP0T8oV6aSWwYqFoPQHiqoVyUxc5pgwgLnM3loFxNXZJIQATRMULHgf+5596AfKlemmrkIou2gZxfQJ6b/Lfov9CdZVgDAN9B5fLFnANy9TyH7ijyD72pPch5ZeIu7uynjwOGqQrDI1H+zJJ6Jtb6gK2mH1jVnSFcx+0O86qsrUFegrkBdgboC/9MKZK91vPBG/ac88mLEnxmt5Hxjs2kfTDnHTH3M0HlKdNTioYxtXfM7KB6X9gddiJA8OHHgPESx8UCVXbEQaCjg30bnMf+c4TYh1kCX702szTFwLK6ZQRoUIiSPllwNHjOLBw7uFfQf6GxH6LtO635u6lpDOuicCGtzDO6YCxndGWY8SWymswBE6F2XoG0PIN3EIVfQ36G/KkhhUhDrmunUYDFRByU6cvBsL+0Qyh30iV8QkzSRKcki0DKKiVZwgiHXPDrv4W8+74uEUmz6+Ml3RjGxpzTiP/ocL4UC+5HHvgo2rfTx5ROQAC+5K5hfsNOBgLeAzgH/RtftNYzzKd+yweOuIzuRzlE+AUmMaH6QkK3U/Owi3FQi7gH6+xQfssHnzsPGmu5zDfkOwc9QrPNZRGCyD0/9YWpiwYSAWrJlRlfcGhdDo//dPtca5GMGeFuLxR5cc8bSuQ3rXPwvv6mBqtcVqCtQV+Dfr8BfZ6VurZP8obgAAAAASUVORK5CYII=",r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAa5JREFUaAXtV1tywzAIdDq5Rg/Ui/SGzYl8j1brzqYYidHDYWw60g/iIWABKc6yGOsG+XdaSr/uFLe0dkZkNC25Wt6U7zq7C05zJMH9FofBd0IymZIKR4qYWAyh95LfbCgAxYLwd/e3h+yJm0YQWiurk2V4cXkzaALO5owKAJV7E7gsr9zzQBaBiirVXaV3KYeTbtDVyNOgUIFU9q+CeFj0bBs9sL/k5fhJnSXHOakbnzxmUKH3kl5m0JK1ZQ/fxQBHncqk3Uskg217mX2mHBC4I3APMAB6HglfgXQPXvqaZgXBRTu4PqTT+M+1+00uPtfW+94rRy/cEbgHKJYIY8pRGykLz/7jEkmIslwt8mSzSrtsbznMDBsF7lM0A1Q74V6iagbTYFZgVsC7Ani7sbzjjPrPPhu1o4skv6YPj3edG/jDAOQXjQxgAe+1p0/rXPhfgvAAih+9bJukVgtfNSq9/plb+A6EB9A8QmePCkdG0/AdCA+geYR068hbo0W9pr326Tz+p35qP+SbAVjPHB2dRcOP0ARw1ugwbvgOtFziR0J72T807MSkswKDFfgBlTxsE+QpCHoAAAAASUVORK5CYII=",c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC6ElEQVR4Ae2bA6weURCFp7bd4NnaOyeo3Qa1zaiKXpzUbazajJ3UjVXbtm1rGqO6u/sv5uXf74t91nfvHEpISEhISAgO5PAwU4nlvANHcBmP8Z0/8xNcwRHegeWmkochhzRS0hDjsBF3IHb5Nm8yYwoakRZMBVbjA8Sb/I7XooziBbXMGD4I8S8fNGNRi+KgrBnm8hNIAD7EvLJmFCnVeCpeQAL0mZlG1SgauAhHICF4hIsofHgYPkJC8iMPoFCpjsWQcOUloV1KmXV5JyR8eWdmXQqekuZ8DBKNfKykOQVLWTauQyL0elk2BQfa4S4kYu+a9sFdPFchMXilsEUgty5OQmLyVEltShVeAYnR5ZQapg8kZvuRfwpb4FncAfgpWpJfsA2iwG3kD9MRokOnE/mgJi5DlHjZx6IHMyCKnOH5+PNtTQH4FtUkL/AUiDInkxdwWV2AK+Qe0w2iT9NN//M/mPdBeQP+rDLAp/IG5AYzHKJTM1z796dFXkFuwDmIUs+5Wn9B9OpisW96aw5gepMNzIQodqY9wDLVAZaRDd6nOQDvIxs4C3EjBYzLCGfJBt/WHIBv2wO8VB3gpT3AT9UBftgDfFEd4AvZwHPNAfCcbPAtzQH4Vho8RnW/yPaSDSyv6p8SszUH4FlkA/00B3D6ko2CRqoXNA3JDp+B6JTPkAXtt/Hy9PitUt4AnyD65M/lDcgd2KoywBZyC3dVGaBrGvxeV7zBwVO8bjE9UBXgIdUkb/Bs7d9AFlBL0zYr1STvOJ20BDAd03PUgAgt+SkkZp9Zhj20rw5Mnyo98MQrghg5OxFbgBOBTJAWtsAV7UN/Fkx7/WOXFpzMqAdfncxk9Pgvw987IOHLOzLrhtfcWKJ//N6CMxgftBcgLHARHwjl2B/gouhKQFOCLwFFX8Oap7+GZV/0jONDqRXheDxqxV5F5LX8XnkV0f5P24xVXAZ1j5P3Rx33Cz/BFT4aRh03ISEhISHhF9FSCRjypNzcAAAAAElFTkSuQmCC"},7958:(t,e,o)=>{var a=o(2641),n=o(8235),i=o(7811);Blockly.Blocks.procedures_defnoreturn={init:function(){var t=this;this.arguments=[],this.argument_var_models=[],this.is_adding=!1,this.timeout_id,this.jsonInit(this.definition()),Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.getField("NAME").setValidator(Blockly.Procedures.rename);var e=new Blockly.FieldImage(n.mG,24,24,"+",(function(){return t.onAddClick()})),o="".concat(this.workspace.options.pathToMedia,"dropdown-arrow.svg"),a=new Blockly.FieldImage(o,16,16,"v",(function(){return t.toggleCollapseWithDelay(!0)}),!1,!0);this.appendDummyInput("ADD_ICON").appendField(e),this.appendDummyInput("COLLAPSED_INPUT").appendField(a),this.setStatements(!0)},definition:function(){return{message0:(0,a.localize)("function {{ function_name }} {{ function_params }}",{function_name:"%1",function_params:"%2"}),args0:[{type:"field_input",name:"NAME",text:""},{type:"field_label",name:"PARAMS",text:""}],inputsInline:!0,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,a.localize)("Function with no return value"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,a.localize)("Function"),description:(0,a.localize)("This block creates a function, which is a group of instructions that can be executed at any time. Place other blocks in here to perform any kind of action that you need in your strategy. When all the instructions in a function have been carried out, your bot will continue with the remaining blocks in your strategy. Click the “do something” field to give it a name of your choice. Click the plus icon to send a value (as a named variable) to your function.")}},onchange:function(t){var e=[Blockly.Events.BLOCK_DELETE,Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_CHANGE];this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&e.includes(t.type)&&(t.type===Blockly.Events.BLOCK_CREATE||Blockly.Events.BLOCK_CHANGE)&&(t.blockId===this.id&&"NAME"===t.name&&this.getProcedureCallers().forEach((function(e){e.setFieldValue(t.newValue,"NAME")})),(0,i.A$)(this))},onAddClick:function(){var t=this;this.is_adding||this.workspace.options.readOnly||Blockly.derivWorkspace.isFlyoutVisible||(this.is_adding=!0,clearTimeout(this.timeout_id),this.timeout_id=setTimeout((function(){var e=(0,a.localize)("Specify a parameter name:");Blockly.dialog.prompt(e,"",(function(e){if(e){var o=Blockly.Variables.getOrCreateVariablePackage(t.workspace,null,e,"");o&&(t.arguments.push(e),t.argument_var_models.push(o),t.getField("PARAMS").setText("".concat((0,a.localize)("with: ")," ").concat(t.arguments.join(", "))),t.getProcedureCallers().forEach((function(e){e.setProcedureParameters(t.arguments),e.initSvg(),e.renderEfficiently()})))}t.is_adding=!1}))}),0))},setStatements:function(t){this.hasStatements!==t&&(t?(this.appendStatementInput("STACK").appendField(""),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements=t)},updateParams:function(){var t="";this.arguments.length&&(t="".concat((0,a.localize)("with:")," ").concat(this.arguments.join(", "))),Blockly.Events.disable();try{this.setFieldValue(t,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(t){var e=this,o=document.createElement("mutation");return t&&o.setAttribute("name",this.getFieldValue("NAME")),this.argument_var_models.forEach((function(a,n){var i=document.createElement("arg");i.setAttribute("name",a.name),i.setAttribute("varid",a.getId()),t&&e.paramIds&&i.setAttribute("paramId",e.paramIds[n]),o.appendChild(i)})),this.hasStatements||o.setAttribute("statements","false"),o},domToMutation:function(t){var e=this;this.arguments=[],this.argument_var_models=[],t.childNodes.forEach((function(t){if("arg"===t.nodeName.toLowerCase()){var o=t.getAttribute("name"),a=t.getAttribute("varid")||t.getAttribute("varId"),n=Blockly.Variables.getOrCreateVariablePackage(e.workspace,a,o,"");e.arguments.push(o),null!==n?e.argument_var_models.push(n):console.log("Failed to create a variable with name ".concat(o,", ignoring."))}})),this.updateParams(),this.setStatements("false"!==t.getAttribute("statements"))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments,!1]},getProcedureCallers:function(){var t=this;return this.workspace.getAllBlocks(!1).filter((function(e){return e.type===t.callType&&e.data===t.id}))},getVars:function(){return this.arguments},getVarModels:function(){return this.argument_var_models},customContextMenu:function(t){var e=this;if((0,i.xy)(t),!Blockly.derivWorkspace.isFlyoutVisible){var o={enabled:!0},n=this.getFieldValue("NAME");o.text=(0,a.localize)('Create "%1"').replace("%1",n);var l=document.createElement("mutation");l.setAttribute("name",n),this.arguments.forEach((function(t){var e=document.createElement("arg");e.setAttribute("name",t),l.appendChild(e)}));var r=document.createElement("block");r.setAttribute("type",this.callType),r.appendChild(l),o.callback=Blockly.ContextMenu.callbackFactory(this,r),t.push(o),this.isCollapsed()||this.argument_var_models.forEach((function(o){var n={enabled:!0};n.text=(0,a.localize)('Create "get %1"').replace("%1",o.name);var i=Blockly.Variables.generateVariableFieldDom(o),l=document.createElement("block");l.setAttribute("type","variables_get"),l.appendChild(i),n.callback=Blockly.ContextMenu.callbackFactory(e,l),t.push(n)}))}},callType:"procedures_callnoreturn"},Blockly.JavaScript.javascriptGenerator.forBlock.procedures_defnoreturn=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.CATEGORY_NAME),o=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"STACK");if(Blockly.JavaScript.STATEMENT_PREFIX){var a=t.id.replace(/\$/g,"$$$$");o=Blockly.JavaScript.prefixLines(Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g,"'".concat(a,"'")),Blockly.JavaScript.INDENT)+o}Blockly.JavaScript.INFINITE_LOOP_TRAP&&(o=Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g,"'".concat(t.id,"'"))+o);var n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"RETURN",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"";n&&(n="".concat(Blockly.JavaScript.INDENT,"return ").concat(n,";\n"));var i=t.arguments.map((function(t){return Blockly.JavaScript.variableDB_.getName(t,Blockly.Variables.CATEGORY_NAME)})),l=Blockly.JavaScript.javascriptGenerator.scrub_(t,"\n    function ".concat(e,"(").concat(i.join(", "),") {\n        ").concat(o,"\n        ").concat(n,"\n    }\n"));return Blockly.JavaScript.javascriptGenerator.definitions_["%".concat(e)]=l,null},Blockly.Blocks.procedures_defreturn={init:function(){var t=this;this.arguments=[],this.argument_var_models=[],this.jsonInit(this.definition()),Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.getField("NAME").setValidator(Blockly.Procedures.rename);var e=new Blockly.FieldImage(n.ys,24,24,"+",(function(){return t.onAddClick()})),o="".concat(this.workspace.options.pathToMedia,"dropdown-arrow.svg"),a=new Blockly.FieldImage(o,16,16,"v",(function(){return t.toggleCollapseWithDelay(!0)}),!1,!0);this.appendDummyInput("ADD_ICON").appendField(e),this.moveInputBefore("ADD_ICON","RETURN"),this.appendDummyInput("COLLAPSED_INPUT").appendField(a),this.moveInputBefore("COLLAPSED_INPUT","RETURN"),this.setStatements(!0)},definition:function(){return{message0:(0,a.localize)("function {{ function_name }} {{ function_params }} {{ dummy }}",{function_name:"%1",function_params:"%2",dummy:"%3"}),message1:"return %1",args0:[{type:"field_input",name:"NAME",text:""},{type:"field_label",name:"PARAMS",text:""},{type:"input_dummy"}],args1:[{type:"input_value",name:"RETURN",check:null}],inputsInline:!0,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,a.localize)("Function that returns a value"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,a.localize)("Function that returns a value"),description:(0,a.localize)("This block is similar to the one above, except that this returns a value. The returned value can be assigned to a variable of your choice.")}},onAddClick:Blockly.Blocks.procedures_defnoreturn.onAddClick,onchange:Blockly.Blocks.procedures_defnoreturn.onchange,setStatements:Blockly.Blocks.procedures_defnoreturn.setStatements,updateParams:Blockly.Blocks.procedures_defnoreturn.updateParams,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments,!0]},getProcedureCallers:Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,displayRenamedVar:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,registerWorkspaceListener:Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener,callType:"procedures_callreturn"},Blockly.JavaScript.javascriptGenerator.forBlock.procedures_defreturn=Blockly.JavaScript.javascriptGenerator.forBlock.procedures_defnoreturn,Blockly.Blocks.procedures_callnoreturn={init:function(){this.arguments=[],this.argument_var_models=[],this.previousDisabledState=!1,this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:this.id},{type:"input_dummy",name:"TOPROW"}],inputsInline:!0,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Custom function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,a.localize)("Custom function"),description:""}},onchange:function(t){if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&t.recordUndo)if(t.type===Blockly.Events.BLOCK_CREATE&&-1!==t.ids.indexOf(this.id)){var e=this.getProcedureCall(),o=Blockly.Procedures.getDefinition(e,this.workspace);if(!o||o.type===this.defType&&JSON.stringify(o.arguments)===JSON.stringify(this.arguments)||(o=null),o)return void(this.data=o.id);Blockly.Events.setGroup(t.group);var a=document.createElement("xml"),n=document.createElement("block");n.setAttribute("type",this.defType);var i=this.getRelativeToSurfaceXY(),l=i.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1),r=i.y+2*Blockly.SNAP_RADIUS;n.setAttribute("x",l),n.setAttribute("y",r);var c=this.mutationToDom();n.appendChild(c);var s=document.createElement("field");s.setAttribute("name","NAME"),s.appendChild(document.createTextNode(this.getProcedureCall())),n.appendChild(s),a.appendChild(n),Blockly.Xml.domToWorkspace(a,this.workspace),Blockly.Events.setGroup(!1);var u=Blockly.Procedures.getDefinition(e,this.workspace);this.data=u.id}else if(t.type===Blockly.Events.BLOCK_DELETE){var p=this.getProcedureCall();Blockly.Procedures.getDefinition(p,this.workspace)||(Blockly.Events.setGroup(t.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1))}else if(t.type===Blockly.Events.BLOCK_CHANGE&&"disabled"===t.element){var d=this.getProcedureCall(),y=Blockly.Procedures.getDefinition(d,this.workspace);if(y&&y.id===t.blockId){var B=Blockly.Events.getGroup();B&&console.log("Saw an existing group while responding to a definition change"),Blockly.Events.setGroup(t.group),t.newValue?(this.previousDisabledState=this.disabled,this.setDisabled(!0)):this.setDisabled(this.previousDisabledState),Blockly.Events.setGroup(B)}}},getProcedureDefinition:function(t){return this.workspace.getTopBlocks(!1).find((function(e){if(e.getProcedureDef){var o=e.getProcedureDef();return o&&Blockly.Names.equals(o[0],t)}return!1}))},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(t,e){Blockly.Names.equals(t,this.getProcedureCall())&&this.setFieldValue(e,"NAME")},setProcedureParameters:function(t){var e=this;this.arguments=[].concat(t),this.argument_var_models=this.arguments.map((function(t){return Blockly.Variables.getOrCreateVariablePackage(e.workspace,null,t,"")})),this.updateShape()},updateShape:function(){var t=this;this.arguments.forEach((function(e,o){var a=t.getField("ARGNAME".concat(o));if(a){Blockly.Events.disable();try{a.setValue(e)}finally{Blockly.Events.enable()}}else a=new Blockly.FieldLabel(e),t.appendValueInput("ARG".concat(o)).appendField(a,"ARGNAME".concat(o)).init()}));for(var e=this.arguments.length;this.getInput("ARG".concat(e));)this.removeInput("ARG".concat(e)),e++;var o=this.getInput("TOPROW");o&&(this.arguments.length?this.getField("WITH")||(o.appendField((0,a.localize)("with:"),"WITH"),o.init()):this.getField("WITH")&&o.removeField("WITH"))},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("name",this.getProcedureCall()),this.arguments.forEach((function(e){var o=document.createElement("arg");o.setAttribute("name",e),t.appendChild(o)})),t},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e);var o=[],a=[];t.childNodes.forEach((function(t){"arg"===t.nodeName.toLowerCase()&&(o.push(t.getAttribute("name")),a.push(t.getAttribute("paramId")))})),this.setProcedureParameters(o,a)},getVarModels:function(){return this.argument_var_models},customContextMenu:function(t){var e=this;(0,i.xy)(t);var o=this.getProcedureCall(),n=this.workspace,l={enabled:!0};l.text=(0,a.localize)("Highlight function definition"),l.callback=function(){var t=e.getProcedureDefinition(o);t&&(n.centerOnBlock(t.id),t.select())},t.push(l)},defType:"procedures_defnoreturn"},Blockly.JavaScript.javascriptGenerator.forBlock.procedures_callnoreturn=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.CATEGORY_NAME),o=t.arguments.map((function(e,o){return Blockly.JavaScript.javascriptGenerator.valueToCode(t,"ARG".concat(o),Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"null"}));return"".concat(e,"(").concat(o.join(", "),");\n")},Blockly.Blocks.procedures_callreturn={init:function(){this.arguments=[],this.previousDisabledState=!1,this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:this.id},{type:"input_dummy",name:"TOPROW"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,a.localize)("Custom function"),category:Blockly.Categories.Functions,inputsInline:!0}},meta:function(){return{display_name:(0,a.localize)("Custom function"),description:""}},onchange:Blockly.Blocks.procedures_callnoreturn.onchange,getProcedureDefinition:Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,updateShape:Blockly.Blocks.procedures_callnoreturn.updateShape,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,getVarModels:Blockly.Blocks.procedures_callnoreturn.getVarModels,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,defType:"procedures_defreturn"},Blockly.JavaScript.javascriptGenerator.forBlock.procedures_callreturn=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.CATEGORY_NAME),o=t.arguments.map((function(e,o){return Blockly.JavaScript.javascriptGenerator.valueToCode(t,"ARG".concat(o),Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"null"}));return["".concat(e,"(").concat(o.join(", "),")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.procedures_ifreturn={init:function(){this.hasReturnValue=!0,this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("if {{ condition }} return {{ value }}",{condition:"%1",value:"%2"}),args0:[{type:"input_value",name:"CONDITION"},{type:"input_value",name:"VALUE"}],inputsInline:!0,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Prematurely returns a value within a function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,a.localize)("Conditional return"),description:(0,a.localize)("This block returns a value when a condition is true. Use this block within either of the function blocks above.")}},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("value",Number(this.hasReturnValue)),t},domToMutation:function(t){var e=t.getAttribute("value");this.hasReturnValue="1"===e,this.hasReturnValue||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField((0,a.localize)("return")),this.initSvg(),this.renderEfficiently())},onchange:function(){var t=this;if(this.workspace.isDragging&&!this.workspace.isDragging()){var e=!1,o=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(o.type)){e=!0;break}o=o.getSurroundParent()}while(o);if(e){var n=function(){t.initSvg(),t.renderEfficiently()};"procedures_defnoreturn"===o.type&&this.hasReturnValue?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField((0,a.localize)("return")),n(),this.hasReturnValue=!1):"procedures_defreturn"!==o.type||this.hasReturnValue||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField((0,a.localize)("return")),n(),this.hasReturnValue=!0),Blockly.derivWorkspace.isFlyoutVisible||this.setDisabled(!1)}else Blockly.derivWorkspace.isFlyoutVisible||this.getInheritedDisabled()||this.setDisabled(!0)}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Blockly.JavaScript.javascriptGenerator.forBlock.procedures_ifreturn=function(t){var e,o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"CONDITION",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"false";if(t.hasReturnValue){var a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"null";e="return ".concat(a,";\n")}else e="return;\n";return"\n    if (".concat(o,") {\n        ").concat(e,"\n    }\n")},Blockly.Blocks.lists_create_with={protected_statements:["STACK"],allowed_children:["lists_statement"],init:function(){var t=new Blockly.FieldImage(n.ys,25,25,"",this.onIconClick.bind(this));this.jsonInit(this.definition()),this.appendDummyInput("ADD_ICON").appendField(t),this.moveInputBefore("ADD_ICON","STACK")},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to create list with",{variable:"%1"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:(0,a.localize)("list")}],args1:[{type:"input_statement",name:"STACK"}],inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("This block creates a list with strings and numbers."),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("Create list"),description:(0,a.localize)("This block creates a list with strings and numbers.")}},onIconClick:function(){var t=this;this.workspace.options.readOnly||Blockly.derivWorkspace.isFlyoutVisible||(0,i.$d)(!1,(function(){var e=t.workspace.newBlock("lists_statement");e.required_parent_id=t.id,e.setMovable(!1),e.initSvg(),e.renderEfficiently(),t.getLastConnectionInStatement("STACK").connect(e.previousConnection)}))},onchange:function(t){var e=this;!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_DRAG||t.isStart||this.getBlocksInStatement("STACK").forEach((function(t){e.allowed_children.includes(t.type)||(0,i.j6)((function(){t.unplug(!1)}))}))},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_create_with=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.getBlocksInStatement("STACK").map((function(t){var e=Blockly.JavaScript.javascriptGenerator.forBlock[t.type](t);return Array.isArray(e)?e[0]:e}));return"".concat(e," = [").concat(o.join(", "),"];\n")},Blockly.Blocks.lists_repeat={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("create list with item {{ input_item }} repeated {{ number }} times",{input_item:"%1",number:"%2"}),args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM"}],inputsInline:!0,output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Creates a list by repeating a given item"),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("Repeat an item"),description:(0,a.localize)("Creates a list with a given item repeated for a specific number of times.")}},getRequiredValueInputs:function(){return{ITEM:i.PZ,NUM:i.PZ}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_repeat=function(t){var e=Blockly.JavaScript.javascriptGenerator.provideFunction_("listsRepeat",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }")]),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"ITEM",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"null",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"NUM",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"0";return["".concat(e,"(").concat(o,", ").concat(a,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_length={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("length of {{ input_list }}",{input_list:"%1"}),args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you the total number of items in a given list."),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("List Length"),description:(0,a.localize)("This block gives you the total number of items in a given list.")}},getRequiredValueInputs:function(){return{VALUE:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_length=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"[]";return["".concat(e,".length"),Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER]},Blockly.Blocks.lists_isEmpty={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("list {{ input_list }} is empty",{input_list:"%1"}),args0:[{type:"input_value",name:"VALUE",check:["Array"]}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Checks if a given list is empty"),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("Is list empty?"),description:(0,a.localize)("This block checks if a given list is empty. It returns “True” if the list is empty, “False” if otherwise.")}},getRequiredValueInputs:function(){return{VALUE:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_isEmpty=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"[]";return[-1!==t.workspace.getAllVariables().findIndex((function(t){return t.name===e}))?"!".concat(e," || !").concat(e,".length"):"!".concat(e,".length"),Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT]},Blockly.Blocks.lists_indexOf={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("in list {{ input_list }} find {{ first_or_last }} occurence of item {{ input_value }}",{input_list:"%1",first_or_last:"%2",input_value:"%3"}),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"END",options:[[(0,a.localize)("first"),"FIRST"],[(0,a.localize)("last"),"LAST"]]},{type:"input_value",name:"FIND"}],output:"Number",inputsInline:!0,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you the position of an item in a given list."),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("List item position"),description:(0,a.localize)("This block gives you the position of an item in a given list.")}},getRequiredValueInputs:function(){return{VALUE:null,FIND:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_indexOf=function(t){var e="FIRST"===t.getFieldValue("END")?"indexOf":"lastIndexOf",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"FIND",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"''",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"''",n="".concat(a,".").concat(e,"(").concat(o,")");return t.workspace.options.oneBasedIndex?["".concat(n," + 1"),Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION]:[n,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_getIndex={init:function(){var t=this;this.MODE_OPTIONS=[[(0,a.localize)("get"),"GET"],[(0,a.localize)("get and remove"),"GET_REMOVE"],[(0,a.localize)("remove"),"REMOVE"]],this.WHERE_OPTIONS=[["#","FROM_START"],[(0,a.localize)("# from end"),"FROM_END"],[(0,a.localize)("first"),"FIRST"],[(0,a.localize)("last"),"LAST"],[(0,a.localize)("random"),"RANDOM"]];var e=new Blockly.FieldDropdown(this.MODE_OPTIONS,(function(e){var o="REMOVE"===e;t.updateStatement(o)}));this.appendValueInput("VALUE").setCheck("Array").appendField((0,a.localize)("in list")),this.appendDummyInput().appendField(e,"MODE"),this.appendDummyInput("AT");var o=Blockly.Colours.Base.colour||Blockly.Colours.Base.colourSecondary||Blockly.Colours.Base.colourTertiary;this.setColour(o),this.setTooltip("This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list."),this.setInputsInline(!0),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt(!0)},meta:function(){return{display_name:(0,a.localize)("Get list item"),description:(0,a.localize)("This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation"),e=!this.outputConnection,o=this.getInput("AT").type===Blockly.INPUT_VALUE;return t.setAttribute("statement",e),t.setAttribute("at",o),t},domToMutation:function(t){var e="true"===t.getAttribute("statement");this.updateStatement(e);var o="false"!==t.getAttribute("at");this.updateAt(o)},updateStatement:function(t){t!==!this.outputConnection&&(this.unplug(!0,!0),this.setOutput(!t),this.setPreviousStatement(t),this.setNextStatement(t),this.initSvg())},updateAt:function(t){var e=this;this.removeInput("AT",!0),t?this.appendValueInput("AT").setCheck("Number"):this.appendDummyInput("AT");var o=new Blockly.FieldDropdown(this.WHERE_OPTIONS,(function(o){var a=["FROM_START","FROM_END"].includes(o);if(a!==t)return e.updateAt(a),e.setFieldValue(o,"WHERE"),null}));this.getInput("AT").appendField(o,"WHERE"),this.initSvg()},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_getIndex=function(t){var e,o,a=t.getFieldValue("MODE")||"GET",n=t.getFieldValue("WHERE")||"FIRST",i="RANDOM"===n?Blockly.JavaScript.javascriptGenerator.ORDER_COMMA:Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER,l=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",i)||"[]";if("FIRST"===n){if("GET"===a)e="".concat(l,"[0]"),o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;else if("GET_REMOVE"===a)e="".concat(l,".shift()"),o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;else if("REMOVE"===a)return"".concat(l,".shift();\n")}else if("LAST"===n){if("GET"===a)e="".concat(l,".slice(-1)[0]"),o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;else if("GET_REMOVE"===a)e="".concat(l,".pop()"),o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;else if("REMOVE"===a)return"".concat(l,".pop();\n")}else if("FROM_START"===n){var r=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT");if("GET"===a)e="".concat(l,"[").concat(r,"]"),o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER;else if("GET_REMOVE"===a)e="".concat(l,".splice(").concat(r,", 1)[0]"),o=Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;else if("REMOVE"===a)return"".concat(l,".splice(").concat(r,", 1);\n")}else if("FROM_END"===n){var c=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT",1,!0);if("GET"===a)e="".concat(l,".slice(").concat(c,")[0]"),o=Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;else if("GET_REMOVE"===a)e="".concat(l,".splice(").concat(c,", 1)[0]"),o=Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;else if("REMOVE"===a)return"".concat(l,".splice(").concat(c,", 1);\n")}else if("RANDOM"===n){var s=Blockly.JavaScript.javascriptGenerator.provideFunction_("listsGetRandomItem",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }")]);if(e="".concat(s,"(").concat(l,", ").concat("GET"!==a,")"),"GET"===a||"GET_REMOVE"===a)o=Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL;else if("REMOVE"===a)return"".concat(e,";\n")}return[e,o]},Blockly.Blocks.lists_setIndex={init:function(){this.MODE_OPTIONS=[[(0,a.localize)("set"),"SET"],[(0,a.localize)("insert at"),"INSERT"]],this.WHERE_OPTIONS=[[(0,a.localize)("#"),"FROM_START"],[(0,a.localize)("# from end"),"FROM_END"],[(0,a.localize)("first"),"FIRST"],[(0,a.localize)("last"),"LAST"],[(0,a.localize)("random"),"RANDOM"]],this.appendValueInput("LIST").setCheck("Array").appendField((0,a.localize)("in list")),this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS),"MODE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField((0,a.localize)("as"));var t=Blockly.Colours.Base.colour||Blockly.Colours.Base.colourSecondary||Blockly.Colours.Base.colourTertiary;this.setColour(t),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip((0,a.localize)("This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.")),this.updateAt(!0)},meta:function(){return{display_name:(0,a.localize)("Set list item"),description:(0,a.localize)("This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation"),e=this.getInput("AT").type===Blockly.INPUT_VALUE;return t.setAttribute("at",e),t},domToMutation:function(t){var e="false"!==t.getAttribute("at");this.updateAt(e)},updateAt:function(t){var e=this;this.removeInput("AT",!0),t?this.appendValueInput("AT").setCheck("Number"):this.appendDummyInput("AT");var o=new Blockly.FieldDropdown(this.WHERE_OPTIONS,(function(o){var a=["FROM_START","FROM_END"].includes(o);if(a!==t)return e.updateAt(a),e.setFieldValue(o,"WHERE"),null}));this.moveInputBefore("AT","TO"),this.getInput("AT").appendField(o,"WHERE"),this.initSvg()},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_setIndex=function(t){var e,o=t.getFieldValue("MODE")||"SET",a=t.getFieldValue("WHERE")||"FIRST",n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TO",Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT)||"null",i=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"[]",l=function(){if(i.match(/^\w+$/))return"";var t=Blockly.JavaScript.variableDB_.getDistinctName("tmpList",Blockly.Variables.CATEGORY_NAME),e="var ".concat(t," = ").concat(i,";\n");return i=t,e};if("FIRST"===a)"SET"===o?e="".concat(i,"[0] = ").concat(n,";\n"):"INSERT"===o&&(e="".concat(i,".unshift(").concat(n,");\n"));else if("LAST"===a)"SET"===o?(e=l(),e+="".concat(i,"[").concat(i,".length - 1] = ").concat(n,";\n")):"INSERT"===o&&(e="".concat(i,".push(").concat(n,");\n"));else if("FROM_START"===a){var r=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT");"SET"===o?e="".concat(i,"[").concat(r,"] = ").concat(n,";\n"):"INSERT"===o&&(e="".concat(i,".splice(").concat(r,", 0, ").concat(n,");\n"))}else if("FROM_END"===a){var c=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT",1,!1,Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION);e=l(),"SET"===o?e="".concat(i,"[").concat(i,".length - ").concat(c,"] = ").concat(n,";\n"):"INSERT"===o&&(e="".concat(i,".splice(").concat(i,".length - ").concat(c,", 0, ").concat(n,");\n"))}else if("RANDOM"===a){e=l();var s=Blockly.JavaScript.variableDB_.getDistinctName("tmpX",Blockly.Variables.CATEGORY_NAME);e+="var ".concat(s," = Math.floor(Math.random() * ").concat(i,".length);\n"),"SET"===o?e+="".concat(i,"[").concat(s,"] = ").concat(n,";\n"):"INSERT"===o&&(e+="".concat(i,".splice(").concat(s,", 0, ").concat(n,");\n"))}return e},Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[(0,a.localize)("get sub-list from #"),"FROM_START"],[(0,a.localize)("get sub-list from # from end"),"FROM_END"],[(0,a.localize)("get sub-list from first"),"FIRST"]],this.WHERE_OPTIONS_2=[[(0,a.localize)("#"),"FROM_START"],[(0,a.localize)("# from end"),"FROM_END"],[(0,a.localize)("last"),"LAST"]],this.appendValueInput("LIST").appendField((0,a.localize)("in list")),this.appendDummyInput("AT1"),this.appendDummyInput("AT2");var t=Blockly.Colours.Base.colour||Blockly.Colours.Base.colourSecondary||Blockly.Colours.Base.colourTertiary;this.setColour(t),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setInputsInline(!0),this.setTooltip((0,a.localize)("This block creates a list of items from an existing list, using specific item positions.")),this.updateAt(1,!0),this.updateAt(2,!0)},meta:function(){return{display_name:(0,a.localize)("Get sub-list"),description:(0,a.localize)("This block creates a list of items from an existing list, using specific item positions."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation"),e=this.getInput("AT1").type===Blockly.INPUT_VALUE,o=this.getInput("AT2").type===Blockly.INPUT_VALUE;return t.setAttribute("at1",e),t.setAttribute("at2",o),t},domToMutation:function(t){var e="true"===t.getAttribute("at1"),o="true"===t.getAttribute("at2");this.updateAt(1,e),this.updateAt(2,o)},updateAt:function(t,e){var o=this;this.removeInput("AT".concat(t)),e?this.appendValueInput("AT".concat(t)).setCheck("Number"):this.appendDummyInput("AT".concat(t));var a=new Blockly.FieldDropdown(this["WHERE_OPTIONS_".concat(t)],(function(a){var n=["FROM_START","FROM_END"].includes(a);if(n!==e)return o.updateAt(t,n),o.setFieldValue(a,"WHERE".concat(t)),null}));this.getInput("AT".concat(t)).appendField(a,"WHERE".concat(t)),1===t&&this.moveInputBefore("AT1","AT2"),this.initSvg(),this.renderEfficiently()},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_getSublist=function(t){var e,o,a,n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"[]",i=t.getFieldValue("WHERE1"),l=t.getFieldValue("WHERE2");if("FIRST"===i&&"LAST"===l)a="".concat(n,".slice(0)");else if(n.match(/^\w+$/)||"FROM_END"!==i&&"FROM_START"===l)"FROM_START"===i?e=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT1"):"FROM_END"===i?(e=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT1",1,!1,Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION),e="".concat(n,".length - ").concat(e)):"FIRST"===i&&(e="0"),"FROM_START"===l?o=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT2",1):"FROM_END"===l?(o=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT2",0,!1,Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION),o="".concat(n,".length - ").concat(o)):"LAST"===l&&(o="".concat(n,".length")),a="".concat(n,".slice(").concat(e,", ").concat(o,")");else{e=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT1"),o=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT2");var r={FROM_START:"FromStart",FROM_END:"FromEnd",FIRST:"First",LAST:"Last"},c=function(t,e,o){return"FIRST"===e?"0":"FROM_END"===e?"".concat(t,".length - 1 - ").concat(o):"LAST"===e?"".concat(t,".length - 1"):"".concat(o)},s="FROM_END"===i||"FROM_START"===i,u="FROM_END"===l||"FROM_START"===l,p=Blockly.JavaScript.javascriptGenerator.provideFunction_("subsequence".concat(r[i]).concat(r[l]),["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(\n                    sequence").concat(s?", at1":"").concat(u?", at2":"","\n                ) {\n                    var start = ").concat(c("sequence",i,"at1"),";\n                    var end = ").concat(c("sequence",l,"at2")," + 1;\n\n                    return sequence.slice(start, end);\n                }")]);a="".concat(p,"(").concat(n).concat(s?", ".concat(e):"").concat(u?", ".concat(o):"",")")}return[a,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_split={init:function(){var t=this,e=new Blockly.FieldDropdown([[(0,a.localize)("make list from text"),"SPLIT"],[(0,a.localize)("make text from list"),"JOIN"]],(function(e){return t.updateType(e)}));this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField("","SPACE1").appendField((0,a.localize)("with delimiter"),"DELIM_LABEL"),this.appendDummyInput().appendField("","SPACE2"),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setColour(Blockly.Colours.Base.colour),this.setTooltip((0,a.localize)("This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text."))},meta:function(){return{display_name:(0,a.localize)("Create list from text"),description:(0,a.localize)("This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(t){this.updateType(t.getAttribute("mode"))},updateType:function(t){var e=this.getInput("DELIM"),o=this.getField("SPACE1");"SPLIT"===t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String"),o||e.insertFieldAt(0,"","SPACE1")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck(null),o&&e.removeField("SPACE1")),this.initSvg(),this.renderEfficiently()},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_split=function(t){var e,o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"INPUT",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER),a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DELIM",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"''",n=t.getFieldValue("MODE");return"SPLIT"===n?e="".concat(o||"''",".split(").concat(a,")"):"JOIN"===n&&(e="".concat(o||"[]",".join(").concat(a,")")),[e,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_sort={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("sort {{ sort_type }} {{ sort_direction }} {{ input_list }}",{sort_type:"%1",sort_direction:"%2",input_list:"%3"}),args0:[{type:"field_dropdown",name:"TYPE",options:[[(0,a.localize)("numeric"),"NUMERIC"],[(0,a.localize)("alphabetic"),"TEXT"]]},{type:"field_dropdown",name:"DIRECTION",options:[[(0,a.localize)("ascending"),"1"],[(0,a.localize)("descending"),"-1"]]},{type:"input_value",name:"LIST"}],inputsInline:!0,output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Sorts the items in a given list"),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("Sort list"),description:(0,a.localize)("Sorts the items in a given list, by their numeric or alphabetical value, in either ascending or descending order.")}},getRequiredValueInputs:function(){return{LIST:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_sort=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",o="1"===t.getFieldValue("DIRECTION")?1:-1,a=t.getFieldValue("TYPE"),n=Blockly.JavaScript.javascriptGenerator.provideFunction_("listsGetSortCompare",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString() > b.toString() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }")]);return["".concat(e,".sort().slice(0).sort(").concat(n,'("').concat(a,'", ').concat(o,"))"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_statement={required_parent_type:"lists_create_with",init:function(){var t=this;this.required_parent_id="";var e=new Blockly.FieldImage(n.yD,25,25,"",(function(){return t.onIconClick()}));this.jsonInit(this.definition()),this.appendDummyInput("REMOVE_ICON").appendField(e)},definition:function(){return{message0:"%1",args0:[{type:"input_value",name:"VALUE"}],inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,category:Blockly.Categories.List}},meta:function(){return{display_name:(0,a.localize)("List Statement"),description:""}},onIconClick:function(){var t=this;this.workspace.options.readOnly||Blockly.derivWorkspace.isFlyoutVisible||(0,i.$d)(!1,(function(){t.unplug(!0),t.dispose()}))},onchange:function(t){var e=this;if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()&&t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart){var o=this.getSurroundParent();if(o)if(this.required_parent_id||o.type!==this.required_parent_type){if(o.id!==this.required_parent_id){var a=this.workspace.getAllBlocks().find((function(t){return t.id===e.required_parent_id}));if(a){var n=a.getLastConnectionInStatement("STACK");(0,i.j6)((function(){n.connect(e.previousConnection)}))}else(0,i.j6)((function(){e.dispose(!0)}))}}else this.required_parent_id=o.id;else(0,i.j6)((function(){e.dispose()}))}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lists_statement=function(t){return[Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"null",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.controls_repeat_ext={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("repeat {{ number }} times",{number:"%1"}),args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:(0,a.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Repeats inside instructions specified number of times"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,a.localize)("Repeat (2)"),description:(0,a.localize)("This block is similar to the block above, except that the number of times it repeats is determined by a given variable.")}},getRequiredValueInputs:function(){return{TIMES:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_repeat_ext=function(t){var e;e=t.getField("TIMES")?String(Number(t.getFieldValue("TIMES"))):Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TIMES",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0";var o=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"DO"),a="",n=Blockly.JavaScript.variableDB_.getDistinctName("count",Blockly.Variables.CATEGORY_NAME),i=e;return e.match(/^\w+$/)||Blockly.isNumber(e)||(i=Blockly.JavaScript.variableDB_.getDistinctName("repeat_end",Blockly.Variables.CATEGORY_NAME),a+="var ".concat(i," = ").concat(e,";\n")),a+"\n    for (var ".concat(n," = 0; ").concat(n," < ").concat(i,"; ").concat(n,"++) {\n        ").concat(o,"\n    }\n")},Blockly.Blocks.controls_repeat={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"controls_repeat",message0:(0,a.localize)("repeat {{ number }} times",{number:"%1"}),args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:(0,a.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Repeats inside instructions specified number of times"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,a.localize)("Repeat (1)"),description:(0,a.localize)("This block repeats the instructions contained within for a specific number of times.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_repeat=Blockly.JavaScript.javascriptGenerator.forBlock.controls_repeat_ext,Blockly.Blocks.controls_whileUntil={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("repeat {{ while_or_until }} {{ boolean }}",{while_or_until:"%1",boolean:"%2"}),args0:[{type:"field_dropdown",name:"MODE",options:[[(0,a.localize)("while"),"WHILE"],[(0,a.localize)("until"),"UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:(0,a.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("This block repeats instructions as long as a given condition is true"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,a.localize)("Repeat While/Until"),description:(0,a.localize)("This block repeats instructions as long as a given condition is true.")}},getRequiredValueInputs:function(){return{BOOL:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_whileUntil=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"DO"),o="UNTIL"===t.getFieldValue("MODE"),n=o?Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT:Blockly.JavaScript.javascriptGenerator.ORDER_NONE,i=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"BOOL",n)||"false";o&&(i="!".concat(i));var l=Blockly.JavaScript.variableDB_.getDistinctName("maxLoops",Blockly.Variables.CATEGORY_NAME),r=Blockly.JavaScript.variableDB_.getDistinctName("currentLoop",Blockly.Variables.CATEGORY_NAME);return"\n        var ".concat(l," = 10000;\n        var ").concat(r," = 0;\n\n        while (").concat(i,") {\n            if (").concat(r," > ").concat(l,') {\n                throw new Error("').concat((0,a.localize)("Infinite loop detected"),'");\n            } else {\n                ').concat(r,"++;\n            }\n            \n            ").concat(e,"\n        }\n")},Blockly.Blocks.controls_for={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("count with {{ variable }} from {{ start_number }} to {{ end_number }} by {{ step_size }}",{variable:"%1",start_number:"%2",end_number:"%3",step_size:"%4"}),args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"},{type:"input_value",name:"BY",check:"Number"}],message1:(0,a.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list."),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,a.localize)("Iterate (1)"),description:(0,a.localize)("This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.")}},getRequiredValueInputs:function(){return{FROM:null,TO:null,BY:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_for=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.CATEGORY_NAME),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"FROM",Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT)||"0",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TO",Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT)||"0",n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"BY",Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT)||"1",i=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"DO");i=Blockly.JavaScript.javascriptGenerator.addLoopTrap(i,t.id);var l="";if(Blockly.isNumber(o)&&Blockly.isNumber(a)&&Blockly.isNumber(n)){var r=parseFloat(o)<=parseFloat(a),c=r?"<=":">=",s=Math.abs(parseFloat(n)),u="".concat(e," = ").concat(o),p="".concat(e," ").concat(c," ").concat(a),d="".concat(e," ").concat(r?"+=":"-="," ").concat(s);l="\n        for (".concat(u,"; ").concat(p,"; ").concat(d,") {\n            ").concat(i,"\n        }\n")}else{var y=o;o.match(/^\w+$/)||Blockly.isNumber(o)||(y=Blockly.JavaScript.variableDB_.getDistinctName("".concat(e,"_start"),Blockly.Variables.CATEGORY_NAME),l="var ".concat(y," = ").concat(o,";\n"));var B=a;a.match(/^\w+$/)||Blockly.isNumber(a)||(B=Blockly.JavaScript.variableDB_.getDistinctName("".concat(e,"_end"),Blockly.Variables.CATEGORY_NAME),l+="var ".concat(B," = ").concat(a,";\n"));var k=Blockly.JavaScript.variableDB_.getDistinctName("".concat(e,"_inc"),Blockly.Variables.CATEGORY_NAME),m=Blockly.isNumber(n)?Math.abs(n):"Math.abs(".concat(n,")");l+="\n        var ".concat(k," = ").concat(m,";\n        if (").concat(y," > ").concat(B,") {\n            ").concat(k," = -").concat(k,";\n        }\n        for (\n           ").concat(e," = ").concat(y,"; \n           ").concat(k," >= 0 ? ").concat(e," <= ").concat(B," : ").concat(e," >= ").concat(B,";\n           ").concat(e," += ").concat(k,"\n        ) {\n            ").concat(i,";\n        }\n")}return l},Blockly.Blocks.controls_forEach={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("for each item {{ variable }} in list {{ input_list }}",{variable:"%1",input_list:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:(0,a.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Iterates through a given list"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,a.localize)("Iterate (2)"),description:(0,a.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.')}},getRequiredValueInputs:function(){return{LIST:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_forEach=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.CATEGORY_NAME),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT)||"[]",a=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"DO");a=Blockly.JavaScript.javascriptGenerator.addLoopTrap(a,t.id);var n="",i=o;o.match(/^\w+$/)||(i=Blockly.JavaScript.variableDB_.getDistinctName("".concat(e,"_list"),Blockly.Variables.CATEGORY_NAME),n="var ".concat(i," = ").concat(o,";\n"));var l=Blockly.JavaScript.variableDB_.getDistinctName("".concat(e,"_list"),Blockly.Variables.CATEGORY_NAME);return n+"\n    for (var ".concat(l," in ").concat(i,") {\n        ").concat(e," = ").concat(i,"[").concat(l,"];\n        ").concat(a,"\n    }\n")},Blockly.Blocks.controls_flow_statements={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("{{ break_or_continue }} of loop",{break_or_continue:"%1"}),args0:[{type:"field_dropdown",name:"FLOW",options:[[(0,a.localize)("break out"),"BREAK"],[(0,a.localize)("continue with next iteration"),"CONTINUE"]]}],inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block."),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,a.localize)("Break out/continue"),description:(0,a.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_flow_statements=function(t){var e="BREAK"===t.getFieldValue("FLOW")?"break":"continue";return"".concat(e,";\n")},Blockly.Blocks.variables_get={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:(0,a.localize)("item")}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special4.colour,colourSecondary:Blockly.Colours.Special4.colourSecondary,colourTertiary:Blockly.Colours.Special4.colourTertiary,tooltip:(0,a.localize)("Gets variable value"),category:Blockly.Categories.Variables}},meta:function(){return{display_name:(0,a.localize)("User-defined variable"),description:""}},onchange:function(t){if(t.type===Blockly.Events.VAR_RENAME){var e=this.workspace.getAllBlocks().filter((function(t){return"custom_functions"===t.category_})),o=t.oldName,n=t.newName;e.forEach((function(t){var e;if(null!==(e=t.arguments)&&void 0!==e&&e.length){var i=t.arguments.findIndex((function(t){return t===o}));-1!==i&&(t.arguments[i]=n,t.getField("PARAMS")&&t.setFieldValue("".concat((0,a.localize)("with: ")," ").concat(t.arguments.join(", ")),"PARAMS"),t.getField("WITH")&&t.updateShape())}}))}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.variables_get=function(t){return[Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.CATEGORY_NAME),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.variables_set={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"field_variable",message0:(0,a.localize)("set {{ variable }} to {{ value }}",{variable:"%1",value:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:(0,a.localize)("item")},{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Sets variable value"),category:Blockly.Categories.Variables}},meta:function(){return{display_name:(0,a.localize)("Set variable"),description:(0,a.localize)("Assigns a given value to a variable")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.variables_set=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_ASSIGNMENT)||"0",o=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.CATEGORY_NAME);return"".concat(o," = ").concat(e,";\n")},Blockly.Blocks.after_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",message1:"%1",message2:"%1",args0:[{type:"field_image",src:n.JN,width:25,height:25,alt:"F"},{type:"field_label",text:(0,a.localize)("4. Restart trading conditions"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"AFTERPURCHASE_STACK",check:"TradeAgain"}],args2:[{type:"field_image",src:" ",width:380,height:10}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("Get the last trade information and result, then trade again."),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,a.localize)("Restart trading conditions"),description:(0,a.localize)("Here is where you can decide if your bot should continue trading.")}},onchange:function(t){(t.type===Blockly.Events.BLOCK_CHANGE||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart)&&this.isCollapsed()&&(0,i.At)(this)},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.after_purchase=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"AFTERPURCHASE_STACK");return"\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        Bot.highlightBlock('".concat(t.id,"');\n        ").concat(e,"\n        Bot.isTradeAgain(false);\n        return false;\n    };")};var l=o(69);Blockly.Blocks.contract_check_result={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Result is {{ win_or_loss }}",{win_or_loss:"%1"}),args0:[{type:"field_dropdown",name:"CHECK_RESULT",options:l.$.lists.CHECK_RESULT}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("True if the result of the last trade matches the selection"),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,a.localize)("Last trade result"),description:(0,a.localize)("You can check the result of the last trade with this block.")}},onchange:function(t){if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()&&(t.type===Blockly.Events.BLOCK_CREATE||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart)){var e=this.getTopParent();e&&e.isMainBlock()&&"after_purchase"!==e.type&&this.setDisabled(!0)}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.contract_check_result=function(t){var e=t.getFieldValue("CHECK_RESULT");return["Bot.isResult('".concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.read_details={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Contract Details: {{ contract_detail }}",{contract_detail:"%1"}),args0:[{type:"field_dropdown",name:"DETAIL_INDEX",options:l.$.lists.DETAILS}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Reads a selected property from contract details list"),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,a.localize)("Contract details"),description:(0,a.localize)("This block gives you information about your last contract.")}},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["after_purchase"]},Blockly.JavaScript.javascriptGenerator.forBlock.read_details=function(t){var e=t.getFieldValue("DETAIL_INDEX");return["Bot.readDetails(".concat(e,")"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.trade_again={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,a.localize)("Trade again"),colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,tooltip:(0,a.localize)("These blocks transfer control to the Purchase conditions block."),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,a.localize)("Trade again"),description:(0,a.localize)("This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract."),key_words:(0,a.localize)("restart")}},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["after_purchase"]},Blockly.JavaScript.javascriptGenerator.forBlock.trade_again=function(){return"\n        Bot.isTradeAgain(true);\n\n        return true;\n\n    "},Blockly.Blocks.before_purchase={init:function(){this.jsonInit(this.definition()),this.setDeletable(!1)},definition:function(){return{message0:"%1 %2 %3",message1:"%1",message2:"%1",args0:[{type:"field_image",src:n.Ov,width:25,height:25,alt:"P"},{type:"field_label",text:(0,a.localize)("2. Purchase conditions"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"BEFOREPURCHASE_STACK",check:"Purchase"}],args2:[{type:"field_image",src:" ",width:380,height:10}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("Specify contract type and purchase conditions."),category:Blockly.Categories.Before_Purchase}},onchange:function(t){(t.type===Blockly.Events.BLOCK_CHANGE||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart)&&this.isCollapsed()&&(0,i.At)(this)},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Purchase conditions"),description:(0,a.localize)("This block is mandatory. Only one copy of this block is allowed. You can place the Purchase block (see below) here as well as conditional blocks to define your purchase conditions.")}}},Blockly.JavaScript.javascriptGenerator.forBlock.before_purchase=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"BEFOREPURCHASE_STACK");return"BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        Bot.highlightBlock('".concat(t.id,"');\n        ").concat(e,"\n    };\n")};var r=o(5905);Blockly.Blocks.purchase={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,a.localize)("Purchase {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],previousStatement:null,colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,tooltip:(0,a.localize)("This block purchases contract of a specified type."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,a.localize)("Purchase"),description:(0,a.localize)("Use this block to purchase the specific contract you want. You may add multiple Purchase blocks together with conditional blocks to define your purchase conditions. This block can only be used within the Purchase conditions block."),key_words:(0,a.localize)("buy")}},onchange:function(t){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)?this.populatePurchaseList(t):t.type===Blockly.Events.BLOCK_CHANGE?"TYPE_LIST"!==t.name&&"TRADETYPE_LIST"!==t.name||this.populatePurchaseList(t):t.type!==Blockly.Events.BLOCK_DRAG||t.isStart||t.blockId!==this.id||""===this.getField("PURCHASE_LIST").menuGenerator_[0][0]&&this.populatePurchaseList(t))},populatePurchaseList:function(t){var e=this.workspace.getTradeDefinitionBlock();if(e){var o=e.getChildByType("trade_definition_tradetype").getFieldValue("TRADETYPE_LIST"),a=e.getChildByType("trade_definition_contracttype").getFieldValue("TYPE_LIST"),n=this.getField("PURCHASE_LIST"),i=n.getValue(),l=(0,r.F)(a,o);n.updateOptions(l,{default_value:i,event_group:t.group,should_pretend_empty:!0})}},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["before_purchase"]},Blockly.JavaScript.javascriptGenerator.forBlock.purchase=function(t){var e=t.getFieldValue("PURCHASE_LIST");return"Bot.purchase('".concat(e,"');\n")},Blockly.Blocks.ask_price={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Ask Price {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block returns the purchase price for the selected trade type."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,a.localize)("Purchase price"),description:(0,a.localize)('This block returns the purchase price for the selected trade type. This block can be used only in the "Purchase conditions" root block.')}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.purchase.onchange,populatePurchaseList:Blockly.Blocks.purchase.populatePurchaseList,enforceLimitations:Blockly.Blocks.purchase.enforceLimitations},Blockly.JavaScript.javascriptGenerator.forBlock.ask_price=function(t){var e=t.getFieldValue("PURCHASE_LIST");return["Bot.getAskPrice('".concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.payout={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Payout {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block returns the potential payout for the selected trade type"),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,a.localize)("Potential payout"),description:(0,a.localize)('This block returns the potential payout for the selected trade type. This block can be used only in the "Purchase conditions" root block.')}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.purchase.onchange,populatePurchaseList:Blockly.Blocks.purchase.populatePurchaseList,enforceLimitations:Blockly.Blocks.purchase.enforceLimitations},Blockly.JavaScript.javascriptGenerator.forBlock.payout=function(t){var e=t.getFieldValue("PURCHASE_LIST");return["Bot.getPayout('".concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.during_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",message1:"%1",message2:"%1",args0:[{type:"field_image",src:n.v_,width:25,height:25,alt:"S"},{type:"field_label",text:(0,a.localize)("3. Sell conditions"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"DURING_PURCHASE_STACK",check:"SellAtMarket"}],args2:[{type:"field_image",src:" ",width:380,height:10}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("Sell your active contract if needed (optional)"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,a.localize)("Sell conditions"),description:(0,a.localize)("Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.")}},onchange:function(t){(t.type===Blockly.Events.BLOCK_CHANGE||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart)&&this.isCollapsed()&&(0,i.At)(this)},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.during_purchase=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"DURING_PURCHASE_STACK");return"BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        Bot.highlightBlock('".concat(t.id,"');\n        ").concat(e,"\n    };\n")},Blockly.Blocks.sell_at_market={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Sell at market price"),colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Use this block to sell your contract at the market price."),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,a.localize)("Sell at market price"),description:(0,a.localize)("Use this block to sell your contract at the market price.")}},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["during_purchase"]},Blockly.JavaScript.javascriptGenerator.forBlock.sell_at_market=function(){return"Bot.sellAtMarket();\n"},Blockly.Blocks.check_sell={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Sell is available"),output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("True if active contract can be sold before expiration at current market price"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,a.localize)("Can contract be sold?"),description:(0,a.localize)("This block helps you check if your contract can be sold. If your contract can be sold, it returns “True”. Otherwise, it returns an empty string.")}},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["during_purchase"]},Blockly.JavaScript.javascriptGenerator.forBlock.check_sell=function(){return["Bot.isSellAvailable()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.sell_price={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Sell profit/loss"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the profit/loss from selling at market price"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,a.localize)("Profit/loss from selling"),description:(0,a.localize)("This block gives you the potential profit or loss if you decide to sell your contract.")}},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["during_purchase"]},Blockly.JavaScript.javascriptGenerator.forBlock.sell_price=function(){return["Bot.getSellPrice()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.bb_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period","std_dev_multiplier_up","std_dev_multiplier_down"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Bollinger Bands {{ band_type }} {{ dummy }}",{variable:"%1",band_type:"%2",dummy:"%3"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"bb"},{type:"field_dropdown",name:"BBRESULT_LIST",options:l.$.bbResult},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Bollinger Bands (BB) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,a.localize)("Bollinger Bands (BB)"),description:(0,a.localize)("BB is a technical analysis indicator that’s commonly used by traders. The idea behind BB is that the market price stays within the upper and lower bands for 95% of the time. The bands are the standard deviations of the market price, while the line in the middle is a simple moving average line. If the price reaches either the upper or lower band, there’s a possibility of a trend reversal.")}},onchange:function(t){var e=this;!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_DRAG||t.isStart||this.getBlocksInStatement("STATEMENT").forEach((function(t){e.required_child_blocks.includes(t.type)||(Blockly.Events.disable(),t.unplug(!1),Blockly.Events.enable())}))},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.bb_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.getFieldValue("BBRESULT_LIST"),a=t.childValueToCode("input_list","INPUT_LIST"),n=t.childValueToCode("period","PERIOD"),i=t.childValueToCode("std_dev_multiplier_up","UPMULTIPLIER"),l=t.childValueToCode("std_dev_multiplier_down","DOWNMULTIPLIER");return"".concat(e," = Bot.bb(").concat(a,", { \n        periods: ").concat(n,", \n        stdDevUp: ").concat(i,", \n        stdDevDown: ").concat(l," \n    }, ").concat(o,");\n")},Blockly.Blocks.bba_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period","std_dev_multiplier_up","std_dev_multiplier_down"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Bollinger Bands Array {{ band_type }} {{ dummy }}",{variable:"%1",band_type:"%2",dummy:"%3"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"bba"},{type:"field_dropdown",name:"BBRESULT_LIST",options:l.$.bbResult},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Bollinger Bands (BB) list from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,a.localize)("Bollinger Bands Array (BBA)"),description:(0,a.localize)("Similar to BB. This block gives you a choice of returning the values of either the lower band, higher band, or the SMA line in the middle.")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.bba_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.getFieldValue("BBRESULT_LIST"),a=t.childValueToCode("input_list","INPUT_LIST"),n=t.childValueToCode("period","PERIOD"),i=t.childValueToCode("std_dev_multiplier_up","UPMULTIPLIER"),l=t.childValueToCode("std_dev_multiplier_down","DOWNMULTIPLIER");return"".concat(e," = Bot.bba(").concat(a,", { \n        periods: ").concat(n,", \n        stdDevUp: ").concat(i,", \n        stdDevDown: ").concat(l," \n    }, ").concat(o,");\n")},Blockly.Blocks.ema_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Exponential Moving Average {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"ema"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Exponential Moving Average (EMA) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,a.localize)("Exponential Moving Average (EMA)"),description:(0,a.localize)("EMA is a type of moving average that places more significance on the most recent data points. It’s also known as the exponentially weighted moving average. EMA is different from SMA in that it reacts more significantly to recent price changes.")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.ema_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.childValueToCode("input_list","INPUT_LIST"),a=t.childValueToCode("period","PERIOD");return"".concat(e," = Bot.ema(").concat(o,", ").concat(a,");\n")},Blockly.Blocks.emaa_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Exponential Moving Average Array {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"emaa"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Exponential Moving Average (EMA) list from a list of values with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,a.localize)("Exponential Moving Average Array (EMAA)"),description:(0,a.localize)("This block is similar to EMA, except that it gives you the entire EMA line based on the input list and the given period.")}},onchange:Blockly.Blocks.bb_statement.onchange,customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.emaa_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.childValueToCode("input_list","INPUT_LIST"),a=t.childValueToCode("period","PERIOD");return"".concat(e," = Bot.emaa(").concat(o,", ").concat(a,");\n")},Blockly.Blocks.rsi_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Relative Strength Index {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"rsi"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Relative Strength Index (RSI) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,a.localize)("Relative Strength Index (RSI)"),description:(0,a.localize)("RSI is a technical analysis tool that helps you identify the market trend. It will give you a value from 0 to 100. An RSI value of 70 and above means that the asset is overbought and the current trend may reverse, while a value of 30 and below means that the asset is oversold.")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.rsi_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.childValueToCode("input_list","INPUT_LIST"),a=t.childValueToCode("period","PERIOD");return"".concat(e," = Bot.rsi(").concat(o,", ").concat(a,");\n")},Blockly.Blocks.rsia_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Relative Strength Index Array {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"rsia"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Relative Strength Index (RSI) list from a list of values with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Relative Strength Index Array (RSIA)"),description:(0,a.localize)("Similar to RSI, this block gives you a list of values for each entry in the input list.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.rsia_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.childValueToCode("input_list","INPUT_LIST"),a=t.childValueToCode("period","PERIOD");return"".concat(e," = Bot.rsia(").concat(o,", ").concat(a,");\n")},Blockly.Blocks.sma_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Simple Moving Average {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"sma"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Simple Moving Average (SMA) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Simple Moving Average (SMA)"),description:(0,a.localize)("SMA is a frequently used indicator in technical analysis. It calculates the average market price over a specified period, and is usually used to identify market trend direction: up or down. For example, if the SMA is moving upwards, it means the market trend is up. ")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.sma_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.childValueToCode("input_list","INPUT_LIST"),a=t.childValueToCode("period","PERIOD");return"".concat(e," = Bot.sma(").concat(o,", ").concat(a,");\n")},Blockly.Blocks.smaa_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to Simple Moving Average Array {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"smaa"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Simple Moving Average line from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,a.localize)("Simple Moving Average Array (SMAA)"),description:(0,a.localize)("Similar to SMA, this block gives you the entire SMA line containing a list of all values for a given period.")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.smaa_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.childValueToCode("input_list","INPUT_LIST"),a=t.childValueToCode("period","PERIOD");return"".concat(e," = Bot.smaa(").concat(o,", ").concat(a,");\n")},Blockly.Blocks.macda_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","fast_ema_period","slow_ema_period","signal_ema_period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to MACD Array {{ dropdown }} {{ dummy }}",{variable:"%1",dropdown:"%2",dummy:"%3"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"macda"},{type:"field_dropdown",name:"MACDFIELDS_LIST",options:l.$.macdFields},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Calculates Moving Average Convergence Divergence (MACD) from a list"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Moving Average Convergence Divergence"),description:(0,a.localize)("MACD is calculated by subtracting the long-term EMA (26 periods) from the short-term EMA (12 periods). If the short-term EMA is greater or lower than the long-term EMA than there’s a possibility of a trend reversal.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.macda_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.getFieldValue("MACDFIELDS_LIST"),a=t.childValueToCode("input_list","INPUT_LIST"),n=t.childValueToCode("fast_ema_period","FAST_EMA_PERIOD"),i=t.childValueToCode("slow_ema_period","SLOW_EMA_PERIOD"),l=t.childValueToCode("signal_ema_period","SIGNAL_EMA_PERIOD");return"".concat(e," = Bot.macda(").concat(a,", { \n        fastEmaPeriod: ").concat(n,",\n        slowEmaPeriod: ").concat(i,",\n        signalEmaPeriod: ").concat(l,",\n    }, ").concat(o,");\n")},Blockly.Blocks.input_list={init:function(){this.jsonInit({message0:(0,a.localize)("Input List {{ input_list }}",{input_list:"%1"}),args0:[{type:"input_value",name:"INPUT_LIST",check:"Array"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(t){var e=this;if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()){var o=function(){var t=e.getSurroundParent();t&&!e.required_parent_id&&e.allowed_parents.includes(t.type)&&(e.required_parent_id=t.id)};if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))o();else if(t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart){o();var a=this.getSurroundParent(),n=!!a,l=!n||a.id!==this.required_parent_id;n&&!l||(0,i.j6)((function(){e.unplug(!0);var t=e.workspace.getAllBlocks().find((function(t){return t.id===e.required_parent_id}));t?t.getLastConnectionInStatement("STATEMENT").connect(e.previousConnection):e.dispose()}))}}},allowed_parents:["bb_statement","bba_statement","ema_statement","emaa_statement","macda_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement"],getRequiredValueInputs:function(){return{INPUT_LIST:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.input_list=function(){},Blockly.Blocks.period={init:function(){this.jsonInit({message0:(0,a.localize)("Period {{ input_period }}",{input_period:"%1"}),args0:[{type:"input_value",name:"PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,customContextMenu:function(t){(0,i.xy)(t)},allowed_parents:["bb_statement","bba_statement","ema_statement","emaa_statement","macda_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement"],getRequiredValueInputs:function(){return{PERIOD:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.period=function(){},Blockly.Blocks.std_dev_multiplier_up={init:function(){this.jsonInit({message0:(0,a.localize)("Standard Deviation Up Multiplier {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"UPMULTIPLIER",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement"],getRequiredValueInputs:function(){return{UPMULTIPLIER:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.std_dev_multiplier_up=function(){},Blockly.Blocks.std_dev_multiplier_down={init:function(){this.jsonInit({message0:(0,a.localize)("Standard Deviation Down Multiplier {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"DOWNMULTIPLIER",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement"],getRequiredValueInputs:function(){return{DOWNMULTIPLIER:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.std_dev_multiplier_down=function(){},Blockly.Blocks.fast_ema_period={init:function(){this.jsonInit({message0:(0,a.localize)("Fast EMA Period {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"FAST_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"],getRequiredValueInputs:function(){return{FAST_EMA_PERIOD:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.fast_ema_period=function(){},Blockly.Blocks.slow_ema_period={init:function(){this.jsonInit({message0:(0,a.localize)("Slow EMA Period {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"SLOW_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"],getRequiredValueInputs:function(){return{SLOW_EMA_PERIOD:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.slow_ema_period=function(){},Blockly.Blocks.signal_ema_period={init:function(){this.jsonInit({message0:(0,a.localize)("Signal EMA Period {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"SIGNAL_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"],getRequiredValueInputs:function(){return{SIGNAL_EMA_PERIOD:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.signal_ema_period=function(){},Blockly.Blocks.tick={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Last Tick"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the value of the last tick"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Last tick"),description:(0,a.localize)("This block gives you the value of the last tick.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.Blocks.tick_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Last Tick String"),output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the value of the latest tick in string format"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Tick value"),description:(0,a.localize)("Tick value Description")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.tick.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.tick=function(t){var e=t.getParent();return["Bot.getLastTick(false, ".concat(["notify","text_print"].includes(null==e?void 0:e.type),")"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.JavaScript.javascriptGenerator.forBlock.tick_string=function(){return["Bot.getLastTick(false, true)",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.ticks={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Ticks list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you a list of the last 1000 tick values."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Tick list"),description:(0,a.localize)("This block gives you a list of the last 1000 tick values.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.Blocks.ticks_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Ticks String List"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the list of tick values in string format"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Tick List String"),description:(0,a.localize)("Tick List String Description")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:Blockly.Blocks.ticks.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.ticks=function(t){var e=t.getParent();return["Bot.getTicks(".concat(["notify","text_print"].includes(null==e?void 0:e.type),")"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.JavaScript.javascriptGenerator.forBlock.ticks_string=function(){return["Bot.getTicks(true)",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Candles List with interval here 2: {{ candle_interval_type }}",{candle_interval_type:"%1"}),args0:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:l.$.candleIntervals}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you a list of candles within a selected time interval."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Get candle list"),description:(0,a.localize)("This block gives you a list of candles within a selected time interval.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.ohlc=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST");return["Bot.getOhlc({ granularity: ".concat("default"===e?"undefined":e," })"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.ohlc_values={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Make a List of {{ candle_property }} values in candles list with interval: {{ candle_interval_type }}",{candle_property:"%1",candle_interval_type:"%2"}),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:l.$.ohlcFields},{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:l.$.candleIntervals}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns a list of specific values from a candle list according to selected time interval"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Create a list of candle values (1)"),description:(0,a.localize)("This block gives you the selected candle value from a list of candles within the selected time interval.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.ohlc_values=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST"),o="default"===e?"undefined":e,a=t.getFieldValue("OHLCFIELD_LIST");return["Bot.getOhlc({ field: '".concat(a,"', granularity: ").concat(o," })"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.read_ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("In candles list read {{ candle_property }} # from end {{ input_number }}",{candle_property:"%1",input_number:"%2"}),message1:(0,a.localize)("with interval: %1"),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:l.$.ohlcFields},{type:"input_value",name:"CANDLEINDEX",check:"Number"}],args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:l.$.candleIntervals}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Read the selected candle value"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Read candle value (1)"),description:(0,a.localize)("This block gives you the specified candle value for a selected time interval.")}},getRequiredValueInputs:function(){return{CANDLEINDEX:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.read_ohlc=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST"),o="default"===e?"undefined":e,a=t.getFieldValue("OHLCFIELD_LIST"),n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"CANDLEINDEX",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"1";return["Bot.getOhlcFromEnd({ field: '".concat(a,"', index: ").concat(n,", granularity: ").concat(o," })"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.get_ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("in candle list get # from end {{ input_number }}",{input_number:"%1"}),message1:(0,a.localize)("with interval: {{ candle_interval_type }}",{candle_interval_type:"%1"}),args0:[{type:"input_value",name:"CANDLEINDEX",check:"Number"}],args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:l.$.candleIntervals}],output:"Candle",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you a specific candle from within the selected time interval."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Get candle"),description:(0,a.localize)("This block gives you a specific candle from within the selected time interval.")}},getRequiredValueInputs:function(){return{CANDLEINDEX:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.get_ohlc=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST"),o="default"===e?"undefined":e,a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"CANDLEINDEX",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"1";return["Bot.getOhlcFromEnd({ index: ".concat(a,", granularity: ").concat(o," })"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.check_direction={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Direction is {{ direction_type }}",{direction_type:"%1"}),args0:[{type:"field_dropdown",name:"CHECK_DIRECTION",options:l.$.lists.CHECK_DIRECTION}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("True if the market direction matches the selection"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Market direction"),description:(0,a.localize)("This block is used to determine if the market price moves in the selected direction or not. It gives you a value of “True” or “False”.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.check_direction=function(t){var e=t.getFieldValue("CHECK_DIRECTION");return["Bot.checkDirection('".concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.tick_analysis={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"field_label",text:(0,a.localize)("The content of this block is called on every tick"),class:"blocklyTextTickAnalysis"},{type:"input_dummy"},{type:"input_statement",name:"TICKANALYSIS_STACK",check:null}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("You can use this block to analyze the ticks, regardless of your trades"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Run on every tick"),description:(0,a.localize)("The content of this block is called on every tick. Place this block outside of any root block.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.tick_analysis=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"TICKANALYSIS_STACK")||"";return"\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        ".concat(e,"\n    });\n")},Blockly.Blocks.last_digit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Last Digit"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the last digit of the latest tick"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Last Digit"),description:(0,a.localize)("This block gives you the last digit of the latest tick value.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.last_digit=function(){return["Bot.getLastDigit()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.lastDigitList={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Last digits list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the list of last digits of 1000 recent tick values"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Last Digits List"),description:(0,a.localize)("This block gives you a list of the last digits of the last 1000 tick values.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.lastDigitList=function(){return["Bot.getLastDigitList()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.stat={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Current Stat"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the Current Stat"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Current Stat"),description:(0,a.localize)("This block gives you the Current Stat value.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.stat=function(){return["Bot.getCurrentStat()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.stat_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Current stat list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the list of last digits of 1000 recent tick values"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,a.localize)("Current stat list"),description:(0,a.localize)("This block gives you a list of the cuurent stats of the last 1000 tick values.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.stat_list=function(){return["Bot.getStatList()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.is_candle_black={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Is candle {{ input_candle }} black?",{input_candle:"%1"}),args0:[{type:"input_value",name:"OHLCOBJ",check:"Candle"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)('Returns "True" if the given candle is black'),category:Blockly.Categories.Candle}},meta:function(){return{display_name:(0,a.localize)("Is candle black?"),description:(0,a.localize)("This block returns “True” if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.")}},customContextMenu:function(t){(0,i.xy)(t)},getRequiredValueInputs:function(){return{OHLCOBJ:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.is_candle_black=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"OHLCOBJ",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"{}";return["Bot.isCandleBlack(".concat(e,")"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.ohlc_values_in_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Make a list of {{ candle_property }} values from candles list {{ candle_list }}",{candle_property:"%1",candle_list:"%2"}),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:l.$.ohlcFields},{type:"input_value",name:"OHLCLIST"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns a list of specific values from a given candle list"),category:Blockly.Categories.Candle}},meta:function(){return{display_name:(0,a.localize)("Create a list of candle values (2)"),description:(0,a.localize)("This block gives you the selected candle value from a list of candles.")}},getRequiredValueInputs:function(){return{OHLCLIST:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.ohlc_values_in_list=function(t){var e=t.getFieldValue("OHLCFIELD_LIST")||"open",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"OHLCLIST",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"[]";return["Bot.candleValues(".concat(o,", '").concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.read_ohlc_obj={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Read {{ candle_property }} value in candle {{ input_candle }}",{candle_property:"%1",input_candle:"%2"}),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:l.$.ohlcFields},{type:"input_value",name:"OHLCOBJ"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you the selected candle value."),category:Blockly.Categories.Candle}},meta:function(){return{display_name:(0,a.localize)("Read candle value (2)"),description:(0,a.localize)("This block gives you the selected candle value.")}},getRequiredValueInputs:function(){return{OHLCOBJ:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.read_ohlc_obj=function(t){var e=t.getFieldValue("OHLCFIELD_LIST"),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"OHLCOBJ",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"{}";return["Bot.candleField(".concat(o,", '").concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.balance={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("BALANCE_TYPE").setValidator((function(e){"STR"===e?t.setOutput(!0,"String"):"NUM"===e&&t.setOutput(!0,"Number"),t.initSvg()}))},definition:function(){return{message0:(0,a.localize)("Balance: %1"),args0:[{type:"field_dropdown",name:"BALANCE_TYPE",options:l.$.lists.BALANCE_TYPE}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block returns account balance"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,a.localize)("Account balance"),description:(0,a.localize)("This block gives you the balance of your account either as a number or a string of text.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.balance=function(t){var e=t.getFieldValue("BALANCE_TYPE");return["Bot.getBalance('".concat(e,"')"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.barrier_offset={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"BARRIEROFFSET_IN",options:l.$.BARRIER_TYPES}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Adds a sign to a number to create a barrier offset. (deprecated)"),category:Blockly.Categories.Miscellaneous})},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.barrier_offset=function(){},Blockly.Blocks.block_holder={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"field_label",text:"Ignore",class:"blocklyTextRootBlockHeader"},{type:"input_dummy"},{type:"input_statement",name:"USELESS_STACK",check:null}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("Put your blocks in here to prevent them from being removed"),category:Blockly.Categories.Miscellaneous}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Ignore"),description:(0,a.localize)("Use this block if you want some instructions to be ignored when your bot runs. Instructions within this block won’t be executed.")}}},Blockly.JavaScript.javascriptGenerator.forBlock.block_holder=function(){return""};var c=o(1575),s=o(1951);Blockly.Blocks.loader={init:function(){this.blocks_added_by_me=[],this.current_url="",this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Load block from URL: {{ input_url }}",{input_url:"%1"}),args0:[{type:"field_input",name:"URL",text:"http://www.example.com/block.xml"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Loads blocks from URL"),category:Blockly.Categories.Miscellaneous}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Loads from URL"),description:(0,a.localize)("This block allows you to load blocks from a URL if you have them stored on a remote server, and they will be loaded only when your bot runs.")}},onchange:function(t){var e=this;this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)?(this.current_url=this.getFieldValue("URL"),this.workspace.getAllBlocks().filter((function(t){return"loader"===t.type})).forEach((function(t){t.id!==e.id&&t.current_url===e.current_url&&e.setDisabled(!0)})),this.disabled||this.loadBlocksFromCurrentUrl()):t.type===Blockly.Events.BLOCK_CHANGE&&t.blockId===this.id&&t.newValue&&t.oldValue!==t.newValue&&(t.newValue===this.current_url?this.setDisabled(!1):this.isValidUrl(t.newValue)&&!this.isKnownUrl(t.newValue)?(this.setDisabled(!1),this.loadBlocksFromCurrentUrl()):this.setDisabled(!0)))},loadBlocksFromCurrentUrl:function(){var t=this;this.current_url=this.getFieldValue("URL"),(0,i.j6)((function(){t.blocks_added_by_me.forEach((function(t){return t.dispose()}))})),(0,i.Lv)(this).then((function(){c.P.emit("ui.log.success",{log_type:s.Uk.LOAD_BLOCK})})).catch((function(e){c.P.emit("ui.log.error",e),t.setDisabled(!0)}))},isKnownUrl:function(t){var e=this;return this.workspace.getAllBlocks().filter((function(t){return"loader"===t.type})).some((function(o){return o.id!==e.id&&o.current_url===t}))},isValidUrl:function(t){return String(t).match(/[^/]*\.[a-zA-Z]{3}$/)}},Blockly.JavaScript.javascriptGenerator.forBlock.loader=function(){},Blockly.Blocks.notify={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Notify {{ notification_type }} with sound: {{ notification_sound }} {{ input_message }}",{notification_type:"%1",notification_sound:"%2",input_message:"%3"}),args0:[{type:"field_dropdown",name:"NOTIFICATION_TYPE",options:l.$.lists.NOTIFICATION_TYPE},{type:"field_dropdown",name:"NOTIFICATION_SOUND",options:l.$.lists.NOTIFICATION_SOUND},{type:"input_value",name:"MESSAGE",check:null}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Displays a notification and optionally play selected sound"),category:Blockly.Categories.Miscellaneous}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Notify"),description:(0,a.localize)("This block displays a message. You can specify the color of the message and choose from 6 different sound options.")}},getRequiredValueInputs:function(){return{MESSAGE:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.notify=function(t){var e=t.getFieldValue("NOTIFICATION_TYPE"),o=t.getFieldValue("NOTIFICATION_SOUND"),n=t.getInputTargetBlock("MESSAGE"),i=null;if("variables_get"===n.type){var l=n.getFieldValue("VAR");i=Blockly.derivWorkspace.getVariableById(l).name}var r=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"MESSAGE",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||'"'.concat((0,a.localize)("<empty message>"),'"');return"Bot.notify({ className: 'journal__text--".concat(e,"', message: ").concat(r,", sound: '").concat(o,"', block_id: '").concat(t.id,"', variable_name: '").concat(i,"' });\n")},Blockly.Blocks.notify_telegram={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Notify Telegram %1 Access Token: %2 Chat ID: %3 Message: %4"),args0:[{type:"input_dummy"},{type:"input_value",name:"TELEGRAM_ACCESS_TOKEN"},{type:"input_value",name:"TELEGRAM_CHAT_ID"},{type:"input_value",name:"TELEGRAM_MESSAGE"}],inputsInline:!0,colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Sends a message to Telegram"),category:Blockly.Categories.Miscellaneous}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Notify Telegram"),description:(0,a.localize)("This block sends a message to a Telegram channel.")}},getRequiredValueInputs:function(){return{TELEGRAM_ACCESS_TOKEN:i.PZ,TELEGRAM_CHAT_ID:i.PZ,TELEGRAM_MESSAGE:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.notify_telegram=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TELEGRAM_ACCESS_TOKEN",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TELEGRAM_CHAT_ID",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TELEGRAM_MESSAGE",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"";return e&&o&&a?"Bot.notifyTelegram(".concat(e,", ").concat(o,", ").concat(a,");\n"):""},Blockly.Blocks.total_profit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Total profit/loss"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the total profit/loss"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,a.localize)("Total profit/loss"),description:(0,a.localize)("This block gives you the total profit/loss of your trading strategy since your bot started running. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.")}},onchange:function(t){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||(t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart||t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))&&"INITIALIZATION"===this.getRootInputTargetBlock()&&this.unplug(!0)},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.Blocks.total_profit_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Total Profit String"),output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the total profit in string format"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,a.localize)("Total Profit String"),description:(0,a.localize)("Total Profit String Description")}},onchange:Blockly.Blocks.total_profit.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.total_profit=function(){return["Bot.getTotalProfit(false)",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.JavaScript.javascriptGenerator.forBlock.total_profit_string=function(){return["Bot.getTotalProfit(true)",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.total_runs={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Number of runs"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the number of runs"),category:Blockly.Categories.Miscellaneous}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Number of runs"),description:(0,a.localize)("This block gives you the total number of times your bot has run. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.")}},onchange:Blockly.Blocks.total_profit.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.total_runs=function(){return["Bot.getTotalRuns()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.useless_block={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_label",text:(0,a.localize)("Conversion Helper Block"),class:"blocklyTextRootBlockHeader"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("This block was required to correctly convert your old strategy."),category:Blockly.Categories.Miscellaneous,nextStatement:null,previousStatement:null})},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.useless_block=function(){},Blockly.Blocks.console={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Console {{ message_type }} value: {{ input_message }}",{message_type:"%1",input_message:"%2"}),args0:[{type:"field_dropdown",name:"CONSOLE_TYPE",options:[[(0,a.localize)("Log"),"log"],[(0,a.localize)("Warn"),"warn"],[(0,a.localize)("Error"),"error"],[(0,a.localize)("Table"),"table"]]},{type:"input_value",name:"MESSAGE",check:null}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Display messages in the developer’s console."),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,a.localize)("Console"),description:(0,a.localize)("This block displays messages in the developer's console with an input that can be either a string of text, a number, boolean, or an array of data.")}},getRequiredValueInputs:function(){return{MESSAGE:i.PZ}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.console=function(t){var e=t.getFieldValue("CONSOLE_TYPE")||"log",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"MESSAGE",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||'"'.concat((0,a.localize)("<empty message>"),'"');return"Bot.console({ type: '".concat(e,"', message: ").concat(o,"});\n")},Blockly.Blocks.epoch={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Seconds Since Epoch"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the number of seconds since January 1st, 1970"),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,a.localize)("Second Since Epoch"),description:(0,a.localize)("This block returns the number of seconds since January 1st, 1970.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.epoch=function(){return["Bot.getTime()",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.timeout={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("{{ dummy }} {{ stack_input }} Run after {{ number }} second(s)",{dummy:"%1",stack_input:"%2",number:"%3"}),args0:[{type:"input_dummy"},{type:"input_statement",name:"TIMEOUTSTACK"},{type:"input_value",name:"SECONDS"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Run the blocks inside after a given number of seconds"),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,a.localize)("Delayed run"),description:(0,a.localize)("This block delays execution for a given number of seconds. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.")}},customContextMenu:function(t){(0,i.xy)(t)},getRequiredValueInputs:function(){return{SECONDS:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.timeout=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"TIMEOUTSTACK"),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"SECONDS",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"1";return"sleep(".concat(o,");\n").concat(e,"\n")},Blockly.Blocks.todatetime={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("To date/time {{ input_timestamp }} {{ dummy }}",{input_timestamp:"%1",dummy:"%2"}),args0:[{type:"input_value",name:"TIMESTAMP",check:"Number"},{type:"input_dummy"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time."),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,a.localize)("Convert to date/time"),description:(0,a.localize)("This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.")}},getRequiredValueInputs:function(){return{TIMESTAMP:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.todatetime=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TIMESTAMP",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC),o="".concat((0,a.localize)("Invalid timestamp"),":"),n=Blockly.JavaScript.javascriptGenerator.provideFunction_("timestampToDateString",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,'(timestamp) {\n            var datetime = new Date(timestamp * 1000);\n\n            if (!datetime.getTime()) {\n                return "').concat(o," \" + timestamp;\n            }\n\n            var getTwoDigitValue = function(input) {\n                return input < 10 ? '0' + input : input;\n            }\n\n            var year    = datetime.getFullYear();\n            var month   = getTwoDigitValue(datetime.getMonth() + 1);\n            var day     = getTwoDigitValue(datetime.getDate());\n            var hours   = getTwoDigitValue(datetime.getHours());\n            var minutes = getTwoDigitValue(datetime.getMinutes());\n            var seconds = getTwoDigitValue(datetime.getSeconds());\n\n            var formatGmtOffset = function() {\n                var gmt_offset_raw = datetime.getTimezoneOffset();\n                var sign           = gmt_offset_raw > 0 ? '-' : '+';\n                var gmt_offset     = Math.abs(gmt_offset_raw);\n                var hour           = Math.floor(gmt_offset / 60);\n                var minute         = gmt_offset - hour * 60;\n\n                return 'GMT' + sign + getTwoDigitValue(hour) + getTwoDigitValue(minute);\n            }\n\n            var date_string = year + '-' + month + '-' + day;\n            var time_string = hours + ':' + minutes + ':' + seconds;\n\n            return date_string + ' ' + time_string + ' ' + formatGmtOffset();\n        }")]);return["".concat(n,"(").concat(e,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.totimestamp={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("To timestamp {{ input_datetime }} {{ dummy }}",{input_datetime:"%1",dummy:"%2"}),args0:[{type:"input_value",name:"DATETIME"},{type:"input_dummy"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Converts a string representing a date/time string into seconds since Epoch. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825. Time and time zone offset are optional."),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,a.localize)("Convert to timestamp"),description:(0,a.localize)("This block converts a string of text that represents the date and time into seconds since the Unix Epoch (1 January 1970). The time and time zone offset are optional. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825.")}},customContextMenu:function(t){(0,i.xy)(t)},getRequiredValueInputs:function(){return{DATETIME:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.totimestamp=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DATETIME",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC);return["Bot.dateTimeStringToTimestamp(".concat(e,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]};var u=o(3129);Blockly.Blocks.tick_delay={init:function(){this.jsonInit(this.definition());var t=u.A.instance.client;t&&t.is_logged_in&&(this.workspace_to_code=Blockly.JavaScript.javascriptGenerator.workspaceToCode(Blockly.derivWorkspace))},definition:function(){return{message0:(0,a.localize)("{{ stack_input }} Run after {{ number }} tick(s)",{stack_input:"%1",number:"%2"}),args0:[{type:"input_statement",name:"TICKDELAYSTACK"},{type:"input_value",name:"TICKDELAYVALUE"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Run the blocks inside after a given number of ticks"),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,a.localize)("Tick Delayed run"),description:(0,a.localize)("This block delays execution for a given number of ticks. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.")}},customContextMenu:function(t){(0,i.xy)(t)},getRequiredValueInputs:function(){var t=this;return{TICKDELAYVALUE:function(e){var o=(0,i.O4)(e);return"invalid_input"===o?!(t.workspace_to_code&&t.workspace_to_code.includes(e)||(t.error_message=(0,a.localize)("Invalid Input {{ input_value }}.",{input_value:e}),0)):o<0?(t.error_message=(0,a.localize)("Values cannot be negative. Provided value: {{ input_value }}.",{input_value:e}),!0):void 0}}}},Blockly.JavaScript.javascriptGenerator.forBlock.tick_delay=function(t){var e=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"TICKDELAYSTACK"),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TICKDELAYVALUE",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"1";return"Bot.getDelayTickValue(".concat(o,")\n").concat(e,"\n")};var p=o(511);Blockly.Blocks.trade_definition={init:function(){this.jsonInit(this.definition()),this.setDeletable(!1),this.isInit=!1},definition:function(){return{message0:"%1 %2 %3",message1:"%1",message2:"%1 %2 %3",message3:"%1",message4:"%1 %2 %3",message5:"%1",message6:"%1",args0:[{type:"field_image",src:n.ye,width:25,height:25,alt:"T"},{type:"field_label",text:(0,a.localize)("1. Trade parameters"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"TRADE_OPTIONS"}],args2:[{type:"field_image",src:" ",width:4,height:25},{type:"field_label",text:(0,a.localize)("Run once at start:"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args3:[{type:"input_statement",name:"INITIALIZATION",check:null}],args4:[{type:"field_image",src:" ",width:4,height:25},{type:"field_label",text:(0,a.localize)("Trade options:"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args5:[{type:"input_statement",name:"SUBMARKET"}],args6:[{type:"field_image",src:" ",width:380,height:10}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,a.localize)("Here is where you define the parameters of your contract."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,a.localize)("Trade parameters"),description:(0,a.localize)("Here is where you define the parameters of your contract."),key_words:(0,a.localize)("market, trade type, contract type")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:function(t){var e=this;if(t.type!==Blockly.Events.SELECTED||this.isInit?null===Blockly.getSelected()&&this.isInit&&(this.isInit=!1,(0,p.Gi)("keydown")):(this.isInit=!0,(0,p.K3)("keydown")),this.workspace&&!this.workspace.isDragging()&&!Blockly.derivWorkspace.isFlyoutVisible&&(t.type===Blockly.Events.BLOCK_CHANGE||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart)){var o=this.getBlocksInStatement("TRADE_OPTIONS");o.length>0?o.forEach((function(t){/^trade_definition_.+$/.test(t.type)||(0,i.j6)((function(){t.unplug(!0)}))})):(0,i.j6)((function(){e.dispose()})),this.isCollapsed()&&(0,i.At)(this)}}},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition=function(t){var e=u.A.instance.client;if(!e||!e.is_logged_in)throw new Error("Please login");var o=e.loginid,a=e.getToken(o),n=t.getChildByType("trade_definition_market"),i=t.getChildByType("trade_definition_tradetype"),r=t.getChildByType("trade_definition_contracttype"),c=t.getChildByType("trade_definition_candleinterval"),s=t.getChildByType("trade_definition_restartonerror"),p=t.getChildByType("trade_definition_restartbuysell"),d=n.getFieldValue("SYMBOL_LIST"),y=i.getFieldValue("TRADETYPE_LIST"),B=r.getFieldValue("TYPE_LIST"),k=c.getFieldValue("CANDLEINTERVAL_LIST"),m="FALSE"!==s.getFieldValue("RESTARTONERROR"),v="FALSE"!==p.getFieldValue("TIME_MACHINE_ENABLED"),f=l.$.opposites,_="both"===B?f[y.toUpperCase()].map((function(t){return Object.keys(t)[0]})):[B],h=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"INITIALIZATION"),g=Blockly.JavaScript.javascriptGenerator.statementToCode(t,"SUBMARKET");return"  \n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('".concat(a,"', {\n          symbol              : '").concat(d,"',\n          contractTypes       : ").concat(JSON.stringify(_),",\n          candleInterval      : '").concat(k||"FALSE","',\n          shouldRestartOnError: ").concat(m,",\n          timeMachineEnabled  : ").concat(v,",\n        });\n        ").concat(h.trim(),"\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        BinaryBotPrivateHasCalledTradeOptions = false;\n        Bot.highlightBlock('").concat(t.id,"');\n        ").concat(g.trim(),"\n      };\n")};var d=o(3191);function y(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return B(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?B(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,a=Array(e);o<e;o++)a[o]=t[o];return a}Blockly.Blocks.trade_definition_market={init:function(){this.jsonInit({message0:(0,a.localize)("Market: {{ input_market }} > {{ input_submarket }} > {{ input_symbol }}",{input_market:"%1",input_submarket:"%2",input_symbol:"%3"}),args0:[{type:"field_dropdown",name:"MARKET_LIST",options:[["",""]]},{type:"field_dropdown",name:"SUBMARKET_LIST",options:[["",""]]},{type:"field_dropdown",name:"SYMBOL_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},customContextMenu:function(t){(0,i.xy)(t)},onchange:function(t){var e=-1!==["BLOCK_CREATE","BLOCK_CHANGE","BLOCK_DRAG"].findIndex((function(e){return t.type===Blockly.Events[e]}));if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()&&e){this.enforceLimitations();var o=d.A.instance.active_symbols,a=this.getField("MARKET_LIST"),n=this.getField("SUBMARKET_LIST"),i=this.getField("SYMBOL_LIST"),l=a.getValue(),r=n.getValue(),c=i.getValue(),s=o.getMarketDropdownOptions().filter((function(t){return"cryptocurrency"!==t[1]})),u=function(){null==a||a.updateOptions(s,{default_value:l,should_pretend_empty:!0,event_group:t.group})};t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)?u():t.type===Blockly.Events.BLOCK_CHANGE&&t.blockId===this.id?"MARKET_LIST"===t.name?n.updateOptions(o.getSubmarketDropdownOptions(l),{default_value:r,should_pretend_empty:!0,event_group:t.group}):"SUBMARKET_LIST"===t.name&&i.updateOptions(o.getSymbolDropdownOptions(r),{default_value:c,should_pretend_empty:!0,event_group:t.group}):t.type!==Blockly.Events.BLOCK_DRAG||t.isStart||t.blockId!==this.getRootBlock().id||(a.isEmpty()||n.isEmpty()||i.isEmpty())&&u()}},enforceLimitations:function(){var t=this;(0,i.j6)((function(){if(t.isDescendantOf("trade_definition"))t.disabled&&t.setDisabled(!1);else{t.unplug(!1);var e=t.workspace.getTopBlocks().find((function(t){return"trade_definition"===t.type}));e?e.getLastConnectionInStatement("TRADE_OPTIONS").connect(t.previousConnection):t.dispose()}}))}},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_market=function(){},Blockly.Blocks.trade_definition_tradetype={init:function(){this.jsonInit({message0:(0,a.localize)("Trade Type: {{ trade_type_category }} > {{ trade_type }}",{trade_type_category:"%1",trade_type:"%2"}),args0:[{type:"field_dropdown",name:"TRADETYPECAT_LIST",options:[["",""]]},{type:"field_dropdown",name:"TRADETYPE_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},customContextMenu:function(t){(0,i.xy)(t)},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradetype=function(){},Blockly.Blocks.trade_definition_contracttype={init:function(){this.jsonInit({message0:(0,a.localize)("Contract Type: {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"TYPE_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,tooltip:(0,a.localize)('If the contract type is “Both”, then the Purchase Conditions should include both Rise and Fall using the “Conditional Block"'),previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(t){if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()){this.enforceLimitations();var e=/^dbot-load/.test(t.group);if(t.type===Blockly.Events.BLOCK_CHANGE&&"TRADETYPE_LIST"===t.name){var o=t.newValue,n=this.getField("TYPE_LIST"),i=[],c=(0,r.F)("both",o);c.length>1&&i.push([(0,a.localize)("Both"),"both"]),i.push.apply(i,y(c)),0===i.length&&i.push.apply(i,y(l.$.NOT_AVAILABLE_DROPDOWN_OPTIONS)),n.updateOptions(i,{event_group:t.group,default_value:e?n.getValue():void 0})}}},customContextMenu:function(t){(0,i.xy)(t)},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_contracttype=function(){return""},Blockly.Blocks.trade_definition_candleinterval={init:function(){this.jsonInit({message0:(0,a.localize)("Default Candle Interval: {{ candle_interval_type }}",{candle_interval_type:"%1"}),args0:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:l.$.candleIntervals.slice(1)}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||this.enforceLimitations()},customContextMenu:function(t){(0,i.xy)(t)},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_candleinterval=function(){},Blockly.Blocks.trade_definition_restartbuysell={init:function(){var t=this;this.jsonInit({message0:(0,a.localize)("Restart buy/sell on error (disable for better performance): {{ checkbox }}",{checkbox:"%1"}),args0:[{type:"field_checkbox",name:"TIME_MACHINE_ENABLED",checked:!1,class:"blocklyCheckbox"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1),this.setOnChange((function(){var e=null==t?void 0:t.getNextBlock();"trade_definition_restartonerror"!==(null==e?void 0:e.type)&&(null==e||e.unplug(!0))}))},onchange:function(){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||this.enforceLimitations()},customContextMenu:function(t){(0,i.xy)(t)},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations,required_inputs:["TIME_MACHINE_ENABLED"]},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_restartbuysell=function(){},Blockly.Blocks.trade_definition_restartonerror={init:function(){this.jsonInit({message0:(0,a.localize)("Restart last trade on error (bot ignores the unsuccessful trade): {{ checkbox }}",{checkbox:"%1"}),args0:[{type:"field_checkbox",name:"RESTARTONERROR",checked:!0,class:"blocklyCheckbox"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setNextStatement(!1),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||this.enforceLimitations()},customContextMenu:function(t){(0,i.xy)(t)},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations,required_inputs:["RESTARTONERROR"]},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_restartonerror=function(){};var k=o(6464);Blockly.Blocks.trade_definition_tradeoptions={durations:[],init:function(){this.jsonInit(this.definition()),this.setInputsInline(!0),this.setNextStatement(!1)},definition:function(){var t="trade_definition_tradeoptions"===this.type;return{message0:(0,a.localize)("Duration: {{ duration_unit }} {{ duration_value }}",{duration_unit:"%1",duration_value:"%2"}),message1:"".concat(t?(0,a.localize)("Stake"):(0,a.localize)("Payout"),": %1 %2 %3"),args0:[{type:"field_dropdown",name:"DURATIONTYPE_LIST",options:[["",""]]},{type:"input_value",name:"DURATION",check:"Number"}],args1:[{type:"field_label",name:"CURRENCY_LIST",text:(0,k.getCurrencyDisplayCode)(l.$.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"},{type:"field_label",name:"AMOUNT_LIMITS",text:""}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Define your trade options such as duration and stake."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,a.localize)("Trade options"),description:(0,a.localize)("Define your trade options such as duration and stake. Some options are only applicable for certain trade types.")}},customContextMenu:function(t){(0,i.xy)(t)},onchange:function(t){if("change"===t.type){var e,o=this.workspace.getBlockById(t.blockId);null==o||null===(e=o.parentBlock_)||void 0===e||e.inputList.filter((function(t){return["DURATION","AMOUNT"].includes(t.name)})).forEach((function(t){var e,o=t.connection.targetBlock(),a=null===(e=o.getFieldValue("NUM"))||void 0===e?void 0:e.toString();if(null!=a&&a.startsWith("0")){var n=a.includes(".")?parseFloat("".concat(a)):parseInt("".concat(a));o.setFieldValue(n.toString(),"NUM")}}))}if(this.workspace&&!this.workspace.isDragging()&&!Blockly.derivWorkspace.isFlyoutVisible){var a=this.workspace.getAllBlocks(!0).find((function(t){return"trade_definition"===t.type}));if(a){var n=a.getChildByType("trade_definition_market"),r=a.getChildByType("trade_definition_tradetype");if(n&&r){this.selected_symbol=n.getFieldValue("SYMBOL_LIST"),this.selected_market=n.getFieldValue("MARKET_LIST"),this.selected_trade_type_category=r.getFieldValue("TRADETYPECAT_LIST"),this.selected_trade_type=r.getFieldValue("TRADETYPE_LIST"),this.selected_duration=this.getFieldValue("DURATIONTYPE_LIST"),this.selected_barrier_types=[this.getFieldValue("BARRIEROFFSETTYPE_LIST")||l.$.BARRIER_TYPES[0][1],this.getFieldValue("SECONDBARRIEROFFSETTYPE_LIST")||l.$.BARRIER_TYPES[1][1]],(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart)&&((0,i.MN)(this),this.updateAmountLimits());var c=/^dbot-load/.test(t.group);if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))c?(this.updateBarrierInputs(!1,!1),this.updateDurationInput(!1,!1),this.updatePredictionInput(!1),this.updateAmountLimits()):(this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType("BARRIEROFFSETTYPE_LIST",!0),this.updateDurationInput(!0,!0),this.updatePredictionInput(!0));else if(t.type===Blockly.Events.BLOCK_CHANGE)if(c)"TRADETYPE_LIST"===t.name&&(this.updateBarrierInputs(!1,!1),this.enforceSingleBarrierType(t.name,!0),this.updateDurationInput(!1,!1),this.updatePredictionInput(!1));else if(t.blockId===this.id)switch(t.name){case"DURATIONTYPE_LIST":this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType("BARRIEROFFSETTYPE_LIST",!0),this.updateDurationInput(!1,!0);break;case"BARRIEROFFSETTYPE_LIST":case"SECONDBARRIEROFFSETTYPE_LIST":this.updateBarrierInputs(!1,!0),this.enforceSingleBarrierType(t.name,!1)}else"SYMBOL_LIST"!==t.name&&"TRADETYPE_LIST"!==t.name||(this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType(t.name,!0),this.updateDurationInput(!0,!0),this.updatePredictionInput(!0),this.updateAmountLimits());else if(t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart&&t.blockId===this.id)if(this.selected_duration)"multiplier"===this.selected_trade_type&&this.updateDurationInput(!1,!1);else{var s=new Blockly.Events.BlockCreate(this);s.recordUndo=!1,Blockly.Events.fire(s)}}}}},createPredictionInput:function(t){var e=this;(0,i.j6)((function(){if(0===t.length)e.removeInput("PREDICTION_LABEL",!0),e.removeInput("PREDICTION",!0);else if(!e.getInput("PREDICTION")){e.appendDummyInput("PREDICTION_LABEL").appendField((0,a.localize)("Prediction:"));var o=e.appendValueInput("PREDICTION"),n=e.workspace.newBlock("math_number_positive");n.setInputsInline(!0),n.setShadow(!0),n.setFieldValue(t[0],"NUM"),n.outputConnection.connect(o.connection),n.initSvg(),n.renderEfficiently()}}))},createBarrierInputs:function(t){var e=this;(0,i.j6)((function(){for(var o=["BARRIEROFFSET","SECONDBARRIEROFFSET"],n=0;n<t.values.length;n++){var i=1===t.values.length?(0,a.localize)("Barrier"):l.$.BARRIER_LABELS[n],r=e.getInput(o[n]);if(r)r.fieldRow[0].setText(i);else{r=e.appendValueInput(o[n]).appendField(i,"".concat(o[n],"_LABEL")).appendField(new Blockly.FieldDropdown(l.$.BARRIER_TYPES),"".concat(o[n],"TYPE_LIST"));var c=e.workspace.newBlock("math_number_positive");c.setInputsInline(!0),c.setShadow(!0),c.setFieldValue(t.values[n],"NUM"),c.outputConnection.connect(r.connection),c.initSvg(),c.renderEfficiently()}}for(var s=o.length;s>t.values.length;s--)e.removeInput(o[s-1],!0)}))},updateAmountLimits:function(){var t=this,e=d.A.instance.account_limits,o=u.A.instance.client,n=o.currency,l=o.landing_company_shortcode;e.getStakePayoutLimits(n,l,this.selected_market).then((function(e){if(t.getField("AMOUNT_LIMITS")){t.amount_limits=e;var o=e.max_payout,n=e.min_stake;o&&n&&"multiplier"!==t.selected_trade_type&&(0,i.j6)((function(){t.setFieldValue((0,a.localize)("(min: {{min_stake}} - max: {{max_payout}})",{min_stake:n,max_payout:o}),"AMOUNT_LIMITS")}))}}))},updateDurationInput:function(t,e){var o=this,a=d.A.instance.contracts_for;"accumulator"===this.selected_trade_type&&this.isDescendantOf("trade_definition")?(0,i.j6)((function(){(0,i.$d)(!1,(function(){var t=o.workspace.newBlock("trade_definition_accumulator");t.initSvg(),t.render();var e=o.workspace.getTradeDefinitionBlock().getInput("SUBMARKET").connection,a=t.previousConnection;e.connect(a);var n=t.getInput("AMOUNT"),i=o.workspace.newBlock("math_number_positive");i.setShadow(!0),i.setFieldValue(1,"NUM"),i.outputConnection.connect(n.connection),i.initSvg(),i.renderEfficiently();var l=o.workspace.newBlock("accumulator_take_profit"),r=l.getInput("AMOUNT"),c=o.workspace.newBlock("math_number_positive");c.setShadow(!0),c.setFieldValue(0,"NUM"),l.setDisabled(!0),c.outputConnection.connect(r.connection),c.initSvg(),c.renderEfficiently(),t.getLastConnectionInStatement("ACCUMULATOR_PARAMS").connect(l.previousConnection),l.initSvg(),l.renderEfficiently(),o.dispose()}))})):"multiplier"===this.selected_trade_type&&this.isDescendantOf("trade_definition")?(0,i.j6)((function(){(0,i.$d)(!1,(function(){var t=o.workspace.newBlock("trade_definition_multiplier");t.initSvg(),t.renderEfficiently();var e=o.workspace.getTradeDefinitionBlock().getInput("SUBMARKET").connection,a=t.previousConnection;e.connect(a);var n=t.getInput("AMOUNT"),i=o.workspace.newBlock("math_number_positive");i.setInputsInline(!0),i.setShadow(!0),i.setFieldValue(1,"NUM"),i.outputConnection.connect(n.connection),i.initSvg(),i.renderEfficiently();var l=o.workspace.newBlock("multiplier_take_profit"),r=l.getInput("AMOUNT"),c=o.workspace.newBlock("math_number_positive");c.setInputsInline(!0),c.setShadow(!0),c.setFieldValue(0,"NUM"),c.outputConnection.connect(r.connection),c.initSvg(),c.renderEfficiently(),t.getLastConnectionInStatement("MULTIPLIER_PARAMS").connect(l.previousConnection),l.initSvg(),l.renderEfficiently();var s=o.workspace.newBlock("multiplier_stop_loss"),u=s.getInput("AMOUNT"),p=o.workspace.newBlock("math_number_positive");p.setInputsInline(!0),p.setShadow(!0),p.setFieldValue(0,"NUM"),p.outputConnection.connect(u.connection),p.initSvg(),p.renderEfficiently(),t.getLastConnectionInStatement("MULTIPLIER_PARAMS").connect(s.previousConnection),s.initSvg(),s.renderEfficiently(),o.dispose()}))})):a.getDurations(this.selected_symbol,this.selected_trade_type).then((function(a){o.durations=a;var n=o.getField("DURATIONTYPE_LIST"),l=o.getInput("DURATION"),r=a.map((function(t){return[t.display,t.unit]}));if(null==n||n.updateOptions(r,{default_value:t?void 0:n.getValue()}),e&&l&&l.connection){var c=l.connection.targetBlock();if(c&&c.isShadow()){var s=a.find((function(t){return t.unit===o.selected_duration}));s&&(0,i.j6)((function(){c.setFieldValue(s.min,"NUM")}))}}}));var n=l.$.workspaces.indentWorkspace,r=n.x,c=n.y;setTimeout((function(){window.Blockly.getMainWorkspace().cleanUp(r,c)}),10)},updateBarrierInputs:function(t,e){var o=this,a=d.A.instance.contracts_for,n=l.$.BARRIER_TYPES;a.getBarriers(this.selected_symbol,this.selected_trade_type,this.selected_duration,this.selected_barrier_types).then((function(a){o.createBarrierInputs(a);for(var r=["BARRIEROFFSET","SECONDBARRIEROFFSET"],c=function(){var c=o.getField("".concat(r[s],"TYPE_LIST")),u=l.$.ABSOLUTE_BARRIER_DROPDOWN_OPTION,p=t?n[s][1]:c.getValue();if("d"===o.selected_duration)c.updateOptions(u,{default_value:"absolute"});else if(a.allow_both_types||a.allow_absolute_type){var d=[].concat(n,u);c.updateOptions(d,{default_value:p})}else c.updateOptions(n,{default_value:p});var y=o.getInput(r[s]).connection;if(e&&y){var B=y.targetBlock();if(B&&B.isShadow()){var k=!1!==a.values[s]?a.values[s]:"";(0,i.j6)((function(){B.setFieldValue(k,"NUM")}))}}},s=0;s<a.values.length;s++)c()}))},updatePredictionInput:function(t){var e=this;d.A.instance.contracts_for.getPredictionRange(this.selected_symbol,this.selected_trade_type).then((function(o){if(e.createPredictionInput(o),o.length>0){var a=e.getInput("PREDICTION").connection;if(t&&a){var n=a.targetBlock();if(n&&n.isShadow()){var l=Math.max(1,o[0]);(0,i.j6)((function(){n.setFieldValue(l,"NUM")}))}}}}))},enforceSingleBarrierType:function(t,e){var o=this.getFieldValue(t||""),a="BARRIEROFFSETTYPE_LIST"===t?"SECONDBARRIEROFFSETTYPE_LIST":"BARRIEROFFSETTYPE_LIST",n=this.getField(a),r=l.$.BARRIER_TYPES;if(n){var c=-1!==r.findIndex((function(t){return t[1]===o})),s=n.getValue();(0,i.j6)((function(){if(c&&("absolute"===s||e)){var t=r.find((function(t){return t[1]!==o}));n.setValue(t[1])}else"absolute"===o&&"absolute"!==s&&n.setValue("absolute")}))}},domToMutation:function(t){var e="true"===t.getAttribute("has_first_barrier"),o="true"===t.getAttribute("has_second_barrier"),a="true"===t.getAttribute("has_prediction");e&&o?this.createBarrierInputs({values:[1,-1]}):e?this.createBarrierInputs({values:[1]}):a&&this.createPredictionInput([1])},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("has_first_barrier",!!this.getInput("BARRIEROFFSET")),t.setAttribute("has_second_barrier",!!this.getInput("SECONDBARRIEROFFSET")),t.setAttribute("has_prediction",!!this.getInput("PREDICTION")),t},restricted_parents:["trade_definition"],getRequiredValueInputs:function(){var t=this;return{AMOUNT:function(e){var o,n,i=Number(e),l=null===(o=t.amount_limits)||void 0===o?void 0:o.max_payout,r=null===(n=t.amount_limits)||void 0===n?void 0:n.min_stake;return r&&i<r?(t.error_message=(0,a.localize)("Please enter a stake amount that's at least {{min_stake}}.",{min_stake:r}),i<r):l&&i>l?(t.error_message=(0,a.localize)("Please enter a payout amount that's lower than {{max_payout}}.",{max_payout:l}),i>l):(t.error_message=(0,a.localize)("Amount must be a positive number."),!isNaN(i)&&i<=0)},DURATION:function(e){var o=Number(e);if(isNaN(o)||!t.durations.length)return!1;var n=t.durations.find((function(e){return e.unit===t.selected_duration}));if(n){var i=n.min,l=n.max,r=o>=i&&o<=l;return t.error_message=i===l?(0,a.localize)("Duration value is not allowed. To run the bot, please enter {{min}}.",{min:i}):(0,a.localize)("Duration value is not allowed. To run the bot, please enter a value between {{min}} to {{max}}.",{min:i,max:l}),!r}return!1}}}},Blockly.Blocks.trade_definition_tradeoptions_payout=Blockly.Blocks.trade_definition_tradeoptions,Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradeoptions=function(t){var e,o,a,n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"AMOUNT",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0",i=u.A.instance.client.currency,l=t.getFieldValue("DURATIONTYPE_LIST")||"0",r=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DURATION",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0",c=(0,k.getDecimalPlaces)(i),s="+(Number(".concat(n,").toFixed(").concat(c,"))"),p=function(t,e){return/^(\d+(\.\d+)?)$/.test(e)?"absolute"===t?"'".concat(e,"'"):"'".concat(t).concat(e,"'"):"absolute"===t?e:"'".concat(t,"' + ").concat(e)};return t.getInput("PREDICTION")&&(e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"PREDICTION",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"-1"),t.getInput("BARRIEROFFSET")&&(o=p(t.getFieldValue("BARRIEROFFSETTYPE_LIST"),Blockly.JavaScript.javascriptGenerator.valueToCode(t,"BARRIEROFFSET",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0")),t.getInput("SECONDBARRIEROFFSET")&&(a=p(t.getFieldValue("SECONDBARRIEROFFSETTYPE_LIST"),Blockly.JavaScript.javascriptGenerator.valueToCode(t,"SECONDBARRIEROFFSET",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0")),"\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            duration           : ".concat(r,",\n            duration_unit      : '").concat(l,"',\n            currency           : '").concat(i,"',\n            amount             : ").concat(s,",\n            prediction         : ").concat(e||"undefined",",\n            barrierOffset      : ").concat(o||"undefined",",\n            secondBarrierOffset: ").concat(a||"undefined",",\n            basis              : '").concat("trade_definition_tradeoptions"===t.type?"stake":"payout","',\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    ")},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradeoptions_payout=Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_tradeoptions,Blockly.Blocks.trade_definition_multiplier={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,a.localize)("Multiplier: {{ multiplier }}",{multiplier:"%1"}),message1:"".concat((0,a.localize)("Stake"),": %1 %2 %3"),message2:"%1",message3:"%1",args0:[{type:"field_dropdown",name:"MULTIPLIERTYPE_LIST",options:[["",""]]}],args1:[{type:"field_label",name:"CURRENCY_LIST",text:(0,k.getCurrencyDisplayCode)(l.$.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"},{type:"field_label",name:"AMOUNT_LIMITS",text:""}],args2:[{type:"input_dummy"}],args3:[{type:"input_statement",name:"MULTIPLIER_PARAMS"}],inputsInline:!0,colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Define your trade options such as multiplier and stake."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,a.localize)("Multiplier trade options"),description:(0,a.localize)("Define your trade options such as multiplier and stake. This block can only be used with the multipliers trade type. If you select another trade type, this block will be replaced with the Trade options block.")}},validateBlocksInStatement:function(){var t=this.getBlocksInStatement("MULTIPLIER_PARAMS");if(t.length>0){var e=[];t.forEach((function(t){e.push(t.type);var o=t.childValueToCode("multiplier_take_profit","AMOUNT"),a=t.childValueToCode("multiplier_stop_loss","AMOUNT");(o<=0||a<=0)&&t.setDisabled(!0),"multiplier_stop_loss"===t.type&&a>0&&t.setDisabled(!1),"multiplier_take_profit"===t.type&&o>0&&t.setDisabled(!1),/^multiplier_.+$/.test(t.type)&&new Set(e).size===e.length||(0,i.j6)((function(){t.unplug(!0)}))}))}},onchange:function(t){if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()){var e=this.workspace.getAllBlocks(!0).find((function(t){return"trade_definition"===t.type}));if(e){var o=e.getChildByType("trade_definition_market"),a=e.getChildByType("trade_definition_tradetype");if(o&&a){this.selected_symbol=o.getFieldValue("SYMBOL_LIST"),this.selected_market=o.getFieldValue("MARKET_LIST"),this.selected_trade_type_category=a.getFieldValue("TRADETYPECAT_LIST"),this.selected_trade_type=a.getFieldValue("TRADETYPE_LIST"),this.selected_multiplier=this.getFieldValue("MULTIPLIERTYPE_LIST");var n=/^dbot-load/.test(t.group);if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))n?this.updateMultiplierInput(!1):this.updateMultiplierInput(!0);else if(t.type!==Blockly.Events.BLOCK_CHANGE){if(t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart&&(this.validateBlocksInStatement(),t.blockId===this.id))if(this.selected_multiplier)"multiplier"!==this.selected_trade_type&&this.updateMultiplierInput(!0);else{var l=new Blockly.Events.BlockCreate(this);l.recordUndo=!1,Blockly.Events.fire(l)}}else this.validateBlocksInStatement(),(0,i.MN)(this),n?"TRADETYPE_LIST"===t.name&&this.updateMultiplierInput(!1):t.blockId===this.id?"MULTIPLIERTYPE_LIST"===t.name&&this.updateMultiplierInput(!1):"SYMBOL_LIST"!==t.name&&"TRADETYPE_LIST"!==t.name||this.updateMultiplierInput(!0)}}}},updateMultiplierInput:function(t){var e=this,o=d.A.instance.contracts_for;"multiplier"!==this.selected_trade_type?this.isDescendantOf("trade_definition")&&(0,i.j6)((function(){(0,i.$d)(!1,(function(){var t=l.$.workspaces.indentWorkspace,o=t.x,a=t.y,n=e.workspace.newBlock("trade_definition_tradeoptions");n.initSvg(),n.renderEfficiently();var i=e.workspace.getTradeDefinitionBlock().getInput("SUBMARKET").connection,r=n.previousConnection;i.connect(r);var c=n.getInput("DURATION"),s=e.workspace.newBlock("math_number_positive");s.setShadow(!0),s.outputConnection.connect(c.connection),s.initSvg(),s.renderEfficiently();var u=n.getInput("AMOUNT"),p=e.workspace.newBlock("math_number_positive");p.setShadow(!0),p.setFieldValue(1,"NUM"),p.outputConnection.connect(u.connection),p.initSvg(),p.renderEfficiently(),e.dispose(),window.Blockly.getMainWorkspace().cleanUp(o,a)}))})):o.getMultiplierRange(this.selected_symbol,this.selected_trade_type).then((function(o){if(o.length>0){var a=e.getField("MULTIPLIERTYPE_LIST"),n=o.map((function(t){var e=t.toString();return[e,e]}));null==a||a.updateOptions(n,{default_value:t?void 0:a.getValue()})}}))},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["trade_definition"],getRequiredValueInputs:function(){var t=this;return{AMOUNT:function(e){var o,n,i=Number(e),l=null===(o=t.amount_limits)||void 0===o?void 0:o.max_payout,r=null===(n=t.amount_limits)||void 0===n?void 0:n.min_stake;return r&&i<r?(t.error_message=(0,a.localize)("Please enter a stake amount that's at least {{min_stake}}.",{min_stake:r}),i<r):l&&i>l?(t.error_message=(0,a.localize)("Please enter a payout amount that's lower than {{max_payout}}.",{max_payout:l}),i>l):(t.error_message=(0,a.localize)("Amount must be a positive number."),!isNaN(i)&&i<=0)}}}},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_multiplier=function(t){var e,o,a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"AMOUNT",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0",n=u.A.instance.client.currency,i=u.A.instance.setContractUpdateConfig,l=t.getFieldValue("MULTIPLIERTYPE_LIST")||"1",r=!(null!==(e=t.getChildByType("multiplier_stop_loss"))&&void 0!==e&&e.disabled)&&t.childValueToCode("multiplier_stop_loss","AMOUNT"),c=!(null!==(o=t.getChildByType("multiplier_take_profit"))&&void 0!==o&&o.disabled)&&t.childValueToCode("multiplier_take_profit","AMOUNT"),s={stop_loss:r?"+(Number(".concat(r,").toFixed(2))"):void 0,take_profit:c?"+(Number(".concat(c,").toFixed(2))"):void 0};i(c,r);var p=(0,k.getDecimalPlaces)(n),d="+(Number(".concat(a,").toFixed(").concat(p,"))");return"\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            multiplier         : ".concat(l,",\n            currency           : '").concat(n,"',\n            amount             : ").concat(d,",\n            limit_order        : ").concat(JSON.stringify(s),",\n            basis              : 'stake',\n            stop_loss          : ").concat(s.stop_loss,",\n            take_profit        : ").concat(s.take_profit,",\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    ")};var m=(0,a.localize)("Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.");Blockly.Blocks.multiplier_stop_loss={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Stop Loss: {{ currency }} {{ stop_loss }}",{currency:"%1",stop_loss:"%2"}),args0:[{type:"field_label",name:"CURRENCY_LIST",text:(0,k.getCurrencyDisplayCode)(l.$.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:m,category:Blockly.Categories.Trade_Definition}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Stop loss (Multiplier)"),description:m}},onchange:function(t){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart||t.type===Blockly.Events.BLOCK_CHANGE&&!t.isStart)&&(0,i.MN)(this)},restricted_parents:["trade_definition_multiplier"],getRequiredValueInputs:function(){var t=this;return this.getInput("AMOUNT").connection.targetBlock()?{AMOUNT:function(e){var o=Number(e);return t.error_message=(0,a.localize)("Stop loss must be a positive number."),!isNaN(o)&&o<=0}}:{}}},Blockly.JavaScript.javascriptGenerator.forBlock.multiplier_stop_loss=function(){};var v=(0,a.localize)("Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the accumulator trade type.");Blockly.Blocks.accumulator_take_profit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Take Profit: {{ currency }} {{ take_profit }}",{currency:"%1",take_profit:"%2"}),args0:[{type:"field_label",name:"CURRENCY_LIST",text:(0,k.getCurrencyDisplayCode)(l.$.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:v,category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,a.localize)("Take Profit (Accumulator)"),description:v}},onchange:function(t){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart||t.type===Blockly.Events.BLOCK_CHANGE&&!t.isStart)&&(0,i.MN)(this)},customContextMenu:function(t){var e=[(0,a.localize)("Enable Block"),(0,a.localize)("Disable Block")];(0,i.I7)(t,e),(0,i.xy)(t)},restricted_parents:["trade_definition_accumulator"],getRequiredValueInputs:function(){var t=this;return this.getInput("AMOUNT").connection.targetBlock()?{AMOUNT:function(e){var o=Number(e);return t.error_message=(0,a.localize)("Take profit must be a positive number."),!isNaN(o)&&o<=0}}:{}}},Blockly.JavaScript.javascriptGenerator.forBlock.accumulator_take_profit=function(){};var f=(0,a.localize)("Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.");Blockly.Blocks.multiplier_take_profit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Take Profit: {{ currency }} {{ take_profit }}",{currency:"%1",take_profit:"%2"}),args0:[{type:"field_label",name:"CURRENCY_LIST",text:(0,k.getCurrencyDisplayCode)(l.$.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:f,category:Blockly.Categories.Trade_Definition}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Take Profit (Multiplier)"),description:f}},onchange:function(t){!this.workspace||Blockly.derivWorkspace.isFlyoutVisible||this.workspace.isDragging()||(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)||t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart||t.type===Blockly.Events.BLOCK_CHANGE&&!t.isStart)&&(0,i.MN)(this)},restricted_parents:["trade_definition_multiplier"],getRequiredValueInputs:function(){var t=this;return this.getInput("AMOUNT").connection.targetBlock()?{AMOUNT:function(e){var o=Number(e);return t.error_message=(0,a.localize)("Take profit must be a positive number."),!isNaN(o)&&o<=0}}:{}}},Blockly.JavaScript.javascriptGenerator.forBlock.multiplier_take_profit=function(){};var _=o(651);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function g(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function T(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?g(Object(o),!0).forEach((function(e){S(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function S(t,e,o){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}Blockly.Blocks.trade_definition_accumulator={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,a.localize)("Growth Rate: {{ accumulator }}",{accumulator:"%1"}),message1:"".concat((0,a.localize)("Stake"),": %1 %2"),message2:"%1",message3:"%1",args0:[{type:"field_dropdown",name:"GROWTHRATE_LIST",options:[["",""]]}],args1:[{type:"field_label",name:"CURRENCY_LIST",text:(0,k.getCurrencyDisplayCode)(l.$.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"}],args2:[{type:"input_dummy"}],args3:[{type:"input_statement",name:"ACCUMULATOR_PARAMS"}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Define your trade options, such as accumulator and stake."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,a.localize)("Accumulator trade options"),description:(0,a.localize)("Define your trade options such as accumulator and stake. This block can only be used with the accumulator trade type. If you select another trade type, this block will be replaced with the Trade options block.")}},validateBlocksInStatement:function(){var t=this.getBlocksInStatement("ACCUMULATOR_PARAMS");if(t.length>0){var e=[];t.forEach((function(t){e.push(t.type);var o=t.childValueToCode("accumulator_take_profit","AMOUNT");o<=0&&t.setDisabled(!0),"accumulator_take_profit"===t.type&&o>0&&t.setDisabled(!1),/^accumulator_.+$/.test(t.type)&&new Set(e).size===e.length||(0,i.j6)((function(){t.unplug(!0)}))}))}},onchange:function(t){if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()){(0,_.QY)(this);var e=this.workspace.getAllBlocks(!0).find((function(t){return"trade_definition"===t.type}));if(e){var o=e.getChildByType("trade_definition_market"),a=e.getChildByType("trade_definition_tradetype");if(o&&a){this.selected_symbol=o.getFieldValue("SYMBOL_LIST"),this.selected_market=o.getFieldValue("MARKET_LIST"),this.selected_trade_type_category=a.getFieldValue("TRADETYPECAT_LIST"),this.selected_trade_type=a.getFieldValue("TRADETYPE_LIST"),this.selected_growth_rate=this.getFieldValue("GROWTHRATE_LIST");var n=/^dbot-load/.test(t.group);if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))n?this.updateAccumulatorInput(!1):this.updateAccumulatorInput(!0);else if(t.type!==Blockly.Events.BLOCK_CHANGE){if(t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart&&(this.validateBlocksInStatement(),t.blockId===this.id))if(this.selected_growth_rate)"accumulator"!==this.selected_trade_type&&this.updateAccumulatorInput(!0);else{var l=new Blockly.Events.Create(this);l.recordUndo=!1,Blockly.Events.fire(l)}}else(0,i.MN)(this),this.validateBlocksInStatement(),n?"TRADETYPE_LIST"===t.name&&this.updateAccumulatorInput(!1):t.blockId===this.id?"GROWTHRATE_LIST"===t.name&&this.updateAccumulatorInput(!1):"SYMBOL_LIST"!==t.name&&"TRADETYPE_LIST"!==t.name||this.updateAccumulatorInput(!0)}}}},updateAmountLimits:Blockly.Blocks.trade_definition_tradeoptions.updateAmountLimits,updateAccumulatorInput:function(t){var e=this,o=d.A.instance.contracts_for;"accumulator"!==this.selected_trade_type?this.isDescendantOf("trade_definition")&&(0,i.j6)((function(){(0,i.$d)(!1,(function(){var t=l.$.workspaces.indentWorkspace,o=t.x,a=t.y,n=e.workspace.newBlock("trade_definition_tradeoptions");n.initSvg(),n.render();var i=e.workspace.getTradeDefinitionBlock().getInput("SUBMARKET").connection,r=n.previousConnection;i.connect(r);var c=n.getInput("DURATION"),s=e.workspace.newBlock("math_number_positive");s.setShadow(!0),s.outputConnection.connect(c.connection),s.initSvg(),s.render(!0);var u=n.getInput("AMOUNT"),p=e.workspace.newBlock("math_number_positive");p.setShadow(!0),p.setFieldValue(1,"NUM"),p.outputConnection.connect(u.connection),p.initSvg(),p.render(!0),e.dispose(),Blockly.derivWorkspace.cleanUp(o,a)}))})):o.getAccumulationRange().then((function(o){if(o.length>0){var a=e.getField("GROWTHRATE_LIST"),n=o.map((function(t){var e=t.toString();return["".concat(100*e,"%"),e]}));null==a||a.updateOptions(n,{default_value:t?void 0:a.getValue()})}}))},customContextMenu:function(t){(0,i.xy)(t)},restricted_parents:["trade_definition"],getRequiredValueInputs:function(){var t=this;return{AMOUNT:function(e){var o,n,i=Number(e),l=null===(o=t.amount_limits)||void 0===o?void 0:o.max_payout,r=null===(n=t.amount_limits)||void 0===n?void 0:n.min_stake;return r&&i<r?(t.error_message=(0,a.localize)("Please enter a stake amount that's at least {{min_stake}}.",{min_stake:r}),i<r):l&&i>l?(t.error_message=(0,a.localize)("Please enter a payout amount that's lower than {{max_payout}}.",{max_payout:l}),i>l):(t.error_message=(0,a.localize)("Amount must be a positive number."),!isNaN(i)&&i<=0)}}}},Blockly.JavaScript.javascriptGenerator.forBlock.trade_definition_accumulator=function(t){var e,o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"AMOUNT",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0",a=u.A.instance.client.currency,n=u.A.instance.setContractUpdateConfig,i=t.getFieldValue("GROWTHRATE_LIST")||"1",l=!(null!==(e=t.getChildByType("accumulator_take_profit"))&&void 0!==e&&e.disabled)&&t.childValueToCode("accumulator_take_profit","AMOUNT"),r={take_profit:l?"+(Number(".concat(l,").toFixed(2))"):void 0};n(void 0,l);var c=(0,k.getDecimalPlaces)(a),s="+(Number(".concat(o,").toFixed(").concat(c,"))");return"\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            growth_rate        : ".concat(i,",\n            currency           : '").concat(a,"',\n            amount             : ").concat(s,",\n            limit_order        : ").concat(JSON.stringify(r),",\n            basis              : 'stake',\n            take_profit          : ").concat(r.take_profit,",\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    ")},Blockly.Blocks.logic_compare={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Compares two values"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,a.localize)("Compare"),description:(0,a.localize)("This block compares two values and is used to build a conditional structure.")}},getRequiredValueInputs:function(){return{A:null,B:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.logic_compare=function(t){var e={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")||"EQ"],o=["==","!="].includes(e)?Blockly.JavaScript.javascriptGenerator.ORDER_EQUALITY:Blockly.JavaScript.javascriptGenerator.ORDER_RELATIONAL,a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"A",o)||"false",n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"B",o)||"false";return["".concat(a," ").concat(e," ").concat(n),o]},Blockly.Blocks.controls_if={init:function(){this.value_connections=[null],this.statement_connections=[null],this.else_statement_connection=null,this.else_if_count=0,this.else_count=0,this.jsonInit(this.definition()),this.updateShape()},definition:function(){return{message0:(0,a.localize)("if {{ condition }} then",{condition:"%1"}),message1:"%1",message2:"%1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],args1:[{type:"field_image",src:" ",width:150,height:1}],args2:[{type:"input_statement",name:"DO0"}],inputsInline:!0,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Conditional block"),category:Blockly.Categories.Logic}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Conditional block"),description:(0,a.localize)("This block evaluates a statement and will perform an action only when the statement is true.")}},mutationToDom:function(){var t=document.createElement("mutation");return this.else_if_count&&t.setAttribute("elseif",this.else_if_count),this.else_count&&t.setAttribute("else",1),t},domToMutation:function(t){this.else_if_count=parseInt(t.getAttribute("elseif"))||0,this.else_count=parseInt(t.getAttribute("else"))||0,this.rebuildShape()},rebuildShape:function(){for(var t,e,o=[null],a=[null],n=(null===(t=this.getInput("ELSE"))||void 0===t||null===(e=t.connection)||void 0===e?void 0:e.targetConnection)||null,i=1;;){var l=this.getIfInputNames(i),r=this.getInput(l.IF);if(!r)break;var c=this.getInput(l.DO);o.push(r.connection.targetConnection),a.push(c.connection.targetConnection),i++}this.updateShape(),this.reconnectChildBlocks(o,a,n)},update:function(t){var e=this;Blockly.Events.setGroup(!0);var o=this.mutationToDom(),a=o&&Blockly.Xml.domToText(o),n=this.rendered;this.rendered=!1,t&&t.call(this),this.updateShape(),this.rendered=n,this.initSvg();var i=Blockly.Events.getGroup(),l=this.mutationToDom(),r=l&&Blockly.Xml.domToText(l);if(a!==r){var c=new Blockly.Events.BlockChange(this,"mutation",null,a,r);Blockly.Events.fire(c),setTimeout((function(){Blockly.Events.setGroup(i),e.bumpNeighbours(),Blockly.Events.setGroup(!1)}),Blockly.BUMP_DELAY)}this.rendered&&this.renderEfficiently(),Blockly.Events.setGroup(!1)},updateShape:function(){var t=this;this.getInput("ELSE")&&(this.removeInput("ELSE"),this.removeInput("ELSE_LABEL"),this.removeInput("DELETE_ELSE"));for(var e=1;;){var o=this.getIfInputNames(e);if(!this.getInput(o.IF))break;this.removeInput(o.IF_LABEL),this.removeInput(o.IF),this.removeInput(o.THEN_LABEL),this.removeInput(o.DELETE_ICON),this.removeInput(o.DO),e++}this.getInput("MUTATOR")&&this.removeInput("MUTATOR");for(var i=function(e){var o=t.getIfInputNames(e);t.appendDummyInput(o.IF_LABEL).appendField((0,a.localize)("else if")),t.appendValueInput(o.IF).setCheck("Boolean"),t.appendDummyInput(o.THEN_LABEL).appendField((0,a.localize)("then")),t.appendDummyInput(o.DELETE_ICON).appendField(new Blockly.FieldImage(n.yD,24,24,"-",(function(){return t.modifyElseIf(!1,e)}))),t.appendStatementInput(o.DO)},l=1;l<=this.else_if_count;l++)i(l);this.else_count>0&&(this.appendDummyInput("ELSE_LABEL").appendField((0,a.localize)("else")),this.appendDummyInput("DELETE_ELSE").appendField(new Blockly.FieldImage(n.yD,24,24,"-",(function(){return t.modifyElse(!1)}),!1)),this.appendStatementInput("ELSE")),this.appendDummyInput("MUTATOR").appendField(new Blockly.FieldImage(n.ys,24,24,"+",(function(){0===t.else_count?t.modifyElse(!0):(t.else_if_count||(t.else_if_count=0),t.modifyElseIf(!0))}),!1)),this.initSvg(),this.queueRender()},storeConnections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.value_connections=[null],this.statement_connections=[null],this.else_statement_connection=null;for(var e=1;e<=this.else_if_count;e++)if(t!==e){var o=this.getIfInputNames(e);this.value_connections.push(this.getInput(o.IF).connection.targetConnection),this.statement_connections.push(this.getInput(o.DO).connection.targetConnection)}var a=this.getInput("ELSE");a&&(this.else_statement_connection=a.connection.targetConnection)},reconnectChildBlocks:function(t,e,o){for(var a=null!=t?t:this.value_connections,n=null!=e?e:this.statement_connections,i=null!=o?o:this.else_statement_connection,l=1;l<=this.else_if_count;l++){var r=this.getIfInputNames(l),c=a[l],s=n[l],u=this.getInput(r.IF);c&&u&&(u.connection.disconnect(),u.connection.connect(c));var p=this.getInput(r.DO);s&&p&&(p.connection.disconnect(),p.connection.connect(s))}var d=this.getInput("ELSE");i&&d&&(d.connection.disconnect(),d.connection.connect(i))},modifyElse:function(t){var e=this;this.storeConnections(),this.update((function(){e.else_count+=t?1:-1})),this.reconnectChildBlocks()},modifyElseIf:function(t,e){var o=this;this.storeConnections(e),this.update((function(){o.else_if_count+=t?1:-1})),this.reconnectChildBlocks()},getRequiredValueInputs:function(){var t={};return this.inputList.filter((function(t){return/^IF[0-9]*?$/.test(t.name)})).forEach((function(e){return t[e.name]=null})),t},getIfInputNames:function(t){return{IF_LABEL:"IF_LABEL".concat(t),IF:"IF".concat(t),THEN_LABEL:"THEN_LABEL".concat(t),DELETE_ICON:"DELETE_ICON".concat(t),DO:"DO".concat(t)}}},Blockly.JavaScript.javascriptGenerator.forBlock.controls_if=function(t){var e=0,o="";do{var a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"IF".concat(e),Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"false";o+="\n        ".concat(e>0?"else if":"if"," (").concat(a,") {\n            ").concat(Blockly.JavaScript.javascriptGenerator.statementToCode(t,"DO".concat(e)),"\n        }"),e++}while(t.getInput("IF".concat(e)));return t.getInput("ELSE")&&(o+="\n        else {\n            ".concat(Blockly.JavaScript.javascriptGenerator.statementToCode(t,"ELSE"),"\n        }")),"".concat(o,"\n")},Blockly.Blocks.logic_boolean={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[[(0,a.localize)("true"),"TRUE"],[(0,a.localize)("false"),"FALSE"]]}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns either True or False"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,a.localize)("True-False"),description:(0,a.localize)("This is a single block that returns a boolean value, either true or false.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.logic_boolean=function(t){return["TRUE"===t.getFieldValue("BOOL")?"true":"false",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.logic_operation={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[[(0,a.localize)("and"),"AND"],[(0,a.localize)("or"),"OR"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Performs selected logic operation"),category:Blockly.Categories.Logic}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Logic operation"),description:(0,a.localize)('This block performs the "AND" or the "OR" logic operation.')}},getRequiredValueInputs:function(){return{A:null,B:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.logic_operation=function(t){var e,o,a=t.getFieldValue("OP");"AND"===a?(e="&&",o=Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_AND):"OR"===a&&(e="||",o=Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_OR);var n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"A",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"false",i=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"B",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"false";return["".concat(n," ").concat(e," ").concat(i),o]},Blockly.Blocks.logic_null={init:function(){this.jsonInit(this.definition())},definition:function(){return{inputsInline:!0,message0:"null",output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block assigns a null value to an item or statement."),category:Blockly.Categories.Logic}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Null"),description:(0,a.localize)("This block assigns a null value to an item or statement.")}}},Blockly.JavaScript.javascriptGenerator.forBlock.logic_null=function(){return["null",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.logic_ternary={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("test {{ condition }}",{condition:"%1"}),message1:(0,a.localize)("if true {{ return_value }}",{return_value:"%1"}),message2:(0,a.localize)("if false {{ return_value }}",{return_value:"%1"}),args0:[{type:"input_value",name:"IF",check:"Boolean"}],args1:[{type:"input_value",name:"THEN"}],args2:[{type:"input_value",name:"ELSE"}],inputsInline:!0,output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block tests if a given value is true or false and returns “True” or “False” accordingly."),category:Blockly.Categories.Logic}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Test value"),description:(0,a.localize)("This block tests if a given value is true or false and returns “True” or “False” accordingly.")}},getRequiredValueInputs:function(){return{IF:null,THEN:null,ELSE:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.logic_ternary=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"IF",Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL)||"false",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"THEN",Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL)||"null",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"ELSE",Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL)||"null";return["(".concat(e," ? ").concat(o," : ").concat(a,")"),Blockly.JavaScript.javascriptGenerator.ORDER_CONDITIONAL]},Blockly.Blocks.logic_negate={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("not {{ boolean }}",{boolean:"%1"}),args0:[{type:"input_value",name:"BOOL"}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Converts a given True or False to the opposite value"),category:Blockly.Categories.Logic}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Logic negation"),description:(0,a.localize)("This block converts the boolean value (true or false) to its opposite.")}},getRequiredValueInputs:function(){return{BOOL:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.logic_negate=function(t){var e=Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT,o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"BOOL",e)||"true";return["!".concat(o),e]},Blockly.Blocks.math_change={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("change {{ variable }} by {{ number }}",{variable:"%1",number:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:(0,a.localize)("item")},{type:"input_value",name:"DELTA",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("This block adds the given number to the selected variable"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,a.localize)("Change variable"),description:(0,a.localize)("This block adds the given number to the selected variable.")}},getRequiredValueInputs:function(){return{DELTA:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.math_change=function(t){var e=t.getFieldValue("VAR"),o=Blockly.JavaScript.variableDB_.getName(e,Blockly.Variables.CATEGORY_NAME),a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DELTA",Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION)||"0";return"".concat(o," = (typeof ").concat(o," === 'number' ? ").concat(o," : 0) + ").concat(a,";")},Blockly.Blocks.math_constant={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["ℇ","E"],["ϕ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you the selected constant values."),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Mathematical constants"),description:(0,a.localize)("This block gives you the selected constant values.")}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_constant=function(t){var e,o,a=t.getFieldValue("CONSTANT");return"PI"===a?(e="Math.PI",o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER):"E"===a?(e="Math.E",o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER):"GOLDEN_RATIO"===a?(e="(1 + Math.sqrt(5)) / 2",o=Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION):"SQRT2"===a?(e="Math.SQRT2",o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER):"SQRT1_2"===a?(e="Math.SQRT1_2",o=Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER):"INFINITY"===a&&(e="Infinity",o=Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC),[e,o]},Blockly.Blocks.math_constrain={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("constrain {{ number }} low {{ low_number }} high {{ high_number }}",{number:"%1",low_number:"%2",high_number:"%3"}),args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block constrains a given number so that it is within a set range."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,a.localize)("Constrain within a range"),description:(0,a.localize)("This block constrains a given number so that it is within a set range.")}},getRequiredValueInputs:function(){return{VALUE:null,LOW:null,HIGH:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.math_constrain=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"0",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LOW",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"0",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"HIGH",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"0";return["Math.min(Math.max(".concat(e,", ").concat(o,"), ").concat(a,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_modulo={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("remainder of {{ number1 }} ÷ {{ number2 }}",{number1:"%1",number2:"%2"}),args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns the remainder after a division"),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Remainder after division"),description:(0,a.localize)("Returns the remainder after the division of the given numbers.")}},getRequiredValueInputs:function(){return{DIVIDEND:null,DIVISOR:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_modulo=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DIVIDEND",Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS)||"0",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DIVISOR",Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS)||"0";return["".concat(e," % ").concat(o),Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS]},Blockly.Blocks.math_number={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("NUM").setValidator((function(e){return t.numberValidator(e)}))},definition:function(){return{message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Please use `.` as a decimal separator for fractional numbers."),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Number"),description:(0,a.localize)("Enter an integer or fractional number into this block. Please use `.` as a decimal separator for fractional numbers.")}},numberValidator:function(t){if(!(/^-?([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(t)&&t<Number.MAX_SAFE_INTEGER))return null}},Blockly.JavaScript.javascriptGenerator.forBlock.math_number=function(t){return[t.getFieldValue("NUM"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.math_number_positive={init:Blockly.Blocks.math_number.init,definition:Blockly.Blocks.math_number.definition,meta:function(){return{display_name:(0,a.localize)("Math Number Positive"),description:(0,a.localize)("Math Number Description")}},numberValidator:function(t){if(!(/^([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(t)&&t<Number.MAX_SAFE_INTEGER))return null},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.math_number_positive=function(t){return Blockly.JavaScript.javascriptGenerator.forBlock.math_number(t)},Blockly.Blocks.math_number_property={init:function(){var t=this;this.jsonInit(this.definition()),this.setOnChange((function(e){if("PROPERTY"===e.name){var o="DIVISIBLE_BY"===t.getFieldValue("PROPERTY");t.updateShape(o)}}))},definition:function(){return{message0:(0,a.localize)("{{ number }} is {{ type }}",{number:"%1",type:"%2"}),args0:[{type:"input_value",name:"NUMBER_TO_CHECK"},{type:"field_dropdown",name:"PROPERTY",options:[[(0,a.localize)("even"),"EVEN"],[(0,a.localize)("odd"),"ODD"],[(0,a.localize)("prime"),"PRIME"],[(0,a.localize)("whole"),"WHOLE"],[(0,a.localize)("positive"),"POSITIVE"],[(0,a.localize)("negative"),"NEGATIVE"],[(0,a.localize)("divisible by"),"DIVISIBLE_BY"]]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,toolip:(0,a.localize)("This block tests a given number according to the selection"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,a.localize)("Test a number"),description:(0,a.localize)("This block tests a given number according to the selection and it returns a value of “True” or “False”. Available options: Even, Odd, Prime, Whole, Positive, Negative, Divisible")}},domToMutation:function(t){var e="true"===t.getAttribute("divisor_input");this.updateShape(e)},mutationToDom:function(){var t=document.createElement("mutation"),e="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return t.setAttribute("divisor_input",e),t},updateShape:function(t){t&&(this.getInput("DIVISOR")?this.removeInput("DIVISOR"):(this.appendValueInput("DIVISOR").setCheck("Number"),this.initSvg(),this.renderEfficiently()))},customContextMenu:function(t){(0,i.xy)(t)},getRequiredValueInputs:function(){return{NUMBER_TO_CHECK:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_number_property=function(t){var e,o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"NUMBER_TO_CHECK",Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS)||"0",a=t.getFieldValue("PROPERTY");if("PRIME"===a){var n=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathIsPrime",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }")]);return[e="".concat(n,"(").concat(o,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]}if("EVEN"===a)e="".concat(o," % 2 === 0");else if("ODD"===a)e="".concat(o," % 2 === 1");else if("WHOLE"===a)e="".concat(o," % 1 === 0");else if("POSITIVE"===a)e="".concat(o," > 0");else if("NEGATIVE"===a)e="".concat(o," < 0");else if("DIVISIBLE_BY"===a){var i=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"DIVISOR",Blockly.JavaScript.javascriptGenerator.ORDER_MODULUS)||"0";e="".concat(o," % ").concat(i," == 0")}return[e,Blockly.JavaScript.javascriptGenerator.ORDER_EQUALITY]},Blockly.Blocks.math_on_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("{{ calculation }} of list {{ input_list }}",{calculation:"%1",input_list:"%2"}),args0:[{type:"field_dropdown",name:"OP",options:[[(0,a.localize)("sum"),"SUM"],[(0,a.localize)("min"),"MIN"],[(0,a.localize)("max"),"MAX"],[(0,a.localize)("average"),"AVERAGE"],[(0,a.localize)("median"),"MEDIAN"],[(0,a.localize)("mode"),"MODE"],[(0,a.localize)("antimode"),"ANTIMODE"],[(0,a.localize)("standard deviation"),"STD_DEV"],[(0,a.localize)("random item"),"RANDOM"]]},{type:"input_value",name:"LIST"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Aggregate operations"),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Aggregate operations"),description:(0,a.localize)("This block performs the following operations on a given list: sum, minimum, maximum, average, median, mode, antimode, standard deviation, random item.")}},getRequiredValueInputs:function(){var t=this,e=["variables_get","lists_getSublist","ohlc_values","lists_split","ohlc","ticks","lists_repeat","lastDigitList","ohlc_values_in_list","procedures_callreturn"];return{LIST:function(){var o;return!e.includes(null===(o=t.childBlocks_[0])||void 0===o?void 0:o.type)}}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_on_list=function(t){var e,o,a=t.getFieldValue("OP");if("SUM"===a){var n=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                },0);\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(n,"((").concat(o," || [0]))")}else if("MIN"===a){var i=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return Math.min.apply(null, (recursiveList(myList, final_list) || [0]));\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"[]",e="".concat(i,"((").concat(o," || [0]))")}else if("MAX"===a){var l=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return Math.max.apply(null, (recursiveList(myList, final_list) || [0]));\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"[]",e="".concat(l,"((").concat(o," || [0]))")}else if("AVERAGE"===a){var r=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                }, 0) / myList.length;\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(r,"((").concat(o," || [0]))")}else if("MEDIAN"===a){var c=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathMedian",["\n            Array.prototype.swap = function (x,y) {\n                var b = this[x];\n                this[x] = this[y];\n                this[y] = b;\n                return this;\n            }\n\n            function partition(arr, start, end){\n                var pivotValue = arr[end];\n                var pivotIndex = start;\n                for (var i = start; i < end; i++) {\n                    if (arr[i] < pivotValue) {\n                    arr.swap(pivotIndex, i);\n                    pivotIndex++;\n                    }\n                }\n                arr.swap(end, pivotIndex);\n                return pivotIndex;\n            };\n\n            function quickSort(arr) {\n                var stack = [];\n                stack.push(0);\n                stack.push(arr.length - 1);\n\n                while(stack[stack.length - 1] >= 0){\n                    end = stack.pop();\n                    start = stack.pop();\n                    pivotIndex = partition(arr, start, end);\n                    if (pivotIndex - 1 > start){\n                        stack.push(start);\n                        stack.push(pivotIndex - 1);\n                    }\n                    if (pivotIndex + 1 < end){\n                        stack.push(pivotIndex + 1);\n                        stack.push(end);\n                    }\n                }\n\n            }\n\n            function calculateMedian(final_list){\n                quickSort(final_list);\n\n                if (final_list.length % 2 == 0) {\n                    return (final_list[final_list.length / 2 - 1] + final_list[final_list.length / 2]) / 2;\n                }\n                return final_list[(final_list.length - 1) / 2];\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return calculateMedian(recursiveList(myList, final_list));\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(c,"((").concat(o," || [0]))")}else if("MODE"===a){var s=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathModes",["\n            function calculateMathMode(values){\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n\n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                return calculateMathMode(recursiveList(list, final_list));\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(s,"((").concat(o," || [0]))")}else if("ANTIMODE"===a){var u=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathAntiMode",["\n            function calculateMathAntiMode(values){\n                var antiMode = [];\n                var counts = [];\n                var minCount = 1;\n                var countArray = [];\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                }\n\n                 minCount = Math.min.apply(null, counts.map(function(element) {\n                     return element[1];\n                 }));\n\n                 for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == minCount) {\n                        antiMode.push(counts[j][0]);\n                    }\n                }\n\n                return antiMode;\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                return calculateMathAntiMode(recursiveList(list, final_list));\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(u,"((").concat(o," || [0]))")}else if("STD_DEV"===a){var p=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathStandardDeviation",["\n            function calculateMathStandardDeviation(numbers){\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }, 0) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                return calculateMathStandardDeviation(recursiveList(list, final_list));\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(p,"((").concat(o," || [0]))")}else if("RANDOM"===a){var d=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathRandomList",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                var final_list = recursiveList(list, final_list);\n                var x = Math.floor(Math.random() * final_list.length);\n                return final_list[x];\n            }")]);o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"LIST",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"[]",e="".concat(d,"((").concat(o," || [0]))")}return[e,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_random_float={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("random fraction"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you a random fraction between 0.0 to 1.0"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,a.localize)("Random fraction number"),description:(0,a.localize)("This block gives you a random fraction between 0.0 to 1.0.")}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.math_random_float=function(){return["Math.random()",Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_random_int={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("random integer from {{ start_number }} to {{ end_number }}",{start_number:"%1",end_number:"%2"}),args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block gives you a random number from within a set range"),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Random integer"),description:(0,a.localize)("This block gives you a random number from within a set range.")}},getRequiredValueInputs:function(){return{FROM:null,TO:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_random_int=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"FROM",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"0",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TO",Blockly.JavaScript.javascriptGenerator.ORDER_COMMA)||"0",a=Blockly.JavaScript.javascriptGenerator.provideFunction_("mathRandomInt",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }")]);return["".concat(a,"(").concat(e,", ").concat(o,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_round={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["round","ROUND"],["round up","ROUNDUP"],["round down","ROUNDDOWN"]]},{type:"input_value",name:"NUM"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Rounds a given number to an integer"),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Rounding operation"),description:(0,a.localize)("This block rounds a given number according to the selection: round, round up, round down.")}},getRequiredValueInputs:function(){return{NUM:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_round=function(t){var e,o=t.getFieldValue("OP"),a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"NUM",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC)||"0";return"ROUND"===o?e="Math.round(".concat(a,")"):"ROUNDUP"===o?e="Math.ceil(".concat(a,")"):"ROUNDDOWN"===o&&(e="Math.floor(".concat(a,")")),[e,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_arithmetic={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["+","ADD"],["-","MINUS"],["*","MULTIPLY"],["/","DIVIDE"],["^","POWER"]]},{type:"input_value",name:"B",check:"Number"}],output:"Number",inputsInline:!0,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("This block performs arithmetic operations between two numbers."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,a.localize)("Arithmetical operations"),description:(0,a.localize)("This block performs arithmetic operations between two numbers.")}},getRequiredValueInputs:function(){return{A:null,B:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.math_arithmetic=function(t){var e={ADD:["+",Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION],MINUS:["-",Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:["*",Blockly.JavaScript.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:["/",Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION],POWER:[null,Blockly.JavaScript.javascriptGenerator.ORDER_COMMA]}[t.getFieldValue("OP")],o=e[0],a=e[1],n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"A",a)||"0",i=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"B",a)||"0";return o?["".concat(n," ").concat(o," ").concat(i),a]:["Math.pow(".concat(n,", ").concat(i,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_single={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[[(0,a.localize)("square root"),"ROOT"],[(0,a.localize)("absolute"),"ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Operations on a given number"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,a.localize)("Operations on a given number"),description:(0,a.localize)("This block performs the selected operations to a given number.")}},getRequiredValueInputs:function(){return{NUM:null}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.math_single=function(t){var e,o,a=t.getFieldValue("OP");return"NEG"===a?("-"===(o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"NUM",Blockly.JavaScript.javascriptGenerator.ORDER_UNARY_NEGATION)||"0")[0]&&(o=" ".concat(o)),[e="-".concat(o),Blockly.JavaScript.javascriptGenerator.ORDER_UNARY_NEGATION]):(o=["SIN","COS","TAN"].includes(a)?Blockly.JavaScript.javascriptGenerator.valueToCode(t,"NUM",Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION)||"0":Blockly.JavaScript.javascriptGenerator.valueToCode(t,"NUM",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"0","ABS"===a?e="Math.abs(".concat(o,")"):"ROOT"===a?e="Math.sqrt(".concat(o,")"):"LN"===a?e="Math.log(".concat(o,")"):"EXP"===a?e="Math.pow(Math.E, ".concat(o,")"):"POW10"===a?e="Math.pow(10, ".concat(o,")"):"ROUND"===a?e="Math.round(".concat(o,")"):"ROUNDUP"===a?e="Math.ceil(".concat(o,")"):"ROUNDDOWN"===a?e="Math.floor(".concat(o,")"):"SIN"===a?e="Math.sin(".concat(o," / 180 * Math.PI)"):"COS"===a?e="Math.cos(".concat(o," / 180 * Math.PI)"):"TAN"===a&&(e="Math.tan(".concat(o," / 180 * Math.PI)")),e?[e,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]:("LOG10"===a?e="Math.log(".concat(o,") / Math.log(10)"):"ASIN"===a?e="Math.asin(".concat(o,") / Math.PI * 180"):"ACOS"===a?e="Math.acos(".concat(o,") / Math.PI * 180"):"ATAN"===a&&(e="Math.atan(".concat(o,") / Math.PI * 180")),[e,Blockly.JavaScript.javascriptGenerator.ORDER_DIVISION]))},Blockly.Blocks.math_trig={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["sin","SIN"],["cos","COS"],["tan","TAN"],["asin","ASIN"],["acos","ACOS"],["atan","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Trigonometric functions"),category:Blockly.Categories.Mathematical}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Trigonometric functions"),description:(0,a.localize)("This block performs trigonometric functions.")}},getRequiredValueInputs:function(){return{NUM:null}}},Blockly.JavaScript.javascriptGenerator.forBlock.math_trig=Blockly.JavaScript.javascriptGenerator.forBlock.math_single,Blockly.Blocks.text={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_input",name:"TEXT"}],inputsInline:!0,output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Enter some text here"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Text"),description:(0,a.localize)("A  block that can contain text.")}}},Blockly.JavaScript.javascriptGenerator.forBlock.text=function(t){return[Blockly.JavaScript.javascriptGenerator.quote_(t.getFieldValue("TEXT")),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.text_join={protected_statements:["STACK"],allowed_children:["text_statement"],init:function(){var t=new Blockly.FieldImage(n.ys,25,25,"",this.onIconClick.bind(this));this.jsonInit(this.definition()),this.appendDummyInput("ADD_ICON").appendField(t),this.moveInputBefore("ADD_ICON","STACK")},definition:function(){return{message0:(0,a.localize)("set {{ variable }} to create text with",{variable:"%1"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:(0,a.localize)("text")}],args1:[{type:"input_statement",name:"STACK"}],inputsInline:!0,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Text join"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Text join"),description:(0,a.localize)("Creates a single text string from combining the text value of each attached item, without spaces in between. The number of items can be added accordingly.")}},onIconClick:function(){var t=this;this.workspace.options.readOnly||Blockly.derivWorkspace.isFlyoutVisible||(0,i.$d)(!1,(function(){var e=t.workspace.newBlock("text_statement");e.required_parent_id=t.id,e.setMovable(!0),e.initSvg(),null==e||e.renderEfficiently();var o=t.workspace.newBlock("text");o.setShadow(!0),o.setFieldValue("","TEXT"),o.initSvg(),null==o||o.renderEfficiently(),e.getInput("TEXT").connection.connect(o.outputConnection),t.getLastConnectionInStatement("STACK").connect(e.previousConnection)}))},onchange:Blockly.Blocks.lists_create_with.onchange},Blockly.JavaScript.javascriptGenerator.forBlock.text_join=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.CATEGORY_NAME),o=t.getBlocksInStatement("STACK").map((function(t){var e=Blockly.JavaScript.javascriptGenerator.forBlock[t.type](t);return Array.isArray(e)?e[0]:e}));return"".concat(e," = [").concat(o,'].join(" ");\n')},Blockly.Blocks.text_statement={required_parent_type:"text_join",init:function(){this.required_parent_id="";var t=new Blockly.FieldImage(n.yD,25,25,"",this.onIconClick.bind(this));this.jsonInit(this.definition()),this.appendDummyInput("REMOVE_ICON").appendField(t)},definition:function(){return{message0:"%1",args0:[{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Text Statement"),description:""}},onchange:function(t){var e=this;if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()){var o=this.getSurroundParent();if(t.type===Blockly.Events.BLOCK_CREATE&&(this.setMovable(!0),this.required_parent_id||(null==o?void 0:o.type)!==this.required_parent_type||(this.required_parent_id=o.id)),t.type===Blockly.Events.BLOCK_DRAG&&!t.isStart){var a=Blockly.getMainWorkspace().getBlockById(t.blockId);if(this.required_parent_id&&(!o||o.id!==this.required_parent_id)){var n=Blockly.getMainWorkspace().getBlockById(this.required_parent_id);if(n)if(n.getInputTargetBlock("STACK")){var l=n.getLastConnectionInStatement("STACK");(0,i.j6)((function(){l.connect(e.previousConnection)}))}else(0,i.j6)((function(){n.getInput("STACK").connection.connect(a.previousConnection)}))}}}},onIconClick:Blockly.Blocks.lists_statement.onIconClick},Blockly.JavaScript.javascriptGenerator.forBlock.text_statement=function(t){return["String(".concat(Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TEXT",Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC),")"),Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC]},Blockly.Blocks.text_append={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("to {{ variable }} append text {{ input_text }}",{variable:"%1",input_text:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:(0,a.localize)("text")},{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Appends a given text to a variable"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,a.localize)("Text Append"),description:(0,a.localize)("Appends a given text to a variable.")}},getRequiredValueInputs:function(){return{TEXT:i.PZ}},customContextMenu:function(t){(0,i.xy)(t)}},Blockly.JavaScript.javascriptGenerator.forBlock.text_append=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.CATEGORY_NAME),o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TEXT",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"''",a="".concat(e," += ").concat(function(t){return/^\s*'([^']|\\')*'\s*$/.test(t)?t:"String(".concat(t,")")}(o),";\n");return a},Blockly.Blocks.text_length={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("length of {{ input_text }}",{input_text:"%1"}),args0:[{type:"input_value",name:"VALUE"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Text String Length"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Text String Length"),description:(0,a.localize)("Returns the number of characters of a given string of text, including numbers, spaces, punctuation marks, and symbols.")}},getRequiredValueInputs:function(){return{VALUE:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_length=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL)||"''";return["".concat(e,".length"),Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER]},Blockly.Blocks.text_isEmpty={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("text {{ input_text }} is empty",{input_text:"%1"}),args0:[{type:"input_value",name:"VALUE",check:["String"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Tests if a given text string is empty"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Text Is empty"),description:(0,a.localize)("Tests whether a string of text is empty. Returns a boolean value (true or false).")}},getRequiredValueInputs:function(){return{VALUE:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_isEmpty=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"''";return[-1!==t.workspace.getAllVariables().findIndex((function(t){return t.name===e}))?"!".concat(e," || !").concat(e,".length"):"!".concat(e,".length"),Blockly.JavaScript.javascriptGenerator.ORDER_LOGICAL_NOT]},Blockly.Blocks.text_indexOf={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("in text {{ input_text1 }} find {{ first_or_last }} occurence of text {{ input_text2 }}",{input_text1:"%1",first_or_last:"%2",input_text2:"%3"}),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"END",options:[[(0,a.localize)("first"),"FIRST"],[(0,a.localize)("last"),"LAST"]]},{type:"input_value",name:"FIND"}],inputsInline:!0,output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Search for a given string"),cateogry:Blockly.Categories.Text}},meta:function(){return{display_name:(0,a.localize)("Search for string"),description:(0,a.localize)("Searches through a string of text for a specific occurrence of a given character or word, and returns the position.")}},customContextMenu:function(t){(0,i.xy)(t)},getRequiredValueInputs:function(){return{VALUE:i.PZ,FIND:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_indexOf=function(t){var e="FIRST"===t.getFieldValue("END")?"indexOf":"lastIndexOf",o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"FIND",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"''",a=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"''",n="".concat(a,".").concat(e,"(").concat(o,")");return t.workspace.options.oneBasedIndex?["".concat(n," + 1"),Blockly.JavaScript.javascriptGenerator.ORDER_ADDITION]:[n,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_charAt={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("WHERE").setValidator((function(e){var o=["FROM_START","FROM_END"].includes(e);if(o!==t.isAt)return t.updateAt(o),t.setFieldValue(e,"WHERE"),null})),this.updateAt(!0)},customContextMenu:function(t){(0,i.xy)(t)},definition:function(){return{message0:(0,a.localize)("in text %1 get %2"),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"WHERE",options:[[(0,a.localize)("letter #"),"FROM_START"],[(0,a.localize)("letter # from end"),"FROM_END"],[(0,a.localize)("first letter"),"FIRST"],[(0,a.localize)("last letter"),"LAST"],[(0,a.localize)("random letter"),"RANDOM"]]}],inputsInline:!0,output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns a specific character from a given string"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,a.localize)("Get character"),description:(0,a.localize)("Returns the specific character from a given string of text according to the selected option. ")}},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("at",!!this.isAt),t},domToMutation:function(t){var e="false"!==t.getAttribute("at");this.updateAt(e)},updateAt:function(t){this.removeInput("AT",!0),t&&this.appendValueInput("AT").setCheck("Number"),this.isAt=t,this.initSvg(),this.renderEfficiently()},getRequiredValueInputs:function(){return{VALUE:i.PZ,AT:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_charAt=function(t){var e,o=t.getFieldValue("WHERE")||"FROM_START",a="RANDOM"===o?Blockly.JavaScript.javascriptGenerator.ORDER_NONE:Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER,n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"VALUE",a)||"''";if("FROM_START"===o){var i=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT");e="".concat(n,".charAt(").concat(i,")")}else if("FROM_END"===o){var l=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT",1,!0);e="".concat(n,".slice(").concat(l,").charAt(0)")}else if("FIRST"===o)e="".concat(n,".charAt(0)");else if("LAST"===o)e="".concat(n,".slice(-1)");else if("RANDOM"===o){var r=Blockly.JavaScript.javascriptGenerator.provideFunction_("textRandomLetter",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }")]);e="".concat(r,"(").concat(n,")")}return[e,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[(0,a.localize)("letter #"),"FROM_START"],[(0,a.localize)("letter # from end"),"FROM_END"],[(0,a.localize)("first"),"FIRST"]],this.WHERE_OPTIONS_2=[[(0,a.localize)("letter #"),"FROM_START"],[(0,a.localize)("letter # from end"),"FROM_END"],[(0,a.localize)("last"),"LAST"]],this.jsonInit(this.definition()),this.updateAt(1,!0),this.updateAt(2,!0)},customContextMenu:function(t){(0,i.xy)(t)},definition:function(){return{message0:(0,a.localize)("in text {{ input_text }} get substring from {{ position1 }} {{ index1 }} to {{ position2 }} {{ index2 }}",{input_text:"%1",position1:"%2",index1:"%3",position2:"%4",index2:"%5"}),args0:[{type:"input_value",name:"STRING"},{type:"field_dropdown",name:"WHERE1",options:this.WHERE_OPTIONS_1},{type:"input_dummy",name:"AT1"},{type:"field_dropdown",name:"WHERE2",options:this.WHERE_OPTIONS_2},{type:"input_dummy",name:"AT2"}],inputsInline:!0,output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Returns a specific portion of a given string of text."),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,a.localize)("Get substring"),description:(0,a.localize)("Returns a specific portion of a given string of text.")}},mutationToDom:function(){var t=document.createElement("mutation"),e=this.getInput("AT1").type===Blockly.INPUT_VALUE,o=this.getInput("AT2").type===Blockly.INPUT_VALUE;return t.setAttribute("at1",e),t.setAttribute("at2",o),t},domToMutation:function(t){var e="true"===t.getAttribute("at1"),o="true"===t.getAttribute("at2");this.updateAt(1,e),this.updateAt(2,o)},updateAt:function(t,e){var o,a=this,n=this.getInput("AT".concat(t));n&&(n.fieldRow.some((function(t){t instanceof Blockly.FieldLabel&&(o=t.text_)})),this.removeInput("AT".concat(t)));var i=e?this.appendValueInput("AT".concat(t)).setCheck("Number"):this.appendDummyInput("AT".concat(t));o&&i.insertFieldAt(0,new Blockly.FieldLabel(o));var l=new Blockly.FieldDropdown(this["WHERE_OPTIONS_".concat(t)],(function(o){var n=["FROM_START","FROM_END"].includes(o);if(n!==e)return a.updateAt(t,n),a.setFieldValue(o,"WHERE".concat(t)),null}));this.getInput("AT".concat(t)).appendField(l,"WHERE".concat(t)),1===t&&this.moveInputBefore("AT1","AT2"),this.initSvg(),this.renderEfficiently()},getRequiredValueInputs:function(){var t=this,e=function(e){var o;return(null===(o=t.getInput(e))||void 0===o?void 0:o.type)===Blockly.INPUT_VALUE};return T(T({STRING:i.PZ},e("AT1")?{AT1:i.PZ}:{}),e("AT2")?{AT2:i.PZ}:{})}},Blockly.JavaScript.javascriptGenerator.forBlock.text_getSubstring=function(t){var e,o,a,n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"STRING",Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL)||"''",i=t.getFieldValue("WHERE1"),l=t.getFieldValue("WHERE2");if("FIRST"===i&&"LAST"===l)a=n;else if(n.match(/^'?\w+'?$/)||"FROM_END"!==i&&"LAST"!==i&&"FROM_END"!==l&&"LAST"!==l){switch(i){case"FROM_START":e=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT1");break;case"FROM_END":e=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT1",1,!1,Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION),e="".concat(n,".length - ").concat(e);break;case"FIRST":e="0"}switch(l){case"FROM_START":o=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT2",1);break;case"FROM_END":o=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT2",0,!1,Blockly.JavaScript.javascriptGenerator.ORDER_SUBTRACTION),o="".concat(n,".length - ").concat(o);break;case"LAST":o="".concat(n,".length")}a="".concat(n,".slice(").concat(e,", ").concat(o,")")}else{e=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT1"),o=Blockly.JavaScript.javascriptGenerator.getAdjusted(t,"AT2");var r=function(t,e,o){return"FIRST"===e?"0":"FROM_END"===e?"".concat(t,".length - 1 - ").concat(o):"LAST"===e?"".concat(t,".length - 1"):o},c={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},s=Blockly.JavaScript.javascriptGenerator.provideFunction_("subsequence".concat(c[i]).concat(c[l]),["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(\n                    sequence\n                    ").concat("FROM_END"===i||"FROM_START"===i?", at1":"","\n                    ").concat("FROM_END"===l||"FROM_START"===l?", at2":"","\n                ) {\n                    var start = ").concat(r("sequence",i,"at1"),";\n                    var end   = ").concat(r("sequence",l,"at2")," + 1;\n                    \n                    return sequence.slice(start, end);\n                }")]);a="".concat(s,"(\n            ").concat(n,"\n            ").concat("FROM_END"===i||"FROM_START"===i?", ".concat(e):"","\n            ").concat("FROM_END"===l||"FROM_START"===l?", ".concat(o):"","\n        )")}return[a,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_changeCase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("Transform {{ input_text }} to {{ transform_type }}",{input_text:"%1",transform_type:"%2"}),args0:[{type:"input_value",name:"TEXT"},{type:"field_dropdown",name:"CASE",options:[[(0,a.localize)("UPPER CASE"),"UPPERCASE"],[(0,a.localize)("lower case"),"LOWERCASE"],[(0,a.localize)("Title Case"),"TITLECASE"]]}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Changes text case accordingly"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Change text case"),description:(0,a.localize)("Changes the capitalisation of a string of text to Upper case, Lower case, Title case.")}},getRequiredValueInputs:function(){return{TEXT:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_changeCase=function(t){var e,o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[t.getFieldValue("CASE")],a=o?Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER:Blockly.JavaScript.javascriptGenerator.ORDER_NONE,n=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TEXT",a)||"''";if(o)e="".concat(n).concat(o);else{var i=Blockly.JavaScript.javascriptGenerator.provideFunction_("textToTitleCase",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }")]);e="".concat(i,"(").concat(n,")")}return[e,Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_trim={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("trim spaces from {{ side }} of {{ input_text }}",{side:"%1",input_text:"%2"}),args0:[{type:"field_dropdown",name:"MODE",options:[[(0,a.localize)("both sides"),"BOTH"],[(0,a.localize)("left side"),"LEFT"],[(0,a.localize)("right side"),"RIGHT"]]},{type:"input_value",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,a.localize)("Trims spaces"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Trim spaces"),description:(0,a.localize)("Trims the spaces within a given string or text.")}},getRequiredValueInputs:function(){return{TEXT:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_trim=function(t){var e={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[t.getFieldValue("MODE")],o=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TEXT",Blockly.JavaScript.javascriptGenerator.ORDER_MEMBER)||"''";return["".concat(o).concat(e),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_print={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,a.localize)("print {{ input_text }}",{input_text:"%1"}),args0:[{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,a.localize)("Displays a dialog window with a message"),category:Blockly.Categories.Text}},customContextMenu:function(t){(0,i.xy)(t)},meta:function(){return{display_name:(0,a.localize)("Print"),description:(0,a.localize)('This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click "OK".')}},getRequiredValueInputs:function(){return{TEXT:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_print=function(t){var e=Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TEXT",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"''";return"window.alert(".concat(e,");\n")},Blockly.Blocks.text_prompt_ext={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("TYPE").setValidator((function(e){"TEXT"===e?t.setOutput(!0,"String"):"NUMBER"===e&&t.setOutput(!0,"Number"),t.initSvg(),t.renderEfficiently()}))},customContextMenu:function(t){(0,i.xy)(t)},definition:function(){return{message0:(0,a.localize)("prompt for {{ string_or_number }} with message {{ input_text }}",{string_or_number:"%1",input_text:"%2"}),args0:[{type:"field_dropdown",name:"TYPE",options:[[(0,a.localize)("string"),"TEXT"],[(0,a.localize)("number"),"NUMBER"]]},{type:"input_value",name:"TEXT"}],output:"function"==typeof this.getFieldValue&&"TEXT"===this.getFieldValue("TYPE")?"String":"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,tooltip:(0,a.localize)("Request an input"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,a.localize)("Request an input"),description:(0,a.localize)('This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click "OK".')}},getRequiredValueInputs:function(){return{TEXT:i.PZ}}},Blockly.JavaScript.javascriptGenerator.forBlock.text_prompt_ext=function(t){var e;return e=t.getField("TEXT")?Blockly.JavaScript.javascriptGenerator.quote_(t.getFieldValue("TEXT")):Blockly.JavaScript.javascriptGenerator.valueToCode(t,"TEXT",Blockly.JavaScript.javascriptGenerator.ORDER_NONE)||"''",["NUMBER"===t.getFieldValue("TYPE")?"parseFloat(window.prompt(".concat(e,"))"):"window.prompt(".concat(e,")"),Blockly.JavaScript.javascriptGenerator.ORDER_FUNCTION_CALL]}}}]);