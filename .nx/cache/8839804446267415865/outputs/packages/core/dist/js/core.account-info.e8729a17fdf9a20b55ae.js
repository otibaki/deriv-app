"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4773],{217984:(e,i,c)=>{c.r(i),c.d(i,{default:()=>E});var s=c(286326),a=c(597598),t=c.n(a),n=c(255530),r=c.n(n),l=c(557344),o=c(57886),_=c(33118),d=c(189137),u=c(919796),h=c(291218),g=c(679955),p=c(414646),v=c(413568),x=c(478784),m=c(922087),b=c(852691),y=c(836870);const w=e=>{let{currency:i,loginid:c,is_virtual:s}=e;return"MF"===c.replace(/\d/g,"")?(0,y.jsx)(_.Localize,{i18n_default_text:"Multipliers"}):s?(0,y.jsx)(_.Localize,{i18n_default_text:"Demo"}):i?(0,d.getCurrencyName)(i):(0,y.jsx)(_.Localize,{i18n_default_text:"No currency assigned"})},j=e=>{var i,c;let{has_error:a,market_type:t,sub_account_type:n,platform:l,server:u,product:h,is_dark_mode_on:g,is_eu:p,shortcode:v,should_show_server_name:x}=e;const m=(0,d.getCFDAccountDisplay)({market_type:t,sub_account_type:n,platform:l,is_eu:p,shortcode:v,product:h}),b=s.useCallback((e=>{if(e){var i;const a=null===(i=e.server_info)||void 0===i||null===(i=i.geolocation)||void 0===i?void 0:i.region;var c,s;if(a)return`${a} ${1===(null==e||null===(c=e.server_info)||void 0===c||null===(c=c.geolocation)||void 0===c?void 0:c.sequence)?"":null==e||null===(s=e.server_info)||void 0===s||null===(s=s.geolocation)||void 0===s?void 0:s.sequence}`}return""}),[]);if(a)return(0,y.jsxs)("div",{children:[(0,y.jsx)(o.Text,{color:"disabled",size:"xs",children:(0,y.jsx)(_.Localize,{i18n_default_text:"Unavailable"})}),(null==u||null===(i=u.server_info)||void 0===i?void 0:i.geolocation)&&x&&"synthetic"===t&&"svg"===v&&(0,y.jsx)(o.Text,{color:"less-prominent",size:"xxs",className:"badge-server badge-server--disabled",children:b(u)})]});const w=(0,d.isBot)();return(0,y.jsxs)("div",{children:["dxtrade"===l&&m===(0,_.localize)("Derived")?(0,_.localize)("Synthetic"):m,(null==u||null===(c=u.server_info)||void 0===c?void 0:c.geolocation)&&x&&"synthetic"===t&&"svg"===v&&(0,y.jsx)(o.Text,{color:g?"general":"colored-background",size:"xxs",className:r()("badge-server",{"badge-server-bot":w}),children:b(u)})]})},f=e=>{let{balance:i,currency:c,currency_icon:a,display_type:t,has_balance:n,has_error:l,has_reset_balance:u,is_dark_mode_on:h,is_disabled:g,is_virtual:p,is_eu:v,product:x,loginid:m,market_type:b,redirectAccount:f,onClickResetVirtualBalance:N,selected_loginid:C,server:k,shortcode:z,sub_account_type:A,platform:D,should_show_server_name:T}=e;const S=c?a:"IcCurrencyUnknown";return(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{id:`dt_${m}`,className:r()("acc-switcher__account",{"acc-switcher__account--selected":m===C,"acc-switcher__account--disabled":g}),onClick:()=>{g||f()},children:(0,y.jsxs)("span",{className:"acc-switcher__id",children:[(0,y.jsx)(o.Icon,{icon:p?"IcCurrencyVirtual":S,className:"acc-switcher__id-icon",size:24}),(0,y.jsxs)("span",{children:["currency"===t?(0,y.jsx)(w,{currency:c,loginid:m,is_virtual:p}):(0,y.jsx)(j,{is_eu:v,market_type:b,server:k,sub_account_type:A,has_error:l,platform:D,product:x,is_dark_mode_on:h,shortcode:z,should_show_server_name:T}),(0,y.jsx)("div",{className:r()("acc-switcher__loginid-text",{"acc-switcher__loginid-text--disabled":l}),children:m})]}),u?(0,y.jsx)(o.Button,{is_disabled:g,onClick:e=>{e.stopPropagation(),N()},className:"acc-switcher__reset-account-btn",secondary:!0,small:!0,children:(0,_.localize)("Reset balance")}):n&&(0,y.jsx)(o.Text,{size:"xs",color:"prominent",styles:{fontWeight:"inherit"},className:"acc-switcher__balance",children:c&&(0,y.jsx)(o.Money,{currency:(0,d.getCurrencyDisplayCode)(c),amount:(0,d.formatMoney)(c,i,!0),should_format:!1,show_currency:!0})})]})})})},N=e=>{let{children:i,header:c,is_visible:s,toggleVisibility:a}=e;return(0,y.jsx)(o.ContentExpander,{className:"acc-switcher",title:c,is_expanded:s,onToggle:a,is_title_spaced:!0,children:i})};N.propTypes={children:t().node,header:t().oneOfType([t().object,t().string]),is_visible:t().bool,toggleVisibility:t().func};const C=N,k=(e,i)=>[...e].sort(((e,c)=>{const s=i[e.loginid].currency,a=i[c.loginid].currency,t=(0,d.isCryptocurrency)(s),n=(0,d.isCryptocurrency)(a),r=!t,l=!n;return e.is_virtual||c.is_virtual?e.is_virtual?1:-1:t&&n||r&&l?s<a?-1:1:r&&n?-1:1})),z=e=>[...e].sort(((e,i)=>{const c=A(e),s=A(i);return c&&!s?1:s&&!c||"gaming"===e.market_type||"synthetic"===e.market_type?-1:"financial"===e.sub_account_type?"gaming"===i.market_type||"synthetic"===i.market_type?1:-1:1})),A=e=>"demo"===e.account_type,D=(0,g.observer)((e=>{var i,c,a;let{history:t,is_mobile:n,is_visible:l}=e;const{client:u,ui:h,traders_hub:g}=(0,p.A)(),{available_crypto_currencies:w,loginid:j,accounts:N,account_type:D,account_list:T,currency:S,is_eu:I,is_landing_company_loaded:L,is_low_risk:M,is_high_risk:R,is_logged_in:F,is_virtual:E,has_fiat:W,mt5_login_list:U,logout:$,obj_total_balance:B,switchAccount:V,resetVirtualBalance:O,has_active_real_account:P,upgradeable_landing_companies:G,real_account_creation_unlock_date:q,has_any_real_account:H,virtual_account_loginid:K,has_maltainvest_account:Y}=u,{show_eu_related_content:J,content_flag:Q,selectRegion:X,setTogglePlatformType:Z}=g,{is_dark_mode_on:ee,is_positions_drawer_on:ie,openRealAccountSignup:ce,toggleAccountsDialog:se,togglePositionsDrawer:ae,toggleSetCurrencyModal:te,should_show_real_accounts_list:ne,setShouldShowCooldownModal:re,setIsForcedToExitPnv:le}=h,[oe,_e]=s.useState(!E||ne?0:1),[de,ue]=s.useState(!0),[he,ge]=s.useState(!0),[pe,ve]=s.useState(!0),[xe,me]=s.useState(!0),be=s.useRef(),ye=s.useRef(null),we=B.currency,je=null===(i=T.find((e=>e.is_virtual)))||void 0===i?void 0:i.loginid,fe=N[je]?N[je].currency:"USD",Ne=e=>{switch(e){case"demo_deriv":return ue(!de);case"real_deriv":return ge(!he);case"non-eu-regulator":return ve(!pe);case"eu-regulator":return me(!xe);default:return!1}},{oAuthLogout:Ce}=(0,v.A)({handleLogout:async()=>{window.location.pathname.startsWith(d.routes.bot)?(await $(),t.push(d.routes.traders_hub)):(window.location.pathname.startsWith(d.routes.phone_verification)&&(le(!0),await new Promise((e=>setTimeout(e,0)))),t.push(d.routes.traders_hub),await $())}}),ke=()=>{se(!1)};(0,o.useOnClickOutside)(be,ke,(e=>l&&!e.target.classList.contains("acc-info")));const ze=async e=>{ke(),j!==e&&await V(e)},Ae=async()=>{ke(),O()},De=0===oe,Te=1===oe,Se=()=>J||E||!(w.length<1&&!W||!E)||M?G:[],Ie=(0,x.A)();if(!F)return!1;const Le=e=>(null==e?void 0:e.is_virtual)&&1e4!==(null==e?void 0:e.balance),Me=()=>{const e=[];return(()=>{if(L)return Q===d.ContentFlag.LOW_RISK_CR_NON_EU?z(U).filter((e=>!A(e)&&"maltainvest"!==e.landing_company_short)):z(U).filter((e=>!A(e)));return[]})().map((i=>{"svg"===i.landing_company_short&&"synthetic"===i.market_type&&(e.length?e.forEach((c=>(c.server!==i.server&&e.push(i),e))):e.push(i))})),e.length>1},Re=e=>k(T,N).filter((i=>!i.is_virtual&&i.loginid.startsWith(e))).length>1,Fe=null===(c=T.find((e=>{var i;return null===(i=e.loginid)||void 0===i?void 0:i.startsWith("CR")})))||void 0===c?void 0:c.loginid,Ee=(0,y.jsx)("div",{className:"acc-switcher__list-wrapper",children:je&&(0,y.jsx)(C,{header:(0,_.localize)("Deriv account"),is_visible:de,toggleVisibility:()=>{Ne("demo_deriv")},children:(0,y.jsx)("div",{className:"acc-switcher__accounts",children:k(T,N).filter((e=>e.is_virtual)).map((e=>(0,y.jsx)(f,{is_dark_mode_on:ee,balance:N[e.loginid].balance,currency:N[e.loginid].currency,currency_icon:`IcCurrency-${e.icon}`,display_type:"currency",has_balance:"balance"in N[e.loginid],has_reset_balance:Le(N[j]),is_disabled:e.is_disabled,is_virtual:e.is_virtual,loginid:e.loginid,product:e.product,redirectAccount:e.is_disabled?void 0:()=>ze(e.loginid),onClickResetVirtualBalance:Ae,selected_loginid:j},e.loginid)))})})}),We=(0,y.jsx)("div",{ref:ye,className:"acc-switcher__list-wrapper",children:(0,y.jsxs)(s.Fragment,{children:[!I||M?(0,y.jsxs)(s.Fragment,{children:[(0,y.jsxs)(C,{className:"acc-switcher__title",header:M&&Y?(0,_.localize)("Non-EU Deriv "+(Re("CR")?"accounts":"account")):(0,_.localize)("Deriv "+(Re("CR")?"accounts":"account")),is_visible:pe,toggleVisibility:()=>{Ne("real_deriv")},children:[(0,y.jsx)("div",{className:"acc-switcher__accounts",children:k(T,N).filter((e=>!e.is_virtual&&e.loginid.startsWith("CR"))).map((e=>(0,y.jsx)(f,{account_type:D,is_dark_mode_on:ee,balance:N[e.loginid].balance,currency:N[e.loginid].currency,currency_icon:`IcCurrency-${e.icon}`,display_type:"currency",has_balance:"balance"in N[e.loginid],is_disabled:e.is_disabled,is_virtual:e.is_virtual,is_eu:I,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:()=>ze(e.loginid),selected_loginid:j,should_show_server_name:Me()},e.loginid)))}),!Fe&&Se().filter((e=>"svg"===e)).map(((e,i)=>(0,y.jsxs)("div",{className:"acc-switcher__new-account",children:[(0,y.jsx)(o.Icon,{icon:"IcDeriv",size:24}),(0,y.jsx)(o.Text,{size:"xs",color:"general",className:"acc-switcher__new-account-text",children:(0,m.S)(e)}),(0,y.jsx)(o.Button,{id:"dt_core_account-switcher_add-new-account",onClick:()=>{q?(ke(),re(!0)):(X("Non-EU"),ce("svg"))},className:"acc-switcher__new-account-btn",secondary:!0,small:!0,children:(0,_.localize)("Add")})]},i)))]}),(0,y.jsx)("div",{className:"acc-switcher__separator"})]}):null,!R&&Y||I?(0,y.jsxs)(C,{header:M&&Y?(0,_.localize)("EU Deriv "+(Re("MF")?"accounts":"account")):(0,_.localize)("Deriv "+(Re("MF")?"accounts":"account")),is_visible:xe,toggleVisibility:()=>{Ne("real_deriv")},children:[(0,y.jsx)("div",{className:"acc-switcher__accounts",children:k(T,N).filter((e=>!e.is_virtual&&e.loginid.startsWith("MF"))).map((e=>(0,y.jsx)(f,{account_type:D,is_dark_mode_on:ee,balance:N[e.loginid].balance,currency:N[e.loginid].currency,currency_icon:`IcCurrency-${e.icon}`,display_type:"currency",has_balance:"balance"in N[e.loginid],is_disabled:e.is_disabled,is_virtual:e.is_virtual,is_eu:I,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:()=>ze(e.loginid),selected_loginid:j,should_show_server_name:Me()},e.loginid)))}),Se().filter((e=>"maltainvest"===e)).map(((e,i)=>(0,y.jsxs)("div",{className:"acc-switcher__new-account",children:[(0,y.jsx)(o.Icon,{icon:"IcDeriv",size:24}),(0,y.jsx)(o.Text,{size:"xs",color:"general",className:"acc-switcher__new-account-text",children:(0,m.S)(e)}),(0,y.jsx)(o.Button,{id:"dt_core_account-switcher_add-new-account",onClick:()=>{q?(ke(),re(!0)):(X("EU"),ce("maltainvest"))},className:"acc-switcher__new-account-btn",secondary:!0,small:!0,children:(0,_.localize)("Add")})]},i)))]}):null]})}),Ue=null==T||null===(a=T.find((e=>/^(CR|MF)/.test(e.loginid))))||void 0===a?void 0:a.loginid,$e=()=>{const e=()=>(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("div",{className:"acc-switcher__traders-hub",children:(0,y.jsx)(b.Sm,{onClick:async()=>{!E&&Te?await V(K):E&&De&&await V(Ue),se(!1),t.push(d.routes.traders_hub),Z("cfd")},className:"acc-switcher__traders-hub--link",children:(0,y.jsx)(o.Text,{size:"xs",align:"center",className:"acc-switcher__traders-hub--text",children:(0,y.jsx)(_.Localize,{i18n_default_text:"Looking for CFD accounts? Go to Trader's Hub"})})})}),(0,y.jsx)("div",{className:"acc-switcher__separator"})]});return De&&H||Te?(0,y.jsx)(e,{}):null};return(0,y.jsx)("div",{className:"acc-switcher__list",ref:be,"data-testid":"acc-switcher",children:L?(0,y.jsxs)(s.Fragment,{children:[(0,y.jsxs)(o.Tabs,{active_index:oe,className:"acc-switcher__list-tabs",onTabItemClick:e=>_e(e),top:!0,children:[(0,y.jsxs)("div",{label:(0,_.localize)("Real"),id:"real_account_tab",children:[(0,y.jsx)(o.DesktopWrapper,{children:(0,y.jsx)(o.ThemedScrollbars,{height:"354px",children:We})}),(0,y.jsx)(o.MobileWrapper,{children:(0,y.jsx)(o.Div100vhContainer,{className:"acc-switcher__list-container",max_autoheight_offset:"234px",children:We})})]}),(0,y.jsxs)("div",{label:(0,_.localize)("Demo"),id:"dt_core_account-switcher_demo-tab",children:[(0,y.jsx)(o.DesktopWrapper,{children:(0,y.jsx)(o.ThemedScrollbars,{height:"354px",children:Ee})}),(0,y.jsx)(o.MobileWrapper,{children:(0,y.jsx)(o.Div100vhContainer,{className:"acc-switcher__list-container",max_autoheight_offset:"234px",children:Ee})})]})]}),(0,y.jsx)("div",{className:r()("acc-switcher__separator",{"acc-switcher__separator--auto-margin":n})}),(0,y.jsxs)("div",{className:"acc-switcher__total",children:[(0,y.jsx)(o.Text,{line_height:"s",size:"xs",weight:"bold",color:"prominent",children:(0,y.jsx)(_.Localize,{i18n_default_text:"Total assets"})}),(0,y.jsx)(o.Text,{size:"xs",color:"prominent",className:"acc-switcher__balance",children:(0,y.jsx)(o.Money,{currency:De?we:fe,amount:(0,d.formatMoney)(De?we:fe,De?B.amount_real:N[je]?N[je].balance:0,!0),show_currency:!0,should_format:!1})})]}),(0,y.jsx)(o.Text,{color:"less-prominent",line_height:"xs",size:"xxxs",className:"acc-switcher__total-subtitle",children:(0,_.localize)("Total assets in your Deriv accounts.")}),(0,y.jsx)("div",{className:"acc-switcher__separator"}),(0,y.jsx)($e,{}),(0,y.jsxs)("div",{className:"acc-switcher__footer",children:[De&&P&&!E&&(0,y.jsx)(o.Button,{className:"acc-switcher__btn--traders_hub",secondary:!0,onClick:!H||Ie&&S?()=>ce("manage"):()=>{ke(),te()},children:(0,_.localize)("Manage accounts")}),(0,y.jsxs)("div",{id:"dt_logout_button",className:"acc-switcher__logout",onClick:async()=>{ke(),ie&&ae(),await Ce()},children:[(0,y.jsx)(o.Text,{color:"prominent",size:"xs",align:"left",className:"acc-switcher__logout-text",children:(0,_.localize)("Log out")}),(0,y.jsx)(o.Icon,{icon:"IcLogout",className:"acc-switcher__logout-icon drawer__icon"})]})]})]}):(0,y.jsx)(o.Loading,{is_fullscreen:!1})})}));D.propTypes={is_visible:t().bool,history:t().object};const T=(0,h.withRouter)(D),S=e=>{const{disableApp:i,enableApp:c,is_visible:s,is_upgrade_enabled:a,toggle:t}=e;return(0,y.jsx)(o.Modal,{id:"dt_account_switcher_modal",className:"accounts-switcher",enableApp:c,is_open:s,is_vertical_top:!0,disableApp:i,has_close_icon:!1,toggleModal:t,height:"auto",width:"calc(100vw - 32px)",children:(0,y.jsx)(o.Div100vhContainer,{className:r()("acc-switcher__wrapper","acc-switcher__wrapper--is-mobile"),max_autoheight_offset:"48px",children:(0,y.jsx)(T,{is_mobile:!0,is_visible:!0,toggle:t,is_upgrade_enabled:a})})})};S.propTypes={children:t().any,disableApp:t().func,enableApp:t().func,is_visible:t().bool,is_upgrade_enabled:t().bool,onClose:t().func,title:t().string,toggle:t().func,visible:t().bool,wrapperClassName:t().string};const I=S;var L=c(141929);const M=e=>{let{is_virtual:i,currency:c}=e;return(0,y.jsx)(o.Icon,{data_testid:"dt_icon",icon:`IcCurrency-${i?"virtual":null!=c?c:"Unknown"}`,className:`acc-info__id-icon acc-info__id-icon--${i?"virtual":c}`,size:24})},R=e=>{let{account_type:i,is_eu:c}=e;return"financial"===i?(0,y.jsx)(_.Localize,{i18n_default_text:"Multipliers"}):"gaming"===i?c?(0,y.jsx)(_.Localize,{i18n_default_text:"Options"}):(0,y.jsx)(_.Localize,{i18n_default_text:"Derived"}):null},F=e=>{let{acc_switcher_disabled_message:i,account_type:c="",balance:s,currency:a,disableApp:t,enableApp:n,is_dialog_on:h,is_eu:g,is_virtual:p,toggleDialog:v,is_disabled:x,is_mobile:m}=e;const b=null==a?void 0:a.toLowerCase(),{isDesktop:w}=(0,u.Y)();return(0,y.jsxs)("div",{className:"acc-info__wrapper",children:[(0,y.jsx)("div",{className:"acc-info__separator"}),(0,y.jsx)(L.A,{is_disabled:x,disabled_message:i,is_mobile:m,children:(0,y.jsxs)("div",{"data-testid":"dt_acc_info",id:"dt_core_account-info_acc-info",className:r()("acc-info",{"acc-info--show":h,"acc-info--is-virtual":p,"acc-info--is-disabled":x}),onClick:x?void 0:()=>v(),children:[(0,y.jsx)("span",{className:"acc-info__id",children:(w||p||a)&&(0,y.jsx)(M,{is_virtual:p,currency:b})}),(void 0!==s||!a)&&(0,y.jsxs)("div",{className:"acc-info__account-type-and-balance",children:[(0,y.jsx)("p",{"data-testid":"dt_balance",className:r()("acc-info__balance",{"acc-info__balance--no-currency":!a&&!p}),children:a?`${s} ${(0,d.getCurrencyDisplayCode)(a)}`:(0,y.jsx)(_.Localize,{i18n_default_text:"No currency assigned"})}),(0,y.jsx)(o.Text,{size:"xxxs",line_height:"s",children:(0,y.jsx)(R,{account_type:c,is_eu:g})})]}),x?(0,y.jsx)(o.Icon,{data_testid:"dt_lock_icon",icon:"IcLock"}):(0,y.jsx)(o.Icon,{data_testid:"dt_select_arrow",icon:"IcChevronDownBold",className:"acc-info__select-arrow"})]})}),w?(0,y.jsx)(l.A,{in:h,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},unmountOnExit:!0,children:(0,y.jsx)("div",{className:"acc-switcher__wrapper",children:(0,y.jsx)(T,{is_visible:h,toggle:v})})}):(0,y.jsx)(I,{is_visible:h,disableApp:t,enableApp:n,toggle:v})]})};F.propTypes={acc_switcher_disabled_message:t().string,account_type:t().string,balance:t().string,currency:t().string,disableApp:t().func,enableApp:t().func,is_dialog_on:t().bool,is_disabled:t().bool,is_eu:t().bool,is_virtual:t().bool,is_mobile:t().bool,loginid:t().string,toggleDialog:t().func};const E=F},922087:(e,i,c)=>{c.d(i,{S:()=>t,fN:()=>a,yt:()=>n});var s=c(33118);const a={SUCCESS:1,WARN:0,DANGER:-1,PENDING:-2},t=e=>{switch(e){case"svg":return(0,s.localize)("Options & Multipliers");case"maltainvest":return(0,s.localize)("Multipliers");default:return(0,s.localize)("Deriv")}},n=e=>{const{landing_company_shortcode:i=""}=e;return a.SUCCESS}},654846:(e,i,c)=>{c.d(i,{A:()=>a});var s=c(414646);const a=()=>{const{client:e}=(0,s.A)(),{active_accounts:i}=e;return i.some((e=>0===e.is_virtual))}},478784:(e,i,c)=>{c.d(i,{A:()=>t});var s=c(414646),a=c(654846);const t=()=>{const{client:e}=(0,s.A)(),{account_list:i}=e,c=(0,a.A)();return i.filter((e=>!e.is_virtual)).some((e=>"Real"!==e.title&&"Investment"!==e.title))||!c}}}]);
//# sourceMappingURL=core.account-info.e8729a17fdf9a20b55ae.js.map