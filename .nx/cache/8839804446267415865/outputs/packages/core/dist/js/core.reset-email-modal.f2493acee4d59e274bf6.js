"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[243],{217763:(e,a,i)=>{i.r(a),i.d(a,{default:()=>v});var t=i(286326),l=i(255530),s=i.n(l),n=i(824223),o=i(57886),r=i(189137),c=i(33118),m=i(596176),d=i(919796),_=i(712949),u=i(836870);const h=e=>{let{identifier_title:a,is_modal_when_mobile:i=!1,is_open:t,has_live_chat:l=!1,onClickSendEmail:s,onClose:n}=e;const{isDesktop:c}=(0,d.Y)(),{localize:h}=(0,m.useTranslations)(),p=l?(0,u.jsx)(m.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[(0,u.jsx)("span",{className:"send-email-template__footer-live-chat",onClick:()=>{n(),_.Chat.open()},children:(0,u.jsx)(o.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:h("Live chat"),zIndex:"9999"})},0)]}):null,x=(0,u.jsx)(o.SendEmailTemplate,{className:"sent-email",subtitle:(()=>{let e="";switch(a){case r.CFD_PLATFORMS.DXTRADE:e=(0,u.jsx)(m.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[(0,u.jsx)("span",{className:"send-email-template__subtitle-platform"},0)],values:{platform_name_dxtrade:(0,r.getPlatformSettings)("dxtrade").name}});break;case r.CFD_PLATFORMS.MT5:e=h("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":e=h("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:a});break;case"Change_Email":e=h("Check your email and click the link in the email to proceed.");break;default:e=h("Please click on the link in the email to reset your password.")}return e})(),title:h("We’ve sent you an email"),lbl_no_receive:h("Didn't receive the email?"),txt_resend:h("Resend email"),txt_resend_in:h("Resend email in"),onClickSendEmail:s,live_chat:p,children:[{key:"email_spam",icon:"IcEmailSpam",content:(0,m.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,m.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,m.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,m.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((e=>(0,u.jsxs)("div",{className:"sent-email__content",children:[(0,u.jsx)(o.Icon,{icon:e.icon,size:32}),(0,u.jsx)(o.Text,{size:"xxs",as:"p",children:e.content})]},e.key)))});return c||i?(0,u.jsx)(o.Modal,{className:"sent-email__modal",is_open:t,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:n,width:"440px",children:(0,u.jsx)(o.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:c,height_offset:"80px",children:(0,u.jsxs)(o.Modal.Body,{children:[(0,u.jsx)("div",{onClick:n,className:"send-email-template__close","data-testid":"dt_send_email_template_close",children:(0,u.jsx)(o.Icon,{icon:"IcCross"})}),x]})})}):(0,u.jsx)(o.MobileDialog,{portal_element_id:"modal_root",title:h("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:t,onClose:n,has_content_scroll:!0,children:x})};var p=i(679955),x=i(414646);function g(e,a){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),i.push.apply(i,t)}return i}function f(e){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?g(Object(i),!0).forEach((function(a){b(e,a,i[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))}))}return e}function b(e,a,i){return(a=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var t=i.call(e,a||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,e}const j=(0,p.observer)((e=>{let{changed_email:a,is_open:i,onClose:l,prev_email:s,setErrorMessage:n,setEmailValue:m}=e;const[d,_]=t.useState(null),[p,g]=t.useState(!1),[b,j]=t.useState(i),{client:v}=(0,x.A)(),{verification_code:y,setVerificationCode:k}=v,w=()=>{r.WS.changeEmail(d)};return p?(0,u.jsx)(h,{is_open:p,onClose:()=>g(!1),identifier_title:"Change_Email",onClickSendEmail:w,has_live_chat:!0,is_modal_when_mobile:!0}):(0,u.jsx)(o.Modal,{is_open:b,should_header_stick_body:!0,title:(0,u.jsx)(c.Localize,{i18n_default_text:"Are you sure?"}),toggleModal:l,width:"440px",has_close_icon:!1,children:(0,u.jsxs)(t.Fragment,{children:[(0,u.jsx)("div",{className:"email-confirmation",children:(0,u.jsx)(o.Text,{as:"p",color:"prominent",size:"xs",align:"left",children:(0,u.jsx)(c.Localize,{i18n_default_text:"Are you sure you want to update email <0>{{prev_email}}</0> to <1>{{changed_email}}</1>?",values:{prev_email:s,changed_email:a},components:[(0,u.jsx)("strong",{},0),(0,u.jsx)("strong",{className:"email-confirmation__currentEmail"},1)]})})}),(0,u.jsxs)(o.Modal.Footer,{children:[(0,u.jsx)(o.Button,{onClick:l,has_effect:!0,text:(0,c.localize)("Cancel"),secondary:!0,large:!0}),(0,u.jsx)(o.Button,{className:"email-change_button",has_effect:!0,onClick:()=>{(()=>{const e={change_email:"verify",new_email:a,verification_code:y.request_email};_((a=>f(f({},a),e))),r.WS.changeEmail(e).then((e=>{j(!1),e.error?(l(),m(a),n(e.error.message)):g(!0),(0,r.removeActionParam)("request_email"),k("","request_email")}))})()},primary:!0,large:!0,children:(0,u.jsx)(c.Localize,{i18n_default_text:"Confirm"})})]})]})})})),v=(0,p.observer)((()=>{const{ui:e,client:a}=(0,x.A)(),{disableApp:i,enableApp:l,is_loading:m,is_reset_email_modal_visible:d,toggleResetEmailModal:_}=e,{email:h}=a,[p,g]=t.useState(!1),[f,b]=t.useState(""),[v,y]=t.useState(""),k={email:v};return p?(0,u.jsx)(j,{changed_email:v,is_open:p,onClose:()=>g(!1),prev_email:h,setErrorMessage:b,setEmailValue:y}):(0,u.jsx)(n.Formik,{initialValues:k,initialStatus:{reset_complete:!1,error_msg:""},validate:e=>{const a={};return e.email?(0,r.validEmail)(e.email)||(a.email=(0,r.getErrorMessages)().email()):a.email=(0,c.localize)("The email input should not be empty."),a},onSubmit:e=>{y(e.email),g(!0)},children:e=>{let{errors:a,values:r,touched:h,isSubmitting:p,handleBlur:x,handleChange:g,setFieldTouched:j,status:v}=e;return(0,u.jsx)(o.Dialog,{is_visible:d,disableApp:i,enableApp:l,is_loading:m,dismissable:v.error_msg||f,onConfirm:()=>_(!1),is_closed_on_cancel:!1,children:(0,u.jsx)("div",{className:"reset-email",children:(0,u.jsx)(n.Form,{children:(0,u.jsx)(t.Fragment,{children:v.reset_complete?(0,u.jsxs)("div",{className:"reset-email__email-selection",children:[(0,u.jsx)(o.Text,{as:"p",weight:"bold",className:"reset-email__heading",children:(0,u.jsx)(c.Localize,{i18n_default_text:"Your password has been changed"})}),(0,u.jsx)(o.Text,{align:"center",as:"p",size:"xxs",className:"reset-email__subtext",children:(0,u.jsx)(c.Localize,{i18n_default_text:"We will now redirect you to the login page."})})]}):(0,u.jsxs)("div",{className:"reset-email__email-selection",children:[(0,u.jsx)(o.Text,{as:"p",align:"left",weight:"bold",className:"reset-email__heading",children:(0,u.jsx)(c.Localize,{i18n_default_text:"Enter a new email address"})}),(0,u.jsx)(o.Text,{as:"p",color:"prominent",size:"xs",align:"left",className:"reset-email__descripton",children:(0,u.jsx)(c.Localize,{i18n_default_text:"You'll log in to your Deriv account with this email address."})}),(0,u.jsx)("fieldset",{className:"reset-email__fieldset",children:(0,u.jsx)(o.Input,{"data-lpignore":"true",type:"text",name:"email",id:"email",placeholder:(0,c.localize)("Email address"),value:r.email,required:!0,error:h.email&&a.email||f,onBlur:x,onChange:e=>{b(""),j("email",!0),g(e)}})}),(0,u.jsx)(o.Button,{className:s()("reset-email__btn",{"reset-email__btn--disabled":!r.email||a.email||p}),type:"submit",is_disabled:!r.email||!!a.email||p||!!f,primary:!0,large:!0,children:(0,u.jsx)(c.Localize,{i18n_default_text:"Confirm"})})]})})})})})}})}))}}]);
//# sourceMappingURL=core.reset-email-modal.f2493acee4d59e274bf6.js.map