"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trade-modals"],{"./src/App/Containers/Modals/index.ts":(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var a=r("react"),n=r.n(a),o=r("@deriv/shared"),i=r("@deriv/components"),l=r("@deriv/translations"),c=r("mobx-react-lite"),s=r("../stores/src/useStore.ts");const d=(0,c.observer)((function(e){var t=e.is_loading,r=e.onCancel,a=e.onConfirm,c=(0,s.A)().ui,d=c.disableApp,u=c.enableApp,m=c.has_only_forward_starting_contracts;return n().createElement(i.Dialog,{className:"market-unavailable-modal",title:(0,l.localize)("Weâ€™re working on it"),confirm_button_text:(0,l.localize)("Stay on {{platform_name_trader}}",{platform_name_trader:(0,o.getPlatformSettings)("trader").name}),cancel_button_text:(0,l.localize)("Go to {{platform_name_smarttrader}}",{platform_name_smarttrader:(0,o.getPlatformSettings)("smarttrader").name}),onConfirm:a,onCancel:r,is_mobile_full_width:!1,is_visible:m,disableApp:d,enableApp:u,is_loading:t},n().createElement(l.Localize,{i18n_default_text:"This market is not yet available on {{platform_name_trader}}, but it is on {{platform_name_smarttrader}}.",values:{platform_name_trader:(0,o.getPlatformSettings)("trader").name,platform_name_smarttrader:(0,o.getPlatformSettings)("smarttrader").name}}))}));var u=function(e){switch(e){case"buy":return(0,l.localize)("Purchase Error");case"cancel":return(0,l.localize)("Deal Cancellation Error");case"contract_update":return(0,l.localize)("Contract Update Error");case"sell":return(0,l.localize)("Sell Error");default:return"Error"}};const m=function(e){var t=e.is_visible,r=e.toggleModal,a=e.is_logged_in;return n().createElement(i.Modal,{id:"dt_authorization_required_modal",is_open:t,small:!0,toggleModal:r,title:(0,l.localize)("Start trading with us")},n().createElement(i.Modal.Body,null,(0,l.localize)("Log in or create a free account to place a trade.")),n().createElement(i.Modal.Footer,null,n().createElement(i.Button,{has_effect:!0,text:(0,l.localize)("Log in"),onClick:function(){return(0,o.redirectToLogin)(a,(0,l.getLanguage)())},secondary:!0}),n().createElement(i.Button,{has_effect:!0,text:(0,l.localize)("Create free account"),onClick:function(){return(0,o.redirectToSignUp)()},primary:!0})))};var _=r("react-router-dom"),f=(0,c.observer)((function(e){var t=e.history,r=e.is_virtual,a=e.is_visible,c=e.message,d=e.toggleModal,u=(0,s.A)(),m=u.ui.is_mobile,_=u.client.has_wallet;return n().createElement(i.Modal,{id:"dt_insufficient_balance_modal",is_open:a,small:!0,is_vertical_centered:m,toggleModal:d,title:(0,l.localize)("Insufficient balance")},n().createElement(i.Modal.Body,null,c),n().createElement(i.Modal.Footer,null,n().createElement(i.Button,{has_effect:!0,text:r?(0,l.localize)("OK"):(0,l.localize)("Deposit now"),onClick:function(){var e;r?d():null==t||null===(e=t.push)||void 0===e||e.call(t,_?o.routes.wallets_deposit:o.routes.cashier_deposit)},primary:!0})))}));const g=(0,_.withRouter)(f),v=(0,c.observer)((function(e){var t=e.is_visible,r=e.onConfirm,a=(0,s.A)().ui.is_mobile;return n().createElement(i.Modal,{is_open:t,small:!0,is_vertical_centered:a,toggleModal:r,title:(0,l.localize)("Purchase Error")},n().createElement(i.Modal.Body,null,n().createElement(l.Localize,{i18n_default_text:"No further trading is allowed on this contract type for the current trading session. For more info, refer to our <0>terms and conditions</0>.",components:[n().createElement(i.StaticUrl,{key:0,className:"link",href:"tnc/trading-terms.pdf",is_document:!0})]})),n().createElement(i.Modal.Footer,null,n().createElement(i.Button,{has_effect:!0,text:(0,l.localize)("OK"),onClick:r,primary:!0})))})),p=(0,c.observer)((function(e){var t=e.is_visible,r=e.onConfirm,a=(0,_.useHistory)(),c=(0,s.A)().ui.is_mobile;return n().createElement(i.Modal,{is_open:t,is_vertical_centered:c,className:"account-verification-required-modal",toggleModal:r,title:(0,l.localize)("Account verification required"),width:"440px",height:c?"auto":"220px"},n().createElement(i.Modal.Body,{className:"account-verification-required-modal-text"},n().createElement(l.Localize,{i18n_default_text:"Please submit your proof of identity and proof of address to verify your account and continue trading."})),n().createElement("div",{className:"account-verification-required-modal-button"},n().createElement(i.Modal.Footer,null,n().createElement(i.Button,{has_effect:!0,text:(0,l.localize)("Submit Proof"),onClick:function(){return a.push(o.routes.proof_of_identity)},primary:!0}))))})),b=function(e){var t=e.is_virtual,r=e.is_visible,a=e.is_logged_in,o=e.onConfirm,c=e.services_error,s=c.code,d=c.message,_=c.type;if(!s||!d)return n().createElement(n().Fragment,null);switch(s){case"AuthorizationRequired":return n().createElement(m,{is_logged_in:a,is_visible:r,toggleModal:o});case"InsufficientBalance":return n().createElement(g,{is_virtual:t,is_visible:r,message:d,toggleModal:o});case"CompanyWideLimitExceeded":return n().createElement(v,{is_visible:r,onConfirm:o});case"PleaseAuthenticate":return n().createElement(p,{is_visible:r,onConfirm:o});default:return n().createElement(i.Modal,{is_open:r,small:!0,title:u(_),toggleModal:o},n().createElement(i.Modal.Body,null,d),n().createElement(i.Modal.Footer,null,n().createElement(i.Button,{has_effect:!0,text:(0,l.localize)("OK"),onClick:o,primary:!0})))}},E=function(e){var t=e.is_visible,r=e.onConfirm;return n().createElement(i.Modal,{small:!0,is_open:t,title:(0,l.localize)("Pending verification"),toggleModal:r,className:"account-verification-pending-modal"},n().createElement(i.Modal.Body,null,n().createElement(l.Localize,{i18n_default_text:"You cannot trade as your documents are still under review. We will notify you by email once your verification is approved."})),n().createElement(i.Modal.Footer,null,n().createElement(i.Button,{has_effect:!0,onClick:r,primary:!0,large:!0},n().createElement(l.Localize,{i18n_default_text:"OK"}))))};var h=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),y=(0,c.observer)((function(){var e=(0,s.A)().client.account_time_of_closure;return n().createElement("div",{className:"trading-disabled-by-residence-modal__content"},n().createElement(i.Icon,{icon:"IcCashierLocked",size:96}),n().createElement(i.Text,{as:"h1",align:"center",weight:"bold"},n().createElement(l.Localize,{i18n_default_text:"Trading disabled"})),n().createElement(i.Text,{align:"center",size:"xs"},n().createElement(l.Localize,{i18n_default_text:"Due to business changes, client accounts in your country are to be closed. Withdraw any remaining funds by {{date}}.",values:{date:(0,o.formatDate)(e,"DD MMM YYYY")}})))}));const M=(0,c.observer)((function(){var e=(0,h.Y)().isMobile,t=(0,s.A)().ui,r=t.is_trading_disabled_by_residence_modal_visible,a=t.setIsTradingDisabledByResidenceModal,o=function(){a(!1)};return n().createElement(n().Fragment,null,e?n().createElement(i.MobileDialog,{visible:r,portal_element_id:"modal_root",onClose:o,title:"",has_full_height:!0},n().createElement(y,null)):n().createElement(i.Modal,{is_open:r,title:" ",toggleModal:o,width:"440px",has_close_icon:!0,should_header_stick_body:!1},n().createElement(y,null)))}));var z=r("./src/Stores/useTraderStores.tsx");const C=(0,c.observer)((function(){var e=(0,s.A)(),t=e.ui,r=e.client,a=e.common,i=(0,z.P)(),l=i.resetPreviousSymbol,c=i.clearPurchaseInfo,u=i.requestProposal,m=r.is_virtual,_=r.is_logged_in,f=a.services_error,g=t.is_services_error_visible,v=t.is_mf_verification_pending_modal_visible,p=t.setHasOnlyForwardingContracts,h=t.toggleServicesErrorModal,y=t.setIsMFVericationPendingModal,C=function(){p(!1),l()};return n().createElement(n().Fragment,null,n().createElement(d,{onConfirm:function(){C()},onCancel:function(){window.open((0,o.getUrlSmartTrader)()),C()}}),n().createElement(b,{onConfirm:function(){h(!1),"buy"===f.type&&(c(),u())},services_error:f,is_visible:g,is_virtual:m,is_logged_in:_}),n().createElement(E,{is_visible:v,onConfirm:function(){return y(!1)}}),n().createElement(M,null))}))}}]);