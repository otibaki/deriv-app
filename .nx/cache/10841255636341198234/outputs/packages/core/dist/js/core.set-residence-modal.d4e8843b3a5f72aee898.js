"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3438],{857703:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var n=r(286326),i=r(255530),s=r.n(i),c=r(824223),o=r(597598),l=r.n(o),a=r(57886),u=r(189137),d=r(33118),b=r(76958),p=r(679955),f=r(414646),y=r(836870);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=(e,t)=>e.text.toLowerCase()===t.residence.toLowerCase(),h=e=>{let{enableApp:t,onSetResidence:r,residence_list:i,toggleModalVisibility:o}=e;const l=e=>{if(e)throw Error(e);o(!1),t()};return(0,y.jsx)("div",{className:"set-residence",children:(0,y.jsx)(c.Formik,{initialValues:{residence:""},validate:e=>((e,t)=>{const r={};if(e.residence){const n=t.findIndex((t=>m(t,e)));-1!==n&&"DISABLED"!==t[n].disabled||(r.residence=(0,d.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:u.website_name}))}else r.residence=!0;return r})(e,i),onSubmit:e=>{const t=i.findIndex((t=>m(t,e))),n=_(_({},e),{},{residence:i[t].value});r(n,l)},children:e=>{let{isSubmitting:t,errors:r,values:o,setFieldValue:l,touched:u}=e;return(0,y.jsx)(c.Form,{children:(0,y.jsx)(n.Fragment,{children:(0,y.jsxs)(b.A,{errors:r,touched:u,setFieldValue:l,residence_list:i,children:[(0,y.jsx)(a.Text,{as:"p",size:"xxs",weight:"bold",className:"set-residence__subtext",children:(0,y.jsx)(d.Localize,{i18n_default_text:"We need this to make sure our service complies with laws and regulations in your country."})}),(0,y.jsx)(a.Button,{className:s()("set-residence__btn",{"set-residence__btn--disabled":!o.residence||r.residence||t}),type:"submit",is_disabled:!o.residence||!!r.residence||t,primary:!0,large:!0,children:(0,y.jsx)(d.Localize,{i18n_default_text:"Set residence"})})]})})})}})})};h.propTypes={enableApp:l().func,onSetResidence:l().func,residence_list:l().array,toggleModalVisibility:l().func};const v=(0,p.observer)((()=>{const{ui:e,client:t}=(0,f.A)(),{is_set_residence_modal_visible:r,toggleSetResidenceModal:n,enableApp:i,disableApp:s,is_loading:c}=e,{onSetResidence:o,residence_list:l}=t;return l.length<1?null:(0,y.jsx)(a.Dialog,{is_visible:r,disableApp:s,enableApp:i,is_loading:c||!l.length,is_content_centered:!0,children:(0,y.jsx)(h,{onSetResidence:o,residence_list:l,toggleModalVisibility:n,enableApp:i})})}))},76958:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(286326),i=r(824223),s=r(597598),c=r.n(s),o=r(57886),l=r(33118),a=r(836870);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=e=>{var t;let{children:r,class_prefix:s="set-residence",default_value:c,history_value:u,errors:b,onResidenceSelectionChanged:p,touched:f,setFieldTouched:y,setFieldValue:j,residence_list:_}=e;return n.useEffect((()=>{c&&(y("residence",!0),j("residence",c,!0))}),[]),(0,a.jsxs)("div",{className:`${s}__residence-selection`,children:[(0,a.jsx)(i.Field,{name:"residence",children:e=>{let{field:t}=e;return(0,a.jsx)(n.Fragment,{children:(0,a.jsx)(o.Autocomplete,d(d({},t),{},{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",type:"text",label:(0,l.localize)("Country of residence"),historyValue:u,error:f.residence&&b.residence,required:!0,list_items:_,onItemSelection:e=>{let{value:t,text:r}=e;j("residence",t?r:"",!0),null==p||p()}}))})}}),!(null!=b&&null!==(t=b.residence)&&void 0!==t&&t.length)&&(0,a.jsx)(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent",children:(0,a.jsx)(l.Localize,{i18n_default_text:"Select the country where you currently live."})}),(0,a.jsx)("div",{className:`${s}__button_wrapper`,children:r})]})};p.propTypes={children:c().object,class_prefix:c().string,default_value:c().string,history_value:c().string,errors:c().object,onResidenceSelectionChanged:c().func,residence_list:c().arrayOf(c().object),setFieldTouched:c().func,setFieldValue:c().func,touched:c().object};const f=p}}]);
//# sourceMappingURL=core.set-residence-modal.d4e8843b3a5f72aee898.js.map