/*! For license information please see trader.trader-app.a905dc727c7af41909a7.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app"],{"./src/App/Components/Elements/ContentLoader/index.ts":(t,e,r)=>{r.d(e,{Y:()=>i,g:()=>s});var n=r("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),o=r("react"),a=r.n(o),i=function(t){var e=t.speed;return a().createElement(n.Ay,{height:173,width:218,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},a().createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),a().createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),a().createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),a().createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),a().createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),a().createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),a().createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),a().createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),a().createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),a().createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),a().createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))},c=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),s=function(t){var e=t.speed;return(0,c.Y)().isMobile?a().createElement(n.Ay,{height:214,width:344,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",viewBox:"0 0 344 176"},a().createElement("rect",{x:"148",y:"24",rx:"3",ry:"3",width:"40",height:"4"}),a().createElement("rect",{x:"8",y:"40",rx:"4",ry:"4",width:"328",height:"40"}),a().createElement("rect",{x:"8",y:"88",rx:"4",ry:"4",width:"328",height:"40"}),a().createElement("rect",{x:"8",y:"136",rx:"4",ry:"4",width:"160",height:"70"}),a().createElement("rect",{x:"176",y:"136",rx:"4",ry:"4",width:"160",height:"70"})):a().createElement(n.Ay,{height:548,width:240,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},a().createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),a().createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),a().createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),a().createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))}},"./src/App/Components/Elements/chart-loader.tsx":(t,e,r)=>{r.d(e,{A:()=>s});var n=r("react"),o=r.n(n),a=r("../../node_modules/classnames/index.js"),i=r.n(a);const c=function(t){var e=t.className,r=t.data_testid,n=t.is_invisible,a=t.theme,c=t.id;return o().createElement("div",{id:c,"data-testid":r,className:i()("barspinner","barspinner--".concat(a||"dark"),{invisible:n},e)},Array.from(new Array(5)).map((function(t,e){return o().createElement("div",{key:e,className:"barspinner__rect barspinner__rect--".concat(e+1," rect").concat(e+1)})})))};const s=function(t){var e=t.is_dark;return t.is_visible?o().createElement("div",{className:"chart-container__loader"},o().createElement(c,{theme:e?"dark":"light",data_testid:"dt_barspinner"})):null}},"./src/App/index.tsx":(t,e,r)=>{r.r(e),r.d(e,{default:()=>Qt});var n=r("react"),o=r.n(n),a=r("../../node_modules/react-loadable/lib/index.js"),i=r.n(a),c=r("react-router"),s=r("@deriv/components"),l=r("@deriv/shared"),u=r("react-router-dom"),d=function(t,e){var r;return null==e||e.some((function(e){var n;try{n=(0,c.matchPath)(t,e)}catch(t){if(/undefined/.test(t.message))return}return n?(r=e,!0):!!e.routes&&(r=d(t,e.routes))})),r},m=r("@deriv/translations"),f=r("../../node_modules/classnames/index.js"),p=r.n(f),_=r("mobx-react-lite"),h=r("../stores/src/useStore.ts"),y=r("./src/Stores/useTraderStores.tsx"),v=r("./src/App/Components/Elements/chart-loader.tsx"),g=r("../../node_modules/react-transition-group/esm/CSSTransition.js");const b=function(t){var e=t.error;return o().createElement("div",{className:"portfolio-empty"},o().createElement("div",{className:"portfolio-empty__wrapper"},e?o().createElement(s.Text,{color:"disabled",size:"xs"},e):o().createElement(o().Fragment,null,o().createElement(s.Icon,{icon:"IcPortfolio",className:"portfolio-empty__icon",size:96,color:"disabled"}),o().createElement(s.Text,{align:"center",className:"portfolio-empty__text",color:"disabled",size:"xs"},(0,m.localize)("You have no open positions for this asset. To view other open positions, click Go to Reports")))))};var E=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.ts"),w=["row","measure","onHoverPosition","symbol","is_new_row"];function x(){return x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},x.apply(null,arguments)}var C=function(t){var e=t.row,r=t.measure,n=t.onHoverPosition,a=t.symbol,i=t.is_new_row,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,w),u=(0,l.useNewRowTransition)(i).in_prop;return o().useEffect((function(){null==r||r()}),[null==e?void 0:e.contract_info.is_sold,r]),o().createElement(g.A,{in:u,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},onEntered:r,unmountOnExit:!0},o().createElement("div",{className:"dc-contract-card__wrapper"},o().createElement(s.PositionsDrawerCard,x({},e,c,{onMouseEnter:function(){n(!0,e,a)},onMouseLeave:function(){n(!1,e,a)},onFooterEntered:r,should_show_transition:i}))))};const S=(0,_.observer)((function(t){var e=x({},(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),t)),r=(0,y.P)(),n=r.symbol,a=r.contract_type,i=(0,h.A)(),c=i.client,d=i.common,f=i.contract_trade,_=i.portfolio,v=i.ui,g=c.currency,w=d.server_time,S=f.getContractById,k=_.all_positions,T=_.error,A=_.onHoverPosition,O=_.onMount,N=_.onClickCancel,L=_.onClickSell,P=_.removePositionById,j=v.is_mobile,M=v.is_positions_drawer_on,I=v.togglePositionsDrawer,D=v.addToast,z=v.current_focus,R=v.removeToast,F=v.setCurrentFocus,Y=v.should_show_cancellation_warning,G=v.toggleCancellationWarning,U=o().useRef(null),W=o().useRef(null),B=o().useRef(null);o().useEffect((function(){O()}),[O]),o().useEffect((function(){var t;null==W||null===(t=W.current)||void 0===t||t.scrollTo({top:0}),B.current&&(B.current.scrollTop=0)}),[n,a]);var H=k.filter((function(t){return(0,l.isContractSupportedAndStarted)(n,t.contract_info)&&((0,l.isTurbosContract)(a)||(0,l.isVanillaContract)(a)?(0,E.i4)(t.contract_info,(0,l.isTurbosContract)(a)?l.TRADE_TYPES.TURBOS.SHORT:l.TRADE_TYPES.VANILLA.CALL)||(0,E.i4)(t.contract_info,(0,l.isTurbosContract)(a)?l.TRADE_TYPES.TURBOS.LONG:l.TRADE_TYPES.VANILLA.PUT):(0,E.i4)(t.contract_info,a))})),q=o().createElement(s.DataList,{data_source:H,rowRenderer:function(t){return o().createElement(C,x({onHoverPosition:A,symbol:n,currency:g,addToast:D,onClickCancel:N,onClickSell:L,onClickRemove:P,server_time:w,getContractById:S,is_mobile:j,current_focus:z,removeToast:R,setCurrentFocus:F,should_show_cancellation_warning:Y,toggleCancellationWarning:G},t,e))},keyMapper:function(t){return t.id},row_gap:8});return o().createElement(o().Fragment,null,o().createElement("div",{className:p()("positions-drawer__bg",{"positions-drawer__bg--open":M})}),o().createElement("div",{id:"dt_positions_drawer",className:p()("positions-drawer",{"positions-drawer--open":M})},o().createElement("div",{className:"positions-drawer__header"},o().createElement(s.Text,{color:"prominent",weight:"bold",size:"xs"},(0,m.localize)("Recent positions")),o().createElement("div",{id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:I},o().createElement(s.Icon,{icon:"IcMinusBold"}))),o().createElement("div",{className:"positions-drawer__body",ref:U},0===H.length||T?o().createElement(b,{error:T}):q),o().createElement("div",{className:"positions-drawer__footer"},o().createElement(u.NavLink,{id:"dt_positions_drawer_report_button",className:"dc-btn dc-btn--secondary dc-btn__large",to:l.routes.reports},o().createElement(s.Text,{size:"xs",weight:"bold"},(0,m.localize)("Go to Reports"))))))}));function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return T(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var A=o().lazy((function(){return r.e("market-countdown-timer").then(r.bind(r,"./src/App/Components/Elements/market-countdown-timer.tsx"))}));const O=function(t){var e=t.is_eu,r=t.is_synthetics_trading_market_available,n=t.onClick,a=t.onMarketOpen,i=t.symbol,c=k(o().useState(!0),2),l=c[0],u=c[1],d=o().createElement(m.Localize,{i18n_default_text:"In the meantime, try our synthetic indices. They simulate real-market volatility and are open 24/7."}),f=(0,m.localize)("Try Synthetic Indices");return r||(d=null,f=(0,m.localize)("See open markets")),o().createElement("div",{className:p()("market-is-closed-overlay",{"market-is-closed-overlay--loading":l})},o().createElement(s.Text,{as:"p",className:"market-is-closed-overlay__main-heading",color:"prominent",weight:"bold"},o().createElement(m.Localize,{i18n_default_text:"This market is closed"})),o().createElement(o().Suspense,{fallback:o().createElement(s.UILoader,null)},o().createElement(A,{is_main_page:!0,setIsTimerLoading:u,onMarketOpen:a,symbol:i})),d&&o().createElement(s.Text,{align:"center",as:"p",className:"market-is-closed-overlay__main-message",size:"xs"},d),(!e||e&&r)&&o().createElement(s.Button,{className:"market-is-closed-overlay__button",onClick:n,text:f,primary:!0}))};var N=r("./src/Modules/Contract/Components/Digits/index.ts"),L=r("./src/Modules/Contract/Components/AccumulatorsStats/index.ts"),P=r("./src/Modules/SmartChart/Components/bottom-widgets.tsx"),j=r("./src/Modules/SmartChart/Components/top-widgets.tsx"),M=function(t){return t&&function(e){t({target:{name:"symbol",value:e}})}},I=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),D=(0,_.observer)((function(t){var e=t.digits,r=t.tick,n=(0,h.A)(),a=n.contract_trade,i=n.ui,c=(0,y.P)(),s=c.onChange,l=c.symbol,u=c.contract_type,d=c.last_digit,m=i.is_mobile,f=a.last_contract,p=f.contract_info,_=void 0===p?{}:p,v=f.digits_info,g=void 0===v?{}:v,b=f.display_status,E=f.is_digit_contract,w=f.is_ended;return o().createElement(N.A,{contract_info:_,digits_array:e,digits_info:g,display_status:b,is_digit_contract:E,is_ended:w,is_mobile:m,onDigitChange:s,is_trade_page:!0,tick:r,trade_type:u,selected_digit:d,underlying:l})})),z=(0,_.observer)((function(t){var e=t.open_market,r=t.open,n=(0,h.A)().ui,a=(0,y.P)(),i=a.is_digits_widget_active,c=a.onChange,s=n.is_dark_mode_on?"dark":"light",l=(0,I.Y)().isMobile;return o().createElement(j.A,{open_market:e,open:r,is_mobile:l,is_digits_widget_active:i,onSymbolChange:M(c),theme:s})})),R=function(t){var e=t.digits,r=t.tick,n=t.show_accumulators_stats;return o().createElement(P.A,{Widget:n?o().createElement(L.A,null):o().createElement(D,{digits:e,tick:r})})},F=(0,_.observer)((function(t){var e=t.is_market_closed,n=t.is_trade_enabled,a=(0,h.A)().common.current_language,c=(0,I.Y)().isMobile,s=o().useMemo((function(){return i()({loader:function(){return c?Promise.all([r.e("hooks_src_useMFAccountStatus_ts-src_Modules_Trading_Helpers_video-config_ts-src_Stores_Module-77c64e"),r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_tsx-src-a7086a"),r.e("screen-small")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-small.tsx")):Promise.all([r.e("hooks_src_useMFAccountStatus_ts-src_Modules_Trading_Helpers_video-config_ts-src_Stores_Module-77c64e"),r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_tsx-src-a7086a"),r.e("screen-large")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-large.tsx"))},loading:function(){return null},render:function(t,e){var r=t.default;return o().createElement(r,e)}})}),[c]);return o().createElement(o().Fragment,{key:a},o().createElement(s,{is_trade_enabled:n,is_market_closed:c?void 0:e}))}));const Y=o().memo(F);var G=r("./src/Modules/SmartChart/Components/Markers/accumulators-chart-elements.tsx"),U=r("./src/Modules/SmartChart/Components/toolbar-widgets.tsx"),W=r("./src/Modules/SmartChart/index.js");function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){J(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function J(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const K=(0,_.observer)((function(t){var e=t.has_barrier,r=t.is_accumulator,n=t.topWidgets,a=(0,h.A)(),i=a.ui,c=a.common,s=a.contract_trade,l=a.portfolio,u=(0,I.Y)().isMobile,d=s.accumulator_barriers_data,m=s.accumulator_contract_barriers_data,f=s.chart_type,p=s.granularity,_=s.has_crossed_accu_barriers,v=s.markers_array,g=s.updateChartType,b=s.updateGranularity,E=o().useRef(null),w=l.all_positions,x=i.is_chart_countdown_visible,C=i.is_chart_layout_default,S=i.is_dark_mode_on,k=i.is_positions_drawer_on,T=c.current_language,A=c.is_socket_opened,O=(0,y.P)(),N=O.active_symbols,L=O.barriers_flattened,P=O.chartStateChange,j=O.chart_layout,M=O.exportLayout,D=O.has_alternative_source,z=O.is_trade_enabled,F=O.main_barrier_flattened,Y=O.setChartStatus,B=O.show_digits_stats,q=O.symbol,V=O.onChange,J=O.prev_contract_type,K=O.wsForget,Q=O.wsForgetStream,X=O.wsSendRequest,Z=O.wsSubscribe,tt=$($({countdown:x,isHighestLowestMarkerEnabled:!1,language:T.toLowerCase(),position:C?"bottom":"left",theme:S?"dark":"light"},r?{whitespace:190,minimumLeftBars:u?3:void 0}:{}),e?{whitespace:110}:{}),et=d||{},rt=et.current_spot,nt=et.current_spot_time,ot=o().useCallback((function(t){var e=t.digits,n=t.tick;return o().createElement(R,{digits:e,tick:n,show_accumulators_stats:r})}),[r]);o().useEffect((function(){var t;if((r||B)&&null!==(t=E.current)&&void 0!==t&&t.hasPredictionIndicators()){var e;null===(e=E.current)||void 0===e||e.triggerPopup((function(){return V({target:{name:"contract_type",value:J}})}))}}),[r,V,J,B]);var at=F?[F].concat(H(L)):L,it=0===p?8:24;return q&&N.length?o().createElement(W.GR,{ref:E,barriers:at,contracts_array:v,bottomWidgets:!r&&!B||u?t.bottomWidgets:ot,crosshair:u?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:B,chartControlsWidgets:null,chartStatusListener:function(t){return Y(!t,!0)},chartType:f,initialData:{activeSymbols:JSON.parse(JSON.stringify(N))},chartData:{activeSymbols:JSON.parse(JSON.stringify(N))},feedCall:{activeSymbols:!1},enabledNavigationWidget:!u,enabledChartFooter:!1,id:"trade",isMobile:u,maxTick:u?it:void 0,granularity:B||r?0:p,requestAPI:X,requestForget:K,requestForgetStream:Q,requestSubscribe:Z,settings:tt,allowTickChartTypeOnly:B||r,stateChangeListener:P,symbol:q,topWidgets:z?n:null,isConnectionOpened:A,clearChart:!1,toolbarWidget:function(){return o().createElement(U.A,{updateChartType:g,updateGranularity:b})},importedLayout:j,onExportLayout:M,shouldFetchTradingTimes:!1,hasAlternativeSource:D,getMarketsOrder:function(t){var e="synthetic_index",r=t.some((function(t){return t.market===e}));return t.slice().sort((function(t,e){return t.display_name<e.display_name?-1:1})).map((function(t){return t.market})).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),r?[e]:[])},should_zoom_out_on_yaxis:r,yAxisMargin:{top:u?76:106},isLive:!0,leftMargin:!u&&k?328:80},r&&o().createElement(G.A,{all_positions:w,current_spot:rt,current_spot_time:nt,has_crossed_accu_barriers:_,should_show_profit_text:!!m.accumulators_high_barrier,symbol:q,is_mobile:u})):null}));var Q=r("../../node_modules/@deriv-com/ui/dist/components/Loader/index.js");function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Z(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==X(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tt(){tt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var m="suspendedStart",f="suspendedYield",p="executing",_="completed",h={};function y(){}function v(){}function g(){}var b={};l(b,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(L([])));w&&w!==r&&n.call(w,i)&&(b=w);var x=g.prototype=y.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var s=d(t[o],t,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==X(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===_){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?_:f,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=_,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(X(e)+" is not iterable")}return v.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},C(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function et(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function rt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){et(a,n,o,i,c,"next",t)}function c(t){et(a,n,o,i,c,"throw",t)}i(void 0)}))}}function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ot(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var at=function(t){var e=t.tick,r=t.digits,n=t.setTick,a=t.setDigits;return o().useEffect((function(){n(e)}),[e]),o().useEffect((function(){a(r)}),[r]),null};const it=(0,_.observer)((function(){var t=(0,h.A)(),e=t.client,r=t.common,n=t.ui,a=(0,y.P)(),i=a.contract_type,c=a.form_components,u=a.getFirstOpenMarket,d=a.has_barrier,m=a.is_accumulator,f=a.is_chart_loading,_=a.is_market_closed,g=a.is_synthetics_available,b=a.is_synthetics_trading_market_available,E=a.is_trade_enabled,w=a.is_trade_params_expanded,x=a.is_turbos,C=a.is_vanilla,k=a.onMount,T=a.onUnmount,A=a.prepareTradeStore,N=a.setIsDigitsWidgetActive,L=a.setMobileDigitView,P=a.should_show_active_symbols_loading,j=a.show_digits_stats,M=a.symbol,R=n.has_only_forward_starting_contracts,F=n.is_dark_mode_on,G=n.notification_messages_ui,U=e.is_eu,W=r.network_status,B=(0,I.Y)(),H=B.isDesktop,q=B.isMobile,V=B.isTabletPortrait,$=nt(o().useState([]),2),J=$[0],X=$[1],et=nt(o().useState(null),2),ot=et[0],it=et[1],ct=nt(o().useState(!1),2),st=ct[0],lt=ct[1],ut=nt(o().useState(!1),2),dt=ut[0],mt=ut[1],ft=nt(o().useState(),2),pt=ft[0],_t=ft[1],ht=nt(o().useState(),2),yt=ht[0],vt=ht[1],gt=nt(o().useState(0),2),bt=gt[0],Et=gt[1],wt=nt(o().useState(!1),2),xt=wt[0],Ct=wt[1],St=o().useRef(null),kt=o().useRef(null),Tt=w&&(i===l.TRADE_TYPES.MATCH_DIFF||i===l.TRADE_TYPES.OVER_UNDER),At=o().useMemo((function(){return st?{category:"synthetics"}:dt&&pt?{category:pt,subcategory:yt}:null}),[st,dt,pt,yt]);o().useEffect((function(){var t=document.querySelector("html");return V&&l.isTabletOs&&(Ct(!0),f||P||(St.current=setTimeout((function(){null==t||t.classList.add("tablet-landscape"),kt.current=setTimeout((function(){Ct(!1)}),600)}),500))),function(){null==t||t.classList.remove("tablet-landscape"),St.current&&clearTimeout(St.current),kt.current&&clearTimeout(kt.current)}}),[V,f,P]),o().useEffect((function(){if(k(),!g){var t=function(){var t=rt(tt().mark((function t(){var e,r,n,o,a;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=["forex","indices","commodities"],t.next=3,u(r);case 3:if(t.t1=e=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==e;case 7:if(!t.t0){t.next=11;break}t.t2=e,t.next=12;break;case 11:t.t2={};case 12:n=t.t2,o=n.category,a=n.subcategory,o&&(_t(o),vt(a));case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}return function(){return T()}}),[k,T,u,g]),o().useEffect((function(){q&&X([]),lt(!1),mt(!1)}),[M,X,lt,g]);var Ot=o().useCallback((function(t){var e=t.digits,r=t.tick;return o().createElement(at,{digits:e,tick:r,setTick:it,setDigits:X})}),[]),Nt=function(){var t=rt(tt().mark((function t(){return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g?(lt(!0),setTimeout((function(){return lt(!1)}))):(mt(!0),setTimeout((function(){return mt(!1)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Lt=o().useCallback((function(){return o().createElement(z,{open_market:At,open:st||dt})}),[At,st,dt]),Pt=q?"mobile-wrapper":"sidebar__container",jt=o().useMemo((function(){return m?"295px":x?"300px":"259px"}),[x,m]);return o().createElement("div",{className:p()("trade-container",Z({},"trade-container--".concat(m?"accumulators":"turbos"),m||x)),id:"trade_container"},H&&o().createElement(S,null),o().createElement(s.Div100vhContainer,{className:"chart-container",height_offset:jt,id:"chart_container",is_disabled:!q},o().createElement(G,{show_trade_notifications:q}),o().createElement(o().Suspense,{fallback:o().createElement(v.A,{is_dark:F,is_visible:!M||!!f})},q?o().createElement(o().Fragment,null,o().createElement(v.A,{is_visible:f||P}),o().createElement(s.SwipeableWrapper,{className:p()({"vanilla-trade-chart":C}),is_disabled:!j||!E||!c.length||f||P,is_swipe_disabled:1===bt,onChange:function(t){L(0===t),N(0===t),Et(t)},should_elevate_navigation:Tt},j&&o().createElement(D,{digits:J,tick:ot}),o().createElement(K,{bottomWidgets:j?Ot:void 0,has_barrier:d,is_accumulator:m,topWidgets:Lt}))):o().createElement("div",{className:p()("chart-container__wrapper",{"vanilla-trade-chart":C})},o().createElement(v.A,{is_visible:f||P||xt}),o().createElement(K,{topWidgets:Lt,is_accumulator:m})))),!xt&&o().createElement("div",{className:Pt},_&&!R&&o().createElement(O,{is_eu:U,is_synthetics_trading_market_available:b,onClick:Nt,onMarketOpen:A,symbol:M}),o().createElement(Y,{is_market_closed:_,is_trade_enabled:E&&c.length>0&&"online"===W.class})),xt&&o().createElement(Q.a,{isFullScreen:!0}))}));var ct,st=o().lazy((function(){return(0,l.moduleLoader)((function(){return r.e("contract").then(r.bind(r,"./src/Modules/Contract/index.ts"))}))})),lt={component:o().lazy((function(){return(0,l.moduleLoader)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.ts"))}))})),getTitle:function(){return(0,m.localize)("Error 404")}};const ut=function(){return ct||(ct=[{path:l.routes.contract,component:st,getTitle:function(){return(0,m.localize)("Contract Details")},is_authenticated:!0},{path:l.routes.trade,component:it,getTitle:function(){return(0,m.localize)("Trader")},exact:!0}]).push(lt),ct};var dt=["active_class","to","children"];function mt(){return mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mt.apply(null,arguments)}var ft=o().forwardRef((function(t,e){var r=t.active_class,n=void 0===r?"":r,a=t.to,i=t.children,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,dt),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.startsWith("/")?t:"/".concat(t||"")}(a),l=d(s,ut());if(!l)throw new Error("Route not found: ".concat(a));return a?o().createElement(u.NavLink,mt({"data-testid":"dt_binary_link",to:s,activeClassName:n||"active",exact:l.exact,ref:e},c),i):o().createElement("a",mt({"data-testid":"dt_binary_link",ref:e},c),i)}));ft.displayName="BinaryLink";const pt=ft;var _t=r("./src/Modules/Page404/index.ts");function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ht.apply(null,arguments)}const yt=function(t){return o().createElement(u.Route,{exact:t.exact,path:t.path,render:function(e){var r,n,a=null,i=(0,l.removeBranchName)(location.pathname).replace(/\/$/,""),c=function(e){var r,n;return""===e||(null!==(r=t.path)&&void 0!==r&&r.includes(":")?e.substring(0,e.lastIndexOf("/")+1)===t.path.substring(0,t.path.indexOf(":")):t.path===e||!(null===(n=t.routes)||void 0===n||!n.find((function(t){return e===t.path}))))}(i);if(t.component===u.Redirect){var s=t.to;if(t.path===l.routes.index)s=e.location.pathname.toLowerCase().replace(t.path,"");a=o().createElement(u.Redirect,{to:s})}else if(c&&t.is_authenticated&&!t.is_logging_in&&!t.is_logged_in)(0,l.redirectToLogin)(t.is_logged_in,(0,m.getLanguage)());else{var d=t.routes?t.routes.find((function(t){return t.default})):{},f=!(0,l.isEmptyObject)(d),p=t.component;a=o().createElement(o().Fragment,null,f&&i===t.path&&o().createElement(u.Redirect,{to:null==d?void 0:d.path}),c?o().createElement(p,ht({},e,{routes:t.routes})):o().createElement(_t.default,null))}var _=null!==(r=null===(n=t.getTitle)||void 0===n?void 0:n.call(t))&&void 0!==r?r:"";return document.title="".concat(_," | ").concat(l.default_title),a}})};function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vt.apply(null,arguments)}const gt=function(t){return o().createElement(o().Suspense,{fallback:o().createElement("div",null)},o().createElement(u.Switch,null,ut().map((function(e,r){return o().createElement(yt,vt({key:r},e,t))}))))};var bt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/dtrader";return t.some((function(t){return!!(0,c.matchPath)(e,{path:t,exact:!0})}))},Et=function(t){var e=t.path_from,r=t.path_to,n=t.action,o=t.match_patterns,a=t.callback;"PUSH"!==n&&"POP"!==n||a(o.some((function(t){return bt(t.from,e)&&bt(t.to,r)})));return!0},wt=i()({loader:function(){return r.e("error-component").then(r.bind(r,"./src/App/Components/Elements/Errors/index.ts"))},loading:function(){return o().createElement(s.UILoader,null)},render:function(t,e){var r=t.default;return o().createElement(r,e)}}),xt=(0,_.observer)((function(t){var e=t.history,r=t.passthrough,n=(0,h.A)(),a=n.client,i=n.common,c=n.ui,s=n.portfolio,u=(0,y.P)().setSkipPrePostLifecycle,d=i.error,m=i.has_error,f=s.onUnmount,p=a.is_logged_in,_=a.is_logging_in,v=c.setPromptHandler;return o().useEffect((function(){return v&&v(!0,(function(t,r){return Et({path_from:e.location.pathname,path_to:t.pathname,match_patterns:[{from:ut().flatMap((function(t){return t.routes?t.routes.map((function(t){return t.path})):[t.path]})).filter((function(t){return t&&t!==l.routes.mt5&&t!==l.routes.dxtrade})),to:[l.routes.mt5,l.routes.dxtrade]}],action:r,callback:function(t){t&&f()}}),Et({path_from:e.location.pathname,path_to:t.pathname,match_patterns:[{from:[l.routes.contract],to:[l.routes.trade]},{from:[l.routes.trade],to:[l.routes.contract]}],action:r,callback:u})})),function(){null==v||v(!1)}}),[]),o().useEffect((function(){return function(){return f()}}),[f]),m?o().createElement(wt,d):o().createElement(gt,{is_logged_in:p,is_logging_in:_,passthrough:r})}));const Ct=(0,c.withRouter)(xt);var St=r("mobx"),kt=r("../../node_modules/react-transition-group/esm/TransitionGroup.js"),Tt=r("./src/App/Components/Elements/ContentLoader/index.ts");const At=function(t){var e=t.is_visible,r="won"===t.result;return o().createElement(o().Fragment,null,o().createElement(g.A,{in:e,timeout:250,classNames:{enter:"positions-modal-card__result--enter",enterDone:"positions-modal-card__result--enter-done",exit:"positions-modal-card__result--exit"},unmountOnExit:!0},o().createElement("div",{className:"positions-modal-card__caption-wrapper","data-testid":"result_mobile"},o().createElement("span",{className:p()("positions-modal-card__caption",{"positions-modal-card__caption--won":r,"positions-modal-card__caption--lost":!r})},o().createElement(s.Icon,{icon:"IcPositionClosed",className:"positions-modal-card__icon",color:r?"green":"red"}),o().createElement("span",null,(0,l.getCardLabels)().CLOSED)))))};const Ot=(0,_.observer)((function(t){var e,r=t.className,n=t.contract_info,a=t.contract_update,i=t.currency,c=t.current_tick,u=t.id,d=t.is_loading,m=t.is_sell_requested,f=t.onClickSell,_=t.profit_loss,v=t.onClickCancel,g=t.result,b=t.togglePositions,E=(0,h.A)(),w=E.ui,x=E.common,C=E.contract_trade,S=(0,y.P)().active_symbols,k=x.server_time,T=C.getContractById,A=w.addToast,O=w.current_focus,N=w.is_mobile,L=w.removeToast,P=w.setCurrentFocus,j=w.should_show_cancellation_warning,M=w.toggleCancellationWarning,I=o().createElement("div",{className:"positions-modal-card__content-loader"},o().createElement(Tt.Y,{speed:2})),D=n.barrier,z=n.bid_price,R=n.buy_price,F=n.contract_type,Y=n.date_expiry,G=n.date_start,U=n.entry_spot_display_value,W=n.is_sold,B=n.profit,H=n.sell_price,q=n.shortcode,V=n.tick_count,$=n.underlying,J=(0,l.getCardLabels)(),K=J.STAKE,Q=J.CONTRACT_VALUE,X=J.ENTRY_SPOT,Z=J.STRIKE,tt=J.TOTAL_PROFIT_LOSS,et=(0,l.isMultiplierContract)(F),rt=(0,l.isAccumulatorContract)(F),nt=(0,l.isTurbosContract)(F),ot=(0,l.isVanillaContract)(F),at=(0,l.isCryptoContract)($),it=!et||at&&et,ct=!!(0,l.getEndTime)(n),st=_>=0?"won":"lost",lt=(0,l.getSymbolDisplayName)(S,(0,l.getMarketInformation)(q||"").underlying),ut=o().createElement(o().Fragment,null,o().createElement(s.ContractCard.Header,{contract_info:n,display_name:lt,getCardLabels:l.getCardLabels,getContractTypeDisplay:l.getContractTypeDisplay,has_progress_slider:!N&&it,is_mobile:N,is_sell_requested:m,onClickSell:f,server_time:k}),o().createElement(s.CurrencyBadge,{currency:null!==(e=null==n?void 0:n.currency)&&void 0!==e?e:""}),o().createElement("div",{className:p()("positions-modal-card__grid","positions-modal-card__grid-body")},o().createElement("div",{className:p()("positions-modal-card__grid-profit-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},K),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},o().createElement(s.Money,{amount:R,currency:i}))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},Q),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},o().createElement("div",{className:p()({"dc-contract-card--loss":Number(B)<0,"dc-contract-card--profit":Number(B)>0})},o().createElement(s.Money,{amount:W?H:z,currency:i}))))),o().createElement("div",{className:p()("positions-modal-card__grid-price-payout")},o().createElement("div",{className:"positions-modal-card__purchase-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},X),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},(0,l.addComma)(U))),o().createElement("div",{className:"positions-modal-card__payout-price"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},Z),o().createElement(s.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},(0,l.addComma)(D)))),g||W?o().createElement(At,{is_visible:!!W,result:g||st}):o().createElement(s.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:c,getCardLabels:l.getCardLabels,is_loading:d,start_time:G,expiry_time:Y,server_time:k,ticks_count:V})),o().createElement("div",{className:p()("positions-modal-card__item",r)},o().createElement("div",{className:"dc-contract-card-item__header"},tt),o().createElement("div",{className:p()("dc-contract-card-item__body",{"dc-contract-card-item__body--crypto":(0,l.isCryptocurrency)(i),"dc-contract-card-item__body--loss":Number(B)<0,"dc-contract-card-item__body--profit":Number(B)>0})},o().createElement(s.Money,{amount:B,currency:i}),!W&&o().createElement(s.ArrowIndicator,{className:"dc-contract-card__indicative--movement",value:B}))),o().createElement(s.ContractCard.Footer,{contract_info:n,getCardLabels:l.getCardLabels,is_multiplier:et,is_sell_requested:m,onClickCancel:v,onClickSell:f,server_time:k})),dt=o().createElement(s.ContractCard.Header,{contract_info:n,display_name:lt,getCardLabels:l.getCardLabels,getContractTypeDisplay:l.getContractTypeDisplay,has_progress_slider:!N&&it||rt,is_mobile:N,is_sell_requested:m,onClickSell:f,server_time:k}),mt=o().createElement(s.ContractCard.Body,{addToast:A,contract_info:n,contract_update:a,currency:i,current_focus:O,getCardLabels:l.getCardLabels,getContractById:T,is_accumulator:rt,is_mobile:N,is_multiplier:et,is_positions:!0,is_sold:!!W,is_turbos:nt,has_progress_slider:N&&it&&!ct,removeToast:L,server_time:k,setCurrentFocus:P,should_show_cancellation_warning:j,toggleCancellationWarning:M}),ft=o().createElement(s.ContractCard.Footer,{contract_info:n,getCardLabels:l.getCardLabels,is_multiplier:et,is_sell_requested:m,onClickCancel:v,onClickSell:f,server_time:k}),_t=o().createElement(o().Fragment,null,o().createElement(s.ContractCard,{contract_info:n,getCardLabels:l.getCardLabels,is_multiplier:et,profit_loss:_,should_show_result_overlay:!1},dt,mt,ft)),ht=ot?ut:_t;return o().createElement("div",{id:"dt_drawer_card_".concat(u),className:p()("positions-modal-card__wrapper",r)},o().createElement(pt,{onClick:b,className:p()("positions-modal-card","dc-contract-card",{"positions-modal-card--multiplier":et,"dc-contract-card--green":_>0,"dc-contract-card--red":_<0}),to:(0,l.getContractPath)(u)},$?ht:I))}));const Nt=function(t){var e=t.positions_count,r=t.is_open,n=t.togglePositions,a=p()("positions-toggle",{"positions-toggle--active":r,"positions-toggle--has-count":e>0});return o().createElement("a",{id:"dt_positions_toggle","data-testid":"dt_positions_toggle",className:a,onClick:n,"data-count":e},o().createElement(s.Icon,{data_testid:"dt_icon",icon:"IcPortfolio",className:"positions-toggle__icon"}))};function Lt(){return Lt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lt.apply(null,arguments)}function Pt(t){return function(t){if(Array.isArray(t))return It(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Mt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||Mt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(t,e){if(t){if("string"==typeof t)return It(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(t,e):void 0}}function It(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const Dt=(0,_.observer)((function(t){var e=t.active_positions_count,r=t.currency,n=t.error,a=t.filtered_positions,i=t.is_empty,c=t.onClickSell,d=t.onClickCancel,f=(0,h.A)().ui,p=f.togglePositionsDrawer,_=f.is_positions_drawer_on,y=jt(o().useState([]),2),v=y[0],E=y[1],w=(0,I.Y)(),x=w.isMobile,C=w.isTablet,S=(0,u.useLocation)(),k=null==S?void 0:S.pathname,T=(0,l.isDisabledLandscapeBlockerRoute)(k),A=k===l.routes.trade&&l.isTabletOs,O=!(!x&&(0,l.isMobileOs)()&&(k.startsWith(l.routes.trade)||k.startsWith(l.routes.reports)||k.startsWith("/contract")))&&(T||A),N=a.filter((function(t){return v.every((function(e){return e!==t.contract_info.contract_id}))})).slice(0,5),L=N.filter((function(t){var e;return null===(e=t.contract_info)||void 0===e?void 0:e.is_sold})).map((function(t){return t.contract_info.contract_id})),P=function(){E(Pt(new Set([].concat(Pt(v),Pt(L))))),p()},j=o().createElement(o().Fragment,null,o().createElement(kt.A,{component:"div"},N.map((function(t){return o().createElement(g.A,{appear:!0,key:t.id,in:!0,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},unmountOnExit:!0},o().createElement(Ot,Lt({onClickSell:c,onClickCancel:d,key:t.id,currency:r,togglePositions:p},t)))}))));return o().createElement(o().Fragment,null,o().createElement(Nt,{is_open:_,togglePositions:p,positions_count:e}),O&&o().createElement(s.Modal,{is_open:_,toggleModal:P,id:"dt_mobile_positions",is_vertical_top:!0,has_close_icon:!0,width:x?"calc(100vw - 32px)":void 0,className:"toggle-positions"},o().createElement(s.Div100vhContainer,{className:"positions-modal",height_offset:C?"16rvh":"48px"},o().createElement("div",{className:"positions-modal__header"},o().createElement(s.Text,{size:"xxxs",className:"positions-modal__title"},o().createElement(s.Icon,{icon:"IcPortfolio",className:"positions-modal__title-icon"}),(0,m.localize)("Recent positions")),o().createElement("div",{className:"positions-modal__close-btn",onClick:P},o().createElement(s.Icon,{data_testid:"dt_modal_header_close",icon:"IcMinusBold"}))),o().createElement("div",{className:"positions-modal__body"},i||!N.length||n?o().createElement(b,{error:n}):j),o().createElement("div",{className:"positions-modal__footer"},o().createElement(u.NavLink,{onClick:P,className:"dc-btn dc-btn--secondary dc-btn__large positions-modal__footer-btn",to:l.routes.positions},o().createElement(s.Text,{size:"xs",weight:"bold"},(0,m.localize)("Go to Reports")))))))}));const zt=(0,_.observer)((function(){var t=(0,h.A)(),e=t.portfolio,r=t.client,n=(0,y.P)(),a=n.symbol,i=n.contract_type,c=r.currency,s=e.active_positions_count,u=e.all_positions,d=e.error,m=e.onClickSell,f=e.onClickCancel,p=u.filter((function(t){return(0,l.isContractSupportedAndStarted)(a,t.contract_info)&&((0,l.isTurbosContract)(i)||(0,l.isVanillaContract)(i)?(0,E.i4)(t.contract_info,(0,l.isTurbosContract)(i)?l.TRADE_TYPES.TURBOS.SHORT:l.TRADE_TYPES.VANILLA.CALL)||(0,E.i4)(t.contract_info,(0,l.isTurbosContract)(i)?l.TRADE_TYPES.TURBOS.LONG:l.TRADE_TYPES.VANILLA.PUT):(0,E.i4)(t.contract_info,i))}));return o().createElement(Dt,{active_positions_count:s,currency:c,error:d,filtered_positions:p,is_empty:!p.length,onClickSell:m,onClickCancel:f})}));var Rt=r("./src/trader-providers.tsx");function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Yt(){Yt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var m="suspendedStart",f="suspendedYield",p="executing",_="completed",h={};function y(){}function v(){}function g(){}var b={};l(b,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(L([])));w&&w!==r&&n.call(w,i)&&(b=w);var x=g.prototype=y.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var s=d(t[o],t,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==Ft(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=m;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===_){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?_:f,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=_,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ft(e)+" is not iterable")}return v.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},C(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Gt(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}const Ut=(0,_.observer)((function(t){var e=t.store,r=(0,h.A)(),n=r.client,a=r.modules,i=r.ui,c=r.portfolio,s=i.populateHeaderExtensions,u=c.onMount,d=n.is_logged_in,m=n.is_populating_account_list,f=a.cashier.general_store,p=f.onMountCommon,_=f.setAccountSwitchListener,y=(0,I.Y)().isDesktop,v=location.pathname!==l.routes.mt5,g=d&&v&&!y,b=o().useCallback((function(){var t=g?o().createElement(Rt.A,{store:e},o().createElement(zt,null)):null;s(t)}),[g,e,s]);return o().useEffect((function(){var t=function(){var t,e=(t=Yt().mark((function t(){return Yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y||!v){t.next=9;break}return t.next=3,(0,St.when)((function(){return!m}));case 3:if(!d){t.next=9;break}return t.next=6,l.WS.wait("authorize");case 6:u(),p(!0),_();case 9:b();case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Gt(a,n,o,i,c,"next",t)}function c(t){Gt(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();return t().catch((function(){})),function(){return s(null)}}),[p,u,b,s,_,e,v,y,d,m]),o().useEffect((function(){b()}),[b]),null}));var Wt=(0,_.observer)((function(t){var e=t.location,r=(0,h.A)(),n=r.client,a=r.portfolio,i=r.ui,c=n.is_logged_in,s=a.active_positions_count,u=i.is_positions_drawer_on,d=i.populateFooterExtensions,m=i.togglePositionsDrawer;o().useEffect((function(){return p()})),o().useEffect((function(){return function(){return d([])}}),[]);var f=function(){return o().createElement(Nt,{is_open:u,togglePositions:m,positions_count:s})},p=function(){var t=e.pathname===l.routes.trade;d(c&&t?[{position:"left",Component:f}]:[])};return null}));const Bt=(0,u.withRouter)(Wt);var Ht=i()({loader:function(){return r.e("settings-chart").then(r.bind(r,"./src/App/Containers/SettingsModal/settings-chart.tsx"))},loading:function(){return o().createElement(s.UILoader,null)}});const qt=(0,_.observer)((function(t){var e=t.store,r=(0,h.A)().ui.populateSettingsExtensions,n=function(){var t=[{icon:"IcChart",label:(0,m.localize)("Charts"),value:function(t){return function(t,e){return o().createElement(Rt.A,{store:e},o().createElement(Ht,t))}(t,e)}}];r(t)};return o().useEffect((function(){return function(){return r(null)}}),[r]),o().useEffect((function(){return n()})),null}));var Vt=r("./src/Modules/Trading/Containers/toast-popup.tsx"),$t=r("./src/App/init-store.ts"),Jt=r("./src/Stores/Providers/modules-providers.tsx"),Kt=i()({loader:function(){return r.e("trade-modals").then(r.bind(r,"./src/App/Containers/Modals/index.ts"))},loading:function(){return null}});const Qt=function(t){var e=t.passthrough,r=(0,$t.A)(e.root_store,e.WS);return o().useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[r]),o().createElement(Rt.A,{store:r},o().createElement(Jt.A,{store:r},o().createElement(Ct,null),o().createElement(Kt,null),o().createElement(Vt.C,null),o().createElement(Ut,{store:r}),o().createElement(Bt,null),o().createElement(qt,{store:r})))}},"./src/Modules/Contract/Components/AccumulatorsStats/index.ts":(t,e,r)=>{r.d(e,{A:()=>T});var n=r("react"),o=r.n(n),a=r("../../node_modules/classnames/index.js"),i=r.n(a),c=r("@deriv/components"),s=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),l=r("@deriv/translations"),u=function(t){var e=t.has_progress_dots,r=t.progress_dots_testid,n=t.should_emphasize_last_counter,a=t.ticks_history_counter_testid,c=t.value,s=n&&e&&0===c;return o().createElement("div",{"data-testid":a,className:i()("accumulators-stats__history-counter",{"accumulators-stats__history-counter--emphasized":s})},c,e&&o().createElement("div",{className:"accumulators-stats__progress-dots","data-testid":r},[1,2,3].map((function(t){return o().createElement("span",{key:"ticks-dot-counter".concat(t),className:"dot-".concat(t)})}))))};const d=o().memo(u);var m=function(t){var e=t.history_text_size,r=t.rows;return o().createElement(c.Text,{size:e,className:"accumulators-stats__history--expanded"},r.map((function(t,e){return o().createElement("div",{key:e.toString()+t[0],"data-testid":"dt_accu_stats_history_row",className:"accumulators-stats__row"},t.map((function(t,r){return o().createElement(d,{ticks_history_counter_testid:"dt_accu_stats_history_counter",key:r.toString()+t,value:t,has_progress_dots:0===e&&0===r})})))})))};const f=o().memo(m);var p=r("@deriv/shared");function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var y=function(t){var e=t.icon_classname,r=t.is_dark_theme,n=t.is_manual_open,a=t.title,i=t.toggleManual,s=_(o().useState(!0),2),u=s[0],d=s[1],m=(0,p.isMobile)(),f=o().useCallback((function(t){return(0,p.getUrlBase)("/public/videos/accumulators_manual_".concat(m?"mobile":"desktop").concat(r?"_dark":"",".").concat(t))}),[m,r]),h=o().useMemo((function(){return f("mp4")}),[f]),y=o().useMemo((function(){return f("webm")}),[f]);return o().createElement(o().Fragment,null,o().createElement(c.Icon,{icon:"IcInfoOutline",onClick:i,size:16,className:e,data_testid:"dt_ic_info_icon"}),o().createElement(c.Modal,{is_open:n&&!!h&&!!y,should_header_stick_body:!1,title:a,toggleModal:i,width:m?"328px":"596px",className:"accumulators-stats-manual-modal"},o().createElement(c.Modal.Body,{className:"accumulators-stats-modal-body"},o().createElement("div",{className:"accumulators-stats-modal-body__video"},u&&o().createElement(c.Loading,{is_fullscreen:!1}),o().createElement("video",{autoPlay:!0,"data-testid":"dt_accumulators_stats_manual_video",loop:!0,onLoadedData:function(){return d(!1)},playsInline:!0,preload:"auto",width:m?296:563},o().createElement("source",{src:h,type:"video/mp4"}),o().createElement("source",{src:y,type:"video/webm"}),(0,l.localize)("Unfortunately, your browser does not support the video."))),o().createElement(c.Text,{as:"p",size:m?"xs":"s",color:"prominent",className:"accumulators-stats-modal-body__text"},(0,l.localize)("Stats show the history of consecutive tick counts, i.e. the number of ticks the price remained within range continuously.")))))},v=r("./src/Stores/useTraderStores.tsx"),g=r("mobx-react-lite"),b=r("../stores/src/useStore.ts");function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var x=10,C=10,S=15,k=5;const T=(0,g.observer)((function(t){var e,r,n=t.is_expandable,a=void 0===n||n,u=(0,b.A)().ui,m=(0,v.P)().ticks_history_stats,p=void 0===m?{}:m,_=u.is_dark_mode_on,h=(0,s.Y)(),g=h.isDesktop,w=h.isMobile,T=E(o().useState(!0),2),A=T[0],O=T[1],N=E(o().useState(!1),2),L=N[0],P=N[1],j=(0,l.localize)("Stats"),M=null!==(e=null==p?void 0:p.ticks_stayed_in)&&void 0!==e?e:[],I=g||!A?"xxs":"xxxs",D=M.reduce((function(t,e,r){var n=w?A?S:k:A?x:C;return r%n==0&&t.push(M.slice(r,r+n)),t}),[]);return M.length?o().createElement("div",{className:"accumulators-stats"},o().createElement("div",{className:i()("accumulators-stats__container--collapsed")},o().createElement("div",{className:"accumulators-stats__title"},o().createElement(y,{is_dark_theme:_,icon_classname:"info",is_manual_open:L,title:j,toggleManual:function(){return P(!L)}}),o().createElement(c.Text,{weight:"bold",size:w?"xxxs":"xxs",className:"accumulators-stats__title-text"},j)),o().createElement(c.Text,{size:I,className:"accumulators-stats__history"},A?null===(r=D[0])||void 0===r?void 0:r.map((function(t,e){return o().createElement(d,{ticks_history_counter_testid:"dt_accu_stats_history_counter",key:e,value:t,has_progress_dots:0===e})})):o().createElement("div",{className:"accumulators-stats__history-heading"},(0,l.localize)("Number of ticks")))),a&&!A&&(g?o().createElement(f,{history_text_size:I,rows:D}):o().createElement(c.MobileDialog,{onClose:function(){return O(!A)},portal_element_id:"modal_root",title:j,visible:!A,wrapper_classname:"accumulators-stats"},o().createElement(f,{history_text_size:I,rows:D}))),a&&o().createElement(c.Icon,{icon:A?"IcArrowUp":"IcArrowDown",onClick:function(){return O(!A)},className:"accordion-toggle-arrow",data_testid:"dt_accordion-toggle-arrow"})):null}))},"./src/Modules/Trading/Containers/toast-popup.tsx":(t,e,r)=>{r.d(e,{C:()=>v,u:()=>h});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),a=r("react"),i=r.n(a),c=r("react-dom"),s=r.n(c),l=r("@deriv/components"),u=r("mobx-react-lite"),d=r("../stores/src/useStore.ts"),m=["portal_id","children","className"];function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_.apply(null,arguments)}var h=function(t){var e=t.portal_id,r=void 0===e?"popup_root":e,n=t.children,a=t.className,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,m),u=document.getElementById(r);return u?s().createPortal(i().createElement(l.Toast,_({className:o()("dc-toast-popup",a)},c),n),u):null},y=function(t){var e=t.status,r=t.portal_id,n=t.message,a=f(i().useState(!1),2),c=a[0],u=a[1],d=document.getElementById(r);return d&&n?(c||"online"===e?c&&"online"===e&&setTimeout((function(){u(!1)}),1500):u(!0),s().createPortal(i().createElement(l.MobileWrapper,null,i().createElement(l.Toast,{className:o()({"dc-toast--blinker":"blinker"===e}),is_open:c,timeout:0,type:"error"},n)),d)):null},v=(0,u.observer)((function(){var t=(0,d.A)().common.network_status;return i().createElement(y,{portal_id:"popup_root",message:t.tooltip,status:t.class})}))}}]);
//# sourceMappingURL=trader.trader-app.a905dc727c7af41909a7.js.map