"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_SelfExclusion_index_ts"],{"./Components/article/index.ts":(e,s,t)=>{t.d(s,{A:()=>r});var i=t("react"),a=t("@deriv/components"),l=t("@deriv-com/translations"),n=t("../../../node_modules/clsx/dist/clsx.mjs"),o=t("../../../node_modules/react/jsx-runtime.js");const r=e=>{let{title:s,descriptions:t,onClickLearnMore:r,className:c}=e;const d=t?.length>0,_=1===t?.length;return(0,o.jsxs)("article",{className:(0,n.A)("da-article",c),children:[(0,o.jsx)(a.Text,{as:"h4",color:"prominent",line_height:"m",size:"xs",weight:"bold",className:"da-article__header",children:s}),d&&(0,o.jsx)(i.Fragment,{children:_?(0,o.jsx)(a.Text,{as:"p",size:"xxs",line_height:"m",children:t[0]}):(0,o.jsx)("ul",{className:"da-article__list",children:t.map(((e,s)=>(0,o.jsx)("li",{children:(0,o.jsx)(a.Text,{size:"xxs",line_height:"xs",children:e})},s)))})}),r&&(0,o.jsxs)("div",{className:"da-article__learn-more",onClick:r,children:[(0,o.jsx)(a.Text,{size:"xxs",color:"loss-danger",line_height:"s",children:(0,o.jsx)(l.Localize,{i18n_default_text:"Learn more"})}),(0,o.jsx)(a.Icon,{icon:"IcChevronRight",className:"da-article__learn-more-icon",color:"red"})]})]})}},"./Sections/Security/SelfExclusion/index.ts":(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var i=t("react"),a=t.n(i),l=t("@deriv/components"),n=t("@deriv/shared"),o=t("@deriv-com/translations"),r=t("./Components/demo-message/index.ts"),c=t("./Components/load-error-message/index.ts"),d=t("../../../node_modules/clsx/dist/clsx.mjs"),_=t("@deriv-com/utils");const u=(0,i.createContext)({overlay_ref:document.createElement("div"),currency:"",handleSubmit:()=>null});var m=t("../../../node_modules/react/jsx-runtime.js");const x=e=>{let{is_in_overlay:s}=e;const{is_app_settings:t,toggleArticle:a,overlay_ref:n,is_eu:r}=(0,i.useContext)(u),{localize:c}=(0,o.useTranslations)(),x=(e=>{let{is_eu:s,is_app_settings:t}=e;return(s?(()=>{const e=[{component:(0,m.jsx)(o.Localize,{i18n_default_text:"We’ve introduced these limits to encourage <0>responsible trading</0>. They are optional, and you can adjust them anytime.",components:[(0,m.jsx)("a",{className:"link",rel:"noopener noreferrer",target:"_blank",href:_.URLUtils.getDerivStaticURL("/responsible")},0)]})},{component:(0,m.jsx)(o.Localize,{i18n_default_text:"You decide how much and how long to trade. You can take a break from trading whenever you want. This break can be from 6 weeks to 5 years. When it’s over, you can extend it or resume trading after a 24-hour cooling-off period. If you don’t want to set a specific limit, leave the field empty."})},{component:(0,m.jsx)(o.Localize,{i18n_default_text:"These limits apply to your multipliers trades only. For example, <0>maximum total loss</0> refers to the losses on your multipliers trades.",components:[(0,m.jsx)("strong",{},0)]})}];return t||e.push({component:(0,m.jsx)(o.Localize,{i18n_default_text:"If you want to adjust your limits, <0>contact us via live chat</0>. We’ll make the adjustments within 24 hours.",components:[(0,m.jsx)("a",{className:"link",rel:"noopener noreferrer",target:"_blank",href:_.URLUtils.getDerivStaticURL("/contact_us")},0)]})}),e})():[{component:(0,m.jsx)(o.Localize,{i18n_default_text:"We’ve introduced these limits to encourage <0>responsible trading</0>. They are optional, and you can adjust them anytime.",components:[(0,m.jsx)("a",{className:"link",rel:"noopener noreferrer",target:"_blank",href:_.URLUtils.getDerivStaticURL("/responsible")},0)]})},{component:(0,m.jsx)(o.Localize,{i18n_default_text:"You decide how much and how long to trade. You can take a break from trading whenever you want. This break can be from 6 weeks to 5 years. When it’s over, you can extend it or log in to resume trading. If you don’t want to set a specific limit, leave the field empty."})},{component:(0,m.jsx)(o.Localize,{i18n_default_text:"These limits apply to your options trades only. For example, <0>maximum total loss</0> refers to the losses on all your trades on options trading platforms.",components:[(0,m.jsx)("strong",{},0)]})},...t?[]:[{component:(0,m.jsx)(o.Localize,{i18n_default_text:"If you want to adjust your self-exclusion limits, <0>contact us via live chat.</0>",components:[(0,m.jsx)(l.OpenLiveChatLink,{text_size:"xxs"},0)]})}]]).map(((e,s)=>({...e,key:`self_exclusion_desc_${s}`})))})({is_eu:r,is_app_settings:t});return s?(0,m.jsx)(l.Popup.Overlay,{descriptions:x,done_text:c("Done"),overlay_ref:n,title:c("Trading limits"),toggleOverlay:a}):(0,m.jsxs)("div",{className:(0,d.A)("da-self-exclusion-article__content",{"da-self-exclusion-article__content--is-in-modal":!s}),children:[(0,m.jsxs)("div",{className:"da-self-exclusion-article__content-header-container",children:[(0,m.jsx)(l.Text,{as:"h3",color:"prominent",size:"s",line_height:"l",weight:"bold",className:"da-self-exclusion-article__content-header",children:(0,m.jsx)(o.Localize,{i18n_default_text:"About trading limits and self-exclusion"})}),(0,m.jsx)(l.Icon,{icon:"IcCross",className:"da-self-exclusion-article__content-icon",onClick:a})]}),(0,m.jsx)("ul",{className:"da-self-exclusion-article__content-list",children:x.map((e=>(0,m.jsx)("li",{children:(0,m.jsx)(l.Text,{as:"span",size:"xxs",children:e.component})},e.key)))}),t&&(0,m.jsx)("div",{className:"da-self-exclusion-article__content-button",children:(0,m.jsx)(l.Button,{secondary:!0,large:!0,onClick:a,children:(0,m.jsx)(o.Localize,{i18n_default_text:"Done"})})})]})},f=()=>{const{state:e,toggleArticle:s}=(0,i.useContext)(u);return(0,m.jsx)(l.Modal,{className:"self_exclusion__article-modal",is_open:e?.show_article,toggleModal:s,children:(0,m.jsx)(l.ThemedScrollbars,{children:(0,m.jsx)(x,{})})})};var h=t("@deriv/translations"),p=t("./Components/article/index.ts"),g=t("@deriv/stores");const j=(0,g.observer)((()=>{const{toggleArticle:e,is_eu:s}=a().useContext(u);return(0,m.jsx)(p.A,{title:(0,h.localize)("Trading limits and self-exclusion"),descriptions:[s?(0,m.jsx)(h.Localize,{i18n_default_text:"These trading limits and self-exclusion help you control the amount of money and time you spend on {{brand_website_name}} and exercise <0>responsible trading</0>.",components:[(0,m.jsx)(l.StaticUrl,{className:"link",href:"/responsible"},0)],values:{brand_website_name:(0,n.getBrandWebsiteName)()}}):(0,m.jsx)(h.Localize,{i18n_default_text:"These self-exclusion limits help you control the amount of money and time you spend trading on {{platform_name_trader}}, {{platform_name_dbot}} and {{platform_name_smarttrader}} on Deriv. The limits you set here will help you exercise <0>responsible trading</0>.",components:[(0,m.jsx)(l.StaticUrl,{className:"link",href:"/responsible"},0)],values:{platform_name_trader:(0,n.getPlatformSettings)("trader").name,platform_name_dbot:(0,n.getPlatformSettings)("dbot").name,platform_name_smarttrader:(0,n.getPlatformSettings)("smarttrader").name}})],onClickLearnMore:e})}));var y=t("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js");const b=e=>{let{children:s}=e;const{is_app_settings:t,is_wrapper_bypassed:a,state:n}=(0,i.useContext)(u),{isDesktop:o}=(0,y.Y)();return a?(0,m.jsxs)("section",{role:"section-self-exclusion-wrapper",className:(0,d.A)("da-self-exclusion",{"da-self-exclusion--app-settings":t}),children:[!o&&(0,m.jsx)(j,{}),s]}):(0,m.jsxs)(l.Div100vhContainer,{className:(0,d.A)("da-self-exclusion__wrapper",{"da-self-exclusion__wrapper--show-article":n?.show_article}),is_disabled:o,height_offset:"80px",children:[(0,m.jsxs)(l.ThemedScrollbars,{className:"da-self-exclusion__scrollbars",is_bypassed:!o,children:[!o&&(0,m.jsx)(j,{}),s]}),o&&(0,m.jsx)(j,{})]})};var v=t("formik");const N=()=>{const{backToReview:e}=a().useContext(u),{handleSubmit:s,isSubmitting:t}=(0,v.useFormikContext)();return(0,m.jsxs)("div",{className:"da-self-exclusion__confirm-limits",children:[(0,m.jsx)(l.Icon,{icon:"IcStop",className:"da-self-exclusion__confirm-limits-image"}),(0,m.jsx)(l.Text,{as:"h4",align:"center",color:"prominent",className:"da-self-exclusion__confirm-limits-header",line_height:"l",size:"s",weight:"bold",children:(0,m.jsx)(h.Localize,{i18n_default_text:"Save new limits?"})}),(0,m.jsx)(l.Text,{as:"p",align:"center",color:"general",className:"da-self-exclusion__confirm-limits-desc",line_height:"m",size:"xs",children:(0,m.jsx)(h.Localize,{i18n_default_text:"Remember: You cannot log in to your account until the selected date."})}),(0,m.jsxs)("div",{className:"da-self-exclusion__confirm-limits-buttons",children:[(0,m.jsx)(l.Button,{type:"button",secondary:!0,large:!0,onClick:e,children:(0,m.jsx)(h.Localize,{i18n_default_text:"No, review my limits"})}),(0,m.jsx)(l.Button,{type:"submit",is_loading:t,is_disabled:t,primary:!0,large:!0,onClick:()=>s(),children:(0,m.jsx)(h.Localize,{i18n_default_text:"Yes, log me out immediately"})})]})]})},z=()=>{const{backFromConfirmLimits:e,currency:s,currency_display:t,exclusion_texts:a,is_eu:r,state:c}=(0,i.useContext)(u),{isSubmitting:d,values:x}=(0,v.useFormikContext)(),{localize:f}=(0,o.useTranslations)();return c?.show_confirm?(0,m.jsx)(N,{}):(0,m.jsxs)(i.Fragment,{children:[(0,m.jsxs)("div",{onClick:e,className:"da-self-exclusion__back",children:[(0,m.jsx)(l.Icon,{icon:"IcArrowLeftBold"}),(0,m.jsx)(l.Text,{as:"p",size:"xs",weight:"bold",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Back"})})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__confirm",children:[(0,m.jsx)(l.Text,{className:"da-self-exclusion__confirm-header",as:"h2",size:"s",line_height:"l",weight:"bold",color:"prominent",children:(0,m.jsx)(o.Localize,{i18n_default_text:"You have set the following limits:"})}),c?.changed_attributes.map((e=>{let i="";["exclude_until","timeout_until"].includes(e)?i=(0,n.toMoment)(x[e]).format("DD/MM/YYYY"):["max_deposit","max_7day_deposit","max_30day_deposit","max_total_stake","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses","max_balance"].includes(e)?i=`${_.FormatUtils.formatMoney(+x[e],{currency:s})} ${t}`:["session_duration_limit"].includes(e)?i=f("{{value}} mins",{value:x[e]}):["max_open_bets"].includes(e)&&(i=`${x[e]}`);const o=0==+x[e]?"Removed":i;return(0,m.jsxs)("div",{className:"da-self-exclusion__confirm-item",children:[(0,m.jsx)(l.Text,{as:"p",size:"xs",children:a?a[e]:""}),(0,m.jsx)(l.Text,{as:"p",size:"xs",align:"right",weight:"bold",children:o})]},e)})),(0,m.jsx)(l.Text,{as:"p",size:"xs",align:"center",className:"da-self-exclusion__confirm-note",children:r?(0,m.jsx)(o.Localize,{i18n_default_text:"You’ll be able to adjust these limits at any time. You can reduce your limits from the <0>self-exclusion page</0>. To increase or remove your limits, please contact our <1>Customer Support team</1>.",components:[(0,m.jsx)(l.Text,{size:"xs",color:"loss-danger",weight:"bold"},0),(0,m.jsx)(l.StaticUrl,{className:"link link--orange",href:"/contact-us"},1)]}):(0,m.jsx)(o.Localize,{i18n_default_text:"We’ll update your limits. Click <0>Accept</0> to acknowledge that you are fully responsible for your actions, and we are not liable for any addiction or loss.",components:[(0,m.jsx)(l.Text,{size:"xs",weight:"bold"},0)]})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",align:"center",color:"loss-danger",className:"da-self-exclusion__error",children:c?.submit_error_message}),r?(0,m.jsx)(l.Button,{is_loading:d,is_disabled:d,primary:!0,large:!0,type:"submit",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Confirm my limits"})}):(0,m.jsx)(l.Button,{is_loading:d,is_disabled:d,primary:!0,large:!0,type:"submit",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Accept"})})]})]})};var k=t("react-dom");const w=()=>{const{footer_ref:e,goToConfirm:s,toggleArticle:t}=(0,i.useContext)(u),{dirty:a,isSubmitting:n,isValid:r,values:c}=(0,v.useFormikContext)();return e?(0,k.createPortal)((0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)("a",{className:"link link--prominent",onClick:t,children:(0,m.jsx)(l.Text,{size:"xxs",line_height:"m",weight:"bold",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Learn more about trading limits"})})}),(0,m.jsx)(l.Button,{disabled:!a||!r||n,primary:!0,className:"da-self-exclusion__button",large:!0,onClick:()=>s?.(c),type:"button",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Next"})})]}),e):null},L=e=>{let{title:s,has_border_line:t}=e;const{isDesktop:i}=(0,y.Y)();return(0,m.jsx)(l.Text,{as:"h2",weight:"bold",size:i?"xs":"xxs",className:(0,d.A)("da-self-exclusion__header",{"da-self-exclusion__header-border":t}),children:s})},C=()=>{const{currency_display:e,getMaxLength:s}=(0,i.useContext)(u),{errors:t,handleBlur:a,handleChange:n,values:r}=(0,v.useFormikContext)();return(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(L,{title:(0,m.jsx)(o.Localize,{i18n_default_text:"Your stake and loss limits"})}),(0,m.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,m.jsx)(o.Localize,{i18n_default_text:"24 hours"})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. total stake"})}),(0,m.jsx)(v.Field,{name:"max_turnover","data-testid":"dt_max_turnover",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_turnover??"",onChange:n,onBlur:a,maxLength:s?.("max_turnover"),required:!0,error:t.max_turnover})}}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. total loss"})}),(0,m.jsx)(v.Field,{name:"max_losses",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_losses,onChange:n,onBlur:a,maxLength:s?.("max_losses"),required:!0,error:t.max_losses})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,m.jsx)(o.Localize,{i18n_default_text:"7 days"})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. total stake"})}),(0,m.jsx)(v.Field,{name:"max_7day_turnover",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_7day_turnover,onChange:n,onBlur:a,maxLength:s?.("max_7day_turnover"),required:!0,error:t.max_7day_turnover})}}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. total loss"})}),(0,m.jsx)(v.Field,{name:"max_7day_losses",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_7day_losses,onChange:n,onBlur:a,maxLength:s?.("max_7day_losses"),required:!0,error:t.max_7day_losses})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,m.jsx)(o.Localize,{i18n_default_text:"30 days"})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. total stake"})}),(0,m.jsx)(v.Field,{name:"max_30day_turnover",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,onChange:n,onBlur:a,maxLength:s?.("max_30day_turnover"),required:!0,error:t.max_30day_turnover})}}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. total loss"})}),(0,m.jsx)(v.Field,{name:"max_30day_losses",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_30day_losses,onChange:n,onBlur:a,maxLength:s?.("max_30day_losses"),required:!0,error:t.max_30day_losses})}})]})]})]})},T=()=>{const{is_tablet:e,session_duration_digits:s}=(0,i.useContext)(u),{errors:t,handleBlur:a,handleChange:r,setFieldValue:c,values:d}=(0,v.useFormikContext)(),{localize:_}=(0,o.useTranslations)();return(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(L,{title:(0,m.jsx)(o.Localize,{i18n_default_text:"Your session and login limits"})}),(0,m.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"You will be automatically logged out from each session after this time limit."})}),(0,m.jsx)(v.Field,{name:"session_duration_limit",children:e=>{let{field:i}=e;return(0,m.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:_("Minutes"),value:d.session_duration_limit,onChange:r,onBlur:a,maxLength:s,required:!0,error:t.session_duration_limit})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"You will not be able to log in to your account until this date (up to 6 weeks from today)."})}),(0,m.jsx)(v.Field,{name:"timeout_until",children:e=>{let{field:s}=e;return(0,m.jsx)(l.DatePicker,{min_date:(0,n.toMoment)().add(1,"days").format("YYYY-MM-DD"),max_date:(0,n.toMoment)().add(6,"weeks").format("YYYY-MM-DD"),...s,className:"da-self-exclusion__input",label:_("Date"),value:d.timeout_until&&(0,n.epochToMoment)(d.timeout_until),onChange:e=>{let{target:s}=e;return c("timeout_until",s?.value?(0,n.toMoment)(s.value).unix():"",!0)},required:!0,readOnly:!0,error:t.timeout_until})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Your account will be excluded from the website until this date (at least 6 months, up to 5 years)."})}),(0,m.jsx)(v.Field,{name:"exclude_until",children:s=>{let{field:i}=s;return(0,m.jsx)(l.DatePicker,{min_date:(0,n.toMoment)().add(6,"months").add(1,"days").format("YYYY-MM-DD"),max_date:(0,n.toMoment)().add(5,"years").format("YYYY-MM-DD"),...i,alignment:e?"bottom":"left",className:"da-self-exclusion__input",label:_("Date"),value:d.exclude_until,onChange:e=>{let{target:s}=e;return c("exclude_until",s?.value?(0,n.toMoment)(s.value).format("YYYY-MM-DD"):"",!0)},required:!0,autoComplete:"off",readOnly:!0,error:t.exclude_until})}})]})]})]})},M=()=>{const{currency_display:e,getMaxLength:s}=(0,i.useContext)(u),{errors:t,handleBlur:a,handleChange:n,values:r}=(0,v.useFormikContext)(),{localize:c}=(0,o.useTranslations)();return(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(L,{title:(0,m.jsx)(o.Localize,{i18n_default_text:"Your maximum account balance and open positions"})}),(0,m.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Once your account balance reaches this amount, you will not be able to deposit funds into your account."})}),(0,m.jsx)(v.Field,{name:"max_balance",children:i=>{let{field:o}=i;return(0,m.jsx)(l.Input,{...o,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_balance,onChange:n,onBlur:a,maxLength:s?.("max_balance"),required:!0,error:t.max_balance})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Maximum open positions"})}),(0,m.jsx)(v.Field,{name:"max_open_bets",children:e=>{let{field:i}=e;return(0,m.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:c("No. of open position(s)"),value:r.max_open_bets,onChange:n,onBlur:a,maxLength:s?.("max_open_bets"),required:!0,error:t.max_open_bets})}})]})]})]})},S=()=>{const{currency:e,is_mf:s,getMaxLength:t}=(0,i.useContext)(u),{errors:a,handleBlur:n,handleChange:r,values:c}=(0,v.useFormikContext)();return s?(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(L,{title:(0,m.jsx)(o.Localize,{i18n_default_text:"Your maximum deposit limit"})}),(0,m.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,m.jsx)(o.Localize,{i18n_default_text:"24 hours"})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. deposit limit"})}),(0,m.jsx)(v.Field,{name:"max_deposit",children:s=>{let{field:i}=s;return(0,m.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:c.max_deposit,onChange:r,onBlur:n,maxLength:t?.("max_deposit"),required:!0,error:a.max_deposit})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,m.jsx)(o.Localize,{i18n_default_text:"7 days"})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. deposit limit"})}),(0,m.jsx)(v.Field,{name:"max_7day_deposit",children:s=>{let{field:i}=s;return(0,m.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:c.max_7day_deposit,onChange:r,onBlur:n,maxLength:t?.("max_7day_deposit"),required:!0,error:a.max_7day_deposit})}})]}),(0,m.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,m.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,m.jsx)(o.Localize,{i18n_default_text:"30 days"})}),(0,m.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Max. deposit limit"})}),(0,m.jsx)(v.Field,{name:"max_30day_deposit",children:s=>{let{field:i}=s;return(0,m.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:c.max_30day_deposit,onChange:r,onBlur:n,maxLength:t?.("max_30day_deposit"),required:!0,error:a.max_30day_deposit})}})]})]})]}):null},Y=()=>{const{footer_ref:e,goToConfirm:s,is_app_settings:t}=(0,i.useContext)(u),{dirty:a,isSubmitting:n,isValid:r,values:c}=(0,v.useFormikContext)(),d={app_settings:{condition:!!t,components:[C,M]},deriv_app:{condition:!t,components:[C,T,M,S]}};return(0,m.jsxs)(i.Fragment,{children:[Object.keys(d).map((e=>{const s=d[e];return s.condition?(0,m.jsx)(i.Fragment,{children:s.components.map(((s,t)=>(0,m.jsx)(s,{},`${e}component${t}`)))},e):null})),e?(0,m.jsx)(w,{}):(0,m.jsx)("div",{className:"da-self-exclusion__button-wrapper",children:(0,m.jsx)(l.Button,{disabled:!a||!r||n,primary:!0,className:"da-self-exclusion__button",large:!0,onClick:()=>s?.(c),type:"button",children:(0,m.jsx)(o.Localize,{i18n_default_text:"Next"})})})]})},F=()=>{const{handleSubmit:e,state:s,validateFields:t}=(0,i.useContext)(u);return(0,m.jsx)(v.Formik,{initialValues:s?.self_exclusions,onSubmit:e,validate:t,children:(0,m.jsx)(v.Form,{className:"da-self-exclusion__form",noValidate:!0,children:s?.is_confirm_page?(0,m.jsx)(z,{}):(0,m.jsx)(Y,{})})})},D=(0,g.observer)((e=>{let{is_app_settings:s,overlay_ref:t,setIsOverlayShown:a}=e;const{client:d,ui:_}=(0,g.useStore)(),{localize:h}=(0,o.useTranslations)(),{currency:p,is_virtual:j,is_switching:y,standpoint:v,is_eu:N,logout:z,landing_company_shortcode:k,getLimits:w}=d,{is_tablet:L}=_,C="maltainvest"===k,T=v.svg,M=Object.freeze({max_number:9999999999999,max_open_positions:999999999,six_weeks:60480}),S={max_deposit:h("Max. deposit limit per day"),max_turnover:h("Max. total stake per day"),max_losses:h("Max. total loss per day"),max_7day_deposit:h("Max. deposit limit over 7 days"),max_7day_turnover:h("Max. total stake over 7 days"),max_7day_losses:h("Max. total loss over 7 days"),max_30day_deposit:h("Max. deposit limit over 30 days"),max_30day_turnover:h("Max. total stake over 30 days"),max_30day_losses:h("Max. total loss over 30 days"),session_duration_limit:h("Time limit per session"),timeout_until:h("Time out until"),exclude_until:h("Excluded from {{brand_website_name}} until",{brand_website_name:(0,n.getBrandWebsiteName)()}),max_balance:h("Max. account balance"),max_open_bets:h("Max. open positions")},Y=(0,i.useRef)(null),D=(0,i.useRef)({}),B=(0,i.useRef)({max_deposit:"",max_turnover:"",max_losses:"",max_7day_deposit:"",max_7day_turnover:"",max_7day_losses:"",max_30day_deposit:"",max_30day_turnover:"",max_30day_losses:"",session_duration_limit:"",timeout_until:"",exclude_until:"",max_balance:"",max_open_bets:""}),I=Object.freeze({changed_attributes:[],error_message:"",is_confirm_page:!1,is_loading:!0,is_success:!1,self_exclusions:B.current,show_article:!1,show_confirm:!1,submit_error_message:""}),A=(0,n.useIsMounted)(),[E,P]=(0,i.useReducer)(((e,s)=>({...e,...s})),I);(0,i.useEffect)((()=>(j?P({is_loading:!1}):(O(),U()),()=>{P({changed_attributes:[]})})),[]),(0,i.useEffect)((()=>{Y.current!==y&&(Y.current=y,q(),O(),U())}),[y]),(0,i.useEffect)((()=>{a?.(!!E?.show_article)}),[E.show_article,a]);const q=()=>P(I),R=e=>(Object.keys(e||{}).forEach((s=>{e[s]=`${e[s]}`})),e),U=()=>{P({is_loading:!0}),n.WS.authorized.getSelfExclusion({get_self_exclusion:1}).then((e=>{(e=>{if(e.error&&A())P({is_loading:!1,error_message:(0,n.getPropertyValue)(e,["error","message"])});else{const s=R((0,n.getPropertyValue)(e,["get_self_exclusion"]));s.timeout_until&&(s.timeout_until=+s.timeout_until),A()&&P({is_loading:!1,self_exclusions:{...B.current,...s}})}})(e)}))},O=()=>{P({is_loading:!0}),w().then((e=>{D.current=e}))};if(j)return(0,m.jsx)(r.A,{});if(E.is_loading||y)return(0,m.jsx)(l.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(E.error_message)return(0,m.jsx)(c.A,{error_message:E.error_message});const{six_weeks:W}=M,V=(0,n.getCurrencyDisplayCode)(p),$=W.toString().length,G={is_app_settings:s,backFromConfirmLimits:()=>P({is_confirm_page:!1,submit_error_message:""}),backToReview:()=>P({show_confirm:!1}),currency:p,currency_display:V,exclusion_fields_settings:M,exclusion_limits:D,exclusion_texts:S,getMaxLength:e=>{const s=(0,n.getDecimalPlaces)(p),t=t=>t.toString().length+((e=>/session_duration_limit|max_open_bets/.test(e))(e)||0===s?0:s+1);return/max_open_bets/.test(e)&&D.current.get_limits?.open_positions&&!T?t(String(D.current.get_limits.open_positions)):/max_balance/.test(e)&&D.current.get_limits?.account_balance&&!T?t(String(D.current.get_limits.account_balance)):!E.self_exclusions?.[e]||T?/max_open_bets/.test(e)?9:t(String(M.max_number)):t(E.self_exclusions?.[e])},goToConfirm:e=>{const s=Object.keys(e).filter((s=>e[s]!==E.self_exclusions?.[s]));P({changed_attributes:s,is_confirm_page:!0})},handleSubmit:async(e,s)=>{let{setSubmitting:t}=s;const i=["exclude_until","timeout_until"],a=["exclude_until"],l=E.changed_attributes?.some((e=>i.includes(e))),o=()=>new Promise((s=>{const t={set_self_exclusion:1};E.changed_attributes?.forEach((s=>{t[s]=a.includes(s)?e[s]:+e[s]})),n.WS.authorized.setSelfExclusion(t).then((e=>s(e)))}));if(l)if(E.show_confirm){const e=await o();e.error&&A()?P({show_confirm:!1,submit_error_message:e.error.message}):z()}else P({show_confirm:!0});else{const e=await o();e.error&&A()?P({submit_error_message:e.error.message}):(t(!1),A()&&P({show_confirm:!1,is_loading:!0,is_confirm_page:!1}),O(),U())}},is_eu:N,is_mf:C,is_tablet:L,is_wrapper_bypassed:!1,objectValuesToString:R,overlay_ref:t,session_duration_digits:$,state:E,toggleArticle:()=>P({show_article:!E.show_article}),validateFields:e=>{const s={},t=M.max_number,i=M.max_open_positions,a=M.six_weeks,l=h("Please input number greater than 0"),o=e=>0===e?1:`0.${Array(e-1).fill(0).join("")}1`;if(e.timeout_until&&(e.timeout_until<=(0,n.toMoment)().unix()?s.timeout_until=h("Timeout time must be greater than current time."):e.timeout_until>(0,n.toMoment)().add(6,"week").unix()&&(s.timeout_until=h("Timeout time cannot be more than 6 weeks."))),e.exclude_until&&((0,n.toMoment)(e.exclude_until).unix()<(0,n.toMoment)().unix()?s.exclude_until=h("Exclude time must be after today."):(0,n.toMoment)(e.exclude_until).unix()<(0,n.toMoment)().add(6,"month").unix()?s.exclude_until=h("Exclude time cannot be less than 6 months."):(0,n.toMoment)(e.exclude_until).unix()>(0,n.toMoment)().add(5,"year").unix()&&(s.exclude_until=h("Exclude time cannot be for more than five years."))),["max_deposit","max_7day_deposit","max_30day_deposit","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses"].forEach((i=>{if(e[i]){const a=(0,n.validNumber)(e[i],{type:"float",decimals:(0,n.getDecimalPlaces)(p),min:N?Number(o((0,n.getDecimalPlaces)(p))):0,max:Number(N&&E.self_exclusions?.[i])||t}),{is_ok:l,message:r}="object"==typeof a?a:{is_ok:a,message:null};l||(s[i]=r)}!E.self_exclusions?.[i]||e[i]||T||(s[i]=l)})),e.session_duration_limit){const t=(0,n.validNumber)(e.session_duration_limit,{type:"integer",min:Number(N),max:N?E.self_exclusions?.session_duration_limit:a}),{is_ok:i,message:l}="object"==typeof t?t:{is_ok:t,message:null};i||(s.session_duration_limit=l),e.session_duration_limit>a&&(s.session_duration_limit=h("Enter a value in minutes, up to 60480 minutes (equivalent to 6 weeks)."))}if(e.max_open_bets){const t=(0,n.validNumber)(e.max_open_bets,{type:"integer",min:Number(N),max:N&&D.current.get_limits?.open_positions||i}),{is_ok:a,message:l}="object"==typeof t?t:{is_ok:t,message:null};a||(s.max_open_bets=l)}if(e.max_balance){const i=(0,n.validNumber)(e.max_balance,{type:"float",decimals:(0,n.getDecimalPlaces)(p),min:N?Number(o((0,n.getDecimalPlaces)(p))):0,max:N&&D.current.get_limits?.account_balance||t}),{is_ok:a,message:l}="object"==typeof i?i:{is_ok:i,message:null};a||(s.max_balance=l)}return["max_balance","max_open_bets","session_duration_limit"].forEach((t=>{!E.self_exclusions?.[t]||e[t]||T||(s[t]=l)})),s}};return(0,m.jsxs)(u.Provider,{value:G,children:[(0,m.jsxs)(b,{children:[!s&&(0,m.jsx)(f,{}),(0,m.jsx)(F,{})]}),t&&E.show_article&&(0,m.jsx)(x,{is_in_overlay:!0})]})}))}}]);
//# sourceMappingURL=account.Sections_Security_SelfExclusion_index_ts.a77e8b25fb3501e890e6.js.map