"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r="https://embed.cloudflarestream.com/embed/sdk.latest.js",n=function(){if("undefined"!=typeof window)return window.Stream};function a(){var e=t.useState(n),o=e[0],a=e[1];return t.useEffect((function(){if(!o){var e=document.querySelector("script[src='"+r+"']"),t=null!=e?e:document.createElement("script");t.addEventListener("load",(function(){a(n)})),e||(t.src=r,document.head.appendChild(t))}}),[o]),o}function i(e,o,r){t.useEffect((function(){o.current&&(o.current[e]=r)}),[e,r,o])}function d(e,o,r){void 0===r&&(r=l),t.useEffect((function(){if(o.current){var t=o.current;return t.addEventListener(e,r),function(){return t.removeEventListener(e,r)}}}),[r,e,o])}var l=function(){},u={position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},s=function(e){var r=e.children,n=e.responsive,a=e.className,i=e.videoDimensions,d=i.videoHeight,l=i.videoWidth,u=t.useMemo((function(){return{position:"relative",paddingTop:l>0?d/l*100+"%":void 0}}),[l,d]);return o.createElement("div",{className:a,style:n?u:void 0},r)},c=function(e){var r=e.src,a=e.customerCode,l=e.adUrl,c=e.controls,m=void 0!==c&&c,p=e.muted,f=void 0!==p&&p,v=e.autoplay,h=void 0!==v&&v,y=e.loop,g=void 0!==y&&y,C=e.preload,T=void 0===C?"metadata":C,S=e.primaryColor,b=e.letterboxColor,E=e.defaultTextTrack,R=e.height,x=e.width,k=e.poster,w=e.currentTime,U=void 0===w?0:w,W=e.volume,L=void 0===W?1:W,P=e.playbackRate,D=void 0===P?1:P,H=e.startTime,j=e.streamRef,I=e.responsive,A=void 0===I||I,M=e.className,N=e.title,q=e.onAbort,z=e.onCanPlay,B=e.onCanPlayThrough,O=e.onDurationChange,_=e.onEnded,F=e.onError,K=e.onLoadedData,V=e.onLoadedMetaData,G=e.onLoadStart,J=e.onPause,Q=e.onPlay,X=e.onPlaying,Y=e.onProgress,Z=e.onRateChange,$=e.onResize,ee=e.onSeeked,te=e.onSeeking,oe=e.onStalled,re=e.onSuspend,ne=e.onTimeUpdate,ae=e.onVolumeChange,ie=e.onWaiting,de=e.onStreamAdStart,le=e.onStreamAdEnd,ue=e.onStreamAdTimeout,se=t.useRef(),ce=null!=j?j:se,me=t.useState({videoHeight:0,videoWidth:0}),pe=me[0],fe=me[1],ve=t.useRef(null),he=function(e,o){var r=o.muted,n=o.preload,a=o.loop,i=o.autoplay,d=o.controls,l=o.poster,u=o.primaryColor,s=o.letterboxColor,c=o.adUrl,m=o.startTime,p=o.defaultTextTrack,f=o.customerCode,v=[l&&"poster="+encodeURIComponent(l),c&&"ad-url="+encodeURIComponent(c),p&&"defaultTextTrack="+encodeURIComponent(p),u&&"primaryColor="+encodeURIComponent(u),s&&"letterboxColor="+encodeURIComponent(s),m&&"startTime="+m,r&&"muted=true",n&&"preload="+n,a&&"loop=true",i&&"autoplay=true",!d&&"controls=false"].filter(Boolean).join("&");return t.useMemo((function(){return f?"https://customer-"+f+".cloudflarestream.com/"+e+"?"+v:"https://iframe.cloudflarestream.com/"+e+"?"+v}),[])}(r,{customerCode:a,muted:f,preload:T,loop:g,autoplay:h,controls:m,poster:k,primaryColor:S,letterboxColor:b,adUrl:l,defaultTextTrack:E,startTime:H}),ye=function(e){try{var t=new URL(e);return t.hostname.endsWith("videodelivery.net")||t.hostname.endsWith("cloudflarestream.com")}catch(e){return!1}}(r)?r:he;return i("muted",ce,f),i("controls",ce,m),i("src",ce,r),i("autoplay",ce,h),i("currentTime",ce,U),i("loop",ce,g),i("preload",ce,T),i("primaryColor",ce,S),i("letterboxColor",ce,b),i("volume",ce,L),i("playbackRate",ce,D),t.useEffect((function(){var e=n();if(ve.current&&e){var t=e(ve.current);ce.current=t;var o=t.videoHeight,r=t.videoWidth;o&&r&&fe({videoHeight:o,videoWidth:r})}}),[]),d("abort",ce,q),d("canplay",ce,z),d("canplaythrough",ce,B),d("durationchange",ce,O),d("ended",ce,_),d("error",ce,F),d("loadeddata",ce,K),d("loadedmetadata",ce,V),d("loadstart",ce,G),d("pause",ce,J),d("play",ce,Q),d("playing",ce,X),d("progress",ce,Y),d("ratechange",ce,Z),d("seeked",ce,ee),d("seeking",ce,te),d("stalled",ce,oe),d("suspend",ce,re),d("timeupdate",ce,ne),d("volumechange",ce,ae),d("waiting",ce,ie),d("stream-adstart",ce,de),d("stream-adend",ce,le),d("stream-adtimeout",ce,ue),d("resize",ce,(function(e){if(ce.current){var t=ce.current;fe({videoHeight:t.videoHeight,videoWidth:t.videoWidth}),$&&$(e)}})),o.createElement(s,{className:M,responsive:A,videoDimensions:pe},o.createElement("iframe",{ref:ve,src:ye,title:N,style:A?u:void 0,frameBorder:0,height:R,width:x,allow:"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;",allowFullScreen:!0}))};exports.Stream=function(e){return a()?o.createElement(c,Object.assign({},e)):null},exports.useStreamSDK=a;
//# sourceMappingURL=stream-react.cjs.production.min.js.map
