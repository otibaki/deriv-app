{"version":3,"file":"stream-react.esm.js","sources":["../src/useStreamSDK.ts","../src/useIframeSrc.tsx","../src/validSrcUrl.ts","../src/Stream.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst sdkScriptLocation =\n  \"https://embed.cloudflarestream.com/embed/sdk.latest.js\";\n\n// This needs to be wrapped as such for two reasons:\n// - Stream is a function, and useState invokes functions immediately and uses the return value.\n// - We need to check typeof on window to ensure safety for server side rendering.\nexport const safelyAccessStreamSDK = () => {\n  if (typeof window === \"undefined\") return undefined;\n  return window.Stream;\n};\n\nexport function useStreamSDK() {\n  const [streamSdk, setStreamSdk] = useState(safelyAccessStreamSDK);\n\n  useEffect(() => {\n    if (!streamSdk) {\n      const existingScript = document.querySelector<HTMLScriptElement>(\n        `script[src='${sdkScriptLocation}']`\n      );\n      const script = existingScript ?? document.createElement(\"script\");\n      script.addEventListener(\"load\", () => {\n        setStreamSdk(safelyAccessStreamSDK);\n      });\n      if (!existingScript) {\n        script.src = sdkScriptLocation;\n        document.head.appendChild(script);\n      }\n    }\n  }, [streamSdk]);\n\n  return streamSdk;\n}\n","import { useMemo } from \"react\";\nimport { Preload } from \"./types\";\n\ninterface IframeSrcOptions {\n  muted?: boolean;\n  loop?: boolean;\n  autoplay?: boolean;\n  controls?: boolean;\n  poster?: string;\n  primaryColor?: string;\n  letterboxColor?: string;\n  startTime?: string | number;\n  adUrl?: string;\n  defaultTextTrack?: string;\n  preload?: Preload;\n  customerCode?: string;\n}\n\nexport function useIframeSrc(\n  src: string,\n  {\n    muted,\n    preload,\n    loop,\n    autoplay,\n    controls,\n    poster,\n    primaryColor,\n    letterboxColor,\n    adUrl,\n    startTime,\n    defaultTextTrack,\n    customerCode,\n  }: IframeSrcOptions\n) {\n  const paramString = [\n    poster && `poster=${encodeURIComponent(poster)}`,\n    adUrl && `ad-url=${encodeURIComponent(adUrl)}`,\n    defaultTextTrack &&\n      `defaultTextTrack=${encodeURIComponent(defaultTextTrack)}`,\n    primaryColor && `primaryColor=${encodeURIComponent(primaryColor)}`,\n    letterboxColor && `letterboxColor=${encodeURIComponent(letterboxColor)}`,\n    startTime && `startTime=${startTime}`,\n    muted && \"muted=true\",\n    preload && `preload=${preload}`,\n    loop && \"loop=true\",\n    autoplay && \"autoplay=true\",\n    !controls && \"controls=false\",\n  ]\n    .filter(Boolean)\n    .join(\"&\");\n\n  const iframeSrc = useMemo(\n    () =>\n      customerCode\n        ? `https://customer-${customerCode}.cloudflarestream.com/${src}?${paramString}`\n        : `https://iframe.cloudflarestream.com/${src}?${paramString}`,\n    // we intentionally do NOT include paramString here because we want\n    // to avoid changing the URL when these options change. Changes to\n    // these options will instead be handled separately via the SDK.\n    []\n  );\n\n  return iframeSrc;\n}\n","export function validSrcUrl(str: string) {\n  try {\n    const url = new URL(str);\n    return (\n      url.hostname.endsWith(\"videodelivery.net\") ||\n      url.hostname.endsWith(\"cloudflarestream.com\")\n    );\n  } catch {\n    return false;\n  }\n}\n","import React, {\n  useRef,\n  useEffect,\n  RefObject,\n  FC,\n  useState,\n  CSSProperties,\n  useMemo,\n  MutableRefObject,\n} from \"react\";\nimport { StreamPlayerApi, StreamProps, VideoDimensions } from \"./types\";\nimport { useStreamSDK, safelyAccessStreamSDK } from \"./useStreamSDK\";\nimport { useIframeSrc } from \"./useIframeSrc\";\nimport { validSrcUrl } from \"./validSrcUrl\";\n\n/**\n * Hook for syncing properties to the SDK api when they change\n */\nfunction useProperty<T, Key extends keyof T>(\n  name: Key,\n  ref: RefObject<T | undefined>,\n  value: T[Key]\n) {\n  useEffect(() => {\n    if (!ref.current) return;\n    const el = ref.current;\n    el[name] = value;\n  }, [name, value, ref]);\n}\n\n/**\n * Hook for binding event listeners to the player.\n */\nfunction useEvent(\n  event: string,\n  ref: MutableRefObject<StreamPlayerApi | undefined>,\n  callback: EventListener = noop\n) {\n  useEffect(() => {\n    if (!ref.current) return;\n    const el = ref.current;\n    el.addEventListener(event, callback);\n    // clean up\n    return () => el.removeEventListener(event, callback);\n  }, [callback, event, ref]);\n}\n\n// Declaring a single noop function that will retain object\n// identity across renders and prevent unnecessary rebinding\n// when no callback is provided\nconst noop = () => {};\n\nexport const Stream: FC<StreamProps> = (props) => {\n  const streamSdk = useStreamSDK();\n  return streamSdk ? <StreamEmbed {...props} /> : null;\n};\n\nconst responsiveIframeStyles: CSSProperties = {\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  height: \"100%\",\n  width: \"100%\",\n};\n\nconst Container: FC<{\n  responsive: boolean;\n  videoDimensions: VideoDimensions;\n  className?: string;\n}> = ({ children, responsive, className, videoDimensions }) => {\n  const { videoHeight, videoWidth } = videoDimensions;\n  const responsiveStyles: CSSProperties = useMemo<CSSProperties>(\n    () => ({\n      position: \"relative\",\n      paddingTop:\n        videoWidth > 0 ? `${(videoHeight / videoWidth) * 100}%` : undefined,\n    }),\n    [videoWidth, videoHeight]\n  );\n  return (\n    <div\n      className={className}\n      style={responsive ? responsiveStyles : undefined}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport const StreamEmbed: FC<StreamProps> = ({\n  src,\n  customerCode,\n  adUrl,\n  controls = false,\n  muted = false,\n  autoplay = false,\n  loop = false,\n  preload = \"metadata\",\n  primaryColor,\n  letterboxColor,\n  defaultTextTrack,\n  height,\n  width,\n  poster,\n  currentTime = 0,\n  volume = 1,\n  playbackRate = 1,\n  startTime,\n  streamRef,\n  responsive = true,\n  className,\n  title,\n  onAbort,\n  onCanPlay,\n  onCanPlayThrough,\n  onDurationChange,\n  onEnded,\n  onError,\n  onLoadedData,\n  onLoadedMetaData,\n  onLoadStart,\n  onPause,\n  onPlay,\n  onPlaying,\n  onProgress,\n  onRateChange,\n  onResize,\n  onSeeked,\n  onSeeking,\n  onStalled,\n  onSuspend,\n  onTimeUpdate,\n  onVolumeChange,\n  onWaiting,\n  onStreamAdStart,\n  onStreamAdEnd,\n  onStreamAdTimeout,\n}) => {\n  const internalRef = useRef<StreamPlayerApi>();\n  const ref = streamRef ?? internalRef;\n\n  const [videoDimensions, setVideoDimensions] = useState({\n    videoHeight: 0,\n    videoWidth: 0,\n  });\n\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  const computedSrc = useIframeSrc(src, {\n    customerCode,\n    muted,\n    preload,\n    loop,\n    autoplay,\n    controls,\n    poster,\n    primaryColor,\n    letterboxColor,\n    adUrl,\n    defaultTextTrack,\n    startTime,\n  });\n\n  // While it's easier for most consumers to simply provide the video UID\n  // or signed token and have us compute the iframe's src for them, some\n  // consumers may need to manually specify the iframe's src.\n  const iframeSrc = validSrcUrl(src) ? src : computedSrc;\n\n  useProperty(\"muted\", ref, muted);\n  useProperty(\"controls\", ref, controls);\n  useProperty(\"src\", ref, src);\n  useProperty(\"autoplay\", ref, autoplay);\n  useProperty(\"currentTime\", ref, currentTime);\n  useProperty(\"loop\", ref, loop);\n  useProperty(\"preload\", ref, preload);\n  useProperty(\"primaryColor\", ref, primaryColor);\n  useProperty(\"letterboxColor\", ref, letterboxColor);\n  useProperty(\"volume\", ref, volume);\n  useProperty(\"playbackRate\", ref, playbackRate);\n\n  // instantiate API after properties are bound because we want undefined\n  // values to be set before defining the properties\n  useEffect(() => {\n    const Stream = safelyAccessStreamSDK();\n    if (iframeRef.current && Stream) {\n      const api = Stream(iframeRef.current);\n      ref.current = api;\n      const { videoHeight, videoWidth } = api;\n      if (videoHeight && videoWidth)\n        setVideoDimensions({ videoHeight, videoWidth });\n    }\n  }, []);\n\n  // bind events\n  useEvent(\"abort\", ref, onAbort);\n  useEvent(\"canplay\", ref, onCanPlay);\n  useEvent(\"canplaythrough\", ref, onCanPlayThrough);\n  useEvent(\"durationchange\", ref, onDurationChange);\n  useEvent(\"ended\", ref, onEnded);\n  useEvent(\"error\", ref, onError);\n  useEvent(\"loadeddata\", ref, onLoadedData);\n  useEvent(\"loadedmetadata\", ref, onLoadedMetaData);\n  useEvent(\"loadstart\", ref, onLoadStart);\n  useEvent(\"pause\", ref, onPause);\n  useEvent(\"play\", ref, onPlay);\n  useEvent(\"playing\", ref, onPlaying);\n  useEvent(\"progress\", ref, onProgress);\n  useEvent(\"ratechange\", ref, onRateChange);\n  useEvent(\"seeked\", ref, onSeeked);\n  useEvent(\"seeking\", ref, onSeeking);\n  useEvent(\"stalled\", ref, onStalled);\n  useEvent(\"suspend\", ref, onSuspend);\n  useEvent(\"timeupdate\", ref, onTimeUpdate);\n  useEvent(\"volumechange\", ref, onVolumeChange);\n  useEvent(\"waiting\", ref, onWaiting);\n  useEvent(\"stream-adstart\", ref, onStreamAdStart);\n  useEvent(\"stream-adend\", ref, onStreamAdEnd);\n  useEvent(\"stream-adtimeout\", ref, onStreamAdTimeout);\n  useEvent(\"resize\", ref, (e) => {\n    if (ref.current) {\n      const { videoHeight, videoWidth } = ref.current;\n      setVideoDimensions({ videoHeight, videoWidth });\n      onResize && onResize(e);\n    }\n  });\n\n  return (\n    <Container\n      className={className}\n      responsive={responsive}\n      videoDimensions={videoDimensions}\n    >\n      <iframe\n        ref={iframeRef}\n        src={iframeSrc}\n        title={title}\n        style={responsive ? responsiveIframeStyles : undefined}\n        frameBorder={0}\n        height={height}\n        width={width}\n        allow=\"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;\"\n        allowFullScreen\n      />\n    </Container>\n  );\n};\n"],"names":["sdkScriptLocation","safelyAccessStreamSDK","window","undefined","Stream","useStreamSDK","useState","streamSdk","setStreamSdk","useEffect","existingScript","document","querySelector","script","createElement","addEventListener","src","head","appendChild","useIframeSrc","muted","preload","loop","autoplay","controls","poster","primaryColor","letterboxColor","adUrl","startTime","defaultTextTrack","customerCode","paramString","encodeURIComponent","filter","Boolean","join","iframeSrc","useMemo","validSrcUrl","str","url","URL","hostname","endsWith","useProperty","name","ref","value","current","el","useEvent","event","callback","noop","removeEventListener","props","React","StreamEmbed","responsiveIframeStyles","position","top","left","right","bottom","height","width","Container","children","responsive","className","videoDimensions","videoHeight","videoWidth","responsiveStyles","paddingTop","style","currentTime","volume","playbackRate","streamRef","title","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEnded","onError","onLoadedData","onLoadedMetaData","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onResize","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onStreamAdStart","onStreamAdEnd","onStreamAdTimeout","internalRef","useRef","setVideoDimensions","iframeRef","computedSrc","api","e","frameBorder","allow","allowFullScreen"],"mappings":"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"}