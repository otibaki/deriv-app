"use strict";(self.webpackChunk_deriv_cfd=self.webpackChunk_deriv_cfd||[]).push([["cfd-app"],{"./src/app.tsx":(e,r,t)=>{t.r(r),t.d(r,{default:()=>A});var n=t("react"),o=t.n(n),i=t("react-router"),c=t("react-router-dom"),a=t("@deriv/translations"),l=t("./src/Constants/routes-config.tsx"),s=t("@deriv/shared");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},f.apply(null,arguments)}function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){v(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function v(e,r,t){return(r=function(e){var r=function(e){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const p=function(e){return o().createElement(c.Route,{exact:e.exact,path:e.path,render:function(r){var t,n=null;if(e.component===c.Redirect){var i=e.to;e.path===s.routes.index&&(i=r.location.pathname.toLowerCase().replace(e.path,"")),n=o().createElement(c.Redirect,{to:i})}else if(!e.is_authenticated||e.is_logged_in||e.is_logging_in){var l,u=(null!==(l=e.routes)&&void 0!==l?l:[]).reduce((function(e,r){var t;return d(d({},e),null===(t=r.subroutes)||void 0===t?void 0:t.find((function(e){return e.default})))}),{}),m=!(0,s.isEmptyObject)(u),v=(0,s.removeBranchName)(location.pathname),p=e.component;n=o().createElement(o().Fragment,null,m&&v===e.path&&o().createElement(c.Redirect,{to:null==u?void 0:u.path}),o().createElement(p,f({},r,{routes:e.routes})))}else(0,s.redirectToLogin)(e.is_logged_in,(0,a.getLanguage)());var g=(null===(t=e.getTitle)||void 0===t?void 0:t.call(e))||"";return document.title="".concat(g," | ").concat(s.default_title),n}})};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},g.apply(null,arguments)}const b=function(e){return o().createElement(o().Suspense,{fallback:o().createElement("div",null,o().createElement(a.Localize,{i18n_default_text:"Loading..."}))},o().createElement(c.Switch,null,(0,l.A)().map((function(r,t){return o().createElement(p,g({key:t},r,e))}))))};var h=t("@deriv/components");const _=function(e){var r=e.header,t=e.message,n=e.is_dialog,i=e.redirect_label,c=e.redirectOnClick,l=e.should_show_refresh,u=void 0===l||l?(0,a.localize)("Please refresh this page to continue."):"";return n?o().createElement(h.Dialog,{title:r||(0,a.localize)("There was an error"),is_visible:!0,confirm_button_text:i||(0,a.localize)("Ok"),onConfirm:c||function(){return location.reload()}},t||(0,a.localize)("Sorry, an error occured while processing your request.")):o().createElement(h.PageErrorContainer,{error_header:null!=r?r:"",error_messages:t?[t,u]:[],redirect_urls:[s.routes.trade],redirect_labels:[i||(0,a.localize)("Refresh")],buttonOnClick:c||function(){return location.reload()}})};var y=t("@deriv/stores"),O=(0,y.observer)((function(e){var r=e.passthrough,t=(0,y.useStore)(),n=t.client,i=t.common,c=n.is_logged_in,a=n.is_logging_in,l=i.error;return i.has_error?o().createElement(_,l):o().createElement(b,{is_logged_in:c,is_logging_in:a,passthrough:r})}));const E=(0,i.withRouter)(O);var P,j,w,S=t("mobx"),k=t("./src/Stores/index.js"),x=t("@deriv-com/utils");const C=(j=!1,w=x.PromiseUtils.createPromise(),{init:function(e){j||(P=e,w.resolve(P.server_time),j=!0)},get:function(){return j&&P.server_time?P.server_time.clone():void 0},timePromise:function(){return j?Promise.resolve(P.server_time):w.promise}});var z;(0,S.configure)({enforceActions:"observed"});var D=t("@deriv/api"),R=t("./src/Stores/Modules/CFD/Helpers/useCfdStores.tsx");const L=function(e){var r=e.children,t=e.store;return o().createElement(D.APIProvider,null,o().createElement(y.StoreProvider,{store:t},o().createElement(R.e,null,r)))},A=function(e){var r=e.passthrough;return function(e,r){z||(C.init(e.common),(0,s.setWebsocket)(r),z=new k.A(e))}(r.root_store,r.WS),o().createElement(L,{store:r.root_store},o().createElement(E,null))}}}]);