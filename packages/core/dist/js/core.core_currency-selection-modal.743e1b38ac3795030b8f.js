"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9337],{188752:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});n(286326);var c=n(189137),i=n(596176),r=n(836870);const o=e=>{switch(e){case c.ACCOUNT_BADGE_STATUS.PENDING:return{text:(0,r.jsx)(i.Localize,{i18n_default_text:"In review"}),icon:"IcMt5Pending"};case c.ACCOUNT_BADGE_STATUS.FAILED:return{text:(0,r.jsx)(i.Localize,{i18n_default_text:"Failed"}),icon:"IcMt5Failed",icon_size:"18"};case c.ACCOUNT_BADGE_STATUS.NEEDS_VERIFICATION:return{text:(0,r.jsx)(i.Localize,{i18n_default_text:"Needs Verification"}),icon:"IcMt5Verification",icon_size:"18"};default:return{text:"",icon:""}}};var s=n(57886),l=n(33118),a=n(679955),u=n(414646);const d=["icon"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var c=n.call(e,t||"default");if("object"!=typeof c)return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=e=>{let{icon:t}=e,n=function(e,t){if(null==e)return{};var n,c,i=function(e,t){if(null==e)return{};var n={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.includes(c))continue;n[c]=e[c]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,d);return(0,r.jsx)(s.Icon,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({icon:`IcCurrency${(0,c.capitalizeFirstLetter)(t.toLowerCase())}`},n))};var f=n(255530),A=n.n(f),y=n(263851),p=n(478784);const b=(0,a.observer)((e=>{let{is_visible:t}=e;const{client:n,traders_hub:i,ui:a}=(0,u.A)(),{account_list:d,accounts:_,switchAccount:v,has_any_real_account:f,account_status:b,loginid:x}=n,{closeModal:h,selected_region:T}=i,{openRealAccountSignup:j,toggleSetCurrencyModal:N}=a,O=(0,y.A)(),{text:g,icon:C}=o(O),E=(0,p.A)();let S;return(0,r.jsxs)(s.Modal,{is_open:t,toggleModal:h,width:"422px",height:"422px",children:[(0,r.jsxs)("div",{className:"currency-selection-modal__header",children:[(0,r.jsx)(s.Text,{"line-height":"m",weight:"bold",children:(0,l.localize)("Select account")}),(0,r.jsx)(s.Icon,{className:"close-icon",icon:"IcCross",onClick:()=>h()})]}),(0,r.jsx)("div",{className:"currency-selection-modal__body",children:d.filter((e=>!1==!!e.is_disabled&&(!e.is_virtual&&"Non-EU"===T&&e.loginid.startsWith("CR")||"EU"===T&&e.loginid.startsWith("MF")))).map((e=>{let{icon:t,loginid:n}=e;const{balance:i,currency:o}=_[n],l=x===n;return(0,r.jsxs)("div",{className:A()("currency-item-card",{"currency-item-card--active":l}),onClick:async()=>{n!==x&&((0,c.startPerformanceEventTimer)("switch_currency_accounts_time"),await v(n)),h()},children:[(0,r.jsx)(m,{className:"currency-item-card__icons",icon:o?t:"UNKNOWN",size:32}),(0,r.jsxs)("div",{className:"currency-item-card__details",children:[(0,r.jsx)(s.Text,{size:"xs",children:(0,c.getCurrencyName)(o)}),(0,r.jsx)(s.Text,{color:l?"prominent":"less-prominent",size:"xxs",children:n})]}),(0,r.jsx)("div",{className:"currency-item-card__balance",children:O?(0,r.jsx)(s.StatusBadge,{account_status:O,icon:C,text:g}):(0,r.jsx)(s.Text,{size:"xs",color:"prominent",children:(0,r.jsx)(s.Money,{amount:i,currency:o,show_currency:!0})})})]},n)}))}),(0,r.jsx)("div",{className:"currency-selection-modal__bottom-controls",children:(0,r.jsx)(s.Button,{className:"block-button",onClick:()=>{clearTimeout(S),S=setTimeout((()=>{f&&!E?N():j("manage")}),500),h()},secondary:!0,large:!0,children:(0,l.localize)("Add or manage account")})})]})}))},471879:(e,t,n)=>{n.d(t,{A:()=>o});var c=n(286326),i=n(414646),r=n(189137);const o=()=>{var e,t,n,o;const{client:s}=(0,i.A)(),{account_status:l,updateAccountStatus:a}=s||{};(0,c.useEffect)((()=>{!async function(){await a()}()}),[]);const u=null==l?void 0:l.authentication,d=null==u||null===(e=u.identity)||void 0===e?void 0:e.status,_=null==u||null===(t=u.identity)||void 0===t||null===(t=t.services)||void 0===t||null===(t=t.onfido)||void 0===t?void 0:t.status,v=null==u||null===(n=u.identity)||void 0===n||null===(n=n.services)||void 0===n||null===(n=n.manual)||void 0===n?void 0:n.status,m=null==u||null===(o=u.document)||void 0===o?void 0:o.status,f="none",A="verified",y="pending",p=m&&["rejected","expired","suspected"].includes(m),b=m===y,x=m===f,h=[_,v].includes(A),T=[_,v].includes(y)&&!h,j=[_,v].every((e=>e===f)),N=d===A&&m===A;return{mf_account_status:m&&_&&v?!j&&(!T&&!h)||p?r.ACCOUNT_BADGE_STATUS.FAILED:j||x?r.ACCOUNT_BADGE_STATUS.NEEDS_VERIFICATION:T||b?r.ACCOUNT_BADGE_STATUS.PENDING:null:null,kyc_status:N?{}:{poi_status:d,poa_status:m,valid_tin:1,required_tin:1}}}},654846:(e,t,n)=>{n.d(t,{A:()=>i});var c=n(414646);const i=()=>{const{client:e}=(0,c.A)(),{active_accounts:t}=e;return t.some((e=>0===e.is_virtual))}},478784:(e,t,n)=>{n.d(t,{A:()=>r});var c=n(414646),i=n(654846);const r=()=>{const{client:e}=(0,c.A)(),{account_list:t}=e,n=(0,i.A)();return t.filter((e=>!e.is_virtual)).some((e=>"Real"!==e.title&&"Investment"!==e.title))||!n}},263851:(e,t,n)=>{n.d(t,{A:()=>s});var c=n(189137),i=n(56752),r=n(471879),o=n(414646);const s=()=>{const{client:{is_eu:e}}=(0,o.A)(),t=(0,i.A)(),{mf_account_status:n}=(0,r.A)();return e&&t&&n&&[c.ACCOUNT_BADGE_STATUS.PENDING,c.ACCOUNT_BADGE_STATUS.FAILED,c.ACCOUNT_BADGE_STATUS.NEEDS_VERIFICATION].includes(n)?n:null}}}]);
//# sourceMappingURL=core.core_currency-selection-modal.743e1b38ac3795030b8f.js.map