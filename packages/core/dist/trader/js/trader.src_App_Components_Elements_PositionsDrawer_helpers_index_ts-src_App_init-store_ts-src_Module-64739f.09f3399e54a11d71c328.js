/*! For license information please see trader.src_App_Components_Elements_PositionsDrawer_helpers_index_ts-src_App_init-store_ts-src_Module-64739f.09f3399e54a11d71c328.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["src_App_Components_Elements_PositionsDrawer_helpers_index_ts-src_App_init-store_ts-src_Module-64739f"],{"../stores/src/storeContext.ts":(t,e,r)=>{r.d(e,{A:()=>n});const n=(0,r("react").createContext)(null)},"../stores/src/storeProvider.tsx":(t,e,r)=>{r.d(e,{A:()=>E});var n=r("react"),o=r.n(n),i=r("../stores/src/storeContext.ts"),a=r("mobx"),s=r("../../node_modules/mobx-persist-store/lib/esm5/index.js");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}var v={dtrader_v2_mobile:!1,dtrader_v2_desktop:!1,next_qs:!1,sharkfin:!1,wallet:!1},m=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance&&e.instance.cleanup(),(t=function(t,e,r){return e=y(e),function(t,e){if(e&&("object"==f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,r||[],y(t).constructor):e.apply(t,r))}(this,e,["FeatureFlagsStore",function(){t.data||t.update(v),t.data&&Object.keys(t.data).length!==Object.keys(v).length&&t.update((function(t){var e=v;return Object.keys(v).forEach((function(r){void 0!==t[r]&&(e[r]=t[r])})),e}))}])).data=v,e.instance=t,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,t),r=e,(n=[{key:"cleanup",value:function(){this.unmount()}}])&&p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=void 0,(0,a.makeObservable)(this,{data:a.observable,update:a.action.bound,unmount:a.action.bound}),(0,s.pu)(this,{name:e,properties:["data"],storage:window.localStorage}).then((function(){return null==r?void 0:r()}))},(e=[{key:"update",value:function(t){this.data=t instanceof Function?t(this.data):t}},{key:"unmount",value:function(){(0,s.xC)(this)}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}());function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return(e=function(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m.instance=null;const E=function(t){var e=t.children,r=t.store,a=(0,n.useMemo)((function(){return"is_mock"in r&&r.is_mock?r:w(w({},r),{},{feature_flags:new m})}),[r]);return(0,n.useEffect)((function(){return function(){Object.values(a).forEach((function(t){"object"===b(t)&&"unmount"in t&&t.unmount()}))}}),[a]),o().createElement(i.A.Provider,{value:a},e)}},"../stores/src/useStore.ts":(t,e,r)=>{r.d(e,{A:()=>i});var n=r("react"),o=r("../stores/src/storeContext.ts");const i=function(){var t=(0,n.useContext)(o.A);if(!t)throw new Error("useStore must be used within StoreProvider");return t}},"./src/Analytics/index.ts":(t,e,r)=>{r.d(e,{Dr:()=>c,YL:()=>a,_S:()=>o,bC:()=>i,fV:()=>u,iN:()=>s});var n=r("@deriv/shared"),o=function(){n.cacheTrackEvents.loadEvent([{event:{name:"ce_dtrader_trade_form",properties:{action:"open"}}}])},i=function(t,e,r,o){n.cacheTrackEvents.loadEvent([{event:{name:"ce_dtrader_trade_form",properties:{action:"select_trade_type",trade_name:t,subform_name:e,market_name:r,trade_type_count:o}}}])},a=function(t,e){n.cacheTrackEvents.loadEvent([{event:{name:"ce_dtrader_trade_form",properties:{action:"open_guide",trade_name:t,subform_name:e}}}])},s=function(t,e){n.cacheTrackEvents.loadEvent([{event:{name:"ce_dtrader_trade_form",properties:{action:"select_market_type",market_name:t,trade_name:e}}}])},c=function(t,e,r){n.cacheTrackEvents.loadEvent([{event:{name:"ce_dtrader_trade_form",properties:{action:"run_contract",trade_name:t,market_name:e,contract_id:r.toString()}}}])},u=function(t,e,r){n.cacheTrackEvents.loadEvent([{event:{name:"ce_contracts_set_up_form",properties:{action:"run_contract",trade_name:t,market_name:e,contract_id:r.toString()}}}])}},"./src/App/Components/Animations/index.ts":(t,e,r)=>{r.d(e,{b:()=>s,F:()=>l});var n=r("react"),o=r.n(n),i=r("../../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),a={animate:{y:0,opacity:1},initial:{y:35,opacity:0},transition:{type:"spring",stiffness:500,damping:15,duration:.3}},s=function(t){var e=t.children,r=t.className,n=t.is_visible,s=t.keyname;return n?o().createElement(i.P.div,{initial:a.initial,animate:a.animate,transition:a.transition,className:r,key:s},e):null},c={initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},u={initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},l=function(t){var e=t.children,r=t.className,n=t.keyname,a=t.is_visible;return"bottom"===t.type?o().createElement(o().Fragment,null,a&&o().createElement(i.P.div,{initial:u.initial,animate:u.animate,transition:u.transition,className:r,key:n},e)):o().createElement(o().Fragment,null,a&&o().createElement(i.P.div,{initial:c.initial,animate:c.animate,transition:c.transition,className:r,key:n},e))}},"./src/App/Components/Elements/PositionsDrawer/helpers/index.ts":(t,e,r)=>{r.d(e,{Vb:()=>n.Vb,i4:()=>n.i4,iQ:()=>n.iQ,km:()=>n.km});var n=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.ts")},"./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.ts":(t,e,r)=>{r.d(e,{Vb:()=>c,i4:()=>f,iQ:()=>s,km:()=>u});var n=r("@deriv/translations"),o=r("@deriv/shared");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e,r){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function(t){return u(t.contract_type)?(0,n.localize)("Target"):(0,o.isVanillaContract)(t.contract_type)?(0,n.localize)("Strike"):(0,n.localize)("Barrier")},c=function(t){return u(t.contract_type)?l(t)[t.contract_type]:t.barrier?(0,o.addComma)(t.barrier):null},u=function(t){return t&&/digit/.test(t.toLowerCase())},l=function(t){return a(a(a(a(a(a({},o.CONTRACT_TYPES.MATCH_DIFF.DIFF,(0,n.localize)("Not {{barrier}}",{barrier:t.barrier})),o.CONTRACT_TYPES.EVEN_ODD.EVEN,(0,n.localize)("Even")),o.CONTRACT_TYPES.MATCH_DIFF.MATCH,(0,n.localize)("Equals {{barrier}}",{barrier:t.barrier})),o.CONTRACT_TYPES.EVEN_ODD.ODD,(0,n.localize)("Odd")),o.CONTRACT_TYPES.OVER_UNDER.OVER,(0,n.localize)("Over {{barrier}}",{barrier:t.barrier})),o.CONTRACT_TYPES.OVER_UNDER.UNDER,(0,n.localize)("Under {{barrier}}",{barrier:t.barrier}))},f=function(t,e){var r,n=t.contract_type,i=t.shortcode,a=(0,o.isCallPut)(e),s=(0,o.isHighLow)({shortcode:i}),c=(0,o.isVanillaContract)(n),u=o.CONTRACT_TYPES.CALL,l=o.CONTRACT_TYPES.CALLE,f=o.CONTRACT_TYPES.PUT,p=o.CONTRACT_TYPES.PUTE,h=a?[u,l,f,p]:null===(r=(0,o.getContractTypesConfig)()[e])||void 0===r?void 0:r.trade_types,d=null==h?void 0:h.includes(null!=n?n:"");return e===o.TRADE_TYPES.HIGH_LOW?s:d&&(c||!s)}},"./src/App/init-store.ts":(t,e,r)=>{r.d(e,{A:()=>Se});var n=r("mobx"),o=r("@deriv/shared"),i=r("./src/_common/base/server_time.ts"),a=r("./src/Stores/Modules/Trading/Helpers/contract-type.ts");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="suspendedYield",_="executing",v="completed",m={};function b(){}function g(){}function w(){}var S={};f(S,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(D([])));O&&O!==r&&n.call(O,a)&&(S=O);var T=w.prototype=b.prototype=Object.create(S);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=d;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=_;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return g.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},k(x.prototype),f(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),f(T,l,"Generator"),f(T,a,(function(){return this})),f(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var l=function(){var t,e=(t=c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.h.buildContractTypesConfig(e);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),f=r("@deriv/translations"),p=r("./src/Stores/Modules/Trading/Helpers/start-date.ts");function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t,e,r){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m=function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:{rules:[["req",{message:(0,f.localize)("Amount is a required field.")}],["number",{min:0,type:"float"}]]},barrier_1:{rules:[["req",{condition:function(t){return!!t.barrier_count&&t.form_components.indexOf("barrier")>-1},message:(0,f.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return!!t.barrier_count}}],["custom",{func:function(t,e,r,n){return!(Number(null==r?void 0:r.barrier_count)>1)||+t>Number(null==n?void 0:n.barrier_2)},message:(0,f.localize)("Higher barrier must be higher than lower barrier.")}],["custom",{func:function(t,e,r,n){var o,i,a;return!/^[+-]/.test(null!==(o=null==n?void 0:n.barrier_1)&&void 0!==o?o:"")||(i=!(null==r||!r.is_vanilla),a=Number(null==n?void 0:n.barrier_1),i||0!==a)},message:(0,f.localize)("Barrier cannot be zero.")}]],trigger:"barrier_2"},barrier_2:{rules:[["req",{condition:function(t){return t.barrier_count>1&&t.form_components.indexOf("barrier")>-1},message:(0,f.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return!!t.barrier_count}}],["custom",{func:function(t,e,r,n){var o,i;return/^[+-]/g.test(null!==(o=null==n?void 0:n.barrier_1)&&void 0!==o?o:"")&&/^[+-]/g.test(t)||/^(?![+-])/g.test(null!==(i=null==n?void 0:n.barrier_1)&&void 0!==i?i:"")&&/^(?![+-])/g.test(t)},message:(0,f.localize)("Both barriers should be relative or absolute")}],["custom",{func:function(t,e,r,n){return Number(null==n?void 0:n.barrier_1)>+t},message:(0,f.localize)("Lower barrier must be lower than higher barrier.")}]],trigger:"barrier_1"},duration:{rules:[["req",{message:(0,f.localize)("Duration is a required field.")}]]},start_date:{trigger:"start_time"},expiry_date:{trigger:"expiry_time"},start_time:{rules:[["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,o.isTimeValid)(null!=t?t:"")},message:(0,f.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,o.isHourValid)(null!=t?t:"")},message:(0,f.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,o.isMinuteValid)(null!=t?t:"")},message:(0,f.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){var n;if("spot"===(null==r?void 0:r.contract_start_type))return!0;if(!(0,o.isTimeValid)(null!=t?t:""))return!1;var i=(0,o.toMoment)(null==r?void 0:r.start_date),a=i.clone(),s=d(null!==(n=null==t?void 0:t.split(":"))&&void 0!==n?n:[],2),c=s[0],u=s[1];return(0,p.Y)(null==r?void 0:r.sessions,a.hour(+c).minute(+u),i)},message:(0,f.localize)("Start time cannot be in the past.")}]]},expiry_time:{rules:[["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,o.isTimeValid)(null!=t?t:"")},message:(0,f.localize)('Please enter the expiry time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,o.isHourValid)(null!=t?t:"")},message:(0,f.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===(null==r?void 0:r.contract_start_type)||(0,o.isMinuteValid)(null!=t?t:"")},message:(0,f.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){var n;if("spot"===(null==r?void 0:r.contract_start_type))return!0;if(!(0,o.isTimeValid)(null!=t?t:""))return!1;var i=(0,o.toMoment)(null==r?void 0:r.start_date),a=i.clone(),s=d(null!==(n=null==t?void 0:t.split(":"))&&void 0!==n?n:[],2),c=s[0],u=s[1];return(0,p.Y)(null==r?void 0:r.sessions,a.hour(+c).minute(+u),i)},message:(0,f.localize)("Expiry time cannot be in the past.")}]]}},b())},b=function(){return{stop_loss:{rules:[["req",{condition:function(t){return t.has_stop_loss&&!t.stop_loss},message:(0,f.localize)("Please enter a stop loss amount.")}]]},take_profit:{rules:[["req",{condition:function(t){return t.has_take_profit&&!t.take_profit},message:(0,f.localize)("Please enter a take profit amount.")}]]}}},g=r("./src/Modules/Trading/Helpers/digits.ts");function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function S(){S=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",_={};function v(){}function m(){}function b(){}var g={};u(g,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(D([])));O&&O!==r&&n.call(O,a)&&(g=O);var T=b.prototype=v.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==w(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(w(e)+" is not iterable")}return m.prototype=b,o(T,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),u(T,c,"Generator"),u(T,a,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return(e=function(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var x=function(){var t,e=(t=S().mark((function t(e,r,n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.WS.buy(O({proposal_id:e,price:r},n&&{passthrough:n})));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){k(i,n,o,a,s,"next",t)}function s(t){k(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}();function P(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var C=function(t){var e=t.root_store,r=t.contract_types_list,n=t.contract_types_list_v2,i=t.contract_type,s=(0,o.isDtraderV2MobileEnabled)(null==e?void 0:e.ui.is_mobile)||(0,o.isDtraderV2DesktopEnabled)(null==e?void 0:e.ui.is_desktop)?n:r;return a.h.getContractType(s,i)},L=function(t){return a.h.getContractValues(t)};function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return(e=function(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var M=function(t){var e=(0,o.getExpiryType)(t);return R({contract_expiry_type:e},t.contract_expiry_type!==e&&a.h.getBarriers(t.contract_type,e))},F=function(t){var e=(0,o.getExpiryType)(t),r=t.duration,n=t.duration_min_max,i=t.duration_unit;return R({},U({contract_expiry_type:e,duration:r,duration_min_max:n,duration_unit:i}))},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.contract_expiry_type,r=t.duration,n=t.duration_min_max,i=t.duration_unit,a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return D(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.getDurationMinMaxValues)(null!=n?n:{},null!=e?e:"",null!=i?i:""),2),s=a[0],c=a[1];return Number(r)<Number(s)?{duration:s}:Number(r)>Number(c)?{duration:c}:{}};function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function Y(){Y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new C(n||[]);return o(a,"_invoke",{value:k(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",_={};function v(){}function m(){}function b(){}var g={};u(g,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(L([])));S&&S!==r&&n.call(S,a)&&(g=S);var E=b.prototype=v.prototype=Object.create(g);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==V(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(V(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z(t,e,r){return(e=function(t){var e=function(t){if("object"!=V(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){B(i,n,o,a,s,"next",t)}function s(t){B(i,n,o,a,s,"throw",t)}a(void 0)}))}}var W=function(){var t=q(Y().mark((function t(e){var r,n,o,i,s,c,u,l,f,p,h,d,y,_,v,m,b,g;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.contract_type,o=e.duration_unit,i=e.start_date,s=null===(r=e.root_store)||void 0===r?void 0:r.common.server_time,c=e.start_time,u=e.expiry_type,c=c||(null==s?void 0:s.clone().add(6,"minute").format("HH:mm")),l=a.h.getStartType(i),f=l.contract_start_type,p=a.h.getSessions(n,i),h=p.sessions,d=a.h.getStartTime(h,i,c),y=a.h.getDurationUnitsList(n,f),_=y.duration_units_list,v=a.h.getDurationUnit(o,n,f),m=a.h.getExpiryType(_,u),u=m.expiry_type,b=a.h.getExpiryDate(_,e.expiry_date,u,i),g=a.h.getDurationMinMax(n,f),t.abrupt("return",H(H(H(H(H(H(H(H({},l),y),g),v),p),d),b),m));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=q(Y().mark((function t(e){var r,n,o,i,s,c,u,l,f,p,h,d;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.start_time,n=e.expiry_date,o=e.expiry_type,i=e.expiry_time,s=e.start_date,c=e.symbol,u=e.sessions,t.next=3,a.h.getTradingTimes(n,c);case 3:return l=t.sent,f={market_open_times:l.open},p={market_close_times:l.close},h=p.market_close_times,d=a.h.getExpiryTime(n,i,o,h,u,s,r),t.abrupt("return",H(H(H({},d),f),p));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function Q(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Z(){Z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new C(n||[]);return o(a,"_invoke",{value:k(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",_={};function v(){}function m(){}function b(){}var g={};u(g,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(L([])));S&&S!==r&&n.call(S,a)&&(g=S);var E=b.prototype=v.prototype=Object.create(g);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==$(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError($(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function et(t,e,r){return(e=function(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function nt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rt(i,n,o,a,s,"next",t)}function s(t){rt(i,n,o,a,s,"throw",t)}a(void 0)}))}}var ot=function(){var t=nt(Z().mark((function t(e,r){var n,o;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getSnapshot(),o=0;case 2:if(!(o<r.length)){t.next=12;break}return t.t0=Object,t.t1=n,t.next=7,r[o](n);case 7:t.t2=t.sent,t.t0.assign.call(t.t0,t.t1,t.t2);case 9:o++,t.next=2;break;case 12:e.updateStore(tt({},n));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),it=function(){var t=nt(Z().mark((function t(e,r){var n,o;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=at(e,r),t.next=3,ot(e,n);case 3:return o=st(),t.next=6,ot(e,o);case 6:e.updateStore({is_trade_enabled:!0,is_trade_enabled_v2:!0});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),at=function(t,e){var r=Object.keys(e).filter((function(t){return/\b(symbol|contract_type|is_equal)\b/.test(t)}));return[a.h.getContractCategories,C].concat(Q(r.length>0||!t.contract_type?[L]:[]),[W,M],Q(r.length||!t.contract_type?[F]:[]))},st=function(){return[J]},ct=r("./src/Stores/Modules/Trading/Helpers/proposal.ts");function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function lt(){lt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new C(n||[]);return o(a,"_invoke",{value:k(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",_={};function v(){}function m(){}function b(){}var g={};u(g,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(L([])));S&&S!==r&&n.call(S,a)&&(g=S);var E=b.prototype=v.prototype=Object.create(g);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ut(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ut(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function ft(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function pt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ft(i,n,o,a,s,"next",t)}function s(t){ft(i,n,o,a,s,"throw",t)}a(void 0)}))}}function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(r),!0).forEach((function(e){yt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yt(t,e,r){return(e=vt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vt(n.key),n)}}function vt(t){var e=function(t){if("object"!=ut(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ut(e)?e:e+""}var mt=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clientInitDisposer=null,this.client_init_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.local_storage_properties=void 0,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.partial_fetch_time=0,this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.root_store=void 0,this.session_storage_properties=void 0,this.store_name="",this.switchAccountDisposer=null,this.switch_account_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.validation_errors={},this.validation_rules={},(0,n.makeObservable)(this,{validation_errors:n.observable,validation_rules:n.observable,partial_fetch_time:n.observable,retrieveFromStorage:n.action,setValidationErrorMessages:n.action,setValidationRules:n.action,addRule:n.action,validateProperty:n.action,validateAllProperties:n.action,onSwitchAccount:n.action.bound,onPreSwitchAccount:n.action.bound,onLogout:n.action.bound,onClientInit:n.action.bound,onNetworkStatusChange:n.action.bound,onThemeChange:n.action.bound,onRealAccountSignupEnd:n.action.bound,disposePreSwitchAccount:n.action.bound,disposeSwitchAccount:n.action.bound,disposeLogout:n.action.bound,disposeClientInit:n.action.bound,disposeNetworkStatusChange:n.action.bound,disposeThemeChange:n.action.bound,disposeRealAccountSignupEnd:n.action.bound,onUnmount:n.action.bound,assertHasValidCache:n.action.bound});var o=r.root_store,i=r.local_storage_properties,a=r.session_storage_properties,s=r.validation_rules,c=r.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),(null==i?void 0:i.length)||(null==a?void 0:a.length)){if(!c)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:c,enumerable:!1,writable:!1})}this.root_store=o,this.local_storage_properties=i||[],this.session_storage_properties=a||[],setTimeout((function(){e.setValidationRules(s),e.setupReactionForLocalStorage(),e.setupReactionForSessionStorage(),e.retrieveFromStorage()}),0)}return e=t,r=[{key:"getSnapshot",value:function(t){var e=(0,n.toJS)(this);return(0,o.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),null!=t&&t.length&&(e=t.reduce((function(t,r){return Object.assign(t,yt({},r,e[r]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,n.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,n.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol(""),n=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));r===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(String(localStorage.getItem(this.store_name))),r=JSON.parse(String(sessionStorage.getItem(this.store_name))),n=dt(dt({},e),r);Object.keys(n).forEach((function(e){return t[e]=n[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var r=this;this.validation_errors[t]&&!r.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!r.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(r){t.addRule(r,e[r])}))}},{key:"addRule",value:function(t,e){var r=this;this.validation_rules[t]=e,(0,n.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var r,n=this,i=null!==(r=this.validation_rules[t])&&void 0!==r?r:{},a="trigger"in i?i.trigger:void 0,s=yt({},t,null!=e?e:this[t]),c=yt({},t,"rules"in i?i.rules:[]);if(a&&Object.hasOwnProperty.call(this,a)){var u=this.validation_rules[a];s[a]=this[a],c[a]="rules"in u?u.rules:[]}var l=new o.Validator(s,c,this);l.isPassed(),Object.keys(s).forEach((function(t){n.setValidationErrorMessages(t,l.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),r.forEach((function(r){e.includes(r)||delete t.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,n.when)((function(){return!!e.root_store.client.switch_broadcast}),(function(){try{var t,r=null===(t=e.switch_account_listener)||void 0===t?void 0:t.call(e);if(null==r||!r.then||"function"!=typeof r.then)throw new Error("Switching account listeners are required to return a promise.");r.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)}))}catch(t){(0,o.isProduction)()||console.error(t)}})))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,n.when)((function(){return!!e.root_store.client.pre_switch_broadcast}),(function(){try{var t,r=null===(t=e.pre_switch_account_listener)||void 0===t?void 0:t.call(e);if(null==r||!r.then||"function"!=typeof r.then)throw new Error("Pre-switch account listeners are required to return a promise.");r.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)}))}catch(t){(0,o.isProduction)()||console.error(t)}})))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,n.when)((function(){return!!e.root_store.client.has_logged_out}),pt(lt().mark((function t(){var r,n;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(n=null===(r=e.logout_listener)||void 0===r?void 0:r.call(e))||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,o.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,n.when)((function(){return!!e.root_store.client.initialized_broadcast}),pt(lt().mark((function t(){var r,n;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(n=null===(r=e.client_init_listener)||void 0===r?void 0:r.call(e))||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,o.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,n.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{var r;null===(r=e.network_status_change_listener)||void 0===r||r.call(e,t)}catch(t){(0,o.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,n.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{var r;null===(r=e.theme_change_listener)||void 0===r||r.call(e,t)}catch(t){(0,o.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,n.when)((function(){return!!e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t,r=null===(t=e.real_account_signup_ended_listener)||void 0===t?void 0:t.call(e);if(null==r||!r.then||"function"!=typeof r.then)throw new Error("Real account signup listeners are required to return a promise.");r.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,o.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(t){return t()})),this.partial_fetch_time=0}}}],r&&_t(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();mt.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var bt=r("../../node_modules/lodash.debounce/index.js"),gt=r.n(bt),wt="search",St="CHART_INTERVAL_CHANGE",Et="CHART_TYPE_CHANGE",Ot="FAVORITE_MARKETS_TOGGLE",Tt="INDICATOR_ADDED",kt="INDICATOR_DELETED",xt="INDICATOR_INFO_TOGGLE",Pt="INDICATOR_SEARCH",At="INDICATOR_SETTINGS_OPEN",Ct="INDICATORS_CLEAR_ALL",Lt="INDICATORS_MODAL_TOGGLE",jt="MARKET_SEARCH",Dt="SYMBOL_CHANGE",Nt=r("../utils/src/index.ts"),Rt=r("./src/Analytics/index.ts");function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Mt(){Mt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new C(n||[]);return o(a,"_invoke",{value:k(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",_={};function v(){}function m(){}function b(){}var g={};u(g,a,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(L([])));S&&S!==r&&n.call(S,a)&&(g=S);var E=b.prototype=v.prototype=Object.create(g);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==It(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function k(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(It(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new T(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),u(E,c,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function Ft(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ft(i,n,o,a,s,"next",t)}function s(t){Ft(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(r),!0).forEach((function(e){Gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gt(t,e,r){return(e=zt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zt(n.key),n)}}function zt(t){var e=function(t){if("object"!=It(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}function Bt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bt=function(){return!!t})()}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}function Wt(t,e){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wt(t,e)}var Jt={},$t=function(t){function e(t){var r,a=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=qt(e),function(t,e){if(e&&("object"==It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bt()?Reflect.construct(e,r||[],qt(t).constructor):e.apply(t,r))}(this,e,[{root_store:a,local_storage_properties:["amount","currency","barrier_1","barrier_2","basis","contract_start_type","duration","duration_unit","expiry_date","expiry_type","growth_rate","has_take_profit","has_stop_loss","has_cancellation","short_barriers","long_barriers","strike_price_choices","is_equal","last_digit","multiplier","start_date","start_time","stop_loss","take_profit","is_trade_params_expanded","v2_params_initial_values"],session_storage_properties:["contract_type","symbol"],store_name:"trade_store",validation_rules:m()}])).is_trade_component_mounted=!1,r.is_purchase_enabled=!1,r.is_trade_enabled=!1,r.is_trade_enabled_v2=!1,r.is_equal=0,r.has_equals_only=!1,r.symbol="",r.is_market_closed=!1,r.previous_symbol="",r.active_symbols=[],r.has_symbols_for_v2=!1,r.form_components=[],r.contract_expiry_type="",r.contract_start_type="",r.contract_type="",r.prev_contract_type="",r.contract_types_list={},r.non_available_contract_types_list={},r.trade_type_tab="",r.trade_types={},r.contract_types_list_v2={},r.amount=10,r.basis="",r.basis_list=[],r.currency="",r.default_stake=void 0,r.stake_boundary={},r.duration=5,r.duration_min_max={},r.duration_unit="",r.duration_units_list=[],r.expiry_date="",r.expiry_epoch="",r.expiry_time="",r.expiry_type="duration",r.saved_expiry_date_v2="",r.unsaved_expiry_date_v2="",r.barrier="",r.barrier_1="",r.barrier_2="",r.barrier_count=0,r.main_barrier=null,r.barriers=[],r.barrier_choices=[],r.payout_choices=[],r.start_date=0,r.start_dates_list=[],r.start_time=null,r.sessions=[],r.market_open_times=[],r.market_close_times=[],r.validation_params={},r.digit_stats=[],r.last_digit=5,r.is_mobile_digit_view_selected=!1,r.tick_data=null,r.proposal_info={},r.purchase_info={},r.is_chart_loading=void 0,r.should_show_active_symbols_loading=!1,r.accumulator_range_list=[],r.growth_rate=.03,r.maximum_payout=0,r.maximum_ticks=0,r.ticks_history_stats={},r.tick_size_barrier_percentage="",r.multiplier=0,r.multiplier_range_list=[],r.stop_loss=void 0,r.take_profit=void 0,r.has_stop_loss=!1,r.has_take_profit=!1,r.has_cancellation=!1,r.open_payout_wheelpicker=!1,r.commission=void 0,r.cancellation_price=void 0,r.stop_out=void 0,r.expiration=void 0,r.hovered_contract_type=void 0,r.cancellation_duration="60m",r.cancellation_range_list=[],r.cached_multiplier_cancellation_list=[],r.ref=null,r.long_barriers={},r.short_barriers={},r.payout_per_point="",r.strike_price_choices={},r.is_trade_params_expanded=!0,r.v2_params_initial_values={},r.debouncedSetChartStatus=gt()((function(t){(0,n.runInAction)((function(){r.is_chart_loading=t}))})),r.debouncedProposal=gt()(r.requestProposal,500),r.proposal_requests={},r.is_purchasing_contract=!1,r.initial_barriers=void 0,r.is_initial_barrier_applied=!1,r.is_digits_widget_active=!1,r.should_skip_prepost_lifecycle=!1,r.clearContracts=function(){r.root_store.contract_trade.contracts=[]},r.setMainBarrier=function(t){if(t){var e=t.contract_type,n=t.barrier,i=t.barrier2;(0,o.isBarrierSupported)(e)?r.main_barrier=new o.ChartBarrierStore(n,i,r.onChartBarrierChange,{color:o.BARRIER_COLORS.BLUE,not_draggable:r.is_turbos||r.is_vanilla}):r.main_barrier=null}},r.onPurchase=gt()(r.processPurchase,300),r.disablePurchaseButtons=function(){var t=document.getElementsByClassName("trade-container__price-info"),e=document.getElementsByClassName("btn-purchase");[].forEach.bind(e,(function(t){t.classList.add("btn-purchase--disabled")}))(),[].forEach.bind(t,(function(t){t.classList.add("trade-container__price-info--fade")}))()},r.prev_chart_layout=null,r.wsSubscribe=function(t,e){var n=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(e.apply(void 0,n),"ohlc"in n[0]&&0!==r.root_store.contract_trade.granularity){var i=n[0].ohlc,a=i.close,s=i.pip_size;a&&s&&r.setTickData({pip_size:s,quote:Number(a)})}if(r.is_accumulator){var c={};if("tick"in n[0]){var u=n[0].tick,l=u.epoch,f=u.quote,p=u.symbol;if(r.symbol!==p)return;c={current_spot:f,current_spot_time:l}}else{if(!("history"in n[0]))return;var h=n[0].history,d=h.prices,y=h.times,_=n[0].echo_req.ticks_history;if(r.symbol!==_)return;c={current_spot:null==d?void 0:d[(null==d?void 0:d.length)-1],current_spot_time:null==y?void 0:y[(null==y?void 0:y.length)-1],prev_spot_time:null==y?void 0:y[(null==y?void 0:y.length)-2]}}r.root_store.contract_trade.updateAccumulatorBarriersData(c)}};if((0,o.isMarketClosed)(r.active_symbols,t.ticks_history))delete t.subscribe,o.WS.getTicksHistory(t).then(n,n);else if(1===t.subscribe){var i=JSON.stringify(t),a=o.WS.subscribeTicksHistory(t,n);Jt[i]=a}},r.wsForget=function(t){var e,r=JSON.stringify(t);Jt[r]&&(null===(e=Jt[r])||void 0===e||e.unsubscribe(),delete Jt[r])},r.wsForgetStream=function(t){o.WS.forgetStream(t)},r.wsSendRequest=function(t){return"time"in t?i.A.timePromise().then((function(t){return t?{msg_type:"time",time:t.unix()}:o.WS.time()})):"active_symbols"in t?r.root_store.client.is_logged_in?o.WS.authorized.activeSymbols("brief"):o.WS.activeSymbols("brief"):"trading_times"in t?o.WS.tradingTimes(t.trading_times):o.WS.storage.send(t)},(0,n.makeObservable)(r,{accumulator_range_list:n.observable,active_symbols:n.observable,amount:n.observable,barrier_1:n.observable,barrier_2:n.observable,barrier_count:n.observable,barrier_choices:n.observable,payout_choices:n.observable,barriers:n.observable,basis_list:n.observable,basis:n.observable,payout_per_point:n.observable,cancellation_duration:n.observable,cancellation_price:n.observable,cancellation_range_list:n.observable,cached_multiplier_cancellation_list:n.observable,commission:n.observable,contract_expiry_type:n.observable,contract_start_type:n.observable,contract_type:n.observable,contract_types_list:n.observable,contract_types_list_v2:n.observable,currency:n.observable,default_stake:n.observable,digit_stats:n.observable,duration_min_max:n.observable,duration_unit:n.observable,duration_units_list:n.observable,duration:n.observable,expiration:n.observable,expiry_date:n.observable,saved_expiry_date_v2:n.observable,unsaved_expiry_date_v2:n.observable,setSavedExpiryDateV2:n.action.bound,setUnsavedExpiryDateV2:n.action.bound,expiry_epoch:n.observable,expiry_time:n.observable,expiry_type:n.observable,form_components:n.observable,growth_rate:n.observable,has_cancellation:n.observable,has_equals_only:n.observable,has_open_accu_contract:n.computed,has_stop_loss:n.observable,has_symbols_for_v2:n.observable,has_take_profit:n.observable,hovered_contract_type:n.observable,is_accumulator:n.computed,is_chart_loading:n.observable,is_digits_widget_active:n.observable,is_dtrader_v2:n.computed,is_dtrader_v2_mobile:n.computed,is_dtrader_v2_desktop:n.computed,is_equal:n.observable,is_market_closed:n.observable,is_mobile_digit_view_selected:n.observable,is_purchase_enabled:n.observable,is_synthetics_trading_market_available:n.computed,is_trade_component_mounted:n.observable,is_trade_enabled:n.observable,is_trade_enabled_v2:n.observable,is_trade_params_expanded:n.observable,is_turbos:n.computed,last_digit:n.observable,long_barriers:n.observable,main_barrier:n.observable,market_close_times:n.observable,market_open_times:n.observable,maximum_payout:n.observable,maximum_ticks:n.observable,validation_params:n.observable,multiplier_range_list:n.observable,multiplier:n.observable,non_available_contract_types_list:n.observable,previous_symbol:n.observable,ref:n.observable,proposal_info:n.observable.ref,purchase_info:n.observable.ref,setDefaultStake:n.action.bound,sessions:n.observable,setDefaultGrowthRate:n.action.bound,setDigitStats:n.action.bound,setTickData:n.action.bound,short_barriers:n.observable,should_show_active_symbols_loading:n.observable,should_skip_prepost_lifecycle:n.observable,stake_boundary:n.observable,start_date:n.observable,start_dates_list:n.observable,start_time:n.observable,strike_price_choices:n.observable,stop_loss:n.observable,stop_out:n.observable,symbol:n.observable,take_profit:n.observable,tick_data:n.observable,tick_size_barrier_percentage:n.observable,ticks_history_stats:n.observable,trade_type_tab:n.observable,trade_types:n.observable,open_payout_wheelpicker:n.observable,togglePayoutWheelPicker:n.action.bound,v2_params_initial_values:n.observable,accountSwitcherListener:n.action.bound,barrier_pipsize:n.computed,barriers_flattened:n.computed,changeDurationValidationRules:n.action.bound,chartStateChange:n.action.bound,clearContracts:n.action.bound,clearLimitOrderBarriers:n.action.bound,clearPurchaseInfo:n.action.bound,clientInitListener:n.action.bound,clearV2ParamsInitialValues:n.action.bound,processContractsForV2:n.action.bound,enablePurchase:n.action.bound,exportLayout:n.action.bound,forgetAllProposal:n.action.bound,getFirstOpenMarket:n.action.bound,has_alternative_source:n.computed,initAccountCurrency:n.action.bound,is_multiplier:n.computed,is_symbol_in_active_symbols:n.computed,is_synthetics_available:n.computed,is_vanilla:n.computed,is_vanilla_fx:n.computed,loadActiveSymbols:n.action.bound,logoutListener:n.action.bound,main_barrier_flattened:n.computed,networkStatusChangeListener:n.action.bound,onAllowEqualsChange:n.action.bound,onChange:n.action.bound,onChangeMultiple:n.action.bound,onChartBarrierChange:n.action.bound,onHoverPurchase:n.action.bound,onMount:n.action.bound,onProposalResponse:n.action.bound,onPurchase:n.action.bound,onPurchaseV2:n.action.bound,onUnmount:n.override,prepareTradeStore:n.action.bound,preSwitchAccountListener:n.action.bound,processPurchase:n.action.bound,pushPurchaseDataToGtm:n.action.bound,refresh:n.action.bound,requestProposal:n.action.bound,resetAccumulatorData:n.action.bound,resetErrorServices:n.action.bound,resetPreviousSymbol:n.action.bound,setActiveSymbols:n.action.bound,setActiveSymbolsV2:n.action.bound,setBarrierChoices:n.action.bound,setPayoutChoices:n.action.bound,setChartModeFromURL:n.action.bound,setChartStatus:n.action.bound,setContractTypes:n.action.bound,setContractTypesListV2:n.action.bound,setDefaultSymbol:n.action.bound,setIsTradeParamsExpanded:n.action.bound,setIsDigitsWidgetActive:n.action.bound,setMarketStatus:n.action.bound,getTurbosChartBarrier:n.action.bound,setMobileDigitView:n.action.bound,setPreviousSymbol:n.action.bound,setSkipPrePostLifecycle:n.action.bound,setStakeBoundary:n.action.bound,setTradeTypeTab:n.action.bound,setTradeStatus:n.action.bound,setV2ParamsInitialValues:n.action.bound,show_digits_stats:n.computed,updateStore:n.action.bound,updateSymbol:n.action.bound,setPayoutPerPoint:n.action.bound}),(0,n.when)((function(){return!(0,o.isEmptyObject)(r.contract_types_list_v2)}),(function(){var t;if(r.contract_types_list_v2&&r.is_dtrader_v2){var e=new URLSearchParams(window.location.search).get("trade_type"),n=sessionStorage.getItem("trade_store"),o=null!==(t=(0,Nt.xL)(null!=n?n:"{}"))&&void 0!==t?t:{},i=Object.values(r.contract_types_list_v2).map((function(t){return t.categories})).flatMap((function(t){return t})).some((function(t){return t.value===e}));e&&(i?(o.contract_type=e,sessionStorage.setItem("trade_store",JSON.stringify(o)),r.contract_type=e):r.root_store.ui.toggleUrlUnavailableModal(!0))}})),(0,n.when)((function(){return r.has_symbols_for_v2}),(function(){var t;if(r.contract_types_list_v2&&r.is_dtrader_v2){var e=new URLSearchParams(window.location.search).get("symbol"),n=sessionStorage.getItem("trade_store"),o=null!==(t=(0,Nt.xL)(null!=n?n:"{}"))&&void 0!==t?t:{},i=r.active_symbols.some((function(t){return t.symbol===e}));e&&(i?(o.symbol=e,sessionStorage.setItem("trade_store",JSON.stringify(o)),r.symbol=e):r.root_store.ui.toggleUrlUnavailableModal(!0))}})),(0,n.reaction)((function(){return[r.contract_expiry_type,r.duration_min_max,r.duration_unit,r.expiry_type]}),(function(){r.changeDurationValidationRules()})),(0,n.reaction)((function(){return r.is_equal}),(function(){var t;(null===(t=r.contract_type)||void 0===t?void 0:t.includes(o.TRADE_TYPES.RISE_FALL))&&r.onAllowEqualsChange()})),(0,n.reaction)((function(){return r.symbol}),(function(){var t=(0,o.resetEndTimeOnVolatilityIndices)(r.symbol,r.expiry_type);t&&(r.expiry_date=t),r.setDefaultGrowthRate(),r.resetAccumulatorData(),r.active_symbols.length&&(0,o.setTradeURLParams)({symbol:r.symbol}),r.root_store.notifications.removeTradeNotifications()})),(0,n.reaction)((function(){return r.duration_unit}),(function(){r.contract_expiry_type="t"===r.duration_unit?"tick":"intraday"})),(0,n.reaction)((function(){return[r.has_stop_loss,r.has_take_profit]}),(function(){r.has_stop_loss||(r.validation_errors.stop_loss=[]),r.has_take_profit||(r.validation_errors.take_profit=[])})),(0,n.reaction)((function(){return[r.contract_type]}),(function(){r.root_store.portfolio.setContractType(r.contract_type),r.is_accumulator||r.is_multiplier||r.is_turbos?Object.assign(r.validation_rules,b()):(delete r.validation_rules.stop_loss,delete r.validation_rules.take_profit),r.resetAccumulatorData(),(0,o.isEmptyObject)(r.contract_types_list)&&(0,o.isEmptyObject)(r.contract_types_list_v2)||(0,o.setTradeURLParams)({contractType:r.contract_type}),r.root_store.notifications.removeTradeNotifications()})),(0,n.reaction)((function(){return r.root_store.common.current_language}),(function(){r.setValidationRules(m()),r.changeDurationValidationRules(),r.amount||r.validateAllProperties()})),(0,n.reaction)((function(){return r.accumulator_range_list.length}),(function(){r.accumulator_range_list.length&&r.setDefaultGrowthRate()})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wt(t,e)}(e,t),r=e,s=[{key:"is_symbol_in_active_symbols",get:function(){var t=this;return this.active_symbols.some((function(e){return e.symbol===t.symbol&&1===e.exchange_is_open}))}},{key:"has_open_accu_contract",get:function(){var t=this;return this.is_accumulator&&!!this.root_store.portfolio.open_accu_contract&&!!this.root_store.portfolio.active_positions.find((function(e){var r=e.contract_info,n=e.type;return(0,o.isAccumulatorContract)(n)&&r.underlying===t.symbol}))}},{key:"resetAccumulatorData",value:function(){(0,o.isEmptyObject)(this.root_store.contract_trade.accumulator_barriers_data)||this.root_store.contract_trade.clearAccumulatorBarriersData()}},{key:"setV2ParamsInitialValues",value:function(t){var e=t.value,r=t.name;this.v2_params_initial_values=Yt(Yt({},this.v2_params_initial_values),Gt({},r,e))}},{key:"setSavedExpiryDateV2",value:function(t){this.saved_expiry_date_v2=t||""}},{key:"setUnsavedExpiryDateV2",value:function(t){this.unsaved_expiry_date_v2=t||""}},{key:"clearV2ParamsInitialValues",value:function(){this.v2_params_initial_values={}}},{key:"setDefaultGrowthRate",value:function(){this.is_accumulator&&!this.accumulator_range_list.includes(this.growth_rate)&&this.accumulator_range_list.length&&(this.growth_rate=this.accumulator_range_list[0])}},{key:"setSkipPrePostLifecycle",value:function(t){!!t!=!!this.should_skip_prepost_lifecycle&&(this.should_skip_prepost_lifecycle=t)}},{key:"setTradeStatus",value:function(t){this.is_trade_enabled=t}},{key:"refresh",value:function(){this.forgetAllProposal(),this.proposal_info={},this.purchase_info={},this.proposal_requests={}}},{key:"loadActiveSymbols",value:(A=Ut(Mt().mark((function t(){var e,r,i,a,s,c,u,l,f=this,p=arguments;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(p.length>0&&void 0!==p[0])||p[0],i=!(p.length>1&&void 0!==p[1])||p[1],!this.is_dtrader_v2){t.next=6;break}return t.next=5,(0,n.when)((function(){return f.has_symbols_for_v2}));case 5:return t.abrupt("return");case 6:return this.should_show_active_symbols_loading=i,t.next=9,this.setActiveSymbols();case 9:return t.next=11,this.root_store.active_symbols.setActiveSymbols();case 11:if(a=(0,o.getTradeURLParams)({active_symbols:this.active_symbols}),s=a.symbol,a.showModal&&i&&!this.root_store.client.is_logging_in&&this.root_store.ui.toggleUrlUnavailableModal(!0),(c=s&&s!==this.symbol)&&(this.symbol=s),!r||s){t.next=18;break}return t.next=18,this.setDefaultSymbol();case 18:return(0,o.setTradeURLParams)({symbol:c?s:this.symbol}),t.next=21,o.WS.storage.contractsFor(this.symbol);case 21:if(u=t.sent,!["InvalidSymbol","InputValidationFailed"].includes(null===(e=u.error)||void 0===e?void 0:e.code)){t.next=28;break}return t.next=25,(0,o.pickDefaultSymbol)(this.active_symbols);case 25:return l=t.sent,t.next=28,this.processNewValuesAsync({symbol:l});case 28:(0,n.runInAction)((function(){f.should_show_active_symbols_loading=!1}));case 29:case"end":return t.stop()}}),t,this)}))),function(){return A.apply(this,arguments)})},{key:"setDefaultSymbol",value:(k=Ut(Mt().mark((function t(){var e;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.is_symbol_in_active_symbols){t.next=7;break}return this.is_trade_enabled=!1,t.next=4,(0,o.pickDefaultSymbol)(this.active_symbols);case 4:return e=t.sent,t.next=7,this.processNewValuesAsync({symbol:e});case 7:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"setActiveSymbols",value:(T=Ut(Mt().mark((function t(){var e,r,n,i,a;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="maltainvest"===this.root_store.client.landing_company_shortcode,r=this.root_store.client.is_logged_in,n=this.root_store.common.showError,t.next=5,o.WS.authorized.activeSymbols();case 5:if(i=t.sent,a=i.active_symbols,!i.error){t.next=11;break}return n({message:(0,f.localize)("Trading is unavailable at this time.")}),t.abrupt("return");case 11:if(null!=a&&a.length){t.next=21;break}return t.next=14,o.WS.wait("get_settings");case 14:if(!e){t.next=19;break}return(0,o.showDigitalOptionsUnavailableError)(n,{text:(0,f.localize)("Were working to have this available for you soon. If you have another account, switch to that account to continue trading. You may add a Deriv MT5 Financial."),title:(0,f.localize)("{{platform_name_trader}} is not available for this account",{platform_name_trader:(0,o.getPlatformSettings)("trader").name}),link:(0,f.localize)("Go to {{platform_name_mt5}} dashboard",{platform_name_mt5:(0,o.getPlatformSettings)("mt5").name})}),t.abrupt("return");case 19:e||(0,o.showUnavailableLocationError)(n,r);case 20:(0,o.showUnavailableLocationError)(n,r);case 21:return t.next=23,this.processNewValuesAsync({active_symbols:a});case 23:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"processContractsForV2",value:(O=Ut(Mt().mark((function t(){var e;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.h.getContractCategories(),this.processNewValuesAsync(Yt({},e)),this.processNewValuesAsync(a.h.getContractValues(this));case 3:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)})},{key:"setContractTypes",value:(E=Ut(Mt().mark((function t(){var e,r,i,s,c=this;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.is_dtrader_v2){t.next=2;break}return t.abrupt("return");case 2:if(s="",!this.symbol||!this.is_symbol_in_active_symbols){t.next=7;break}return t.next=6,l(this.symbol);case 6:(0,n.runInAction)((function(){var t,e=a.h.getContractCategories(),r=(0,o.getTradeURLParams)({contract_types_list:e.contract_types_list}),n=r.contractType,i=r.showModal;s=n;var u=c.root_store.client,l=u.is_logging_in,f=u.is_switching;!i||l||f||c.root_store.ui.toggleUrlUnavailableModal(!0),c.processNewValuesAsync(Yt(Yt({},e),a.h.getContractType(e.contract_types_list,null!==(t=s)&&void 0!==t?t:c.contract_type))),c.processNewValuesAsync(a.h.getContractValues(c))}));case 7:this.root_store.common.setSelectedContractType(null!==(e=s)&&void 0!==e?e:this.contract_type),this.root_store.portfolio.setContractType(null!==(r=s)&&void 0!==r?r:this.contract_type),(0,o.setTradeURLParams)({contractType:null!==(i=s)&&void 0!==i?i:this.contract_type});case 10:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"prepareTradeStore",value:(S=Ut(Mt().mark((function t(){var e,r=this,i=arguments;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(i.length>0&&void 0!==i[0])||i[0],this.initial_barriers={barrier_1:this.barrier_1,barrier_2:this.barrier_2},t.next=4,(0,n.when)((function(){return!r.root_store.client.is_populating_account_list}));case 4:return t.next=6,o.WS.wait("website_status");case 6:return t.next=8,(0,n.runInAction)(Ut(Mt().mark((function t(){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.processNewValuesAsync({currency:r.root_store.client.currency||r.root_store.client.default_currency},!0,null,!1);case 2:case"end":return t.stop()}}),t)}))));case 8:return t.next=10,this.loadActiveSymbols(e);case 10:return t.next=12,this.setContractTypes();case 12:return t.next=14,this.processNewValuesAsync({is_market_closed:(0,o.isMarketClosed)(this.active_symbols,this.symbol)},!0,null,!1);case 14:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)})},{key:"onChangeMultiple",value:(w=Ut(Mt().mark((function t(e){var r=this;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.keys(e).forEach((function(t){if(!(t in r))throw new Error("Invalid Argument: ".concat(t))})),t.next=3,this.processNewValuesAsync(Yt({},e),!0);case 3:this.validateAllProperties();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)})},{key:"onChange",value:(v=Ut(Mt().mark((function t(e){var r,n,o;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.target,n=r.name,o=r.value,"contract_type"===n&&["accumulator","match_diff","even_odd","over_under"].includes(o)&&(this.prev_contract_type=this.contract_type),"contract_type"===n&&this.has_stop_loss&&(this.has_stop_loss=!1,this.stop_loss=""),"symbol"!==n||!o){t.next=9;break}this.setChartStatus(!0),this.setMarketStatus(!1),this.is_trade_enabled=!1,t.next=19;break;case 9:if("currency"!==n){t.next=13;break}this.root_store.client.is_logged_in||this.root_store.client.selectCurrency(o),t.next=19;break;case 13:if("expiry_date"!==n){t.next=17;break}this.expiry_time=null,t.next=19;break;case 17:if(n in this){t.next=19;break}throw new Error("Invalid Argument: ".concat(n));case 19:return t.next=21,this.processNewValuesAsync(Gt({},n,o),!0,"contract_type"===n?{contract_type:this.contract_type}:{},!0);case 21:this.validateAllProperties(),this.root_store.common.setSelectedContractType(this.contract_type);case 23:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"setDefaultStake",value:function(t){this.default_stake=t}},{key:"setPreviousSymbol",value:function(t){this.previous_symbol!==t&&(this.previous_symbol=t)}},{key:"setIsTradeParamsExpanded",value:function(t){this.is_trade_params_expanded=t}},{key:"resetPreviousSymbol",value:(_=Ut(Mt().mark((function t(){var e=this;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setMarketStatus((0,o.isMarketClosed)(this.active_symbols,this.previous_symbol)),t.next=3,l(this.previous_symbol);case 3:this.updateSymbol(this.symbol),this.setChartStatus(!1),(0,n.runInAction)((function(){e.previous_symbol=""}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"onHoverPurchase",value:function(t,e){this.is_accumulator||(this.is_purchase_enabled&&this.main_barrier&&!this.is_multiplier?this.main_barrier.updateBarrierShade(t,null!=e?e:""):t||!this.main_barrier||this.is_multiplier||this.main_barrier.updateBarrierShade(!1,null!=e?e:""),this.hovered_contract_type=t?e:null,(0,o.setLimitOrderBarriers)({barriers:this.root_store.portfolio.barriers,is_over:t,contract_type:e,contract_info:this.proposal_info[null!=e?e:""]}))}},{key:"clearLimitOrderBarriers",value:function(){this.hovered_contract_type=null;var t=this.barriers;(0,o.setLimitOrderBarriers)({barriers:t,is_over:!1})}},{key:"barrier_pipsize",get:function(){return(0,o.getBarrierPipSize)(this.barrier_1)}},{key:"main_barrier_flattened",get:function(){return(0,g.E)(this.contract_type)?null:(0,n.toJS)(this.main_barrier)}},{key:"barriers_flattened",get:function(){return this.root_store.portfolio.barriers&&(0,n.toJS)(this.root_store.portfolio.barriers)}},{key:"onPurchaseV2",value:(y=Ut(Mt().mark((function t(e,r,o){var i,a,s=this;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,n.when)((function(){var t=Object.keys(s.proposal_info),e=Object.keys(s.proposal_requests);return t.length>0&&t.length===e.length}));case 2:(a=null===(i=this.proposal_info)||void 0===i?void 0:i[e])&&this.onPurchase(a.id,a.stake,e,r,o,!0);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return y.apply(this,arguments)})},{key:"processPurchase",value:function(t,e,r,i,a,s){var c=this;if(this.is_purchase_enabled&&t){(0,n.runInAction)((function(){c.is_purchase_enabled=!1,c.is_purchasing_contract=!0}));var u="t"===this.duration_unit;x(t,e).then((0,n.action)((function(e){if(!c.is_trade_component_mounted)return c.enablePurchase(),void(c.is_purchasing_contract=!1);var n,l,f=+c.last_digit;if(e.error)c.disablePurchaseButtons(),"InvalidToken"!==e.error.code&&(c.root_store.common.setServicesError(Yt({type:e.msg_type},e.error),c.is_dtrader_v2),i&&"buy"===(null===(n=c.root_store.common)||void 0===n||null===(l=n.services_error)||void 0===l?void 0:l.type)&&setTimeout((function(){c.clearPurchaseInfo(),c.requestProposal()}),3500));else if(e.buy){if(c.proposal_info[r]&&c.proposal_info[r].id!==t)throw new Error("Proposal ID does not match.");var p=Yt(Yt(Yt({},c.proposal_requests[r]),c.proposal_info[r]),{},{buy_price:e.buy.buy_price}),h=e.buy,d=h.contract_id,y=h.longcode,_=h.start_time;if(d){var v,m=e.buy.shortcode,b=(0,o.extractInfoFromShortcode)(m),w=b.category,S=b.underlying,E=(0,g.A)(null!==(v=null==w?void 0:w.toUpperCase())&&void 0!==v?v:""),O=(0,o.isMultiplierContract)(w),T=null==w?void 0:w.toUpperCase(),k=w.toUpperCase()===o.CONTRACT_TYPES.CALL,x=w.toUpperCase()===o.CONTRACT_TYPES.PUT,P=(0,o.isHighLow)({shortcode_info:(0,o.extractInfoFromShortcode)(m)}),A=o.CONTRACT_TYPES.LOWER.toLowerCase(),C=o.CONTRACT_TYPES.FALL.toLowerCase();k&&(A=o.CONTRACT_TYPES.HIGHER.toLowerCase(),C=o.CONTRACT_TYPES.RISE.toLowerCase());var L=P?A:C;if(window.hj){var j="placed_".concat(k||x?L:w,"_trade");window.hj("event",j)}if(c.root_store.contract_trade.addContract({contract_id:d,start_time:_,longcode:y,underlying:S,barrier:E?f:null,contract_type:T,is_tick_contract:u}),c.root_store.portfolio.onBuyResponse({contract_id:d,longcode:y,contract_type:T}),s||(0,Rt.fV)(T,c.symbol,d),i||c.root_store.ui.openPositionsDrawer(),c.proposal_info={},c.forgetAllProposal(),c.purchase_info=e,c.proposal_requests={},c.debouncedProposal(),c.clearLimitOrderBarriers(),c.pushPurchaseDataToGtm(p),c.root_store.ui.is_mobile){var D=e.buy.shortcode,N=(0,o.extractInfoFromShortcode)(D),R=e.buy.contract_id,I=(0,o.getCurrencyDisplayCode)(c.root_store.client.currency),M="".concat((0,o.getCardLabelsV2)().STAKE,": ").concat((0,o.formatMoney)(I,e.buy.buy_price,!0,0,0)," ").concat(I),F=N.category;window.location.pathname===o.routes.trade&&(null==a||a({message:(0,o.getTradeNotificationMessage)(D),redirectTo:(0,o.getContractPath)(R),title:M},R)),c.root_store.notifications.addTradeNotification({buy_price:O?c.amount:e.buy.buy_price,contract_id:R,contract_type:F,currency:I,purchase_time:e.buy.purchase_time,shortcode:D,status:"open"})}return void(c.is_purchasing_contract=!1)}}c.forgetAllProposal(),c.purchase_info=e,c.enablePurchase(),c.is_purchasing_contract=!1})))}}},{key:"enablePurchase",value:function(){this.root_store.client.is_unwelcome||(this.is_purchase_enabled=!0)}},{key:"updateStore",value:function(t){var e=this;return Object.keys((0,o.cloneObject)(t)||{}).forEach((function(r){"root_store"===r||["validation_rules","validation_errors","currency"].indexOf(r)>-1||(JSON.stringify(e[r])===JSON.stringify(t[r])?delete t[r]:("symbol"===r&&(e.is_purchase_enabled=!1,e.is_trade_enabled=!1),t.start_date&&"string"==typeof t.start_date&&(t.start_date=parseInt(t.start_date)),e[r]=t[r],"barrier_2"===r&&t.barrier_1&&(e.barrier_1=t.barrier_1)))})),t}},{key:"processNewValuesAsync",value:(d=Ut(Mt().mark((function t(){var e,r,n,i,s,c,u,f,p,h,d,y,_,v,m,b,w,S,E,O,T,k,x,P,A,C,L,j,D,N,R=arguments;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=R.length>1&&void 0!==R[1]&&R[1],n=R.length>2&&void 0!==R[2]?R[2]:{},i=!(R.length>3&&void 0!==R[3])||R[3],(e=R.length>0&&void 0!==R[0]?R[0]:{}).contract_type&&e.contract_type===o.TRADE_TYPES.RISE_FALL&&this.is_equal&&(e.contract_type=o.TRADE_TYPES.RISE_FALL_EQUAL),s=this.root_store.contract_trade||{},c=s.prev_chart_type,u=s.prev_granularity,f=s.chart_type,p=s.granularity,h=s.savePreviousChartMode,d=s.updateChartType,y=s.updateGranularity,(0,o.isAccumulatorContract)(e.contract_type)||(0,g.E)(e.contract_type)?(h(f,p),y(0),d("line")):(e.contract_type||e.symbol)&&c&&u&&(c!==f||u!==p)&&(y(u),d(c),h("",null)),/\bduration\b/.test(Object.keys(e))&&"string"==typeof e.duration&&(e.duration=+e.duration),i&&(this.forgetAllProposal(),this.proposal_requests={}),r&&/\bcurrency\b/.test(Object.keys(e))&&(b=(null==n?void 0:n.currency)||this.currency,w=e.currency!==b,S=(0,o.isCryptocurrency)(null!==(_=e.currency)&&void 0!==_?_:"")||(0,o.isCryptocurrency)(null!==(v=e.currency)&&void 0!==v?v:"")!==(0,o.isCryptocurrency)(b),w&&S&&(e.amount=e.amount||(0,o.getMinPayout)(null!==(E=e.currency)&&void 0!==E?E:"")),this.currency=null!==(m=e.currency)&&void 0!==m?m:""),!Object.keys(e).includes("symbol")){t.next=16;break}return this.setPreviousSymbol(this.symbol),t.next=14,l(null!==(T=e.symbol)&&void 0!==T?T:"");case 14:this.setMarketStatus((0,o.isMarketClosed)(this.active_symbols,null!==(k=e.symbol)&&void 0!==k?k:"")),O=a.h.getContractCategories().has_only_forward_starting_contracts;case 16:if(this.default_stake&&this.is_dtrader_v2&&(x=e.symbol&&this.symbol&&this.symbol!==e.symbol,P=e.contract_type&&(null==n?void 0:n.contract_type)&&e.contract_type!==n.contract_type,(x||P)&&(j=(0,o.isCryptocurrency)(null!==(A=this.currency)&&void 0!==A?A:""),D=null!==(C=(0,o.getMinPayout)(null!==(L=this.currency)&&void 0!==L?L:""))&&void 0!==C?C:"",e.amount=j?D:this.default_stake),P&&(e.has_take_profit=!1,e.take_profit="")),this.root_store.ui.setHasOnlyForwardingContracts(O),!O){t.next=20;break}return t.abrupt("return");case 20:if(N=this.updateStore((0,o.cloneObject)(e)),!r&&!/\b(symbol|contract_types_list)\b/.test(Object.keys(N))){t.next=30;break}return this.updateStore({is_purchase_enabled:!1,proposal_info:{}}),e.contract_type&&this.root_store.ui.is_advanced_duration&&(0,g.E)(e.contract_type)&&(this.barrier_1="",this.barrier_2="",this.expiry_type="duration",this.root_store.ui.is_advanced_duration=!1),t.next=26,it(this,N);case 26:this.updateStore(Yt({},this.is_initial_barrier_applied?{}:this.initial_barriers)),this.is_initial_barrier_applied=!0,/\b(contract_type|currency)\b/.test(Object.keys(N))&&this.validateAllProperties(),this.debouncedProposal();case 30:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"is_dtrader_v2_mobile",get:function(){return(0,o.isDtraderV2MobileEnabled)(this.root_store.ui.is_mobile)}},{key:"is_dtrader_v2_desktop",get:function(){return(0,o.isDtraderV2DesktopEnabled)(this.root_store.ui.is_desktop)}},{key:"is_dtrader_v2",get:function(){return this.is_dtrader_v2_mobile||this.is_dtrader_v2_desktop}},{key:"is_synthetics_available",get:function(){var t;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetic_index"===t.market})))}},{key:"is_synthetics_trading_market_available",get:function(){var t,e=this;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetics"===t.subgroup&&!(0,o.isMarketClosed)(e.active_symbols,t.symbol)})))}},{key:"show_digits_stats",get:function(){return(0,g.E)(this.contract_type)}},{key:"setDigitStats",value:function(t){this.digit_stats=t}},{key:"setTickData",value:function(t){this.tick_data=t}},{key:"setMobileDigitView",value:function(t){this.is_mobile_digit_view_selected=t}},{key:"pushPurchaseDataToGtm",value:function(t){var e={event:"buy_contract",bom_ui:"new",contract:{amount:t.amount,barrier1:t.barrier,barrier2:t.barrier2,basis:t.basis,buy_price:t.buy_price,contract_type:t.contract_type,currency:t.currency,date_expiry:t.date_expiry,date_start:t.date_start,duration:t.duration,duration_unit:t.duration_unit,payout:t.payout,symbol:t.symbol},settings:{theme:this.root_store.ui.is_dark_mode_on?"dark":"light",positions_drawer:this.root_store.ui.is_positions_drawer_on?"open":"closed",chart:{toolbar_position:this.root_store.ui.is_chart_layout_default?"bottom":"left",chart_asset_info:this.root_store.ui.is_chart_asset_info_visible?"visible":"hidden",chart_type:this.root_store.contract_trade.chart_type,granularity:this.root_store.contract_trade.granularity}}};this.root_store.gtm.pushDataLayer(e)}},{key:"clearPurchaseInfo",value:function(){this.purchase_info={},this.proposal_requests={},this.proposal_info={}}},{key:"requestProposal",value:function(){var t=this,e=(0,ct.Tz)(this);if(Object.values(this.validation_errors).some((function(t){return t.length})))return(0,n.runInAction)((function(){t.proposal_info={},t.purchase_info={}})),this.forgetAllProposal(),void(this.is_accumulator&&this.resetAccumulatorData());(0,o.isEmptyObject)(e)||((0,n.runInAction)((function(){t.proposal_requests=e,t.purchase_info={}})),Object.keys(this.proposal_requests).forEach((function(e){o.WS.subscribeProposal(t.proposal_requests[e],t.onProposalResponse)}))),this.root_store.ui.resetPurchaseStates()}},{key:"forgetAllProposal",value:function(){Object.keys(this.proposal_requests).length>0&&o.WS.forgetAll("proposal")}},{key:"setMarketStatus",value:function(t){this.is_market_closed=t}},{key:"getTurbosChartBarrier",value:function(t){var e,r,n,i,a;return(Number(null===(e=t.proposal)||void 0===e||null===(r=e.contract_details)||void 0===r?void 0:r.barrier)-Number(null===(n=t.proposal)||void 0===n?void 0:n.spot)).toFixed((0,o.getBarrierPipSize)(null===(i=t.proposal)||void 0===i||null===(a=i.contract_details)||void 0===a?void 0:a.barrier))}},{key:"onProposalResponse",value:function(t){var e,r,n,i,a=t.echo_req.contract_type,s=(0,o.getPropertyValue)(this.proposal_info,a)||{},c=(0,o.getPropertyValue)(s,"obj_contract_basis")||{},u=null===(e=t.proposal)||void 0===e?void 0:e.date_expiry;if(this.expiry_epoch=u||this.expiry_epoch,!t.error&&u&&this.is_crypto_multiplier&&(this.expiration=u),this.proposal_info=Yt(Yt({},this.proposal_info),{},Gt({},a,(0,ct.vL)(this,t,c))),this.validation_params[a]=this.proposal_info[a].validation_params,this.is_multiplier&&this.proposal_info&&this.proposal_info.MULTUP){var l,f=this.proposal_info.MULTUP,p=f.commission,h=f.cancellation,d=f.limit_order;p&&(this.commission=p),h&&(this.cancellation_price=h.ask_price),this.stop_out=null==d||null===(l=d.stop_out)||void 0===l?void 0:l.order_amount}if(this.is_accumulator&&null!==(r=this.proposal_info)&&void 0!==r&&r.ACCU){var y=this.proposal_info.ACCU,_=y.barrier_spot_distance,v=y.maximum_ticks,m=void 0===v?0:v,b=y.ticks_stayed_in,g=y.tick_size_barrier_percentage,w=void 0===g?"":g,S=y.last_tick_epoch,E=y.maximum_payout,O=void 0===E?0:E,T=y.high_barrier,k=y.low_barrier,x=y.spot_time;this.ticks_history_stats=function(t){var e,r=t.previous_ticks_history_stats,n=void 0===r?{}:r,o=t.new_ticks_history_stats,i=void 0===o?[]:o,a=t.last_tick_epoch,s=n.ticks_stayed_in||[],c=null!==(e=n.last_tick_epoch)&&void 0!==e?e:0;return i.length&&a?{ticks_stayed_in:i.length>1?P(i).reverse():i[0]<=s[0]&&a>c?[i[0]].concat(P(s.slice(0,s.length-1))):a===c?s:[i[0]].concat(P(s.slice(1))),last_tick_epoch:a}:n}({previous_ticks_history_stats:this.ticks_history_stats,new_ticks_history_stats:b,last_tick_epoch:S}),this.maximum_ticks=m,this.maximum_payout=O,this.tick_size_barrier_percentage=w;var A=(this.root_store.contract_trade||{}).updateAccumulatorBarriersData;A&&A({accumulators_high_barrier:T,accumulators_low_barrier:k,barrier_spot_distance:_,current_spot_time:x,underlying:this.symbol})}if(!this.main_barrier||null!==(n=this.main_barrier)&&void 0!==n&&n.shade)if(this.is_turbos){if(t.proposal){var C=t.proposal.barrier_spot_distance;this.setMainBarrier(Yt(Yt({},t.echo_req),{},{barrier:String(C)}))}}else this.setMainBarrier(t.echo_req);if(this.hovered_contract_type===a&&(0,o.setLimitOrderBarriers)({barriers:this.root_store.portfolio.barriers,contract_info:this.proposal_info[null!==(i=this.hovered_contract_type)&&void 0!==i?i:""],contract_type:a,is_over:!0}),t.error){var L,j,D=(0,ct.pn)(t);if(D&&this.setValidationErrorMessages(D,[t.error.message]),this.is_multiplier){var N=t.error,R=N.message,I=N.details,M=(R||"").match(/\((\d+\.*\d*)\)/);"stop_loss"===(null==I?void 0:I.field)&&null!=M&&M[1]&&(this.commission=M[1])}if(this.is_accumulator&&this.resetAccumulatorData(),"AlreadySubscribed"===t.error.code)return this.refresh(),void(this.is_trade_component_mounted&&this.debouncedProposal());if(this.is_vanilla&&null!==(L=t.error.details)&&void 0!==L&&L.barrier_choices){var F=t.error.details,U=F.barrier_choices,V=F.max_stake,Y=F.min_stake;if(this.setStakeBoundary(a,Y,V),this.setBarrierChoices(U),!this.barrier_choices.includes(this.barrier_1)){var G=Math.floor(this.barrier_choices.length/2);this.barrier_1=this.barrier_choices[G],this.onChange({target:{name:"barrier_1",value:this.barrier_1}})}}if(this.is_turbos&&null!==(j=t.error.details)&&void 0!==j&&j.payout_per_point_choices){var H=t.error.details,z=H.payout_per_point_choices,B=H.min_stake,q=H.max_stake,W=Math.floor(z.length/2);this.setPayoutChoices(z.map((function(t){return String(t)}))),this.setStakeBoundary(a,B,q),this.onChange({target:{name:"payout_per_point",value:String(z[W])}}),this.barrier_1=String(this.getTurbosChartBarrier(t))}}else if(this.validateAllProperties(),this.is_vanilla){var J,$=null!==(J=t.proposal)&&void 0!==J?J:{},Q=$.max_stake,K=$.min_stake,Z=$.barrier_choices;this.setBarrierChoices(Z),this.setStakeBoundary(a,K,Q)}else if(this.is_turbos){var X,tt=null!==(X=t.proposal)&&void 0!==X?X:{},et=tt.max_stake,rt=tt.min_stake,nt=tt.payout_choices;nt&&(""==this.payout_per_point&&this.onChange({target:{name:"payout_per_point",value:String(Math.floor(nt.length/2))}}),this.setPayoutChoices(nt),this.setStakeBoundary(a,rt,et),this.barrier_1=t.proposal.barrier_spot_distance)}this.is_purchasing_contract||this.enablePurchase()}},{key:"onChartBarrierChange",value:function(t,e){this.processNewValuesAsync({barrier_1:t,barrier_2:e},!0)}},{key:"onAllowEqualsChange",value:function(){this.processNewValuesAsync({contract_type:this.is_equal?o.TRADE_TYPES.RISE_FALL_EQUAL:o.TRADE_TYPES.RISE_FALL},!0)}},{key:"updateSymbol",value:function(t){t&&this.onChange({target:{name:"symbol",value:t}})}},{key:"changeDurationValidationRules",value:function(){var t;if("endtime"!==this.expiry_type){if(this.validation_rules.duration){var e=null===(t=this.validation_rules.duration.rules)||void 0===t?void 0:t.findIndex((function(t){return"number"===t[0]})),r=this.duration_min_max[this.contract_expiry_type]||!1;if(r){var n,i={min:(0,o.convertDurationLimit)(+r.min,this.duration_unit),max:(0,o.convertDurationLimit)(+r.max,this.duration_unit)};Number(e)>-1&&this.validation_rules.duration.rules?this.validation_rules.duration.rules[Number(e)][1]=i:null===(n=this.validation_rules.duration.rules)||void 0===n||n.push(["number",i]),this.validateProperty("duration",this.duration)}}}else this.validation_errors.duration=[]}},{key:"accountSwitcherListener",value:(h=Ut(Mt().mark((function t(){var e=this;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.root_store.common.is_language_changing){t.next=6;break}return t.next=3,this.loadActiveSymbols(!1,!1);case 3:this.root_store.common.is_language_changing=!1,t.next=8;break;case 6:return t.next=8,this.loadActiveSymbols(!0,!1);case 8:return this.resetErrorServices(),t.next=11,this.setContractTypes();case 11:return(0,n.runInAction)(Ut(Mt().mark((function t(){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.is_dtrader_v2||e.processNewValuesAsync({currency:e.root_store.client.currency||e.root_store.client.default_currency},!0,{currency:e.currency},!1);case 1:case"end":return t.stop()}}),t)})))),t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"preSwitchAccountListener",value:function(){return this.clearContracts(),this.is_trade_enabled=!1,this.is_trade_enabled_v2=!1,Promise.resolve()}},{key:"logoutListener",value:(p=Ut(Mt().mark((function t(){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clearContracts(),this.refresh(),this.resetErrorServices(),!this.root_store.common.is_language_changing){t.next=9;break}return t.next=6,this.loadActiveSymbols(!1);case 6:this.root_store.common.is_language_changing=!1,t.next=11;break;case 9:return t.next=11,this.loadActiveSymbols();case 11:return t.next=13,this.setContractTypes();case 13:this.is_trade_enabled=!0,this.is_trade_enabled_v2=!0,this.debouncedProposal();case 16:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"clientInitListener",value:function(){return this.initAccountCurrency(this.root_store.client.currency||this.root_store.client.default_currency),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(t){this.setTradeStatus(t),this.is_trade_enabled_v2=t}},{key:"resetErrorServices",value:function(){this.root_store.ui.toggleServicesErrorModal(!1)}},{key:"onMount",value:function(){var t=this;if(this.root_store.notifications.removeTradeNotifications(),this.is_trade_component_mounted&&this.should_skip_prepost_lifecycle){var e=this.root_store.contract_trade,r=e.chart_type,i=e.granularity;(0,o.setTradeURLParams)({chartType:r,granularity:i,symbol:this.symbol,contractType:this.contract_type})}else this.root_store.notifications.setShouldShowPopups(!1),this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.resetAccumulatorData(),this.onLogout(this.logoutListener),this.onClientInit(this.clientInitListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.setChartModeFromURL(),this.setChartStatus(!0),(0,n.runInAction)(Ut(Mt().mark((function e(){return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_trade_component_mounted=!0,e.next=3,t.prepareTradeStore();case 3:t.root_store.notifications.setShouldShowPopups(!0);case 4:case"end":return e.stop()}}),e)}))))}},{key:"setChartModeFromURL",value:function(){var t=(0,o.getTradeURLParams)(),e=t.chartType,r=t.granularity,n=t.contractType,i=this.root_store.contract_trade,a=i.chart_type,s=i.granularity,c=i.updateChartType,u=i.updateGranularity;isNaN(Number(r))||r===s||u(Number(r)),e&&e!==a&&c(e);var l={chartType:null!=e?e:a,granularity:null!=r?r:Number(s)};n&&(this.contract_type=null!=n?n:"",l.contractType=n),(0,o.setTradeURLParams)(l)}},{key:"setChartStatus",value:function(t,e){e?this.debouncedSetChartStatus(t):this.is_chart_loading=t}},{key:"initAccountCurrency",value:(u=Ut(Mt().mark((function t(e){return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currency!==e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.processNewValuesAsync({currency:e},!0,{currency:this.currency},!1);case 4:this.refresh(),this.debouncedProposal();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"onUnmount",value:function(){this.should_skip_prepost_lifecycle||(this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.is_trade_component_mounted=!1,this.clearV2ParamsInitialValues(),this.root_store.contract_trade.onUnmount(),this.refresh(),this.resetErrorServices(),this.root_store.notifications.is_notifications_visible&&this.root_store.notifications.toggleNotificationsModal(),this.prev_chart_layout&&(this.prev_chart_layout.is_used=!1),this.clearContracts(),this.resetAccumulatorData(),this.is_vanilla&&this.setBarrierChoices([]))}},{key:"chart_layout",get:function(){var t=null;return this.prev_chart_layout&&!1===this.prev_chart_layout.is_used&&(t=this.prev_chart_layout),t}},{key:"is_crypto_multiplier",get:function(){return this.contract_type===o.TRADE_TYPES.MULTIPLIER&&this.symbol.startsWith("cry")}},{key:"exportLayout",value:function(t){var e=this;delete t.previousMaxTicks,this.prev_chart_layout=t,this.prev_chart_layout&&(this.prev_chart_layout.isDone=function(){e.prev_chart_layout&&(e.prev_chart_layout.is_used=!0),e.setChartStatus(!1)})}},{key:"chartStateChange",value:function(t,e){"MARKET_STATE_CHANGE"===t&&this.is_trade_component_mounted&&null!=e&&e.isClosed&&e.isClosed!==this.is_market_closed&&this.prepareTradeStore(!1),"SET_CHART_MODE"===t&&(isNaN(Number(null==e?void 0:e.granularity))||this.root_store.contract_trade.updateGranularity(Number(null==e?void 0:e.granularity)),null!=e&&e.chart_type_name&&this.root_store.contract_trade.updateChartType(null==e?void 0:e.chart_type_name));var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[Tt,kt,xt,Pt,At,Ct,Lt],n=[Ot,jt,Dt];return[St,Et].includes(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.chart_type_name,n=void 0===r?"":r,o={data:{action:"",chart_type_name:n,time_interval_name:e.time_interval_name},event_type:"ce_chart_types_form"};if(!n)return{};switch(t){case St:o.data.action="choose_time_interval";break;case Et:o.data.action="choose_chart_type";break;default:return{}}return o}(t,e):r.includes(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indicator_type_name,n=void 0===r?"":r,o=e.indicators_category_name,i=void 0===o?"":o,a=e.is_info_open,s=e.is_open,c=e.search_string,u=a?"indicators_info":"indicators_type",l=a?"info_open":"info_close",f=s?"open":"close",p={event_type:"ce_indicators_types_form"};if(t===Pt&&!e.search_string||(t===Tt||t===kt||t===xt||t===At)&&!n)return{};switch(t){case Tt:p.data={action:"add_active",indicator_type_name:n,indicators_category_name:i,subform_name:u};break;case kt:p.data={action:"delete_active",indicator_type_name:n,indicators_category_name:i};break;case xt:p.data={action:l,indicator_type_name:n,indicators_category_name:i};break;case Pt:p.data={action:wt,search_string:c};break;case At:p.data={action:"edit_active",indicator_type_name:n,indicators_category_name:i};break;case Lt:p.data={action:f};break;case Ct:p.data={action:"clean_all_active"};break;default:return{}}return p}(t,e):n.includes(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.is_favorite,n=e.symbol_category,o=void 0===n?"":n,i=e.search_string,a=e.symbol,s=void 0===a?"":a,c=r?"add_to_favorites":"delete_from_favorites",u={event_type:"ce_market_types_form"};if(t===jt&&!e.search_string||t===Ot&&!s)return{};switch(t){case Ot:u.data={action:c,market_type_name:s};break;case jt:u.data={action:wt,search_string:i};break;case Dt:u.data={action:"choose_market_type",market_type_name:s,tab_market_name:o};break;default:return{}}return u}(t,e):{}}(t,e),n=r.data,i=r.event_type;n&&o.cacheTrackEvents.loadEvent([{event:{name:i,properties:Yt(Yt({},n),{},{action:n.action,form_name:"default"})}}])}},{key:"has_alternative_source",get:function(){return this.is_multiplier&&!!this.hovered_contract_type}},{key:"has_barrier",get:function(){return(0,o.hasBarrier)(this.contract_type)}},{key:"is_accumulator",get:function(){return this.contract_type===o.TRADE_TYPES.ACCUMULATOR}},{key:"is_multiplier",get:function(){return this.contract_type===o.TRADE_TYPES.MULTIPLIER}},{key:"is_turbos",get:function(){return(0,o.isTurbosContract)(this.contract_type)}},{key:"is_vanilla",get:function(){return(0,o.isVanillaContract)(this.contract_type)}},{key:"is_vanilla_fx",get:function(){return(0,o.isVanillaFxContract)(this.contract_type,this.symbol)}},{key:"is_touch",get:function(){return(0,o.isTouchContract)(this.contract_type)}},{key:"getFirstOpenMarket",value:(c=Ut(Mt().mark((function t(e){var r,n,i;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=this.active_symbols)||void 0===r||!r.length){t.next=2;break}return t.abrupt("return",(0,o.findFirstOpenMarket)(this.active_symbols,e));case 2:return t.next=4,o.WS.authorized.activeSymbols();case 4:if(n=t.sent,i=n.active_symbols,!n.error){t.next=10;break}return this.root_store.common.showError({message:(0,f.localize)("Trading is unavailable at this time.")}),t.abrupt("return",void 0);case 10:return t.abrupt("return",(0,o.findFirstOpenMarket)(i,e));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"setStakeBoundary",value:function(t,e,r){e&&r&&(this.stake_boundary[t]={min_stake:e,max_stake:r})}},{key:"setActiveSymbolsV2",value:function(t){this.active_symbols=t,this.has_symbols_for_v2=!!t.length}},{key:"setContractTypesListV2",value:function(t){this.contract_types_list_v2=t}},{key:"setBarrierChoices",value:function(t){this.barrier_choices=null!=t?t:[],this.is_vanilla&&(this.strike_price_choices={barrier:this.barrier_1,barrier_choices:t})}},{key:"setPayoutChoices",value:function(t){this.payout_choices=null!=t?t:[];var e={barrier:this.barrier_1,payout_choices:t};"Long"===(0,o.getContractSubtype)(this.contract_type)?this.long_barriers=e:this.short_barriers=e}},{key:"togglePayoutWheelPicker",value:function(){this.open_payout_wheelpicker=!this.open_payout_wheelpicker}},{key:"setPayoutPerPoint",value:function(t){t&&t!==this.payout_per_point&&(this.payout_per_point=t,this.onChange({target:{name:"payout_per_point",value:String(this.payout_per_point)}}))}},{key:"setIsDigitsWidgetActive",value:function(t){this.is_digits_widget_active=t}},{key:"setTradeTypeTab",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.trade_type_tab=t}}],s&&Ht(r.prototype,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,s,c,u,p,h,d,y,_,v,w,S,E,O,T,k,A}(mt),Qt=r("./src/AppV2/Utils/positions-utils.ts");function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Zt(t){return function(t){if(Array.isArray(t))return Xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Xt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t){if("object"!=Kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kt(e)?e:e+""}function re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(re=function(){return!!t})()}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(t)}function oe(t,e){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oe(t,e)}var ie=function(t){function e(t){var r,o=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=ne(e),function(t,e){if(e&&("object"==Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,re()?Reflect.construct(e,r||[],ne(t).constructor):e.apply(t,r))}(this,e,[{root_store:o}])).openContractTypeFilter=[],r.closedContractTypeFilter=[],r.filteredContractTypes=[],r.timeFilter="",r.customTimeRangeFilter="",r.dateFrom=null,r.dateTo=null,(0,n.makeObservable)(r,{openContractTypeFilter:n.observable,closedContractTypeFilter:n.observable,timeFilter:n.observable,customTimeRangeFilter:n.observable,dateFrom:n.observable,dateTo:n.observable,setClosedContractTypeFilter:n.action.bound,setOpenContractTypeFilter:n.action.bound,setTimeFilter:n.action.bound,setCustomTimeRangeFilter:n.action.bound,setDateFrom:n.action.bound,setDateTo:n.action.bound,onUnmount:n.override}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(e,t),r=e,(o=[{key:"setClosedContractTypeFilter",value:function(t){this.closedContractTypeFilter=Zt(t),this.filteredContractTypes=(0,Qt.$Y)(t)}},{key:"setOpenContractTypeFilter",value:function(t){this.openContractTypeFilter=Zt(t)}},{key:"setTimeFilter",value:function(t){this.timeFilter=t||""}},{key:"setCustomTimeRangeFilter",value:function(t){this.customTimeRangeFilter=t||""}},{key:"setDateFrom",value:function(t){this.dateFrom=t}},{key:"setDateTo",value:function(t){this.dateTo=t}},{key:"onUnmount",value:function(){this.setClosedContractTypeFilter([]),this.setOpenContractTypeFilter([]),this.setTimeFilter(""),this.setCustomTimeRangeFilter(""),this.setDateFrom(null),this.setDateTo(null)}}])&&te(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(mt);function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ce(n.key),n)}}function ce(t){var e=function(t){if("object"!=ae(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:e+""}function ue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ue=function(){return!!t})()}function le(t){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},le(t)}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fe(t,e)}var pe=function(t){function e(t){var r,o=t.root_store;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=le(e),function(t,e){if(e&&("object"==ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ue()?Reflect.construct(e,r||[],le(t).constructor):e.apply(t,r))}(this,e,[{root_store:o}])).favoriteIndicators=[],r.favoriteSymbols=[],(0,n.makeObservable)(r,{favoriteSymbols:n.observable,favoriteIndicators:n.observable,setFavoriteSymbols:n.action.bound,setFavoriteIndicators:n.action.bound,removeFavoriteSymbol:n.action.bound,removeFavoriteIndicator:n.action.bound});var i=localStorage.getItem("cq-favorites");if(i){var a=JSON.parse(i).indicators,s=JSON.parse(i)["chartTitle&Comparison"];r.favoriteIndicators=a,r.favoriteSymbols=s}else localStorage.setItem("cq-favorites",JSON.stringify({indicators:[],"chartTitle&Comparison":[]}));return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(e,t),r=e,(o=[{key:"setFavoriteIndicators",value:function(t){this.favoriteIndicators=t,this.syncLocalStorage()}},{key:"setFavoriteSymbols",value:function(t){this.favoriteSymbols=t,this.syncLocalStorage()}},{key:"removeFavoriteIndicator",value:function(t){this.favoriteIndicators=this.favoriteIndicators.filter((function(e){return e!==t})),this.syncLocalStorage()}},{key:"removeFavoriteSymbol",value:function(t){this.favoriteSymbols=this.favoriteSymbols.filter((function(e){return e!==t})),this.syncLocalStorage()}},{key:"syncLocalStorage",value:function(){var t={indicators:this.favoriteIndicators,"chartTitle&Comparison":this.favoriteSymbols};localStorage.setItem("cq-favorites",JSON.stringify(t))}}])&&se(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(mt);function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ye(n.key),n)}}function ye(t){var e=function(t){if("object"!=he(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==he(e)?e:e+""}var _e=function(t,e,r){return e&&de(t.prototype,e),r&&de(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.positions=void 0,this.markets=void 0,this.trade=void 0,this.cashier=void 0,this.cashier=r.modules.cashier,this.trade=new $t({root_store:e}),this.positions=new ie({root_store:e}),this.markets=new pe({root_store:e})}));function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function be(t){var e=function(t){if("object"!=ve(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ve(e)?e:e+""}var ge,we=function(t,e,r){return e&&me(t.prototype,e),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=void 0,this.common=void 0,this.modules=void 0,this.ui=void 0,this.gtm=void 0,this.notifications=void 0,this.contract_replay=void 0,this.contract_trade=void 0,this.portfolio=void 0,this.chart_barrier_store=void 0,this.active_symbols=void 0,this.client=e.client,this.common=e.common,this.modules=new _e(this,e),this.ui=e.ui,this.gtm=e.gtm,this.notifications=e.notifications,this.contract_replay=e.contract_replay,this.contract_trade=e.contract_trade,this.portfolio=e.portfolio,this.chart_barrier_store=e.chart_barrier_store,this.active_symbols=e.active_symbols}));(0,n.configure)({enforceActions:"observed"});const Se=function(t,e){return ge||(i.A.init(t.common),(0,o.setWebsocket)(e),ge=new we(t))}},"./src/AppV2/Utils/positions-utils.ts":(t,e,r)=>{r.d(e,{$Y:()=>p,Dd:()=>h,Eu:()=>u,H9:()=>l,RN:()=>y,jw:()=>d,m$:()=>c});var n=r("@deriv/shared"),o=r("./src/AppV2/Utils/trade-types-utils.tsx");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={day:"2-digit",month:"short",year:"numeric"},u={OPEN:"Open",CLOSED:"Closed"},l=function(t,e){if(!e.length)return t;var r=e.map((function(t){return t.includes("/")?t.split("/"):t})).flat();return t.filter((function(t){var e=t.contract_info,o=(0,n.getSupportedContracts)((0,n.isHighLow)({shortcode:e.shortcode}))[e.contract_type];return!!o&&r.includes("main_title"in o?o.main_title:o.name)}))},f=s(s(s(s(s(s(s(s(s(s({},o.OA.ACCUMULATORS,[n.CONTRACT_TYPES.ACCUMULATOR]),o.OA.VANILLAS,[n.CONTRACT_TYPES.VANILLA.CALL,n.CONTRACT_TYPES.VANILLA.PUT]),o.OA.TURBOS,[n.CONTRACT_TYPES.TURBOS.LONG,n.CONTRACT_TYPES.TURBOS.SHORT]),o.OA.MULTIPLIERS,[n.CONTRACT_TYPES.MULTIPLIER.DOWN,n.CONTRACT_TYPES.MULTIPLIER.UP]),o.OA.RISE_FALL,[n.CONTRACT_TYPES.CALL,n.CONTRACT_TYPES.PUT,n.CONTRACT_TYPES.CALLE,n.CONTRACT_TYPES.PUTE]),o.OA.HIGHER_LOWER,[n.CONTRACT_TYPES.CALL,n.CONTRACT_TYPES.PUT]),o.OA.TOUCH_NO_TOUCH,[n.CONTRACT_TYPES.TOUCH.NO_TOUCH,n.CONTRACT_TYPES.TOUCH.ONE_TOUCH]),o.OA.MATCHES_DIFFERS,[n.CONTRACT_TYPES.MATCH_DIFF.DIFF,n.CONTRACT_TYPES.MATCH_DIFF.MATCH]),o.OA.EVEN_ODD,[n.CONTRACT_TYPES.EVEN_ODD.EVEN,n.CONTRACT_TYPES.EVEN_ODD.ODD]),o.OA.OVER_UNDER,[n.CONTRACT_TYPES.OVER_UNDER.OVER,n.CONTRACT_TYPES.OVER_UNDER.UNDER]),p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t.length)return[];var e=t.map((function(t){var e;return null!==(e=f[t])&&void 0!==e?e:[]})).flat();return function(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(e))},h=function(t){var e,r;return null!==(e=null===(r=t.profit_loss)||void 0===r?void 0:r.replaceAll(",",""))&&void 0!==e?e:(0,n.isMultiplierContract)(t.contract_type)?(0,n.getTotalProfit)(t):t.profit},d=function(t){return t.reduce((function(t,e){var r=e.contract_info;return t+Number(h(r))}),0)},y=function(t){var e=new URLSearchParams(window.location.search);if(e.set("tab_name",t),e.toString()){var r="".concat(window.location.pathname,"?").concat(e.toString());window.history.replaceState({},document.title,r)}}},"./src/AppV2/Utils/trade-params-utils.tsx":(t,e,r)=>{r.d(e,{B1:()=>w,FN:()=>m,LL:()=>y,Nw:()=>x,Qv:()=>b,_V:()=>g,bg:()=>T,hi:()=>k,mM:()=>d,nw:()=>E,nz:()=>S,rx:()=>v,yk:()=>_,yv:()=>O});var n=r("@deriv/shared"),o=r("@deriv/translations"),i=r("react"),a=r.n(i),s=r("./src/Stores/Modules/Trading/Helpers/proposal.ts");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={DAYS:"d",TICKS:"t",MINUTES:"m",HOURS:"h",SECONDS:"s"},y=function(t,e){var r;return h(h(h(h(h(h(h(h(h(h(r={},n.TRADE_TYPES.RISE_FALL,{duration:!0,stake:!0,allow_equals:!0}),n.TRADE_TYPES.RISE_FALL_EQUAL,{duration:!0,stake:!0,allow_equals:!0}),n.TRADE_TYPES.HIGH_LOW,{trade_type_tabs:!0,duration:!0,barrier:!0,stake:!0,payout:!0}),n.TRADE_TYPES.TOUCH,{trade_type_tabs:!0,duration:!0,barrier:!0,stake:!0,payout:!0}),n.TRADE_TYPES.MATCH_DIFF,{last_digit:!0,duration:!0,stake:!0}),n.TRADE_TYPES.EVEN_ODD,{duration:!0,stake:!0}),n.TRADE_TYPES.OVER_UNDER,{last_digit:!0,duration:!0,stake:!0}),n.TRADE_TYPES.ACCUMULATOR,{growth_rate:!0,stake:!0,take_profit:!0,accu_info_display:!0}),n.TRADE_TYPES.MULTIPLIER,p(p({multiplier:!0,stake:!0,risk_management:!0},e?{mult_info_display:!0}:{}),(0,n.shouldShowExpiration)(t)?{expiration:!0}:{})),n.TRADE_TYPES.TURBOS.LONG,{trade_type_tabs:!0,duration:!0,payout_per_point:!0,stake:!0,take_profit:!0,barrier_info:!0}),h(h(h(r,n.TRADE_TYPES.TURBOS.SHORT,{trade_type_tabs:!0,duration:!0,payout_per_point:!0,stake:!0,take_profit:!0,barrier_info:!0}),n.TRADE_TYPES.VANILLA.CALL,{trade_type_tabs:!0,duration:!0,strike:!0,stake:!0,payout_per_point_info:!0}),n.TRADE_TYPES.VANILLA.PUT,{trade_type_tabs:!0,duration:!0,strike:!0,stake:!0,payout_per_point_info:!0})},_=function(t,e,r){var o=h(h(h(h(h(h({},n.CONTRACT_TYPES.MATCH_DIFF.MATCH,r===e),n.CONTRACT_TYPES.MATCH_DIFF.DIFF,r!==e),n.CONTRACT_TYPES.OVER_UNDER.OVER,!(!r&&0!==r||!e&&0!==e)&&r>e),n.CONTRACT_TYPES.OVER_UNDER.UNDER,!(!r&&0!==r||!e&&0!==e)&&r<e),n.CONTRACT_TYPES.EVEN_ODD.ODD,!!r&&Boolean(r%2)),n.CONTRACT_TYPES.EVEN_ODD.EVEN,!!r&&!(r%2)||0===r);return!(!t||!o[t])&&o[t]},v=function(t,e){if(e&&t)return t.style.display="block",t.focus({preventScroll:!0}),setTimeout((function(){e.focus(),e.click(),t.style.display="none"}),300)},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=(0,n.isTurbosContract)(t),r=(0,n.isVanillaContract)(t),o=t===n.TRADE_TYPES.HIGH_LOW,i=(0,n.isTouchContract)(t);return[{label:"Up",value:n.TRADE_TYPES.TURBOS.LONG,contract_type:n.CONTRACT_TYPES.TURBOS.LONG,is_displayed:e},{label:"Down",value:n.TRADE_TYPES.TURBOS.SHORT,contract_type:n.CONTRACT_TYPES.TURBOS.SHORT,is_displayed:e},{label:"Call",value:n.TRADE_TYPES.VANILLA.CALL,contract_type:n.CONTRACT_TYPES.VANILLA.CALL,is_displayed:r},{label:"Put",value:n.TRADE_TYPES.VANILLA.PUT,contract_type:n.CONTRACT_TYPES.VANILLA.PUT,is_displayed:r},{label:"Higher",value:n.TRADE_TYPES.HIGH_LOW,contract_type:n.CONTRACT_TYPES.CALL,is_displayed:o},{label:"Lower",value:n.TRADE_TYPES.HIGH_LOW,contract_type:n.CONTRACT_TYPES.PUT,is_displayed:o},{label:"Touch",value:n.TRADE_TYPES.TOUCH,contract_type:n.CONTRACT_TYPES.TOUCH.ONE_TOUCH,is_displayed:i},{label:"No Touch",value:n.TRADE_TYPES.TOUCH,contract_type:n.CONTRACT_TYPES.TOUCH.NO_TOUCH,is_displayed:i}].filter((function(t){return t.is_displayed}))},b=function(){return window.innerHeight<=640},g=function(t){var e=t.value,r=t.unit,n=void 0===r?(0,o.localize)("min"):r,i=t.should_add_space,a=void 0===i||i;return"".concat("number"==typeof e?e:parseInt(e)).concat(a?" ":"").concat(n)},w=function(t){var e=t.has_cancellation,r=t.has_take_profit,n=t.has_stop_loss,i=t.switching_cancellation,s=t.switching_tp_sl;if(i&&e){if(r&&n)return a().createElement(o.Localize,{i18n_default_text:"TP and SL have been turned off."});if(r)return a().createElement(o.Localize,{i18n_default_text:"TP has been turned off."});if(n)return a().createElement(o.Localize,{i18n_default_text:"SL has been turned off."})}if(s&&(r||n)&&e)return a().createElement(o.Localize,{i18n_default_text:"DC has been turned off."})},S=function(t){var e=new Date;e.setMinutes(e.getMinutes()+5);var r=u(new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}).format(e).split(":").map(Number),2),n=r[0],o=r[1],i=new Date;i.setUTCHours(n),i.setUTCMinutes(o);var a=Math.ceil(i.getUTCMinutes()/t)*t;a>=60?(i.setUTCHours(i.getUTCHours()+1),i.setUTCMinutes(0)):i.setUTCMinutes(a);var s=String(i.getUTCHours()).padStart(2,"0"),c=String(i.getUTCMinutes()).padStart(2,"0");return"".concat(s,":").concat(c)},E=function(t,e){var r=e.intraday,n=e.tick,i=e.daily,s={m:{start:Math.max(1,(null==r?void 0:r.min)/60),end:Math.min(59,(null==r?void 0:r.max)/60),label:a().createElement(o.Localize,{i18n_default_text:"min"})},s:{start:Math.max(15,null==r?void 0:r.min),end:Math.min(59,null==r?void 0:r.max),label:a().createElement(o.Localize,{i18n_default_text:"sec"})},d:{start:Math.max(1,(null==i?void 0:i.min)/86400),end:Math.min(365,(null==i?void 0:i.max)/86400),label:a().createElement(o.Localize,{i18n_default_text:"days"})},t:{start:Math.max(1,null==n?void 0:n.min),end:Math.min(10,null==n?void 0:n.max),label:a().createElement(o.Localize,{i18n_default_text:"tick"})}}[t];if("function"==typeof s)return s();if(s){var c=s.start,u=s.end,l=s.label;return[function(t,e,r){return Array.from({length:e-t+1},(function(e,n){return{value:t+n,label:a().createElement(a().Fragment,{key:t+n},t+n," ",r)}}))}(Math.ceil(c),Math.floor(u),l)]}return[[]]},O=function(t,e){for(var r=1/0,n=null,o=0,i=["tick","intraday","daily"];o<i.length;o++){var a=i[o];if(t[a]){if("tick"===a&&e.find((function(t){return"t"===t.value})))return{value:t[a].min,unit:"t"};t[a].min<r&&(r=t[a].min,"intraday"===a?r>=60&&r<3600?n="m":r>=3600&&r<86400&&(n="h"):"daily"===a&&(n="d"))}}if(n&&e.find((function(t){return t.value===n}))){var s;switch(n){case"m":s=r/60;break;case"h":s=r/3600;break;case"d":s=r/86400;break;default:s=1}return{value:s,unit:n}}return null},T=function(t,e,r,o){var i,a,s;return new Date((a=function(t,e){var r,n=function(t){if(!t)return new Date;if(t instanceof Date&&!isNaN(t.getTime()))return t;if("number"==typeof t)return new Date(1e3*t);var e=new Date(t);if(isNaN(e.getTime())){var r=new Date,n=new Date(r.getUTCFullYear(),r.getUTCMonth()+1,0).getDate();return Date.parse(t)/864e5>n?new Date(r.setUTCDate(r.getUTCDate()+Number(t))):new Date(t)}return e}(t);return function(t){return t.some((function(t){return-1!==["m","h"].indexOf(t.value)}))}(e)?new Date(n):new Date(n.getTime()+1e3*((null==o||null===(r=o.daily)||void 0===r?void 0:r.min)||0))}(e,t),function(t,e){var r=u(e?e.split(":"):[0,0,0],3),n=r[0],o=r[1],i=r[2];return null==t||t.setHours(Number(n)),null==t||t.setMinutes(Number(o)||0),null==t||t.setSeconds(Number(i)||0),t}(a,null!=(s=(0,n.isTimeValid)(null!=r?r:"")?r:null!==(i=null==e?void 0:e.toISOString().substr(11,8))&&void 0!==i?i:"")?s:"")))},k=function(t){var e=t.new_values,r=void 0===e?{}:e,n=t.should_subscribe,o=void 0!==n&&n,i=t.trade_store,a=t.trade_type,c=p(p({},i),r),u=(0,s.BS)(c,a);return o||delete u.subscribe,u},x=function(t){var e,r,n,o=null!=t?t:{},i=o.has_error,a=o.message,s=void 0===a?"":a,c=o.payout,u=void 0===c?0:c,l=o.error_field,f=/\d+(\.\d+)?/g,p=i&&("amount"===l||"stake"===l),h=p?s:"",d=h?Number(null===(e=h.match(f))||void 0===e?void 0:e[2]):0,y=u||d,_=(null!==(r=(null==t?void 0:t.validation_params)||(null==t?void 0:t.validation_params))&&void 0!==r?r:{}).payout,v=(null!=_?_:{}).max,m=p&&s?Number(null===(n=s.match(f))||void 0===n?void 0:n[1]):0;return{contract_payout:y,max_payout:v||m,error:h}}},"./src/AppV2/Utils/trade-types-utils.tsx":(t,e,r)=>{r.d(e,{H1:()=>v,OA:()=>d,Ou:()=>y,ae:()=>_,c1:()=>m});var n=r("react"),o=r.n(n),i=r("@deriv/translations"),a=r("./src/Modules/Trading/Helpers/contract-type.tsx"),s=r("@deriv/shared"),c=r("./src/AppV2/Utils/trade-params-utils.tsx");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){return"bottom"===(0,s.getContractTypePosition)(t)?1:0},d={ACCUMULATORS:"Accumulators",VANILLAS:"Vanillas",TURBOS:"Turbos",MULTIPLIERS:"Multipliers",RISE_FALL:"Rise/Fall",HIGHER_LOWER:"Higher/Lower",TOUCH_NO_TOUCH:"Touch/No Touch",MATCHES_DIFFERS:"Matches/Differs",EVEN_ODD:"Even/Odd",OVER_UNDER:"Over/Under"},y=[{tradeType:o().createElement(i.Localize,{i18n_default_text:"Accumulators"}),id:d.ACCUMULATORS,for:[s.TRADE_TYPES.ACCUMULATOR]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Vanillas"}),id:d.VANILLAS,for:[s.TRADE_TYPES.VANILLA.CALL,s.TRADE_TYPES.VANILLA.PUT]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Turbos"}),id:d.TURBOS,for:[s.TRADE_TYPES.TURBOS.LONG,s.TRADE_TYPES.TURBOS.SHORT]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Multipliers"}),id:d.MULTIPLIERS,for:[s.TRADE_TYPES.MULTIPLIER]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Rise/Fall"}),id:d.RISE_FALL,for:[s.TRADE_TYPES.RISE_FALL,s.TRADE_TYPES.RISE_FALL_EQUAL]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Higher/Lower"}),id:d.HIGHER_LOWER,for:[s.TRADE_TYPES.HIGH_LOW]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Touch/No Touch"}),id:d.TOUCH_NO_TOUCH,for:[s.TRADE_TYPES.TOUCH]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Matches/Differs"}),id:d.MATCHES_DIFFERS,for:[s.TRADE_TYPES.MATCH_DIFF]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Even/Odd"}),id:d.EVEN_ODD,for:[s.TRADE_TYPES.EVEN_ODD]},{tradeType:o().createElement(i.Localize,{i18n_default_text:"Over/Under"}),id:d.OVER_UNDER,for:[s.TRADE_TYPES.OVER_UNDER]}],_=function(t){var e=(0,a.Hj)(t,s.unsupported_contract_types_list);return Object.values((0,a.g)(e)).map((function(t){var e=t.contract_types;return e[0].value.startsWith("vanilla")?e.map((function(t){return f(f({},t),{},{text:"Vanillas"})})):e})).flat().filter((function(t){var e=t.value;return![s.TRADE_TYPES.VANILLA.PUT,s.TRADE_TYPES.TURBOS.SHORT,s.TRADE_TYPES.RISE_FALL_EQUAL].includes(e)}))},v=function(t,e,r){return Object.keys(t).filter((function(t){return!(0,c.FN)(e).length||t===r})).sort((function(t,e){return h(t)-h(e)}))},m=function(t,e){return t.map((function(t){return e.find((function(e){return e.id===t.value}))})).filter((function(t){return t}))}},"./src/Modules/Contract/Components/Digits/index.ts":(t,e,r)=>{r.d(e,{A:()=>L});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("mobx"),c=r("@deriv/components"),u=r("@deriv/shared"),l=r("@deriv/translations"),f=r("./src/App/Components/Animations/index.ts"),p=r("mobx-react-lite");const h=function(t){var e=t.is_latest,r=t.is_lost,n=t.is_selected,i=t.is_won,s=t.percentage,c=t.value,u=s&&!isNaN(s)?parseFloat(s.toFixed(1)):null;return a().createElement(a().Fragment,null,a().createElement("span",{className:o()("digits__digit-value",{"digits__digit-value--latest":e,"digits__digit-value--selected":n,"digits__digit-value--win":i&&e,"digits__digit-value--loss":r&&e})},a().createElement("i",{className:o()("digits__digit-display-value",{"digits__digit-display-value--no-stats":!u})},c),!!u&&a().createElement("i",{className:"digits__digit-display-percentage"},u,"%")))},d=function(t){var e=t.current_spot,r=t.is_selected_winning,n=t.is_lost,i=t.is_won;return a().createElement(a().Fragment,null,a().createElement(c.Text,{size:"xs",align:"center",weight:"bold",className:"digits__digit-spot-value","data-testid":"dt_digits_digit_spot_value"},null==e?void 0:e.slice(0,-1)),a().createElement("span",{className:o()("digits__digit-spot-last",{"digits__digit-spot-last--selected-win":r,"digits__digit-spot-last--win":i,"digits__digit-spot-last--loss":n}),"data-testid":"dt_digits_digit_spot_last"},null==e?void 0:e.slice(-1)))},y=function(t){var e=t.is_max,r=t.is_min,n=t.is_selected,i=t.percentage,s=((null!=i?i:0)-10)/4;s=((s=Math.min(Math.max(s,-1),1))+1)/2*.85+.15;var c=339.292,u=(20*(null!=i?i:0)-102)/3/100;return u=Math.max(Math.min(u,.66),.06),a().createElement("div",{className:o()("digits__pie-container",{"digits__pie-container--selected":n})},a().createElement("svg",{className:"digits__pie-progress",width:"120",height:"120",viewBox:"0 0 120 120"},a().createElement("circle",{className:"progress__bg",cx:"60",cy:"60",r:"54",fill:"none",stroke:"#E8EEFC",strokeWidth:"12","data-testid":"dt_progress_bg"}),i&&a().createElement("circle",{className:o()("progress__value",{"progress__value--is-max":e,"progress__value--is-min":r}),cx:"60",cy:"60",r:"54",fill:"none",strokeOpacity:e||r?1:s,strokeWidth:"12",strokeDasharray:[c*u,c*(1-u)].join(" "),strokeDashoffset:c*((u+1)/2),"data-testid":"dt_progress_value"})))},_=(0,p.observer)((function(t){var e=t.barrier,r=t.is_digit_contract,n=t.has_entry_spot,i=t.is_lost,s=t.is_max,l=t.is_min,p=t.is_won,_=t.onSelect,v=t.latest_digit,m=t.selected_digit,b=t.status,g=t.stats,w=t.value,S=t.onLastDigitSpot,E=v.digit,O=v.spot,T=w===E,k=w===e,x=E===e,P=g?100*g/1e3:null;a().useEffect((function(){S&&S({spot:O,is_lost:i,is_selected_winning:x,is_latest:T,is_won:p})}),[v,O,e,w,i,x,T,p,S]);var A=(0,u.isMobile)()&&"function"==typeof _&&!b,C=(0,u.isMobile)()&&w===m&&!b;return a().createElement("div",{className:o()("digits__digit",{"digits__digit--latest":T,"digits__digit--win":p&&T,"digits__digit--loss":i&&T,"digits__digit--is-selectable":A,"digits__digit--is-selected":C}),onClick:function(){A&&_(w)}},a().createElement(y,{is_min:l,is_max:s,is_selected:k,percentage:P}),a().createElement(c.DesktopWrapper,null,a().createElement(f.b,{is_visible:!!(r&&T&&O&&b&&n),className:"digits__digit-spot",keyname:"digits__digit-spot"},a().createElement(d,{current_spot:O,is_lost:i,is_selected_winning:x,is_won:p}))),a().createElement(h,{is_latest:T,is_lost:i,is_selected:k,is_won:p,percentage:P,value:w}))})),v=function(t){var e=t.is_lost,r=t.is_trade_page,n=t.is_won,i=t.position;return a().createElement(a().Fragment,null,!!i&&a().createElement("span",{className:"digits__pointer",style:{transform:"translate3d(calc(".concat(i.left,"px), ").concat(i.top,"px, 0px)")}},a().createElement(c.Icon,{icon:"IcProfit",className:o()("digits__icon",{"digits__icon--win":n&&!r,"digits__icon--loss":e&&!r}),color:n?"green":"red",custom_color:n||e?void 0:"var(--brand-orange)"})))};function m(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return w(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var S=Array.from(Array(10).keys());const E=(0,p.observer)((function(t){var e=t.barrier,r=t.contract_type,n=t.digits,i=t.digits_info,s=t.dimension,c=t.is_digit_contract,l=t.has_entry_spot,f=t.is_ended,p=t.is_trade_page,h=t.onDigitChange,d=t.onLastDigitSpot,y=t.selected_digit,g=t.status,w=t.tick,E=t.trade_type,O=b(a().useState({0:{left:6,top:0},1:{left:6+1*s,top:0},2:{left:6+2*s,top:0},3:{left:6+3*s,top:0},4:{left:6+4*s,top:0},5:{left:6+5*s,top:0},6:{left:6+6*s,top:0},7:{left:6+7*s,top:0},8:{left:6+8*s,top:0},9:{left:6+9*s,top:0}}),1)[0],T=b(a().useState({0:{left:6,top:-60},1:{left:6+1*s,top:-60},2:{left:6+2*s,top:-60},3:{left:6+3*s,top:-60},4:{left:6+4*s,top:-60},5:{left:6+0*s,top:8},6:{left:6+1*s,top:8},7:{left:6+2*s,top:8},8:{left:6+3*s,top:8},9:{left:6+4*s,top:8}}),1)[0],k=function(t){P()&&t!==y&&"function"==typeof h&&h({target:{name:"last_digit",value:t}})},x=function(){return(0,u.isMobile)()?T:O},P=function(){return!!(0,u.isMobile)()&&E!==u.TRADE_TYPES.EVEN_ODD},A=Object.keys(i).sort((function(t,e){return+t-+e})).map((function(t){return i[+t]})).slice(-1)[0]||{},C=f&&"won"===g&&c,L=f&&"lost"===g&&c,j=n?Math.min.apply(Math,m(n)):null,D=n?Math.max.apply(Math,m(n)):null,N=w?+w.pip_size:null,R=null!=w&&w.quote&&N?w.quote.toFixed(N):null,I=R?+(R.split("").pop()||""):null,M=w?x()[null!=I?I:-1]:x()[A.digit],F=C||L?A:{digit:I,spot:R};return a().createElement("div",{className:o()("digits",{"digits--trade":p})},S.map((function(t){return a().createElement(_,{barrier:(o=t,i={DIGITMATCH:function(t){return t===e},DIGITDIFF:function(t){return t!==e},DIGITOVER:function(t){return!(!t&&0!==t||!e&&0!==e)&&t>e},DIGITUNDER:function(t){return!(!t&&0!==t||!e&&0!==e)&&t<e},DIGITODD:function(t){return!!t&&Boolean(t%2)},DIGITEVEN:function(t){return!!t&&!(t%2)||0===t}},r&&i[r]&&i[r](o)?o:null),has_entry_spot:l,is_digit_contract:c,is_lost:L,is_won:C,key:t,is_max:n?n[t]===D:null,is_min:n?n[t]===j:null,stats:n?n[t]:null,status:g,latest_digit:p?F:A,value:t,onLastDigitSpot:d,onSelect:P()?k:null,selected_digit:P()?y:void 0});var o,i})),a().createElement(v,{is_lost:L,is_trade_page:p,is_won:C,position:M}))}));var O=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),T=["contract_info","digits_array","digits_info","display_status","is_digit_contract","is_ended","is_trade_page","is_mobile","onDigitChange","selected_digit","trade_type","onChangeStatus"];function k(){return k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},k.apply(null,arguments)}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var A=function(t){var e=t.contract_info,r=t.digits_array,n=t.digits_info,o=t.display_status,i=t.is_digit_contract,c=t.is_ended,l=t.is_trade_page,f=t.is_mobile,p=t.onDigitChange,h=t.selected_digit,d=t.trade_type,y=t.onChangeStatus,_=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,T),v=e.date_start,m=_.tick,b=!l||!!m,g=!!l&&(0,u.isContractElapsed)(e,m),w=!g&&b?o:null;if(v&&!g){m=null;var S=e.tick_stream;if(null!=S&&S.length){var O,k=(0,s.toJS)(S.slice(-1)[0]);m={ask:k.tick,bid:k.tick,epoch:k.epoch,pip_size:null===(O=k.tick_display_value)||void 0===O?void 0:O.split(".")[1].length,quote:k.tick,current_tick:S.length}}}return a().useEffect((function(){y&&y({status:w,current_tick:m&&"current_tick"in m?m.current_tick:null})}),[m,l,o,y,w]),a().createElement(E,{dimension:f?64:52,has_entry_spot:!!e.entry_tick,barrier:!g&&b?Number(e.barrier):null,contract_type:!g&&b?e.contract_type:"",digits:r,digits_info:!g&&b?n:{},is_digit_contract:i,is_ended:c,is_trade_page:l,status:w,tick:m,trade_type:d,onDigitChange:p,selected_digit:h,onLastDigitSpot:_.onLastDigitSpot})},C=a().memo((function(t){var e,r=x(a().useState(),2),n=r[0],i=r[1],s=x(a().useState(),2),p=s[0],h=s[1],y=x(a().useState(),2),_=y[0],v=y[1],m=x(a().useState(),2),b=m[0],g=m[1],w=x(a().useState(),2),S=w[0],E=w[1],T=x(a().useState(),2),P=T[0],C=T[1],L=(0,u.useIsMounted)(),j=(0,O.Y)().isMobile,D=t.contract_info,N=t.digits_array,R=t.is_digit_contract,I=t.is_trade_page,M=t.underlying;return j?a().createElement("div",{className:"digits__container"},a().createElement(f.b,{is_visible:!!(R&&n&&_&&D.entry_tick),className:o()("digits__digit-spot",{"digits__digit-spot--is-trading":I}),keyname:"digits__digit-spot"},I&&a().createElement(c.Text,{size:"xs",align:"center",className:"digits__digit-spot-value"},a().createElement(l.Localize,{i18n_default_text:"Tick {{current_tick}} - ",values:{current_tick:p}})),a().createElement(d,{current_spot:_,is_lost:P,is_selected_winning:b,is_won:S})),a().createElement(A,k({},t,{onChangeStatus:function(t){i(t.status),h(t.current_tick)},onLastDigitSpot:function(t){v(t.spot),C(t.is_lost),g(t.is_selected_winning),E(t.is_won)}}))):a().createElement(f.F,{is_visible:(N||R)&&L(),className:"digits__container",keyname:"digits",type:"bottom"},I&&a().createElement("div",{className:"digits__tooltip-container"},a().createElement(c.Popover,{alignment:"top",classNameBubble:"digits__tooltip-bubble",icon:"info",id:"dt_last_digits_info_tooltip",margin:4,message:(e=I?M:D.underlying,a().createElement(l.Localize,{i18n_default_text:"Last digit stats for latest 1000 ticks for {{underlying_name}}",values:{underlying_name:(0,u.getMarketNamesMap)()[null==e?void 0:e.toUpperCase()]}})),zIndex:"100"})),a().createElement(A,t))}));C.displayName="Digits";const L=C},"./src/Modules/Page404/index.ts":(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var n=r("react"),o=r.n(n),i=r("@deriv/components"),a=r("@deriv/shared"),s=r("@deriv/translations");const c=function(){return o().createElement(i.PageError,{header:(0,s.localize)("We couldnt find that page"),messages:[(0,s.localize)("You may have followed a broken link, or the page has moved to a new address."),(0,s.localize)("Error code: {{error_code}} page not found",{error_code:404})],redirect_urls:[a.routes.trade],redirect_labels:[(0,s.localize)("Return to trade")],classNameImage:"page-404__image",image_url:(0,a.getUrlBase)("/public/images/common/404.png")})}},"./src/Modules/SmartChart/Components/Markers/accumulators-chart-elements.tsx":(t,e,r)=>{r.d(e,{A:()=>k});var n=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.ts"),o=r("react"),i=r.n(o),a=r("../../node_modules/classnames/index.js"),s=r.n(a),c=r("../../node_modules/react-transition-group/esm/CSSTransition.js"),u=r("@deriv/components"),l=r("@deriv/translations"),f=r("@deriv/shared"),p=r("./src/Modules/SmartChart/index.js");function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e,r){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var v="increment",m="decrement",b="add10";const g=i().memo((function(t){var e,r=t.current_spot,n=t.current_spot_time,o=t.currency,a=t.className,c=void 0===a?"sc-accumulators-profit-loss-text":a,l=t.profit_value,h=t.should_show_profit_percentage,_=y(i().useState(!1),2),g=_[0],w=_[1],S=y(i().useState(!1),2),E=S[0],O=S[1],T=h?(0,f.addComma)(l,2):(0,f.formatMoney)(null!=o?o:"",l,!0,0,0),k=+(null===(e=i().useRef(T).current)||void 0===e?void 0:e.split(".")[1][0]),x=y(i().useState(k),2),P=x[0],A=x[1],C=i().useRef(0),L=i().useRef(),j=i().useRef(),D=i().useRef(),N=T.split("."),R=N[0],I=+N[1][0],M=+N[1].slice(1),F=l>=0,U=l>0?"+":"",V=function(t,e,r,n){clearInterval(L.current);var o=setInterval((function(){t===v&&C.current<n?C.current=(C.current+1)%10:t===m&&C.current>n?C.current=Math.abs(C.current-1)%10:t===b&&C.current<r+10?C.current+=1:(t===b?C.current===r+10:C.current===n)&&clearInterval(o),A(C.current%10)}),e);L.current=o};return i().useEffect((function(){var t,e,r;return l&&(w(!0),O(!0),j.current=setTimeout((function(){w(!1)}),600),D.current=setTimeout((function(){O(!1)}),300)),0!==l&&(t=k,e=I,r=Math.abs(e-t),C.current=t,t<e?V(v,300/r,t,e):t>e?V(m,300/r,t,e):V(b,30,t,e)),function(){clearTimeout(j.current),clearTimeout(D.current),clearInterval(L.current)}}),[l,k,I]),i().createElement(p.DV,{markerRef:function(t){t&&(r||t.setPosition({epoch:null,price:null}),r&&n&&t.setPosition({epoch:+n,price:+r}))},className:s()(c,F?"won":"lost"),overlap_y_axis:!1},i().createElement(u.Text,{weight:"bold",size:(0,f.isMobile)()?"s":"sm",color:F?"profit-success":"loss-danger",className:s()("".concat(c,"__profit"),"".concat(c,"__profit--").concat(F?"won":"loss"),d({},"".concat(c,"__profit--fading-in"),g)),"data-testid":"dt_accumulator_profit_text"},"".concat(U).concat(R,"."),i().createElement("div",{className:E?"".concat(c,"__sliding-tenth"):""},P),"".concat(M)),i().createElement(u.Text,{size:(0,f.isMobile)()?"xxxs":"xxs",as:"div",className:"".concat(c,"__currency")},h?"%":(0,f.getCurrencyDisplayCode)(o)))}));function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}const E=i().memo((function(t){var e=t.alignment,r=void 0===e?"right":e,n=t.className,o=void 0===n?"sc-accumulators-profit-loss-tooltip":n,a=t.current_spot,h=t.current_spot_time,d=t.currency,y=t.exit_tick,_=t.exit_tick_time,v=t.high_barrier,m=t.is_sold,b=t.profit,S=t.profit_percentage,E=t.should_show_profit_text,O=t.is_mobile,T=w(i().useState(!1),2),k=T[0],x=T[1],P=Number(b)>=0,A=i().useRef(),C=(0,f.getDecimalPlaces)(d)>2&&!!S;i().useEffect((function(){return function(){clearTimeout(A.current)}}),[]),i().useEffect((function(){m&&(x(!0),A.current=L(3e3))}),[m]);var L=function(t){return setTimeout((function(){x(!1)}),t)},j=function(){clearTimeout(A.current),A.current=L(1500)},D=i().useMemo((function(){var t=["left","right"];return t.includes(r)?t.find((function(t){return t!==r})):["top","bottom"].find((function(t){return t!==r}))}),[r]);return"number"!=typeof b?null:!m&&h&&v&&E?i().createElement(g,{currency:d,current_spot:a,current_spot_time:h,profit_value:C?S:b,should_show_profit_percentage:C}):m&&_?i().createElement(p.DV,{markerRef:function(t){t&&(y||t.setPosition({epoch:null,price:null}),_&&y&&t.setPosition({epoch:+_,price:+y}))},className:s()(o,P?"won":"lost")},i().createElement("span",{className:"".concat(o,"__spot-circle"),onMouseEnter:function(){return x(!0)},onMouseLeave:j,onTouchStart:function(){return x(!0)},onTouchEnd:j,"data-testid":"dt_accumulator_tooltip_spot"}),i().createElement(c.A,{in:k,timeout:{exit:500},unmountOnExit:!0,classNames:"".concat(o,"__content")},i().createElement("div",{className:s()("".concat(o,"__content"),"arrow-".concat(D))},i().createElement(u.Text,{size:O?"xxxxs":"xxs",className:"".concat(o,"__text")},(0,l.localize)("Total profit/loss:")),i().createElement(u.Text,{size:O?"xxxs":"xs",className:"".concat(o,"__text"),weight:"bold"},i().createElement(u.Money,{amount:b,currency:d,has_sign:!0,show_currency:!0}))))):null}));var O=r("./src/Modules/SmartChart/Components/Markers/marker.tsx");function T(){return T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T.apply(null,arguments)}const k=i().memo((function(t){var e=t.all_positions,r=t.current_spot,o=t.current_spot_time,a=t.has_crossed_accu_barriers,s=t.should_show_profit_text,c=t.symbol,u=t.is_mobile,l=e.filter((function(t){var e=t.contract_info;return e&&c===e.underlying&&(0,n.i4)(e,f.TRADE_TYPES.ACCUMULATOR)}));return i().createElement(i().Fragment,null,!!l.length&&l.map((function(t){var e=t.contract_info;return i().createElement(E,T({key:e.contract_id},e,{should_show_profit_text:s,is_mobile:u}))})),a&&!!o&&!!r&&i().createElement(O.A,{marker_config:{ContentComponent:"div",x:o,y:r},marker_content_props:{className:"sc-current-spot-emphasizer"}}))}))},"./src/Modules/SmartChart/Components/Markers/marker.tsx":(t,e,r)=>{r.d(e,{A:()=>c});var n=r("mobx"),o=r("react"),i=r.n(o),a=r("./src/Modules/SmartChart/index.js"),s=["ContentComponent"];const c=function(t){var e=t.marker_config,r=t.marker_content_props,c=t.is_positioned_behind,u=void 0!==c&&c,l=t.is_positioned_before,f=void 0!==l&&l,p=e.ContentComponent,h=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,s),d=(0,o.useMemo)((function(){return p}),[]);return i().createElement(a.DV,{markerRef:function(t){t&&(h.y?t.div.style.zIndex="1":t.div.style.height="calc(100% - ".concat(24,"px)"),u&&(t.div.style.zIndex="-1"),f&&(t.div.style.zIndex="102"),t.setPosition({epoch:+h.x,price:Number(h.y)}))}},i().createElement(d,(0,n.toJS)(r)))}},"./src/Modules/SmartChart/Components/bottom-widgets.tsx":(t,e,r)=>{r.d(e,{A:()=>i});var n=r("react"),o=r.n(n);const i=function(t){var e=t.Widget;return o().createElement("div",{className:"bottom-widgets"},e)}},"./src/Modules/SmartChart/Components/toolbar-widgets.tsx":(t,e,r)=>{r.d(e,{A:()=>c});var n=r("react"),o=r.n(n),i=r("./src/Modules/SmartChart/index.js"),a=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),s=r("@deriv/shared");const c=o().memo((function(t){var e=t.position,r=t.updateChartType,n=t.updateGranularity,c=(0,a.Y)().isMobile,u=(0,s.isDesktopOs)()&&!s.isTabletOs;return o().createElement(i.uu,{position:e||(c?"bottom":null)},o().createElement(i.Ev,{portalNodeId:"modal_root",onChartType:r,onGranularity:n}),u&&!c&&o().createElement(i.pz,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),!c&&o().createElement(i.Pp,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist",onChartType:r,onGranularity:n}),u&&!c&&o().createElement(i.WD,{portalNodeId:"modal_root"}),u&&!c&&o().createElement(i.SY,{portalNodeId:"modal_root"}))}))},"./src/Modules/SmartChart/Components/top-widgets.tsx":(t,e,r)=>{r.d(e,{A:()=>d});var n=r("react"),o=r.n(n),i=r("react-dom"),a=r.n(i),s=r("./src/Modules/SmartChart/index.js"),c=r("mobx-react-lite"),u=r("../stores/src/useStore.ts"),l=r("@deriv/shared"),f=r("@deriv/translations"),p=r("@deriv/components");const h=(0,c.observer)((function(){var t=(0,u.A)().contract_trade,e=t.granularity,r=t.filtered_contracts,n=r[r.length-1];if(null==n||!n.contract_info.tick_stream||(0,l.isAccumulatorContract)(n.contract_info.contract_type))return null;if((0,l.isEnded)(n.contract_info)||0!==e)return null;var i=n.contract_info,a=i.contract_type,s=i.tick_stream,c=i.tick_count,h=(0,l.isDigitContract)(a)?s.length:Math.max(s.length-1,0);return o().createElement(p.Text,{weight:"bold",className:"recent-trade-info"},o().createElement(f.Localize,{i18n_default_text:"Tick {{current_tick}}/{{tick_count}}",values:{current_tick:h,tick_count:c}}))})),d=function(t){var e=t.InfoBox,r=t.is_mobile,n=t.is_title_enabled,i=void 0===n||n,c=t.onSymbolChange,u=t.theme,l=t.open_market,f=t.open,p=t.is_digits_widget_active,d=o().createElement(s.hx,{open_market:l,open:f,enabled:i,onChange:c,searchInputClassName:"data-hj-whitelist",isNestedList:r,portalNodeId:r?"deriv_app":void 0}),y=a().createPortal(o().createElement("div",{className:"smartcharts-".concat(u)},o().createElement("div",{className:"top-widgets-portal"},d,!p&&o().createElement(h,null))),document.getElementById("app_contents"));return o().createElement(o().Fragment,null,e,r?y:d)}},"./src/Modules/SmartChart/index.js":(t,e,r)=>{r.d(e,{DV:()=>_,Ev:()=>l,GR:()=>c,Pp:()=>d,SY:()=>p,WD:()=>f,hx:()=>u,pz:()=>h,uu:()=>y});var n,o=r("react"),i=r.n(o),a=r("@deriv/shared"),s=function(t){return function(){return n||(n=(0,a.moduleLoader)((function(){return Promise.resolve().then(r.t.bind(r,"@deriv/deriv-charts",23))}))).then((function(t){(0,t.setSmartChartsPublicPath)((0,a.getUrlBase)("/js/smartcharts/"))})),n.then((function(e){return{default:e[t]}}))}},c=i().lazy(s("SmartChart")),u=i().lazy(s("ChartTitle")),l=(s("ChartSize"),i().lazy(s("ChartMode"))),f=i().lazy(s("DrawTools")),p=i().lazy(s("Share")),h=i().lazy(s("StudyLegend")),d=i().lazy(s("Views")),y=i().lazy(s("ToolbarWidget")),_=i().lazy(s("FastMarker"));s("RawMarker")},"./src/Modules/Trading/Helpers/contract-type.tsx":(t,e,r)=>{r.d(e,{Hj:()=>p,PB:()=>f,WW:()=>h,g:()=>_,iJ:()=>y,my:()=>d});var n=r("react"),o=r.n(n),i=r("@deriv/translations");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=c(c(c(c(c(c(c({},(0,i.localize)("Ups & Downs"),"IcUpsDowns"),(0,i.localize)("Highs & Lows"),"IcHighsLows"),(0,i.localize)("Ins & Outs"),"IcInsOuts"),(0,i.localize)("Look Backs"),"IcLookbacks"),(0,i.localize)("Digits"),"IcDigits"),(0,i.localize)("Multipliers"),"IcMultiplier"),(0,i.localize)("Accumulators"),"IcCatAccumulator"),l=["Accumulators","Vanillas","Turbos","Multipliers","Ups & Downs","Highs & Lows","Digits"],f=function(){return{All:"IcCatAll",Accumulators:"IcCatAccumulator",Options:"IcCatOptions",Multipliers:"IcCatMultiplier",Turbos:"IcCatTurbos"}},p=function(t,e){return Object.keys(t).map((function(r){var n=t[r].categories,a=t[r].name,s=n.filter((function(t){return t.value&&!e.includes(t.value)?t:void 0}));if(s.length)return{key:r,label:a,contract_types:s,icon:u[a],component:a===(0,i.localize)("Accumulators")?o().createElement("span",{className:"dc-vertical-tab__header--new"},(0,i.localize)("NEW!")):null}})).filter(Boolean)},h=function(t,e){return(null==t?void 0:t.find((function(t){var r;return null==t||null===(r=t.contract_types)||void 0===r?void 0:r.some((function(t){return t.value.includes(e.value)}))})))||{}},d=function(t,e){var r;return null===(r=h(t,e))||void 0===r?void 0:r.key},y=function(t,e){var r;return null===(r=h(t,e))||void 0===r?void 0:r.contract_types},_=function(){return function(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).sort((function(t,e){return l.indexOf(t.key)-l.indexOf(e.key)}))}},"./src/Modules/Trading/Helpers/digits.ts":(t,e,r)=>{r.d(e,{A:()=>s,E:()=>a});var n=r("@deriv/shared"),o=[n.TRADE_TYPES.EVEN_ODD,n.TRADE_TYPES.MATCH_DIFF,n.TRADE_TYPES.OVER_UNDER],i=[n.CONTRACT_TYPES.MATCH_DIFF.DIFF,n.CONTRACT_TYPES.MATCH_DIFF.MATCH,n.CONTRACT_TYPES.OVER_UNDER.OVER,n.CONTRACT_TYPES.OVER_UNDER.UNDER,n.CONTRACT_TYPES.EVEN_ODD.EVEN,n.CONTRACT_TYPES.EVEN_ODD.ODD],a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.some((function(e){return e===t}))},s=function(t){return i.some((function(e){return e===t}))}},"./src/Stores/Modules/Trading/Helpers/contract-type.ts":(t,e,r)=>{r.d(e,{h:()=>W});var n=r("@deriv/shared"),o=r("./src/_common/base/server_time.ts"),i=r("@deriv/translations"),a=r("./src/Stores/Modules/Trading/Helpers/start-date.ts");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="suspendedYield",_="executing",v="completed",m={};function b(){}function g(){}function w(){}var S={};f(S,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(D([])));O&&O!==r&&n.call(O,a)&&(S=O);var T=w.prototype=b.prototype=Object.create(S);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=d;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=_;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return g.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},k(x.prototype),f(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),f(T,l,"Generator"),f(T,a,(function(){return this})),f(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function u(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m,b,g,w,S,E,O,T,k,x,P,A,C,L,j,D,N,R,I,M,F,U,V,Y,G,H,z,B,q,W=(b={},g={},w={},S={},E={},O=!1,T=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[t.contract_type]=null!==(e=t.contract_display)&&void 0!==e?e:"",r},k=function(t,e){return-1!==t.indexOf(e)?e:t[0]},x=function(t){var e,r;if(!m)return{};var n=["duration","amount"].concat(p(null!==(e=null===(r=m[t])||void 0===r?void 0:r.components)&&void 0!==e?e:[])).filter((function(e){var r;return!("duration"===e&&m[t].config&&null!==(r=m[t].config)&&void 0!==r&&r.hide_duration)}));return m&&{form_components:n}},P=function(t,e){return{duration_units_list:(0,n.getPropertyValue)(b,[t,"config","durations","units_display",e])||[]}},A=function(t,e,r){var o=(0,n.getPropertyValue)(b,[e,"config","durations","units_display",r])||[],i=[];return o.forEach((function(t){i.push(t.value)})),{duration_unit:k(i,t)}},C=function(t,e,r){var o=(0,n.getPropertyValue)(b,[t,"config","durations","min_max",e])||{};return r&&(o="contract_expiry_type"in o?o[r]:{}),{duration_min_max:o}},L=function(t){return{contract_start_type:t===Number(0)?"spot":"forward"}},j=function(t,e){var r,o=(0,n.getPropertyValue)(b,[t,"config"]),a=[];return null!=o&&o.has_spot&&a.push({text:(0,i.localize)("Now"),value:Number(0)}),null!=o&&o.forward_starting_dates&&a.push.apply(a,p(o.forward_starting_dates)),{start_date:a.find((function(t){return t.value===e}))?e:null===(r=a[0])||void 0===r?void 0:r.value,start_dates_list:a}},D=p(Array(24).keys()).map((function(t){return"0".concat(t).slice(-2)})),N=p(Array(12).keys()).map((function(t){return"0".concat(5*t).slice(-2)})),R=function(t,e,r){return t&&!(0,a.Y)(t,e)&&(e.minute(Number(N.find((function(r){return(0,a.Y)(t,e.minute(+r))}))||e.format("mm"))),(0,a.Y)(t,e)||(e.minute(0),e.hour(Number(D.find((function(n){return(0,a.Y)(t,e.hour(+n),r,!0)}))||e.format("HH"))),e.minute(Number(N.find((function(r){return(0,a.Y)(t,e.minute(+r))}))||e.format("mm"))))),e.format("HH:mm")},I=function(t,e){var r,i=f((0,n.isTimeValid)(null!=e?e:"")?null!==(r=null==e?void 0:e.split(":"))&&void 0!==r?r:[]:[0,0],2),a=i[0],s=i[1];return(0,n.toMoment)(t||o.A.get()).hour(+a).minute(+s)},F=function(t){return t.minute(5*Math.ceil(t.minute()/5))},U=function(t){return{trade_types:(0,n.getPropertyValue)(b,[t,"config","trade_types"])}},Y=function(t,e){var r=(0,n.getPropertyValue)(b,[t,"basis"])||[],o=(0,n.getLocalizedBasis)();return{basis_list:r.reduce((function(t,e){return[].concat(p(t),[{text:o[e],value:e}])}),[]),basis:k(r,e)}},G=function(t){return{accumulator_range_list:(0,n.getPropertyValue)(b,[t,"config","growth_rate_range"])||[]}},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{barrier_choices:e.length?e:(0,n.getPropertyValue)(b,[t,"config","barrier_choices"])||[]}},z=function(t,e){var r=(0,n.getPropertyValue)(b,[t,"config","multiplier_range"])||[];return{multiplier_range_list:r.map((function(t){return{text:"x".concat(t),value:t}})),multiplier:k(r,e)}},B=function(t,e){var r=(0,n.getPropertyValue)(b,[t,"config","cancellation_range"])||[],o=(0,n.getPropertyValue)(b,[n.TRADE_TYPES.MULTIPLIER,"config","cancellation_range"])||[],i=/(^(?:\d){1,})|((?:[a-zA-Z]){1,}$)/g,a=function(t){return{text:"".concat((e=t,o=f(null!==(r=e.match(i))&&void 0!==r?r:[],2),a=o[0],s=o[1],c=(0,n.getUnitMap)()[s],u="name_plural"in c?c.name_plural:c.name,"".concat(a," ").concat(u))),value:t};var e,r,o,a,s,c,u},s=!!r.length;return _({cancellation_duration:k(r,e),cancellation_range_list:r.map(a),cached_multiplier_cancellation_list:o.map(a)},s?{}:{has_cancellation:!1})},q=function(t){var e,r=null===(e=/^(.*)_equal$/.exec(t))||void 0===e?void 0:e[1];return r&&!b[r]?{is_equal:1,has_equals_only:!0}:{}},{buildContractTypesConfig:function(t){return n.WS.contractsFor(t).then((function(e){var r=(0,n.getPropertyValue)(e,["contracts_for"]);if(O=r&&!e.contracts_for.available.find((function(t){return"forward"!==t.start_type})),r&&!O){var o=(0,n.getContractCategoriesConfig)();m=(0,n.getContractTypesConfig)(t),b={},g=(0,n.cloneObject)(o),e.contracts_for.available.forEach((function(t){var e=Object.keys(m).find((function(e){return-1!==m[e].trade_types.indexOf(t.contract_type)&&(void 0===m[e].barrier_count||Number(m[e].barrier_count)===t.barriers)}));if(e){if(!b[e]){var r,o=g[null!==(r=Object.keys(g).find((function(t){return-1!==g[t].categories.indexOf(e)})))&&void 0!==r?r:""].categories;if(!o)return;o[o.indexOf(e)]={value:e,text:m[e].title},b[e]=(0,n.cloneObject)(m[e])}var i=b[e].config||{};i.has_spot=i.has_spot||"spot"===t.start_type,i.durations=i.hide_duration?void 0:(0,n.buildDurationConfig)(t,i.durations),i.trade_types=T(t,i.trade_types),i.barriers=(0,n.buildBarriersConfig)(t,i.barriers),i.barrier_category=t.barrier_category,i.barrier_choices=t.barrier_choices,i.forward_starting_dates=(0,n.buildForwardStartingConfig)(t,i.forward_starting_dates),i.growth_rate_range=t.growth_rate_range,i.multiplier_range=t.multiplier_range,i.cancellation_range=t.cancellation_range,b[e].config=i}})),g=(0,n.getCleanedUpCategories)(g),w={};var i=(0,n.cloneObject)(o),a=function(){var t,e;return null!==(t=null===(e=i[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""])||void 0===e?void 0:e.categories)&&void 0!==t?t:[]},s=e.contracts_for.non_available;s&&s.forEach((function(t){var e,r,n,o,s=t.contract_type,c=null!==(e=Object.keys(m).find((function(t){return m[t].trade_types.includes(s)})))&&void 0!==e?e:"",u=Object.keys(i).find((function(t){return a(t).includes(c)})),l=a(u),f=null===(r=m[c])||void 0===r?void 0:r.title,p=!(null===(n=g[u])||void 0===n||null===(o=n.categories)||void 0===o||!o.find((function(t){return t.text===f})));l.includes(c)&&!p&&(l[l.indexOf(c)]={value:c,text:f}),u&&(w[u]=i[u])})),w=(0,n.getCleanedUpCategories)(w)}}))},getBarrierCategory:function(t){return{barrier_category:(0,n.getPropertyValue)(b,[t,"config","barrier_category"])}},getBarriers:V=function(t,e,r){var o=(0,n.getPropertyValue)(b,[t,"config","barriers"])||{},i=o[e]||{},a=i.barrier||i.high_barrier||"",s=i.low_barrier||"";return{barrier_count:o.count||0,barrier_1:r||a.toString(),barrier_2:s.toString()}},getContractType:function(t,e){var r=Object.keys(t||{}).reduce((function(e,r){return[].concat(p(e),p(t[r].categories.map((function(t){return t.value}))))}),[]).filter((function(t){return!n.unsupported_contract_types_list.includes(t)})),o=(0,n.getSortedTradeTypes)(r);return{contract_type:k(o,e)}},getContractValues:function(t){var e,r,o,i=t.contract_expiry_type,a=t.contract_type,s=t.basis,c=t.duration_unit,u=t.expiry_type,l=t.multiplier,f=t.start_date,p=t.cancellation_duration,h=t.short_barriers,d=t.long_barriers,y=t.strike_price_choices,v=t.v2_params_initial_values,m=t.root_store;if(!a)return{};switch((0,n.getContractSubtype)(a)){case"Short":o=h;break;case"Long":o=d;break;case"Call":case"Put":o=null!=v&&v.strike&&((0,n.isDtraderV2MobileEnabled)(null==m?void 0:m.ui.is_mobile)||(0,n.isDtraderV2DesktopEnabled)(null==m?void 0:m.ui.is_desktop))?_(_({},y),{},{barrier:v.strike}):y;break;default:o={}}var b=x(a),g=Y(a,s),w=U(a),S=j(a,f),E=L(S.start_date),O=V(a,i,null===(e=o)||void 0===e?void 0:e.barrier),T=A(c,a,E.contract_start_type),k=P(a,E.contract_start_type),D=C(a,E.contract_start_type),N=G(a),R=H(a,null===(r=o)||void 0===r?void 0:r.barrier_choices),I=z(a,l),F=B(a,p),W=M(k.duration_units_list,u),J=q(a);return _(_(_(_(_(_(_(_(_(_(_(_(_(_(_({},b),g),w),S),E),O),T),k),D),W),N),R),I),F),J)},getDurationMinMax:C,getDurationUnit:A,getDurationUnitsList:P,getFullContractTypes:function(){return b},getExpiryDate:function(t,e,r,o){var i=null;if("endtime"===r){var a=(0,n.toMoment)(o),s=(0,n.toMoment)(e);i=(0,n.hasIntradayDurationUnit)(t)?(s.isBefore(a,"day")||o&&s.isAfter(a.clone().add(1,"day"))?a:s).format("YYYY-MM-DD"):(s.isSameOrBefore(a,"day")?a.clone().add(1,"day"):s).format("YYYY-MM-DD")}return{expiry_date:i}},getExpiryTime:function(t,e,r,i,s,c,u){var l=null;if("endtime"===r){var f,p="23:59:59";if(Array.isArray(i)&&null!=i&&i.length&&"--"!==i[0]&&(p=i.slice(-1)[0]),!c&&null!==(f=o.A.get())&&void 0!==f&&f.isBefore(I(t),"day"))l=p;else{var h=c?I(c,u):o.A.get(),d=I(t,e);l=d.format("HH:mm");var y=[{open:h.clone().add(5,"minute"),close:(0,n.minDate)(h.clone().add(24,"hour"),I(t,p))}];if((0,a.Y)(y,d)||(l=R(y,d.clone(),h.clone())),d.isSameOrBefore(h)||d.diff(h,"minute")<5){var _=23===h.get("hours")&&h.get("minute")>=55,v=s&&!(0,a.Y)(s,h.clone().add(5,"minutes"));l=h.clone().add(_||v?0:5,"minutes"),l=F(l).format("HH:mm")}"00:00"===l&&h.isBefore(d,"day")&&(l=h.clone().subtract(5,"minute").format("HH:mm"))}}return{expiry_time:l}},getExpiryType:M=function(t,e){if(t){if(!e&&t.length>0||1===t.length&&"t"===t[0].value)return{expiry_type:"duration"};if(0===t.length)return{expiry_type:null}}return{expiry_type:e}},getSessions:function(t,e){var r,o;return{sessions:null===(r=((0,n.getPropertyValue)(b,[t,"config"])||{}).forward_starting_dates)||void 0===r||null===(o=r.find((function(t){return t.value===e})))||void 0===o?void 0:o.sessions}},getStartTime:function(t,e,r){return{start_time:e?R(t,I(e,r)):null}},getStartType:L,getTradingEvents:function(){var t=l(c().mark((function t(e){var r,o,i,a,s,u,l,f,p,h=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:null,e){t.next=3;break}return t.abrupt("return",[]);case 3:if(e in S){t.next=9;break}return t.next=6,n.WS.tradingTimes(e);case 6:if(o=t.sent,i=o.trading_times,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(a=0;a<i.markets.length;a++)if(s=i.markets[a].submarkets)for(u=0;u<s.length;u++)if(l=s[u].symbols)for(f=0;f<l.length;f++)p=l[f],S[o.echo_req.trading_times]||(S[o.echo_req.trading_times]={}),S[o.echo_req.trading_times][p.symbol]=p.events;case 9:return t.abrupt("return",S[e][r]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getTradingTimes:function(){var t=l(c().mark((function t(e){var r,o,i,a,s,u,l,f,p,h=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:null,e){t.next=3;break}return t.abrupt("return",{});case 3:if(e in E){t.next=9;break}return t.next=6,n.WS.tradingTimes(e);case 6:if(o=t.sent,i=o.trading_times,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(a=0;a<i.markets.length;a++)if(s=i.markets[a].submarkets)for(u=0;u<s.length;u++)if(l=s[u].symbols)for(f=0;f<l.length;f++)p=l[f],E[o.echo_req.trading_times]||(E[o.echo_req.trading_times]={}),E[o.echo_req.trading_times][p.symbol]={open:p.times.open,close:p.times.close};case 9:return t.abrupt("return",r?E[e][r]:E[e]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getContractCategories:function(){return{contract_types_list:g,has_only_forward_starting_contracts:O,non_available_contract_types_list:w}}})},"./src/Stores/Modules/Trading/Helpers/proposal.ts":(t,e,r)=>{r.d(e,{BS:()=>p,Tz:()=>f,pn:()=>u,vL:()=>l});var n=r("@deriv/shared");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={barrier:"barrier_1",barrier2:"barrier_2",date_expiry:"expiry_date"},u=function(t){var e=(0,n.getPropertyValue)(t,["error","details","field"]);if(!e)return null;var r,o=c[e]||e,i=document.getElementsByName(o)[0];return i&&(r=i)&&(0!==r.offsetWidth||0!==r.offsetHeight)?o:null},l=function(t,e,r){var o,i,s,c,l=e.proposal||{},f=(l.payout||0)-(l.ask_price||0),p=100*f/(l.ask_price||1),h=l.display_value,d=t.basis_list,y=t.is_vanilla||t.is_turbos?{text:(0,n.getLocalizedBasis)().payout_per_point,value:"display_number_of_contracts"}:d.find((function(e){return e.value!==t.basis}))||{},_="stake"===(null==y?void 0:y.value)?h:l[null==y?void 0:y.value],v={text:(null==y?void 0:y.text)||"",value:_||""},m=l.commission,b=l.cancellation,g=a(a({},l.contract_details),{},{growth_rate:t.growth_rate,spot_time:l.spot_time});return a({commission:m,cancellation:b,id:l.id||"",has_error:!!e.error,has_error_details:!!u(e),error_code:null==e||null===(o=e.error)||void 0===o?void 0:o.code,error_field:null==e||null===(i=e.error)||void 0===i||null===(s=i.details)||void 0===s?void 0:s.field,limit_order:l.limit_order,message:l.longcode||(null==e||null===(c=e.error)||void 0===c?void 0:c.message),obj_contract_basis:v,payout:l.payout,profit:f.toFixed((0,n.getDecimalPlaces)(t.currency)),returns:"".concat(p.toFixed(2),"%"),stake:h,spot:l.spot,validation_params:null==l?void 0:l.validation_params},g)},f=function(t){var e={};return Object.keys(t.trade_types).forEach((function(r){var n=p(t,r);e[r]=n})),e},p=function(t,e){var r,o={},i={},s={};if("endtime"===t.expiry_type&&t.expiry_time){var c=(0,n.toMoment)(t.expiry_date);i.date_expiry=(0,n.convertToUnix)(c.unix(),t.expiry_time)}return t.contract_type===n.TRADE_TYPES.MULTIPLIER&&function(t,e){e.multiplier=t.multiplier,e.cancellation=t.has_cancellation?t.cancellation_duration:void 0,e.limit_order=t.has_take_profit||t.has_stop_loss?{}:void 0,t.has_take_profit&&t.take_profit&&e.limit_order&&(e.limit_order.take_profit=+t.take_profit||0),t.has_stop_loss&&t.stop_loss&&e.limit_order&&(e.limit_order.stop_loss=+t.stop_loss||0)}(t,s),t.contract_type===n.TRADE_TYPES.ACCUMULATOR&&function(t,e){e.growth_rate=t.growth_rate,e.limit_order=t.has_take_profit?{}:void 0,t.has_take_profit&&t.take_profit&&e.limit_order&&(e.limit_order.take_profit=+t.take_profit||0)}(t,o),(0,n.isTurbosContract)(t.contract_type)&&t.has_take_profit&&t.take_profit&&(r={take_profit:+t.take_profit||0}),a(a(a(a(a(a(a({proposal:1,subscribe:1,amount:parseFloat(t.amount.toString())||0,basis:t.basis,contract_type:e,currency:t.currency,symbol:t.symbol},t.start_date&&t.start_time&&{date_start:(0,n.convertToUnix)(t.start_date,t.start_time)}),"duration"===t.expiry_type?{duration:parseInt(t.duration.toString()),duration_unit:t.duration_unit}:i),(t.barrier_count>0||-1!==t.form_components.indexOf("last_digit"))&&!(0,n.isAccumulatorContract)(e)&&!(0,n.isTurbosContract)(e)&&{barrier:t.barrier||t.barrier_1||t.last_digit}),2===t.barrier_count&&!(0,n.isAccumulatorContract)(e)&&{barrier2:t.barrier_2}),(0,n.isTurbosContract)(e)&&{payout_per_point:t.payout_per_point||t.last_digit}),{},{limit_order:r},o),s)}},"./src/Stores/Modules/Trading/Helpers/start-date.ts":(t,e,r)=>{r.d(e,{Y:()=>a});var n=r("./src/_common/base/server_time.ts"),o=r("@deriv/shared"),i=function(t,e,r){var n=(0,o.toMoment)(r);return e&&n.minute(0).second(0),t.isBefore(n)&&n.unix()!==t.unix()},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.toMoment)(n.A.get()),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.toMoment)(n.A.get()),a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(i(e,a,n.A.get())||i(e,a,r)||t.length&&!t.find((function(t){return e.isBetween(t.open,t.close,a?"hour":null,"[]")})))}},"./src/Stores/Providers/modules-providers.tsx":(t,e,r)=>{r.d(e,{A:()=>s});var n=r("react"),o=r.n(n),i=r("../stores/src/storeProvider.tsx"),a=r("./src/Stores/useModulesStores.tsx");const s=function(t){var e=t.children,r=t.store;return o().createElement(i.A,{store:r},o().createElement(a.w,null,e))}},"./src/Stores/useModulesStores.tsx":(t,e,r)=>{r.d(e,{q:()=>c,w:()=>s});var n=r("react"),o=r.n(n),i=r("../stores/src/useStore.ts"),a=o().createContext(null),s=function(t){var e=t.children,r=(0,i.A)().modules;return o().createElement(a.Provider,{value:r},e)},c=function(){var t=o().useContext(a);if(!t)throw new Error("useModulesStore must be used within ModulesStoreProvider");return t}},"./src/Stores/useTraderStores.tsx":(t,e,r)=>{r.d(e,{P:()=>c,n:()=>s});var n=r("react"),o=r.n(n),i=r("../stores/src/useStore.ts"),a=o().createContext(null),s=function(t){var e=t.children,r=(0,i.A)().modules;return o().createElement(a.Provider,{value:null==r?void 0:r.trade},e)},c=function(){var t=o().useContext(a);if(!t)throw new Error("useTraderStore must be used within TraderStoreProvider");return t}},"./src/_common/base/server_time.ts":(t,e,r)=>{r.d(e,{A:()=>s});var n,o,i,a=r("../../node_modules/@deriv-com/utils/dist/deriv-utils.js");const s=(o=!1,i=a.N5.createPromise(),{init:function(t){var e;o||(n=t,null===(e=i.resolve)||void 0===e||e.call(i,n.server_time),o=!0)},get:function(){return o&&n.server_time?n.server_time.clone():void 0},timePromise:function(){return o?Promise.resolve(n.server_time):i.promise}})},"./src/trader-providers.tsx":(t,e,r)=>{r.d(e,{A:()=>s});var n=r("react"),o=r.n(n),i=r("../stores/src/storeProvider.tsx"),a=r("./src/Stores/useTraderStores.tsx");const s=function(t){var e=t.children,r=t.store;return o().createElement(i.A,{store:r},o().createElement(a.n,null,e))}},"../utils/src/index.ts":(t,e,r)=>{r.d(e,{Lg:()=>o,xL:()=>n});var n=function(t){try{return JSON.parse(t)}catch(e){return t}},o=function(t){var e=localStorage.getItem(t);return e?n(e):null};r("../../node_modules/lodash.groupby/index.js"),r("../../node_modules/lodash.pickby/index.js"),r("../../node_modules/moment/moment.js"),r("../../node_modules/dayjs/dayjs.min.js"),r("../../node_modules/bowser/es5.js");var i=r("@deriv-com/analytics");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="suspendedYield",_="executing",v="completed",m={};function b(){}function g(){}function w(){}var S={};f(S,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(D([])));O&&O!==r&&n.call(O,c)&&(S=O);var T=w.prototype=b.prototype=Object.create(S);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,s,c){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=d;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=_;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return g.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},k(x.prototype),f(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),f(T,l,"Generator"),f(T,c,(function(){return this})),f(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function c(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,s,"next",t)}function s(t){c(i,n,o,a,s,"throw",t)}a(void 0)}))}}const l=function(){var t=u(s().mark((function t(e,r){var n,o,a,c,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!1,void 0===(null===(n=window)||void 0===n?void 0:n.GrowthbookFeatures)&&(window.GrowthbookFeatures={}),void 0===window.GrowthbookFeatures[e]){t.next=4;break}return t.abrupt("return",window.GrowthbookFeatures[e]);case 4:return t.next=6,new Promise((function(t){var e=Date.now(),r=function(){var n=u(s().mark((function n(){var o,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Date.now()-e>=1e4)){n.next=3;break}return t(!1),n.abrupt("return");case 3:if(void 0===i.Analytics){n.next=14;break}if(void 0===(null===(o=i.Analytics.getInstances())||void 0===o?void 0:o.ab)){n.next=8;break}t(!0),n.next=12;break;case 8:return n.next=10,null===i.Analytics||void 0===i.Analytics?void 0:i.Analytics.getGrowthbookStatus();case 10:null!=(a=n.sent)&&a.isLoaded?t(!0):setTimeout(r,50);case 12:n.next=15;break;case 14:setTimeout(r,50);case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();r()}));case 6:if(a=t.sent,!(i.Analytics&&null!==i.Analytics&&void 0!==i.Analytics&&i.Analytics.getGrowthbookStatus&&a)){t.next=12;break}return t.next=10,null===i.Analytics||void 0===i.Analytics?void 0:i.Analytics.getGrowthbookStatus();case 10:(l=t.sent).isLoaded&&null!==(c=l.status)&&void 0!==c&&c.success&&(o=null===i.Analytics||void 0===i.Analytics?void 0:i.Analytics.getFeatureValue(e,!!r));case 12:return window.GrowthbookFeatures[e]=o,t.abrupt("return",o);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",y="suspendedYield",_="executing",v="completed",m={};function b(){}function g(){}function w(){}var S={};u(S,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(D([])));O&&O!==r&&n.call(O,a)&&(S=O);var T=w.prototype=b.prototype=Object.create(S);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,a,s){var c=p(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==f(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===_)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=A(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=_;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return g.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},k(x.prototype),u(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),u(T,c,"Generator"),u(T,a,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function y(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,s,"next",t)}function s(t){y(i,n,o,a,s,"throw",t)}a(void 0)}))}}var v,m,b,g,w,S,E={isFreshChat:(S=_(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l("enable_freshworks_live_chat"));case 1:case"end":return t.stop()}}),t)}))),function(){return S.apply(this,arguments)}),isIntercom:(w=_(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l("enable_intercom"));case 1:case"end":return t.stop()}}),t)}))),function(){return w.apply(this,arguments)}),getFlags:(g=_(d().mark((function t(){var e,r,n,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([E.isFreshChat(),E.isIntercom()]);case 3:return e=t.sent,r=p(e,2),n=r[0],o=r[1],t.abrupt("return",{isFreshChat:n,isIntercom:o});case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{isFreshChat:!1,isIntercom:!1});case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),function(){return g.apply(this,arguments)}),open:(b=_(d().mark((function t(){var e,r,n,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.isFreshChat();case 2:return e=t.sent,t.next=5,E.isIntercom();case 5:r=t.sent,e?null===(n=window.fcWidget)||void 0===n||n.open():r?window.Intercom("show"):null===(o=window.LiveChatWidget)||void 0===o||o.call("maximize");case 7:case"end":return t.stop()}}),t)}))),function(){return b.apply(this,arguments)}),clear:(m=_(d().mark((function t(){var e,r,n,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.getFlags();case 2:e=t.sent,r=e.isFreshChat,n=e.isIntercom,r?null===(o=window.fcWidget)||void 0===o||o.user.clear():n&&window.Intercom&&(window.Intercom("shutdown"),window.DerivInterCom.initialize({hideLauncher:!0,token:null}));case 6:case"end":return t.stop()}}),t)}))),function(){return m.apply(this,arguments)}),close:(v=_(d().mark((function t(){var e,r,n,o,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.getFlags();case 2:e=t.sent,r=e.isFreshChat,n=e.isIntercom,r?null===(o=window.fcWidget)||void 0===o||o.close():n?window.Intercom("hide"):null===(i=window.LiveChatWidget)||void 0===i||i.call("hide");case 6:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)})}}}]);