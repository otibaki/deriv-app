/*! For license information please see appstore.modal_cfd_cfd-password-modal.3bc4bdf30fb243b0edde.js.LICENSE.txt */
(self.webpackChunk_deriv_appstore=self.webpackChunk_deriv_appstore||[]).push([[308],{7287:(e,t,r)=>{var a,o,n,s;function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n,s,l=[],i=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{if(!i&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}e=r.nmd(e),self,s=function(e,t,a,o,n){return function(){"use strict";var s={"../../../node_modules/object-assign/index.js":function(e){var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var n,s,l=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var c in n=Object(arguments[i]))r.call(n,c)&&(l[c]=n[c]);if(t){s=t(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(l[s[d]]=n[s[d]])}}return l}},"../../../node_modules/react/cjs/react-jsx-runtime.production.min.js":function(e,t,r){r("../../../node_modules/object-assign/index.js");var a=r("react"),o=60103;if("function"==typeof Symbol&&Symbol.for){var n=Symbol.for;o=n("react.element"),n("react.fragment")}var s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,n={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,a)&&!i.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:o,type:e,key:c,ref:d,props:n,_owner:s.current}}t.jsx=c,t.jsxs=c},"../../../node_modules/react/jsx-runtime.js":function(e,t,r){e.exports=r("../../../node_modules/react/cjs/react-jsx-runtime.production.min.js")},"@deriv-com/translations":function(t){t.exports=e},"@deriv/components":function(e){e.exports=t},"@deriv/shared":function(e){e.exports=a},"@deriv/utils":function(e){e.exports=o},react:function(e){e.exports=n},"../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js":function(e,t,a){a.d(t,{Y:function(){return _}});var o=a("react"),n=("undefined"==typeof globalThis?"undefined":c(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":c(window))<"u"?window:(void 0===r.g?"undefined":c(r.g))<"u"?r.g:("undefined"==typeof self?"undefined":c(self))<"u"?self:{},s="object"==c(n)&&n&&n.Object===Object&&n,i="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self;s||i||Function("return this")();var d=("undefined"==typeof window?"undefined":c(window))<"u"?o.useLayoutEffect:o.useEffect,u=("undefined"==typeof window?"undefined":c(window))>"u";function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.defaultValue,a=void 0!==r&&r,n=t.initializeWithValue,s=void 0===n||n,i=function(e){return u?a:window.matchMedia(e).matches},c=l((0,o.useState)((function(){return s?i(e):a})),2),m=c[0],_=c[1];function f(){_(i(e))}return d((function(){var t=window.matchMedia(e);return f(),t.addListener?t.addListener(f):t.addEventListener("change",f),function(){t.removeListener?t.removeListener(f):t.removeEventListener("change",f)}}),[e]),m}var _=function(){return{isDesktop:m("(min-width: 1280px)"),isMobile:m("(max-width: 600px)"),isTablet:m("(min-width: 601px) and (max-width: 1279px)"),isTabletPortrait:m("(min-width: 601px) and (max-width: 1279px) and (orientation: portrait)"),isMobileOrTabletLandscape:m("(max-width: 1279px) and (orientation: landscape)")}}}},i={};function d(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return s[e](r,r.exports,d),r.exports}d.d=function(e,t){for(var r in t)d.o(t,r)&&!d.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var u={};d.d(u,{default:function(){return v}});var m=d("@deriv-com/translations"),_=d("@deriv/components"),f=d("@deriv/shared"),p=d("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),g=d("@deriv/utils"),b=d("../../../node_modules/react/jsx-runtime.js"),v=function(e){var t=e.identifier_title,r=e.is_modal_when_mobile,a=void 0!==r&&r,o=e.is_open,n=e.has_live_chat,s=void 0!==n&&n,l=e.onClickSendEmail,i=e.onClose,c=(0,p.Y)().isDesktop,d=(0,m.useTranslations)().localize,u=s?(0,b.jsx)(m.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[(0,b.jsx)("span",{className:"send-email-template__footer-live-chat",onClick:function(){i(),g.Chat.open()},children:(0,b.jsx)(_.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:d("Live chat"),zIndex:"9999"})},0)]}):null,v=(0,b.jsx)(_.SendEmailTemplate,{className:"sent-email",subtitle:function(){var e="";switch(t){case f.CFD_PLATFORMS.DXTRADE:e=(0,b.jsx)(m.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[(0,b.jsx)("span",{className:"send-email-template__subtitle-platform"},0)],values:{platform_name_dxtrade:(0,f.getPlatformSettings)("dxtrade").name}});break;case f.CFD_PLATFORMS.MT5:e=d("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":e=d("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:t});break;case"Change_Email":e=d("Check your email and click the link in the email to proceed.");break;default:e=d("Please click on the link in the email to reset your password.")}return e}(),title:d("We’ve sent you an email"),lbl_no_receive:d("Didn't receive the email?"),txt_resend:d("Resend email"),txt_resend_in:d("Resend email in"),onClickSendEmail:l,live_chat:u,children:[{key:"email_spam",icon:"IcEmailSpam",content:(0,m.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,m.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,m.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,m.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((function(e){return(0,b.jsxs)("div",{className:"sent-email__content",children:[(0,b.jsx)(_.Icon,{icon:e.icon,size:32}),(0,b.jsx)(_.Text,{size:"xxs",as:"p",children:e.content})]},e.key)}))});return c||a?(0,b.jsx)(_.Modal,{className:"sent-email__modal",is_open:o,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:i,width:"440px",children:(0,b.jsx)(_.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:c,height_offset:"80px",children:(0,b.jsxs)(_.Modal.Body,{children:[(0,b.jsx)("div",{onClick:i,className:"send-email-template__close","data-testid":"dt_send_email_template_close",children:(0,b.jsx)(_.Icon,{icon:"IcCross"})}),v]})})}):(0,b.jsx)(_.MobileDialog,{portal_element_id:"modal_root",title:d("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:o,onClose:i,has_content_scroll:!0,children:v})};return u.default}()},"object"==c(t)&&"object"==c(e)?e.exports=s(r(1005),r(3877),r(6464),r(2086),r(9155)):(o=[r(1005),r(3877),r(6464),r(2086),r(9155)],void 0===(n="function"==typeof(a=s)?a.apply(t,o):a)||(e.exports=n))},8615:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(9155),o=r.n(a),n=r(992),s=r.n(n),l=r(3877),i=r(2641);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c.apply(null,arguments)}const d=function(e){var t=e.classNameMessage,r=void 0===t?"":t,a=e.has_cancel,n=void 0!==a&&a,d=e.has_submit,u=void 0===d||d,m=e.icon,_=e.message,f=e.onCancel,p=e.onSubmit,g=e.heading,b=e.icon_size,v=void 0===b?"large":b,y=e.text_submit,h=e.text_cancel,w=e.is_open,E=e.toggleModal,x=e.title,j=e.has_close_icon,M=e.width,P=void 0===M?"":M,T=e.is_medium_button;return o().createElement(l.Modal,{className:"cfd-success-dialog",is_open:w,toggleModal:E,has_close_icon:j,small:!x,title:x,width:P},o().createElement(l.Modal.Body,null,o().createElement("div",{className:s()("success-change__icon-area",{"success-change__icon-area--large":"large"===v,"success-change__icon-area--xlarge":"xlarge"===v}),"data-testid":"dt_cfd_success_modal_icon_wrapper"},m,o().createElement(l.Icon,{className:"bottom-right-overlay",icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})),g?o().createElement(o().Fragment,null,g):o().createElement(l.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},o().createElement(i.Localize,{i18n_default_text:"Success!"})),o().isValidElement(_)&&_,!o().isValidElement(_)&&o().createElement("p",{className:r},_)),o().createElement(l.Modal.Footer,null,n&&f&&o().createElement(l.Button,c({onClick:f,has_effect:!0,text:h||(0,i.localize)("Maybe later"),secondary:!0},T?{medium:!0}:{large:!0})),u&&p&&o().createElement(l.Button,c({has_effect:!0,onClick:p,text:y,primary:!0},T?{medium:!0}:{large:!0}))))}},7498:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>X});var a=r(9155),o=r.n(a),n=r(2707),s=r(6991),l=r(5221),i=r(7287),c=r.n(i),d=r(3877),u=r(6464),m=r(5299),_=r(4530),f=r(2641),p=r(9621);const g=(0,m.observer)((function(e){var t=e.platform,r=(0,_.A)().modules.cfd,a=r.account_title,n=r.account_type,s=function(){switch(t){case p.$_.CTRADER:case p.$_.DXTRADE:return n.category===p.XJ.REAL?"Real":"";default:return a}};return o().createElement(d.Text,{size:"xs",className:"dc-modal__container_cfd-password-modal__account-title"},t===p.$_.MT5?o().createElement(f.Localize,{i18n_default_text:"Enter your {{platform}} password to add an {{platform}} {{account}} account.",values:{platform:(0,u.getCFDPlatformNames)(t),account:s()}}):o().createElement(f.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} account.",values:{platform:(0,u.getCFDPlatformLabel)(t),account:s()}}))}));var b=r(8615),v=r(568),y=r(9188),h=r(992),w=r.n(h);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const P=(0,m.observer)((function(e){var t=e.icon,r=e.eligible_account_to_migrate,a=e.jurisdiction_market_name,n=e.closePopupModal,s=(0,_.A)().ui.is_mobile,l=(0,u.getCFDPlatformNames)(u.CFD_PLATFORMS.MT5),i=s?"xxs":"xs",c=s?"xxxs":"xxs",m=function(){return a.length>1?{type_1:a[0],type_2:a[1]}:{type_1:a[0]}};return o().createElement("div",{className:"cfd-success-dialog-migration__modal-content"},o().createElement(d.Modal.Body,{className:w()("cfd-success-dialog-migration__body")},o().createElement("div",{className:"cfd-success-dialog-migration__icon-area"},t&&o().createElement(d.Icon,{icon:t,size:128})),o().createElement("div",null,o().createElement(d.Text,{as:"h2",weight:"bold",className:"cfd-success-dialog-migration__title"},o().createElement(f.Localize,{i18n_default_text:"Upgrade complete"})),o().createElement("div",{className:"cfd-success-dialog-migration__content-wrapper"},o().createElement(d.Text,{size:i,as:"p",align:"center"},a.length>1?o().createElement(f.Localize,{i18n_default_text:"Start trading with your new <0>{{platform}} {{type_1}}</0> and <0>{{type_2}} {{eligible_account_to_migrate}}</0> accounts.",values:j({platform:l,eligible_account_to_migrate:r},m()),components:[o().createElement("strong",{key:0})]}):o().createElement(f.Localize,{i18n_default_text:"Start trading with your new <0>{{platform}} {{type_1}} {{eligible_account_to_migrate}}</0> account.",values:j({platform:l,eligible_account_to_migrate:r},m()),components:[o().createElement("strong",{key:0})]})),o().createElement("div",{className:"cfd-success-dialog-migration__inline-msg"},o().createElement(d.InlineMessage,{type:"information",size:"sm",title:o().createElement(f.Localize,{i18n_default_text:"Important: Your <0>{{platform}} {{existing_account}}</0> account.",values:{platform:l,existing_account:(0,u.getFormattedJurisdictionCode)(u.Jurisdiction.SVG)},components:[o().createElement("strong",{key:0})]}),message:o().createElement(d.Text,{as:"ul",size:c,className:"cfd-success-dialog-migration__body-bullets--list"},o().createElement("li",null,o().createElement(f.Localize,{i18n_default_text:"You can manage your existing positions, but you can't start a new trade."})),o().createElement("li",null,o().createElement(f.Localize,{i18n_default_text:"We'll close accounts with no open positions after 60 days."})))}))))),o().createElement(d.Modal.Footer,{has_separator:!0,className:"cfd-success-dialog-migration-footer"},o().createElement(d.Button,{has_effect:!0,onClick:n,primary:!0,large:!0},o().createElement(f.Localize,{i18n_default_text:"OK"}))))})),T=(0,m.observer)((function(e){var t,r=e.is_open,a=e.closeModal,n=(0,_.A)().ui,s=n.is_mobile,l=n.setMT5MigrationModalEnabled,i=(0,y.E)(),c=i.migrated_mt5_accounts,m=i.setIsFromMt5MigrationModal,f=!!c.length,p=(0,v.j5)(null===(t=c.map((function(e){var t,r;return null===(t=Object.values(null!==(r=null==e?void 0:e.to_account)&&void 0!==r?r:{}))||void 0===t?void 0:t[0]})))||void 0===t?void 0:t[0]),g=c.map((function(e){var t,r;return(0,u.getFormattedJurisdictionMarketTypes)(null===(t=Object.keys(null!==(r=null==e?void 0:e.to_account)&&void 0!==r?r:{}))||void 0===t?void 0:t[0])})),b=function(){m(!1),l(!1),a()},h=function(){if(f){var e,t,r=(null===(e=Object.values(null===(t=c[0])||void 0===t?void 0:t.to_account))||void 0===e?void 0:e[0])||"";if(1===(null==c?void 0:c.length))switch(r){case u.Jurisdiction.BVI:return"IcMt5Bvi";case u.Jurisdiction.VANUATU:return"IcMt5Vanuatu";default:return""}else switch(r){case u.Jurisdiction.BVI:return"IcMt5StandardFinancialBvi";case u.Jurisdiction.VANUATU:return"IcMt5StandardFinancialVanuatu";default:return""}}},w=function(){return o().createElement(P,{closePopupModal:b,icon:h(),eligible_account_to_migrate:p,jurisdiction_market_name:g})};return s?o().createElement(d.PageOverlay,{is_open:r,header_classname:"cfd-success-dialog-migration",portal_id:"deriv_app",header:" ",onClickClose:b},o().createElement(w,null)):o().createElement(d.Modal,{className:"cfd-success-dialog-migration",is_open:r,toggleModal:b,has_close_icon:!0,title:" ",width:"58.8rem",should_header_stick_body:!1},o().createElement(w,null))}));function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e,t,r){return(t=function(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n,s,l=[],i=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{if(!i&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var z=(0,u.makeLazyLoader)((function(){return(0,u.moduleLoader)((function(){return r.e(405).then(r.bind(r,405))}))}),(function(){return o().createElement("div",null)}))(),D=(0,u.makeLazyLoader)((function(){return(0,u.moduleLoader)((function(){return r.e(884).then(r.bind(r,1884))}))}),(function(){return o().createElement("div",null)}))(),N=(0,u.makeLazyLoader)((function(){return(0,u.moduleLoader)((function(){return Promise.all([r.e(886),r.e(222)]).then(r.bind(r,7222))}))}),(function(){return o().createElement("div",null)}))(),F=(0,u.makeLazyLoader)((function(){return(0,u.moduleLoader)((function(){return Promise.all([r.e(510),r.e(963)]).then(r.bind(r,9963))}))}),(function(){return o().createElement("div",null)}))(),A=(0,u.makeLazyLoader)((function(){return(0,u.moduleLoader)((function(){return r.e(206).then(r.bind(r,7206))}))}),(function(){return o().createElement("div",null)}))(),R=(0,u.makeLazyLoader)((function(){return(0,u.moduleLoader)((function(){return r.e(336).then(r.bind(r,3336))}))}),(function(){return o().createElement("div",null)}))(),I=function(e){var t=e.should_set_trading_password,r=e.is_password_reset_error,a=e.platform,n=(0,l.Y)().isDesktop,s=n?"span":"p",i=n?{}:{padding:"2rem"};if(a===p.$_.MT5&&!r){var c=(0,u.getCFDPlatformNames)(a);return o().createElement(d.Text,{as:s,line_height:"m",weight:"bold",size:n?"s":"xs",align:"center"},t?o().createElement(f.Localize,{i18n_default_text:"Create an {{platform_name}} account",values:{platform_name:c}}):o().createElement(f.Localize,{i18n_default_text:"Add an {{platform_name}} account",values:{platform_name:c}}))}return o().createElement(d.Text,{styles:i,as:s,line_height:"m",weight:"bold",size:"s",align:"center"},!t&&!r&&o().createElement(f.Localize,{i18n_default_text:"Enter your {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(a)}}),r&&o().createElement(f.Localize,{i18n_default_text:"Too many attempts"}))},$=function(e,t,r,a){t(e),r().then((function(){a("password",!0)}))},B=function(e){var t=e.password,r=e.platform,a=e.validatePassword,n=e.onSubmit,l=e.error_message;return o().createElement(s.l1,{initialValues:{password:t},enableReinitialize:!0,validate:a,onSubmit:n},(function(e){var t=e.errors,a=e.isSubmitting,n=e.handleBlur,s=e.handleChange,i=e.handleSubmit,c=e.setFieldTouched,m=e.touched,_=e.values,g=e.validateForm;return o().createElement("form",{onSubmit:i},o().createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body cfd-password-modal__create-password-content","data-testid":"dt_create_password"},o().createElement(d.Icon,{icon:"IcDxtradeOnePassword",width:"122",height:"108"}),o().createElement(d.Text,{size:"s",align:"center",weight:"bold",className:"cfd-password-modal__create-password-title"},o().createElement(f.Localize,{i18n_default_text:"Create a {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(r)}})),o().createElement(d.Text,{size:"xs",align:"center",className:"cfd-password-modal__create-password-description"},o().createElement(f.Localize,{i18n_default_text:"You can use this password for all your {{platform}} accounts.",values:{platform:(0,u.getCFDPlatformLabel)(r)}})),o().createElement("div",{className:"input-element"},o().createElement(d.PasswordMeter,{input:_.password,has_error:!(!m.password||!t.password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},(function(){return o().createElement(d.PasswordInput,{autoComplete:"new-password",label:(0,f.localize)("{{platform}} password",{platform:(0,u.getCFDPlatformLabel)(r)}),error:m.password&&t.password||(0===_.password.length?l:""),name:"password",value:_.password,onBlur:n,onChange:function(e){$(e,s,g,c)},data_testId:"dt_".concat(r,"_password")})}))),o().createElement(d.FormSubmitButton,{is_disabled:!_.password||Object.keys(t).length>0,is_loading:a,label:(0,f.localize)("Create {{platform}} password",{platform:(0,u.getCFDPlatformLabel)(r)}),is_center:r!==p.$_.MT5})))}))},V=function(e){var t=e.has_mt5_account,r=e.platform,a=e.error_message,n=e.validatePassword,s=e.submitPassword,l=e.need_tnc,i=o().useRef(),c=C(o().useState(""),2),u=c[0],m=c[1],_=function(e,a){var o;r===p.$_.MT5&&t?(m(e.password),null===(o=i.current)||void 0===o||o.goNextStep()):s(e,a)},f=[{component:r===p.$_.MT5?o().createElement(z,{password:u,platform:r,error_message:a,validatePassword:n,onSubmit:_,need_tnc:l}):o().createElement(B,{password:u,platform:r,error_message:a,validatePassword:n,onSubmit:_,need_tnc:l})},{component:o().createElement(R,{className:"cfd-password-modal__change-password-confirmation",platform:r,onConfirm:function(e,t){return s({password:u},t)},onCancel:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.goPrevStep()}})}];return o().createElement(d.MultiStep,{ref:i,steps:f})},J=(0,m.observer)((function(e){var t=e.closeModal,r=e.error_message,a=e.error_type,n=e.form_error,i=e.has_mt5_account,c=e.onCancel,m=e.onForgotPassword,_=e.platform,b=e.should_set_trading_password,v=e.submitPassword,h=e.validatePassword,w=e.account_type,E=(0,l.Y)().isDesktop,x=(0,y.E)().jurisdiction_selected_shortcode,j=C(o().useState(!1),2),M=j[0],P=j[1],T="svg"!==x&&w.category===p.XJ.REAL&&_===p.$_.MT5,S=o().useMemo((function(){return"PasswordReset"===a?(0,f.localize)("Try later"):(0,f.localize)("Add account")}),[a]),O=!E||!b||"PasswordReset"===a,k=function(e){return e.should_set_trading_password&&"PasswordReset"!==e.error_type?e.isDesktop?null:(0,f.localize)("Cancel"):(0,f.localize)("Forgot password?")}({should_set_trading_password:b,error_type:a,isDesktop:E}),L=function(){if(O)return b?c():m()};return"PasswordReset"===a?o().createElement(o().Fragment,null,o().createElement("div",{className:"cfd-password-reset"},o().createElement("div",{className:"cfd-password-modal__content cfd-password-modal__content--password-reset"},o().createElement(d.Text,{as:"p",line_height:"24",size:"xs"},o().createElement(f.Localize,{i18n_default_text:"Please try again in a minute."}))),o().createElement(s.l1,{onSubmit:t,initialValues:{}},(function(e){var t=e.handleSubmit;return o().createElement("form",{onSubmit:t},o().createElement(d.FormSubmitButton,{has_cancel:O,cancel_label:k,onCancel:L,is_absolute:!E,label:S}))})))):b?o().createElement(V,{platform:_,error_message:r,validatePassword:h,submitPassword:v,has_mt5_account:i,need_tnc:T}):o().createElement(s.l1,{initialValues:{password:""},enableReinitialize:!0,validate:h,onSubmit:v},(function(e){var t=e.errors,s=e.isSubmitting,l=e.handleBlur,i=e.handleChange,c=e.handleSubmit,m=e.setFieldTouched,v=e.touched,y=e.values,h=e.validateForm,x=e.isValid;return o().createElement("form",{onSubmit:c},o().createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body"},o().createElement(g,{platform:_}),o().createElement("div",{className:"input-element"},o().createElement(d.PasswordInput,{autoComplete:"new-password",label:(0,f.localize)("{{platform}} password",{platform:(0,u.getCFDPlatformLabel)(_)}),error:v.password&&t.password||(0===y.password.length?r:""),name:"password",value:y.password,onBlur:l,onChange:function(e){$(e,i,h,m)},data_testId:"dt_".concat(_,"_password")})),"PasswordError"===a&&o().createElement(d.Text,{size:"xs",as:"p",className:"dc-modal__container_mt5-password-modal__hint"},o().createElement(f.Localize,{i18n_default_text:"Hint: You may have entered your Deriv password, which is different from your {{platform}} password.",values:{platform:(0,u.getCFDPlatformLabel)(_)}})),w.category===p.XJ.REAL&&_===p.$_.MT5&&o().createElement(D,{className:"cfd-password-modal-tnc--bottom",platform:_,checked:M,onCheck:function(){return P((function(e){return!e}))},need_tnc:T})),o().createElement(d.FormSubmitButton,{is_disabled:!y.password||!x||T&&!M,has_cancel:O,cancel_label:k,onCancel:L,is_absolute:!E,is_loading:s,label:S,is_center:b,form_error:n}))}))}));const X=(0,m.observer)((function(e){var t=e.form_error,r=e.platform,a=(0,l.Y)(),s=a.isDesktop,i=a.isMobileOrTabletLandscape,m=!s&&!i,g=(0,_.A)(),h=g.client,E=g.traders_hub,x=g.ui,j=h.email,M=h.account_status,P=h.is_logged_in,S=h.is_populating_mt5_account_list,L=h.is_dxtrade_allowed,z=h.mt5_login_list,D=h.updateAccountStatus,R=h.updateMT5Status,$=E.show_eu_related_content,B=E.is_eu_user,V=E.toggleAccountTransferModal,X=x.is_mt5_migration_modal_enabled,Y=x.setMT5MigrationModalEnabled,U=x.is_mt5_migration_modal_open,W=(0,y.E)(),q=W.account_type,G=W.disableCFDPasswordModal,H=W.error_message,K=W.error_type,Q=W.getAccountStatus,Z=W.has_cfd_error,ee=W.is_cfd_success_dialog_enabled,te=W.is_cfd_password_modal_enabled,re=W.setError,ae=W.setCFDSuccessDialog,oe=W.submitMt5Password,ne=W.submitCFDPassword,se=(W.new_account_response,W.product),le=W.setMigratedMT5Accounts,ie=W.is_mt5_password_changed_modal_visible,ce=W.is_mt5_password_invalid_format_modal_visible,de=W.setIsMt5PasswordInvalidFormatModalVisible,ue=W.is_sent_email_modal_enabled,me=W.setSentEmailModalStatus,_e=((0,n.useHistory)(),C(o().useState(!0),2)),fe=_e[0],pe=_e[1],ge=Boolean(null==z?void 0:z.length),be=Array.isArray(null==M?void 0:M.status)&&M.status.includes(r===p.$_.MT5?"mt5_password_not_set":"dxtrade_password_not_set"),ve="PasswordError"===K,ye="PasswordReset"===K,he="InvalidTradingPlatformPasswordFormat"===K||"IncorrectMT5PasswordFormat"===K,we=C(o().useState(""),2),Ee=we[0],xe=we[1];o().useEffect((function(){var e;return he&&(e=setTimeout((function(){de(!0)}),500)),function(){return clearTimeout(e)}}),[he,de]),o().useEffect((function(){P&&(R(),D())}),[]);var je=function(e){var t,a={},o=r===p.$_.MT5&&be?16:25;return(0,u.validLength)(e.password,{min:8,max:o})?(0,u.validPassword)(e.password)?r===p.$_.MT5&&be&&!(0,u.validMT5Password)(e.password)&&(a.password=(0,f.localize)("Please include at least 1 special character such as ( _ @ ? ! / # ) in your password.")):a.password=(0,u.getErrorMessages)().password():a.password=(0,f.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:o}),(null===(t=e.password)||void 0===t?void 0:t.toLowerCase())===j.toLowerCase()&&(a.password=(0,f.localize)("Your password cannot be the same as your email address.")),a},Me=function(){ae(!1),X&&Y(!1),le([]),re(!1)},Pe=function(){R(),Me(),G()},Te=function(){Pe();var e=r===p.$_.MT5?1:2;q.category===p.XJ.REAL?e=Number("".concat(e,"0")):q.category===p.XJ.DEMO&&(e=Number("".concat(e,"1")));var t=r===p.$_.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";u.WS.verifyEmail(j,t,{url_parameters:{redirect_to:e}}),me(!0)},Se=te&&!ee&&(!Z||ve||ye),Oe=!Z&&ee&&fe,ke=Oe&&!X,Ce=Oe&&X&&!S&&!U,Le=ue&&fe,ze=o().useMemo((function(){return!!Se&&(!!be||s)}),[be,Se]),De=o().useMemo((function(){return!(!Se||be||s)}),[s,be,Se]),Ne=o().useMemo((function(){return q.category===p.XJ.REAL?(0,f.localize)("Transfer now"):(0,f.localize)("Continue")}),[q]),Fe=o().useMemo((function(){return B&&"real"===q.category&&r===p.$_.MT5?(0,f.localize)("Maybe later"):""}),[r,q,B]),Ae=o().createElement(J,{closeModal:Pe,error_type:K,error_message:"InvalidTradingPlatformPasswordFormat"!==K?H:"",has_mt5_account:ge,form_error:t,should_set_trading_password:be,validatePassword:je,onForgotPassword:Te,submitPassword:function(e,t){r===p.$_.MT5?oe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),t):(e.platform=r,ne(e,t))},platform:r,is_dxtrade_allowed:L,onCancel:Pe,account_type:q}),Re=o().createElement(d.Modal,{className:w()("cfd-password-modal",{"cfd-password-modal__mt5":r===p.$_.MT5&&be}),has_close_icon:!0,is_open:ze,toggleModal:Pe,should_header_stick_body:!0,renderTitle:function(){return o().createElement(I,{should_set_trading_password:be,is_password_reset_error:ye,platform:r})},onUnmount:function(){return Q(r)},onExited:function(){return pe(!0)},onEntered:function(){return pe(!1)},width:"auto"},Ae),Ie=o().createElement(d.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:ze,onClose:Pe,wrapper_classname:"cfd-password-modal cfd-password-modal__mt5",renderTitle:function(){return o().createElement(I,{should_set_trading_password:be,is_password_reset_error:ye,platform:r})}},Ae),$e=o().createElement(d.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:De,onClose:Pe,wrapper_classname:"cfd-password-modal",renderTitle:function(){return o().createElement(I,{should_set_trading_password:be,has_mt5_account:ge,is_password_reset_error:ye,platform:r})}},Ae),Be=o().createElement(d.Modal,{className:"cfd-password-modal",has_close_icon:!0,is_open:ce,toggleModal:Pe,should_header_stick_body:!0,title:(0,f.localize)("Deriv MT5 latest password requirements"),width:"auto"},o().createElement(N,{error_type:K,error_message:H,form_error:t,should_set_trading_password:be,setNewPasswordValue:xe,validatePassword:je,onForgotPassword:Te,platform:p.$_.MT5,onCancel:Pe})),Ve=o().createElement(d.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:ce,onClose:Pe,wrapper_classname:"cfd-password-modal cfd-password-change__wrapper",header_classname:"cfd-password-change__header",renderTitle:function(){return(0,f.localize)("Deriv MT5 latest password requirements")}},o().createElement(N,{error_type:K,error_message:H,form_error:t,should_set_trading_password:be,setNewPasswordValue:xe,validatePassword:je,onForgotPassword:Te,platform:p.$_.MT5,onCancel:Pe})),Je=m?Ve:Be;return o().createElement(o().Fragment,null,r===p.$_.MT5&&!s&&Ie,Re,$e,o().createElement(b.A,{is_open:ke,toggleModal:Pe,onCancel:Pe,onSubmit:function(){G(),Me(),q.category===p.XJ.REAL&&V()},classNameMessage:"cfd-password-modal__message",message:function(){var e=q.category,t=q.type;if(!e&&!t)return"";var a=e===p.XJ.REAL?(0,f.localize)("real"):(0,f.localize)("demo"),n="";switch(r){case p.$_.MT5:n=(0,v.bN)($,se)[e][t].short_title;break;case p.$_.DXTRADE:n=(0,v.cY)()[e][t].short_title;break;default:n=""}var s=function(){return r===p.$_.DXTRADE||r===p.$_.CTRADER?"":n};return e===p.XJ.REAL?o().createElement(o().Fragment,null,r===p.$_.DXTRADE||r===p.$_.CTRADER?o().createElement(f.Localize,{i18n_default_text:"Congratulations, you have successfully created your <0/>{{category}} {{platform}} {{type}} account. To start trading, <1 />transfer funds <2 />from your Deriv account into this account.",values:{type:s(),platform:(0,u.getCFDPlatformLabel)(r),category:a},components:[o().createElement("br",{key:0}),r===p.$_.CTRADER&&o().createElement("br",{key:1}),r===p.$_.DXTRADE&&o().createElement("br",{key:2})]}):o().createElement(o().Fragment,null,o().createElement(f.Localize,{i18n_default_text:"Your Deriv MT5 {{type}} account is ready. ",values:{type:s()}}),o().createElement(f.Localize,{i18n_default_text:"Enable trading with your first transfer."}))):r===p.$_.MT5?o().createElement(f.Localize,{i18n_default_text:"Your demo {{deriv}} {{type}} account is ready.",values:{type:s(),deriv:"Deriv MT5"}}):o().createElement(f.Localize,{i18n_default_text:"Congratulations, you have successfully created your <0/>{{category}} {{platform}} {{type}} account. ",values:{type:s(),platform:B?"":(0,u.getCFDPlatformLabel)(r),category:a},components:[o().createElement("br",{key:0})]})}(),icon:o().createElement(F,{platform:r,type:q.type,show_eu_related_content:$,product:se}),icon_size:"xlarge",text_submit:Ne,text_cancel:Fe,has_cancel:q.category===p.XJ.REAL,has_close_icon:!1,width:"auto",is_medium_button:!s}),o().createElement(T,{is_open:Ce,closeModal:Pe}),o().createElement(c(),{is_open:Le,identifier_title:"trading_password",onClose:function(){return me(!1)},onClickSendEmail:Te}),he&&Je,ie&&o().createElement(A,{closeModal:Pe,password_value:Ee}))}))}}]);