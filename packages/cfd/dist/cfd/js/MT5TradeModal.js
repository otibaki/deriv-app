/*! For license information please see MT5TradeModal.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@deriv-com/analytics"),require("@deriv/account/src/Configs/get-mt5-status-badge-config"),require("@deriv/components"),require("@deriv/hooks"),require("@deriv/shared"),require("@deriv/stores"),require("@deriv/translations"),require("classnames"),require("react")):"function"==typeof define&&define.amd?define(["@deriv-com/analytics","@deriv/account/src/Configs/get-mt5-status-badge-config","@deriv/components","@deriv/hooks","@deriv/shared","@deriv/stores","@deriv/translations","classnames","react"],t):"object"==typeof exports?exports["@deriv/cfd"]=t(require("@deriv-com/analytics"),require("@deriv/account/src/Configs/get-mt5-status-badge-config"),require("@deriv/components"),require("@deriv/hooks"),require("@deriv/shared"),require("@deriv/stores"),require("@deriv/translations"),require("classnames"),require("react")):e["@deriv/cfd"]=t(e["@deriv-com/analytics"],e["@deriv/account/src/Configs/get-mt5-status-badge-config"],e["@deriv/components"],e["@deriv/hooks"],e["@deriv/shared"],e["@deriv/stores"],e["@deriv/translations"],e.classnames,e.react)}(self,((e,t,a,r,n,o,c,l,i)=>(()=>{"use strict";var s,d={"./src/Containers/mt5-trade-modal.tsx":(e,t,a)=>{a.d(t,{default:()=>O});var r=a("react"),n=a.n(r),o=a("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),c=a("@deriv/components"),l=a("@deriv/stores"),i=a("@deriv/translations"),s=a("./src/Stores/Modules/CFD/Helpers/useCfdStores.tsx"),d=a("@deriv/account/src/Configs/get-mt5-status-badge-config"),m=a.n(d),u=a("@deriv/shared"),_=a("./src/Helpers/cfd-config.ts"),p=a("./src/Assets/svgs/trading-platform/index.tsx"),f=a("@deriv-com/analytics"),h=a("classnames"),v=a.n(h),g=a("@deriv/hooks"),E=a("./src/Assets/banner/migrate-card.svg"),y=a("./src/Assets/banner/migrate-card-dark.svg"),x={migrate_card:E.A,migrate_card_dark:y.A};const b=function(e){var t=e.image,a=x[t];return n().createElement(a,{className:"mt5-migration-banner__image","data-testid":"dt_".concat(t)})};const w=(0,l.observer)((function(e){var t=e.is_trade_modal,a=void 0!==t&&t,r=(0,l.useStore)().ui,o=r.is_dark_mode_on,d=r.toggleMT5MigrationModal,m=r.is_mobile,_=(0,s.E)(),p=_.setMT5MigrationError,h=_.is_mt5_trade_modal_visible,E=_.toggleMT5TradeModal,y=(0,g.useMT5SVGEligibleToMigrate)(),x=y.has_derived_mt5_to_migrate,w=y.has_derived_and_financial_mt5,T=a&&!m,N=o?"migrate_card_dark":"migrate_card";return n().createElement("div",{className:v()("mt5-migration-banner",{"mt5-migration-banner__trade-modal":a})},n().createElement("div",{className:v()("mt5-migration-banner__description",{"mt5-migration-banner__description--trade-modal":T})},n().createElement("div",{className:"mt5-migration-banner__description-text"},w?n().createElement(c.Text,{size:"xs"},n().createElement(i.Localize,{i18n_default_text:"Upgrade your <0>{{account_1}}</0> <1/>and <0>{{account_2}} {{platform}} </0> account(s)",values:{account_1:(0,u.getFormattedJurisdictionMarketTypes)(u.JURISDICTION_MARKET_TYPES.DERIVED),account_2:(0,u.getFormattedJurisdictionMarketTypes)(u.JURISDICTION_MARKET_TYPES.FINANCIAL),platform:(0,u.getCFDPlatformNames)(u.CFD_PLATFORMS.MT5)},components:[n().createElement("strong",{key:0}),T?null:n().createElement("br",{key:1})]})):n().createElement(c.Text,{size:"xs"},n().createElement(i.Localize,{i18n_default_text:"Upgrade your <0/><1>{{account_title}} {{platform}} </1> account(s)",values:{account_title:(0,u.getFormattedJurisdictionMarketTypes)(x?u.JURISDICTION_MARKET_TYPES.DERIVED:u.JURISDICTION_MARKET_TYPES.FINANCIAL),platform:(0,u.getCFDPlatformNames)(u.CFD_PLATFORMS.MT5)},components:[T?null:n().createElement("br",{key:0}),n().createElement("strong",{key:1})]}))),n().createElement(c.Button,{primary_light:!0,onClick:function(){h&&E(),p(""),f.Analytics.trackEvent("ce_upgrade_mt5_banner",{action:"push_cta_upgrade"}),d(!0)}},n().createElement(i.Localize,{i18n_default_text:"Upgrade"}))),n().createElement(b,{image:N}))}));var T=a("./src/Helpers/constants.ts");const N=function(e){var t=e.account_title,a=e.mt5_trade_account,o=(0,T.Je)({mt5_trade_account:a}),l=(0,T.NK)({mt5_trade_account:a});return n().createElement(r.Fragment,null,n().createElement("div",{className:"cfd-trade-modal__download-center-app"},o.map((function(e){return n().createElement("div",{key:e.icon,className:"cfd-trade-modal__download-center-app--option"},n().createElement(c.Icon,{icon:e.icon,size:32}),n().createElement(c.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},e.text),n().createElement("a",{className:"cfd-trade-modal__download-center-app--option-link",type:"button",href:e.href,target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Text,{size:"xxs",weight:"bold",color:"prominent"},e.button_text)))}))),n().createElement(c.Text,{align:"center",as:"div",className:"cfd-trade-modal__download-center-text",size:"xxs",weight:"bold"},(0,i.localize)("Download {{ platform }} on your phone to trade with the {{ platform }} {{ account }} account",{platform:(0,u.getCFDPlatformLabel)(u.CFD_PLATFORMS.MT5),account:t})),n().createElement("div",{className:"cfd-trade-modal__download-center-options"},n().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links"},l.map((function(e){var t=e.href,a=e.icon;return n().createElement("a",{key:a,href:t,target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Icon,{icon:a,width:135,height:40}))}))),n().createElement("div",{className:"cfd-trade-modal__download-center-options--qrcode"},n().createElement("img",{alt:"mt5 download qr",src:(0,u.getUrlBase)("/public/images/common/mt5_download.png"),width:80,height:80}),n().createElement(c.Text,{align:"center",size:"xxs"},(0,i.localize)("Scan the QR code to download {{ platform }}.",{platform:(0,u.getPlatformSettings)(u.CFD_PLATFORMS.MT5).name})))))};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function z(){z=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,a){return e[t]=a}}function d(e,t,a,r){var o=t&&t.prototype instanceof v?t:v,c=Object.create(o.prototype),l=new S(r||[]);return n(c,"_invoke",{value:D(e,a,l)}),c}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",_="suspendedYield",p="executing",f="completed",h={};function v(){}function g(){}function E(){}var y={};s(y,c,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(A([])));b&&b!==a&&r.call(b,c)&&(y=b);var w=E.prototype=v.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function a(n,o,c,l){var i=m(e[n],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==k(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function D(t,a,r){var n=u;return function(o,c){if(n===p)throw Error("Generator is already running");if(n===f){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var l=r.delegate;if(l){var i=C(l,r);if(i){if(i===h)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=m(t,a,r);if("normal"===s.type){if(n=r.done?f:_,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=f,r.method="throw",r.arg=s.arg)}}}function C(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,C(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,h;var c=o.arg;return c?c.done?(a[t.resultName]=c.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,h):c:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,h)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function A(t){if(t||""===t){var a=t[c];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(k(t)+" is not iterable")}return g.prototype=E,n(w,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:g,configurable:!0}),g.displayName=s(E,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,i,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},T(N.prototype),s(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var c=new N(d(e,a,r,n),o);return t.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},T(w),s(w,i,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return l.type="throw",l.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var i=r.call(c,"catchLoc"),s=r.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),I(a),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;I(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:A(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function D(e,t,a,r,n,o,c){try{var l=e[o](c),i=l.value}catch(e){return void a(e)}l.done?t(i):Promise.resolve(i).then(r,n)}const C=function(e){var t=e.mt5_trade_account,a=function(){var e,a=(e=z().mark((function e(){var a,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.location.replace((0,T.uL)({mt5_trade_account:t})),e.next=3,(0,T.h2)({mt5_trade_account:t});case 3:a=e.sent,r=setTimeout((function(){a&&window.location.replace(a)}),4e3),document.addEventListener("visibilitychange",(function(){document.hidden&&clearTimeout(r),window.onblur&&(clearTimeout(r),document.hidden||a&&window.location.replace(a))}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function c(e){D(o,r,n,c,l,"next",e)}function l(e){D(o,r,n,c,l,"throw",e)}c(void 0)}))});return function(){return a.apply(this,arguments)}}();return n().createElement("div",{className:"mt5-download-container"},n().createElement("a",{className:"mt5-download-container--option",href:(0,T.u)({mt5_trade_account:t}),target:"_blank",rel:"noopener noreferrer"},n().createElement("div",{className:"full-row"},n().createElement(c.Icon,{icon:"IcDesktopOutline",size:16}),n().createElement(c.Text,{align:"left",size:"xxs",weight:"bold",className:"title"},n().createElement(i.Localize,{i18n_default_text:"MetaTrader5 web terminal"})),n().createElement(c.Icon,{icon:"IcChevronRight",size:16}))),n().createElement("button",{className:"mt5-download-container--option blue",onClick:a},n().createElement("div",{className:"full-row"},n().createElement(c.Icon,{icon:"IcMobileOutline",size:16}),n().createElement(c.Text,{align:"left",size:"xxs",weight:"bold",className:"title"},n().createElement(i.Localize,{i18n_default_text:"Trade with MT5 mobile app"})),n().createElement(c.Icon,{icon:"IcChevronRightLight",size:16}))),n().createElement(c.Text,{as:"p",size:"xxxxs"},n().createElement(i.Localize,{i18n_default_text:"Note: Don't have the MT5 app? Tap the <0>Trade with MT5 mobile app</0> button to download. Once you have installed the app, return to this screen and hit the same button to log in.",components:[n().createElement("strong",{key:0})]})))};const M=function(e){var t=e.onClick;return n().createElement("div",{className:"cfd-trade-modal__password-box"},n().createElement(c.Button,{className:"cfd-trade-modal__password-action",transparent:!0,onClick:t},n().createElement(i.Localize,{i18n_default_text:"Forgot password?"})))};var I=function(e){var t=e.text,a=e.className;return n().createElement("div",{className:a,"data-testid":"cfd_account_copy_main_div"},n().createElement(c.Clipboard,{text_copy:t,info_message:(0,u.isMobile)()?"":(0,i.localize)("copy"),success_message:(0,i.localize)("copied!"),popoverAlignment:(0,u.isMobile)()?"left":"bottom"}))};const S=function(e){var t=e.value,a=e.is_bold,r=e.is_broker;return n().createElement("div",{className:"cfd-trade-modal__spec-box "},n().createElement(c.Text,{size:"xs",weight:a?"bold":"",className:v()("cfd-trade-modal__spec-text",{"cfd-trade-modal__spec-text-broker":r})},t),n().createElement(I,{text:t,className:"cfd-trade-modal__spec-copy"}))};const A=(0,l.observer)((function(e){var t,a=e.mt5_trade_account,r=e.show_eu_related_content,s=e.onPasswordManager,d=e.toggleModal,f=e.product,h=e.is_demo,v=(0,o.Y)().isDesktop,g=(0,l.useStore)().client.account_status,E=((void 0===g?{}:g).authentication,a.eligible_to_migrate),y=function(){switch(a.product){case u.PRODUCT.STANDARD:return"Standard";case u.PRODUCT.SWAPFREE:return"Swap-Free";case u.PRODUCT.ZEROSPREAD:return"Zero Spread";case u.PRODUCT.STP:return"Financial STP";case u.PRODUCT.GOLD:return"Gold";default:return r?"CFDs":"Financial"}},x=m()(null==a?void 0:a.status),b=x.text,T=x.icon,k=[u.MT5_ACCOUNT_STATUS.MIGRATED_WITH_POSITION,u.MT5_ACCOUNT_STATUS.MIGRATED_WITHOUT_POSITION].includes(null==a?void 0:a.status),z=function(){switch(a.landing_company_short){case u.Jurisdiction.SVG:return"SVG";case u.Jurisdiction.BVI:return"BVI";case u.Jurisdiction.VANUATU:return"Vanuatu";case u.Jurisdiction.MAURITIUS:return"DML";default:return null}};return n().createElement("div",{className:"cfd-trade-modal-container"},n().createElement("div",{className:"cfd-trade-modal"},n().createElement(p.A,{icon:r&&f===u.PRODUCT.FINANCIAL?"CFDs":a.market_type===_.KV.SYNTHETIC?"Standard":a.market_type===_.KV.ALL&&f===u.PRODUCT.SWAPFREE?"SwapFree":a.market_type===_.KV.ALL&&f===u.PRODUCT.ZEROSPREAD?"ZeroSpread":a.market_type===_.KV.FINANCIAL&&f===u.PRODUCT.GOLD?"Gold":"Financial",size:24}),n().createElement("div",{className:"cfd-trade-modal__desc"},n().createElement("div",{className:"cfd-trade-modal__desc-heading"},n().createElement(c.Text,{size:"xs",line_height:"l"},y()),h?n().createElement(c.Text,{size:"xxs",line_height:"l",weight:"bold",className:"cfd-trade-modal__desc-heading--demo"},(0,i.localize)("Demo")):z()&&n().createElement(c.Text,{size:"xxs",line_height:"l",className:"cfd-trade-modal__desc-heading--real"},z())),(null==a?void 0:a.display_login)&&n().createElement(c.Text,{color:"less-prominent",size:"xxxs",line_height:"xxxs"},null==a?void 0:a.display_login)),n().createElement("div",{className:"cfd-trade-modal__acc_status"},(null==a?void 0:a.display_balance)&&n().createElement(c.Text,{size:"xs",color:"profit-success",className:"cfd-trade-modal__desc-balance",weight:"bold"},n().createElement(c.Money,{amount:a.display_balance,currency:a.currency,has_sign:!!a.balance&&a.balance<0,show_currency:!0})),k&&n().createElement(c.StatusBadge,{className:"trading-app-card__acc_status_badge",account_status:a.status,icon:T,text:b}))),n().createElement("div",{className:"cfd-trade-modal__login-specs"},n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(c.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Broker")),n().createElement(S,{is_bold:!0,is_broker:!0,value:null==a?void 0:a.landing_company})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(c.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Server")),n().createElement(S,{is_bold:!0,value:null==a||null===(t=a.server_info)||void 0===t?void 0:t.environment})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(c.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Login ID")),n().createElement(S,{is_bold:!0,value:null==a?void 0:a.display_login})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(c.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Password")),n().createElement("div",{className:"cfd-trade-modal--paragraph"},n().createElement(M,{platform:"mt5",onClick:function(){var e,t,n=(0,u.getCFDAccountKey)({market_type:a.market_type,sub_account_type:a.sub_account_type,platform:_.$_.MT5,shortcode:a.landing_company_short,product:f});s(null==a?void 0:a.login,function(e,t){return t&&(0,i.localize)("MT5 CFDs"),e}(null!==(e=a.market_type)&&void 0!==e?e:"",r),null!==(t=a.account_type)&&void 0!==t?t:"",n,null==a?void 0:a.server),d()}}))),n().createElement("div",{className:"cfd-trade-modal__maintenance"},n().createElement(c.Icon,{icon:"IcAlertWarning",size:v?20:28,className:"cfd-trade-modal__maintenance-icon"}),n().createElement("div",{className:"cfd-trade-modal__maintenance-text"},n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 01:00 GMT every Sunday, and this process may take up to 2 hours to complete. Service may be disrupted during this time."})))),E&&n().createElement(w,{is_trade_modal:!0}),v?n().createElement(N,{account_title:y(),mt5_trade_account:a}):n().createElement(C,{mt5_trade_account:a}))}));var L=a("./src/Helpers/config.tsx");const R=(0,l.observer)((function(e){var t,a,r,s=e.ctrader_derivx_trade_account,d=e.is_eu_user,m=e.onPasswordManager,p=e.toggleModal,f=e.dxtrade_tokens,h=e.ctrader_tokens,v=e.is_demo,g=e.platform,E=e.is_mobile,y=(0,o.Y)().isDesktop,x=(0,l.useStore)(),b=x.ui,w=x.client,N=x.common,k=x.traders_hub,z=x.modules.cfd,D=w.ctrader_accounts_list,C=w.ctrader_trading_platform_available_accounts,I=w.ctrader_total_balance,A=z.setAccountType,R=z.toggleMT5TradeModal,O=z.is_account_being_created,P=z.loadCTraderTokens,F=N.setAppstorePlatform,U=b.openDerivRealAccountNeededModal,j=k.selected_account_type,G=k.no_CR_account,q=k.is_real,$=k.has_any_real_account,V=k.getAccount,J={header:n().createElement(c.Text,{as:"h2",size:"xs",weight:"bold",className:"cfd-trade-modal__expansion-panel--header"},(0,i.localize)("See important notes")),content:n().createElement("ol",{className:"cfd-trade-modal__expansion-panel--ordered-list"},n().createElement(c.Text,{as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},(0,i.localize)("Use your Deriv account email and password to log in to cTrader.")),n().createElement(c.Text,{as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},n().createElement(i.Localize,{i18n_default_text:"Manage up to {{max_count}} Deriv cTrader accounts. While you can convert any of your Deriv cTrader accounts into a strategy account, please take note of the following:",values:{max_count:null===(t=C[0])||void 0===t?void 0:t.max_count}})),n().createElement("ul",{className:"cfd-trade-modal__expansion-panel--unordered-list"},T.AM.map((function(e){return n().createElement(c.Text,{key:e,as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},(0,i.localize)(e))})),n().createElement(c.Text,{as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},n().createElement(i.Localize,{i18n_default_text:"To ensure you can always create and manage strategies with fees, <0>keep at least one account free from being a strategy provider.</0> This way, youâ€™ll always have an account ready for collecting fees, allowing you to have up to four strategies where you may impose fees.",components:[n().createElement("span",{key:0,className:"cfd-trade-modal__expansion-panel--content-bold"})]}))))};return n().createElement("div",{className:"cfd-trade-modal-container"},n().createElement("div",{className:"cfd-trade-modal"},function(e,t,a){return n().createElement(n().Fragment,null,n().createElement(c.Icon,{icon:"IcRebranding".concat(e.charAt(0).toUpperCase()).concat(e.slice(1),"Dashboard"),size:24}),n().createElement("div",{className:"cfd-trade-modal__desc"},n().createElement(c.Text,{size:"xs",line_height:"l",weight:"bold",className:"cfd-trade-modal__desc-heading"},n().createElement(i.Localize,{i18n_default_text:"Deriv {{platform}} <0>{{is_demo}}</0>",values:{platform:(0,T.Ci)(e),is_demo:t?"Demo":""},components:[n().createElement("span",{key:0,className:e===_.$_.CTRADER&&t?"cfd-trade-modal--tag":""})]})),(null==a?void 0:a.display_login)&&e===_.$_.DXTRADE||e===_.$_.CTRADER&&t&&n().createElement(c.Text,{color:"less-prominent",size:"xxxs",line_height:"xxxs"},null==a?void 0:a.display_login)))}(g,v,s),(null==s?void 0:s.display_balance)&&n().createElement("div",{className:"cfd-trade-modal__balance"},g===_.$_.CTRADER&&q&&n().createElement(c.Text,{size:"xxs",align:"right"},(0,i.localize)("Total balance:")),n().createElement(c.Text,{size:"s",color:g!==_.$_.CTRADER?"profit-success":"prominent",className:"cfd-trade-modal__desc-balance",weight:"bold"},n().createElement(c.Money,{amount:q&&g===_.$_.CTRADER?I:s.display_balance,currency:s.currency,has_sign:!!s.balance&&s.balance<0,show_currency:!0})))),n().createElement("div",{className:"cfd-trade-modal__login-specs"},g===_.$_.DXTRADE&&n().createElement(n().Fragment,null,n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(c.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Username")),n().createElement(S,{is_bold:!0,value:null==s?void 0:s.login})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(c.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Password")),n().createElement("div",{className:"cfd-trade-modal--paragraph"},n().createElement(M,{platform:"dxtrade",onClick:function(){var e=(0,u.getCFDAccountKey)({market_type:s.market_type,sub_account_type:s.sub_account_type,platform:_.$_.MT5,shortcode:s.landing_company_short});m(null==s?void 0:s.login,(0,T.LK)(s.market_type,d),s.account_type,e,null==s?void 0:s.server),p()}})))),g===_.$_.CTRADER&&q&&n().createElement(n().Fragment,null,D.filter((function(e){return"real"===e.account_type})).map((function(e){return n().createElement("div",{key:e.login,className:"cfd-trade-modal__list-of-accounts"},n().createElement(c.Text,{size:"xs"},e.login),n().createElement(c.Text,{size:"xs",weight:"bold"},n().createElement(c.Money,{amount:e.balance,currency:e.currency,has_sign:!!e.balance&&e.balance<0,show_currency:!0})))})),(null!==(a=null===(r=C[0])||void 0===r?void 0:r.available_count)&&void 0!==a?a:1)>0&&n().createElement("div",{className:"cfd-trade-modal__get-more-accounts"},n().createElement(c.Button,{onClick:function(){R(),$&&!G||!q?(A({category:j,type:"all"}),F(_.$_.CTRADER),V()):U()},transparent:!0,disabled:!!O},n().createElement(c.Icon,{icon:"IcAppstoreGetMoreAccounts",size:24,className:"cfd-trade-modal__get-more-accounts--icon"}),n().createElement("div",{className:"cfd-trade-modal__get-more-accounts--details"},n().createElement(c.Text,{size:"xxs","line-height":"xxs"},(0,i.localize)("Get another cTrader account"))))),n().createElement("div",{className:"cfd-trade-modal__expansion-panel"},n().createElement(c.ExpansionPanel,{message:J}))),n().createElement("div",{className:"cfd-trade-modal__maintenance"},n().createElement(c.Icon,{icon:"IcAlertWarning",size:y?24:28,className:"cfd-trade-modal__maintenance-icon"}),n().createElement("div",{className:"cfd-trade-modal__maintenance-text"},n().createElement(c.Text,{size:"xxxs",className:"cfd-trade-modal__maintenance-text"},g===_.$_.DXTRADE&&n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. You may experience service disruption during this time."}),g===_.$_.MT5&&n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 01:00 GMT every Sunday, and this process may take up to 2 hours to complete. Service may be disrupted during this time."}),g===_.$_.CTRADER&&n().createElement(i.Localize,{i18n_default_text:"Server maintenance occurs every first Saturday of the month from 7 to 10 GMT time. You may experience service disruption during this time."}))))),n().createElement("div",{className:"cfd-trade-modal__download-center-app"},function(e){var t="";if(e===_.$_.DXTRADE)t=(0,i.localize)("Run Deriv X on your browser");else{if("ctrader"!==e||E)return null;t=(0,i.localize)("Run cTrader on your browser")}return n().createElement("div",{className:"cfd-trade-modal__download-center-app--option"},n().createElement(c.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},t),n().createElement(L.vl,{platform:g,is_demo:v,dxtrade_tokens:f,ctrader_tokens:h,ctraderTokenCall:P}))}(g)),g===_.$_.CTRADER&&n().createElement(n().Fragment,null,!E&&n().createElement(n().Fragment,null,n().createElement("div",{className:"cfd-trade-modal__download-center-app--windows"},n().createElement(c.Icon,{icon:"IcWindowsLogo",size:32}),n().createElement(c.Text,{className:"cfd-trade-modal__download-center-app--windows-item",size:"xs"},(0,i.localize)("cTrader Windows app")),n().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--windows-link",type:"button",href:T.m6,target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Text,{size:"xxs",weight:"bold",color:"prominent"},(0,i.localize)("Download")))),n().createElement("div",{className:"cfd-trade-modal__download-center-app--macos"},n().createElement(c.Icon,{icon:"IcMacosLogo",size:32}),n().createElement(c.Text,{className:"cfd-trade-modal__download-center-app--macos-item",size:"xs"},(0,i.localize)("cTrader MacOS app")),n().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--macos-link",type:"button",href:T.aR,target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Text,{size:"xxs",weight:"bold",color:"prominent"},(0,i.localize)("Download")))))),n().createElement("div",{className:"cfd-trade-modal__download-center-description"},function(){switch(g){case"dxtrade":return n().createElement(c.Text,{align:"center",as:"p",className:"cfd-trade-modal__download-center-text",size:y?"xxs":"xxxs",weight:"bold"},(0,i.localize)("Download Deriv X on your phone to trade with the Deriv X account"));case"ctrader":return n().createElement(c.Text,{align:"center",as:"p",className:"cfd-trade-modal__download-center-text",size:y?"xxs":"xxxs",weight:"bold"},(0,i.localize)("Download cTrader on your phone to trade with the Deriv cTrader account"));default:return""}}()),n().createElement("div",{className:"cfd-trade-modal__download-center-options"},n().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links"},n().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links--apple"},n().createElement("a",{href:(0,L.z6)(g,"ios"),target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Icon,{icon:"IcInstallationApple",width:y?"130":"160",height:40}))),n().createElement("a",{href:(0,L.z6)(g,"android"),target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),g!==_.$_.CTRADER&&n().createElement("a",{href:(0,L.z6)(g,"huawei"),target:"_blank",rel:"noopener noreferrer"},n().createElement(c.Icon,{icon:"IcInstallationHuawei",width:135,height:40}))),y&&n().createElement("div",{className:"cfd-trade-modal__download-center-options--qrcode"},(0,L.CF)(g))))}));const O=(0,l.observer)((function(e){var t=e.is_eu_user,a=e.is_open,r=e.onPasswordManager,d=e.toggleModal,m=e.is_demo,u=(0,o.Y)().isDesktop,_=(0,l.useStore)(),p=_.traders_hub,f=_.common,h=p.show_eu_related_content,v=f.platform,g=(0,s.E)(),E=g.mt5_trade_account,y=g.dxtrade_tokens,x=g.ctrader_tokens,b=g.product,w=function(){return"mt5"===v?n().createElement(A,{mt5_trade_account:E,show_eu_related_content:h,onPasswordManager:r,toggleModal:d,product:b,is_demo:m}):n().createElement(R,{ctrader_derivx_trade_account:E,is_eu_user:t,onPasswordManager:r,toggleModal:d,is_demo:m,platform:v,ctrader_tokens:x,dxtrade_tokens:y,is_mobile:!u})};return n().createElement(n().Suspense,{fallback:n().createElement(c.UILoader,null)},u?n().createElement(c.Modal,{is_open:a,title:(0,i.localize)("Trade"),toggleModal:d,should_header_stick_body:!1,width:"600px",exit_classname:"cfd-modal--custom-exit"},n().createElement(w,null)):n().createElement(c.PageOverlay,{is_open:a,portal_id:"deriv_app",header:"Trade",onClickClose:d,header_classname:"cfd-trade-modal__mobile-title"},n().createElement(c.Div100vhContainer,{className:"cfd-trade-modal__mobile-view-wrapper",height_offset:"80px"},n().createElement(w,null))))}))},"@deriv-com/analytics":t=>{t.exports=e},"@deriv/account/src/Configs/get-mt5-status-badge-config":e=>{e.exports=t},"@deriv/components":e=>{e.exports=a},"@deriv/hooks":e=>{e.exports=r},"@deriv/shared":e=>{e.exports=n},"@deriv/stores":e=>{e.exports=o},"@deriv/translations":e=>{e.exports=c},classnames:e=>{e.exports=l},react:e=>{e.exports=i}},m={};function u(e){var t=m[e];if(void 0!==t)return t.exports;var a=m[e]={exports:{}};return d[e](a,a.exports,u),a.exports}u.m=d,s=[],u.O=(e,t,a,r)=>{if(!t){var n=1/0;for(i=0;i<s.length;i++){for(var[t,a,r]=s[i],o=!0,c=0;c<t.length;c++)(!1&r||n>=r)&&Object.keys(u.O).every((e=>u.O[e](t[c])))?t.splice(c--,1):(o=!1,r<n&&(n=r));if(o){s.splice(i--,1);var l=a();void 0!==l&&(e=l)}}return e}r=r||0;for(var i=s.length;i>0&&s[i-1][2]>r;i--)s[i]=s[i-1];s[i]=[t,a,r]},u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var a in t)u.o(t,a)&&!u.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},u.e=()=>Promise.resolve(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.j="MT5TradeModal",(()=>{var e={MT5TradeModal:0};u.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[o,c,l]=a,i=0;if(o.some((t=>0!==e[t]))){for(r in c)u.o(c,r)&&(u.m[r]=c[r]);if(l)var s=l(u)}for(t&&t(a);i<o.length;i++)n=o[i],u.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return u.O(s)},a=self.webpackChunk_deriv_cfd=self.webpackChunk_deriv_cfd||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var _=u.O(void 0,["internalCFDStoreUsage","utilities","assets","vendors-node_modules_deriv-com_ui_dist_hooks_useDevice_js-node_modules_react-qrcode_lib_qrcode_js"],(()=>u("./src/Containers/mt5-trade-modal.tsx")));return _=(_=u.O(_)).default})()));
//# sourceMappingURL=MT5TradeModal.js.map