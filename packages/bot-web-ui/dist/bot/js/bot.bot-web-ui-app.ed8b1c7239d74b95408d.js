/*! For license information please see bot.bot-web-ui-app.ed8b1c7239d74b95408d.js.LICENSE.txt */
(self.webpackChunk_deriv_bot_web_ui=self.webpackChunk_deriv_bot_web_ui||[]).push([[956],{9822:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ActiveSymbols:()=>a.cJ,ApiHelpers:()=>a.aq,ContractsFor:()=>a.Zp,DBot:()=>n.A,ErrorTypes:()=>o.wU,LogTypes:()=>o.Uk,MessageTypes:()=>o.lA,NetworkMonitor:()=>a.z7,ServerTime:()=>a.Fh,TradingTimes:()=>a.ew,api_base:()=>a.Rk,compareXml:()=>i.hS,config:()=>o.$W,convertStrategyToIsDbot:()=>i.Xz,createError:()=>i.$5,extractBlocksFromXml:()=>i.bB,getContractTypeName:()=>i._l,getSavedWorkspaces:()=>i.EB,handleError:()=>i.H4,importExternal:()=>i.JH,initErrorHandlingListener:()=>i.K3,load:()=>l.Hh,observer:()=>i.PA,onWorkspaceResize:()=>i.Ry,pipe:()=>i.Fs,removeErrorHandlingEventListener:()=>i.Gi,removeExistingWorkspace:()=>i.r7,runGroupedEvents:()=>l.$d,runIrreversibleEvents:()=>l.j6,save:()=>l.UN,saveWorkspaceToRecent:()=>i.dh,save_types:()=>o.ep,scrollWorkspace:()=>l.xw,setColors:()=>i.hd,sortBlockChild:()=>i.Yp,timeSince:()=>i._D,trackAndEmitError:()=>i.AJ,unrecoverable_errors:()=>o.Yd,updateWorkspaceName:()=>l.Wf});var n=r(4220),o=r(4455),a=r(6306),i=r(511),l=r(7811)},69:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var n=r(2641),o=["BTC","ETH","LTC","BCH","UST"],a={lists:{PAYOUTTYPE:[[(0,n.localize)("Stake"),"stake"]],CRYPTO_CURRENCIES:o,DETAILS:[[(0,n.localize)("deal reference id"),"1"],[(0,n.localize)("purchase price"),"2"],[(0,n.localize)("payout"),"3"],[(0,n.localize)("profit"),"4"],[(0,n.localize)("contract type"),"5"],[(0,n.localize)("entry spot time"),"6"],[(0,n.localize)("entry spot price"),"7"],[(0,n.localize)("exit spot time"),"8"],[(0,n.localize)("exit spot price"),"9"],[(0,n.localize)("barrier"),"10"],[(0,n.localize)("result"),"11"]],CHECK_RESULT:[[(0,n.localize)("Win"),"win"],[(0,n.localize)("Loss"),"loss"]],CHECK_DIRECTION:[[(0,n.localize)("Rise"),"rise"],[(0,n.localize)("Fall"),"fall"],[(0,n.localize)("No Change"),""]],BALANCE_TYPE:[[(0,n.localize)("string"),"STR"],[(0,n.localize)("number"),"NUM"]],NOTIFICATION_TYPE:[[(0,n.localize)("green"),"success"],[(0,n.localize)("blue"),"info"],[(0,n.localize)("yellow"),"warn"],[(0,n.localize)("red"),"error"]],NOTIFICATION_SOUND:[[(0,n.localize)("Silent"),"silent"],[(0,n.localize)("Announcement"),"announcement"],[(0,n.localize)("Earned money"),"earned-money"],[(0,n.localize)("Job done"),"job-done"],[(0,n.localize)("Error"),"error"],[(0,n.localize)("Severe error"),"severe-error"]],CURRENCY:["USD","EUR","GBP","AUD"].concat(o)},opposites:{ACCUMULATOR:[{ACCU:(0,n.localize)("Buy")}],MULTIPLIER:[{MULTUP:(0,n.localize)("Up")},{MULTDOWN:(0,n.localize)("Down")}],CALLPUT:[{CALL:(0,n.localize)("Rise")},{PUT:(0,n.localize)("Fall")}],CALLPUTEQUAL:[{CALLE:(0,n.localize)("Rise Equals")},{PUTE:(0,n.localize)("Fall Equals")}],HIGHERLOWER:[{CALL:(0,n.localize)("Higher")},{PUT:(0,n.localize)("Lower")}],TOUCHNOTOUCH:[{ONETOUCH:(0,n.localize)("Touch")},{NOTOUCH:(0,n.localize)("No Touch")}],ENDSINOUT:[{EXPIRYRANGE:(0,n.localize)("Ends Between")},{EXPIRYMISS:(0,n.localize)("Ends Outside")}],STAYSINOUT:[{RANGE:(0,n.localize)("Stays Between")},{UPORDOWN:(0,n.localize)("Goes Outside")}],ASIANS:[{ASIANU:(0,n.localize)("Asian Up")},{ASIAND:(0,n.localize)("Asian Down")}],MATCHESDIFFERS:[{DIGITMATCH:(0,n.localize)("Matches")},{DIGITDIFF:(0,n.localize)("Differs")}],EVENODD:[{DIGITEVEN:(0,n.localize)("Even")},{DIGITODD:(0,n.localize)("Odd")}],OVERUNDER:[{DIGITOVER:(0,n.localize)("Over")},{DIGITUNDER:(0,n.localize)("Under")}],HIGHLOWTICKS:[{TICKHIGH:(0,n.localize)("High Tick")},{TICKLOW:(0,n.localize)("Low Tick")}],RESET:[{RESETCALL:(0,n.localize)("Reset Call")},{RESETPUT:(0,n.localize)("Reset Put")}],RUNS:[{RUNHIGH:(0,n.localize)("Only Ups")},{RUNLOW:(0,n.localize)("Only Downs")}],CALLPUTSPREAD:[{CALLSPREAD:(0,n.localize)("Call Spread")},{PUTSPREAD:(0,n.localize)("Put Spread")}]},BARRIER_TYPES:[["Offset +","+"],["Offset -","-"]],ohlcFields:[[(0,n.localize)("Open"),"open"],[(0,n.localize)("High"),"high"],[(0,n.localize)("Low"),"low"],[(0,n.localize)("Close"),"close"],[(0,n.localize)("Open Time"),"epoch"]],candleIntervals:[[(0,n.localize)("Default"),"default"],[(0,n.localize)("1 minute"),"60"],[(0,n.localize)("2 minutes"),"120"],[(0,n.localize)("3 minutes"),"180"],[(0,n.localize)("5 minutes"),"300"],[(0,n.localize)("10 minutes"),"600"],[(0,n.localize)("15 minutes"),"900"],[(0,n.localize)("30 minutes"),"1800"],[(0,n.localize)("1 hour"),"3600"],[(0,n.localize)("2 hours"),"7200"],[(0,n.localize)("4 hours"),"14400"],[(0,n.localize)("8 hours"),"28800"],[(0,n.localize)("1 day"),"86400"]],mainBlocks:["trade_definition","before_purchase","during_purchase","after_purchase"],mandatoryMainBlocks:["trade_definition","purchase","before_purchase"],procedureDefinitionBlocks:["procedures_defnoreturn","procedures_defreturn"],single_instance_blocks:["trade_definition","before_purchase","during_purchase","after_purchase"],TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING:{callput:["callput","higherlower"],asian:["asians"],digits:["matchesdiffers","evenodd","overunder"]},TRADE_TYPE_CATEGORIES:{multiplier:["multiplier"],callput:["callput","callputequal","higherlower"],touchnotouch:["touchnotouch"],inout:["endsinout","staysinout"],asian:["asians"],digits:["matchesdiffers","evenodd","overunder"],reset:["reset"],callputspread:["callputspread"],highlowticks:["highlowticks"],runs:["runs"],accumulator:["accumulator"]},TRADE_TYPE_CATEGORY_NAMES:{callput:(0,n.localize)("Up/Down"),touchnotouch:(0,n.localize)("Touch/No Touch"),inout:(0,n.localize)("In/Out"),asian:(0,n.localize)("Asians"),digits:(0,n.localize)("Digits"),reset:(0,n.localize)("Reset Call/Reset Put"),callputspread:(0,n.localize)("Call Spread/Put Spread"),highlowticks:(0,n.localize)("High/Low Ticks"),runs:(0,n.localize)("Only Ups/Only Downs"),multiplier:(0,n.localize)("Multipliers"),accumulator:(0,n.localize)("Accumulators")},BARRIER_CATEGORIES:{euro_atm:["callput","callputequal"],euro_non_atm:["endsinout","higherlower","callputspread"],american:["staysinout","touchnotouch","highlowticks","runs","multiplier"],non_financial:["digits","overunder","evenodd","matchesdiffers"],asian:["asians"],reset:["reset"],lookback:["lookback"],accumulator:["accumulator"]},DEFAULT_DURATION_DROPDOWN_OPTIONS:[[(0,n.localize)("Ticks"),"t"],[(0,n.localize)("Seconds"),"s"],[(0,n.localize)("Minutes"),"m"],[(0,n.localize)("Hours"),"h"],[(0,n.localize)("Days"),"d"]],BARRIER_LABELS:[(0,n.localize)("High barrier"),(0,n.localize)("Low barrier")],ABSOLUTE_BARRIER_DROPDOWN_OPTION:[[(0,n.localize)("Absolute"),"absolute"]],NOT_AVAILABLE_DROPDOWN_OPTIONS:[[(0,n.localize)("Not available"),"na"]],NOT_AVAILABLE_DURATIONS:[{display:(0,n.localize)("Not available"),unit:"na",min:0}],BARRIER_TRADE_TYPES:["higherlower","touchnotouch","endsinout","staysinout","callputspread"],PREDICTION_TRADE_TYPES:["matchesdiffers","overunder","highlowticks"],DIGIT_CATEGORIES:["digits","highlowticks"],INDEPEDENT_BLOCKS:["block_holder","tick_analysis","loader","procedures_defreturn","procedures_defnoreturn"],bbResult:[[(0,n.localize)("upper"),"1"],[(0,n.localize)("middle"),"0"],[(0,n.localize)("lower"),"2"]],macdFields:[[(0,n.localize)("Histogram"),"0"],[(0,n.localize)("MACD"),"1"],[(0,n.localize)("Signal"),"2"]],GOOGLE_DRIVE:{SCOPE:"https://www.googleapis.com/auth/drive.file",DISCOVERY_DOCS:"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"},workspaces:{flyoutWorkspacesStartScale:.7,mainWorkspaceStartScale:.9,previewWorkspaceStartScale:.6,indentWorkspace:{x:0,y:60}},strategies:{martingale:{index:0,label:(0,n.localize)("Martingale"),description:(0,n.localize)("The Martingale Strategy is a classic trading technique that has been used for more than a hundred years, popularised by the French mathematician Paul Pierre Levy in the 18th century.")},dalembert:{index:1,label:(0,n.localize)("D'Alembert"),description:(0,n.localize)("The concept of the D’Alembert Strategy is said to be similar to the Martingale Strategy where you will increase your contract size after a loss. With the D’Alembert Strategy, you will also decrease your contract size after a successful trade.")},oscars_grind:{index:2,label:(0,n.localize)("Oscar's Grind"),description:(0,n.localize)("The Oscar's Grind Strategy is a low-risk positive progression strategy that first appeared in 1965. By using this strategy, the size of your contract will increase after successful trades, but remains unchanged after unsuccessful trades.")}},default_file_name:(0,n.localize)("Untitled Bot"),DISABLED_SYMBOLS:["frxGBPNOK","frxUSDNOK","frxUSDNEK","frxUSDSEK"],DISABLED_SUBMARKETS:["energy"],QUICK_STRATEGY:{DISABLED:{SYMBOLS:["1HZ150V","1HZ250V"],SUBMARKETS:["crash_index","non_stable_coin","step_index"],BARRIER_TRADE_TYPES:["higherlower","touchnotouch","endsinout","staysinout","callputspread","accumulator"],PREDICTION_TRADE_TYPES:["highlowticks"]},DEFAULT:{symbol:"1HZ100V",tradetype:"callput",durationtype:"t",size:1,unit:1,prediction:0}}}},4455:(e,t,r)=>{"use strict";r.d(t,{$W:()=>n.$,Uk:()=>o.Uk,Yd:()=>o.Yd,ep:()=>a.e,lA:()=>o.lA,wU:()=>o.wU});var n=r(69),o=r(1951),a=r(6759)},1951:(e,t,r)=>{"use strict";r.d(t,{Uk:()=>i,Yd:()=>n,lA:()=>o,wU:()=>a});var n=["InsufficientBalance","CustomLimitsReached","OfferingsValidationError","InvalidCurrency","ContractBuyValidationError","NotDefaultCurrency","PleaseAuthenticate","FinancialAssessmentRequired","PositiveIntegerExpected","OptionError","IncorrectPayoutDecimals","IncorrectStakeDecimals","NoMFProfessionalClient","AuthorizationRequired","InvalidToken","DailyLossLimitExceeded","InputValidationFailed","ClientUnwelcome","PriceMoved"],o=function(e){return e.ERROR="error",e.NOTIFY="notify",e.SUCCESS="success",e}({}),a=function(e){return e.RECOVERABLE_ERRORS="recoverable_errors",e.UNRECOVERABLE_ERRORS="unrecoverable_errors",e}({}),i=function(e){return e.LOAD_BLOCK="load_block",e.PURCHASE="purchase",e.SELL="sell",e.NOT_OFFERED="not_offered",e.PROFIT="profit",e.LOST="lost",e.WELCOME_BACK="welcome_back",e.WELCOME="welcome",e}({})},6759:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var n=Object.freeze({UNSAVED:"unsaved",LOCAL:"local",GOOGLE_DRIVE:"google drive"})},651:(e,t,r)=>{"use strict";r.d(t,{QY:()=>p,XC:()=>m,iH:()=>d});var n=r(6306),o=r(3129);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",_={};function b(){}function g(){}function E(){}var w={};f(w,l,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,l)&&(w=x);var S=E.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,l,c){var s=p(e[o],e,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(f).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=m;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return g.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:g,configurable:!0}),g.displayName=f(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),f(T.prototype,c,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),f(S,u,"Generator"),f(S,l,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function u(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var f={amount:void 0,basis:"stake",contract_type:"ACCU",currency:void 0,symbol:void 0,growth_rate:void 0,proposal:1,subscribe:1},d=function(){var e,t=(e=s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.is_bot_running){e.next=6;break}return e.next=3,null===n.Rk||void 0===n.Rk||null===(r=n.Rk.api)||void 0===r?void 0:r.send({forget_all:"proposal"});case 3:t.subscription_id_for_accumulators=null,t.is_proposal_requested_for_accumulators=!1,window.Blockly.accumulators_request={};case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,l,"next",e)}function l(e){u(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),p=function(e){var t,r,n,a=null==e?void 0:e.getTopParent(),i=null==a?void 0:a.getChildByType("trade_definition_market"),c=null==i?void 0:i.getFieldValue("SYMBOL_LIST"),s=o.A.instance.client.currency,u=(null==e?void 0:e.getFieldValue("GROWTHRATE_LIST"))||.01,d=(null==e||null===(t=e.childBlocks_)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.getField("NUM"))||void 0===n?void 0:n.getValue())||0,p=l(l({},f),{},{amount:d,currency:s,symbol:c,growth_rate:u});window.Blockly.accumulators_request=p},m=function(e,t){var r=e.amount,n=e.currency,o=e.symbol,a=e.growth_rate,i=e.limit_order.take_profit,c=l(l({},f),{},{amount:r,currency:n,symbol:o,growth_rate:a,subscribe:void 0,limit_order:{take_profit:i}});return null==t?void 0:t.send(c).then((function(e){return e.error?Promise.reject(e.error):e})).catch((function(e){throw e}))}},3129:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(5314),o=r(2829);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(e){function t(e){var r,c,s,u;return d(this,t),(c=this,s=t,s=l(s),r=function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(c,i()?Reflect.construct(s,u||[],l(c).constructor):s.apply(c,u))).is_mobile=e.is_mobile||!1,r.is_dark_mode_on=e.is_dark_mode_on||!1,r.client=e.client,r.dashboard=e.dashboard,r.flyout=e.flyout,r.toolbar=e.toolbar,r.toolbox=e.toolbox,r.save_modal=e.save_modal,r.load_modal=e.load_modal,r.setContractUpdateConfig=e.setContractUpdateConfig,r.toggleStrategyModal=e.toggleStrategyModal,r.handleFileChange=e.handleFileChange,r.setLoading=e.setLoading,(0,n.reaction)((function(){return r.client.loginid}),(function(){return o.R.createNewInstance(r.client.loginid)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),u(t,null,[{key:"setInstance",value:function(e){return this.singleton=new t(e),this.instance}},{key:"instance",get:function(){return this.singleton}}])}(u((function e(){d(this,e),this.handleFileChange=function(){throw Error("handleFileChange has not been implemented.")},this.toggleStrategyModal=function(){throw Error("handleFileChange has not been implemented.")}})));p.singleton=null;const m=p},4220:(e,t,r)=>{"use strict";r.d(t,{A:()=>an});var n=r(4455),o=r(69),a=r(2829),i=r(3191),l=r(6464),c=r(1107),s=r.n(c),u=r(9656),f=r(2872),d=r(1575);function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){return e&&(0===e.length?void 0:e[e.length-1])},y=function(e){return{open:+e.open,high:+e.high,low:+e.low,close:+e.close,epoch:+(e.open_time||e.epoch)}},v=function(e){return e?"candles":"ticks"};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function b(){}function E(){}var w={};s(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=E.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==_(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(_(t)+" is not iterable")}return b.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:b,configurable:!0}),b.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),s(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,l,"next",e)}function l(e){x(a,n,o,i,l,"throw",e)}i(void 0)}))}}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function T(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var L=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.forget=function(){return new Promise((function(e,t){null!==a.R&&void 0!==a.R&&a.R.api?a.R.api.forgetAll("ticks").then((function(){e()})).catch(t):e()}))},this.forgetCandleSubscription=function(){return new Promise((function(e,t){null!==a.R&&void 0!==a.R&&a.R.api?a.R.api.forgetAll("candles").then((function(){e()})).catch(t):e()}))},this.ticks=new u.Map,this.candles=new u.Map,this.tickListeners=new u.Map,this.ohlcListeners=new u.Map,this.subscriptions=new u.Map,this.ticks_history_promise=null,this.active_symbols_promise=null,this.candles_promise=null,this.observe()},t=[{key:"requestPipSizes",value:function(){var e=this;return this.pipSizes?Promise.resolve(this.pipSizes):(this.active_symbols_promise||(this.active_symbols_promise=new Promise((function(t){e.pipSizes=a.R.pip_sizes,t(e.pipSizes)}))),this.active_symbols_promise)}},{key:"request",value:(o=S(g().mark((function e(t){var r=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var o=t.symbol,a=t.granularity,i=v(a);"ticks"===i&&r.ticks.has(o)&&e(r.ticks.get(o)),"candles"===i&&r.candles.hasIn([o,Number(a)])&&e(r.candles.getIn([o,Number(a)])),r.requestStream(w(w({},t),{},{style:i})).then((function(t){e(t)})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"monitor",value:function(e){var t=this;return new Promise((function(r,n){var o=e.symbol,i=e.granularity,l=e.callback,c=v(i),s=(0,f.yk)();t.request(e).then((function(){"ticks"===c?(t.tickListeners=t.tickListeners.setIn([o,s],l),d.P.emit("bot.bot_ready"),a.R.toggleRunButton(!1)):t.ohlcListeners=t.ohlcListeners.setIn([o,Number(i),s],l),r(s)})).catch((function(e){d.P.emit("Error",e),t.ticks_history_promise=null,a.R.toggleRunButton(!1),n(e)}))}))}},{key:"stopMonitor",value:(n=S(g().mark((function e(t){var r,n,o,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.symbol,n=t.granularity,o=t.key,"ticks"===(a=v(n))&&this.tickListeners.hasIn([r,o])&&(this.tickListeners=this.tickListeners.deleteIn([r,o])),"candles"===a&&this.ohlcListeners.hasIn([r,Number(n),o])&&(this.ohlcListeners=this.ohlcListeners.deleteIn([r,Number(n),o])),e.next=6,this.unsubscribeIfEmptyListeners(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unsubscribeIfEmptyListeners",value:(r=S(g().mark((function e(t){var r,n,o,a,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.symbol,n=t.granularity,o=!1,(a=this.tickListeners.get(r))&&!a.size&&(this.tickListeners=this.tickListeners.delete(r),this.ticks=this.ticks.delete(r),o=!0),(i=this.ohlcListeners.getIn([r,Number(n)]))&&!i.size&&(this.ohlcListeners=this.ohlcListeners.deleteIn([r,Number(n)]),this.candles=this.candles.deleteIn([r,Number(n)]),o=!0),!o){e.next=9;break}return e.next=9,this.unsubscribeAllAndSubscribeListeners(r);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"unsubscribeAllAndSubscribeListeners",value:function(e){var t=this.subscriptions.getIn(["ohlc",e]),r=function(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t?Array.from(t.values()):[]);Promise.all(r.map((function(e){return(0,f.um)((function(){return a.R.api.forget(e)}))}))),this.subscriptions=new u.Map}},{key:"updateTicksAndCallListeners",value:function(e,t){var r=this;if(this.ticks.get(e)!==t){this.ticks=this.ticks.set(e,t);var n=this.tickListeners.get(e);n&&n.forEach((function(t){return t(r.ticks.get(e))}))}}},{key:"updateCandlesAndCallListeners",value:function(e,t){var r=this;if(this.ticks.getIn(e)!==t){this.candles=this.candles.setIn(e,t);var n=this.ohlcListeners.getIn(e);n&&n.forEach((function(t){return t(r.candles.getIn(e))}))}}},{key:"observe",value:function(){var e=this;if(a.R.api){var t=a.R.api.onMessage().subscribe((function(t){var r,n,o=t.data;if("tick"===o.msg_type){var a=o.tick,i=a.symbol,l=a.id;e.ticks.has(i)&&(e.subscriptions=e.subscriptions.setIn(["tick",i],l),e.updateTicksAndCallListeners(i,(r=e.ticks.get(i),n=function(e){return{epoch:+e.epoch,quote:+e.quote}}(a),h(r).epoch>=n.epoch?r:[].concat(p(r.slice(1)),[n]))))}if("ohlc"===o.msg_type){var c=o.ohlc,s=c.symbol,u=c.granularity,f=c.id;if(e.candles.hasIn([s,Number(u)])){e.subscriptions=e.subscriptions.setIn(["ohlc",s,Number(u)],f);var d=[s,Number(u)];e.updateCandlesAndCallListeners(d,function(e,t){var r=h(e);if(r.open===t.open&&r.high===t.high&&r.low===t.low&&r.close===t.close&&r.epoch===t.epoch||r.epoch>t.epoch)return e;var n=r.epoch===t.epoch?e.slice(0,-1):e.slice(1);return[].concat(p(n),[t])}(e.candles.getIn(d),y(c)))}}}));a.R.pushSubscription(t)}}},{key:"requestStream",value:function(e){var t,r=this,n=e.style,o=JSON.stringify(e);return"ticks"===n?((null===(t=this.ticks_history_promise)||void 0===t?void 0:t.stringified_options)!==o&&(this.ticks_history_promise={promise:this.requestPipSizes().then((function(){return r.requestTicks(e)})),stringified_options:o}),this.ticks_history_promise.promise):"candles"===n?(this.candles_promise&&this.candles_promise.stringified_options===o||(this.candles_promise={promise:this.requestPipSizes().then((function(){return r.requestTicks(e)})),stringified_options:o}),this.candles_promise.promise):[]}},{key:"requestTicks",value:function(e){var t=this,r=e.symbol,n=e.granularity,o=e.style,i={ticks_history:r,subscribe:1,end:"latest",count:1e3,granularity:n?Number(n):void 0,style:o};return new Promise((function(e,l){a.R.api||e([]),(0,f.um)((function(){return a.R.api.send(i)}),[],a.R).then((function(a){if("ticks"===o){var i=(c=a.history).times.map((function(e,t){return{epoch:+e,quote:+c.prices[t]}}));t.updateTicksAndCallListeners(r,i),e(i)}else{var l=function(e){return e.map((function(e){return y(e)}))}(a.candles);t.updateCandlesAndCallListeners([r,Number(n)],l),e(l)}var c})).catch(l)}))}},{key:"unsubscribeFromTicksService",value:function(){var e=this;return new Promise((function(t,r){e.forget().then((function(){e.forgetCandleSubscription().then((function(){t()})).catch(r)})).catch(r),e.ticks_history_promise=null}))}}],t&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o}(),A=function(){return{observer:new d.A,ticksService:new L,stopped:!1}},N=r(2641),C=r(5911);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){return Number.isFinite(e)&&e>0},j=function(e){return I(e)&&Number.isInteger(e)},z=function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];if(!o)throw(0,C.$)("LoginError",(0,N.localize)("Please login"));return function(e){var t=e.symbol,r=e.contractTypes;if(!t)throw(0,C.$)("OptionError",(0,N.localize)("Underlying market is not selected"));if(!r[0])throw(0,C.$)("OptionError",(0,N.localize)("Contract type is not selected"))}(a),e},R=function(e){return e instanceof Object&&["open","high","low","close"].every((function(t){return I(e[t])}))&&j(e.epoch)},D=function(e){if(!R(e))throw(0,C.$)("CandleExpected",(0,N.localize)("Given candle is not valid"));return e};var B=function(e,t){return e.map((function(e){return t?e[t]:e}))},M=function(e,t,r){return B(e.slice(t>e.length?0:e.length-t,e.length),r)},U=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},F=function(e,t){var r=t.periods,n=t.field;if(e.length<r)throw new Error("Periods longer than data length");return function(e){return e.reduce((function(e,t){return e+t}),0)}(M(e,r,n))/r},G=function(e,t){var r=t.periods,n=t.pipSize,o=void 0===n?2:n;return(0,l.sequence)(e.length-r+1).map((function(n,a){return+F(e.slice(a,a+r),t).toFixed(o)}))},q=function(e,t){var r=t.periods,n=void 0===r?20:r,o=t.field,a=t.stdDevUp,i=void 0===a?2:a,l=t.stdDevDown,c=void 0===l?2:l,s=t.pipSize,u=void 0===s?2:s,f=M(e,n,o),d=F(f,{periods:n}),p=function(e){var t=U(e),r=e.map((function(e){return Math.pow(e-t,2)})),n=U(r);return Math.sqrt(n)}(f),m=d+p*i,h=d-p*c;return[+d.toFixed(u),+m.toFixed(u),+h.toFixed(u)]},V=function(e,t){var r=t.periods;return(0,l.sequence)(e.length-r+1).map((function(n,o){return q(e.slice(o,o+r),t)}))},Y=function(e,t,r){var n=t.periods,o=t.field,a=t.pipSize,i=void 0===a?2:a,l=2/(n+1),c=B(e,o);if(r)return(c[0]-r)*l+r;if(e.length<n)throw new Error("Periods longer than data length");var s=U(B(e.slice(0,n),o));return+c.slice(n).reduce((function(e,t){return(t-e)*l+e}),s).toFixed(i)},H=function(e,t){var r=t.periods,n=Y(e.slice(0,r),t);return e.slice(r-1).map((function(e,r){return r?n=Y([e],t,n):n}))};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e,t){var r,n=[];return n.length=t-e.length,n.fill(0),[].concat(n,function(e){if(Array.isArray(e))return W(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},$=function(e,t){var r=t.field,n=t.fastEmaPeriod,o=void 0===n?12:n,a=t.slowEmaPeriod,i=void 0===a?26:a,l=t.signalEmaPeriod,c=void 0===l?9:l,s=t.pipSize,u=void 0===s?2:s,f=B(e,r),d=f.length,p=K(H(f,{periods:o,pipSize:20,field:r}),d),m=K(H(f,{periods:i,pipSize:20,field:r}),d),h=K(m.map((function(e,t){return+(p[t]-e).toFixed(u)})),d),y=K(H(h.slice(i-1),{periods:c,pipSize:20,field:r}),d);return h.map((function(e,t){return[+(e-y[t]).toFixed(u),e,+y[t].toFixed(u)]})).slice(i+c-2)},X=function(e,t){return t>e?t-e:0},Q=function(e,t){return t<e?e-t:0},J=function(e,t,r){var n;return e.reduce((function(e,r,o){1===o&&(n=e);var a=t(n,r);return n=r,a+(1===o?0:e)}))/r},Z=function(e,t,r,n){var o;return 1===e.length?n:e.reduce((function(e,a,i){1===i&&(o=e);var l=t(o,a);return o=a,((1===i?n:e)*(r-1)+l)/r}))},ee=function(e,t,r){var n=t.periods,o=t.field;if(e.length<n)throw new Error("Periods longer than data length");if(e.length===n)return 0;var a,i,l,c=B(e.slice(0,n+1),o);r&&"gain"in r?(a=B(e.slice(-2),o),i=r.gain,l=r.loss):(a=B(e.slice(n,e.length),o),i=J(c,X,n),l=J(c,Q,n));var s=Z(a,X,n,i),u=Z(a,Q,n,l);return r&&(r.gain=s,r.loss=u),0===s?0:0===u?100:100-100/(1+s/u)},te=function(e,t){var r=t.periods,n=t.pipSize,o=void 0===n?2:n,a={};return(0,l.sequence)(e.length-r).map((function(n,i){return+ee(e.slice(0,i+r+1),t,a).toFixed(o)}))};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return(t=function(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=function(e,t,r,n){for(var o=r.getPipSize(),a=arguments.length,i=new Array(a>4?a-4:0),l=4;l<a;l++)i[l-4]=arguments[l];return e.apply(void 0,[t,oe({pipSize:o},n)].concat(i))};var le=r(5506);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return(t=function(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const de=function(e){return ue(ue(ue(ue({dateTimeStringToTimestamp:function(e){var t=(0,N.localize)("Invalid date/time: {{ datetime_string }}",{datetime_string:e});if("string"!=typeof e)return t;var r,n=e.replace(/[^0-9.:-\s]/g,"").replace(/\s+/g," ").trim().split(" "),o=/^[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/;if(r=n.length>=2?o.test(n[0])&&/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9])?)?$/.test(n[1])?"".concat(n[0],"T").concat(n[1]):null:1===n.length&&o.test(n[0])?n[0]:null){var a=new Date(r);if(a instanceof Date&&!isNaN(a))return a.getTime()/1e3}return t},getTime:function(){return parseInt((new Date).getTime()/1e3)}},{isCandleBlack:function(e){return D(e)&&e.close<e.open},candleValues:function(e,t){return function(e){if(!(e instanceof Array&&e.every((function(e){return R(e)}))))throw(0,C.$)("CandleListExpected",(0,N.localize)("Given candle list is not valid"));return e}(e).map((function(e){return e[t]}))},candleField:function(e,t){return D(e)[t]}}),function(e){return{notify:function(e){return d.P.emit("ui.log.notify",e)},console:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.type,r=e.message;return console[t](r)})),notifyTelegram:function(e,t,r){var n="https://api.telegram.org/bot".concat(e,"/sendMessage"),o=function(){return(0,le.me)("warn",(0,N.localize)("The Telegram notification could not be sent"))};fetch(n,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:t,text:r})}).then((function(e){e.ok||o()})).catch(o)},getTotalRuns:function(){return e.getTotalRuns()},getBalance:function(t){return e.getBalance(t)},getTotalProfit:function(t){return e.getTotalProfit(t,e.tradeOptions.currency)}}}(e)),function(e){return{sma:function(t,r){return ie(F,t,e,{periods:r})},smaa:function(t,r){return ie(G,t,e,{periods:r})},ema:function(t,r){return ie(Y,t,e,{periods:r})},emaa:function(t,r){return ie(H,t,e,{periods:r})},rsi:function(t,r){return ie(ee,t,e,{periods:r})},rsia:function(t,r){return ie(te,t,e,{periods:r})},bb:function(t,r,n){return ie(q,t,e,r)[n]},bba:function(t,r,n){return ie(V,t,e,r).map((function(e){return e[n]}))},macda:function(t,r,n){return ie($,t,e,r).map((function(e){return e[n]}))}}}(e)),{},{highlightBlock:function(e){var t=Blockly.derivWorkspace.getBlockById(e);Blockly.BlockSvg.prototype.highlightExecutedBlock=function(){var e=this,t="block--execution-highlighted";Blockly.utils.dom.hasClass(this.svgGroup_,t)||(Blockly.utils.dom.addClass(this.svgGroup_,t),setTimeout((function(){e.svgGroup_&&Blockly.utils.dom.removeClass(e.svgGroup_,t)}),1505))},t&&t.highlightExecutedBlock(t)}})},pe=function(e){return{getDelayTickValue:function(){return e.getDelayTickValue.apply(e,arguments)},getCurrentStat:function(){return e.getCurrentStat.apply(e,arguments)},getStatList:function(){return e.getStatList.apply(e,arguments)},getLastTick:function(){return e.getLastTick.apply(e,arguments)},getLastDigit:function(){return e.getLastDigit.apply(e,arguments)},getTicks:function(){return e.getTicks.apply(e,arguments)},checkDirection:function(){return e.checkDirection.apply(e,arguments)},getOhlcFromEnd:function(){return e.getOhlcFromEnd.apply(e,arguments)},getOhlc:function(){return e.getOhlc.apply(e,arguments)},getLastDigitList:function(){return e.getLastDigitList.apply(e,arguments)}}};var me=function(e,t){return t.data.proposals.find((function(r){return r.contract_type===e&&r.purchase_reference===t.getPurchaseReference()}))};var he=r(4848),ye=r(6074),ve=r(3129);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ge(n.key),n)}}function ge(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ee=function(){return!!e})()}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}var xe="",Se="BEFORE_PURCHASE",Oe="DURING_PURCHASE",Te="PROPOSALS_READY",Le="CLEAR_PROPOSALS",Ae="PURCHASE_SUCCESSFUL",Ne="OPEN_CONTRACT",Ce="SELL",Pe="START",Ie="STOP",je="NEW_TICK";function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return(t=function(e){var t=function(e){if("object"!=ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me=function(e){var t=e.dispatch,r=e.getState,n=e.data,o=e.scope;r().scope===o&&t(n)},Ue=function(){return{type:Te}},Fe=function(e){(0,e.getState)().proposalsReady&&function(e){Me(De(De({},e),{},{scope:Se}))}(e),Me(De(De({},e),{},{scope:Se}))};function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e,t,r){return(t=He(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,He(n.key),n)}}function He(e){var t=function(e){if("object"!=Ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}function We(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(We=function(){return!!e})()}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t,r){return(t=tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tt(n.key),n)}}function tt(e){var t=function(e){if("object"!=Xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xe(t)?t:t+""}function rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rt=function(){return!!e})()}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ot(e,t)}var at=r(1951);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ct(n.key),n)}}function ct(e){var t=function(e){if("object"!=it(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==it(t)?t:t+""}function st(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(st=function(){return!!e})()}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}var dt,pt=0;function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e,t,r){return(t=bt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bt(n.key),n)}}function bt(e){var t=function(e){if("object"!=mt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mt(t)?t:t+""}function gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gt=function(){return!!e})()}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ot(e,t,r){return(t=function(e){var t=function(e){if("object"!=kt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt={scope:Ie,proposalsReady:!1};const Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return{scope:Se,proposalsReady:e.proposalsReady};case Te:return St(St({},e),{},{proposalsReady:!0});case Le:return St(St({},e),{},{proposalsReady:!1});case Ae:return{scope:Oe,openContract:!1,proposalsReady:e.proposalsReady};case Ne:return{scope:Oe,openContract:!0,proposalsReady:e.proposalsReady};case Ce:return{scope:Ie,proposalsReady:e.proposalsReady};case je:return St(St({},e),{},{newTick:t.payload});default:return e}};var At,Nt=r(72),Ct=r.n(Nt);function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function It(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dt(e,t,r){return(t=Gt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(){Bt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Pt(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Pt(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Mt(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ut(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Mt(a,n,o,i,l,"next",e)}function l(e){Mt(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gt(n.key),n)}}function Gt(e){var t=function(e){if("object"!=Pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pt(t)?t:t+""}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qt=function(){return!!e})()}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function Yt(e,t){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yt(e,t)}function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t,r){return(t=Qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qt(n.key),n)}}function Qt(e){var t=function(e){if("object"!=Ht(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ht(t)?t:t+""}function Jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jt=function(){return!!e})()}function Zt(e){return Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zt(e)}function er(e,t){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},er(e,t)}var tr={totalProfit:0,totalWins:0,totalLosses:0,totalStake:0,totalPayout:0,totalRuns:0},rr={};function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?or(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){return(t=fr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fr(n.key),n)}}function ur(e,t,r){return t&&sr(e.prototype,t),r&&sr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fr(e){var t=function(e){if("object"!=nr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nr(t)?t:t+""}function dr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dr=function(){return!!e})()}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pr(e)}function mr(e,t){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mr(e,t)}var hr,yr=function(e){var t=e.store,r=e.stopScope,n=e.passScope,o=e.passFlag;return t.getState().scope===r?Promise.resolve(!1):new Promise((function(e){var a=t.subscribe((function(){var i=t.getState();i.newTick!==hr&&(hr=i.newTick,i.scope===n&&i[o]&&(a(),e(!0)),i.scope===r&&(a(),e(!1)))}))}))},vr=function(e){function t(e){var r,n,o,a;return cr(this,t),(n=this,o=t,o=pr(o),r=function(e,t){if(t&&("object"==nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(n,dr()?Reflect.construct(o,a||[],pr(n).constructor):o.apply(n,a))).observer=e.observer,r.$scope=e,r.observe(),r.data={contract:{},proposals:[]},r.subscription_id_for_accumulators=null,r.is_proposal_requested_for_accumulators=!1,r.store=(0,he.y$)(Lt,(0,he.Tw)(ye.A)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mr(e,t)}(t,e),ur(t,[{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,a=(n=z(t),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(n,o)||function(e,t){if(e){if("string"==typeof e)return lr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=l.symbol;this.initArgs=t,this.options=l,this.startPromise=this.loginAndGetBalance(i),this.checkTicksPromiseExists()||this.watchTicks(c)}},{key:"start",value:function(e){if(!this.options)throw(0,C.$)("NotInitialized",(0,N.localize)("Bot.init is not called"));d.P.emit("bot.running");var t=this.validateTradeOptions(e);this.tradeOptions=ar(ar({},t),{},{symbol:this.options.symbol}),this.store.dispatch((function(e,t){return Me({dispatch:e,getState:t,data:{type:Pe},scope:Ie})})),this.checkLimits(t),this.makeDirectPurchaseDecision()}},{key:"loginAndGetBalance",value:function(e){var t=this;return this.token===e?Promise.resolve():(this.accountInfo=a.R.account_info,this.token=a.R.token,new Promise((function(e){var r=a.R.api.onMessage().subscribe((function(r){var n=r.data;"transaction"===n.msg_type&&"sell"===n.transaction.action&&(t.transaction_recovery_timeout=setTimeout((function(){var e=t.data.contract,r=e.contract_id===n.transaction.contract_id,o="open"===e.status;r&&o&&(0,f.um)((function(){a.R.api.send({proposal_open_contract:1,contract_id:e.contract_id})}),["PriceMoved"])}),1500)),e()}));a.R.pushSubscription(r)})))}},{key:"observe",value:function(){this.observeOpenContract(),this.observeBalance(),this.observeProposals()}},{key:"watch",value:function(e){return"before"===e?(t=this.store,yr({store:t,stopScope:Oe,passScope:Se,passFlag:"proposalsReady"})):function(e){return yr({store:e,stopScope:Ie,passScope:Oe,passFlag:"openContract"})}(this.store);var t}},{key:"makeDirectPurchaseDecision",value:function(){var e=(0,f.vm)(),t=e.has_payout_block,r=e.is_basis_payout;this.is_proposal_subscription_required=t||r,this.is_proposal_subscription_required?(this.makeProposals(ar(ar({},this.options),this.tradeOptions)),this.checkProposalReady()):this.store.dispatch(Ue())}}])}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=we(t),function(e,t){if(t&&("object"==_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ee()?Reflect.construct(t,r||[],we(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(t,e),r=t,(n=[{key:"observeBalance",value:function(){var e=this;if(a.R.api){var t=a.R.api.onMessage().subscribe((function(t){var r=t.data;if("balance"===(null==r?void 0:r.msg_type)&&null!=r&&r.balance){var n=r.balance,o=n.balance,a=n.currency;xe=(0,l.getFormattedText)(o,a),e.accountInfo&&(0,le.pq)({accountID:e.accountInfo.loginid,balance:xe})}}));a.R.pushSubscription(t)}}},{key:"getBalance",value:function(e){var t=ve.A.instance.client,r=t&&t.balance||0;return xe=(0,l.getFormattedText)(r,t.currency,!1),"STR"===e?xe:r}}])&&be(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(e)}(function(e){return function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=function(e,t,r){return t=ut(t),function(e,t){if(t&&("object"==it(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,st()?Reflect.construct(t,r||[],ut(e).constructor):t.apply(e,r))}(this,t,[].concat(n))).getPurchaseReference=function(){return dt},e.regeneratePurchaseReference=function(){dt=(0,f.yk)()},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(t,e),r=t,n=[{key:"purchase",value:function(e){var t=this;if(this.store.getState().scope!==Se)return Promise.resolve();var r=function(r){var n=r.buy;(0,le.fh)({id:"contract.purchase_received",data:n.transaction_id,buy:n}),t.contractId=n.contract_id,t.store.dispatch((function(e,t){return Fe({dispatch:e,getState:t,data:{type:Ae}})})),t.is_proposal_subscription_required&&t.renewProposalsOnPurchase(),pt=0,(0,le.Rm)(at.Uk.PURCHASE,{longcode:n.longcode,transaction_id:n.transaction_id}),(0,le.pq)({accountID:t.accountInfo.loginid,totalRuns:t.updateAndReturnTotalRuns(),transaction_ids:{buy:n.transaction_id},contract_type:e,buy_price:n.buy_price})};if(this.is_proposal_subscription_required){var n=this.selectProposal(e),o=n.id,i=n.askPrice,l=function(){return a.R.api.send({buy:o,price:i})};return this.isSold=!1,(0,le.fh)({id:"contract.purchase_sent",data:i}),this.options.timeMachineEnabled?(0,f.$)(l,(function(e,r){"DisconnectError"!==e?t.renewProposalsOnPurchase():t.clearProposals();var n=t.store.subscribe((function(){var e=t.store.getState(),o=e.scope,a=e.proposalsReady;o===Se&&a&&(r().then((function(){return t.observer.emit("REVERT","before")})),n())}))}),["PriceMoved","InvalidContractProposal"],pt++).then(r):(0,f.um)(l).then(r)}var c=(0,f.x9)(e,this.tradeOptions),s=function(){return a.R.api.send(c)};return this.isSold=!1,(0,le.fh)({id:"contract.purchase_sent",data:this.tradeOptions.amount}),this.options.timeMachineEnabled?(0,f.$)(s,(function(e,r){"DisconnectError"===e&&t.clearProposals();var n=t.store.subscribe((function(){t.store.getState().scope===Se&&(r().then((function(){return t.observer.emit("REVERT","before")})),n())}))}),["PriceMoved","InvalidContractProposal"],pt++).then(r):(0,f.um)(s).then(r)}}],n&&lt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(e)}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Et(t),function(e,t){if(t&&("object"==mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gt()?Reflect.construct(t,r||[],Et(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(t,e),r=t,n=[{key:"isSellAtMarketAvailable",value:function(){return this.contractId&&!this.isSold&&this.isSellAvailable&&!this.isExpired}},{key:"sellAtMarket",value:function(){var e=this;if(d.P.emit("bot.sell"),this.store.getState().scope!==Oe)return Promise.resolve();if(!this.isSellAtMarketAvailable())return(0,le.Rm)(at.Uk.NOT_OFFERED),Promise.resolve();var t=1;return new Promise((function(r){var n=function(n){if(t=1,n){var o=n.sell.sold_for;(0,le.Rm)(at.Uk.SELL,{sold_for:o})}(0,le.fh)("purchase.sold"),e.waitForAfter(),r()},o=e.contractId,i=function(){return(0,f.um)((function(){return a.R.api.send({sell:o,price:0})})).then((function(e){(0,f.um)((function(){return a.R.api.send({proposal_open_contract:1,contract_id:o})})).then((function(){return e}))})).catch((function(e){var t=e.error;if("InvalidOfferings"===t.code)return Promise.resolve();var r={name:t.code,message:t.message,msg_type:e.msg_type,error:yt({},t.error)};return"RateLimit"===t.code?Promise.reject(r):(0,f.um)((function(){return a.R.api.send({proposal_open_contract:1,contract_id:o})})).then((function(e){var t=e.proposal_open_contract;return t.is_sold?Promise.resolve({sell:{sold_for:t.sell_price}}):Promise.reject(r)}))}))},l=["NoOpenPosition","InvalidSellContractProposal","UnrecognisedRequest"];return e.options.timeMachineEnabled?(0,f.$)(i,(function(t,r){return r().then((function(){return e.observer.emit("REVERT","during")}))}),l,t++).then((function(e){return n(e)})):(0,f.um)(i,l).then((function(e){return n(e)})).catch((function(e){return e}))}))}}],n&&_t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(e)}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Ke(t),function(e,t){if(t&&("object"==Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,We()?Reflect.construct(t,r||[],Ke(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(t,e),r=t,n=[{key:"observeOpenContract",value:function(){var e=this;if(a.R.api){var t=a.R.api.onMessage().subscribe((function(t){var r=t.data;if("proposal_open_contract"===r.msg_type){var n=r.proposal_open_contract;if(!n||!e.expectedContractId(null==n?void 0:n.contract_id))return;e.setContractFlags(n),e.data.contract=n,(0,le.dz)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({accountID:a.R.account_info.loginid},n)),e.isSold?(e.contractId="",clearTimeout(e.transaction_recovery_timeout),e.updateTotals(n),(0,le.fh)({id:"contract.sold",data:n.transaction_ids.sell,contract:n}),e.afterPromise&&e.afterPromise(),e.store.dispatch((function(e,t){return Me({dispatch:e,getState:t,data:{type:Ce},scope:Oe})}))):e.store.dispatch((function(e,t){t().scope===Oe&&e({type:Ne}),Fe({dispatch:e,getState:t,data:{type:Ne}})}))}}));a.R.pushSubscription(t)}}},{key:"waitForAfter",value:function(){var e=this;return new Promise((function(t){e.afterPromise=t}))}},{key:"setContractFlags",value:function(e){var t=e.is_expired,r=e.is_valid_to_sell,n=e.is_sold,o=e.entry_tick;this.isSold=Boolean(n),this.isSellAvailable=!this.isSold&&Boolean(r),this.isExpired=Boolean(t),this.hasEntryTick=Boolean(o)}},{key:"expectedContractId",value:function(e){return this.contractId&&e===this.contractId}},{key:"getSellPrice",value:function(){var e=this.data.contract,t=e.bid_price,r=e.buy_price,n=e.currency;return(0,l.getRoundedNumber)(Number(t)-Number(r),n)}}],n&&Ye(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(e)}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=nt(t),function(e,t){if(t&&("object"==Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rt()?Reflect.construct(t,r||[],nt(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(t,e),r=t,n=[{key:"makeProposals",value:function(e){this.isNewTradeOption(e)&&(this.regeneratePurchaseReference(),this.trade_option=e,this.proposal_templates=(0,f.NZ)(e,this.getPurchaseReference()),this.renewProposalsOnPurchase())}},{key:"selectProposal",value:function(e){var t=this,r=this.data.proposals;if(0===r.length)throw Error((0,N.localize)("Proposals are not ready"));var n=r.find((function(r){if(r.contract_type===e&&r.purchase_reference===t.getPurchaseReference()){if(r.error)throw r.error;return r}return!1}));if(!n)throw new Error((0,N.localize)("Selected proposal does not exist"));return{id:n.id,askPrice:n.ask_price}}},{key:"renewProposalsOnPurchase",value:function(){this.data.proposals=[],this.store.dispatch({type:Le}),this.requestProposals()}},{key:"requestProposals",value:function(){var e=this,t=!1;Promise.all(this.proposal_templates.map((function(r){(0,f.um)((function(){return a.R.api.send(r)})).catch((function(r){return"ContractBuyValidationError"===r.error.code?(e.data.proposals.push(Je(Je(Je({},r.error.echo_req),r.echo_req.passthrough),{},{error:r})),null):(t||(t=!0,e.$scope.observer.emit("Error",r.error)),null)}))})))}},{key:"observeProposals",value:function(){var e=this;if(a.R.api){var t=a.R.api.onMessage().subscribe((function(t){if("proposal"===t.data.msg_type){var r=t.data,n=r.passthrough,o=r.proposal;o&&-1===e.data.proposals.findIndex((function(e){return e.id===o.id}))&&(e.data.proposals.push(Je(Je({},o),n)),e.checkProposalReady())}}));a.R.pushSubscription(t)}}},{key:"checkProposalReady",value:function(){var e=this,t=this.data.proposals;t.length>0&&this.proposal_templates&&this.proposal_templates.every((function(e){return-1!==t.findIndex((function(t){return t.purchase_reference===e.passthrough.purchase_reference&&t.contract_type===e.contract_type}))}))&&this.startPromise.then((function(){return e.store.dispatch(Ue())}))}},{key:"isNewTradeOption",value:function(e){var t=this;return this.trade_option?["amount","barrierOffset","basis","duration","duration_unit","prediction","secondBarrierOffset","symbol"].some((function(r){return t.trade_option[r]!==e[r]})):(this.trade_option=e,!0)}}],n&&et(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(e)}(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Vt(t),function(e,t){if(t&&("object"==Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qt()?Reflect.construct(t,r||[],Vt(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(t,e),r=t,n=[{key:"watchTicks",value:(p=Ut(Bt().mark((function e(t){var r,n,o,a=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.symbol===t){e.next=10;break}return this.symbol=t,r=this.$scope.ticksService,e.next=5,r.stopMonitor({symbol:t,key:At});case 5:return n=function(e){a.is_proposal_subscription_required&&a.checkProposalReady();var t=e.slice(-1)[0].epoch;a.store.dispatch({type:je,payload:t})},e.next=8,r.monitor({symbol:t,callback:n});case 8:o=e.sent,At=o;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"checkTicksPromiseExists",value:function(){return this.$scope.ticksService.ticks_history_promise}},{key:"getTicks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(r){e.$scope.ticksService.request({symbol:e.symbol}).then((function(n){var o=n.map((function(r){return t?r.quote.toFixed(e.getPipSize()):r.quote}));r(o)}))}))}},{key:"getLastTick",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n){return t.$scope.ticksService.request({symbol:t.symbol}).then((function(o){var a=e?h(o):h(o).quote;!e&&r&&(a=a.toFixed(t.getPipSize())),n(a)})).catch((function(e){"MarketIsClosed"===e.code&&(d.P.emit("Error",e),n(e.code))}))}))}},{key:"getLastDigit",value:function(){var e=this;return new Promise((function(t){return e.getLastTick(!1,!0).then((function(e){return t((0,f.bJ)(e))}))}))}},{key:"getLastDigitList",value:function(){var e=this;return new Promise((function(t){return e.getTicks().then((function(r){return t(e.getLastDigitsFromList(r))}))}))}},{key:"getLastDigitsFromList",value:function(e){var t=this;return e.map((function(e){return(0,f.bJ)(e.toFixed(t.getPipSize()))}))}},{key:"checkDirection",value:function(e){var t=this;return new Promise((function(r){return t.$scope.ticksService.request({symbol:t.symbol}).then((function(t){return r((0,f.u6)(t)===e)}))}))}},{key:"getOhlc",value:function(e){var t=this,r=e||{},n=r.granularity,o=void 0===n?this.options.candleInterval||60:n,a=r.field;return new Promise((function(e){return t.$scope.ticksService.request({symbol:t.symbol,granularity:o}).then((function(t){return e(a?t.map((function(e){return e[a]})):t)}))}))}},{key:"getOhlcFromEnd",value:function(e){var t=this,r=(e||{}).index,n=function(e,t){if(!j(e))throw(0,C.$)("PositiveIntegerExpected",t);return e}(Number(void 0===r?1:r),(0,N.localize)("Index must be a positive integer"));return new Promise((function(r){return t.getOhlc(e).then((function(e){return r(e.slice(-n)[0])}))}))}},{key:"getPipSize",value:function(){return this.$scope.ticksService.pipSizes[this.symbol]}},{key:"requestAccumulatorStats",value:(u=Ut(Bt().mark((function e(){var t,r,n,o,i,l,c,s,u;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.subscription_id_for_accumulators,c=this.is_proposal_requested_for_accumulators,s=Rt(Rt({},window.Blockly.accumulators_request),{},{amount:null==this||null===(t=this.tradeOptions)||void 0===t?void 0:t.amount,basis:null==this||null===(r=this.tradeOptions)||void 0===r?void 0:r.basis,contract_type:"ACCU",currency:null==this||null===(n=this.tradeOptions)||void 0===n?void 0:n.currency,growth_rate:null==this||null===(o=this.tradeOptions)||void 0===o?void 0:o.growth_rate,proposal:1,subscribe:1,symbol:null==this||null===(i=this.tradeOptions)||void 0===i?void 0:i.symbol}),l||c){e.next=8;break}if(this.is_proposal_requested_for_accumulators=!0,!s){e.next=8;break}return e.next=8,null===a.R||void 0===a.R||null===(u=a.R.api)||void 0===u?void 0:u.send(s);case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"handleOnMessageForAccumulators",value:(s=Ut(Bt().mark((function e(){var t,r=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.abrupt("return",new Promise((function(e){var n=a.R.api.onMessage().subscribe((function(n){var o=n.data;if("proposal"===o.msg_type)try{r.subscription_id_for_accumulators=o.subscription.id;var a=(o.proposal.contract_details.ticks_stayed_in||[]).flat().reverse();(t=[].concat(It(a),It(t))).length>0&&e(t)}catch(e){d.P.emit("Unexpected message type or no proposal found:",e)}}));a.R.pushSubscription(n)})));case 2:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"fetchStatsForAccumulators",value:(c=Ut(Bt().mark((function e(){var t,r,n=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Ct()((function(){return n.requestAccumulatorStats()}),300)(),e.next=5,this.handleOnMessageForAccumulators();case 5:return t=e.sent,e.abrupt("return",t);case 9:throw e.prev=9,e.t0=e.catch(0),d.P.emit("Error in subscription promise:",e.t0),e.t0;case 13:return e.prev=13,e.next=16,null===a.R||void 0===a.R||null===(r=a.R.api)||void 0===r?void 0:r.send({forget_all:"proposal"});case 16:return this.is_proposal_requested_for_accumulators=!1,this.subscription_id_for_accumulators=null,e.finish(13);case 19:case"end":return e.stop()}}),e,this,[[0,9,13,19]])}))),function(){return c.apply(this,arguments)})},{key:"getCurrentStat",value:(l=Ut(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchStatsForAccumulators();case 3:return t=e.sent,e.abrupt("return",null==t?void 0:t[0]);case 7:e.prev=7,e.t0=e.catch(0),d.P.emit("Error fetching current stat:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"getStatList",value:(i=Ut(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchStatsForAccumulators();case 3:return t=e.sent,e.abrupt("return",null==t?void 0:t.slice(0,100));case 7:e.prev=7,e.t0=e.catch(0),d.P.emit("Error fetching current stat:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return i.apply(this,arguments)})},{key:"getDelayTickValue",value:(o=Ut(Bt().mark((function e(t){var r=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var o=[],a=r.symbol,i=function(){r.$scope.ticksService.stopMonitor({symbol:a,key:""}),e(o),o.length=0};Number(t)<=0&&i(),r.$scope.ticksService.monitor({symbol:a,callback:function(e){return function(e){o.push(e),o.length===t&&i()}(e)}})}catch(e){n(new Error("Failed to start tick monitoring: ".concat(e.message)))}})));case 1:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&Ft(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i,l,c,s,u,p}(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,r){return t=Zt(t),function(e,t){if(t&&("object"==Ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jt()?Reflect.construct(t,r||[],Zt(e).constructor):t.apply(e,r))}(this,t)).sessionRuns=0,e.sessionProfit=0,d.P.register("statistics.clear",e.clearStatistics.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&er(e,t)}(t,e),r=t,(n=[{key:"clearStatistics",value:function(){if(this.sessionRuns=0,this.sessionProfit=0,this.accountInfo){var e=this.accountInfo.loginid;rr[e]=Kt({},tr)}}},{key:"updateTotals",value:function(e){var t=e.sell_price,r=e.buy_price,n=e.currency,o=(0,l.getRoundedNumber)(Number(t)-Number(r),n),a=o>0,i=this.getAccountStat();i.totalWins+=a?1:0,i.totalLosses+=a?0:1,this.sessionProfit=(0,l.getRoundedNumber)(Number(this.sessionProfit)+Number(o),n),i.totalProfit=(0,l.getRoundedNumber)(Number(i.totalProfit)+Number(o),n),i.totalStake=(0,l.getRoundedNumber)(Number(i.totalStake)+Number(r),n),i.totalPayout=(0,l.getRoundedNumber)(Number(i.totalPayout)+Number(t),n),(0,le.pq)({profit:o,contract:e,accountID:this.accountInfo.loginid,totalProfit:i.totalProfit,totalWins:i.totalWins,totalLosses:i.totalLosses,totalStake:i.totalStake,totalPayout:i.totalPayout}),(0,le.Rm)(a?at.Uk.PROFIT:at.Uk.LOST,{currency:n,profit:o})}},{key:"updateAndReturnTotalRuns",value:function(){return this.sessionRuns++,++this.getAccountStat().totalRuns}},{key:"getTotalRuns",value:function(){return this.getAccountStat().totalRuns}},{key:"getTotalProfit",value:function(e,t){var r=this.getAccountStat();return e&&0!==r.totalProfit?(0,l.getRoundedNumber)(+r.totalProfit,t):+r.totalProfit}},{key:"checkLimits",value:function(e){if(e.limitations){var t=e.limitations,r=t.maxLoss,n=t.maxTrades;if(r&&n){if(this.sessionRuns>=n)throw(0,C.$)("CustomLimitsReached",(0,N.localize)("Maximum number of trades reached"));if(this.sessionProfit<=-r)throw(0,C.$)("CustomLimitsReached",(0,N.localize)("Maximum loss amount reached"))}}}},{key:"validateTradeOptions",value:function(e){var t=e.take_profit,r=e.stop_loss;return t&&(e.limit_order.take_profit=t),r&&(e.limit_order.stop_loss=r),e}},{key:"getAccountStat",value:function(){var e=this.accountInfo.loginid;return e in rr||(rr[e]=Kt({},tr)),rr[e]}}])&&Xt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ur((function e(){cr(this,e)}))))))))));function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){Er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Er(e,t,r){return(t=function(e){var t=function(e){if("object"!=_r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(r){return setTimeout((function(){r(),setTimeout((function(){return e.emit("CONTINUE")}),0)}),1e3*t)}),(function(){}))};const kr=function(e){var t=new vr(e),r=e.observer;return{tradeEngine:t,observer:r,getInterface:function(){return gr(gr(gr({},function(e){var t=function(t){return(0,f.n3)(e.data.contract)[t]};return{init:function(){return e.init.apply(e,arguments)},start:function(){return e.start.apply(e,arguments)},stop:function(){return e.stop.apply(e,arguments)},purchase:function(t){return e.purchase(t)},getAskPrice:function(t){return Number(me(t,e).ask_price)},getPayout:function(t){return Number(me(t,e).payout)},getPurchaseReference:function(){return e.getPurchaseReference()},isSellAvailable:function(){return e.isSellAtMarketAvailable()},sellAtMarket:function(){return e.sellAtMarket()},getSellPrice:function(){return function(e){return e.getSellPrice()}(e)},isResult:function(e){return t(10)===e},isTradeAgain:function(e){return d.P.emit("bot.trade_again",e)},readDetails:function(e){return t(e-1)}}}(t)),de(t)),{},{getTicksInterface:pe(t),watch:function(){return t.watch.apply(t,arguments)},sleep:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wr.apply(void 0,[r].concat(t))},alert:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return alert.apply(void 0,arguments)})),prompt:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return prompt.apply(void 0,arguments)})),console:{log:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,[(new Date).toLocaleTimeString()].concat(r))}}})}}};function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function Sr(){Sr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==xr(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(xr(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Or(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Tr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Or(a,n,o,i,l,"next",e)}function l(e){Or(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Lr(e){return function(e){if(Array.isArray(e))return Nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){if(e){if("string"==typeof e)return Nr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nr(e,t):void 0}}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}s().prototype.takeStateSnapshot=function(){return(0,l.cloneThorough)(this.stateStack,void 0,void 0,void 0,!0)},s().prototype.restoreStateSnapshot=function(e){this.stateStack=(0,l.cloneThorough)(e,void 0,void 0,void 0,!0),this.global=this.stateStack[0].scope.object||this.stateStack[0].scope,this.initFunc_(this,this.global)};var Cr=function(e){return e&&e.tradeEngine.options},Pr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!at.Yd.includes(t)&&Cr(e)&&e.tradeEngine.options.shouldRestartOnError};const Ir=function(){var e,t=A(),r=kr(t),n={};function o(e){n.restoreStateSnapshot(e),n.paused_=!1,i()}function i(){!t.stopped&&n.run()||e(n.pseudoToNative(n.value))}function c(e,r){var n=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var l=o.pop(),c=o.slice().reverse(),s=c.findIndex((function(e){return void 0!==e})),u=s<0?[]:c.slice(s).reverse();r.apply(void 0,Lr(u.map((function(t){return e.pseudoToNative(t)})))).then((function(t){l(e.nativeToPseudo(t)),i()})).catch((function(e){t.observer.emit("Error",e.error||e)}))};return Object.defineProperty(n,"length",{value:101}),e.createAsyncFunction(n)}function u(e,o){var a=r.getInterface(),i=a.getTicksInterface,l=a.alert,s=a.prompt,u=a.sleep,f=a.console,d=i;e.setProperty(o,"console",e.nativeToPseudo(f)),e.setProperty(o,"alert",e.nativeToPseudo(l)),e.setProperty(o,"prompt",e.nativeToPseudo(s)),e.setProperty(o,"getPurchaseReference",e.nativeToPseudo(a.getPurchaseReference));var p=e.nativeToPseudo(a);Object.entries(d).forEach((function(t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(r,n)||Ar(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],i=o[1];return e.setProperty(p,a,c(e,i))})),e.setProperty(p,"start",e.nativeToPseudo((function(){var n=a.start;Pr(r)&&(t.startState=e.takeStateSnapshot()),n.apply(void 0,arguments)}))),e.setProperty(p,"purchase",c(e,a.purchase)),e.setProperty(p,"sellAtMarket",c(e,a.sellAtMarket)),e.setProperty(o,"Bot",p),e.setProperty(o,"watch",c(e,(function(e){var o=r.getInterface().watch;if(function(e){return Cr(e)&&e.tradeEngine.options.timeMachineEnabled}(r)){var a=n.takeStateSnapshot();"before"===e?t.beforeState=a:t.duringState=a}return o(e)}))),e.setProperty(o,"sleep",c(e,u))}function f(){return f=Tr(Sr().mark((function e(){return Sr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var o,i,c,s,u,f,m=null!==(o=d.P.getState("global_timeouts"))&&void 0!==o?o:[],h=Object.keys(m).every((function(e){return m[e].is_cancellable}));!r.tradeEngine.contractId&&h?(a.R.is_stopping=!0,m.forEach((function(e){return clearTimeout(m[e])})),p().then((function(){a.R.is_stopping=!1,e()}))):!1===r.tradeEngine.isSold&&!t.is_error_triggered&&(0,l.isMultiplierContract)(null!==(i=null===(c=r)||void 0===c||null===(s=c.tradeEngine)||void 0===s||null===(u=s.data)||void 0===u||null===(f=u.contract)||void 0===f?void 0:f.contract_type)&&void 0!==i?i:"")?d.P.register("contract.status",function(){var t=Tr(Sr().mark((function t(r){return Sr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"contract.sold"===r.id&&p().then((function(){return e()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):(a.R.is_stopping=!0,p().then((function(){a.R.is_stopping=!1,e()})))}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return m=Tr(Sr().mark((function e(){return Sr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{t.stopped=!0,t.is_error_triggered=!1,d.P.emit("bot.stop");var n=t.ticksService;a.R.clearSubscriptions(),n.unsubscribeFromTicksService().then((function(){e()}))}catch(e){r(e)}})));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(){return(h=Tr(Sr().mark((function e(){var r;return Sr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ticksService,e.abrupt("return",new Promise((function(e,t){try{r.unsubscribeFromTicksService().then((function(){e()}))}catch(e){t(e)}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.observer.register("REVERT",(function(e){return o("before"===e?t.beforeState:t.duringState)})),{stop:function(){return f.apply(this,arguments)},run:function(a){return new Promise((function(l,c){var f=function(a){var i;if(!t.stopped)if("InvalidToken"!==a.code){if(function(e){return!(!["SellNotAvailableCustom","ContractCreationFailure","InvalidtoBuy"].includes(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")||!Cr(e))}(r,null==a?void 0:a.code))return d.P.emit("ui.log.error",a.message),void d.P.emit("bot.click_stop");if(t.is_error_triggered=!0,Pr(r,a.code)&&function(e){return Cr(e)&&e.tradeEngine.tradeOptions}(r)){d.P.emit("Error",a);var l=r.tradeEngine,s=l.initArgs,u=l.tradeOptions;p(),t=A(),r=kr(t),n={},e=function(){},t.observer.register("Error",f),(i=r.tradeEngine).init.apply(i,Lr(s)),r.tradeEngine.start(u),o(t.startState)}else c(a)}else d.P.emit("client.invalid_token")};t.observer.register("Error",f),n=new(s())(a,u),e=l,i()}))},terminateSession:p,bot:r,unsubscribeFromTicksService:function(){return h.apply(this,arguments)}}};var jr=r(511),zr=r(2194),Rr=r(3620),Dr=r(2745),Br=r(7811),Mr={inherits:function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return t.prototype[r].apply(e,o)}},math:{},isDef:function(e){return void 0!==e}};Mr.math.Size=function(e,t){this.width=e,this.height=t},Mr.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Mr.dom={},Mr.dom.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Mr.math.Coordinate=function(e,t){this.x=Mr.isDef(e)?e:0,this.y=Mr.isDef(t)?t:0},Mr.math.Coordinate.prototype.scale=function(e,t){return t=Mr.isNumber(t)?t:e,this.x*=e,this.y*=t,this},Mr.math.Coordinate.difference=function(e,t){return new Mr.math.Coordinate(e.x-t.x,e.y-t.y)};const Ur=Mr;var Fr=r(3481),Gr=r(5876);function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Vr(){Vr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==qr(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qr(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){Wr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wr(e,t,r){return(t=function(e){var t=function(e){if("object"!=qr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kr(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}window.goog=Ur;var $r=function(){["blockInline"].forEach((function(e){Blockly.ContextMenuRegistry.registry.getItem(e).preconditionFn=function(){return"hidden"}}));var e={undoWorkspace:(0,N.localize)("Undo"),redoWorkspace:(0,N.localize)("Redo"),cleanWorkspace:(0,N.localize)("Clean up Blocks"),collapseWorkspace:(0,N.localize)("Collapse Blocks"),expandWorkspace:(0,N.localize)("Expand Blocks"),workspaceDelete:(0,N.localize)("Delete All Blocks")};Object.keys(e).forEach((function(t){Blockly.ContextMenuRegistry.registry.getItem(t).displayText=(0,N.localize)(e[t])}))},Xr=function(){var e,t=(e=Vr().mark((function e(){var t,n,o;return Vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(164).then(r.t.bind(r,1164,23));case 2:return t=e.sent,window.Blockly=t.default,window.Blockly.Colours={},n=new Blockly.Generator("code"),o=Hr(Hr({},Fr),n),window.Blockly.JavaScript=o,window.Blockly.Themes.zelos_renderer=Blockly.Theme.defineTheme("zelos_renderer",{base:Blockly.Themes.Zelos,componentStyles:{}}),$r(),(0,Gr.h)(),e.next=13,r.e(940).then(r.bind(r,1940));case 13:return e.next=15,r.e(958).then(r.bind(r,7958));case 15:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Kr(a,n,o,i,l,"next",e)}function l(e){Kr(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),Qr=r(651);function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function Zr(){Zr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Jr(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Jr(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function en(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function tn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){en(a,n,o,i,l,"next",e)}function l(e){en(a,n,o,i,l,"throw",e)}i(void 0)}))}}function rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nn(n.key),n)}}function nn(e){var t=function(e){if("object"!=Jr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jr(t)?t:t+""}var on=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.terminateConnection=function(){a.R.terminate()},this.interpreter=null,this.workspace=null,this.before_run_funcs=[],this.symbol=null,this.is_bot_running=!1}return t=e,l=[{key:"initWorkspace",value:(p=tn(Zr().mark((function t(n,l,c,s,u){var f,d,p=this;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xr(u);case 2:return t.next=4,(0,zr.EB)();case 4:return f=t.sent,a.R.init(),this.interpreter=Ir(),d=this,Blockly.Blocks.trade_definition_tradetype.onchange=function(e){var t=this;if(this.workspace&&!Blockly.derivWorkspace.isFlyoutVisible&&!this.workspace.isDragging()){this.enforceLimitations();var r=e.name;if(e.type===Blockly.Events.BLOCK_CHANGE){var n="SYMBOL_LIST"===r,o="TRADETYPECAT_LIST"===r;if(n||o){var a=i.A.instance.contracts_for,l=this.getTopParent().getChildByType("trade_definition_market"),c=l.getFieldValue("MARKET_LIST"),s=l.getFieldValue("SUBMARKET_LIST"),u=l.getFieldValue("SYMBOL_LIST"),f=this.getFieldValue("TRADETYPECAT_LIST"),p=this.getFieldValue("TRADETYPE_LIST");if("accumulator"===p||(0,Qr.iH)(d),n){if(a.getTradeTypeCategories(c,s,u).then((function(r){var n=t.getField("TRADETYPECAT_LIST");n&&n.updateOptions(r,{default_value:f,should_pretend_empty:!0,event_group:e.group})})),d.symbol=u,!d.is_bot_running&&d.interpreter&&!this.workspace.options.readOnly&&u!==d.interpreter.bot.tradeEngine.symbol){var m=document.querySelector("#db-animation__run-button");m&&(m.disabled=!0),d.interpreter.unsubscribeFromTicksService().then(tn(Zr().mark((function e(){var t;return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=d.interpreter)||void 0===t?void 0:t.bot.tradeEngine.watchTicks(u);case 2:case"end":return e.stop()}}),e)}))))}}else o&&e.blockId===this.id&&a.getTradeTypes(c,s,u,f).then((function(r){t.getField("TRADETYPE_LIST").updateOptions(r,{default_value:p,should_pretend_empty:!0,event_group:e.group})}))}}}},t.abrupt("return",new Promise((function(t,a){r.p=n,i.A.setInstance(c),ve.A.setInstance(l);var u=window.innerWidth;try{var d,m=.7,h=ve.A.instance.handleFileChange;u<1640&&(m=s?.6:(null===(d=document.getElementById("scratch_div"))||void 0===d?void 0:d.offsetWidth)/u/1.5);var y=document.getElementById("scratch_div");if(!y)return;p.workspace=Blockly.inject(y,{media:"".concat(r.p,"media/"),renderer:"zelos",trashcan:!s,zoom:{wheel:!0,startScale:m},scrollbars:!0,theme:Blockly.Themes.zelos_renderer}),p.workspace.RTL=(0,Rr.Qq)(),p.workspace.cached_xml={main:Dr.default},p.workspace.addChangeListener(p.valueInputLimitationsListener.bind(p)),p.workspace.addChangeListener((function(e){return(0,Br.Kt)(p.workspace,e)})),p.workspace.addChangeListener((function(e){return p.workspace.dispatchBlockEventEffects(e)})),p.workspace.addChangeListener((function(e){if("drag"!==e.type||e.isStart||s||(0,Br.ae)(),e.type==Blockly.Events.BLOCK_CHANGE){var t=p.workspace.getBlockById(e.blockId);s&&t&&"collapsed"==e.element&&(t.contextMenu=!1)}})),Blockly.derivWorkspace=p.workspace;var v=new Blockly.Names("window");v.variableMap=Blockly.derivWorkspace.getVariableMap(),Blockly.JavaScript.variableDB_=v,p.addBeforeRunFunction(p.unselectBlocks.bind(p)),p.addBeforeRunFunction(p.disableStrayBlocks.bind(p)),p.addBeforeRunFunction(p.checkForErroredBlocks.bind(p)),p.addBeforeRunFunction(p.checkForRequiredBlocks.bind(p)),p.workspace.current_strategy_id=Blockly.utils.idGenerator.genUid(),Blockly.derivWorkspace.strategy_to_load=Dr.default,Blockly.getMainWorkspace().strategy_to_load=Dr.default,Blockly.getMainWorkspace().RTL=(0,Rr.Qq)();var _=o.$.default_file_name;if(f&&f.length){var b=f[0];Blockly.derivWorkspace.strategy_to_load=b.xml,Blockly.getMainWorkspace().strategy_to_load=b.xml,_=b.name,Blockly.derivWorkspace.current_strategy_id=b.id,Blockly.getMainWorkspace().current_strategy_id=b.id}var g="dbot-load".concat(Date.now());Blockly.Events.setGroup(g),Blockly.Xml.domToWorkspace(Blockly.utils.xml.textToDom(Blockly.derivWorkspace.strategy_to_load),p.workspace),ve.A.instance.save_modal.updateBotName(_),p.workspace.cleanUp(0,s?60:56),p.workspace.clearUndo(),window.dispatchEvent(new Event("resize")),window.addEventListener("dragover",e.handleDragOver),window.addEventListener("drop",(function(t){return e.handleDropOver(t,h)})),y.parentNode.style.overflow="hidden",t()}catch(e){throw a(e),e}})));case 10:case"end":return t.stop()}}),t,this)}))),function(e,t,r,n,o){return p.apply(this,arguments)})},{key:"isStrategyUpdated",value:function(e,t){var r=this;if(t&&t.length){var n,o=null===(n=t.filter((function(e){var t;return(null==e?void 0:e.id)===(null===(t=r.workspace)||void 0===t?void 0:t.current_strategy_id)})))||void 0===n?void 0:n[0];if(null!=o&&o.xml){var a=null==o?void 0:o.xml,i=Blockly.Xml.domToText(e);if((0,jr.hS)(a,i))return!1}}return!0}},{key:"saveRecentWorkspace",value:(d=tn(Zr().mark((function e(){var t,r,o,a;return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!=this&&this.workspace?null===(t=Blockly)||void 0===t||null===(r=t.Xml)||void 0===r?void 0:r.workspaceToDom(this.workspace):null,e.prev=1,e.next=4,(0,zr.EB)();case 4:if(a=e.sent,!o||!this.isStrategyUpdated(o,a)){e.next=8;break}return e.next=8,(0,zr.dh)(o,n.ep.UNSAVED);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),jr.PA.emit("Error",e.t0),e.next=15,(0,zr.dh)(o,n.ep.UNSAVED);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return d.apply(this,arguments)})},{key:"addBeforeRunFunction",value:function(e){this.before_run_funcs.push(e)}},{key:"shouldRunBot",value:function(){return this.before_run_funcs.every((function(e){return!!e()}))}},{key:"initializeInterpreter",value:(f=tn(Zr().mark((function e(){return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.interpreter){e.next=3;break}return e.next=3,this.interpreter.terminateSession();case 3:this.interpreter=Ir();case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"runBot",value:function(){var e=this;if(!a.R.is_stopping)try{a.R.is_stopping=!1;var t=this.generateCode();this.interpreter.bot.tradeEngine.checkTicksPromiseExists()||(this.interpreter=Ir()),this.is_bot_running=!0,a.R.setIsRunning(!0),this.interpreter.run(t).catch((function(t){jr.PA.emit("Error",t),e.stopBot()}))}catch(e){jr.PA.emit("Error",e),this.interpreter&&this.stopBot()}}},{key:"generateCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"\n            var BinaryBotPrivateInit;\n            var BinaryBotPrivateStart;\n            var BinaryBotPrivateBeforePurchase; \n            var BinaryBotPrivateDuringPurchase;\n            var BinaryBotPrivateAfterPurchase;\n            var BinaryBotPrivateLastTickTime;\n            var BinaryBotPrivateTickAnalysisList = [];\n            var BinaryBotPrivateHasCalledTradeOptions = false;\n\n           \n            function recursiveList(list, final_list){\n                for(var i=0; i < list.length; i++){\n                    if(typeof(list[i]) === 'object'){\n                        recursiveList(list[i], final_list);\n                    }\n                    if(typeof(list[i]) == 'number'){\n                        final_list.push(list[i]);   \n                                  \n                    }\n                }\n                return final_list;\n            }\n\n            function BinaryBotPrivateRun(f, arg) {\n                if (f) return f(arg);\n                return false;\n            }\n            function BinaryBotPrivateTickAnalysis() {\n                var currentTickTime = Bot.getLastTick(true);\n                while (currentTickTime === 'MarketIsClosed') {\n                    sleep(5);\n                    currentTickTime = Bot.getLastTick(true);\n                }\n                currentTickTime = currentTickTime.epoch;\n                if (currentTickTime === BinaryBotPrivateLastTickTime) {\n                    return;\n                }\n                BinaryBotPrivateLastTickTime = currentTickTime;\n                for (var BinaryBotPrivateI = 0; BinaryBotPrivateI < BinaryBotPrivateTickAnalysisList.length; BinaryBotPrivateI++) {\n                    BinaryBotPrivateRun(BinaryBotPrivateTickAnalysisList[BinaryBotPrivateI]);\n                }\n            }\n            var BinaryBotPrivateLimitations = ".concat(JSON.stringify(e),";\n            ").concat(Blockly.JavaScript.javascriptGenerator.workspaceToCode(this.workspace),"\n            BinaryBotPrivateRun(BinaryBotPrivateInit);\n            while (true) {\n                BinaryBotPrivateTickAnalysis();\n                BinaryBotPrivateRun(BinaryBotPrivateStart);\n                if (!BinaryBotPrivateHasCalledTradeOptions) {\n                    sleep(1);\n                    continue;\n                }\n                while (watch('before')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateBeforePurchase);\n                }\n                while (watch('during')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateDuringPurchase);\n                }\n                BinaryBotPrivateTickAnalysis();\n                if (!BinaryBotPrivateRun(BinaryBotPrivateAfterPurchase)) {\n                    break;\n                }\n            }\n            \n            ")}},{key:"stopBot",value:(u=tn(Zr().mark((function e(){return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.R.is_stopping){e.next=2;break}return e.abrupt("return");case 2:return a.R.setIsRunning(!1),e.next=5,this.interpreter.stop();case 5:return this.is_bot_running=!1,this.interpreter=null,this.interpreter=Ir(),e.next=10,this.interpreter.bot.tradeEngine.watchTicks(this.symbol);case 10:(0,Qr.iH)(this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"terminateBot",value:(s=tn(Zr().mark((function e(){return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.interpreter){e.next=7;break}return e.next=3,this.interpreter.terminateSession();case 3:return this.interpreter=null,this.interpreter=Ir(),e.next=7,this.interpreter.bot.tradeEngine.watchTicks(this.symbol);case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"unselectBlocks",value:function(){return Blockly.getSelected()&&Blockly.getSelected().unselect(),!0}},{key:"disableStrayBlocks",value:function(){var e=this;return this.workspace.getTopBlocks().forEach((function(t){t.isMainBlock()||t.isIndependentBlock()||e.disableBlocksRecursively(t)})),!0}},{key:"disableBlocksRecursively",value:function(e){var t,r;e.setDisabled(!0),null!=e&&null!==(t=e.outputConnection)&&void 0!==t&&t.targetConnection&&this.disableBlocksRecursively(null==e||null===(r=e.outputConnection)||void 0===r?void 0:r.sourceBlock_)}},{key:"checkForErroredBlocks",value:function(){this.valueInputLimitationsListener({},!0);var e=this.workspace.getAllBlocks(!0).filter((function(e){return e.is_error_highlighted&&!e.disabled})).filter((function(e,t,r){return t===r.findIndex((function(t){return t.error_message===e.error_message}))}));return!e.length||(this.workspace.centerOnBlock(e[0].id),e.forEach((function(e){jr.PA.emit("ui.log.error",e.error_message)})),!1)}},{key:"centerAndHighlightBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.workspace.getBlockById(e);r&&(this.workspace.getAllBlocks().forEach((function(e){return e.setErrorHighlighted(!1)})),t&&r.blink(),r.setErrorHighlighted(!0),this.workspace.centerOnBlock(r.id))}},{key:"unHighlightAllBlocks",value:function(){var e;null===(e=this.workspace)||void 0===e||e.getAllBlocks().forEach((function(e){return e.setErrorHighlighted(!1)}))}},{key:"checkForRequiredBlocks",value:function(){return(0,Br.gh)(this.workspace)}},{key:"valueInputLimitationsListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t||this.workspace&&!this.workspace.isDragging())&&(Blockly.JavaScript.javascriptGenerator.init(this.workspace),t&&Blockly.hideChaff(!1),this.workspace.getAllBlocks(!0).forEach((function(r){if(t||e.type===Blockly.Events.BLOCK_DRAG&&!e.isStart||e.type===Blockly.Events.BLOCK_DELETE||e.type===Blockly.Events.BLOCK_CREATE||e.type===Blockly.Events.UI&&("click"===e.element||"selected"===e.element)||(l=r,e.type===Blockly.Events.BLOCK_CHANGE&&e.blockId===l.id)||function(t){return e.type===Blockly.Events.BLOCK_CHANGE&&t.inputList.some((function(t){if(t.connection){var r=t.connection.targetBlock();return r&&e.blockId===r.id}return!1}))}(r)||function(t){if(e.type===Blockly.Events.BLOCK_CHANGE&&"disabled"===e.element)for(var r=t.getParent();null!==r;){if(r.id===e.blockId)return!0;r=r.getParent()}return!1}(r)){if(r.disabled){var n=function(e){e.forEach((function(e){e.setErrorHighlighted(!1),n(e.getChildren())}))};return void n([r])}if(!r.getRequiredValueInputs)return;var o=r.getRequiredValueInputs(),a=Object.keys(o).some((function(e){var t=Blockly.getSelected()===r,n=r.disabled||r.getInheritedDisabled();if(t||n)return!1;if(r.isCollapsed()&&r.hasErrorHighlightedDescendant())return!0;var a=r.getInput(e);if(a||r.domToMutation){if(a.connection){var i=Blockly.JavaScript.javascriptGenerator.ORDER_ATOMIC,l=Blockly.JavaScript.javascriptGenerator.valueToCode(r,e,i),c=o[e];return"function"==typeof c?!!c(l):!l}}else console.warn("Detected a non-existent required input.",{input_name:e,type:r.type});return!0}));if(a&&r.removeSelect(),r.setErrorHighlighted(a,r.error_message||void 0),t&&(r.is_error_highlighted||r.hasErrorHighlightedDescendant()))for(var i=r;i;)i.setCollapsed(!1),i=i.getParent()}var l})))}},{key:"getStrategySounds",value:function(){var e=this.workspace.getAllBlocks().filter((function(e){return"notify"===e.type})),t=[];return e.forEach((function(e){var r=e.inputList[0].fieldRow[3].value_;"silent"!==r&&t.push(r)})),t}}],c=[{key:"handleDragOver",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleDropOver",value:function(e,t){var r=document.getElementById("scratch_div"),n=document.getElementById("load-strategy__local-dropzone-area");r.contains(e.target)?t(e):n&&n.contains(e.target)?t(e,!1):(e.stopPropagation(),e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")}}],l&&rn(t.prototype,l),c&&rn(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,l,c,s,u,f,d,p}();const an=new on},5876:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});var n=function(){return(e=Blockly).Colours.RootBlock={colour:"#064e72",colourSecondary:"#064e72",colourTertiary:"#6d7278"},e.Colours.Base={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},e.Colours.Special1={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},e.Colours.Special2={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},e.Colours.Special3={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},void(e.Colours.Special4={colour:"#e5e5e5",colourSecondary:"#000000",colourTertiary:"#0e0e0e"});var e}},5905:(e,t,r)=>{"use strict";r.d(t,{F:()=>l,U:()=>i});var n=r(5060),o=r.n(n),a=r(69),i=function(e){var t=e.data,r=e.filename,n=e.type,a=new Blob([t],{type:n});o().saveAs(a,r)},l=function(e,t){var r=a.$.opposites[t.toUpperCase()];if(!r)return a.$.NOT_AVAILABLE_DROPDOWN_OPTIONS;var n=r.map((function(e){return Object.entries(e)[0].reverse()}));return"both"!==e?n.filter((function(t){return t[1]===e})):n}},7811:(e,t,r)=>{"use strict";r.d(t,{At:()=>Z,A$:()=>ee,PZ:()=>J,O4:()=>ce,I7:()=>re,kh:()=>j,NZ:()=>P,gh:()=>H,Hh:()=>M,Lv:()=>G,xy:()=>le,$d:()=>K,m6:()=>X,j6:()=>$,UN:()=>D,xw:()=>W,MN:()=>se,Kt:()=>Q,Wf:()=>R,T2:()=>I,ae:()=>z});var n=r(2641),o=r(5905),a=r(69),i=r(3191),l=r(511);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blocks_pending_reconnect={},this.workspace=this.createWorkspace(),this.workspace_variables={},this.has_market_block=!1,this.exception_blocks=["r_100"]},t=[{key:"getConversions",value:function(){var e=this,t=function(t,r,n,o){var a=e.workspace.newBlock(r),i=Array.from(t.children),l=i.find((function(e){return"mutation"===e.tagName.toLowerCase()}));if(l){var c=parseInt(l.getAttribute("items"))||0;if(c>0){for(var s=0;s<c;s++)a.onIconClick();i.filter((function(e){return"value"===e.tagName.toLowerCase()})).forEach((function(t){var r=t.getAttribute("name"),n=parseInt(r.replace(/[^0-9]+/g,""));Array.from(t.children).forEach((function(t){var r=e.convertBlockNode(t,a),i=a.getBlocksInStatement("STACK").find((function(e,t){return n===t}));i.getInput(o).connection.connect(r.outputConnection)})),t.parentNode.removeChild(t)}))}}var u=e.generateUniqueVariable(n),f=e.workspace.newBlock("variables_get");return f.setFieldValue(u.getId(),"VAR"),a.setFieldValue(u.getId(),"VARIABLE"),{block_to_attach:f,statement_blocks:[a]}},r=function(t,r,n){var o=e.workspace.newBlock(r),a={input_list:[{old:"INPUT",new:"INPUT_LIST"}],period:[{old:"PERIOD",new:"PERIOD"}],fast_ema_period:[{old:"FAST_EMA_PERIOD",new:"FAST_EMA_PERIOD"}],signal_ema_period:[{old:"SMA_PERIOD",new:"SIGNAL_EMA_PERIOD"},{old:"SIGNAL_EMA_PERIOD",new:"SIGNAL_EMA_PERIOD"}],slow_ema_period:[{old:"SLOW_EMA_PERIOD",new:"SLOW_EMA_PERIOD"}],std_dev_multiplier_up:[{old:"UPMULTIPLIER",new:"UPMULTIPLIER"}],std_dev_multiplier_down:[{old:"DOWNMULTIPLIER",new:"DOWNMULTIPLIER"}]};switch(r){case"bb_statement":case"bba_statement":var i=o.getField("BBRESULT_LIST");i&&i.setValue(e.getFieldValue(t,"BBRESULT_LIST"));break;case"macda_statement":var l=o.getField("MACDFIELDS_LIST");l&&l.setValue(e.getFieldValue(t,"MACDFIELDS_LIST"))}(o.required_child_blocks||[]).forEach((function(t){var r=e.workspace.newBlock(t);o.getLastConnectionInStatement("STATEMENT").connect(r.previousConnection)})),o.getBlocksInStatement("STATEMENT").forEach((function(r){var n=a[r.type];n&&n.forEach((function(n){var a=t.querySelector('value[name="'.concat(n.old,'"]'));if(a){var i=r.getInput(n.new);Array.from(a.children).forEach((function(t){var r=e.convertBlockNode(t,o);"shadow"===t.tagName.toLowerCase()&&r.setShadow(!0),i.connection.connect(r.outputConnection)})),a.parentNode.removeChild(a)}}))}));var c=e.generateUniqueVariable(n),s=e.workspace.newBlock("variables_get");return s.setFieldValue(c.getId(),"VAR"),o.setFieldValue(c.getId(),"VARIABLE"),{block_to_attach:s,statement_blocks:[o]}},o=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.workspace.newBlock("trade_definition_tradeoptions"),o=t;if(r)return!1;var a=Array.from(o.children),i=0,l=!1;return a.filter((function(e){return"value"===e.tagName.toLowerCase()})).forEach((function(e){var t=e.getAttribute("name");"BARRIEROFFSET"===t||"SECONDBARRIEROFFSET"===t?i++:"PREDICTION"===t&&(l=!0)})),i>0&&n.createBarrierInputs({allow_both_types:!0,values:[1,-1]}),l&&n.createPredictionInput([0]),["DURATIONTYPE_LIST","CURRENCY_LIST","BARRIEROFFSETTYPE_LIST","SECONDBARRIEROFFSETTYPE_LIST"].forEach((function(t){var r=n.getField(t);r&&r.setValue(e.getFieldValue(o,t))})),{block_to_attach:n}};return{bb:function(e){return r(e,"bb_statement","bb")},bba:function(e){return r(e,"bba_statement","bba")},ema:function(e){return r(e,"ema_statement","ema")},emaa:function(e){return r(e,"emaa_statement","emaa")},lists_create_with:function(e){return t(e,"lists_create_with",(0,n.localize)("list"),"VALUE")},macda:function(e){return r(e,"macda_statement","macda")},market:function(t){return e.has_market_block=!0,o(t)},rsi:function(e){return r(e,"rsi_statement","rsi")},rsia:function(e){return r(e,"rsia_statement","rsia")},sma:function(e){return r(e,"sma_statement","sma")},smaa:function(e){return r(e,"smaa_statement","smaa")},text_join:function(e){return t(e,"text_join",(0,n.localize)("text"),"TEXT")},trade:function(t){var r=e.workspace.newBlock("trade_definition"),n={trade_definition_market:["MARKET_LIST","SUBMARKET_LIST","SYMBOL_LIST"],trade_definition_tradetype:["TRADETYPECAT_LIST","TRADETYPE_LIST"],trade_definition_contracttype:["TYPE_LIST"],trade_definition_candleinterval:["CANDLEINTERVAL_LIST"],trade_definition_restartbuysell:["TIME_MACHINE_ENABLED"],trade_definition_restartonerror:["RESTARTONERROR"]},o={};return Object.keys(n).forEach((function(r){var a=e.workspace.newBlock(r);n[r].forEach((function(r){a.setFieldValue(e.getFieldValue(t,r),r)})),o[r]=a})),Object.values(o).forEach((function(e){r.getLastConnectionInStatement("TRADE_OPTIONS").connect(e.previousConnection)})),{block_to_attach:r}},tradeOptions:o}}},{key:"getIllegalBlocks",value:function(){var e=[],t=i.A.instance.active_symbols.active_symbols,r=a.$.opposites;return t.forEach((function(t){var r=t.symbol.toLowerCase();e.includes(r)||e.push(r)})),Object.keys(r).forEach((function(t){return e.push(t)})),e}},{key:"createWorkspace",value:function(){var e=new Blockly.Options({media:"".concat(r.p,"media/")}),t=new DocumentFragment;return Blockly.createVirtualWorkspace_(t,e,!1,!1)}},{key:"getFieldValue",value:function(e,t){var r=e.querySelector('field[name="'.concat(t,'"]'));return r?r.textContent:""}},{key:"getFirstBlockInStack",value:function(e){var t=e.previousConnection,r=e.getPreviousBlock();if(!t)return e;for(;r&&r!==e.getSurroundParent();)t=r.previousConnection,r=r.getPreviousBlock();return t.sourceBlock_}},{key:"updateRenamedFields",value:function(e){var t={MARKET_LIST:{volidx:"synthetic_index"},TRADETYPECAT_LIST:{endsinout:"inout",staysinout:"inout",callputequal:"callput"},TRADETYPE_LIST:{risefall:"callput",risefallequals:"callputequal"}};return Object.keys(t).forEach((function(r){var n=e.querySelector('field[name="'.concat(r,'"]'));if(n){var o=n.innerText;Object.keys(t[r]).forEach((function(e){o===e&&(n.innerText=t[r][e])}))}})),e}},{key:"naivelyFixLegacyStrategyAfterConversion",value:function(){var e,t=this,r=null===(e=this.workspace)||void 0===e?void 0:e.getTradeDefinitionBlock(),n=(null==r?void 0:r.getBlocksInStatement("INITIALIZATION").length)>0;r&&r.getBlocksInStatement("SUBMARKET").forEach((function(e){if("trade_definition_tradeoptions"!==e.type&&t.has_market_block&&!n){var o=r.getLastConnectionInStatement("INITIALIZATION");e.unplug(!0),o.connect(e.previousConnection)}}))}},{key:"generateUniqueVariable",value:function(e){for(var t=e,r=0;Object.values(this.workspace_variables).includes(t);)t=e+ ++r;var n=Blockly.Variables.getOrCreateVariablePackage(this.workspace,"",t,"");return this.workspace_variables[n.id_]=t,n}},{key:"convertStrategy",value:function(e,t){var r=this;Blockly.Events.disable();var n=this.updateRenamedFields(e);if(e.hasAttribute("is_dbot")&&"true"===e.getAttribute("is_dbot"))return Blockly.Events.enable(),n;if(this.getIllegalBlocks().some((function(e){if(!r.exception_blocks.includes(e))return!!n.querySelector('block[type="'.concat(e,'"]'))})))return t&&t(),Blockly.Events.enable(),Blockly.utils.xml.textToDom("<xml />");var o=[],a=[];Array.from(n.children).forEach((function(e){switch(e.nodeName.toLowerCase()){case"block":case"shadow":a.push(e);break;case"variables":o.push.apply(o,function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.children))}}));var i=function(e){e.forEach((function(e){var t=e.getAttribute("id"),n=e.textContent;if(!r.workspace_variables[t]){var o=Blockly.Variables.getOrCreateVariablePackage(r.workspace,t,n,"");r.workspace_variables[o.id_]=o.name}}))};i(o),i(n.querySelectorAll('field[name="VAR"]')),a.forEach((function(e){return r.convertBlockNode(e)})),Object.keys(this.blocks_pending_reconnect).forEach((function(e){var t=r.workspace.getBlockById(e),n=r.blocks_pending_reconnect[e],o=t.previousConnection;if(o){var a=o.targetConnection,i=o;if(n.reverse().forEach((function(e){i.connect(e.nextConnection),i=e.previousConnection})),a){for(var l=t.previousConnection,c=t.getPreviousBlock();c&&c!==c.getSurroundParent();)l=c.previousConnection,c=c.getPreviousBlock();a.connect(l)}}})),this.naivelyFixLegacyStrategyAfterConversion(),this.workspace.getAllBlocks(!0).forEach((function(e){e.initSvg(),e.renderEfficiently()})),this.workspace.cleanUp();var c=Blockly.Xml.workspaceToDom(this.workspace);return(0,l.Xz)(c),this.workspace=null,Blockly.Events.enable(),c}},{key:"convertBlockNode",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getConversions(),o=e.getAttribute("type"),a=Object.keys(n).includes(o),i=null,l=e.getAttribute("collapsed")&&"true"===e.getAttribute("collapsed")||!1,c=e.getAttribute("movable")&&"false"===e.getAttribute("movable"),s=e.getAttribute("deletable")&&"false"===e.getAttribute("deletable"),u=e.getAttribute("disabled")&&"true"===e.getAttribute("disabled"),f=function(e){e.setCollapsed(l),e.setMovable(!c),e.setDeletable(!s),e.setDisabled(u)};if(a){var d=n[o](e);d.block_to_attach&&(i=d.block_to_attach,f(i)),r&&d.statement_blocks&&d.statement_blocks.forEach((function(e){f(e);var n=t.getClosestLegalPreviousConnection(r);if(n){var o=n.sourceBlock_;t.blocks_pending_reconnect[o.id]||(t.blocks_pending_reconnect[o.id]=[]),t.blocks_pending_reconnect[o.id].push(e)}}))}else if(Object.keys(Blockly.Blocks).includes(o)&&(i=this.workspace.newBlock(o),f(i),i)){var p=Array.from(e.children).find((function(e){return"mutation"===e.tagName.toLowerCase()}));p&&i.domToMutation&&i.domToMutation(p)}return i?(r&&(i.conversion_parent=r),Array.from(e.children).forEach((function(e){switch(e.tagName.toLowerCase()){case"field":var r=e.getAttribute("name"),n=i.getField(r);if(n)if(n instanceof Blockly.FieldVariable){var o=e.getAttribute("id"),a=e.innerText.trim(),l=Blockly.Variables.getOrCreateVariablePackage(t.workspace,o,a,"");t.workspace_variables[l.id_]=a,n.setValue(l.id_)}else n.setValue(e.innerText);break;case"value":t.processValueInputs(i,e);break;case"statement":var c=e.getAttribute("name");t.processStatementInputs(i,c,e);break;case"next":var s=e.closest("statement");if(s){var u=s.getAttribute("name");t.processStatementInputs(i,u,e,i.conversion_parent)}else i.nextConnection&&Array.from(e.children).forEach((function(e){var r=t.convertBlockNode(e);i.nextConnection.connect(r.previousConnection)}))}})),i):(console.warn("Unrecognised block found.",o),!1)}},{key:"processValueInputs",value:function(e,t){var r=this,n=t.getAttribute("name"),o=e.getInput(n);if(!o)return console.warn("Unrecognised value input",n),!1;Array.from(t.children).forEach((function(t){var n=r.convertBlockNode(t,e);if(!n)return console.warn("Illegal child.",t.getAttribute("type")),!1;"shadow"===t.tagName.toLowerCase()&&n.setShadow(!0),o.connection.connect(n.outputConnection)}))}},{key:"processStatementInputs",value:function(e,t,r){var n=this,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||e;if(!o.getInput(t))return console.warn("Unrecognised statement input",t),!1;Array.from(r.children).forEach((function(e){var r=n.convertBlockNode(e,o);if(!r)return console.warn("Unrecognised child in statement",e.getAttribute("type")),!1;var a=o.getInput(t);a&&r.previousConnection&&a.connection.connect(r.previousConnection)}))}},{key:"getClosestLegalPreviousConnection",value:function(e){if(a.$.procedureDefinitionBlocks.includes(e.type)){if(0===e.getBlocksInStatement("STACK").length){var t=e.getInput("STACK"),r=this.workspace.newBlock("useless_block");return t.connection.connect(r.previousConnection),r.previousConnection}return e.getInputTargetBlock("STACK").previousConnection}for(var n=this.getFirstBlockInStack(e),o=this.isConnectedToProtectedStatementInput(n);o;){var i=n.getParent();i&&(n=i,o=this.isConnectedToProtectedStatementInput(n))}return n.previousConnection?n.previousConnection:!!e.conversion_parent&&this.getClosestLegalPreviousConnection(e.conversion_parent)}},{key:"isConnectedToProtectedStatementInput",value:function(e){var t=this.getFirstBlockInStack(e).previousConnection;if(t){var r=t.targetConnection;if(r){var n=r.sourceBlock_,o=n.getInputWithConnection(r),a=n.protected_statements||[];if(o&&a.includes(o.name))return!0}}return!1}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),p=r(1575),m=r(3620),h=r(2194),y=r(3129),v=r(1951),_=r(8382),b=r(8843),g=r(1361),E=r(6464);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(){O=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(I([])));k&&k!==r&&n.call(k,i)&&(g=k);var x=b.prototype=v.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==w(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(w(t)+" is not iterable")}return _.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(T.prototype),s(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(x),s(x,c,"Generator"),s(x,i,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function T(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){T(a,n,o,i,l,"next",e)}function l(e){T(a,n,o,i,l,"throw",e)}i(void 0)}))}}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={media:"".concat(r.p,"media/"),zoom:{wheel:!0,startScale:a.$.workspaces.previewWorkspaceStartScale},readOnly:!0,scrollbars:!0,renderer:"zelos"},I=function(e){if(window.Blockly){var t=e.strategy_id,r=e.convertedDom,n=e.file_name,o=e.from,a=e.block_string;window.Blockly.xmlValues=N(N({},window.Blockly.xmlValues),{},{strategy_id:t,convertedDom:r,file_name:n,from:o,block_string:a})}},j=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Blockly.derivWorkspace).getAllBlocks(!0).find((function(e){return"trade_definition_tradetype"===e.type})),t=null==e?void 0:e.getFieldValue("TRADETYPE_LIST"),r="trade_definition_tradeoptions";return"multiplier"===t&&(r="trade_definition_multiplier"),"accumulator"===t&&(r="trade_definition_accumulator"),r},z=function(){var e,t,r,n,o,a,i,l,c,s,u,f=((u=(s=(null===(i=Blockly)||void 0===i||null===(l=i.derivWorkspace)||void 0===l||null===(c=l.trashcan)||void 0===c?void 0:c.svgGroup.getAttribute("transform")).match(/translate\((-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)\)/))&&s.length>2?{x:parseFloat(s[1]),y:parseFloat(s[2])}:null)||p.P.emit("Error","Invalid String"),{translate_X:u.x,translate_Y:u.y}),d=f.translate_X,m=f.translate_Y,h=null===(e=Blockly.getSelected())||void 0===e?void 0:e.getSvgRoot().getBoundingClientRect(),y=200,v=(null==h?void 0:h.left)||0,b=(null==h?void 0:h.top)||0,g=[j(),"trade_definition","purchase","before_purchase"];null!=g&&g.includes(null===(t=Blockly)||void 0===t||null===(r=t.getSelected())||void 0===r?void 0:r.type)&&b>=m-y&&b<=m+y&&v>=d-y&&v<=d+y&&p.P.emit("ui.log.error",null===(n=_.c[null===(o=Blockly)||void 0===o||null===(a=o.getSelected())||void 0===a?void 0:a.type])||void 0===n?void 0:n.default)},R=function(){var e,t,r;if(null!==y.A&&void 0!==y.A&&y.A.instance){var n=y.A.instance.load_modal,o=null!==(e=null==n||null===(t=n.dashboard_strategies)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.name)&&void 0!==e?e:a.$.default_file_name;if(document.title.indexOf("-")>-1){var i=document.title.substr(document.title.indexOf("-")),l=document.title.replace(i,"- ".concat(o));document.title=l}else document.title+=" - ".concat(o)}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"@deriv/bot",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;r.setAttribute("is_dbot","true"),r.setAttribute("collection",t?"true":"false");var n=Blockly.Xml.domToPrettyText(r);(0,o.U)({data:n,type:"text/xml;charset=utf-8",filename:"".concat(e,".xml")})},B=function(e){return new Promise((function(t){return setTimeout(t,e)}))},M=function(){var e=L(O().mark((function e(t){var r,o,a,i,l,c,s,u,f,_,E,w,k,x,S,T,L,A;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.block_string,o=t.drop_event,a=t.file_name,i=t.strategy_id,l=t.from,c=t.workspace,s=t.showIncompatibleStrategyDialog,null!==y.A&&void 0!==y.A&&y.A.instance&&c){e.next=3;break}return e.abrupt("return");case 3:return u=y.A.instance,f=u.setLoading,_=u.load_modal,E=_.setOpenButtonDisabled,w=_.setLoadedLocalFile,f(!0),e.next=8,B(100);case 8:if(k=function(){w(null),(0,b.N)(g.UC.invalid_xml),f(!1);var e=(0,n.localize)("XML file contains unsupported elements. Please check or modify file.");return p.P.emit("ui.log.error",e),{error:e}},e.prev=9,!(new DOMParser).parseFromString(r,"application/xml").getElementsByTagName("parsererror").length){e.next=13;break}return e.abrupt("return",k());case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(9),e.abrupt("return",k());case 18:e.prev=18,x=Blockly.utils.xml.textToDom(r),e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(18),e.abrupt("return",k());case 25:if(S=new d,x=S.convertStrategy(x,s),(T=x.querySelectorAll("block")).length){e.next=30;break}return e.abrupt("return",k());case 30:if(!Array.from(T).some((function(e){var t=e.getAttribute("type");return!Object.keys(Blockly.Blocks).includes(t)}))){e.next=33;break}return e.abrupt("return",k());case 33:if(e.prev=33,L=x.hasAttribute("collection")&&"true"===x.getAttribute("collection"),A=L?"load_collection".concat(Date.now()):"dbot-load".concat(Date.now()),Blockly.Events.setGroup(A),(0,m.nw)(c,Array.from(T).map((function(e){return e.getAttribute("type")}))),I({strategy_id:i,convertedDom:x,file_name:a,from:l,block_string:r}),!L){e.next=43;break}U(x,o,A,c),e.next=53;break;case 43:return e.next=45,F(x,A,c);case 45:if(c!==Blockly.derivWorkspace){e.next=53;break}return y.A.instance.save_modal.updateBotName(a),c.clearUndo(),c.current_strategy_id=i||Blockly.utils.idGenerator.genUid(),e.next=53,(0,h.dh)(x,l);case 53:c.getAllBlocks().forEach((function(e){e.disabled&&(e.is_user_disabled_state=!0)})),c===Blockly.derivWorkspace&&p.P.emit("ui.log.success",{log_type:v.Uk.LOAD_BLOCK}),e.next=61;break;case 57:return e.prev=57,e.t2=e.catch(33),console.error(e.t2),e.abrupt("return",k());case 61:return e.prev=61,f(!1),E(!1),e.finish(61);case 65:case"end":return e.stop()}}),e,null,[[9,15],[18,22],[33,57,61,65]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e,t,r,n){Blockly.Events.setGroup(r);var o=Blockly.Xml.domToWorkspace(e,n).map((function(e){return n.getBlockById(e)}));t&&0!==Object.keys(t).length?function(e,t,r){var n=t||{},o=n.clientX,a=void 0===o?0:o,i=n.clientY,l=void 0===i?0:i,c=r.getMetrics(),s=1/r.scale,u=c.absoluteLeft-c.viewLeft,f=document.body.offsetHeight-c.viewHeight-c.viewTop,d=a?(a-u)*s:0,p=l?(l-f-76)*s:0;r.cleanUp(d,p,e)}(o,t,n):n.cleanUp()},F=function(){var e=L(O().mark((function e(t,r,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Blockly.Events.setGroup(r),e.next=3,n.asyncClear();case 3:Blockly.Xml.domToWorkspace(t,n),n.cleanUp();case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),G=function(e){return new Promise((function(t,r){var o=e.getFieldValue("URL");-1===o.indexOf("http")&&(o="http://".concat(o));var a="/"===o.slice(-1)[0];if(!o.match(/[^/]*\.[a-zA-Z]{3}$/)&&!a)return r((0,n.localize)("Target must be an XML file"));if(a&&(o+="index.xml"),e.isKnownUrl(o))return e.setDisabled(!0),r((0,n.localize)("This URL is already loaded"));var i=function(){return r((0,n.localize)("An error occured while trying to load the URL"))};fetch(o).then((function(r){r.ok?r.text().then((function(r){(function(e,t){return new Promise((function(r,o){var a;try{a=Blockly.utils.xml.textToDom(e)}catch(e){return o((0,n.localize)("Unrecognized file format"))}try{a.hasAttribute("collection")&&"true"===a.getAttribute("collection")||o((0,n.localize)("Remote blocks to load must be a collection.")),q(a).then((function(){Array.from(a.children).forEach((function(e){return V(e,t)})),r()})).catch((function(){o()}))}catch(e){o((0,n.localize)("Unable to load the block file."))}}))})(r,e).then((function(){return t(e)})).catch(i)})):i()})).catch(i)}))},q=function(e){return new Promise((function(t,r){var n=[];Array.from(e.children).forEach((function(e){if("loader"===e.getAttribute("type")){e.remove();var t=Blockly.Xml.domToBlock(e,Blockly.derivWorkspace);n.push(G(t))}})),n.length?Promise.all(n).then(t,r):t([])}))},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("variables"===e.tagName.toLowerCase())return Blockly.Xml.domToVariables(e,Blockly.derivWorkspace);var r=e.getAttribute("type"),n=new d,o=Blockly.Xml.blockToDom(n.convertBlockNode(e));Array.from(o.getElementsByTagName("arg")).forEach((function(e){e.hasAttribute("varid")&&e.setAttribute("varId",e.getAttribute("varid"))})),(0,m.nw)(Blockly.derivWorkspace,r);var a=Blockly.Xml.domToBlock(o,Blockly.derivWorkspace);return t&&t.blocks_added_by_me.push(a),a},Y=function(e,t){return e.forEach((function(e){var r,n;if("misplaced"===t&&e)p.P.emit("ui.log.error",null===(r=_.c[null==e?void 0:e.type])||void 0===r?void 0:r[t]);else if("missing"===t&&e)p.P.emit("ui.log.error",null===(n=_.c[e])||void 0===n?void 0:n[t]);else if("disabled"===t&&e){var o,a=!1,i=null===(o=_.c[e.type])||void 0===o?void 0:o[t];e.disabled&&i?(p.P.emit("ui.log.error",i),a=!0):!a&&e.childBlocks_&&e.childBlocks_.forEach((function(e){var r,n=null===(r=_.c[e.type])||void 0===r?void 0:r[t];n&&p.P.emit("ui.log.error",n)}))}}))},H=function(e){if(!e)return!1;var t=j(e),r=a.$.mandatoryMainBlocks,n=[t].concat(k(r)),o=function(e,t){return e.getAllBlocks().filter((function(e){if(t.includes(e.type))return 0===e.childBlocks_.length&&t.includes(e.category_)||null===e.parentBlock_}))}(e,n),i=function(e,t){return t.filter((function(t){return!e.getAllBlocks().some((function(e){return e.type===t}))}))}(e,n),l=function(e){return e.filter((function(e){var t=e.childBlocks_&&e.childBlocks_.some((function(e){return!0===e.disabled}));return!0===e.disabled||t}))}(o);return i&&Y(i,"missing"),l&&Y(l,"disabled"),0===[].concat(k(i),k(l)).length},W=function(e,t,r,n){var o,a=e.getMetrics(),i=a.viewLeft-a.scrollLeft,l=a.viewTop-a.scrollTop,c=l;if(r?(i+=n?t:-t,y.A.instance.is_mobile||(c+=-20)):(i+=-20,c+=n?t:-t),e.RTL){var s,u,f,d;i=t;var p=null===(s=document.getElementById("gtm-toolbox"))||void 0===s||null===(u=s.getBoundingClientRect())||void 0===u?void 0:u.top;if((null===(f=e.svgBlockCanvas_)||void 0===f||null===(d=f.getBoundingClientRect())||void 0===d?void 0:d.top)>p&&(c=l),window.innerWidth<768){var m,h,v,_;null==e||null===(m=e.scrollbar)||void 0===m||m.set(0,c);var b=(null===(h=e.svgBlockCanvas_)||void 0===h?void 0:h.getBoundingClientRect().width)-(null===(v=e.svgBlockCanvas_)||void 0===v?void 0:v.getBoundingClientRect().left)+60;return void(null==e||null===(_=e.scrollbar)||void 0===_||_.set(b,c))}}null==e||null===(o=e.scrollbar)||void 0===o||o.set(i,c)},K=function(e,t,r){var n=e&&Blockly.Events.getGroup()||r||!0;Blockly.Events.setGroup(n),t(),e||Blockly.Events.setGroup(!1)},$=function(e){var t=Blockly.Events.recordUndo;Blockly.Events.setRecordUndo(!1),e(),Blockly.Events.setRecordUndo(null==t||t)},X=function(e){Blockly.Events.disable(),e(),Blockly.Events.enable()},Q=function(e,t){t.type!==Blockly.Events.BLOCK_DRAG||t.isStart||e.getAllBlocks().forEach((function(e){if(e.getParent()&&!e.is_user_disabled_state){var r=e.restricted_parents||[];if(0!==r.length){var n=!r.some((function(t){return e.isDescendantOf(t)}));K(!0,(function(){e.setDisabled(n)}),t.group),Blockly.Events.setGroup(!1)}}}))},J=function(e){return!e||"''"===e},Z=function(e){try{var t;if(null==e||!e.collapsed_)return;if(null==e?void 0:e.getField(e.type))return;var r=(u=null==e||null===(t=e.inputList[0])||void 0===t?void 0:t.fieldRow.map((function(e){return e.value_})),f=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(u,f)||x(u,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],i=null==e?void 0:e.getField(Blockly.constants.COLLAPSED_FIELD_NAME),l=null==e?void 0:e.getInput(Blockly.constants.COLLAPSED_INPUT_NAME);if(l&&i){l.appendField(new Blockly.FieldImage(o,25,25,"","")),l.appendField(new Blockly.FieldLabel(a,"blocklyTextRootBlockHeaderCollapsed"));var c="".concat(null==e?void 0:e.workspace.options.pathToMedia,"dropdown-arrow.svg"),s=new Blockly.FieldImage(c,16,16,(0,n.localize)("Collapsed"),(function(){return null==e?void 0:e.setCollapsed(!1)}));l.appendField(s,e.type),l.sourceBlock.width=300,i.setVisible(!1)}}catch(f){p.P.emit("ui.log.error",f)}var u,f},ee=function(e){var t,r,o,a=e.getInput("_TEMP_COLLAPSED_INPUT");if(a&&e.collapsed_&&!a.icon_added){var i;a.icon_added=!0;var l="".concat(e.workspace.options.pathToMedia,"dropdown-arrow.svg"),c=new Blockly.FieldImage(l,16,16,(0,n.localize)("Collapsed"),(function(){return e.setCollapsed(!1)})),s=e.getFieldValue("NAME"),u=" (".concat(null==e||null===(i=e.arguments)||void 0===i?void 0:i.join(", "),")");a.appendField(new Blockly.FieldLabel((0,n.localize)("function"),"")).appendField(new Blockly.FieldLabel(s+u,"header__title")).appendField(c),null===(t=(o=a.fieldRow)[0])||void 0===t||t.setVisible(!1),null===(r=o[0])||void 0===r||r.forceRerender()}},te={text:(0,n.localize)("Download Block"),enabled:!0,callback:function(){var e,t,r=null===(e=Blockly)||void 0===e||null===(t=e.getSelected())||void 0===t?void 0:t.svgGroup_,n=Blockly.Xml.domToPrettyText(r);(0,o.U)({data:n,type:"text/xml;charset=utf-8",filename:"block.xml"})}},re=function(e,t){for(var r=0;r<=e.length-1;r++){var o=(0,n.localize)(e[r].text);t.includes(o)?e.splice(r,1):e[r].text=o}},ne=[te],oe=[(0,n.localize)("Duplicate"),(0,n.localize)("Add Comment"),(0,n.localize)("Remove Comment"),(0,n.localize)("Collapse Block"),(0,n.localize)("Expand Block"),(0,n.localize)("Disable Block"),(0,n.localize)("Enable Block"),(0,n.localize)("Download Block")],ae=(0,n.localize)("Delete Block"),ie=(0,n.localize)("Delete All Blocks"),le=function(e){[].concat(ne,k(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])).forEach((function(t){e.push({text:t.text,enabled:t.enabled,callback:t.callback})}));for(var t=0;t<e.length;t++){var r=e[t].text.toLowerCase();if(r.includes("delete"))r.includes("block")&&!r.includes("blocks")?e[t].text=ae:e[t].text=ie;else{var o=(0,n.localize)(e[t].text);oe.includes(o)&&(e[t].text=o)}}},ce=function(e){if(!e)return"invalid_input";try{var t=new Function("return ".concat(e.trim()))();return isNaN(t)?"invalid_input":t}catch(e){return"invalid_input"}},se=function(e){var t=e.getField("CURRENCY_LIST"),r=y.A.instance.client.currency;null==t||t.setValue((0,E.getCurrencyDisplayCode)(r))}},8009:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(2641),o=r(8774),a=r(69);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",_={};function b(){}function g(){}function E(){}var w={};f(w,c,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,c)&&(w=x);var S=E.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,a,l,c){var s=p(e[o],e,a);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(f).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=m;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return g.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:g,configurable:!0}),g.displayName=f(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),f(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),f(S,u,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function c(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sortDropdownOptions=function(e,t){var r=function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e);return r.sort((function(e,r){var o=t.call(n,e[1]),a=t.call(n,r[1]);return o&&!a?1:o===a?0:-1})),r},this.active_symbols=[],this.disabled_symbols=a.$.DISABLED_SYMBOLS,this.disabled_submarkets=a.$.DISABLED_SUBMARKETS,this.init_promise=new o.A,this.is_initialised=!1,this.processed_symbols={},this.trading_times=r,this.ws=t},t=[{key:"retrieveActiveSymbols",value:(r=l().mark((function e(){var t,r,n,o=this,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.next=3,this.trading_times.initialise();case 3:if(t||!this.is_initialised){e.next=7;break}return e.next=6,this.init_promise;case 6:return e.abrupt("return",this.active_symbols);case 7:return this.is_initialised=!0,e.next=10,this.ws.authorized.activeSymbols();case 10:return r=e.sent,n=r.active_symbols,this.active_symbols=n,this.processed_symbols=this.processActiveSymbols(),this.trading_times.onMarketOpenCloseChanged=function(e){Object.keys(e).forEach((function(t){var r=o.active_symbols[t];r&&(r.exchange_is_open=e[t])})),o.changes=e,o.processActiveSymbols()},this.init_promise.resolve(),e.abrupt("return",this.active_symbols);case 17:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){c(a,n,o,i,l,"next",e)}function l(e){c(a,n,o,i,l,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})},{key:"processActiveSymbols",value:function(){return this.active_symbols.reduce((function(e,t){if(a.$.DISABLED_SYMBOLS.includes(t.symbol)||a.$.DISABLED_SUBMARKETS.includes(t.submarket))return e;var r=function(e,r){return-1!==Object.keys(e).findIndex((function(e){return e===t[r]}))};r(e,"market")||(e[t.market]={display_name:t.market_display_name,submarkets:{}});var n=e[t.market].submarkets;r(n,"submarket")||(n[t.submarket]={display_name:t.submarket_display_name,symbols:{}});var o=n[t.submarket].symbols;return r(o,"symbol")||(o[t.symbol]={display_name:t.display_name,pip_size:"".concat(t.pip).length-2,is_active:!t.is_trading_suspended&&t.exchange_is_open}),e}),{})}},{key:"getAllSymbols",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=[];return Object.keys(this.processed_symbols).forEach((function(n){if(!t||!e.isMarketClosed(n)){var o=e.processed_symbols[n],a=o.submarkets;Object.keys(a).forEach((function(e){var t=a[e],i=t.symbols;Object.keys(i).forEach((function(a){var l=i[a];r.push({market:n,market_display:o.display_name,submarket:e,submarket_display:t.display_name,symbol:a,symbol_display:l.display_name})}))}))}})),this.getSymbolsForBot(),r}},{key:"getSymbolsForBot",value:function(){var e=this,t=a.$.QUICK_STRATEGY.DISABLED,r=[];return Object.keys(this.processed_symbols).forEach((function(n){if(!e.isMarketClosed(n)){var o=e.processed_symbols[n].submarkets;Object.keys(o).forEach((function(e){if(!t.SUBMARKETS.includes(e)){var n=o[e],a=n.symbols;Object.keys(a).forEach((function(e){if(!t.SYMBOLS.includes(e)){var o=a[e];r.push({group:n.display_name,text:o.display_name,value:e})}}))}}))}})),r}},{key:"getMarketDropdownOptions",value:function(){var e=this,t=[];if(Object.keys(this.processed_symbols).forEach((function(r){var o=e.processed_symbols[r].display_name+(e.isMarketClosed(r)?" ".concat((0,n.localize)("(Closed)")):"");t.push([o,r])})),0===t.length)return a.$.NOT_AVAILABLE_DROPDOWN_OPTIONS;if(t.sort((function(e){return"synthetic_index"===e[1]?-1:1})),t.some((function(t){return e.isMarketClosed(t[1])}))){var r=this.sortDropdownOptions(t,this.isMarketClosed);return this.isMarketClosed("forex")?r.sort((function(e){return"synthetic_index"===e[1]?-1:1})):r}return t}},{key:"getSubmarketDropdownOptions",value:function(e){var t=this,r=[],o=this.processed_symbols[e];if(o){var i=o.submarkets;Object.keys(i).forEach((function(e){var o=i[e].display_name+(t.isSubmarketClosed(e)?" ".concat((0,n.localize)("(Closed)")):"");r.push([o,e])}))}return 0===r.length?a.$.NOT_AVAILABLE_DROPDOWN_OPTIONS:("synthetic_index"===e&&r.sort((function(e){return"random_index"===e[1]?-1:1})),this.sortDropdownOptions(r,this.isSubmarketClosed))}},{key:"getSymbolDropdownOptions",value:function(e){var t=this,r=Object.keys(this.processed_symbols).reduce((function(r,o){var a=t.processed_symbols[o].submarkets;return Object.keys(a).forEach((function(o){if(o===e){var i=a[o].symbols;Object.keys(i).forEach((function(e){var o=i[e].display_name+(t.isSymbolClosed(e)?" ".concat((0,n.localize)("(Closed)")):"");r.push([o,e])}))}})),r}),[]);return 0===r.length?a.$.NOT_AVAILABLE_DROPDOWN_OPTIONS:this.sortDropdownOptions(r,this.isSymbolClosed)}},{key:"isMarketClosed",value:function(e){var t=this,r=this.processed_symbols[e];return!r||Object.keys(r.submarkets).every((function(e){return t.isSubmarketClosed(e)}))}},{key:"isSubmarketClosed",value:function(e){var t=this,r=Object.keys(this.processed_symbols).find((function(r){var n=t.processed_symbols[r];return Object.keys(n.submarkets).includes(e)}));if(!r)return!0;var n=this.processed_symbols[r].submarkets[e];if(!n)return!0;var o=n.symbols;return Object.keys(o).every((function(e){return t.isSymbolClosed(e)}))}},{key:"isSymbolClosed",value:function(e){return this.active_symbols.some((function(t){return t.symbol===e&&(!t.exchange_is_open||t.is_trading_suspended)}))}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,i}()},2829:(e,t,r)=>{"use strict";r.d(t,{R:()=>d});var n=r(1575),o=r(2872),a=r(7919);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",_={};function b(){}function g(){}function E(){}var w={};f(w,c,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,c)&&(w=x);var S=E.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,a,l,c){var s=p(e[o],e,a);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(f).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=m;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return g.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:g,configurable:!0}),g.displayName=f(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),f(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),f(S,u,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function c(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,l,"next",e)}function l(e){c(a,n,o,i,l,"throw",e)}i(void 0)}))}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var d=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=void 0,this.token=void 0,this.account_id=void 0,this.pip_sizes={},this.account_info={},this.is_running=!1,this.subscriptions=[],this.time_interval=null,this.has_activeSymbols=!1,this.is_stopping=!1,this.reconnectIfNotConnected=function(){console.log("connection state: ",t.api.connection.readyState),1!==t.api.connection.readyState&&(console.log("Info: Connection to the server was closed, trying to reconnect."),t.init())},this.getActiveSymbols=s(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,o.um)((function(){return t.api.send({active_symbols:"brief"})})).then((function(e){var r=e.active_symbols,n=void 0===r?[]:r,o={};n.length&&(t.has_activeSymbols=!0),n.forEach((function(e){var t=e.symbol,r=e.pip;o[t]=+(+r).toExponential().substring(3)})),t.pip_sizes=o,t.toggleRunButton(!1)}));case 1:case"end":return e.stop()}}),e)}))),this.toggleRunButton=function(e){var t=document.querySelector("#db-animation__run-button");t&&(t.disabled=e)}},t=[{key:"init",value:(f=s(l().mark((function e(){var t,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],!(0,a.nP)()){e.next=11;break}return this.toggleRunButton(!0),t&&this.terminate(),this.api=(0,a.TN)(),this.initEventListeners(),e.next=8,this.authorizeAndSubscribe();case 8:this.time_interval&&clearInterval(this.time_interval),this.time_interval=null,this.getTime();case 11:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getConnectionStatus",value:function(){var e;if(null!==(e=this.api)&&void 0!==e&&e.connection){var t=this.api.connection.readyState;return o.kM[t]||"Unknown"}return"Socket not initialized"}},{key:"terminate",value:function(){console.log("connection terminated"),this.api&&this.api.disconnect()}},{key:"initEventListeners",value:function(){window&&(window.addEventListener("online",this.reconnectIfNotConnected),window.addEventListener("focus",this.reconnectIfNotConnected))}},{key:"createNewInstance",value:(c=s(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.account_id===t){e.next=3;break}return e.next=3,this.init(!0);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"authorizeAndSubscribe",value:(i=s(l().mark((function e(){var t,r,o,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,a.gf)(),r=t.token,o=t.account_id,!r){e.next=19;break}return this.token=r,this.account_id=o,this.api.authorize(this.token),e.prev=5,e.next=8,this.api.expectResponse("authorize");case 8:return i=e.sent,c=i.authorize,this.has_activeSymbols?this.toggleRunButton(!1):this.getActiveSymbols(),e.next=13,this.subscribe();case 13:this.account_info=c,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.P.emit("Error",e.t0);case 19:case"end":return e.stop()}}),e,this,[[5,16]])}))),function(){return i.apply(this,arguments)})},{key:"subscribe",value:(r=s(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,o.um)((function(){return t.api.send({balance:1,subscribe:1})})),(0,o.um)((function(){return t.api.send({transaction:1,subscribe:1})})),(0,o.um)((function(){return t.api.send({proposal_open_contract:1,subscribe:1})}))]);case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"setIsRunning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_running=e}},{key:"pushSubscription",value:function(e){this.subscriptions.push(e)}},{key:"clearSubscriptions",value:function(){var e;this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions=[],(null!==(e=n.P.getState("global_timeouts"))&&void 0!==e?e:[]).forEach((function(e,t){clearTimeout(t)}))}},{key:"getTime",value:function(){var e=this;this.time_interval||(this.time_interval=setInterval((function(){e.api.send({time:1})}),3e4))}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,i,c,f}())},3191:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(645),o=r(7234),a=r(8009);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ws=t.ws},t=[{key:"getStakePayoutLimits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AUD",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg",r=arguments.length>2?arguments[2]:void 0;return this.ws.send({landing_company_details:t}).then((function(t){var n,o=null==t||null===(n=t.landing_company_details)||void 0===n?void 0:n.currency_config[r];return o?o[e]:{}}))}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trading_times=new n.A(t),this.contracts_for=new o.A(t),this.active_symbols=new a.A(t.ws,this.trading_times),this.account_limits=new s(t)}return t=e,r=[{key:"setInstance",value:function(t){return this.singleton||(this.singleton=new e(t)),this.instance}},{key:"instance",get:function(){return this.singleton}}],null&&f(t.prototype,null),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();p.singleton=null;const m=p},7919:(e,t,r)=>{"use strict";r.d(t,{TN:()=>m,nP:()=>h,gf:()=>y});var n=r(891),o=r.n(n),a=r(6464),i=r(2641);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var d=["active_symbols","authorize","balance","buy","proposal","proposal_open_contract","transaction","ticks_history","history"];const p=u((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getRequestType=function(e){var t;return d.forEach((function(r){r in e&&!t&&(t=r)})),t},this.defineMeasure=function(e){var t;return!!e&&("history"===e?(performance.mark("ticks_history_end"),t=performance.measure("ticks_history","ticks_history_start","ticks_history_end")):(performance.mark("".concat(e,"_end")),t=performance.measure("".concat(e),"".concat(e,"_start"),"".concat(e,"_end"))),t.startTimeDate=new Date(Date.now()-t.startTime))},this.sendIsCalled=function(e){var t,n,o=e.response_promise,a=(t=e.args,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],i=r.getRequestType(a);return i&&performance.mark("".concat(i,"_start")),o.then((function(e){var t=r.getRequestType(e);t&&r.defineMeasure(t)})).catch((function(){})),o},this.config=t,this.debounced_calls={}}));var m=function(){var e="wss://".concat((0,a.getSocketURL)(),"/websockets/v3?app_id=").concat((0,a.getAppId)(),"&l=").concat((0,i.getLanguage)(),"&brand=").concat(a.website_name.toLowerCase()),t=new WebSocket(e);return new(o())({connection:t,middleware:new p({})})},h=function(){var e=localStorage.getItem("active_loginid");return e&&"null"!==e?e:null},y=function(){var e=h(),t=JSON.parse(localStorage.getItem("client.accounts"))||void 0,r=t&&t[e]||{};return{token:(null==r?void 0:r.token)||void 0,account_id:e||void 0}}},7234:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(69),o=r(8774);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){c=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",_={};function b(){}function g(){}function E(){}var w={};f(w,l,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,l)&&(w=x);var S=E.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,l,c){var s=p(e[o],e,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(f).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=m;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return g.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:g,configurable:!0}),g.displayName=f(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),f(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),f(S,u,"Generator"),f(S,l,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function s(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,l,"next",e)}function l(e){s(a,n,o,i,l,"throw",e)}i(void 0)}))}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var p=function(){return e=function e(t){var r=t.ws,o=t.server_time;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getAccumulationRange=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[.01,.02,.03,.04,.05]);case 1:case"end":return e.stop()}}),e)}))),this.getHiddenCategories=function(e){for(var t=0,r=0;r<e.length;r++){var o=e[r],a=n.$.QUICK_STRATEGY.DISABLED.BARRIER_TRADE_TYPES.includes(o.value),i=n.$.QUICK_STRATEGY.DISABLED.PREDICTION_TRADE_TYPES.includes(o.value);(a||i)&&t++}return t},this.getTradeTypeOptions=function(e,t){var r=[];return e.forEach((function(e){var o=n.$.QUICK_STRATEGY.DISABLED.BARRIER_TRADE_TYPES.includes(e.value),a=n.$.QUICK_STRATEGY.DISABLED.PREDICTION_TRADE_TYPES.includes(e.value),i=["multiplier"].includes(e.value);o||a||i||r.push({text:e.name,value:e.value,group:t[0],icon:e.icon})})),r},this.getContractTypes=function(e){var t=e;return"ACCU"===t&&(t="accumulator"),n.$.opposites[t.toUpperCase()].map((function(e){return{value:Object.keys(e)[0],text:Object.values(e)[0]}}))},this.cache_age_in_min=10,this.contracts_for={},this.ws=r,this.server_time=o,this.disabled_options=[{submarket:"forex_basket",trade_type:"higherlower"},{submarket:"minor_pairs",trade_type:"higherlower"},{submarket:"metals",trade_type:"callputequal"},{market:"indices",trade_type:"callputequal"},{symbol:"OTC_AS51",trade_type_category:"inout"},{trade_type_category:"lookback"},{trade_type_category:"callputspread"}],this.retrieving_contracts_for={}},t=[{key:"getBarriers",value:(g=u(c().mark((function e(t,r,o,a){var i,l,s,u,f,d,p,m=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={values:[]},n.$.BARRIER_TRADE_TYPES.includes(r)){e.next=3;break}return e.abrupt("return",i);case 3:return l=["high_barrier","low_barrier"],e.next=6,this.getContractsByTradeType(t,r);case 6:return s=e.sent,e.next=9,this.getDurations(t,r,!1);case 9:return u=e.sent,f=new RegExp("^[-|+]([0-9]+.[0-9]+)$"),d=function(e){return e&&f.test(e.toString())},p=!0,s.length>0&&(a.forEach((function(e,t){var c=["+","-"].includes(e),h=m.getContractCategoryByTradeType(r),y=s.find((function(e){var a=n.$.BARRIER_CATEGORIES,i=Object.keys(a).find((function(e){return a[e].includes(r)})),s=e.contract_category===h,f=-1!==u.findIndex((function(e){return e.unit===o})),p=e.barrier_category===i,m=c&&d(e.barrier||e[l[t]])||!c&&!d(e.barrier||e[l[t]]);return s&&f&&p&&m}));if(y||(y=s.filter((function(e){return e.barrier||e.high_barrier})).sort((function(e,t){var r=e.barrier||e.high_barrier,n=t.barrier||t.high_barrier;return parseFloat(r)-parseFloat(n)})).shift())&&!c&&(p=!1),y){var v=1===y.barriers?"barrier":l[t];if(y[v]){var _="".concat(y[v]).match(f);i.values[t]=_?_[1]:y[v]}Object.assign(i,{allow_both_types:["intraday","tick"].includes(y.expiry_type)&&d(y[v]),allow_absolute_type:"absolute"===e&&!d(y[v])}),1===y.barriers&&a.splice(t+1,1)}})),p?2===i.values.length&&a.every((function(e){return e===a[0]}))&&i.values.every((function(e){return e===i.values[0]}))&&(i.values[1]=(.95*i.values[0]).toFixed(1)):i.values=i.values.map((function(){return!1}))),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return g.apply(this,arguments)})},{key:"getContractCategoryByTradeType",value:function(e){var t=n.$.TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING;return Object.keys(t).find((function(r){return t[r].includes(e)}))||e}},{key:"getTradeTypeCategoryByTradeType",value:function(e){var t=n.$.TRADE_TYPE_CATEGORIES;return Object.keys(t).find((function(r){return t[r].includes(e)}))||e}},{key:"getTradeTypeCategoryNameByTradeType",value:function(e){return n.$.TRADE_TYPE_CATEGORY_NAMES[this.getTradeTypeCategoryByTradeType(e)]}},{key:"getBarrierCategoryByTradeType",value:function(e){var t=n.$.BARRIER_CATEGORIES;return Object.keys(t).find((function(r){return t[r].includes(e)}))}},{key:"getContractsByTradeType",value:(b=u(c().mark((function e(t,r){var n,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:return n=e.sent,o=this.getContractCategoryByTradeType(r),a=this.getBarrierCategoryByTradeType(r),e.abrupt("return",n.filter((function(e){var t=e.contract_category===o,r=e.barrier_category===a;return t&&r})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"getContractsFor",value:(_=u(c().mark((function e(t){var r,n,a,i,l=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"na"!==t){e.next=2;break}return e.abrupt("return",[]);case 2:if(r=function(){var e=u(c().mark((function e(){var r,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.retrieving_contracts_for[t]){e.next=4;break}return e.next=3,l.retrieving_contracts_for[t];case 3:return e.abrupt("return",l.contracts_for[t].contracts);case 4:return l.retrieving_contracts_for[t]=new o.A,e.next=7,l.ws.send({contracts_for:t});case 7:if(!(r=e.sent).error){e.next=10;break}return e.abrupt("return",[]);case 10:return n=r.contracts_for.available,a=n.filter((function(e){return"forward"!==e.start_type})),l.contracts_for[t]={contracts:a,timestamp:l.server_time.unix()},l.retrieving_contracts_for[t].resolve(),delete l.retrieving_contracts_for[t],e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!this.contracts_for[t]){e.next=8;break}return n=this.contracts_for[t],a=n.contracts,i=n.timestamp,this.server_time.unix()-i>60*this.cache_age_in_min&&r(),e.abrupt("return",a);case 8:return e.abrupt("return",r());case 9:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"getDurations",value:(v=u(c().mark((function e(t,r){var o,a,i,l,s,u,f,d,p,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(m.length>2&&void 0!==m[2])||m[2],"multiplier"!==r&&"accumulator"!==r){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this.getContractsFor(t);case 5:if(a=e.sent,i=n.$.NOT_AVAILABLE_DURATIONS,l=n.$.DEFAULT_DURATION_DROPDOWN_OPTIONS,0!==a.length){e.next=9;break}return e.abrupt("return",i);case 9:return e.next=11,this.getContractsByTradeType(t,r);case 11:if(s=e.sent,u=[],f=function(e){return l.findIndex((function(t){return t[1]===e.replace(/\d+/g,"")}))},d=function(e,t){var r=e.replace(/\D/g,""),n=f(e),o=l.findIndex((function(e){return e[1]===t})),a=parseInt(r);return l.slice(o+1,n+1).reverse().forEach((function(e){switch(e[1]){case"m":case"h":a*=60;break;case"d":a*=24}})),a},s.forEach((function(e){if(e.min_contract_duration&&e.max_contract_duration){var t=f(e.min_contract_duration),r=f("1d"===e.max_contract_duration&&o?"24h":e.max_contract_duration);l.slice(t,r+1).forEach((function(t,r){-1!==u.findIndex((function(e){return e.unit===t[1]}))||u.push({display:t[0],unit:t[1],min:0===r?parseInt(e.min_contract_duration.replace(/\D/g,"")):1,max:d(e.max_contract_duration,t[1])})}))}})),s.every((function(e){return"intraday"===e.expiry_type}))&&-1!==(p=u.findIndex((function(e){return"d"===e[1]})))&&u.splice(p,1),0!==u.length){e.next=19;break}return e.abrupt("return",i);case 19:return e.abrupt("return",u.sort((function(e,t){return f(e.unit)-f(t.unit)})));case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"getPredictionRange",value:(y=u(c().mark((function e(t,r){var o,a,l,s,u,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsByTradeType(t,r);case 2:return o=e.sent,a=this.getContractCategoryByTradeType(r),l=[],s=n.$.DIGIT_CATEGORIES,u=n.$.opposites,s.includes(a)&&"evenodd"!==r&&((f=o.find((function(e){return Object.keys(u).some((function(t){return u[t].map((function(e){return Object.keys(e)[0]})).includes(e.contract_type)}))})))&&f.last_digit_range?l.push.apply(l,i(f.last_digit_range)):l.push(1,2,3,4,5,6,7,8)),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"getMultiplierRange",value:(h=u(c().mark((function e(t,r){var o,a,l,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsByTradeType(t,r);case 2:return o=e.sent,a=[],l=n.$.opposites,null!=(s=o.find((function(e){return Object.keys(l).some((function(t){return l[t].map((function(e){return Object.keys(e)[0]})).includes(e.contract_type)}))})))&&s.multiplier_range&&a.push.apply(a,i(s.multiplier_range)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"getMarketBySymbol",value:(m=u(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:if((r=e.sent).length){e.next=5;break}return e.abrupt("return","na");case 5:return e.abrupt("return",r[0].market);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getSubmarketBySymbol",value:(p=u(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:if((r=e.sent).length){e.next=5;break}return e.abrupt("return","na");case 5:return e.abrupt("return",r[0].submarket);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getGroupedTradeTypes",value:(d=u(c().mark((function e(t){var r,n,o,a,i,l,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:r=e.sent,n={},o=0;case 5:if(!(o<r.length)){e.next=17;break}return a=r[o].market,i=r[o].submarket,l=this.getTradeTypeCategoryByTradeType(r[o].contract_category),s=this.getTradeTypeCategoryNameByTradeType(r[o].contract_category),e.next=12,this.getTradeTypeByTradeCategory(a,i,t,l);case 12:u=e.sent,s&&(this.isDisabledOption({market:a,submarket:i,symbol:t,trade_type_category:l})||(n[s]=u));case 14:o++,e.next=5;break;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getTradeTypeByTradeCategory",value:(s=u(c().mark((function e(t,r,o,a){var i,l,s,u,f,d,p,m=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.$.NOT_AVAILABLE_DURATIONS,l=n.$.TRADE_TYPE_CATEGORIES,s=n.$.opposites,u=l[a],f=[],!u||!u.length){e.next=11;break}d=c().mark((function e(){var n,l,d,h,y,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u[p],e.next=3,m.getDurations(o,n);case 3:l=e.sent,d=JSON.stringify(l)!==JSON.stringify(i),!m.isDisabledOption({market:t,submarket:r,symbol:o,trade_type_category:a,trade_type:n})&&d&&(h=s[n.toUpperCase()],y=[],v=[],h.forEach((function(e){y.push(Object.keys(e)[0]),v.push(Object.values(e)[0])})),f.push({name:v.join("/"),value:n,icon:y}));case 7:case"end":return e.stop()}}),e)})),p=0;case 6:if(!(p<u.length)){e.next=11;break}return e.delegateYield(d(),"t0",8);case 8:p++,e.next=6;break;case 11:return e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return s.apply(this,arguments)})},{key:"getTradeTypesForQuickStrategy",value:(l=u(c().mark((function e(t){var r,n,o,a,l,s,u,f,d,p,m,h=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],n=[],"ACCU"!==(h.length>1&&void 0!==h[1]?h[1]:"")){e.next=6;break}return r.push({text:"Buy",value:"ACCU"}),e.abrupt("return",r);case 6:return e.next=8,this.getMarketBySymbol(t);case 8:return o=e.sent,e.next=11,this.getSubmarketBySymbol(t);case 11:return a=e.sent,e.next=14,this.getTradeTypeCategories(o,a,t);case 14:l=e.sent,s=0;case 16:if(!(s<l.length)){e.next=26;break}return u=l[s],e.next=20,this.getTradeTypeByTradeCategory(o,a,t,u[1]);case 20:f=e.sent,this.getHiddenCategories(f)<f.length&&n.push(u);case 23:s++,e.next=16;break;case 26:d=0;case 27:if(!(d<n.length)){e.next=36;break}return p=n[d],e.next=31,this.getTradeTypeByTradeCategory(o,a,t,p[1]);case 31:m=e.sent,r.push.apply(r,i(this.getTradeTypeOptions(m,p)));case 33:d++,e.next=27;break;case 36:return e.abrupt("return",r);case 37:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getTradeTypeCategories",value:(a=u(c().mark((function e(t,r,o){var a,i,l,s,u,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.$.TRADE_TYPE_CATEGORY_NAMES,i=n.$.NOT_AVAILABLE_DROPDOWN_OPTIONS,e.next=3,this.getContractsFor(o);case 3:if(l=e.sent,s=[],l.forEach((function(e){var n=f.getTradeTypeCategoryByTradeType(e.contract_category),a=f.getTradeTypeCategoryNameByTradeType(e.contract_category);a&&(f.isDisabledOption({market:t,submarket:r,symbol:o,trade_type_category:n})||-1!==s.findIndex((function(e){return e[1]===n}))||s.push([a,n]))})),!(s.length>0)){e.next=9;break}return u=Object.keys(a),e.abrupt("return",s.sort((function(e,t){return u.findIndex((function(t){return t===e[1]}))-u.findIndex((function(e){return e===t[1]}))})));case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"getTradeTypes",value:(r=u(c().mark((function e(t,r,o,a){var i,l,s,u,f,d,p,m,h,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.$.NOT_AVAILABLE_DURATIONS,l=n.$.TRADE_TYPE_CATEGORIES,s=n.$.opposites,u=[],!(f=l[a])){e.next=16;break}d=0;case 5:if(!(d<f.length)){e.next=16;break}return p=f[d],e.next=9,this.getDurations(o,p);case 9:m=e.sent,h=JSON.stringify(m)!==JSON.stringify(i),!this.isDisabledOption({market:t,submarket:r,symbol:o,trade_type_category:a,trade_type:p})&&h&&(y=s[p.toUpperCase()],u.push([y.map((function(e){return e[Object.keys(e)[0]]})).join("/"),p]));case 13:d++,e.next=5;break;case 16:return e.abrupt("return",u.length>0?u:n.$.NOT_AVAILABLE_DROPDOWN_OPTIONS);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,n,o){return r.apply(this,arguments)})},{key:"isDisabledOption",value:function(e){return this.disabled_options.some((function(t){return Object.keys(t).every((function(r){return e[r]===t[r]}))}))}},{key:"disposeCache",value:function(){this.contracts_for={}}}],t&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,a,l,s,d,p,m,h,y,v,_,b,g}()},6306:(e,t,r)=>{"use strict";r.d(t,{cJ:()=>n.A,aq:()=>o.A,Zp:()=>a.A,z7:()=>d,Fh:()=>m,ew:()=>h.A,Rk:()=>y.R});var n=r(8009),o=r(3191),a=r(7234);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s,u,f,d=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this.parentElement=r,this.addEvents()},(t=[{key:"addEvents",value:function(){var e=this;"onLine"in navigator?(window.addEventListener("online",(function(){return e.setStatus()})),window.addEventListener("offline",(function(){return e.setStatus()}))):(navigator.onLine=!0,setInterval((function(){return e.setStatus()}),1e4)),this.setStatus()}},{key:"setStatus",value:function(){var e=this;navigator.onLine?(this.parentElement.html("<span class='connecting'></span>"),this.api.send({ping:"1"}).then((function(){e.parentElement.html("<span class='online'></span>")}))):this.parentElement.html("<span class='offline'></span>")}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),p=r(8774);const m=(u=!1,f=new p.A,{init:function(e){u||(s=e,f.resolve(s.server_time),u=!0)},get:function(){return u&&s.server_time?s.server_time.clone():void 0},timePromise:function(){return u?Promise.resolve(s.server_time):f.promise}});var h=r(645),y=r(2829)},645:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(8774);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),l=new P(n||[]);return i(a,"_invoke",{value:L(e,r,l)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",_={};function b(){}function g(){}function E(){}var w={};f(w,c,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,c)&&(w=x);var S=E.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(a,i,l,c){var s=p(e[a],e,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):t.resolve(f).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=m;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return g.prototype=E,i(S,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:g,configurable:!0}),g.displayName=f(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),f(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),f(S,u,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function i(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){i(a,n,o,l,c,"next",e)}function c(e){i(a,n,o,l,c,"throw",e)}l(void 0)}))}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var u=function(){return e=function e(t){var r=t.ws,o=t.server_time;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init_promise=new n.A,this.is_initialised=!1,this.trading_times={},this.ws=r,this.server_time=o.clone()},t=[{key:"initialise",value:(o=l(a().mark((function e(){var t,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_initialised){e.next=2;break}return e.abrupt("return",this.init_promise);case 2:if(this.is_initialised=!0,this.last_update_moment=this.server_time.local(),Object.keys(this.trading_times).length){e.next=11;break}return e.next=7,this.updateTradingTimes();case 7:return this.init_promise.resolve(),t=function(){var e=l(a().mark((function e(){var n,o,i,l,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.updateMarketOpenClosed(),Object.keys(n).length>0&&r.onMarketOpenCloseChanged&&r.onMarketOpenCloseChanged(n),o=r.nextUpdateDate()){e.next=14;break}return i=r.server_time.local(),l=r.last_update_moment.clone().add(1,"days"),i.isAfter(l)?r.last_update_moment=i.clone():r.last_update_moment=l.clone(),c={},Object.keys(r.trading_times).forEach((function(e){c[e]=r.trading_times[e].is_opened})),e.next=11,r.updateTradingTimes();case 11:Object.keys(r.trading_times).forEach((function(e){r.trading_times[e].is_opened=c[e]})),l.set({hour:0,minute:0,second:0}),o=l.toDate();case 14:s=o-r.server_time.local().toDate(),r.update_timer=setTimeout(t,s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=11,t();case 11:return e.abrupt("return",this.init_promise);case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"updateTradingTimes",value:(r=l(a().mark((function e(){var t,r,n,o,i,l,c=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.last_update_moment.format("YYYY-MM-DD"),e.next=3,this.ws.tradingTimes(t);case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:if(this.trading_times={},n=this.server_time.local().toDate(),o=n.toISOString().substring(0,11),i=function(e){return new Date("".concat(o).concat(e,"Z"))},l=r.trading_times.markets){e.next=13;break}return e.abrupt("return");case 13:null==l||l.forEach((function(e){var t=e.submarkets;null==t||t.forEach((function(e){var t=e.symbols;null==t||t.forEach((function(e){var t,r=e.times,n=e.symbol,o=r.open,a=r.close,l=1===o.length&&"00:00:00"===o[0]&&"23:59:59"===a[0],s=1===o.length&&"--"===o[0]&&"--"===a[0];l||s||(t=o.map((function(e,t){return{open:i(e),close:i(a[t])}}))),c.trading_times[n]={is_open_all_day:l,is_closed_all_day:s,times:t}}))}))}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"updateMarketOpenClosed",value:function(){var e=this,t={};return Object.keys(this.trading_times).forEach((function(r){var n=e.calcIsMarketOpened(r),o=e.trading_times[r];o.is_opened!==n&&(o.is_opened=n,t[r]=n)})),t}},{key:"calcIsMarketOpened",value:function(e){var t=this.server_time.local().unix(),r=this.trading_times[e],n=r.times,o=r.is_open_all_day;return!r.is_closed_all_day&&(!!o||n.some((function(e){var r=e.open,n=e.close;return t>=r&&t<n})))}},{key:"nextUpdateDate",value:function(){var e,t=this,r=this.server_time.local().toDate();return Object.keys(this.trading_times).forEach((function(n){var o=t.trading_times[n],a=o.times,i=o.is_open_all_day,l=o.is_closed_all_day;i||l||a.forEach((function(t){var n=t.open,o=t.close;n>r&&(!e||n<e)&&(e=n),o>r&&(!e||o<e)&&(e=o)}))})),e}},{key:"isMarketOpened",value:function(e){var t=Object.keys(this.trading_times);return!(!t.length||!t.includes(e))&&this.trading_times[e].is_opened}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,o}()},5506:(e,t,r)=>{"use strict";r.d(t,{Rm:()=>s,dz:()=>a,fh:()=>i,me:()=>c,pq:()=>l,z3:()=>u});var n=r(1575),o=r(69),a=function(e){return n.P.emit("bot.contract",e)},i=function(e){return n.P.emit("contract.status",e)},l=function(e){return n.P.emit("bot.info",e)},c=function(e,t){return n.P.emit("ui.log.notify",{className:e,message:t,sound:o.$.lists.NOTIFICATION_SOUND[0][1]})},s=function(e,t){return n.P.emit("ui.log.success",{log_type:e,extra:t})},u=function(e){return n.P.emit("ui.log.error",e)}},2872:(e,t,r)=>{"use strict";r.d(t,{$:()=>h,NZ:()=>f,bJ:()=>m,kM:()=>g,n3:()=>v,u6:()=>p,um:()=>y,vm:()=>b,x9:()=>d,yk:()=>_});var n=r(6464),o=r(2641),a=r(5506),i=r(1575),l=r(4455);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e,t){return e.contractTypes.map((function(r){var o={amount:e.amount,basis:e.basis,contract_type:r,currency:e.currency,duration:e.duration,duration_unit:e.duration_unit,multiplier:e.multiplier,passthrough:{contract_type:r,purchase_reference:t},proposal:1,symbol:e.symbol};return void 0!==e.prediction&&(o.selected_tick=e.prediction),["TICKLOW","TICKHIGH"].includes(r)||void 0===e.prediction?void 0!==e.barrierOffset&&(o.barrier=e.barrierOffset):o.barrier=e.prediction,void 0!==e.secondBarrierOffset&&(o.barrier2=e.secondBarrierOffset),["MULTUP","MULTDOWN"].includes(r)&&(o.duration=void 0,o.duration_unit=void 0),(0,n.isEmptyObject)(e.limit_order)||(o.limit_order=e.limit_order),o}))},d=function(e,t){var r={buy:"1",price:t.amount,parameters:{amount:t.amount,basis:t.basis,contract_type:e,currency:t.currency,duration:t.duration,duration_unit:t.duration_unit,multiplier:t.multiplier,symbol:t.symbol}};return void 0!==t.prediction&&(r.parameters.selected_tick=t.prediction),["TICKLOW","TICKHIGH"].includes(e)||void 0===t.prediction?void 0!==t.barrierOffset&&(r.parameters.barrier=t.barrierOffset):r.parameters.barrier=t.prediction,void 0!==t.secondBarrierOffset&&(r.parameters.barrier2=t.secondBarrierOffset),(0,n.isEmptyObject)(t.app_markup_percentage)||(r.parameters.app_markup_percentage=t.app_markup_percentage),(0,n.isEmptyObject)(t.barrier_range)||(r.parameters.barrier_range=t.barrier_range),(0,n.isEmptyObject)(t.date_expiry)||(r.parameters.date_expiry=t.date_expiry),(0,n.isEmptyObject)(t.date_start)||(r.parameters.date_start=t.date_start),(0,n.isEmptyObject)(t.product_type)||(r.parameters.product_type=t.product_type),(0,n.isEmptyObject)(t.trading_period_start)||(r.parameters.trading_period_start=t.trading_period_start),(0,n.isEmptyObject)(t.limit_order)||(r.parameters.limit_order=t.limit_order),["MULTUP","MULTDOWN"].includes(e)&&(r.parameters.duration=void 0,r.parameters.duration_unit=void 0,r.parameters.multiplier=t.multiplier),["ACCU"].includes(e)&&(r.parameters.duration=void 0,r.parameters.duration_unit=void 0,r.parameters.growth_rate=t.growth_rate),r},p=function(e){var t,r,n=e.length,o=(t=e.slice(-2),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],i=o[1],l="";return n>=2&&(l=a.quote<i.quote?"rise":l,l=a.quote>i.quote?"fall":l),l},m=function(e){var t=e;return"number"==typeof t&&(t=String(t)),Number(t[t.length-1])},h=function(e,t,r,c,s){return new Promise((function(u,f){var d=e();d?d.then(u).catch((function(e){var u,d;(function(e){var t,r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.error)return!1;!function(e){var t,r,n;"InputValidationFailed"===(null===(t=e.error)||void 0===t?void 0:t.code)&&(null!==(r=e.error.details)&&void 0!==r&&r.duration&&(e.error.message=(0,o.localize)("Duration must be a positive integer")),null!==(n=e.error.details)&&void 0!==n&&n.amount&&(e.error.message=(0,o.localize)("Amount must be a positive number.")))}(e);var l=a.concat(["CallError","WrongResponse","GetProposalFailure","RateLimit","DisconnectError","MarketIsClosed","OpenPositionLimitExceeded"]).includes(null!==(t=null==e||null===(r=e.error)||void 0===r?void 0:r.code)&&void 0!==t?t:null==e?void 0:e.name);return"OpenPositionLimitExceeded"===(null===(n=e.error)||void 0===n?void 0:n.code)&&i.P.emit("bot.recoverOpenPositionLimitExceeded"),!l})(e,r)||s&&!s.is_running?f(e):t(null!==(u=null==e||null===(d=e.error)||void 0===d?void 0:d.code)&&void 0!==u?u:null==e?void 0:e.name,(function(){return new Promise((function(t){var r=function(){var e;return null!==(e=i.P.getState("global_timeouts"))&&void 0!==e?e:[]},s=setTimeout((function(){var e=r();delete e[s],i.P.setState(e),t()}),function(e,t){var r,n=Math.min(2.5*t,15),i=e.error,c=void 0===i?{}:i,s=e.msg_type,u=void 0===s?"":s,f=e.echo_req,d=void 0===f?{}:f,p=c.code,m=void 0===p?"":p,h=c.message,y=void 0===h?"":h,v="",_=Blockly.derivWorkspace.getAllBlocks(!0).find((function(e){return"trade_definition_tradetype"===e.type})),b=(null==_?void 0:_.getFieldValue("TRADETYPECAT_LIST"))||"",g=l.$W.TRADE_TYPE_CATEGORY_NAMES;if(m)switch(m){case"RateLimit":v=(0,o.localize)("You are rate limited for: {{ message_type }}, retrying in {{ delay }}s (ID: {{ request }})",{message_type:c.msg_type,delay:n,request:null==d?void 0:d.req_id});break;case"DisconnectError":v=(0,o.localize)("You are disconnected, retrying in {{ delay }}s",{delay:n});break;case"MarketIsClosed":v=(0,o.localize)("{{ message }}, retrying in {{ delay }}s",{message:y||(0,o.localize)("The market is closed"),delay:n});break;case"OpenPositionLimitExceeded":v=(0,o.localize)("You already have an open position for {{ trade_type }} contract type, retrying in {{ delay }}s",{delay:n,trade_type:null!==(r=null==g?void 0:g[b])&&void 0!==r?r:""});break;default:v=(0,o.localize)("Request failed for: {{ message_type }}, retrying in {{ delay }}s",{message_type:u||(0,o.localize)("unknown"),delay:n})}else v=(0,o.localize)("Request failed for: {{ message_type }}, retrying in {{ delay }}s",{message_type:u||(0,o.localize)("unknown"),delay:n});return(0,a.z3)(v),1e3*n}(e,c)),u=r(),f=(0,n.findValueByKeyRecursively)(e,"msg_type");u[s]={is_cancellable:["buy"].includes(f),msg_type:f},i.P.setState({global_timeouts:u})}))}))})):u()}))},y=function(e,t,r){var n=1;return new Promise((function(o,a){var i=function(e,t){n++,t().then(l)},l=function(){h(e,i,t,n,r).then(o).catch(a)};l()}))},v=function(e){var t=e.sell_price,r=e.buy_price,o=e.currency,a=(0,n.getRoundedNumber)(t-r,o),i=a<0?"loss":"win";return[e.transaction_ids.buy,+e.buy_price,+e.sell_price,a,e.contract_type,(0,n.formatTime)(parseInt("".concat(e.entry_tick_time,"000")),"HH:mm:ss"),+e.entry_tick,(0,n.formatTime)(parseInt("".concat(e.exit_tick_time,"000")),"HH:mm:ss"),+e.exit_tick,+(e.barrier?e.barrier:0),i]},_=function(){return"".concat((new Date).getTime()*Math.random())},b=function(){return{has_payout_block:Blockly.derivWorkspace.getAllBlocks().some((function(e){return"payout"===e.type&&!!e.parentBlock_})),is_basis_payout:!1}},g=s(s(s(s({},WebSocket.CONNECTING,"Connecting"),WebSocket.OPEN,"Connected"),WebSocket.CLOSING,"Closing"),WebSocket.CLOSED,"Closed")},8382:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(2641),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,n.localize)("workspace");return{missing:(0,n.localize)("The {{block_type}} block is missing.",{block_type:e}),misplaced:(0,n.localize)("The {{block_type}} block is misplaced from {{missing_space}}.",{block_type:e,missing_space:t}),disabled:(0,n.localize)("The {{block_type}} block is mandatory and cannot be deleted/disabled.",{block_type:e}),default:(0,n.localize)("The {{block_type}} block is mandatory and cannot be deleted/disabled.",{block_type:e})}},a={trade_definition:o((0,n.localize)("Trade parameters")),trade_parameters:o((0,n.localize)("Trade parameters")),before_purchase:o((0,n.localize)("Purchase conditions")),purchase_conditions:o((0,n.localize)("Purchase conditions")),purchase:o((0,n.localize)("Purchase"),(0,n.localize)("purchase conditions")),trade_definition_tradeoptions:o((0,n.localize)("Trade options"),(0,n.localize)("trade parameters")),trade_definition_multiplier:o((0,n.localize)("Trade options multipliers"),(0,n.localize)("trade parameters")),trade_definition_accumulator:o((0,n.localize)("Trade options accumulators"),(0,n.localize)("trade parameters"))}},5911:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,A:()=>a});var n=r(1575),o=function(e,t){var r=new Error(t);return r.name=e,r.code=e,r},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.P.emit("ui.log.error",e),window.trackJs&&trackJs.track("".concat(e," - Error: ").concat(JSON.stringify(t)))}},511:(e,t,r)=>{"use strict";r.d(t,{hS:()=>v,Xz:()=>u.Xz,$5:()=>i.$,bB:()=>m,_l:()=>a,EB:()=>u.EB,H4:()=>w,JH:()=>c,K3:()=>E,PA:()=>l.P,Ry:()=>s.Ry,Fs:()=>p,Gi:()=>g,r7:()=>u.r7,dh:()=>u.dh,hd:()=>d.h,Yp:()=>h,_D:()=>f,AJ:()=>i.A});var n=r(2641),o=r(69),a=function(e){var t=o.$.opposites,r=(0,n.localize)("Unknown");return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var o=Object.entries(t)[0];if(o[0]===e.contract_type){if(["CALL","PUT"].includes(o[0])){var a=e.shortcode.split("_").slice(-2)[0],i=/^S0P$/.test(a);if(n!==(i?"CALLPUT":"HIGHERLOWER"))return}r=o[1]}}))})),r},i=r(5911),l=r(1575),c=function(e){return new Promise((function(t,r){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){return t(window.external_global_component)},n.onerror=r,document.body.appendChild(n)}))},s=r(3620),u=r(2194),f=function(e){var t=new Date,r=(t.getTime()-e)/1e3;if(r<60)return(0,n.localize)("{{secondPast}}s ago",{secondPast:parseInt(r)});if(r<3600)return(0,n.localize)("{{minutePast}}m ago",{minutePast:parseInt(r/60)});if(r<86400)return(0,n.localize)("{{hourPast}}h ago",{hourPast:parseInt(r/3600)});if(r<=432e3)return(0,n.localize)("{{days}} days ago",{days:parseInt(r/86400)});var o=new Date(e),a=o.getDate(),i=o.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),l="".concat(o.getFullYear()===t.getFullYear()?"":" ").concat(o.getFullYear());return"".concat(a," ").concat(i).concat(l)},d=r(5876),p=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},m=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("block");return Array.from(t).map((function(e){return{type:e.getAttribute("type"),fields:Array.from(e.getElementsByTagName("field")).map((function(e){return{name:e.getAttribute("name"),value:e.textContent.trim()}}))}}))},h=function(e){return e.sort((function(e,t){return e.type<t.type?-1:e.type>t.type?1:JSON.stringify(e.fields)<JSON.stringify(t.fields)?-1:1}))},y=function(e,t){if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(var r=0;r<e.length;r++){var n,o,a,i;if((null===(n=e[r])||void 0===n?void 0:n.name)!==(null===(o=t[r])||void 0===o?void 0:o.name)||(null===(a=e[r])||void 0===a?void 0:a.value)!==(null===(i=t[r])||void 0===i?void 0:i.value))return!1}return!0},v=function(e,t){var r=p(m,h),n=p(m,h),o=r(e),a=n(t);if((null==o?void 0:o.length)!==(null==a?void 0:a.length))return!1;for(var i=0;i<o.length;i++){var l,c,s,u;if((null===(l=o[i])||void 0===l?void 0:l.type)!==(null===(c=a[i])||void 0===c?void 0:c.type)||!y(null===(s=o[i])||void 0===s?void 0:s.fields,null===(u=a[i])||void 0===u?void 0:u.fields))return!1}return!0},_=r(8382),b=function(e){null!==Blockly.getSelected()&&null===Blockly.getSelected().parentBlock_&&("Delete"!==e.key&&"Backspace"!==e.key||w("BLOCK_DELETION",l.P))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown";window.removeEventListener(e,b)},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown";window.addEventListener(e,b)},w=function(e,t){var r;"BLOCK_DELETION"===e&&_.c[Blockly.getSelected().type]&&t.emit("ui.log.error",null===(r=_.c[Blockly.getSelected().type])||void 0===r?void 0:r.default)}},2194:(e,t,r)=>{"use strict";r.d(t,{EB:()=>m,Xz:()=>y,dh:()=>p,r7:()=>h});var n=r(683),o=r.n(n),a=r(3917),i=r.n(a),l=r(3129),c=r(6759);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){u=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:L(e,r,l)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",_={};function b(){}function g(){}function E(){}var w={};f(w,i,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(I([])));x&&x!==r&&n.call(x,i)&&(w=x);var S=E.prototype=b.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,a,i,l){var c=p(e[o],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==s(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=m;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(t,r,n);if("normal"===s.type){if(o=n.done?v:h,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return g.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:g,configurable:!0}),g.displayName=f(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(T.prototype),f(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new T(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(S),f(S,c,"Generator"),f(S,i,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function f(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,l,"next",e)}function l(e){f(a,n,o,i,l,"throw",e)}i(void 0)}))}}var p=function(){var e=d(u().mark((function e(t){var r,n,a,s,f,d,p,h,v,_,b,g=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:c.e.UNSAVED,n=y(t),a=l.A.instance,s=a.load_modal.updateListStrategies,f=a.save_modal,d=Blockly.derivWorkspace.current_strategy_id||Blockly.utils.idGenerator.genUid(),e.next=6,m();case 6:p=e.sent,h=Blockly.Xml.domToText(n),v=Date.now(),(_=p.findIndex((function(e){return e.id===d})))>=0?((b=p[_]).xml=h,b.name=f.bot_name,b.timestamp=v,b.save_type=r):p.push({id:d,timestamp:v,name:f.bot_name,xml:h,save_type:r}),p.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)})).reverse(),p.length>10&&p.pop(),s(p),i().setItem("saved_workspaces",o().compress(JSON.stringify(p)));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=d(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t1=JSON,e.t2=o(),e.next=5,i().getItem("saved_workspaces");case 5:if(e.t3=e.sent,e.t4=e.t2.decompress.call(e.t2,e.t3),e.t0=e.t1.parse.call(e.t1,e.t4),e.t0){e.next=10;break}e.t0=[];case 10:return e.abrupt("return",e.t0);case 13:return e.prev=13,e.t5=e.catch(0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=d(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return r=e.sent,(n=r.findIndex((function(e){return e.id===t})))>=0&&r.splice(n,1),e.next=7,i().setItem("saved_workspaces",o().compress(JSON.stringify(r)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){if(e)return e.hasAttribute("collection")&&"true"===e.getAttribute("collection")&&e.setAttribute("collection","true"),e.setAttribute("is_dbot","true"),e}},1575:(e,t,r)=>{"use strict";r.d(t,{A:()=>f,P:()=>d});var n=r(9656);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var f=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eam=new n.Map},t=[{key:"register",value:function(e,t,r,o,a){var i=this;a&&this.unregisterAll(e);var l=function(e){e.type===o.type&&(i.unregister("api.error",l),o.unregister.forEach((function(e){e instanceof Array?i.unregister.apply(i,function(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e)):i.unregisterAll(e)})))};o&&this.register("api.error",l);var s=function(){r&&i.unregister(e,t),o&&i.unregister("api.error",l),t.apply(void 0,arguments)},u=this.eam.get(e);this.eam=u?this.eam.set(e,u.push({action:s,searchBy:t})):this.eam.set(e,(new n.List).push({action:s,searchBy:t}))}},{key:"unregister",value:function(e,t){this.eam=this.eam.set(e,this.eam.get(e).filter((function(e){return e.searchBy!==t})))}},{key:"isRegistered",value:function(e){return this.eam.has(e)}},{key:"unregisterAll",value:function(e){this.eam=this.eam.delete(e)}},{key:"emit",value:function(e,t){this.eam.has(e)&&this.eam.get(e).forEach((function(e){return e.action(t)}))}},{key:"setState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=i(i({},this.state),e)}},{key:"getState",value:function(e){var t;return null===(t=this.state)||void 0===t?void 0:t[e]}}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),d=new f},8774:(e,t,r)=>{"use strict";function n(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return r.isPending=!0,r.resolve=function(t){r.isPending=!1,e(t)},r.reject=function(e){r.isPending=!1,t(e)},r}r.d(t,{A:()=>n})},3620:(e,t,r)=>{"use strict";r.d(t,{Qq:()=>i,Ry:()=>o,nw:()=>a});var n=r(69),o=function(){var e=Blockly.derivWorkspace;e&&document.getElementById("scratch_div")&&Blockly.svgResize(e)},a=function(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){n.$.single_instance_blocks.includes(t)&&e.getAllBlocks().forEach((function(e){e.type===t&&e.dispose()}))}))},i=function(){return"rtl"===document.documentElement.getAttribute("dir")}},4689:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>sm});var n={};r.r(n),r.d(n,{D_ALEMBERT:()=>ce,MARTINGALE:()=>se,OSCARS_GRIND:()=>ue,REVERSE_D_ALEMBERT:()=>fe,REVERSE_MARTINGALE:()=>de,STRATEGY_1_3_2_6:()=>pe});var o={};r.r(o),r.d(o,{after_purchase:()=>Ze,balance:()=>et,before_purchase:()=>tt,check_direction:()=>rt,console:()=>nt,contract_check_result:()=>ot,controls_flow_statements:()=>at,controls_for:()=>it,controls_forEach:()=>lt,controls_if:()=>ct,controls_whileUntil:()=>st,during_purchase:()=>ut,epoch:()=>ft,get_ohlc:()=>dt,is_candle_black:()=>pt,last_digit:()=>mt,logic_operation:()=>ht,math_arithmetic:()=>yt,math_constrain:()=>vt,math_single:()=>_t,notify_telegram:()=>bt,ohlc:()=>gt,ohlc_values:()=>Et,ohlc_values_in_list:()=>wt,procedures_ifreturn:()=>kt,read_details:()=>xt,read_ohlc:()=>St,read_ohlc_obj:()=>Ot,sell_at_market:()=>Tt,sell_price:()=>Lt,sma_statement:()=>At,text_print:()=>Nt,text_prompt_ext:()=>Ct,tick_analysis:()=>Pt,todatetime:()=>It,totimestamp:()=>jt,trade_again:()=>zt,trade_definition:()=>Rt,trade_definition_multiplier:()=>Dt,trade_definition_tradeoptions:()=>Bt,variables_set:()=>Mt});var a,i=r(7919),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.location;if(!/^\/(br_)/.test(t.pathname))return e;var r=e.startsWith("/")?e:"/".concat(e);return"/".concat(t.pathname.split("/")[1]).concat(r)},c=function(e){return l("/public/images/common/".concat(e))},s=!1;a=l("/"),r.p=a;var u=r(9155),f=r.n(u),d=r(7621),p=r(9822),m=r(3877),h=r(5299);const y=(0,u.createContext)(null),v=function(){var e=(0,u.useContext)(y);if(!e)throw new Error("useStore must be used within StoreProvider");return e};var _=r(2641),b=r(72),g=r.n(b),E=function(e){return e.MOVE="move",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.TOP_LEFT="top-left",e.BODY_REF="body",e}({}),w=function(e){var t=e.setZIndex,r=document.getElementsByClassName("draggable");r.length&&t(Array.from(r).reduce((function(e,t){return Math.max(e,parseInt(window.getComputedStyle(t).zIndex)||0)}),0)+3)},k=function(e){var t,r,n,o=e.prevWidth,a=e.leftOffset,i=e.boundaryRect,l=e.initialSelfRight,c=e.resize_direction,s=e.newWidth,u=e.minWidth,f=e.clientX,d=e.self,p=null!==(t=null==i?void 0:i.left)&&void 0!==t?t:0,m=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:0,h=p+a+5,y=null!==(n=null==d?void 0:d.left)&&void 0!==n?n:0,v=p+m-7,_=v-h-(v-l);return c.includes(E.LEFT)?s>=u&&f>h?s:f<h+10?_-10:o:c.includes(E.RIGHT)?s>=u&&f<v?s:f>v?v-y:o:o},x=function(e){var t,r,n,o=e.prevHeight,a=e.topOffset,i=e.boundaryRect,l=e.initialSelfBottom,c=e.resize_direction,s=e.newHeight,u=e.minHeight,f=e.clientY,d=e.self,p=null!==(t=null==i?void 0:i.top)&&void 0!==t?t:0,m=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:0,h=p+a+5,y=null!==(n=null==d?void 0:d.top)&&void 0!==n?n:0,v=p+m-7,_=v-h-(v-l);return c.includes(E.TOP)?s>=u&&f>h?s:f<h+10?_-10:o:c.includes(E.BOTTOM)?s>=u&&f<v?s:f>v?v-y:o:o};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e,t,r){return(t=function(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const N=function(e){var t=e.children,r=e.boundary,n=e.initialValues,o=void 0===n?{width:400,height:400,xAxis:0,yAxis:0}:n,a=e.minWidth,i=void 0===a?100:a,l=e.minHeight,c=void 0===l?100:l,s=e.enableResizing,d=void 0!==s&&s,p=e.enableDragging,h=void 0===p||p,y=e.header,v=void 0===y?"":y,_=e.onClose,b=L((0,u.useState)({x:o.xAxis,y:o.yAxis}),2),g=b[0],S=b[1],A=L((0,u.useState)({width:o.width,height:o.height}),2),N=A[0],C=A[1],P=L((0,u.useState)(100),2),I=P[0],j=P[1],z=(0,u.useRef)(!1),R=L((0,u.useState)(!1),2),D=R[0],B=R[1],M=(0,u.useRef)(null),U=L((0,u.useState)(document.querySelector(null!=r?r:E.BODY_REF)),2),F=U[0],G=U[1];(0,u.useEffect)((function(){C({width:o.width,height:o.height}),S({x:o.xAxis,y:o.yAxis})}),[o.height,o.width,o.xAxis,o.yAxis]),(0,u.useEffect)((function(){var e=document.querySelector(null!=r?r:E.BODY_REF);G(e),w({setZIndex:j})}),[r]);var q=function(e,t){var r,n,a,l,s,u,f,p,m,y,v,_,b,L,A;if(null==e||e.stopPropagation(),w({setZIndex:j}),t){var P=t;z.current=t!==E.MOVE&&d,B(t===E.MOVE&&h);var I=null==F?void 0:F.getBoundingClientRect(),R=null!==(r=null==F?void 0:F.offsetTop)&&void 0!==r?r:0,D=null!==(n=null==F?void 0:F.offsetLeft)&&void 0!==n?n:0,U=null!==(a=null==e?void 0:e.clientX)&&void 0!==a?a:0,G=null!==(l=null==e?void 0:e.clientY)&&void 0!==l?l:0,q=null!==(s=null==N?void 0:N.width)&&void 0!==s?s:o.width,V=null!==(u=null==N?void 0:N.height)&&void 0!==u?u:o.height,Y=null!==(f=null==g?void 0:g.x)&&void 0!==f?f:0,H=null!==(p=null==g?void 0:g.y)&&void 0!==p?p:0,W=null!==(m=null===(y=M.current)||void 0===y||null===(v=y.getBoundingClientRect())||void 0===v?void 0:v.right)&&void 0!==m?m:N.width,K=null!==(_=null===(b=M.current)||void 0===b||null===(L=b.getBoundingClientRect())||void 0===L?void 0:L.bottom)&&void 0!==_?_:N.height,$={},X="unset",Q=null===(A=M.current)||void 0===A?void 0:A.querySelector("#draggable-content-body");if(Q){var J=Q.style;J&&"none"!==J.pointerEvents&&($=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},J),X=J.pointerEvents,J.pointerEvents="none")}var Z=function(e){if(e){var t=e.clientX,r=e.clientY,n=t-U,o=r-G;try{z.current?ee(n,o,t,r):te(n,o)}catch(e){re()}}},ee=function(e,t,r,n){var o,a,l,s=null!==(o=null==g?void 0:g.x)&&void 0!==o?o:0,u=null!==(a=null==g?void 0:g.y)&&void 0!==a?a:0,f=q,d=V;P.includes(E.RIGHT)?f+=e:P.includes(E.LEFT)&&(s=e+Y,f-=e),P.includes(E.BOTTOM)?d+=t:P.includes(E.TOP)&&(u=t+H,d-=t),S((function(e){var t=Math.max(u,R+5),r=Math.max(s,D+5);return{x:f<=i?e.x:r,y:d<=c?e.y:t}}));var p=null===(l=M.current)||void 0===l?void 0:l.getBoundingClientRect();C((function(e){return{width:k({prevWidth:e.width,leftOffset:D,boundaryRect:I,initialSelfRight:W,resize_direction:P,newWidth:f,minWidth:i,clientX:r,self:p}),height:x({prevHeight:e.height,topOffset:R,boundaryRect:I,initialSelfBottom:K,resize_direction:P,newHeight:d,minHeight:c,clientY:n,self:p})}}))},te=function(e,t){var r,n,o=e+Y,a=t+H,i=Math.min(Math.max(o,D+5),D+(null!==(r=null==I?void 0:I.width)&&void 0!==r?r:0)-N.width-9),l=Math.min(Math.max(a,R+5),R+(null!==(n=null==I?void 0:I.height)&&void 0!==n?n:0)-N.height-9);S({x:i,y:l})},re=function(){if(B(!1),z.current=!1,null!=Q&&Q.style){var e;try{Object.assign(Q.style,$)}catch(e){}Q.style.pointerEvents=null!==(e=X)&&void 0!==e?e:"unset"}F&&(window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",re))};F&&(window.addEventListener("mousemove",Z),window.addEventListener("mouseup",re))}};return f().createElement("div",{className:"draggable ".concat(D?"dragging":""),style:{position:"absolute",top:"number"==typeof g.y?g.y:0,left:"number"==typeof g.x?g.x:0,zIndex:"number"==typeof I?I:0},onMouseDown:function(){return w({setZIndex:j})},onKeyDown:function(){return w({setZIndex:j})},"data-testid":"dt_react_draggable",tabIndex:0},f().createElement("div",{ref:M,className:"draggable-content","data-testid":"dt_react_draggable_content",style:{width:"number"==typeof N.width?N.width:0,height:"number"==typeof N.height?N.height:0}},f().createElement("div",{id:"draggable-content__header","data-testid":"dt_react_draggable_handler",className:"draggable-content__header",onMouseDown:function(e){return q(e,E.MOVE)},onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},tabIndex:0},f().createElement("div",{className:"draggable-content__header__title"},v),f().createElement("div",{className:"draggable-content__header__close","data-testid":"dt_react_draggable-close-modal",onClick:_},f().createElement(m.Icon,{icon:"IcCross"}))),f().createElement("span",{className:"draggable-content__body",id:"draggable-content-body"},t),d&&f().createElement(f().Fragment,null,f().createElement("div",{className:"resizable-handle__top","data-testid":"dt_resizable-handle__top",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.TOP)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__right","data-testid":"dt_resizable-handle__right",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.RIGHT)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__bottom","data-testid":"dt_resizable-handle__bottom",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.BOTTOM)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__left","data-testid":"dt_resizable-handle__left",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.LEFT)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__top-right","data-testid":"dt_resizable-handle__top-right",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.TOP_RIGHT)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__bottom-right","data-testid":"dt_resizable-handle__bottom-right",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.BOTTOM_RIGHT)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__bottom-left","data-testid":"dt_resizable-handle__bottom-left",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.BOTTOM_LEFT)},tabIndex:0}),f().createElement("div",{className:"resizable-handle__top-left","data-testid":"dt_resizable-handle__top-left",onKeyDown:function(e){return"Enter"===e.key&&q(null,E.MOVE)},onMouseDown:function(e){return q(e,E.TOP_LEFT)},tabIndex:0}))))};function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const I=function(e){var t=e.boundary,r=e.children,n=e.onClose,o=e.enableResizing,a=void 0!==o&&o,i=e.enableDragging,l=void 0===i||i,c=e.header,s=void 0===c?"":c,d=e.minHeight,p=void 0===d?100:d,m=e.minWidth,h=void 0===m?100:m,y=e.modalHeight,v=void 0===y?400:y,_=e.modalWidth,b=void 0===_?400:_,E=C((0,u.useState)(!1),2),w=E[0],k=E[1],x=(window.innerWidth-b)/2,S=(window.innerHeight-v)/2,O=C(f().useState({width:b,height:v,xAxis:x>=0?x:0,yAxis:S>=0?S:0}),2),T=O[0],L=O[1],A=g()((function(){var e=window.innerWidth>b?b:window.innerWidth-50,t=window.innerHeight>v?v:window.innerHeight-50,r=(window.innerWidth-e)/2,n=(window.innerHeight-t)/2;L({width:e,height:t,xAxis:r>=0?r:0,yAxis:n>=0?n:0}),k(!0)}),0);return f().useEffect((function(){return A(),window.addEventListener("resize",A),function(){window.removeEventListener("resize",A)}}),[A]),f().createElement("div",{id:"draggable_resize_container"},w&&f().createElement(N,{boundary:t,initialValues:T,minWidth:h,minHeight:p,enableResizing:a,enableDragging:l,header:s,onClose:n},r))};var j=r(5314),z=r(6464),R=r(7811);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function M(e,t,r){return t&&B(e.prototype,t),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function U(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}var F=M((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.dbot_store=void 0,this.api_helpers_store=void 0,this.timer=void 0,this.disposeReloadOnLanguageChangeReaction=void 0,this.disposeCurrencyReaction=void 0,this.disposeSwitchAccountListener=void 0,this.disposeLandingCompanyChangeReaction=void 0,this.disposeResidenceChangeReaction=void 0,this.getErrorForNonEuClients=function(){return{text:(0,_.localize)("Unfortunately, this trading platform is not available for EU Deriv account. Please switch to a non-EU account to continue trading."),title:(0,_.localize)("Deriv Bot is unavailable for this account"),link:(0,_.localize)("Switch to another account")}},this.getErrorForEuClients=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return{text:" ",title:e?(0,_.localize)("Deriv Bot is not available for ".concat(t||"EU"," clients")):(0,_.localize)("Deriv Bot is unavailable in ".concat(t||"the EU")),link:e?(0,_.localize)("Back to Trader's Hub"):"",route:z.routes.traders_hub}},this.throwErrorForExceptionCountries=function(e){var t=o.core,r=t.client,n=t.common,a={au:"Australian",sg:"Singaporean"}[e];if(a)return(0,z.showDigitalOptionsUnavailableError)(n.showError,o.getErrorForEuClients(r.is_logged_in,a))},this.handleErrorForEu=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=o.core,r=t.client,n=t.common,a=t.ui,i=t.traders_hub,l=null==a?void 0:a.toggleAccountsDialog;if((null==r||!r.is_logged_in)&&null!=r&&r.is_eu_country)return null!=r&&r.has_logged_out&&(window.location.href=z.routes.traders_hub),o.throwErrorForExceptionCountries(null==r?void 0:r.clients_country),(0,z.showDigitalOptionsUnavailableError)(n.showError,o.getErrorForEuClients());if(!r.is_landing_company_loaded)return!1;if(window.location.pathname.includes(z.routes.bot)){var c;if(o.throwErrorForExceptionCountries(null==r||null===(c=r.account_settings)||void 0===c?void 0:c.country_code),r.should_show_eu_error)return(0,z.showDigitalOptionsUnavailableError)(n.showError,o.getErrorForEuClients(r.is_logged_in));if(i.content_flag===z.ContentFlag.HIGH_RISK_CR)return!1;if(i.content_flag===z.ContentFlag.LOW_RISK_CR_EU&&l)return(0,z.showDigitalOptionsUnavailableError)(n.showError,o.getErrorForNonEuClients(),l,!1,!1);if((!r.is_bot_allowed&&r.is_eu&&r.should_show_eu_error||(0,z.isEuResidenceWithOnlyVRTC)(r.active_accounts)||r.is_options_blocked)&&l)return(0,z.showDigitalOptionsUnavailableError)(n.showError,o.getErrorForNonEuClients(),l,!1,!1)}return e&&n.has_error&&n.setError&&n.setError(!1,{message:""}),!1},this.onMount=function(){var e=o.root_store,t=e.blockly_store,n=e.run_panel,a=o.core,i=a.client,l=a.ui,c=a.traders_hub,s=l.is_dark_mode_on;o.showDigitalOptionsMaltainvestError();var u=1;o.timer=setInterval((function(){window.sendRequestsStatistic&&(window.sendRequestsStatistic(!1),performance.clearMeasures(),6===u||null!=n&&n.is_running?o.timer&&clearInterval(o.timer):u++)}),1e4),t.setLoading(!0),p.DBot.initWorkspace(r.p,o.dbot_store,o.api_helpers_store,l.is_mobile,s).then((function(){t.setContainerSize(),t.setLoading(!1)})),o.registerReloadOnLanguageChange(),o.registerCurrencyReaction.call(o),o.registerOnAccountSwitch.call(o),o.registerLandingCompanyChangeReaction.call(o),o.registerResidenceChangeReaction.call(o),window.addEventListener("click",o.onClickOutsideBlockly),window.addEventListener("beforeunload",o.onBeforeUnload),t.getCachedActiveTab(),(0,j.when)((function(){return(null==i?void 0:i.should_show_eu_error)||(null==i?void 0:i.is_landing_company_loaded)}),(function(){return o.showDigitalOptionsMaltainvestError()})),(0,j.reaction)((function(){return null==c?void 0:c.content_flag}),(function(){return o.showDigitalOptionsMaltainvestError()}))},this.onUnmount=function(){p.DBot.terminateBot(),p.DBot.terminateConnection(),window.Blockly.derivWorkspace&&(clearInterval(window.Blockly.derivWorkspace.save_workspace_interval),window.Blockly.derivWorkspace.dispose()),"function"==typeof o.disposeReloadOnLanguageChangeReaction&&o.disposeReloadOnLanguageChangeReaction(),"function"==typeof o.disposeCurrencyReaction&&o.disposeCurrencyReaction(),"function"==typeof o.disposeSwitchAccountListener&&o.disposeSwitchAccountListener(),"function"==typeof o.disposeLandingCompanyChangeReaction&&o.disposeLandingCompanyChangeReaction(),"function"==typeof o.disposeResidenceChangeReaction&&o.disposeResidenceChangeReaction(),window.removeEventListener("click",o.onClickOutsideBlockly),window.removeEventListener("beforeunload",o.onBeforeUnload);var e=o.core.ui;e.setAccountSwitcherDisabledMessage(),e.setPromptHandler(!1),o.timer&&clearInterval(o.timer),performance.clearMeasures()},this.onBeforeUnload=function(e){o.root_store.run_panel.is_stop_button_visible&&(e.returnValue=!0)},this.registerReloadOnLanguageChange=function(){o.disposeReloadOnLanguageChangeReaction=(0,j.reaction)((function(){return o.core.common.current_language}),(function(){var e=window.location.pathname;(/^\/bot/.test(e)||/^\/(br_)/.test(e)&&"bot"===e.split("/")[2])&&window.location.reload()}))},this.registerCurrencyReaction=function(){o.disposeCurrencyReaction=(0,j.reaction)((function(){return o.core.client.currency}),(function(){window.Blockly.derivWorkspace&&window.Blockly.derivWorkspace.getAllBlocks().filter((function(e){return"trade_definition_tradeoptions"===e.type||"trade_definition_multiplier"===e.type||"trade_definition_accumulator"===e.type||e.isDescendantOf("trade_definition_multiplier")&&"trade_parameters"===e.category_})).forEach((function(e){return(0,R.MN)(e)}))}))},this.registerOnAccountSwitch=function(){var e=o.core.client;o.disposeSwitchAccountListener=(0,j.reaction)((function(){return e.switch_broadcast}),(function(e){if(e&&(o.showDigitalOptionsMaltainvestError(),p.ApiHelpers.instance)){var t=p.ApiHelpers.instance,r=t.active_symbols,n=t.contracts_for;window.Blockly.derivWorkspace&&r.retrieveActiveSymbols(!0).then((function(){n.disposeCache(),window.Blockly.derivWorkspace.getAllBlocks().filter((function(e){return"trade_definition_market"===e.type})).forEach((function(e){(0,p.runIrreversibleEvents)((function(){var t=new window.Blockly.Events.BlockCreate(e);window.Blockly.Events.fire(t)}))}))})),p.DBot.initializeInterpreter()}}))},this.registerLandingCompanyChangeReaction=function(){var e=o.core.client;o.disposeLandingCompanyChangeReaction=(0,j.reaction)((function(){return e.landing_company_shortcode}),(function(){return o.handleErrorForEu()}))},this.registerResidenceChangeReaction=function(){var e=o.core.client;o.disposeResidenceChangeReaction=(0,j.reaction)((function(){return e.account_settings.country_code}),(function(){return o.handleErrorForEu()}))},this.setDBotEngineStores=function(){var e=o.root_store,t=e.flyout,r=e.toolbar,n=e.save_modal,a=e.dashboard,i=e.load_modal,l=e.run_panel,c=e.blockly_store,s=e.summary_card,u=o.core.client,f=i.handleFileChange,d=c.setLoading,p=s.setContractUpdateConfig,m=o.core.ui.is_mobile;o.dbot_store={client:u,flyout:t,toolbar:r,save_modal:n,dashboard:a,load_modal:i,run_panel:l,setLoading:d,setContractUpdateConfig:p,handleFileChange:f,is_mobile:m},o.api_helpers_store={server_time:o.core.common.server_time,ws:o.root_store.ws}},this.onClickOutsideBlockly=function(e){var t;document.querySelector(".injectionDiv")&&((e.path||e.composedPath&&e.composedPath()).some((function(e){return e.classList&&e.classList.contains("injectionDiv")}))||null===(t=window.Blockly)||void 0===t||t.hideChaff(!1))},this.showDigitalOptionsMaltainvestError=function(){o.handleErrorForEu(!0)},(0,j.makeObservable)(this,{onMount:j.action,onUnmount:j.action,onBeforeUnload:j.action,registerReloadOnLanguageChange:j.action,registerCurrencyReaction:j.action,registerOnAccountSwitch:j.action,registerLandingCompanyChangeReaction:j.action,registerResidenceChangeReaction:j.action,setDBotEngineStores:j.action,onClickOutsideBlockly:j.action,showDigitalOptionsMaltainvestError:j.action}),this.root_store=t,this.core=n,this.dbot_store=null,this.api_helpers_store=null,this.timer=null})),G=Object.freeze({WORKSPACE:"Workspace",CHART:"Chart"}),q=Object.freeze({DASHBOARD:0,BOT_BUILDER:1,CHART:2,TUTORIAL:3}),V=["id-dbot-dashboard","id-bot-builder","id-charts","id-tutorials"],Y=function(){return JSON.parse(localStorage.getItem("dbot_settings"))},H=function(e){var t=Y();return t?t[e]:null},W=function(e,t){var r=Y()||{};r[e]=t,localStorage.setItem("dbot_settings",JSON.stringify(r))};function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function X(e,t,r){return t&&$(e.prototype,t),r&&$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}var J=X((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_loading=!1,this.active_tab=G.WORKSPACE,this.setActiveTab=function(e){r.active_tab=e,W("active_tab",r.active_tab)},this.setContainerSize=function(){r.active_tab===G.WORKSPACE&&(0,p.onWorkspaceResize)()},this.onMount=function(){window.addEventListener("resize",r.setContainerSize)},this.getCachedActiveTab=function(){H("active_tab")&&(r.active_tab=H("active_tab"))},this.onUnmount=function(){window.removeEventListener("resize",r.setContainerSize)},this.setLoading=function(e){r.is_loading=e},(0,j.makeObservable)(this,{is_loading:j.observable,active_tab:j.observable,setLoading:j.action,setActiveTab:j.action}),this.root_store=t}));function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function te(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}var re,ne={},oe=function(){return e=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.symbol=void 0,this.is_chart_loading=void 0,this.chart_type=void 0,this.granularity=void 0,this.onStartBot=function(){r.updateSymbol()},this.onStopBot=function(){},this.updateSymbol=function(){var e=window.Blockly.derivWorkspace.getAllBlocks().find((function(e){return"trade_definition_market"===e.type}));if(e&&"na"!==e){var t=e.getFieldValue("SYMBOL_LIST");r.symbol=t}},this.onSymbolChange=function(e){r.symbol=e,r.saveToLocalStorage()},this.updateGranularity=function(e){r.granularity=e,r.saveToLocalStorage()},this.updateChartType=function(e){r.chart_type=e,r.saveToLocalStorage()},this.setChartStatus=function(e){r.is_chart_loading=e},this.saveToLocalStorage=function(){z.LocalStore.set("bot.chart_props",JSON.stringify({symbol:r.symbol,granularity:r.granularity,chart_type:r.chart_type}))},this.restoreFromStorage=function(){try{var e=z.LocalStore.get("bot.chart_props");if(e){var t=JSON.parse(e),n=t.symbol,o=t.granularity,a=t.chart_type;r.symbol=n,r.granularity=o,r.chart_type=a}else r.granularity=0,r.chart_type="line"}catch(e){z.LocalStore.remove("bot.chart_props")}},this.wsSubscribe=function(e,t){if(1===e.subscribe){var r=JSON.stringify(e),n=re.subscribeTicksHistory(e,t);ne[r]=n}},this.wsForget=function(e){var t,r=JSON.stringify(e);ne[r]&&(null===(t=ne[r])||void 0===t||t.unsubscribe(),delete ne[r])},this.wsForgetStream=function(e){re.forgetStream(e)},this.wsSendRequest=function(e){return"time"in e&&e.time?p.ServerTime.timePromise().then((function(){return{msg_type:"time",time:p.ServerTime.get().unix()}})):"active_symbols"in e&&e.active_symbols?re.activeSymbols():re.storage.send?re.storage.send(e):void 0},this.getMarketsOrder=function(e){var t="synthetic_index",r=!!e.find((function(e){return e.market===t}));return e.slice().sort((function(e,t){return e.display_name<t.display_name?-1:1})).map((function(e){return e.market})).reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),r?[t]:[])},(0,j.makeObservable)(this,{symbol:j.observable,is_chart_loading:j.observable,chart_type:j.observable,granularity:j.observable,is_contract_ended:j.computed,updateSymbol:j.action,onSymbolChange:j.action,updateGranularity:j.action,updateChartType:j.action,setChartStatus:j.action,restoreFromStorage:j.action}),this.root_store=t,re=t.ws;var n=t.run_panel;(0,j.reaction)((function(){return n.is_running}),(function(){return n.is_running?r.onStartBot():r.onStopBot()})),this.restoreFromStorage()},(t=[{key:"is_contract_ended",get:function(){var e=this.root_store.transactions;return e.contracts.length>0&&e.contracts[0].is_ended}}])&&ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),ae=r(7519),ie=r(8843),le=r(1361),ce=[{type:"subtitle",content:[(0,_.localize)("Exploring the D’Alembert strategy in Deriv Bot")],expanded:!0,no_collapsible:!1},{type:"text",content:[(0,_.localize)("The D'Alembert strategy involves increasing your stake after a losing trade and reducing it after a successful trade by a predetermined number of units.")]},{type:"subtitle",content:[(0,_.localize)("Key parameters")]},{type:"text",content:[(0,_.localize)("These are the trade parameters used for D’Alembert strategy in Deriv Bot.")]},{type:"text",content:[(0,_.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,_.localize)("<strong>Unit:</strong> The number of units that are added in the event of a trade resulting in loss or the number of units removed in the event of a trade resulting in profit. For example, if the unit is set at 2, the stake increases or decreases by two times the initial stake of 1 USD, meaning it changes by 2 USD.")]},{type:"text",content:[(0,_.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"subtitle",content:[(0,_.localize)("An example of D’Alembert strategy")]},{type:"media",src:c("dalembert.svg"),alt:(0,_.localize)("An example of D’Alembert strategy")},{type:"text",content:[(0,_.localize)("1. Start with the initial stake. In this example, we’ll use 1 USD."),(0,_.localize)("2. Set your preferred unit. In this example, it is 2 units or 2 USD."),(0,_.localize)("3. If the first trade results in profit, the stake for the following trade will not reduce but remain at the initial stake. The strategy minimally trades at the initial stake of 1 USD. See A1."),(0,_.localize)("4. If the second trade results in a loss, the Deriv Bot will automatically increase your stake for the next trade by 2 USD. Deriv Bot will continue to add 2 USD to the previous round’s stake after every losing trade. See A2."),(0,_.localize)("5. If the next trades are profitable, the stake for the following trade will be reduced by 2 USD. This can be shown above where the stake of 3 USD is reduced to 1 USD. See A3.")]},{type:"subtitle",content:[(0,_.localize)("Profit and loss thresholds")]},{type:"text",content:[(0,_.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure potential profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss thresholds are reached. It's a form of risk management that can potentially enhance returns. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,_.localize)("Estimating the lifespan of your trades")]},{type:"text",content:[(0,_.localize)("The D’Alembert strategy is less risky than Martingale, but you can still determine how long your funds will last with this strategy before trading. Simply use this formula.")]},{type:"media",src:c("dalembert_formula_1.svg"),dark_src:c("dalembert_formula_dark_1.svg"),alt:(0,_.localize)("D’Alembert formula 1"),className:"formula",styles:{height:"6rem"}},{type:"text",content:[(0,_.localize)("Where:"),(0,_.localize)("R is the number of rounds a trader can sustain given a specific loss threshold."),(0,_.localize)("B is the loss threshold."),(0,_.localize)("s is the initial stake."),(0,_.localize)("f is the unit increment.")],className:"no-margin"},{type:"text",content:[(0,_.localize)("For instance, if a trader has a loss threshold (B) of 100 USD, with an initial stake (s) of 1 USD and 2 units of increment (f), the calculation would be as follows:")],className:"top-margin"},{type:"media",src:c("dalembert_formula_2.svg"),dark_src:c("dalembert_formula_dark_2.svg"),alt:(0,_.localize)("D’Alembert formula 2"),className:"formula",styles:{height:"6rem"}},{type:"text",content:[(0,_.localize)("Number of rounds (R) = 10")]},{type:"text",content:[(0,_.localize)("This means after 10 rounds of consecutive losses, this trader will lose 100 USD. This reaches the loss threshold of 100 USD, stopping the bot.")]},{type:"text",content:[(0,_.localize)("This formula helps you plan your trades by considering the amount of money you have and your comfort level with risk. It involves determining your loss threshold and the initial stake you want to trade with. Then, you use this formula to calculate the number of rounds you can trade. This process provides insight into stake sizing and expectations.")]},{type:"subtitle",content:[(0,_.localize)("Summary")]},{type:"text",content:[(0,_.localize)("The D'Alembert system offers more balanced trading through controlled stake progression. With prudent risk management like stake limits, it can be effectively automated in Deriv Bot. However, traders should thoroughly assess their risk appetite, test strategies on a demo account to align with their trading style before trading with real money. This allows optimising the approach and striking a balance between potential gains and losses whilst managing risk.")]},{type:"text_italic",content:[(0,_.localize)("<strong>Disclaimer:</strong>")]},{type:"text_italic",content:[(0,_.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades.")]},{type:"text_italic",content:[(0,_.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],se=[{type:"subtitle",content:[(0,_.localize)("Exploring the Martingale strategy in Deriv Bot")],expanded:!0,no_collapsible:!1},{type:"text",content:[(0,_.localize)("The Martingale strategy involves increasing your stake after each loss to recoup prior losses with a single successful trade."),(0,_.localize)("This article explores the Martingale strategy integrated into Deriv Bot, a versatile trading bot designed to trade assets such as forex, commodities, and derived indices. We will delve into the strategy's core parameters, its application, and provide essential takeaways for traders looking to use the bot effectively.")]},{type:"subtitle",content:[(0,_.localize)("Key parameters")]},{type:"text",content:[(0,_.localize)("These are the trade parameters used in Deriv Bot with Martingale strategy.")]},{type:"text",content:[(0,_.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,_.localize)("<strong>Multiplier:</strong> The multiplier used to increase your stake if you're losing a trade. The value must be greater than 1.")]},{type:"text",content:[(0,_.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Maximum stake:</strong> The maximum amount you are willing to pay to enter a single trade. The stake for your next trade will reset to the initial stake if it exceeds this value. This is an optional risk management parameter.")]},{type:"subtitle",content:[(0,_.localize)("An example of Martingale strategy")]},{type:"media",src:c("martingale.svg"),alt:(0,_.localize)("An example of Martingale strategy")},{type:"text",content:[(0,_.localize)("1. Start with the initial stake. Let’s say 1 USD."),(0,_.localize)("2. Select your Martingale multiplier. In this example, it is 2."),(0,_.localize)("3. If the first trade ends in a loss, Deriv Bot will automatically double your stake for the next trade to 2 USD. Deriv Bot will continue to double the stake after every losing trade."),(0,_.localize)("4. If a trade ends in a profit, the stake for the following trade will be reset to the initial stake amount of 1 USD.")]},{type:"text",content:[(0,_.localize)("The idea is that successful trades may recoup previous losses. However, it is crucial to exercise caution as the risk can quickly increase with this strategy. With Deriv Bot, you can minimise your risk by setting a maximum stake. This is an optional risk management feature. Let’s say a maximum stake of 3 USD. If your stake for the next trade is set to exceed 3 USD, your stake will reset to the initial stake of 1 USD. If you didn't set a maximum stake, it would have increased beyond 3 USD.")]},{type:"subtitle",content:[(0,_.localize)("Profit and loss thresholds")]},{type:"text",content:[(0,_.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure potential profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss thresholds are reached. It's a form of risk management that can potentially enhance returns. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,_.localize)("Estimating the lifespan of your trades")]},{type:"text",content:[(0,_.localize)("If you're about to start trading and haven't established a Maximum Stake as part of your risk management strategy, you can determine how long your funds will last by employing the Martingale strategy. Simply use this formula.")]},{type:"media",src:c("martingale_formula_1.svg"),dark_src:c("martingale_formula_dark_1.svg"),alt:(0,_.localize)("Martingale formula 1"),className:"formula",styles:{height:"6.5rem"}},{type:"text",content:[(0,_.localize)("Where:"),(0,_.localize)("R is the number of rounds a trader can sustain given a specific loss threshold."),(0,_.localize)("B is the loss threshold."),(0,_.localize)("s is the initial stake."),(0,_.localize)("m is the Martingale multiplier.")],className:"no-margin"},{type:"text",content:[(0,_.localize)("For instance, if a trader has a loss threshold (B) is 1000 USD, with an initial stake (s) is 1 USD, and the Martingale multiplier (m) is 2, the calculation would be as follows:")],className:"top-margin"},{type:"media",src:c("martingale_formula_2.svg"),dark_src:c("martingale_formula_dark_2.svg"),alt:(0,_.localize)("Martingale formula 2"),className:"formula",styles:{height:"6.5rem"}},{type:"text",content:[(0,_.localize)("Number of rounds, R ≈ 9.965"),(0,_.localize)("This means that after 10 rounds of consecutive losses, this trader will lose 1023 USD which exceeds the loss threshold of 1000 USD, stopping the bot."),(0,_.localize)("This formula helps you plan your trades by considering the amount of money you have and your comfort level with risk. It involves determining your loss threshold and the initial stake you want to trade with. Then, you use this formula to calculate the number of rounds you can trade. This process provides insight into stake sizing and expectations.")]},{type:"subtitle",content:[(0,_.localize)("Summary")]},{type:"text",content:[(0,_.localize)("The Martingale strategy in trading may offer substantial gains but also comes with significant risks. With your selected strategy, Deriv Bot provides automated trading with risk management measures like setting initial stake, stake size, maximum stake, profit threshold and loss threshold. It's crucial for traders to assess their risk tolerance, practice in a demo account, and understand the strategy before trading with real money.")]},{type:"text_italic",content:[(0,_.localize)("<strong>Disclaimer:</strong>")]},{type:"text_italic",content:[(0,_.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades.")]},{type:"text_italic",content:[(0,_.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],ue=[{type:"subtitle",content:[(0,_.localize)("Exploring the Oscar’s Grind strategy in Deriv Bot")],expanded:!0,no_collapsible:!1},{type:"text",content:[(0,_.localize)("The Oscar’s Grind strategy is designed to potentially gain a modest yet steady profit in each trading session. This strategy splits trades into sessions and has three principles.")]},{type:"subtitle",content:[(0,_.localize)("Key parameters")]},{type:"text",content:[(0,_.localize)("These are the trade parameters used for Oscar’s Grind strategy in Deriv Bot.")]},{type:"text",content:[(0,_.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,_.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"subtitle",content:[(0,_.localize)("An example of Oscar’s Grind strategy")]},{type:"media",src:c("oscars_grind.png"),alt:(0,_.localize)("An example of Oscar’s Grind strategy")},{type:"text",content:[(0,_.localize)("<strong>Principle 1: Strategy aims to potentially make one unit of profit per session</strong>")]},{type:"text",content:[(0,_.localize)("The table above demonstrates this principle by showing that when a successful trade occurs and meets the target of one unit of potential profit which is 1 USD in this example, the session ends. If trading continues, a new session will begin.")]},{type:"text",content:[(0,_.localize)("<strong>Principle 2: The stake only increases when a loss trade is followed by a successful trade</strong>")]},{type:"text",content:[(0,_.localize)("The table illustrates this principle in the second session. After a trade resulting in loss in round 4 followed by a successful trade in round 5, the stake will increase to 2 USD for round 6. This is in line with the strategy's rule of raising the stake only after a loss is followed by a successful trade.")]},{type:"text",content:[(0,_.localize)("<strong>Principle 3: The stake adjusts to the gap size between current loss and the target profit for the session</strong>")]},{type:"text",content:[(0,_.localize)("In round 7, the stake is adjusted downwards from 2 USD to 1 USD, to meet the target profit of 1 USD.")]},{type:"text",content:[(0,_.localize)("The stake adjustment: target session profit (1 USD) - current session profit (0 USD) = 1 USD")]},{type:"text",content:[(0,_.localize)("The second session concludes upon reaching the aim of one unit of potential profit per session, equivalent to 1 USD. If trading continues, a new session will commence again.")]},{type:"subtitle",content:[(0,_.localize)("Profit and loss thresholds")]},{type:"text",content:[(0,_.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure potential profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss threshold is reached. This is a form of risk management that can potentially boost successful trades whilst limiting the impact of loss. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,_.localize)("Summary")]},{type:"text",content:[(0,_.localize)("The Oscar's Grind strategy provides a disciplined approach for incremental gains through systematic stake progression. When integrated into Deriv Bot with proper risk management like profit or loss thresholds, it offers traders a potentially powerful automated trading technique. However, traders should first thoroughly assess their risk tolerance and first try trading on a demo account in order to familiarise with the strategy before trading with real funds.")]},{type:"text_italic",content:[(0,_.localize)("<strong>Disclaimer:</strong>")]},{type:"text_italic",content:[(0,_.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades.")]},{type:"text_italic",content:[(0,_.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],fe=[{type:"subtitle",content:[(0,_.localize)("Exploring the Reverse D’Alembert strategy in Deriv Bot")],expanded:!0,no_collapsible:!1},{type:"text",content:[(0,_.localize)("The Reverse D'Alembert strategy involves increasing your stake after a successful trade and reducing it after a losing trade by a predetermined number of units.")]},{type:"subtitle",content:[(0,_.localize)("Key parameters")]},{type:"text",content:[(0,_.localize)("These are the trade parameters used in Deriv Bot with Reverse D’Alembert strategy.")]},{type:"text",content:[(0,_.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,_.localize)("<strong>Unit:</strong> The number of units that are added in the event of successful trades or the number of units removed in the event of losing trades. For example, if the unit is set at 2, the stake increases or decreases by two times the initial stake of 1 USD, meaning it changes by 2 USD.")]},{type:"text",content:[(0,_.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"subtitle",content:[(0,_.localize)("An example of Reverse D’Alembert strategy")]},{type:"media",src:c("reverse_dalembert.svg"),alt:(0,_.localize)("An example of Reverse D’Alembert strategy")},{type:"text",content:[(0,_.localize)("1. Start with the initial stake. Let’s say 1 USD."),(0,_.localize)("2. Select your unit. In this example, it is 2 units or 2 USD."),(0,_.localize)("3. For trades that result in a profit, the stake for the next trade will be increased by 2 USD. Deriv Bot will continue to add 2 USD for every successful trade. See A1."),(0,_.localize)("4. For trades that result in a loss, there are two outcomes.  If it was traded at the initial stake, the next trade will remain at the same amount as the strategy trades minimally at the initial stake, see A2. If it was traded with a higher amount, the stake for the next trade would be reduced by 2 USD, see A3.")]},{type:"subtitle",content:[(0,_.localize)("Profit and loss thresholds")]},{type:"text",content:[(0,_.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure potential profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss threshold is reached. This is a form of risk management that can potentially boost successful trades whilst limiting the impact of loss. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,_.localize)("Summary")]},{type:"text",content:[(0,_.localize)("Effective trading with the D'Alembert system requires careful consideration of its stake progression and risk management. Traders can automate this approach using Deriv Bot, setting profit and loss thresholds to ensure balanced and controlled trading. However, it is crucial for traders to assess their risk appetite, test strategies on a demo account, and align with their own trading style before transitioning to real money trading. This optimization process helps strike a balance between potential gains and losses while managing risk prudently.")]},{type:"text_italic",content:[(0,_.localize)("<strong>Disclaimer:</strong>")]},{type:"text_italic",content:[(0,_.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD  profit in successful trades.")]},{type:"text_italic",content:[(0,_.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],de=[{type:"subtitle",content:[(0,_.localize)("Exploring the Reverse Martingale strategy in Deriv Bot")],expanded:!0,no_collapsible:!1},{type:"text",content:[(0,_.localize)("The Reverse Martingale strategy involves increasing your stake after each successful trade and resets to the initial stake for every losing trade as it aims to secure potential profits from consecutive wins."),(0,_.localize)("This article explores the Reverse Martingale strategy integrated into Deriv Bot, a versatile trading bot designed to trade assets such as forex, commodities, and derived indices. We will delve into the strategy's core parameters, its application, and provide essential takeaways for traders looking to use the bot effectively.")]},{type:"subtitle",content:[(0,_.localize)("Key parameters")]},{type:"text",content:[(0,_.localize)("These are the trade parameters used in Deriv Bot with Reverse Martingale strategy.")]},{type:"text",content:[(0,_.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,_.localize)("<strong>Multiplier:</strong> The multiplier used to increase your stake if your trade is successful. The value must be greater than 1.")]},{type:"text",content:[(0,_.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Maximum stake:</strong> The maximum amount you are willing to pay to enter a single trade. The stake for your next trade will reset to the initial stake if it exceeds this value. This is an optional risk management parameter.")]},{type:"subtitle",content:[(0,_.localize)("An example of Reverse Martingale strategy")]},{type:"media",src:c("reverse_martingale.svg"),alt:(0,_.localize)("An example of Martingale strategy")},{type:"text",content:[(0,_.localize)("1. Start with the initial stake. Let’s say 1 USD."),(0,_.localize)("2. Select your Martingale multiplier. In this example, it is 2."),(0,_.localize)("3. If the first trade is a successful trade, Deriv Bot will automatically double your stake for the next trade to 2 USD. Deriv Bot will continue to double the stake after every successful trade."),(0,_.localize)("4. If a trade ends in a loss, the stake for the following trade will be reset to the initial stake amount of 1 USD.")]},{type:"text",content:[(0,_.localize)("The objective of Martingale strategy is to take advantage of consecutive successful trades and maximise potential profits from them. This strategy is beneficial only if there are consecutive successful trades. Therefore, it is important to set a maximum stake to secure all the potential profits gained from a number of consecutive successful trades, or you could lose all the profits you have accumulated, including your initial stake. For example, if your goal is to maximise profits within 2 consecutive successful trades, you set a maximum stake of 2 USD, given your initial stake is 1 USD. Similarly, if your goal is to maximise profits within 3 consecutive successful trades, you set a maximum stake of 4 USD, given your initial stake is 1 USD.")]},{type:"subtitle",content:[(0,_.localize)("Profit and loss thresholds")]},{type:"text",content:[(0,_.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure potential profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss threshold is reached. This is a form of risk management that can potentially boost successful trades whilst limiting the impact of loss. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,_.localize)("Summary")]},{type:"text",content:[(0,_.localize)("The Reverse Martingale strategy in trading may offer substantial gains but also comes with significant risks. With your selected strategy, Deriv Bot provides automated trading with risk management measures like setting initial stake, stake size, maximum stake, profit threshold and loss threshold. It's crucial for traders to assess their risk tolerance, practice in a demo account, and understand the strategy before trading with real money.")]},{type:"text_italic",content:[(0,_.localize)("<strong>Disclaimer:</strong>")]},{type:"text_italic",content:[(0,_.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades.")]},{type:"text_italic",content:[(0,_.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],pe=[{type:"subtitle",content:[(0,_.localize)("Exploring the 1-3-2-6 strategy in Deriv Bot")],expanded:!0,no_collapsible:!1},{type:"text",content:[(0,_.localize)("The 1-3-2-6 strategy aims to maximise potential profits with four consecutive successful trades. One unit is equal to the amount of the initial stake. The stake will adjust from 1 unit to 3 units after the first successful trade, then to 2 units after your second successful trade, and to 6 units after the third successful trade. The stake for the next trade will reset to the initial stake if there is a losing trade or a completion of the trade cycle."),(0,_.localize)("This article explores the strategy integrated into Deriv Bot, a versatile trading bot designed to trade assets such as Forex, Commodities, and Derived Indices. We will delve into the strategy's core parameters, its application, and provide essential takeaways for traders looking to use the bot effectively.")]},{type:"subtitle",content:[(0,_.localize)("Key parameters")]},{type:"text",content:[(0,_.localize)("These are the trade parameters used in Deriv Bot with 1-3-2-6 strategy.")]},{type:"text",content:[(0,_.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,_.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,_.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"subtitle",content:[(0,_.localize)("An example of 1-3-2-6 strategy")]},{type:"media",src:c("1-3-2-6.svg"),alt:(0,_.localize)("An example of 1-3-2-6 strategy")},{type:"text",content:[(0,_.localize)("1. Start with the initial stake. Let’s say 1 USD."),(0,_.localize)("2. If the trade is successful, this strategy will automatically adjust your stake to 3 units of your initial stake for the next trade. In this case, the stake adjustment is 3 units and the initial stake is 1 USD, hence the next trade will start at 3 USD."),(0,_.localize)("3. If the second trade is also successful, your stake will adjust to 2 USD or 2 units of the initial stake for the next trade."),(0,_.localize)("4. However, if any trade results in a loss, your stake will reset back to the initial stake of 1 USD for the next trade. The third trade results in a loss hence the stake resets to the initial stake of 1 USD for the next trade."),(0,_.localize)("5. Upon reaching the initial stake, if the next trade still results in a loss, your stake will remain at the initial stake of 1 USD. This strategy will minimally trade at the initial stake. Refer to the fourth and fifth trade."),(0,_.localize)("6. If consecutive successful trades were to happen, the stake would follow a sequence of adjustment from 1 to 3, then 2, and 6 units of initial stake. After 4 consecutive successful trades, it completes one cycle and then the strategy will repeat itself for another cycle. If any trade results in a loss, your stake will reset back to the initial stake for the next trade.")]},{type:"text",content:[(0,_.localize)("The 1-3-2-6 strategy is designed to capitalise on consecutive successful trades while minimising losses during losing streaks. The rationale behind this strategy lies in statistical probabilities, with adjustments to stake sizes based on the perceived likelihood of success. There is a higher likelihood of success in the second trade after one successful trade. Hence the stake adjusts to 3 in the second trade. In the third trade, the stake adjusts to 2 units due to a lower probability of a successful trade. If the third trade is also successful, the strategy then allocates all the previous gains (a total of 6 units of initial stake) into the fourth trade with the aim of doubling the potential profits. If the fourth trade results in a positive outcome, the strategy helps achieve a total gain of 12 units. However, it is crucial to exercise caution, as the risk can escalate quickly with this strategy, and any loss in the fourth trade forfeits all previous gains.")]},{type:"subtitle",content:[(0,_.localize)("Profit and loss thresholds")]},{type:"text",content:[(0,_.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure potential profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss threshold is reached. This is a form of risk management that can potentially boost successful trades whilst limiting the impact of loss. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,_.localize)("Summary")]},{type:"text",content:[(0,_.localize)("The 1-3-2-6 strategy in trading may offer substantial gains but also comes with significant risks. Each stake is independent, and the strategy does not increase your chances of successful trades in the long run. If you encounter a series of losses, the strategy can lead to significant losses. Therefore, it is crucial for traders to assess their risk tolerance, practice in a demo account, utilise profit and loss thresholds, and fully comprehend the strategy before engaging in real-money trading.")]},{type:"text_italic",content:[(0,_.localize)("<strong>Disclaimer:</strong>")]},{type:"text_italic",content:[(0,_.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades."),(0,_.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],me="user guide",he="videos on deriv bot",ye="quick strategy guides",ve=[{id:1,type:"Tour",subtype:"OnBoard",content:(0,_.localize)("Get started on Deriv Bot"),src:c("dbot-onboard-tour.png"),search_id:"".concat(me,"-0")},{id:2,type:"Tour",subtype:"BotBuilder",content:(0,_.localize)("Let’s build a bot!"),src:c("bot-builder-tour.png"),search_id:"".concat(me,"-1")}],_e=[{id:1,type:"DBotVideo",content:(0,_.localize)("An introduction to Deriv Bot"),url:"https://www.youtube.com/embed/lthEgaIY1uw",src:c("intro_to_deriv_bot.png"),search_id:"".concat(he,"-0")},{id:2,type:"DBotVideo",content:(0,_.localize)("How to build a basic trading bot with Deriv Bot"),url:"https://www.youtube.com/embed/mnpi2g7YakU",src:c("build_a_bot.png"),search_id:"".concat(he,"-1")},{id:3,type:"DBotVideo",content:(0,_.localize)("How to use Martingale strategy on Deriv Bot"),url:"https://www.youtube.com/embed/FSslvF7P00I",src:c("how_to_use_martingale.jpg"),search_id:"".concat(he,"-2")},{id:4,type:"DBotVideo",content:(0,_.localize)("Introducing Accumulator Options on Deriv Bot: Available for automated trading"),url:"https://www.youtube.com/embed/uMBBmdNaadU",src:c("introducing_accumulators_on_deriv_bot.png"),search_id:"".concat(he,"-3")}],be=[{title:(0,_.localize)("What is Deriv Bot?"),description:[{type:"text",content:(0,_.localize)("Deriv Bot is a web-based strategy builder for trading digital options. It’s a platform where you can build your own automated trading bot using drag-and-drop 'blocks'.")}],search_id:"faq-0"},{title:(0,_.localize)("Where do I find the blocks I need?"),description:[{type:"text",content:(0,_.localize)("Follow these steps:")},{type:"text",content:(0,_.localize)("1. Go to <strong>Bot Builder</strong>.")},{type:"text",content:(0,_.localize)("2. Under the <strong>Blocks menu</strong>, you'll see a list of categories. Blocks are grouped within these categories. Choose the block you want and drag them to the workspace.")},{type:"image",src:c("blocks_menu.png")},{type:"text",content:(0,_.localize)("3. You can also search for the blocks you want using the search bar above the categories.")},{type:"image",src:c("blocks_menu_search.png")},{type:"text",content:(0,_.localize)('For more info, <a href="https://deriv.com/blog/posts/build-a-basic-trading-bot-with-deriv-bot" rel="noopener noreferrer" target="_blank">check out this blog post</a> on the basics of building a trading bot.')}],search_id:"faq-1"},{title:(0,_.localize)("How do I remove blocks from the workspace?"),description:[{type:"text",content:(0,_.localize)("Click on the block you want to remove and press <strong>Delete</strong> on your keyboard.")}],search_id:"faq-2"},{title:(0,_.localize)("How do I create variables?"),description:[{type:"text",content:(0,_.localize)("1. Under the <strong>Blocks</strong> menu, go to <strong>Utility > Variables</strong>.")},{type:"text",content:(0,_.localize)("2. Enter a name for your variable, and hit <strong>Create</strong>. New blocks containing your new variable will appear below.")},{type:"text",content:(0,_.localize)("3. Choose the block you want and drag it to the workspace.")}],search_id:"faq-3"},{title:(0,_.localize)("Do you offer pre-built trading bots on Deriv Bot?"),description:[{type:"text",content:(0,_.localize)("Yes, you can get started with a pre-built bot using the <strong>Quick strategy</strong> feature. You’ll find some of the most popular trading strategies here: Martingale, D'Alembert, and Oscar's Grind. Just select the strategy, enter your trade parameters, and your bot will be created for you. You can always tweak the parameters later.")}],search_id:"faq-4"},{title:(0,_.localize)("What is a quick strategy?"),description:[{type:"text",content:(0,_.localize)("A quick strategy is a ready-made strategy that you can use in Deriv Bot. There are 3 quick strategies you can choose from: Martingale, D'Alembert, and Oscar's Grind.")},{type:"text",content:(0,_.localize)("<strong>Using a quick strategy</strong>")},{type:"text",content:(0,_.localize)("1. Go to <strong>Quick strategy</strong> and select the strategy you want.")},{type:"text",content:(0,_.localize)("2. Select the asset and trade type.")},{type:"text",content:(0,_.localize)("3. Set your trade parameters and hit <strong>Run</strong>.")},{type:"text",content:(0,_.localize)("4. Once the blocks are loaded onto the workspace, tweak the parameters if you want, or hit <strong>Run</strong> to start trading.")},{type:"text",content:(0,_.localize)("5. Hit <strong>Save</strong> to download your bot. You can choose to download your bot to your device or your Google Drive.")}],search_id:"faq-5"},{title:(0,_.localize)("How do I save my strategy?"),description:[{type:"text",content:(0,_.localize)("In <strong>Bot Builder</strong>, hit <strong>Save</strong> on the toolbar at the top to download your bot. Give your bot a name, and choose to download your bot to your device or Google Drive. Your bot will be downloaded as an XML file.")}],search_id:"faq-6"},{title:(0,_.localize)("How do I import my own trading bot into Deriv Bot?"),description:[{type:"text",content:(0,_.localize)("Just drag the XML file from your computer onto the workspace, and your bot will be loaded accordingly. Alternatively, you can hit <strong>Import</strong> in <strong>Bot Builder</strong>, and choose to import your bot from your computer or from your Google Drive.")},{type:"text",content:(0,_.localize)("<strong>Import from your computer</strong>")},{type:"text",content:(0,_.localize)("1. After hitting <strong>Import</strong>, select <strong>Local</strong> and click <strong>Continue</strong>.")},{type:"text",content:(0,_.localize)("2. Select your XML file and hit <strong>Open</strong>.")},{type:"text",content:(0,_.localize)("3. Your bot will be loaded accordingly.")},{type:"text",content:(0,_.localize)("<strong>Import from your Google Drive</strong>")},{type:"text",content:(0,_.localize)("1. After hitting <strong>Import</strong>, select <strong>Google Drive</strong> and click <strong>Continue</strong>.")},{type:"text",content:(0,_.localize)("2. Select your XML file and hit <strong>Select</strong>.")},{type:"text",content:(0,_.localize)("3. Your bot will be loaded accordingly.")}],search_id:"faq-7"},{title:(0,_.localize)("How do I reset the workspace?"),description:[{type:"text",content:(0,_.localize)("In <strong>Bot Builder</strong>, hit <strong>Reset</strong> on the toolbar at the top. This will clear the workspace. Please note that any unsaved changes will be lost.")}],search_id:"faq-8"},{title:(0,_.localize)("How do I clear my transaction log?"),description:[{type:"text",content:(0,_.localize)("1. Hit <strong>Reset</strong> at the bottom of stats panel.")},{type:"image",src:c("reset_transaction_log.png")},{type:"text",content:(0,_.localize)("2. Hit <strong>Ok</strong> to confirm.")},{type:"image",src:c("reset_transaction_log_message.png")}],search_id:"faq-9"},{title:(0,_.localize)("How do I control my losses with Deriv Bot?"),description:[{type:"text",content:(0,_.localize)("There are several ways to control your losses with Deriv Bot. Here’s a simple example of how you can implement loss control in your strategy:")},{type:"image",src:c("loss_control_all_block.png"),imageclass:"loss-control"},{type:"text",content:(0,_.localize)("<strong>1.</strong> Create the following variables and place them under <strong>Run once at start</strong>:")},{type:"text",content:(0,_.localize)("• <strong>Stop loss threshold</strong>: Use this variable to store your loss limit. You can assign any amount you want. Your bot will stop when your losses hits or exceeds this amount.")},{type:"text",content:(0,_.localize)("Example:")},{type:"image",src:c("loss_control_set_stop_loss.png")},{type:"text",content:(0,_.localize)("• <strong>Current stake</strong>: Use this variable to store the stake amount. You can assign any amount you want, but it must be a positive number.")},{type:"text",content:(0,_.localize)("Example:")},{type:"image",src:c("loss_control_set_current_stake.png")},{type:"text",content:(0,_.localize)("This is how your trade parameters, variables, and trade options should look like:")},{type:"image",src:c("loss_control_trade_parameters.png")},{type:"text",content:(0,_.localize)("<strong>2.</strong> Set the <strong>Purchase conditions</strong>. In this example, your bot will purchase a <strong>Rise</strong> contract when it starts and after a contract closes.")},{type:"image",src:c("loss_control_purchase_conditions.png")},{type:"text",content:(0,_.localize)("<strong>3.</strong> Use a logic block to check if <strong>Total profit/loss</strong> is more than the <strong>Stop loss threshold</strong> amount. You can find the <strong>Total profit/loss</strong> variable under <strong>Analysis > Stats</strong> on the <strong>Blocks menu</strong> on the left. Your bot will continue to purchase new contracts until the <strong>Total profit/loss</strong> amount exceeds the <strong>Stop loss threshold</strong> amount.")},{type:"image",src:c("loss_control_restart_trade_conditions.png")}],search_id:"faq-10"},{title:(0,_.localize)("Can I run Deriv Bot on multiple tabs in my web browser?"),description:[{type:"text",content:(0,_.localize)('Yes, you can. However, there are limits on your account, such as maximum number of open positions and maximum aggregate payouts on open positions. So, just keep these limits in mind when opening multiple positions. You can find more info about these limits at <a href="https://app.deriv.com/account/account-limits" rel="noopener noreferrer" target="_blank">Settings > Account limits</a>.')}],search_id:"faq-11"},{title:(0,_.localize)("Can I trade cryptocurrencies on Deriv Bot?"),description:[{type:"text",content:(0,_.localize)("No, we don't offer cryptocurrencies on Deriv Bot.")}],search_id:"faq-12"},{title:(0,_.localize)("Do you sell trading bots?"),description:[{type:"text",content:(0,_.localize)("No, we don't. However, you'll find quick strategies on Deriv Bot that'll help you build your own trading bot for free.")}],search_id:"faq-13"},{title:(0,_.localize)("In which countries is Deriv Bot available?"),description:[{type:"text",content:(0,_.localize)('We offer our services in all countries, except for the ones <a href="https://deriv.com/tnc/general-terms.pdf" rel="noopener noreferrer" target="_blank">mentioned in our terms and conditions.</a>')}],search_id:"faq-14"},{title:(0,_.localize)("If I close my web browser, will Deriv Bot continue to run?"),description:[{type:"text",content:(0,_.localize)("No, Deriv Bot will stop running when your web browser is closed.")}],search_id:"faq-15"},{title:(0,_.localize)("What are the most popular strategies for automated trading?"),description:[{type:"text",content:(0,_.localize)("Three of the most commonly used strategies in automated trading are Martingale, D'Alembert, and Oscar's Grind — you can find them all ready-made and waiting for you in Deriv Bot.")}],search_id:"faq-16"},{title:(0,_.localize)("How do I build a trading bot?"),description:[{type:"text",content:(0,_.localize)('<a href="https://www.youtube.com/watch?v=QdI5zCkO4Gk&t=203s" rel="noopener noreferrer" target="_blank">Watch this video</a> to learn how to build a trading bot on Deriv Bot. Also, <a href="https://deriv.com/blog/posts/build-a-basic-trading-bot-with-deriv-bot/" rel="noopener noreferrer" target="_blank">check out this blog post</a> on building a trading bot.')}],search_id:"faq-17"}],ge=[{qs_name:"MARTINGALE",type:(0,_.localize)("About Martingale"),content:[(0,_.localize)("Exploring the Martingale strategy in Deriv Bot"),(0,_.localize)("An example of Martingale strategy")],search_id:"".concat(ye,"-0")},{qs_name:"D_ALEMBERT",type:(0,_.localize)("About D'Alembert"),content:[(0,_.localize)("Exploring the D’Alembert strategy in Deriv Bot"),(0,_.localize)("An example of D’Alembert strategy")],search_id:"".concat(ye,"-1")},{qs_name:"OSCARS_GRIND",type:(0,_.localize)("About Oscar's Grind"),content:[(0,_.localize)("Exploring the Oscar’s Grind strategy in Deriv Bot"),(0,_.localize)("An example of Oscar’s Grind strategy")],search_id:"".concat(ye,"-2")},{qs_name:"REVERSE_MARTINGALE",type:(0,_.localize)("About Reverse Martingale"),content:[(0,_.localize)("Exploring the Reverse Martingale strategy in Deriv Bot"),(0,_.localize)("An example of Reverse Martingale strategy")],search_id:"".concat(ye,"-3")},{qs_name:"REVERSE_D_ALEMBERT",type:(0,_.localize)("About Reverse D’Alembert"),content:[(0,_.localize)("Exploring the Reverse D’Alembert strategy in Deriv Bot"),(0,_.localize)("An example of Reverse D’Alembert strategy")],search_id:"".concat(ye,"-4")},{qs_name:"STRATEGY_1_3_2_6",type:(0,_.localize)("About 1-3-2-6"),content:[(0,_.localize)("Exploring the 1-3-2-6 strategy in Deriv Bot"),(0,_.localize)("An example of 1-3-2-6 strategy")],search_id:"".concat(ye,"-5")}],Ee={key:"onboard_tour"},we=("".concat(Ee.key,"_status"),function(e,t){return W(t,e)}),ke=Object.freeze({0:"onboarding",1:"bot_builder"});function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Se(){Se=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==xe(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(xe(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Oe(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Te(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ne(n.key),n)}}function Ne(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}var Ce=function(){return e=function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.tutorials_combined_content=[],this.combined_search=[],this.active_tab=0,this.active_tab_tutorials=0,this.active_tour_step_number=0,this.dialog_options={},this.faq_search_value="",this.getFileArray=[],this.has_file_loaded=!1,this.has_mobile_preview_loaded=!1,this.active_tour="",this.is_dialog_open=!1,this.is_file_supported=!1,this.is_info_panel_visible=!1,this.is_preview_on_popup=!1,this.is_tour_dialog_visible=!1,this.show_toast=!1,this.show_mobile_tour_dialog=!1,this.strategy_save_type="unsaved",this.toast_message="",this.is_web_socket_intialised=!0,this.search_param="",this.guide_tab_content=ve,this.video_tab_content=_e,this.faq_tab_content=be,this.quick_strategy_tab_content=ge,this.filtered_tab_list=[],this.is_chart_modal_visible=!1,this.is_trading_view_modal_visible=!1,this.faq_title="",this.setFaqTitle=function(e){o.faq_title=e},this.resetTutorialTabContent=function(){o.guide_tab_content=ve,o.video_tab_content=_e,o.faq_tab_content=be,o.quick_strategy_tab_content=ge},this.filterTuotrialTab=function(e){o.search_param=e;var t=o.combined_search.filter((function(t){return t.includes(e.toLowerCase())})),r=[],n=[],a=[],i=[],l=t.map((function(e){var t=e.split("#")[0],o=t.split("-")[1];return t.includes(me)?(r.push(ve[Number(o)]),ve[Number(o)]):t.includes(he)?(n.push(_e[Number(o)]),_e[Number(o)]):t.includes("faq")?(a.push(be[Number(o)]),be[Number(o)]):(i.push(ge[Number(o)]),ge[Number(o)])}));return o.guide_tab_content=r,o.video_tab_content=n,o.faq_tab_content=a,o.quick_strategy_tab_content=i,l},this.setShowMobileTourDialog=function(e){o.show_mobile_tour_dialog=e},this.setWebSocketState=function(e){o.is_web_socket_intialised=e},this.setOpenSettings=function(e){o.toast_message=e,(0,ie.N)(le.UC[e])},this.setChartModalVisibility=function(){o.is_chart_modal_visible=!o.is_chart_modal_visible},this.setTradingViewModalVisibility=function(){o.is_trading_view_modal_visible=!o.is_trading_view_modal_visible},this.setIsFileSupported=function(e){o.is_file_supported=e},this.setTourActiveStep=function(e){o.active_tour_step_number=e},this.setPreviewOnDialog=function(e){o.has_mobile_preview_loaded=e,(0,o.root_store.load_modal.onLoadModalClose)()},this.setStrategySaveType=function(e){o.strategy_save_type=e},this.setPreviewOnPopup=function(e){o.is_preview_on_popup=e},this.setTourDialogVisibility=function(e){o.is_tour_dialog_visible=e},this.setActiveTour=function(e){o.active_tour=e},this.setFileLoaded=function(e){o.has_file_loaded=e,document.getElementById("load-strategy__blockly-container")||console.warn("Could not find preview workspace element.")},this.onCloseDialog=function(){o.is_dialog_open=!1},this.setActiveTab=function(e){o.active_tab=e,localStorage.setItem("active_tab",e.toString())},this.setActiveTabTutorial=function(e){o.active_tab_tutorials=e},this.setFAQSearchValue=function(e){o.faq_search_value=e},this.showVideoDialog=function(e){var t=e.url,r=e.type,n=void 0===r?"":r;o.faq_search_value="",o.setActiveTabTutorial(0),o.resetTutorialTabContent(),["google","url"].includes(n)?("url"===n&&(o.dialog_options={url:t}),o.is_dialog_open=!0):o.is_dialog_open=!1},this.setInfoPanelVisibility=function(e){o.is_info_panel_visible=e},this.onZoomInOutClick=function(e){var t=Blockly.getMainWorkspace(),r=t.getMetrics(),n=e?1:-1;t.zoom(r.viewWidth/2,r.viewHeight/2,n)},this.onCloseTour=function(){we((new Date).getTime(),"".concat(Ee.key,"_token")),o.setActiveTour("")},this.setTourEnd=function(e){var t=e.key;o.core.ui.is_mobile&&o.setTourDialogVisibility(!0),we((new Date).getTime(),"".concat(t,"_token"))},this.onTourEnd=function(e,t){8===e&&(o.onCloseTour(),o.setTourEnd(Ee),o.setActiveTour("")),t||3!==e||(o.onCloseTour(),o.setTourEnd(Ee),o.setActiveTour(""))},(0,j.makeObservable)(this,{active_tab_tutorials:j.observable,active_tab:j.observable,dialog_options:j.observable,faq_search_value:j.observable,getFileArray:j.observable,has_file_loaded:j.observable,has_mobile_preview_loaded:j.observable,initInfoPanel:j.action.bound,active_tour:j.observable,is_dialog_open:j.observable,is_file_supported:j.observable,is_info_panel_visible:j.observable,is_preview_on_popup:j.observable,is_tour_dialog_visible:j.observable,is_web_socket_intialised:j.observable,tutorials_combined_content:j.observable,onCloseDialog:j.action.bound,onCloseTour:j.action.bound,onTourEnd:j.action.bound,setActiveTab:j.action.bound,setActiveTabTutorial:j.action.bound,setWebSocketState:j.action.bound,setFAQSearchValue:j.action.bound,faq_title:j.observable,setFaqTitle:j.action.bound,setFileLoaded:j.action.bound,setInfoPanelVisibility:j.action.bound,setIsFileSupported:j.action.bound,setPreviewOnDialog:j.action.bound,setPreviewOnPopup:j.action.bound,setActiveTour:j.action.bound,setTourDialogVisibility:j.action.bound,setOpenSettings:j.action.bound,resetTutorialTabContent:j.action.bound,filterTuotrialTab:j.action.bound,show_toast:j.observable,show_mobile_tour_dialog:j.observable,showVideoDialog:j.action.bound,strategy_save_type:j.observable,toast_message:j.observable,guide_tab_content:j.observable,faq_tab_content:j.observable,quick_strategy_tab_content:j.observable,video_tab_content:j.observable,setStrategySaveType:j.action.bound,setShowMobileTourDialog:j.action.bound,is_chart_modal_visible:j.observable,is_trading_view_modal_visible:j.observable}),this.root_store=t,this.core=r;var a=Te(ve).map((function(e){return"".concat(e.search_id,"# ").concat(e.content.toLowerCase())})),i=Te(_e).map((function(e){return"".concat(e.search_id,"# ").concat(e.content.toLowerCase())})),l=be.map((function(e){return"".concat(e.search_id,"# ").concat(e.title.toLowerCase()," ").concat(e.description.map((function(e){var t=ae.A.sanitize(e.content,{ALLOWED_TAGS:[]});return null==t?void 0:t.toLowerCase()})).join(" "))})),c=ge.map((function(e){var t=e.content.join(" ").toLowerCase(),r=function(e){if(!e)return[];var t=[];return e.forEach((function(e){var r;"media"!==(null==e?void 0:e.type)&&(null===(r=e.content)||void 0===r||r.forEach((function(e){return t.push(e)})))})),t}(null==n?void 0:n[e.qs_name]);return r=r.join(" ").toLowerCase(),"".concat(e.search_id,"# ").concat(e.type.toLowerCase()," ").concat(r+t)}));this.combined_search=[].concat(Te(a),Te(i),Te(l),Te(c)),(0,j.reaction)((function(){return o.is_preview_on_popup}),function(){var e,t=(e=Se().mark((function e(t){return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&o.setPreviewOnPopup(!1);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Oe(a,n,o,i,l,"next",e)}function l(e){Oe(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()),this.initInfoPanel()},(t=[{key:"is_dark_mode",get:function(){return this.root_store.app.core.ui.is_dark_mode_on}},{key:"initInfoPanel",value:function(){localStorage.getItem("dbot_should_show_info")||(this.is_info_panel_visible=!0)}}])&&Ae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Pe=r(637),Ie=r.n(Pe);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(){Be=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==je(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(je(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Me(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Me(a,n,o,i,l,"next",e)}function l(e){Me(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ge(n.key),n)}}function Ge(e){var t=function(e){if("object"!=je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:t+""}var qe=function(){return e=function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.IS_PENDING=!1,this.IS_PROCESSED=!0,this.endpoint="https://dbot-conf-dot-deriv-bi-reporting.as.r.appspot.com/dbotconf",this.run_id="",this.run_start=0,this.should_post_xml=!0,this.strategy_content="",this.transaction_ids={},this.cleanXmlDom=function(e){var t=["x","y","id"],r=(0,z.cloneObject)(e),n=function(e){t.forEach((function(t){return e.removeAttribute(t)})),Array.from(e.children).forEach((function(e){return n(e)}))};return n(r),r},this.getHash=function(e){return btoa(String(Ie().str(e)))},(0,j.makeObservable)(this,{IS_PENDING:j.observable,IS_PROCESSED:j.observable,endpoint:j.observable,run_id:j.observable,run_start:j.observable,should_post_xml:j.observable,strategy_content:j.observable,transaction_ids:j.observable,trackRun:j.action.bound,trackTransaction:j.action.bound,setRunId:j.action.bound,setRunStart:j.action.bound,setStrategyContent:j.action.bound,cleanXmlDom:j.action.bound,getHash:j.action.bound}),this.root_store=t,this.core=r,((0,z.isProduction)()||/(.*?)\.binary.sx$/.test(window.location.hostname))&&(this.root_store=t,(0,j.reaction)((function(){return n.root_store.run_panel.is_running}),(function(){return n.root_store.run_panel.is_running?n.trackRun():void 0})),(0,j.reaction)((function(){return n.root_store.transactions.transactions}),(function(e){n.run_id&&n.trackTransaction(e)})))},t=[{key:"trackRun",value:(o=Ue(Be().mark((function e(){var t,r,n,o;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.cleanXmlDom(window.Blockly.Xml.workspaceToDom(p.DBot.workspace,!0)),r=(0,p.convertStrategyToIsDbot)(t),n=window.Blockly.Xml.domToText(r),o=this.getHash(n),this.getHash(this.strategy_content)!==o&&(this.should_post_xml=!0,this.setStrategyContent(n)),this.setRunId(this.getHash(o+this.core.client.loginid+Math.random())),this.setRunStart(this.core.common.server_time.unix());case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"trackTransaction",value:(n=Ue(Be().mark((function e(t){var n,o,a,i,l=this;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(773).then(r.t.bind(r,1791,23));case 2:if(n=e.sent,o=t[0]){e.next=6;break}return e.abrupt("return");case 6:a=o.data.transaction_ids.buy,Object.keys(this.transaction_ids).includes(a.toString())||(this.transaction_ids[a]=this.IS_PENDING,i=function(){return{body:n.gzip(l.strategy_content),headers:{"Content-Encoding":"gzip","Content-Type":"application/xml",Referer:window.location.hostname}}},fetch("".concat(this.endpoint,"/").concat(this.run_id,"/").concat(a,"/").concat(this.run_start,"/").concat(this.getHash(this.strategy_content)),Re(Re({},this.should_post_xml?i():{}),{},{method:"POST",mode:"no-cors"})).then((function(){l.should_post_xml=!1,l.transaction_ids[a]=l.IS_PROCESSED})).catch((function(){delete l.transaction_ids[a]})));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setRunId",value:function(e){this.run_id=e}},{key:"setRunStart",value:function(e){this.run_start=e}},{key:"setStrategyContent",value:function(e){this.strategy_content=e}}],t&&Fe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o}(),Ve="text",Ye="image",He="block",We="example",Ke=Ve,$e=Ye,Xe=He,Qe=We,Je=function(e){return r.p=e,{procedures_ifreturn:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"if-return"}],math_arithmetic:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke}],math_single:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke}],math_constrain:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Qe,example_id:"constrain"}],text_print:[{type:Ke},{type:Xe},{type:Ke}],text_prompt_ext:[{type:Ke},{type:Xe},{type:Ke}],tick_analysis:[{type:Ke},{type:Xe}],read_details:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke}],last_digit:[{type:Ke},{type:Xe}],read_ohlc:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Qe,example_id:"in_candle_list_read"}],read_ohlc_obj:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Qe,example_id:"read_candle_value"}],check_direction:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke}],get_ohlc:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"get_candle"},{type:Ke}],ohlc:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"candle_list_1"}],ohlc_values:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"candle_list"}],is_candle_black:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/is_candle_black.jpeg")},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/is_candle_black_1.jpeg")},{type:Ke}],ohlc_values_in_list:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Qe,example_id:"candle_list_1"}],variables_gets:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke}],variables_set:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/create_variable.jpg")},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/set_variable.png")}],epoch:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Qe,example_id:"epoch"}],todatetime:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"todatetime"},{type:Ke}],totimestamp:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"totimestamp"},{type:Ke}],notify_telegram:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Qe,example_id:"notify_telegram"}],console:[{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke}],balance:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke}],sma_statement:[{type:Ke},{type:Xe},{type:Ke},{type:$e,width:"60%",url:"".concat(r.p,"media/sma_formula.png")},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/sma_chart_1.png")},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/sma_chart_2.png")},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Qe,example_id:"sma_block_example"},{type:Ke},{type:Ke},{type:Qe,example_id:"sma_block_example_1"},{type:Ke},{type:Ke},{type:Qe,example_id:"sma_array"},{type:Ke},{type:Ke},{type:Ke},{type:$e,width:"100%",url:"".concat(r.p,"media/sma_array_explanation.jpeg")}],trade_definition:[{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Ke},{type:Xe}],trade_definition_tradeoptions:[{type:Ke},{type:Xe}],trade_definition_multiplier:[{type:Ke},{type:Ke},{type:Ke},{type:Ke}],before_purchase:[{type:Ke},{type:Xe},{type:Ke}],during_purchase:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"sell_available"}],sell_at_market:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"sell_available"}],after_purchase:[{type:Ke},{type:Xe},{type:Ke}],trade_again:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"trade_again"}],contract_check_result:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Qe,example_id:"check_result"}],sell_price:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"sell_pl"}],controls_if:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"controls_if"},{type:Ke},{type:Qe,example_id:"compare_logic"},{type:Qe,example_id:"compare_logic_1"}],logic_operation:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:$e,width:"40%",url:"".concat(r.p,"media/logic.png")}],controls_whileUntil:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Qe,example_id:"repeat_while"},{type:Ke},{type:Qe,example_id:"repeat_until"}],controls_for:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"controls_for"},{type:Ke},{type:Ke}],controls_forEach:[{type:Ke},{type:Xe},{type:Ke},{type:Qe,example_id:"controls_forEach"},{type:Ke},{type:Ke},{type:Ke}],controls_flow_statements:[{type:Ke},{type:Xe},{type:Ke},{type:Ke},{type:Qe,example_id:"break_out"},{type:Ke},{type:Qe,example_id:"continue"}]}};const Ze={text:[(0,_.localize)("This block is mandatory. Here is where you can decide if your bot should continue trading. Only one copy of this block is allowed."),(0,_.localize)("This block is commonly used to adjust the parameters of your next trade and to implement stop loss/take profit logic.")]},et={text:[(0,_.localize)("This block returns current account balance."),(0,_.localize)('The only input parameter determines how block output is going to be formatted. In case if the input parameter is "string" then the account currency will be added.'),(0,_.localize)("Example output of the below example will be:"),(0,_.localize)('1. for "string": 1325.68 USD'),(0,_.localize)('2. for "number": 1325.68')]},tt={text:[(0,_.localize)("This block is mandatory. Only one copy of this block is allowed. It is added to the canvas by default when you open Deriv Bot."),(0,_.localize)("After defining trade parameters and trade options, you may want to instruct your bot to purchase contracts when specific conditions are met. To do that you can use conditional blocks and indicators blocks to help your bot to make decisions.")]},rt={text:[(0,_.localize)('This block is used to determine if the market price moves in the selected direction or not. It gives you a value of "True" or "False".'),(0,_.localize)("Examples:"),(0,_.localize)('1. If the selected direction is "Rise", and the previous tick value is less than the current tick value, the output will be "True". Otherwise, the output will be an empty string.'),(0,_.localize)('2. If the selected direction is "Fall", and the previous tick value is more than the current tick value, the output will be "True". Otherwise, the output will be an empty string.')]},nt={text:[(0,_.localize)("This block displays messages in the developer’s console with an input that can be either a string of text, a number, boolean, or an array of data."),(0,_.localize)("There are 4 message types:"),(0,_.localize)("1. 'Log' displays a regular message."),(0,_.localize)("2. 'Warn' displays a message in yellow to highlight something that needs attention."),(0,_.localize)("3. 'Error' displays a message in red to highlight something that needs to be resolved immediately."),(0,_.localize)("4. 'Table' takes an array of data, such as a list of candles, and displays it in a table format.")]},ot={text:[(0,_.localize)('You can check the result of the last trade with this block. It can only be placed within the "Restart trading conditions" root block.'),(0,_.localize)('If "Win" is selected, it will return "True" if your last trade was successful. Otherwise, it will return an empty string.'),(0,_.localize)('If "Loss" is selected, it will return "True" if your last trade was unsuccessful. Otherwise, it will return an empty string.'),(0,_.localize)("Example:")]},at={text:[(0,_.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block."),(0,_.localize)("Examples:"),(0,_.localize)('1. In the below example the loop is terminated in case "x" is "False" even though only one iteration is complete'),(0,_.localize)('2. In the below example the loop jumps to the next iteration without executing below block in case if "x" is "False"')]},it={text:[(0,_.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.'),(0,_.localize)("Example:"),(0,_.localize)('"i" starts with the value of 1, and it will be increased by 2 at every iteration. The loop will repeat until "i" reaches the value of 12, and then the loop is terminated.'),(0,_.localize)('You can use "i" inside the loop, for example to access list items')]},lt={text:[(0,_.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.'),(0,_.localize)("Example:"),(0,_.localize)('In this example, the loop will repeat three times, as that is the number of items in the given list. During each iteration, the variable "i" will be assigned a value from the list. '),(0,_.localize)('Please note that changing the value of "i" won\'t change the value of the original item in the list')]},ct={text:[(0,_.localize)("This block evaluates a statement and will perform an action only when the statement is true."),(0,_.localize)("Click the plus icon to extend the functionality of this block."),(0,_.localize)('You can also use "Compare" and "Logic operation" blocks to make test variables.')]},st={text:[(0,_.localize)("This block repeats instructions as long as a given condition is true."),(0,_.localize)("Examples:"),(0,_.localize)("1. In the example below, the instructions are repeated as long as the value of x is less than or equal to 10. Once the value of x exceeds 10, the loop is terminated."),(0,_.localize)("2. In this example, the instructions are repeated as long as the value of x is greater than or equal to 10. Once the value of x drops below 10, the loop is terminated.")]},ut={text:[(0,_.localize)("Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed."),(0,_.localize)("Example:")]},ft={text:[(0,_.localize)('"Seconds Since Epoch" block returns the number of seconds since January 1st, 1970.'),(0,_.localize)("Example:"),(0,_.localize)("1551661986 seconds since Jan 01 1970 (UTC) translates to 03/04/2019 @ 1:13am (UTC)."),(0,_.localize)("You might need it when you want to repeat an actions after certain amount of time."),(0,_.localize)("The example below restarts trading after 30 or more seconds after 1 minute candle was started.")]},dt={text:[(0,_.localize)("This block gives you a specific candle from within the selected time interval."),(0,_.localize)('In this example, the open price of a candle is assigned to the variable "candle_open_price".'),(0,_.localize)("In the above example it is assumed that variable candle_open_price is processed somewhere within other blocks.")]},pt={text:[(0,_.localize)('This block returns "True" if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'),(0,_.localize)('The term "candle" refers to each bar on the candlestick chart. Each candle represents four market prices for the selected time interval:'),(0,_.localize)("Each candlestick on the chart represents 4 market prices for the selected time interval:"),(0,_.localize)("- Open price: the opening price"),(0,_.localize)("- High price: the highest price"),(0,_.localize)("- Low price: the lowest price"),(0,_.localize)("- Close price: the closing price"),(0,_.localize)("A black (or red) candle indicates that the open price is higher than the close price. This represents a downward movement of the market price."),(0,_.localize)("A white (or green) candle indicates that the open price is lower than the close price. This represents an upward movement of the market price."),(0,_.localize)("The time interval for each candle can be set from one minute to one day.")]},mt={text:[(0,_.localize)("This block gives you the last digit of the latest tick value of the selected market. If the latest tick value is 1410.90, this block will return 0. It’s useful for digit-based contracts such as Even/Odd, Matches/Differs, or Higher/Lower.")]},ht={text:[(0,_.localize)('This block performs the "AND" or the "OR" logic operation with the given values.'),(0,_.localize)('In case if the "AND" operation is selected, the block returns "True" only if both given values are "True"'),(0,_.localize)('In case if the "OR" operation is selected, the block returns "True" in case if one or both given values are "True"')]},yt={text:[(0,_.localize)("This block performs arithmetic operations between two numbers."),(0,_.localize)("Available operations:"),(0,_.localize)("- Addition"),(0,_.localize)("- Subtraction"),(0,_.localize)("- Multiplication"),(0,_.localize)("- Division"),(0,_.localize)("- Raise the first number to the power of the second number")]},vt={text:[(0,_.localize)("This block constrains a given number within a set range."),(0,_.localize)("In case if the given number is less than the lower boundary of the range, the block returns the lower boundary value. Similarly, if the given number is greater than the higher boundary, the block will return the higher boundary value. In case if the given value is between boundaries, the block will return the given value unchanged."),(0,_.localize)("In the below example the block returns the value of 10 as the given value (5) is less than the lower boundary (10)")]},_t={text:[(0,_.localize)("This block performs the following operations to a given number"),(0,_.localize)("Available operations are:"),(0,_.localize)("- Square root"),(0,_.localize)("- Absolute"),(0,_.localize)("- Negation"),(0,_.localize)("- Natural log"),(0,_.localize)("- Euler’s number (2.71) to the power of a given number"),(0,_.localize)("- 10 to the power of a given number")]},bt={text:[(0,_.localize)("This block sends a message to a Telegram channel. You will need to create your own Telegram bot to use this block."),(0,_.localize)("Here’s how:"),(0,_.localize)("1. Create a Telegram bot and get your Telegram API token. Read more on how to create bots in Telegram here: https://core.telegram.org/bots#6-botfather"),(0,_.localize)("2. Start a chat with your newly created Telegram bot and make sure to send it some messages before proceeding to the next step. (e.g. Hello Bot!)"),(0,_.localize)("3. Get the chat ID using the Telegram REST API (read more: https://core.telegram.org/bots/api#getupdates)"),(0,_.localize)("- Visit the following URL, make sure to replace <access_token> with the Telegram API token you created in Step 1: https://api.telegram.org/bot<access_token>/getUpdates"),(0,_.localize)("- Find the chat ID property in the response, and copy the value of the id property"),(0,_.localize)("4. Come back to Deriv Bot and add the Notify Telegram block to the workspace. Paste the Telegram API token and chat ID into the block fields accordingly.")]},gt={text:[(0,_.localize)("This block gives you a list of candles within a selected time interval."),(0,_.localize)('In this example, this block is used with another block to get the open prices from a list of candles. The open prices are then assigned to the variable called "cl".')]},Et={text:[(0,_.localize)("This block gives you the selected candle value from a list of candles within the selected time interval. You can choose from open price, close price, high price, low price, and open time."),(0,_.localize)('In this example, the open prices from a list of candles are assigned to a variable called "candle_list".')]},wt={text:[(0,_.localize)("This block gives you the selected candle value from a list of candles. You can choose from open price, close price, high price, low price, and open time."),(0,_.localize)("This block requires a list of candles as an input parameter."),(0,_.localize)('In this example, the open prices from a list of candles are assigned to a variable called "cl".')]},kt={text:[(0,_.localize)("Used within a function block, this block returns a value when a specific condition is true."),(0,_.localize)("Example:")]},xt={text:[(0,_.localize)("This block gives you information about your last contract."),(0,_.localize)("You can choose to see one of the following:"),(0,_.localize)("- Deal reference ID: the reference ID of the contract"),(0,_.localize)("- Purchase price: the purchase price (stake) of the contract"),(0,_.localize)("- Payout: the payout of the contract"),(0,_.localize)("- Profit: the profit you’ve earned"),(0,_.localize)("- Contract type: the name of the contract type such as Rise, Fall, Touch, No Touch, etс."),(0,_.localize)("- Entry time: the starting time of the contract"),(0,_.localize)("- Entry value: the value of the first tick of the contract"),(0,_.localize)("- Exit time: the contract expiration time"),(0,_.localize)("- Exit value: the value of the last tick of the contract"),(0,_.localize)("- Barrier: the barrier value of the contract (applicable to barrier-based trade types such as stays in/out, touch/no touch, etc.)"),(0,_.localize)('- Result: the result of the last contract: "win" or "loss"')]},St={text:[(0,_.localize)("This block gives you the specified candle value for a selected time interval. You can choose which value you want:"),(0,_.localize)("- Open: the opening price"),(0,_.localize)("- High: the highest price"),(0,_.localize)("- Low: the lowest price"),(0,_.localize)("- Close: the closing price"),(0,_.localize)("- Open time: the opening time stamp"),(0,_.localize)('In the example below, the opening price is selected, which is then assigned to a variable called "op".')]},Ot={text:[(0,_.localize)("This block gives you the selected candle value such as open price, close price, high price, low price, and open time. It requires a candle as an input parameter."),(0,_.localize)('In the example below, the open price is assigned to the variable "op".')]},Tt={text:[(0,_.localize)("Use this block to sell your contract at the market price. Selling your contract is optional. You may choose to sell if the market trend is unfavourable."),(0,_.localize)("Example:")]},Lt={text:[(0,_.localize)('This block gives you the potential profit or loss if you decide to sell your contract. It can only be used within the "Sell conditions" root block.'),(0,_.localize)("In the example below, the contract will only be sold if the potential profit or loss is more than the stake.")]},At={text:[(0,_.localize)("SMA adds the market price in a list of ticks or candles for a number of time periods, and divides the sum by that number of time periods."),(0,_.localize)("The formula for SMA is:"),(0,_.localize)("where n is the number of periods."),"",(0,_.localize)("What SMA tells you"),(0,_.localize)("SMA serves as an indicator of the trend. If the SMA points up then the market price is increasing and vice versa. The larger the period number, the smoother SMA line is."),(0,_.localize)("In this example, each point of the SMA line is an arithmetic average of close prices for the last 10 days."),(0,_.localize)("In this example, each point of the SMA line is an arithmetic average of close prices for the last 50 days."),"",(0,_.localize)("How to use the SMA block"),(0,_.localize)("Input list accepts a list of ticks or candles, while period is the specified time period."),(0,_.localize)("Example:"),(0,_.localize)("This will display the SMA for the specified period, using a candle list."),(0,_.localize)("SMA places equal weight to the entire distribution of values."),(0,_.localize)("This is the same as the above example, using a tick list."),(0,_.localize)("You may compare SMA values calculated on every bot run to identify the market trend direction. Alternatively, you may also use a variation of the SMA block, the Simple Moving Average Array block. "),(0,_.localize)("This block returns the entire SMA line, containing a list of all values for a given period."),(0,_.localize)("If a period of 10 is entered, the Simple Moving Average Array block will return a list of SMA values calculated based on period of 10."),(0,_.localize)("The below image illustrates how Simple Moving Average Array block works:")]},Nt={text:[(0,_.localize)('This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click "OK".')]},Ct={text:[(0,_.localize)('This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click "OK".')]},Pt={text:[(0,_.localize)("Any blocks placed within this block will be executed at every tick. If the default candle interval is set to 1 minute in the Trade Parameters root block, the instructions in this block will be executed once every minute. Place this block outside of any root block.")]},It={text:[(0,_.localize)("This block converts the number of seconds since the Unix Epoch to a date and time format such as 2019-08-01 00:00:00."),(0,_.localize)("Example:"),(0,_.localize)("In this example, the date and time will be displayed in a green notification box.")]},jt={text:[(0,_.localize)("This block converts the date and time to the number of seconds since the Unix Epoch (1970-01-01 00:00:00)."),(0,_.localize)("Example:"),(0,_.localize)("In this example, a Rise contract will be purchased at midnight on 1 August 2019.")]},zt={text:[(0,_.localize)("This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract without manually stopping and restarting your bot."),(0,_.localize)("Example:")]},Rt={text:[(0,_.localize)("This block is mandatory. It's added to your strategy by default when you create new strategy. You can not add more than one copy of this block to the canvas."),(0,_.localize)("1. Market"),(0,_.localize)("Select your desired market and asset type. For example, Forex > Major pairs > AUD/JPY"),(0,_.localize)("2. Trade Type"),(0,_.localize)("Select your desired trade type. For example, Up/Down > Rise/Fall"),(0,_.localize)("3. Contract Type"),(0,_.localize)("Choose what type of contract you want to trade. For example, for the Rise/Fall trade type you can choose one of three options: Rise, Fall, or Both. Selected option will determine available options for the Purchase block."),(0,_.localize)("4. Default Candle Interval"),(0,_.localize)("Sets the default time interval for blocks that read list of candles."),(0,_.localize)("5. Restart buy/sell on error"),(0,_.localize)("Restarts the bot when an error is encountered."),(0,_.localize)("6. Restart last trade on error"),(0,_.localize)("Repeats the previous trade when an error is encountered."),(0,_.localize)("7. Run Once at Start"),(0,_.localize)("Place blocks here to perform tasks once when your bot starts running."),(0,_.localize)("8. Trade Options"),(0,_.localize)("The desired duration, stake, prediction, and/or barrier(s) for the contract is defined here.")]},Dt={text:[(0,_.localize)("Use this block when you want to use multipliers as your trade type."),(0,_.localize)("Click the multiplier drop-down menu and choose the multiplier value you want to trade with."),(0,_.localize)("Your potential profit will be multiplied by the multiplier value you’ve chosen."),f().createElement(_.Localize,{key:0,i18n_default_text:"To learn more about multipliers, please go to the <0>Multipliers</0> page.",components:[f().createElement(m.StaticUrl,{key:0,className:"link",href:"trade-types/multiplier"})]})]},Bt={text:[(0,_.localize)("This block is used to define trade options within the Trade parameters root block. Some options are only applicable for certain trade types. Parameters such as duration and stake are common among most trade types. Prediction is used for trade types such as Digits, while barrier offsets are for trade types that involve barriers such as Touch/No Touch, Ends In/Out, etc."),(0,_.localize)("Example:")]},Mt={text:[(0,_.localize)("This block assigns a given value to a variable, creating the variable if it doesn't already exist."),(0,_.localize)("A variable is among the most important and powerful components in creating a bot. It is a way to store information, either as text or numbers. The information stored as a variable can be used and changed according to the given instructions. Variables can be given any name, but usually they are given useful, symbolic names so that it is easier to call them during the execution of instructions."),(0,_.localize)("Creating a variable"),(0,_.localize)("1. From the block library, enter a name for the new variable and click Create."),(0,_.localize)("2. The new variable will appear as a block under Set variable.")]};function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Ft(){Ft=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ut(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ut(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Gt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Vt(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Vt(a,n,o,i,l,"next",e)}function l(e){Vt(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wt(n.key),n)}}function Wt(e){var t=function(e){if("object"!=Ut(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ut(t)?t:t+""}var Kt,$t,Xt,Qt=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.options={media:"".concat(r.p,"media/"),move:{scrollbars:!1,drag:!0,wheel:!1},zoom:{startScale:p.config.workspaces.flyoutWorkspacesStartScale},sounds:!1},this.block_node=null,this.block_type="",this.examples=[],this.help_string={},this.title="",this.should_next_disable=!1,this.should_previous_disable=!1,this.active_helper="",this.setHelpContent=function(){var e=Yt(Ft().mark((function e(t){var r,a,i,l;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getAttribute("type"),a=window.Blockly.Blocks[r].meta().display_name,""!==r&&(n.active_helper=r),i=n.root_store.flyout,n.setExamples(r),l=n.examples.map((function(e){return e.childNodes[0]})),setTimeout((function(){return i.setFlyoutWidth([t].concat(Gt(l)))}),50),(0,j.runInAction)((function(){i.is_help_content=!0,n.block_node=t,n.block_type=r,n.title=a,n.help_string=o[r]})),i.is_search_flyout||n.updateSequenceButtons();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getHelpContent=function(){var e=Yt(Ft().mark((function e(t){var r,a,i;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(a=n.xml_list_group[t],i=a[0].getAttribute("type"),r=o[i]),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFilledBlocksIndex=function(){var e=Yt(Ft().mark((function e(t){var r;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return n.getHelpContent(e)})));case 2:return r=e.sent,e.abrupt("return",r.map((function(e,t){return e?t:null})).filter((function(e){return null!==e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getNextHelpContentIndex=function(){var e=Yt(Ft().mark((function e(t){var r;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFilledBlocksIndex(Object.keys(n.xml_list_group));case 2:return r=e.sent,e.abrupt("return",t?r[r.length-1]:r[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,j.makeObservable)(this,{block_node:j.observable,block_type:j.observable,examples:j.observable,help_string:j.observable,title:j.observable,should_next_disable:j.observable,should_previous_disable:j.observable,active_helper:j.observable,setHelpContent:j.action.bound,setActiveHelper:j.action.bound,onBackClick:j.action.bound,onSequenceClick:j.action.bound,initFlyoutHelp:j.action.bound,updateSequenceButtons:j.action.bound,setExamples:j.action.bound,getHelpContent:j.action.bound,getFilledBlocksIndex:j.action.bound,getNextHelpContentIndex:j.action.bound}),this.root_store=t},t=[{key:"setActiveHelper",value:function(e){this.active_helper=e}},{key:"onBackClick",value:function(){var e=this.root_store,t=e.toolbox,r=e.flyout;if(r.is_search_flyout){var n=document.getElementsByName("search")[0].value;t.onSearch({search:n})}else r.refreshCategory()}},{key:"onSequenceClick",value:(a=Yt(Ft().mark((function e(t){var n,o,a,i,l,c=this;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(this.xml_list).find((function(e){return e.getAttribute("type")===c.block_type})),Object.keys(this.xml_list_group).forEach((function(e,t){n.getAttribute("type")===e&&(o=t)})),a=function(){var e=Yt(Ft().mark((function e(t,n,o){var i,l,s,u,f;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n+(o?1:-1),l=Object.keys(t).filter((function(e,t){return o?i<=t:i>=t})),e.next=4,c.getFilledBlocksIndex(l);case 4:if(s=e.sent,u=o?s[0]:s[s.length-1],f=l[u]){e.next=9;break}return e.abrupt("return",!1);case 9:return e.prev=9,e.next=12,Promise.resolve().then(r.bind(r,9822));case 12:return e.abrupt("return",f);case 15:return e.prev=15,e.t0=e.catch(9),e.abrupt("return",a(t,i,o));case 18:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,r,n){return e.apply(this,arguments)}}(),e.next=5,a(this.xml_list_group,o,t);case 5:(i=e.sent)&&(l=this.xml_list_group[i],this.setHelpContent(l[0]));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"initFlyoutHelp",value:function(e){var t=this.root_store,r=t.flyout,n=t.toolbox;this.xml_list=n.getCategoryContents(r.selected_category),this.xml_list_group=this.groupBy(this.xml_list,!0),this.setHelpContent(e)}},{key:"updateSequenceButtons",value:(n=Yt(Ft().mark((function e(){var t,r,n,o,a=this;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.xml_list).find((function(e){return e.getAttribute("type")===a.block_type})),r=Object.keys(this.xml_list_group).findIndex((function(e){return t.getAttribute("type")===e})),e.next=4,this.getNextHelpContentIndex(!0);case 4:return n=e.sent,e.next=7,this.getNextHelpContentIndex(!1);case 7:o=e.sent,(0,j.runInAction)((function(){a.should_previous_disable=0===r||r===o,a.should_next_disable=r===Object.keys(a.xml_list_group).length-1||r===n}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"groupBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.from(e).reduce((function(e,r){var n=r.getAttribute("type");return t&&null===n||(e[n]||(e[n]=[]),(!t||t&&null!==n)&&e[n].push(r)),e}),{})}},{key:"setExamples",value:function(e){var t=Gt(this.root_store.toolbox.toolbox_examples.childNodes),n=Je(r.p)[e].filter((function(e){return"example"===e.type})).map((function(e){return e.example_id})).map((function(e){return t.find((function(t){return t.id===e}))}));this.examples=n}}],t&&Ht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,a}(),Jt=(Xt=function(e){try{var t="".concat(Kt.core.client.loginid,"-").concat((null===(n=Kt)||void 0===n||null===(o=n.core)||void 0===o||null===(a=o.server_time)||void 0===a?void 0:a.unix())||Date.now()),r={counters:"tr:".concat(e.number_of_runs,",                ts:").concat(e.total_stake,",                py:").concat(e.total_payout,",                lc:").concat(e.lost_contracts,",                wc:").concat(e.won_contracts,",                pr:").concat(e.total_profit).replace(/\s/g,""),event:"dbot_run",run_id:t};$t(r)}catch(e){console.warn("Error pushing run data to datalayer ",e)}var n,o,a},{init:function(e){try{var t=Kt=e,r=t.run_panel,n=t.transactions.statistics;(0,j.reaction)((function(){return r.is_running}),(function(){return r.is_running&&Xt(n)}))}catch(e){console.warn("Error initializing GTM reactions ",e)}},pushDataLayer:$t=function(e){var t,r,n;return null===(t=Kt)||void 0===t||null===(r=t.core)||void 0===r||null===(n=r.gtm)||void 0===n?void 0:n.pushDataLayer(e)},onTransactionClosed:function(e){var t={event:"dbot_run_transaction",reference_id:e.contract_id};$t(t)},onRunBot:Xt});const Zt=Jt;function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rr(n.key),n)}}function rr(e){var t=function(e){if("object"!=er(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==er(t)?t:t+""}var nr=function(){return e=function e(t){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.flyout=null,this.block_listeners=[],this.block_workspaces=[],this.flyout_min_width=440,this.options={renderer:"zelos",media:"".concat(r.p,"media/"),move:{scrollbars:!1,drag:!0,wheel:!1},zoom:{startScale:p.config.workspaces.flyoutWorkspacesStartScale},sounds:!1,theme:null===(n=window)||void 0===n||null===(o=n.Blockly)||void 0===o||null===(a=o.Themes)||void 0===a?void 0:a.zelos_renderer},this.is_help_content=!1,this.flyout_content=[],this.flyout_width=this.flyout_min_width,this.is_visible=!1,this.is_search_flyout=!1,this.is_loading=!1,this.search_term="",this.selected_category=null,(0,j.makeObservable)(this,{is_help_content:j.observable,flyout_content:j.observable,flyout_width:j.observable,is_visible:j.observable,is_search_flyout:j.observable,is_loading:j.observable,search_term:j.observable,selected_category:j.observable,onMount:j.action.bound,onUnmount:j.action.bound,initFlyout:j.action.bound,initBlockWorkspace:j.action.bound,getFlyout:j.action.bound,setContents:j.action.bound,setFlyoutWidth:j.action.bound,setVisibility:j.action.bound,setIsSearchFlyout:j.action.bound,setSelectedCategory:j.action.bound,getSelectedCategory:j.action.bound,onClickOutsideFlyout:j.action.bound,refreshCategory:j.action.bound,variables_blocks_count:j.computed,first_get_variable_block_index:j.computed}),this.root_store=t},t=[{key:"onMount",value:function(){this.initFlyout(),window.addEventListener("click",this.onClickOutsideFlyout)}},{key:"onUnmount",value:function(){window.removeEventListener("click",this.onClickOutsideFlyout)}},{key:"initFlyout",value:function(){var e,t,r,n=window.Blockly.derivWorkspace,o=new Blockly.Options({parentWorkspace:n,rtl:n.RTL,horizontalLayout:!0,theme:null===(e=window)||void 0===e||null===(t=e.Blockly)||void 0===t||null===(r=t.Themes)||void 0===r?void 0:r.zelos_renderer});n.horizontalLayout?this.flyout=new window.Blockly.HorizontalFlyout(o):this.flyout=new window.Blockly.VerticalFlyout(o),this.flyout.targetWorkspace=n,this.flyout.workspace_.targetWorkspace=n,this.flyout.workspace_.getGesture=this.flyout.targetWorkspace.getGesture.bind(this.flyout.targetWorkspace_),n.VariableMap=this.flyout.targetWorkspace.getVariableMap(),this.flyout.workspace_.createPotentialVariableMap()}},{key:"initBlockWorkspace",value:function(e,t){var r,n,o,a,i,l,c,s,u,f=this,d=window.Blockly.inject(e,this.options);d.targetWorkspace=window.Blockly.derivWorkspace;var p=window.Blockly.Xml.domToBlock(t,d),m=p.getHeightWidth();p.isInFlyout=!0,e.style.height="".concat(Math.ceil(m.height*this.options.zoom.startScale)+1,"px"),e.style.width="".concat(Math.ceil(m.width*this.options.zoom.startScale)+1,"px"),p.moveBy(1,1);var h=p.getSvgRoot();this.block_listeners.push(null===(r=window)||void 0===r||null===(n=r.Blockly)||void 0===n||null===(o=n.browserEvents)||void 0===o?void 0:o.conditionalBind(h,"mousedown",null,(function(e){Zt.pushDataLayer({event:"dbot_drag_block",block_type:p.type}),f.flyout.blockMouseDown(p)(e)})),null===(a=window)||void 0===a||null===(i=a.Blockly)||void 0===i||null===(l=i.browserEvents)||void 0===l?void 0:l.bind(h,"mouseout",p,p.removeSelect),null===(c=window)||void 0===c||null===(s=c.Blockly)||void 0===s||null===(u=s.browserEvents)||void 0===u?void 0:u.bind(h,"mouseover",p,p.addSelect)),this.block_workspaces.push(d),window.Blockly.svgResize(d)}},{key:"getFlyout",value:function(){return this.flyout}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e;this.block_listeners.forEach((function(e){return window.Blockly.browserEvents.unbind(e)})),this.block_workspaces.forEach((function(e){return e.dispose()})),this.block_listeners=[],this.block_workspaces=[],this.is_help_content=!1,this.search_term=r.length>20?"".concat(r.substring(0,20),"..."):r,this.flyout_content=e,this.setFlyoutWidth(n),this.setVisibility(!0),setTimeout((function(){return t.setFlyoutWidth(n)}),50)}},{key:"setFlyoutWidth",value:function(e){var t=this,r=0;e.forEach((function(e){if(e.tagName.toUpperCase()===Blockly.Xml.NODE_BLOCK){var n=Blockly.Block.getDimensions(e);e.setAttribute("width",String(Math.ceil(n.width*t.options.zoom.startScale))),e.setAttribute("height",String(Math.ceil(n.height*t.options.zoom.startScale))),r=Math.max(r,Math.ceil(n.width*t.options.zoom.startScale))}})),this.flyout_width=Math.max(this.flyout_min_width,r+65)}},{key:"setVisibility",value:function(e){this.is_visible=e,e||(this.setSelectedCategory(null),this.flyout_content=[]),window.Blockly.derivWorkspace.isFlyoutVisible=e}},{key:"setIsSearchFlyout",value:function(e){this.is_search_flyout=e}},{key:"setSelectedCategory",value:function(e){this.selected_category=e}},{key:"getSelectedCategory",value:function(){return this.selected_category}},{key:"onClickOutsideFlyout",value:function(e){if(this.is_visible&&window.Blockly.derivWorkspace){var t=document.getElementById("gtm-toolbox"),r=((null==e?void 0:e.composedPath())||[]).some((function(e){return e.classList&&e.classList.contains("flyout")})),n=this.root_store.toolbox.is_search_focus;r||(null==t?void 0:t.contains(e.target))||n||(this.setVisibility(!1),this.setSelectedCategory(null))}}},{key:"refreshCategory",value:function(){var e=this.getSelectedCategory(),t=this.root_store.toolbox.getCategoryContents(e);this.setContents(t)}},{key:"variables_blocks_count",get:function(){return this.flyout_content.filter((function(e){return"variables_get"===e.getAttribute("type")})).length}},{key:"first_get_variable_block_index",get:function(){return this.flyout_content.length-this.variables_blocks_count}}],t&&tr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),or=Object.freeze({NORMAL:0,LOADING:1,COMPLETED:2}),ar="ce_bot_form",ir=function(e){return e.OPEN="open",e.CLOSE="close",e.RUN_BOT="run_bot",e.RUN_QUICK_STRATEGY="run_quick_strategy",e.EDIT_QUICK_STRATEGY="edit_quick_strategy",e.SELECT_QUICK_STRATEGY_GUIDE="select_quick_strategy_guide",e.SWITCH_QUICK_STRATEGY_TAB="switch_quick_strategy_tab",e.DASHBOARD_CLICK="dashboard_click",e.UPLOAD_STRATEGY_START="upload_strategy_start",e.UPLOAD_STRATEGY_COMPLETED="upload_strategy_completed",e.UPLOAD_STRATEGY_FAILED="upload_strategy_failed",e.GOOGLE_DRIVE_CONNECT="google_drive_connect",e.GOOGLE_DRIVE_DISCONNECT="google_drive_disconnect",e.SWITCH_LOAD_STRATEGY_TAB="switch_load_strategy_tab",e.ANNOUNCEMENT_CLICK="announcement_click",e.ANNOUNCEMENT_ACTION="announcement_action",e}({}),lr=((0,_.localize)("Trade parameters"),(0,_.localize)("Learn more"),{type:"min",value:1,getMessage:function(e){return(0,_.localize)("Must be a number higher than {{ min }}",{min:Number(e)-1})}}),cr={type:"label",label:(0,_.localize)("Asset"),description:(0,_.localize)("The underlying market your bot will trade with this strategy.")},sr={type:"symbol",name:"symbol"},ur={type:"label",label:(0,_.localize)("Contract type"),description:(0,_.localize)("Your bot will use this contract type for every run")},fr={type:"tradetype",name:"tradetype",dependencies:["symbol"]},dr={type:"label",label:(0,_.localize)("Purchase condition"),description:(0,_.localize)("Your bot uses a single trade type for each run.")},pr={type:"contract_type",name:"type",dependencies:["symbol","tradetype"]},mr={type:"label",label:(0,_.localize)("Sell conditions"),description:function(e){var t=null!=e?e:{max_payout:0,max_ticks:0},r=t.max_payout,n=t.max_ticks;return f().createElement("div",{className:"sell_conditions"},f().createElement("div",{className:"sell_conditions__take_profit"},f().createElement("span",null,f().createElement("strong",null,(0,_.localize)("Take Profit: "))),f().createElement("span",null,(0,_.localize)("The position closes once its profit exceeds the take-profit amount"))),f().createElement("div",{className:"sell_conditions__tick_count"},f().createElement("span",null,f().createElement("strong",null,(0,_.localize)("Tick Count: "))),f().createElement("span",null,(0,_.localize)("The holding period measured in ticks before the position is sold"))),f().createElement("div",null,f().createElement(_.Localize,{i18n_default_text:"The position closes when the input condition is met or upon reaching the maximum payout of {{ max_payout }} or maximum tick of {{ max_ticks }}, whichever occurs first.",values:{max_payout:r,max_ticks:n}})))}},hr={type:"sell_conditions",name:"sell_conditions"},yr={type:"label",label:(0,_.localize)("Initial stake"),description:(0,_.localize)("The amount that you stake for the first trade. Note that this is the minimum stake amount.")},vr={type:"number",name:"stake",validation:["number","required","ceil",lr],has_currency_unit:!0},_r={type:"label",label:(0,_.localize)("Duration"),description:(0,_.localize)("How long each trade takes to expire.")},br={type:"durationtype",name:"durationtype",dependencies:["symbol","tradetype"],attached:!0},gr={type:"number",name:"duration",attached:!0,validation:["number","required","min","max"]},Er={type:"label",label:(0,_.localize)("Profit threshold"),description:(0,_.localize)("The bot will stop trading if your total profit exceeds this amount.")},wr={type:"number",name:"profit",validation:["number","required","ceil",lr],has_currency_unit:!0},kr={type:"label",label:(0,_.localize)("Growth rate"),description:(0,_.localize)("Your stake will grow at the specified growth rate per tick as long as the current spot price remains within the range of the previous spot price.")},xr={type:"growth_rate",name:"growth_rate",attached:!0,validation:["number","required","ceil"]},Sr={type:"label",label:(0,_.localize)("Loss threshold"),description:(0,_.localize)("The bot will stop trading if your total loss exceeds this amount.")},Or={type:"number",name:"loss",validation:["number","required","ceil",lr],has_currency_unit:!0},Tr={type:"label",label:(0,_.localize)("Size"),description:(0,_.localize)("The size used to multiply the stake after a losing trade for the next trade.")},Lr={type:"label",label:(0,_.localize)("Unit"),description:(0,_.localize)("The unit used to multiply the stake after a losing trade for the next trade.")},Ar={type:"label",label:(0,_.localize)("Size"),description:(0,_.localize)("The size used to multiply the stake after a successful trade for the next trade.")},Nr={type:"label",label:(0,_.localize)("Size"),description:(0,_.localize)("The size used to multiply the stake after a successful trade for the next trade.")},Cr={type:"number",name:"size",validation:["number","required","floor",{type:"min",value:String(p.config.QUICK_STRATEGY.DEFAULT.size),getMessage:function(e){return(0,_.localize)("The value must be equal or greater than {{ min }}",{min:e})}}]},Pr={type:"label",label:(0,_.localize)("Unit"),description:(0,_.localize)("Number of unit(s) to be added to the next trade after a losing trade. One unit is equivalent to the amount of initial stake.")},Ir={type:"label",label:(0,_.localize)("Unit"),description:(0,_.localize)("Number of unit(s) to be added to the next trade after a successful trade. One unit is equivalent to the amount of initial stake.")},jr={type:"number",name:"unit",validation:["number","required","ceil",lr]},zr={type:"checkbox",name:"boolean_max_stake",label:(0,_.localize)("Max stake"),description:(0,_.localize)("The stake for your next trade will reset to the initial stake if it exceeds this value."),attached:!0},Rr={type:"number",name:"max_stake",validation:["number","required","ceil","min"],should_have:[{key:"boolean_max_stake",value:!0}],hide_without_should_have:!0,attached:!0,has_currency_unit:!0},Dr={type:"number",name:"take_profit",should_have:[{key:"boolean_tick_count",value:!1}],hide_without_should_have:!0,attached:!0,has_currency_unit:!0},Br={type:"number",name:"tick_count",should_have:[{key:"boolean_tick_count",value:!0}],hide_without_should_have:!0,attached:!0,has_currency_unit:!1},Mr={type:"label",name:"label_last_digit_prediction",label:(0,_.localize)("Last Digit Prediction"),description:(0,_.localize)("Your prediction of the last digit of the asset price."),should_have:[{key:"tradetype",value:"",multiple:["matchesdiffers","overunder"]}],hide_without_should_have:!0},Ur={type:"number",name:"last_digit_prediction",validation:["number","required","min","max","integer"],should_have:[{key:"tradetype",value:"",multiple:["matchesdiffers","overunder"]}],hide_without_should_have:!0},Fr={MARTINGALE:{name:"martingale_max-stake",label:(0,_.localize)("Martingale"),rs_strategy_name:"martingale",description:se,fields:[[cr,sr,ur,fr,dr,pr,Mr,Ur,yr,vr,_r,br,gr],[Er,wr,Sr,Or,Tr,Cr,zr,Rr]]},D_ALEMBERT:{name:"dalembert_max-stake",label:(0,_.localize)("D’Alembert"),rs_strategy_name:"d'alembert",description:ce,fields:[[cr,sr,ur,fr,dr,pr,Mr,Ur,yr,vr,_r,br,gr],[Er,wr,Sr,Or,Pr,jr,zr,Rr]]},OSCARS_GRIND:{name:"oscars_grind_max-stake",label:(0,_.localize)("Oscar’s Grind"),rs_strategy_name:"oscar's-grind",description:ue,fields:[[cr,sr,ur,fr,dr,pr,Mr,Ur,yr,vr,_r,br,gr],[Er,wr,Sr,Or,zr,Rr]]},REVERSE_MARTINGALE:{name:"reverse_martingale",label:(0,_.localize)("Reverse Martingale"),rs_strategy_name:"reverse martingale",description:de,fields:[[cr,sr,ur,fr,dr,pr,Mr,Ur,yr,vr,_r,br,gr],[Er,wr,Sr,Or,Nr,Cr,zr,Rr]]},REVERSE_D_ALEMBERT:{name:"reverse_dalembert",label:(0,_.localize)("Reverse D’Alembert"),rs_strategy_name:"reverse d'alembert",description:fe,fields:[[cr,sr,ur,fr,dr,pr,Mr,Ur,yr,vr,_r,br,gr],[Er,wr,Sr,Or,Ir,jr,zr,Rr]]},STRATEGY_1_3_2_6:{name:"1_3_2_6",label:(0,_.localize)("1-3-2-6"),rs_strategy_name:"1-3-2-6",description:pe,fields:[[cr,sr,ur,fr,dr,pr,Mr,Ur,yr,vr,_r,br,gr],[Er,wr,Sr,Or]]},ACCUMULATORS_MARTINGALE:{name:"accumulators_martingale",label:(0,_.localize)("Martingale"),rs_strategy_name:"ACCUMULATORS_MARTINGALE",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Ar,Cr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_DALEMBERT:{name:"accumulators_dalembert",label:(0,_.localize)("D’Alembert"),rs_strategy_name:"ACCUMULATORS_DALEMBERT",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Lr,jr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_MARTINGALE_ON_STAT_RESET:{name:"accumulators_martingale_on_stat_reset",label:(0,_.localize)("Martingale on Stat Reset"),rs_strategy_name:"ACCUMULATORS_MARTINGALE_ON_STAT_RESET",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Ar,Cr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_DALEMBERT_ON_STAT_RESET:{name:"accumulators_dalembert_on_stat_reset",label:(0,_.localize)("D'Alembert on Stat Reset"),rs_strategy_name:"ACCUMULATORS_DALEMBERT_ON_STAT_RESET",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Lr,jr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_REVERSE_MARTINGALE:{name:"accumulators_reverse_martingale",label:(0,_.localize)("Reverse Martingale"),rs_strategy_name:"ACCUMULATORS_REVERSE_MARTINGALE",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Ar,Cr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET:{name:"accumulators_reverse_martingale_on_stat_reset",label:(0,_.localize)("Reverse Martingale on Stat Reset"),rs_strategy_name:"ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Ar,Cr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_REVERSE_DALEMBERT:{name:"accumulators_reverse_dalembert",label:(0,_.localize)("Reverse D'Alembert"),rs_strategy_name:"ACCUMULATORS_REVERSE_DALEMBERT",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Lr,jr,mr,hr,Dr,Br,zr,Rr]]},ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET:{name:"accumulators_reverse_dalembert_on_stat_reset",label:(0,_.localize)("Reverse D'Alembert on Stat Reset"),rs_strategy_name:"ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET",description:[],fields:[[cr,sr,yr,vr,kr,xr],[Er,wr,Sr,Or,Lr,jr,mr,hr,Dr,Br,zr,Rr]]}},Gr=function(e){return e&&"No results found"!==e},qr=function(e){var t;return null===(t=Fr[e])||void 0===t?void 0:t.rs_strategy_name},Vr=function(e){return e.recent="recent",e.local="local",e.google_drive="google drive",e}(Vr||{}),Yr=Object.values(Vr),Hr=function(e){var t=e.form_values;if(t){var r=t.symbol,n=t.tradetype,o=t.type,a=t.stake,i=function(){try{var e,t;return JSON.parse(null!==(e=null===(t=localStorage)||void 0===t?void 0:t.getItem("qs-analytics"))&&void 0!==e?e:"{}")}catch(e){return console.error("Rudderstack: unable to get dropdown text"),{}}}();return{asset_type:Gr(null==i?void 0:i.symbol)?i.symbol:r,trade_type:Gr(null==i?void 0:i.tradetype)?null==i?void 0:i.tradetype:n,purchase_condition:Gr(null==i?void 0:i.type)?null==i?void 0:i.type:o,initial_stake:Gr(null==i?void 0:i.stake)?null==i?void 0:i.stake:a}}},Wr=function(e){try{var t=(new DOMParser).parseFromString(e.toString(),"application/xml");return t.getElementsByTagName("xml").length&&"true"===t.documentElement.getAttribute("is_dbot")?"new":"old"}catch(e){return"old"}},Kr=function(e){var t=e.subpage_name,r=e.subform_source,n=e.subform_name,o=e.load_strategy_tab;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.OPEN,form_name:ar,subpage_name:t,subform_name:n,subform_source:r,load_strategy_tab:o}}}])},$r=function(e){var t=e.subform_name,r=e.quick_strategy_tab,n=e.selected_strategy,o=e.load_strategy_tab,a=e.announcement_name;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.CLOSE,form_name:ar,subform_name:t,quick_strategy_tab:r,strategy_name:qr(n),load_strategy_tab:o,announcement_name:a}}}])},Xr=function(e){var t=e.upload_provider,r=e.upload_id;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.UPLOAD_STRATEGY_START,form_name:ar,subform_name:"load_strategy",subpage_name:"bot_builder",upload_provider:t,upload_id:r}}}])},Qr=function(e){var t=e.upload_provider,r=e.upload_id,n=e.upload_type;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.UPLOAD_STRATEGY_COMPLETED,form_name:ar,subform_name:"load_strategy",subpage_name:"bot_builder",upload_provider:t,upload_id:r,upload_type:n}}}])},Jr=function(e){var t=e.upload_provider,r=e.upload_id,n=e.upload_type,o=e.error_message,a=e.error_code;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.UPLOAD_STRATEGY_FAILED,form_name:ar,subform_name:"load_strategy",subpage_name:"bot_builder",upload_provider:t,upload_id:r,upload_type:n,error_message:o,error_code:a}}}])};function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function en(){en=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Zr(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Zr(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function tn(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function rn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){tn(a,n,o,i,l,"next",e)}function l(e){tn(a,n,o,i,l,"throw",e)}i(void 0)}))}}function nn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,on(n.key),n)}}function on(e){var t=function(e){if("object"!=Zr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zr(t)?t:t+""}var an=function(){return e=function e(t){var r,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.bot_folder_name=void 0,this.client_id=void 0,this.app_id=void 0,this.api_key=void 0,this.scope=void 0,this.discovery_docs="",this.client=void 0,this.access_token=void 0,this.upload_id=void 0,this.is_google_drive_token_valid=!0,this.is_authorised=!!localStorage.getItem("google_access_token"),this.setGoogleDriveTokenValid=function(e){n.is_google_drive_token_valid=e},this.setKey=function(){var e=p.config.GOOGLE_DRIVE,t=e.SCOPE,r=e.DISCOVERY_DOCS;n.client_id=void 0,n.app_id=void 0,n.api_key=void 0,n.scope=t,n.discovery_docs=r},this.initialise=function(){gapi.load("client:picker",(function(){return gapi.client.load(n.discovery_docs)}))},this.setGoogleDriveTokenExpiry=function(e){var t=Math.floor(Date.now()/1e3)+e;localStorage.setItem("google_access_token_expiry",t.toString())},this.initialiseClient=function(){n.client=google.accounts.oauth2.initTokenClient({client_id:n.client_id,scope:n.scope,callback:function(e){null==e||!e.access_token||null!=e&&e.error||(n.access_token=e.access_token,n.setIsAuthorized(!0),localStorage.setItem("google_access_token",e.access_token),n.setGoogleDriveTokenExpiry(null==e?void 0:e.expires_in),n.setGoogleDriveTokenValid(!0))}})},this.verifyGoogleDriveAccessToken=rn(en().mark((function e(){var t,r;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=localStorage)||void 0===t?void 0:t.getItem("google_access_token_expiry")){e.next=3;break}return e.abrupt("return","not_verified");case 3:if(!(Math.floor(Date.now()/1e3)>Number(r))){e.next=11;break}return n.signOut(),n.setGoogleDriveTokenValid(!1),localStorage.removeItem("google_access_token_expiry"),localStorage.removeItem("google_access_token"),(0,ie.N)(le.UC.google_drive_error,void 0,{closeButton:!1}),e.abrupt("return","not_verified");case 11:return e.abrupt("return","verified");case 12:case"end":return e.stop()}}),e)}))),this.onDriveConnect=rn(en().mark((function e(){return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.is_authorised?n.signOut():n.signIn();case 1:case"end":return e.stop()}}),e)}))),(0,j.makeObservable)(this,{is_authorised:j.observable,upload_id:j.observable,is_google_drive_token_valid:j.observable,setIsAuthorized:j.action.bound,saveFile:j.action.bound,loadFile:j.action.bound,setKey:j.action.bound,initialise:j.action.bound,signIn:j.action.bound,signOut:j.action.bound,getPickerLanguage:j.action.bound,checkFolderExists:j.action.bound,createSaveFilePicker:j.action.bound,createLoadFilePicker:j.action.bound,showGoogleDriveFilePicker:j.action.bound,setGoogleDriveTokenValid:j.action.bound,verifyGoogleDriveAccessToken:j.action.bound,onDriveConnect:j.action}),this.root_store=t,this.bot_folder_name="Binary Bot - ".concat((0,_.localize)("Strategies")),this.setKey(),this.client=null,this.access_token=null!==(r=localStorage.getItem("google_access_token"))&&void 0!==r?r:"",(0,p.importExternal)("https://accounts.google.com/gsi/client").then((function(){return n.initialiseClient()})),(0,p.importExternal)("https://apis.google.com/js/api.js").then((function(){return n.initialise()}))},t=[{key:"setIsAuthorized",value:function(e){this.is_authorised=e}},{key:"signIn",value:(i=rn(en().mark((function e(){return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.is_authorised){e.next=3;break}return e.next=3,this.client.requestAccessToken();case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"signOut",value:(a=rn(en().mark((function e(){var t,r,n,o,a,i,l,c;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.access_token){e.next=8;break}return e.next=3,null===(t=window)||void 0===t||null===(r=t.gapi)||void 0===r||null===(n=r.client)||void 0===n?void 0:n.setToken({access_token:""});case 3:if(!localStorage.getItem("google_access_token")){e.next=7;break}return e.next=6,null===(o=window)||void 0===o||null===(a=o.google)||void 0===a||null===(i=a.accounts)||void 0===i||null===(l=i.oauth2)||void 0===l?void 0:l.revoke(this.access_token);case 6:null===(c=localStorage)||void 0===c||c.removeItem("google_access_token");case 7:this.access_token="";case 8:this.setIsAuthorized(!1);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getPickerLanguage",value:function(){var e=(0,_.getLanguage)();return"zhTw"===e?"zh-TW":"zhCn"===e?"zh-CN":e}},{key:"saveFile",value:(o=rn(en().mark((function e(t){return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signIn();case 3:return this.access_token&&gapi.client.setToken({access_token:this.access_token}),e.next=6,this.checkFolderExists();case 6:return e.next=8,this.createSaveFilePicker("application/vnd.google-apps.folder",(0,_.localize)("Select a folder"),t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),401===e.t0.status&&this.signOut();case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return o.apply(this,arguments)})},{key:"loadFile",value:(n=rn(en().mark((function e(){var t,r,n,o,a,i,l,c;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.is_google_drive_token_valid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.signIn();case 4:return this.access_token&&gapi.client.setToken({access_token:this.access_token}),e.prev=5,e.next=8,gapi.client.drive.files.list({pageSize:10,fields:"files(id, name)"});case 8:e.next=20;break;case 10:if(e.prev=10,e.t0=e.catch(5),401!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)){e.next=19;break}return e.next=15,this.signOut();case 15:if(null==(a=document.getElementsByClassName("picker-dialog-content")[0])||null===(o=a.parentNode)||void 0===o||o.removeChild(a),(i=document.getElementsByClassName("picker-dialog-bg")).length)for(l=0;l<i.length;l++)i[l].style.display="none";case 19:Jr({upload_provider:"google_drive",upload_id:this.upload_id,upload_type:"not_found",error_message:null===e.t0||void 0===e.t0||null===(t=e.t0.result)||void 0===t||null===(r=t.error)||void 0===r?void 0:r.message,error_code:null===e.t0||void 0===e.t0||null===(n=e.t0.status)||void 0===n?void 0:n.toString()});case 20:return e.next=22,this.createLoadFilePicker("text/xml,application/xml",(0,_.localize)("Select a Deriv Bot Strategy"));case 22:return c=e.sent,e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(){return n.apply(this,arguments)})},{key:"checkFolderExists",value:(r=rn(en().mark((function e(){var t,r,n,o;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gapi.client.drive.files,e.next=3,r.list({q:"trashed=false"});case 3:if(n=e.sent,o="application/vnd.google-apps.folder",!(null===(t=n.result.files)||void 0===t?void 0:t.find((function(e){return e.mimeType===o})))){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.create({resource:{name:this.bot_folder_name,mimeType:o},fields:"id"});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"createSaveFilePicker",value:function(e,t,r){var n=this,o=this.root_store.save_modal.setButtonStatus;return new Promise((function(a){n.showGoogleDriveFilePicker(!0,e,t,(function(e){if(e.action===google.picker.Action.PICKED){var t=e.docs[0].id,i=new Blob([r.content],{type:r.mimeType}),l=JSON.stringify({name:r.name,mimeType:r.mimeType,parents:[t]}),c=new FormData;c.append("metadata",new Blob([l],{type:"application/json"})),c.append("file",i);var s=new XMLHttpRequest;s.responseType="json",s.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart"),s.setRequestHeader("Authorization","Bearer ".concat(n.access_token)),s.onload=function(){401===s.status&&n.signOut(),o(or.NORMAL),a()},s.send(c)}else e.action===google.picker.Action.CANCEL&&o(or.NORMAL)}))}))}},{key:"createLoadFilePicker",value:function(e,t){var r=this;return new Promise((function(n){var o=function(){var e=rn(en().mark((function e(t){var o,a,i,l,c,s,u;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.action!==google.picker.Action.PICKED){e.next=14;break}return"NETWORK"===(null==(o=t.docs[0])?void 0:o.driveError)&&Jr({upload_provider:"google_drive",upload_id:r.upload_id,upload_type:"not_found",error_message:"File not found",error_code:"404"}),a=o.name,i=o.id,l=gapi.client.drive.files,c=r.root_store.dashboard.setOpenSettings,e.next=9,l.get({alt:"media",fileId:i});case 9:s=e.sent,n({xml_doc:s.body,file_name:a}),c(le.Dc.BOT_IMPORT),u=Wr(s.body),Qr({upload_provider:"google_drive",upload_type:u,upload_id:r.upload_id});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.showGoogleDriveFilePicker(!1,e,t,o)}))}},{key:"showGoogleDriveFilePicker",value:function(e,t,r,n){var o=new google.picker.DocsView;o.setIncludeFolders(!0),o.setMimeTypes(t),e&&o.setSelectFolderEnabled(!0),(new google.picker.PickerBuilder).setOrigin("".concat(window.location.protocol,"//").concat(window.location.host)).setTitle((0,_.localize)(r)).setLocale(this.getPickerLanguage()).setAppId(this.app_id).setOAuthToken(this.access_token).addView(o).setDeveloperKey(this.api_key).setSize(1051,650).setCallback(n).build().setVisible(!0)}}],t&&nn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o,a,i}(),ln=r(69),cn=function(e){switch(e){case"error":return"IcAlertDanger";case"warn":default:return"IcAlertWarning";case"info":return"IcAlertInfo"}},sn=function(e,t,r,n){r(function(e){var t=e.unique_id,r=e.type,n=e.message,o=e.btn_text,a=e.onClick;return f().createElement(f().Fragment,null,f().createElement("div",{key:"".concat(t,"_message"),className:"notify__item-container"},f().createElement(m.Icon,{key:"".concat(t,"_icon"),icon:cn(r),size:"22"}),f().createElement("div",{key:"".concat(t,"_text"),className:"notify__item-message"},n)),f().createElement(m.Button,{key:"".concat(t,"_btn"),className:"notify__item-button",text:o,onClick:a,has_effect:!0,secondary:!0}))}({unique_id:t,type:"error",message:e,btn_text:(0,_.localize)("Go to block"),onClick:function(){n()}}))},un=function(e){return e.map((function(e,t){return{id:"".concat(Date.now(),"-").concat(t),value:e&&Array.isArray(e)?un(e):e}}))},fn=r(683),dn=r.n(fn),pn=function(e,t,r){return t&&mn(e,r)[t]||r},mn=function(e,t){try{var r=sessionStorage.getItem(e),n=dn().decompress(r),o=JSON.parse(n);if(o)return o}catch(e){}return t},hn=function(e,t){try{var r=dn().compress(JSON.stringify(t));sessionStorage.setItem(e,r)}catch(e){console.warn("Could not write to storage.")}},yn=r(2964);function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function _n(){_n=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==vn(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(vn(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function bn(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,En(n.key),n)}}function En(e){var t=function(e){if("object"!=vn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vn(t)?t:t+""}var wn=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.disposeReactionsFn=void 0,this.JOURNAL_CACHE="journal_cache",this.is_filter_dialog_visible=!1,this.filters=[{id:p.MessageTypes.ERROR,label:(0,_.localize)("Errors")},{id:p.MessageTypes.NOTIFY,label:(0,_.localize)("Notifications")},{id:p.MessageTypes.SUCCESS,label:(0,_.localize)("System")}],this.journal_filters=[],this.unfiltered_messages=[],this.playAudio=function(e){e!==ln.$.lists.NOTIFICATION_SOUND[0][1]&&document.getElementById(e).play()},(0,j.makeObservable)(this,{is_filter_dialog_visible:j.observable,journal_filters:j.observable.shallow,filters:j.observable.shallow,unfiltered_messages:j.observable.shallow,toggleFilterDialog:j.action.bound,onLogSuccess:j.action.bound,onError:j.action.bound,onNotify:j.action.bound,pushMessage:j.action.bound,filtered_messages:j.computed,getServerTime:j.action.bound,playAudio:j.action.bound,checked_filters:j.computed,filterMessage:j.action.bound,clear:j.action.bound,registerReactions:j.action.bound,restoreStoredJournals:j.action.bound}),this.root_store=t,this.core=r,this.disposeReactionsFn=this.registerReactions(),this.restoreStoredJournals()},t=[{key:"restoreStoredJournals",value:function(){var e,t,r=(null!==(e=null===(t=this.core)||void 0===t?void 0:t.client)&&void 0!==e?e:{}).loginid;this.journal_filters=H("journal_filter")||this.filters.map((function(e){return e.id})),this.unfiltered_messages=pn(this.JOURNAL_CACHE,r,[])}},{key:"getServerTime",value:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.common.server_time.get()}},{key:"toggleFilterDialog",value:function(){this.is_filter_dialog_visible=!this.is_filter_dialog_visible}},{key:"onLogSuccess",value:function(e){var t=e.log_type,r=e.extra;this.pushMessage(t,p.MessageTypes.SUCCESS,"",r)}},{key:"onError",value:function(e){this.pushMessage(e,p.MessageTypes.ERROR)}},{key:"onNotify",value:function(e){var t=this,r=this.root_store,n=r.run_panel,o=r.dbot,a=e.message,i=e.className,l=e.message_type,c=e.sound,s=e.block_id,u=e.variable_name;(function(e,t,r,n){var o,a=e.message,i=e.block_id,l=e.variable_name;if(void 0===a&&null!=l)return sn((0,_.localize)("Variable '{{variable_name}}' has no value. Please set a value for variable '{{variable_name}}' to notify.",{variable_name:l}),i,t,r),!0;if(null===a)return n("NULL"),!0;if(Object.is(a,NaN))return sn((0,_.localize)("Tried to perform an invalid operation."),i,t,r),!0;if(Array.isArray(a)){var c=a.length;return n((o={header:"null"!==l?"".concat(l,": (").concat(c,")"):(0,_.localize)("List: ({{message_length}})",{message_length:c}),content:un(a)},function(e){return f().createElement(m.ExpansionPanel,{message:o,onResize:e})})),!0}return"boolean"==typeof a&&(n(a.toString()),!0)})({message:a,block_id:s,variable_name:u},n.showErrorMessage,(function(){return o.centerAndHighlightBlock(s,!0)}),(function(e){return t.pushMessage(e,l||p.MessageTypes.NOTIFY,i)}))||this.pushMessage(a,l||p.MessageTypes.NOTIFY,i),this.playAudio(c)}},{key:"pushMessage",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.core.client,a=o.loginid,i=o.account_list;if(a){var l=null==i?void 0:i.find((function(e){return(null==e?void 0:e.loginid)===a}));n.current_currency=null!=l&&l.is_virtual?"Demo":null==l?void 0:l.title}else if(e===p.LogTypes.WELCOME)return;var c=(0,z.formatDate)(this.getServerTime()),s=(0,z.formatDate)(this.getServerTime(),"HH:mm:ss [GMT]"),u=(0,yn.A)();this.unfiltered_messages.unshift({date:c,time:s,message:e,message_type:t,className:r,unique_id:u,extra:n}),this.unfiltered_messages=this.unfiltered_messages.slice()}},{key:"filtered_messages",get:function(){var e=this;return this.unfiltered_messages.filter((function(t){return e.journal_filters.length&&e.journal_filters.some((function(e){return t.message_type===e}))}))}},{key:"checked_filters",get:function(){return this.journal_filters.filter((function(e){return null!=e}))}},{key:"filterMessage",value:function(e,t){e?this.journal_filters.push(t):this.journal_filters.splice(this.journal_filters.indexOf(t),1),W("journal_filter",this.journal_filters)}},{key:"clear",value:function(){this.unfiltered_messages=this.unfiltered_messages.slice(0,0)}},{key:"registerReactions",value:function(){var e=this,t=this.core.client,r=(0,j.reaction)((function(){return e.unfiltered_messages}),(function(r){var n=mn(e.JOURNAL_CACHE,{});n[t.loginid]=null==r?void 0:r.slice(0,5e3),hn(e.JOURNAL_CACHE,n)})),n=(0,j.reaction)((function(){return null==t?void 0:t.loginid}),function(){var r,n=(r=_n().mark((function r(n){return _n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.when)((function(){var e,r;return!!(null===(e=t.account_list)||void 0===e||null===(r=e.find((function(e){return e.loginid===n})))||void 0===r?void 0:r.title)}));case 2:e.unfiltered_messages=pn(e.JOURNAL_CACHE,n,[]),0===e.unfiltered_messages.length?e.pushMessage(p.LogTypes.WELCOME,p.MessageTypes.SUCCESS,"journal__text"):e.unfiltered_messages.length>0&&e.pushMessage(p.LogTypes.WELCOME_BACK,p.MessageTypes.SUCCESS,"journal__text");case 4:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){bn(a,n,o,i,l,"next",e)}function l(e){bn(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),{fireImmediately:!0});return function(){r(),n()}}}],t&&gn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),kn=r(3620),xn=Object.freeze({TAB_LOCAL:"local_tab",TAB_GOOGLE:"google_tab",TAB_RECENT:"recent_tab"}),Sn=function(e,t){return new Promise((function(r){if(document.querySelector(e))return r(document.querySelector(e));var n=new MutationObserver((function(){document.querySelector(e)&&(r(document.querySelector(e)),n.disconnect())}));n.observe(null!=t?t:document.body,{childList:!0,subtree:!0})}))};function On(e){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(e)}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){An(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function An(e,t,r){return(t=zn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cn(){Cn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==On(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(On(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Pn(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function In(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Pn(a,n,o,i,l,"next",e)}function l(e){Pn(a,n,o,i,l,"throw",e)}i(void 0)}))}}function jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zn(n.key),n)}}function zn(e){var t=function(e){if("object"!=On(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=On(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==On(t)?t:t+""}var Rn=function(){return e=function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.imported_strategy_type="pending",this.recent_workspace=null,this.local_workspace=null,this.drop_zone=void 0,this.active_index=0,this.is_load_modal_open=!1,this.is_explanation_expand=!1,this.is_open_button_loading=!1,this.is_open_button_disabled=!1,this.loaded_local_file=null,this.recent_strategies=[],this.dashboard_strategies=[],this.selected_strategy_id="",this.is_strategy_loaded=!1,this.is_delete_modal_open=!1,this.is_strategy_removed=!1,this.current_workspace_id="",this.upload_id="",this.setOpenButtonDisabled=function(e){n.is_open_button_disabled=e},this.getSelectedStrategyID=function(e){n.current_workspace_id=e},this.setDashboardStrategies=function(e){n.dashboard_strategies=e,e.length||(n.selected_strategy_id="")},this.getDashboardStrategies=In(Cn().mark((function e(){var t;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getSavedWorkspaces)();case 2:t=e.sent,n.dashboard_strategies=t;case 4:case"end":return e.stop()}}),e)}))),this.onDriveOpen=In(Cn().mark((function e(){var t,r,o,a,i,l;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.root_store.google_drive,r=t.verifyGoogleDriveAccessToken,e.next=4,r();case 4:if("not_verified"!==e.sent){e.next=7;break}return e.abrupt("return");case 7:return t&&(t.upload_id=(0,yn.A)()),Xr({upload_provider:"google_drive",upload_id:t.upload_id}),o=n.root_store.google_drive.loadFile,e.next=12,o();case 12:if(a=e.sent){e.next=15;break}return e.abrupt("return");case 15:return i=null==a?void 0:a.xml_doc,l=null==a?void 0:a.file_name,e.next=19,(0,p.load)({block_string:i,file_name:l,workspace:window.Blockly.derivWorkspace,from:p.save_types.GOOGLE_DRIVE,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null});case 19:1===n.root_store.dashboard.active_tab&&n.toggleLoadModal(),n.root_store.dashboard.is_dialog_open=!1;case 22:case"end":return e.stop()}}),e)}))),this.onEntered=function(){0!==n.recent_strategies.length&&n.tab_name===xn.TAB_RECENT&&(n.setOpenButtonDisabled(!0),(0,n.root_store.blockly_store.setLoading)(!0),n.loadStrategyOnModalRecentPreview(n.selected_strategy_id),n.updateXmlValuesOnStrategySelection(),n.setOpenButtonDisabled(!1))},this.onLoadModalClose=function(){n.local_workspace&&(n.local_workspace=null),n.setActiveTabIndex(0),n.setLoadedLocalFile(null)},this.onZoomInOutClick=function(e){n.preview_workspace&&n.preview_workspace.zoomCenter(e?1:-1)},this.setActiveTabIndex=function(e){n.active_index=e},this.setLoadedLocalFile=function(e){n.loaded_local_file=e},this.setRecentStrategies=function(e){n.recent_strategies=e},this.refreshStrategies=function(){n.setRecentStrategies(n.recent_strategies)},this.setSelectedStrategyId=function(e){n.selected_strategy_id=e},this.toggleExplanationExpand=function(){n.is_explanation_expand=!n.is_explanation_expand},this.toggleLoadModal=function(){var e;n.is_load_modal_open=!n.is_load_modal_open,null===(e=n.recent_workspace)||void 0===e||e.dispose(),n.recent_workspace=null,n.setLoadedLocalFile(null)},this.toggleTourLoadModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!n.is_load_modal_open;n.is_load_modal_open=e},this.updateListStrategies=function(e){e&&(n.dashboard_strategies=e)},this.getRecentFileIcon=function(e){switch(e){case p.save_types.UNSAVED:return"IcReports";case p.save_types.LOCAL:return"IcMyComputer";case p.save_types.GOOGLE_DRIVE:return"IcGoogleDrive";default:return"IcReports"}},this.getSaveType=function(e){switch(e){case p.save_types.UNSAVED:return(0,_.localize)("Unsaved");case p.save_types.LOCAL:return(0,_.localize)("Local");case p.save_types.GOOGLE_DRIVE:return(0,_.localize)("Google Drive");default:return(0,_.localize)("Unsaved")}},this.onToggleDeleteDialog=function(e){n.is_delete_modal_open=e},this.resetBotBuilderStrategy=function(){var e=window.Blockly.derivWorkspace;e&&(window.Blockly.derivWorkspace.asyncClear(),window.Blockly.Xml.domToWorkspace(window.Blockly.utils.xml.textToDom(e.cached_xml.main),e),window.Blockly.derivWorkspace.strategy_to_load=e.cached_xml.main)},this.loadStrategyToBuilder=function(){var e=In(Cn().mark((function e(t){var r;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||!t.id){e.next=4;break}return e.next=3,(0,p.load)({block_string:t.xml,strategy_id:t.id,file_name:t.name,workspace:null===(r=window.Blockly)||void 0===r?void 0:r.derivWorkspace,from:t.save_type,drop_event:{},showIncompatibleStrategyDialog:!1});case 3:window.Blockly.derivWorkspace.strategy_to_load=t.xml;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.refreshStrategiesTheme=In(Cn().mark((function e(){var t,r,o,a;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.recent_workspace&&(n.recent_workspace.RTL=(0,kn.Qq)()),e.next=3,(0,p.load)({block_string:null===(t=n.selected_strategy)||void 0===t?void 0:t.xml,drop_event:{},workspace:n.recent_workspace,file_name:null===(r=n.selected_strategy)||void 0===r?void 0:r.name,strategy_id:null===(o=n.selected_strategy)||void 0===o?void 0:o.id,from:null===(a=n.selected_strategy)||void 0===a?void 0:a.save_type,showIncompatibleStrategyDialog:!1});case 3:case"end":return e.stop()}}),e)}))),this.loadFileFromRecent=In(Cn().mark((function e(){var t;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.is_open_button_loading=!0,n.selected_strategy){e.next=6;break}return window.Blockly.derivWorkspace.asyncClear(),window.Blockly.Xml.domToWorkspace(window.Blockly.utils.xml.textToDom(window.Blockly.derivWorkspace.strategy_to_load),window.Blockly.derivWorkspace),n.is_open_button_loading=!1,e.abrupt("return");case 6:return(0,p.removeExistingWorkspace)(n.selected_strategy.id),e.next=9,(0,p.load)({block_string:null===(t=n.selected_strategy)||void 0===t?void 0:t.xml,strategy_id:n.selected_strategy.id,file_name:n.selected_strategy.name,workspace:window.Blockly.derivWorkspace,from:n.selected_strategy.save_type,drop_event:{},showIncompatibleStrategyDialog:!1});case 9:return e.next=11,(0,p.getSavedWorkspaces)();case 11:e.sent.map((function(e){var t=e.xml,r=e.id;n.selected_strategy.id===r&&(window.Blockly.derivWorkspace.strategy_to_load=t)})),n.is_open_button_loading=!1;case 14:case"end":return e.stop()}}),e)}))),this.loadFileFromLocal=function(){n.is_open_button_loading=!0,n.loaded_local_file&&n.readFile(!1,{},n.loaded_local_file)},this.onActiveIndexChange=function(){n.setOpenButtonDisabled(!0),n.tab_name===xn.TAB_RECENT?(n.loadStrategyOnModalRecentPreview(n.selected_strategy_id),n.updateXmlValuesOnStrategySelection()):n.recent_workspace&&setTimeout((function(){var e;null===(e=n.recent_workspace)||void 0===e||e.dispose(),n.recent_workspace=null})),n.tab_name===xn.TAB_LOCAL?n.drop_zone||(n.drop_zone=document.querySelector("load-strategy__local-dropzone-area"),n.drop_zone&&n.drop_zone.addEventListener("drop",(function(e){return n.handleFileChange(e,!1)}))):n.local_workspace&&setTimeout((function(){var e;null===(e=n.local_workspace)||void 0===e||e.dispose(),n.local_workspace=null,n.setLoadedLocalFile(null)}),0),n.tab_name!==xn.TAB_LOCAL&&n.drop_zone&&n.drop_zone.removeEventListener("drop",(function(e){return n.handleFileChange(e,!1)})),n.setOpenButtonDisabled(!1)},this.handleFileChange=function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.imported_strategy_type="pending",n.upload_id=(0,yn.A)(),"drop"===e.type?(e.stopPropagation(),e.preventDefault(),t=e.dataTransfer.files):t=e.target.files;var o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,1)[0];if(!r){if(!o.name.includes("xml"))return!1;n.setLoadedLocalFile(o),n.getDashboardStrategies()}return n.readFile(!r,e,o),e.target.value="",!0},this.readFile=function(e,t,r){var o=new FileReader,a=(null==r?void 0:r.name.replace(/\.[^/.]+$/,""))||"";o.onload=(0,j.action)(function(){var e=In(Cn().mark((function e(r){var o,i;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={block_string:null==r||null===(o=r.target)||void 0===o?void 0:o.result,drop_event:t,from:p.save_types.LOCAL,workspace:null,file_name:a,strategy_id:"",showIncompatibleStrategyDialog:!1},e.next=3,(0,p.load)(i);case 3:n.loadStrategyOnModalLocalPreview(i),n.is_open_button_loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.readAsText(r)},this.saveStrategyToLocalStorage=In(Cn().mark((function e(){var t,r,o,a,i,l,c,s;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.root_store.save_modal,o=r.updateBotName,a=window.Blockly.xmlValues,i=a.convertedDom,l=a.from,c=a.file_name,o(c),e.next=6,(0,p.saveWorkspaceToRecent)(i,l);case 6:return e.next=8,(0,p.getSavedWorkspaces)();case 8:(null==(s=e.sent)?void 0:s.length)>0&&n.setSelectedStrategyId(null===(t=s[0])||void 0===t?void 0:t.id);case 10:case"end":return e.stop()}}),e)}))),this.loadStrategyOnBotBuilder=In(Cn().mark((function e(){var t,r,o,a,i,l,c;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.Blockly.xmlValues,r=t.strategy_id,o=void 0===r?window.Blockly.utils.idGenerator.genUid():r,a=t.convertedDom,i=t.block_string,l=window.Blockly.derivWorkspace,window.Blockly.Xml.clearWorkspaceAndLoadFromXml(a,l),l.cleanUp(),l.clearUndo(),l.current_strategy_id=o,c=Wr(null!=i?i:""),Qr({upload_provider:"my_computer",upload_type:c,upload_id:n.upload_id});case 8:case"end":return e.stop()}}),e)}))),this.updateXmlValuesOnStrategySelection=function(){var e,t,r,o,a,i,l;0!==n.recent_strategies.length&&(0,R.T2)({strategy_id:n.selected_strategy_id,convertedDom:null===(e=window)||void 0===e||null===(t=e.Blockly)||void 0===t||null===(r=t.utils)||void 0===r||null===(o=r.xml)||void 0===o?void 0:o.textToDom(null===(a=n.selected_strategy)||void 0===a?void 0:a.xml),file_name:null===(i=n.selected_strategy)||void 0===i?void 0:i.name,from:(null===(l=n.selected_strategy)||void 0===l?void 0:l.save_type)||p.save_types.UNSAVED})},this.loadStrategyOnModalRecentPreview=function(){var e=In(Cn().mark((function e(t){var r,o,a,i,l,c,s,u,f,d,p,m,h,y,v,_,b;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setOpenButtonDisabled(!0),0!==n.recent_strategies.length&&n.tab_name===xn.TAB_RECENT){e.next=3;break}return e.abrupt("return");case 3:return m=n.root_store.blockly_store,h=m.setLoading,y=Ln(Ln({},R.NZ),{},{theme:null===(r=window)||void 0===r||null===(o=r.Blockly)||void 0===o||null===(a=o.Themes)||void 0===a?void 0:a.zelos_renderer}),n.setLoadedLocalFile(null),n.setSelectedStrategyId(t),e.next=10,Sn("#load-strategy__blockly-container");case 10:v=null===(i=document)||void 0===i?void 0:i.getElementById("load-strategy__blockly-container"),n.recent_workspace||(n.recent_workspace=window.Blockly.inject(v,y)),n.recent_workspace.RTL=(0,kn.Qq)(),_=null===(l=window.Blockly)||void 0===l||null===(c=l.utils)||void 0===c||null===(s=c.xml)||void 0===s?void 0:s.textToDom(null===(u=n.selected_strategy)||void 0===u?void 0:u.xml),b=null===(f=window.Blockly)||void 0===f?void 0:f.getMainWorkspace(),null===(d=window.Blockly)||void 0===d||null===(p=d.Xml)||void 0===p||p.clearWorkspaceAndLoadFromXml(_,b),h(!1),n.setOpenButtonDisabled(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loadStrategyOnModalLocalPreview=function(){var e=In(Cn().mark((function e(t){var r,o,a,i,l,c,s,u,f;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setOpenButtonDisabled(!0),c=Ln(Ln({},R.NZ),{},{theme:null===(r=window)||void 0===r||null===(o=r.Blockly)||void 0===o||null===(a=o.Themes)||void 0===a?void 0:a.zelos_renderer}),s=null===(i=document)||void 0===i?void 0:i.getElementById("load-strategy__blockly-container"),n.local_workspace=window.Blockly.inject(s,c),t.workspace=n.local_workspace,t.workspace&&(t.workspace.RTL=(0,kn.Qq)()),u=Wr(null!==(l=null==t?void 0:t.block_string)&&void 0!==l?l:""),e.next=9,(0,p.load)(t);case 9:null!=(f=e.sent)&&f.error?null!=f&&f.error&&Jr({upload_provider:"my_computer",upload_id:n.upload_id,upload_type:u,error_message:f.error}):Xr({upload_provider:"my_computer",upload_id:n.upload_id});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,j.makeObservable)(this,{active_index:j.observable,is_load_modal_open:j.observable,is_explanation_expand:j.observable,is_strategy_loaded:j.observable,is_delete_modal_open:j.observable,is_strategy_removed:j.observable,loaded_local_file:j.observable,recent_strategies:j.observable,dashboard_strategies:j.observable,selected_strategy_id:j.observable,current_workspace_id:j.observable,upload_id:j.observable,preview_workspace:j.computed,selected_strategy:j.computed,tab_name:j.computed,is_open_button_disabled:j.observable,setOpenButtonDisabled:j.action.bound,getSelectedStrategyID:j.action.bound,refreshStrategies:j.action.bound,loadStrategyToBuilder:j.action.bound,refreshStrategiesTheme:j.action.bound,handleFileChange:j.action.bound,loadFileFromRecent:j.action.bound,loadFileFromLocal:j.action.bound,imported_strategy_type:j.observable,onActiveIndexChange:j.action.bound,onDriveOpen:j.action.bound,onEntered:j.action.bound,onLoadModalClose:j.action.bound,onZoomInOutClick:j.action.bound,setActiveTabIndex:j.action.bound,setLoadedLocalFile:j.action.bound,setRecentStrategies:j.action.bound,setSelectedStrategyId:j.action.bound,toggleExplanationExpand:j.action.bound,toggleLoadModal:j.action.bound,toggleTourLoadModal:j.action.bound,readFile:j.action.bound,resetBotBuilderStrategy:j.action.bound,setDashboardStrategies:j.action.bound,updateListStrategies:j.action.bound,onToggleDeleteDialog:j.action,loadStrategyOnModalRecentPreview:j.action,loadStrategyOnBotBuilder:j.action,saveStrategyToLocalStorage:j.action,updateXmlValuesOnStrategySelection:j.action}),this.root_store=t,this.core=r,(0,j.reaction)((function(){return n.active_index}),(function(){return n.onActiveIndexChange()})),(0,j.reaction)((function(){return n.is_load_modal_open}),function(){var e=In(Cn().mark((function e(t){var r;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.next=3,(0,p.getSavedWorkspaces)();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:n.setRecentStrategies(r),r.length>0&&!n.selected_strategy_id&&n.setSelectedStrategyId(r[0].id),e.next=11;break;case 10:n.onLoadModalClose();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},(t=[{key:"preview_workspace",get:function(){return this.tab_name===xn.TAB_LOCAL?this.local_workspace:this.tab_name===xn.TAB_RECENT?this.recent_workspace:null}},{key:"selected_strategy",get:function(){var e,t=this;return null!==(e=this.dashboard_strategies.find((function(e){return e.id===t.selected_strategy_id})))&&void 0!==e?e:this.dashboard_strategies[0]}},{key:"tab_name",get:function(){if(this.core.ui.is_mobile){if(0===this.active_index)return xn.TAB_LOCAL;if(1===this.active_index)return xn.TAB_GOOGLE}return 0===this.active_index?xn.TAB_RECENT:1===this.active_index?xn.TAB_LOCAL:2===this.active_index?xn.TAB_GOOGLE:""}}])&&jn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Dn=r(6759),Bn=function(e,t,r,n){if("digits"===r||"highlowticks"===r){var o=document.createElement("value");o.setAttribute("name",e),o.setAttribute("strategy_value",t);var a=document.createElement("shadow");a.setAttribute("type","math_number_positive"),a.setAttribute("id","p0O]7-M{ZORlORxGuIEb");var i=document.createElement("field");i.setAttribute("name","NUM"),i.textContent="0",a.appendChild(i),o.appendChild(a);var l=null==n?void 0:n.querySelector('value[name="AMOUNT"]');if(l){var c=l.parentNode;c&&c.insertBefore(o,l.nextSibling)}}if("PREDICTION"===e&&n){var s=n.querySelector('block[type="trade_definition_tradeoptions"] > mutation');s&&s.setAttribute("has_prediction","true")}};function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}var Un=["unit","action","type","growth_rate"];function Fn(){Fn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Mn(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Mn(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Gn(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function qn(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(r),!0).forEach((function(t){Hn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hn(e,t,r){return(t=$n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$n(n.key),n)}}function Kn(e,t,r){return t&&Wn(e.prototype,t),r&&Wn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $n(e){var t=function(e){if("object"!=Mn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mn(t)?t:t+""}var Xn=Kn((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_open=!1,this.selected_strategy="MARTINGALE",this.form_data={symbol:p.config.QUICK_STRATEGY.DEFAULT.symbol,tradetype:p.config.QUICK_STRATEGY.DEFAULT.tradetype,durationtype:p.config.QUICK_STRATEGY.DEFAULT.durationtype,action:"RUN"},this.is_contract_dialog_open=!1,this.is_stop_bot_dialog_open=!1,this.current_duration_min_max={min:0,max:10},this.loss_threshold_warning_data={show:!1},this.additional_data={},this.setAdditionalData=function(e){n.additional_data=Yn(Yn({},n.additional_data),e)},this.setLossThresholdWarningData=function(e){n.loss_threshold_warning_data=Yn(Yn({},n.loss_threshold_warning_data),e)},this.initializeLossThresholdWarningData=function(){n.loss_threshold_warning_data={show:!1,highlight_field:[],already_shown:!1}},this.setFormVisibility=function(e){n.is_open=e},this.setSelectedStrategy=function(e){n.selected_strategy=e},this.setValue=function(e,t){n.form_data[e]=t},this.setCurrentDurationMinMax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;n.current_duration_min_max={min:e,max:t}},this.onSubmit=function(){var e,t=(e=Fn().mark((function e(t){var o,a,i,l,c,s,u,f,d,m,h,y,v,_,b,g,E;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.ApiHelpers.instance.contracts_for,e.next=3,o.getMarketBySymbol(t.symbol);case 3:return a=e.sent,e.next=6,o.getSubmarketBySymbol(t.symbol);case 6:return i=e.sent,e.next=9,o.getTradeTypeCategoryByTradeType(t.tradetype);case 9:return l=e.sent,c=Fr[n.selected_strategy],e.next=13,r(6176)("./".concat(c.name,".xml"));case 13:return s=e.sent,u=Blockly.utils.xml.textToDom(s.default),Bn("PREDICTION","last_digit_prediction",l,u),f=function(e,t){var r=null==u?void 0:u.querySelectorAll('value[strategy_value="'.concat(e,'"]'));null==r||r.forEach((function(r){e.includes("boolean")?r.innerHTML=t?'<block type="logic_boolean"><field name="BOOL">TRUE</field></block>':'<block type="logic_boolean"><field name="BOOL">FALSE</field></block>':r.innerHTML='<shadow type="math_number"><field name="NUM">'.concat(t,"</field></shadow>")}))},d=function(e,t){var r="".concat(e.toUpperCase(),"_LIST"),n=null==u?void 0:u.querySelectorAll('field[name="'.concat(r,'"]')),o=t;null==n||n.forEach((function(e){e.innerHTML=o}))},m=t.unit,h=t.action,y=t.type,v=t.growth_rate,_=Gn(t,Un),b=Yn(Yn({market:a,submarket:i,tradetypecat:l,dalembert_unit:m,oscar_unit:m,type:"both"},_),{},{purchase:y,growthrate:v?v.toString():void 0}),Object.keys(b).forEach((function(e){var t=b[e];isNaN(t)||"growthrate"===e?"string"==typeof t&&d(e,t):f(e,t)})),g=Blockly,E=g.derivWorkspace,"RUN"===h&&(null==E||E.waitForBlockEvent({block_type:"trade_definition",event_type:Blockly.Events.BLOCK_CREATE,timeout:5e3}).then((function(){n.root_store.run_panel.onRunButtonClick()}))),n.setFormVisibility(!1),(0,ie.N)(le.UC[le.Dc.BOT_IMPORT]),e.next=27,(0,p.load)({block_string:Blockly.Xml.domToText(u),file_name:c.label,workspace:E,from:Dn.e.UNSAVED,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null});case 27:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){qn(a,n,o,i,l,"next",e)}function l(e){qn(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),this.toggleStopBotDialog=function(){n.is_contract_dialog_open=!n.is_contract_dialog_open,n.is_stop_bot_dialog_open=!n.is_stop_bot_dialog_open,n.setFormVisibility(!1)},(0,j.makeObservable)(this,{additional_data:j.observable,current_duration_min_max:j.observable,form_data:j.observable,is_contract_dialog_open:j.observable,is_open:j.observable,is_stop_bot_dialog_open:j.observable,initializeLossThresholdWarningData:j.action,selected_strategy:j.observable,loss_threshold_warning_data:j.observable,onSubmit:j.action,setAdditionalData:j.action,setCurrentDurationMinMax:j.action,setFormVisibility:j.action,setSelectedStrategy:j.action,setLossThresholdWarningData:j.action,setValue:j.action,toggleStopBotDialog:j.action}),this.root_store=t,(0,j.reaction)((function(){return n.is_open}),(function(){n.is_open||(n.selected_strategy="MARTINGALE")}))}));function Qn(e){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(e)}function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zn(n.key),n)}}function Zn(e){var t=function(e){if("object"!=Qn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qn(t)?t:t+""}var eo=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.should_show=!1,this.is_confirmed=!1,this.last_location=null,(0,j.makeObservable)(this,{should_show:j.observable,is_confirmed:j.observable,last_location:j.observable,shouldNavigateAfterPrompt:j.action.bound,onConfirm:j.action.bound,onCancel:j.action.bound,continueRoute:j.action.bound,setShoudShow:j.action.bound}),this.root_store=t,this.core=r},(t=[{key:"shouldNavigateAfterPrompt",value:function(e){return!!this.is_confirmed||(this.last_location=e,"/bot"!==e.pathname&&(this.should_show=!0),!1)}},{key:"setShoudShow",value:function(e){this.should_show=e}},{key:"onConfirm",value:function(){this.should_show=!1,this.is_confirmed=!0}},{key:"onCancel",value:function(){this.should_show=!1}},{key:"continueRoute",value:function(){var e=this.core.common;this.is_confirmed&&this.last_location&&e.routeTo(this.last_location.pathname)}}])&&Jn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),to=Object.freeze({NOT_RUNNING:0,STARTING:1,RUNNING:2,PURCHASE_SENT:3,PURCHASE_RECEIVED:4,IS_STOPPING:5,CONTRACT_CLOSED:6}),ro=Object.freeze({SUMMARY:0,TRANSACTIONS:1,JOURNAL:2}),no={key:"bot_switch_account",header:(0,_.localize)("You have switched accounts."),message:(0,_.localize)("Our system will finish any Deriv Bot trades that are running, and Deriv Bot will not place any new trades."),type:"warning",is_persistent:!0},oo={keep_current_contract:f().createElement(_.Localize,{i18n_default_text:"Would you like to keep your current contract or close it? If you decide to keep it running, you can check and close it later on the <0>Reports</0> page.",components:[f().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:"/reports/positions"})]})};function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function io(){io=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==ao(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ao(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function lo(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function co(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){lo(a,n,o,i,l,"next",e)}function l(e){lo(a,n,o,i,l,"throw",e)}i(void 0)}))}}function so(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uo(n.key),n)}}function uo(e){var t=function(e){if("object"!=ao(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ao(t)?t:t+""}var fo=function(){return e=function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.dbot=void 0,this.core=void 0,this.disposeReactionsFn=void 0,this.timer=void 0,this.active_index=0,this.contract_stage=to.NOT_RUNNING,this.dialog_options={},this.has_open_contract=!1,this.is_running=!1,this.is_statistics_info_modal_open=!1,this.is_drawer_open=!0,this.is_dialog_open=!1,this.is_sell_requested=!1,this.show_bot_stop_message=!1,this.is_contracy_buying_in_progress=!1,this.run_id="",this.onOkButtonClick=null,this.onCancelButtonClick=null,this.error_type=void 0,this.setShowBotStopMessage=function(e){n.show_bot_stop_message=e,e&&(0,ie.N)(le.UC.bot_stop,{label:(0,_.localize)("Reports"),onClick:function(){var e=(0,R.kh)(),t=new URL(z.routes.positions,window.location.origin);t.searchParams.set("contract_type_bots",e),window.location.href=t.toString()}})},this.performSelfExclusionCheck=co(io().mark((function e(){var t;return io().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.root_store.self_exclusion,e.next=3,t.checkRestriction();case 3:case"end":return e.stop()}}),e)}))),this.onRunButtonClick=co(io().mark((function e(){var t,r,o,a,i,l,c,s,u;return io().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1,window.sendRequestsStatistic&&(performance.clearMeasures(),n.timer=setInterval((function(){window.sendRequestsStatistic(!0),performance.clearMeasures(),12===t?clearInterval(n.timer):t++}),1e4)),r=n.root_store,o=r.summary_card,a=r.route_prompt_dialog,i=r.self_exclusion,l=n.core,c=l.client,s=l.ui,u="iOS"===(0,z.mobileOSDetect)(),n.dbot.saveRecentWorkspace(),n.dbot.unHighlightAllBlocks(),c.is_logged_in){e.next=10;break}return n.showLoginDialog(),e.abrupt("return");case 10:if((u||(0,z.isSafari)())&&n.preloadAudio(),i.should_bot_run){e.next=14;break}return i.setIsRestricted(!0),e.abrupt("return");case 14:if(i.setIsRestricted(!1),n.registerBotListeners(),n.dbot.shouldRunBot()){e.next=19;break}return n.unregisterBotListeners(),e.abrupt("return");case 19:s.setAccountSwitcherDisabledMessage((0,_.localize)("Account switching is disabled while your bot is running. Please stop your bot before switching accounts.")),(0,j.runInAction)((function(){n.setIsRunning(!0),s.setPromptHandler(!0,a.shouldNavigateAfterPrompt),n.toggleDrawer(!0),n.run_id="run-".concat(Date.now()),o.clear(),n.setContractStage(to.STARTING),n.dbot.runBot()})),n.setShowBotStopMessage(!1);case 22:case"end":return e.stop()}}),e)}))),this.onStopButtonClick=function(){n.is_contracy_buying_in_progress=!1,n.root_store.summary_card.is_multiplier?n.showStopMultiplierContractDialog():n.stopBot()},this.onStopBotClick=function(){var e=n.root_store.summary_card.is_multiplier,t=n.root_store.summary_card;e?n.showStopMultiplierContractDialog():(n.stopBot(),t.clear(),n.setShowBotStopMessage(!0))},this.stopBot=function(){var e=n.core.ui;n.dbot.stopBot(),e.setPromptHandler(!1),n.error_type?(n.setContractStage(to.NOT_RUNNING),e.setAccountSwitcherDisabledMessage(),n.setIsRunning(!1)):n.has_open_contract?n.setContractStage(to.IS_STOPPING):(n.setContractStage(to.NOT_RUNNING),n.unregisterBotListeners(),e.setAccountSwitcherDisabledMessage(),n.setIsRunning(!1)),n.error_type&&(n.error_type=void 0),n.timer&&clearInterval(n.timer),window.sendRequestsStatistic&&(window.sendRequestsStatistic(!0),performance.clearMeasures())},this.onClearStatClick=function(){n.showClearStatDialog()},this.clearStat=function(){var e=n.root_store,t=e.summary_card,r=e.journal,o=e.transactions;n.setIsRunning(!1),n.setHasOpenContract(!1),n.clear(),r.clear(),t.clear(),o.clear(),n.setContractStage(to.NOT_RUNNING)},this.toggleStatisticsInfoModal=function(){n.is_statistics_info_modal_open=!n.is_statistics_info_modal_open},this.toggleDrawer=function(e){n.is_drawer_open=e},this.setActiveTabIndex=function(e){n.active_index=e},this.onCloseDialog=function(){n.is_dialog_open=!1},this.stopMyBot=function(){var e=n.root_store,t=e.summary_card,r=e.quick_strategy,o=n.core.ui,a=r.toggleStopBotDialog;o.setPromptHandler(!1),n.dbot.terminateBot(),n.onCloseDialog(),t.clear(),a(),n.timer&&clearInterval(n.timer),window.sendRequestsStatistic&&(window.sendRequestsStatistic(!0),performance.clearMeasures())},this.closeMultiplierContract=function(){var e=n.root_store.quick_strategy.toggleStopBotDialog;n.onClickSell(),n.stopBot(),n.onCloseDialog(),e()},this.showStopMultiplierContractDialog=function(){var e=n.root_store.summary_card,t=n.core.ui;n.onOkButtonClick=function(){t.setPromptHandler(!1),n.dbot.terminateBot(),n.timer&&clearInterval(n.timer),window.sendRequestsStatistic&&(window.sendRequestsStatistic(!0),performance.clearMeasures()),n.onCloseDialog(),e.clear()},n.onCancelButtonClick=function(){n.onClickSell(),n.stopBot(),n.onCloseDialog()},n.dialog_options={title:(0,_.localize)("Keep your current contract?"),message:oo.keep_current_contract,ok_button_text:(0,_.localize)("Keep my contract"),cancel_button_text:(0,_.localize)("Close my contract")},n.is_dialog_open=!0},this.showLoginDialog=function(){n.onOkButtonClick=n.onCloseDialog,n.onCancelButtonClick=null,n.dialog_options={title:(0,_.localize)("Please log in"),message:(0,_.localize)("You need to log in to run the bot.")},n.is_dialog_open=!0},this.showRealAccountDialog=function(){n.onOkButtonClick=n.onCloseDialog,n.onCancelButtonClick=null,n.dialog_options={title:(0,_.localize)("Deriv Bot isn't quite ready for real accounts"),message:(0,_.localize)("Please switch to your demo account to run your Deriv Bot.")},n.is_dialog_open=!0},this.showClearStatDialog=function(){n.onOkButtonClick=function(){n.clearStat(),n.onCloseDialog()},n.onCancelButtonClick=n.onCloseDialog,n.dialog_options={title:(0,_.localize)("Are you sure?"),message:(0,_.localize)("This will clear all data in the summary, transactions, and journal panels. All counters will be reset to zero.")},n.is_dialog_open=!0},this.showIncompatibleStrategyDialog=function(){n.onOkButtonClick=n.onCloseDialog,n.onCancelButtonClick=null,n.dialog_options={title:(0,_.localize)("Import error"),message:(0,_.localize)("This strategy is currently not compatible with Deriv Bot.")},n.is_dialog_open=!0},this.showContractUpdateErrorDialog=function(e){n.onOkButtonClick=n.onCloseDialog,n.onCancelButtonClick=null,n.dialog_options={title:(0,_.localize)("Contract Update Error"),message:e},n.is_dialog_open=!0},this.registerBotListeners=function(){var e=n.root_store,t=e.summary_card,r=e.transactions;p.observer.register("bot.running",n.onBotRunningEvent),p.observer.register("bot.sell",n.onBotSellEvent),p.observer.register("bot.stop",n.onBotStopEvent),p.observer.register("bot.bot_ready",n.onBotReadyEvent),p.observer.register("bot.click_stop",n.onStopButtonClick),p.observer.register("bot.trade_again",n.onBotTradeAgain),p.observer.register("contract.status",n.onContractStatusEvent),p.observer.register("bot.contract",n.onBotContractEvent),p.observer.register("bot.contract",t.onBotContractEvent),p.observer.register("bot.contract",r.onBotContractEvent),p.observer.register("Error",n.onError),p.observer.register("bot.recoverOpenPositionLimitExceeded",n.OpenPositionLimitExceededEvent)},this.OpenPositionLimitExceededEvent=function(){return n.is_contracy_buying_in_progress=!0},this.registerReactions=function(){var e,t,r=n.core,o=r.client,a=r.common,i=r.notifications,l=function(){a.is_socket_opened?e=(0,j.reaction)((function(){return o.loginid}),(function(e){e&&n.is_running&&i.addNotificationMessage(no),n.dbot.terminateBot(),n.unregisterBotListeners()})):"function"==typeof t&&t()};l(),t=(0,j.reaction)((function(){return a.is_socket_opened}),(function(){return l()}));var c=(0,j.reaction)((function(){return!n.is_running}),(function(){n.is_running||n.setContractStage(to.NOT_RUNNING)}));return function(){"function"==typeof e&&e(),"function"==typeof t&&t(),"function"==typeof c&&c()}},this.onBotRunningEvent=function(){n.setHasOpenContract(!0);var e=new Event("IgnorePWAUpdate");document.dispatchEvent(e);var t=n.root_store.self_exclusion;t.should_bot_run&&-1!==t.run_limit&&(t.run_limit-=1,t.run_limit<0&&n.onStopButtonClick())},this.onBotSellEvent=function(){n.is_sell_requested=!0},this.onBotStopEvent=function(){var e=n.root_store,t=e.self_exclusion,r=e.summary_card,o=n.core.ui,a=function(){n.error_type=void 0,n.setContractStage(to.NOT_RUNNING),o.setAccountSwitcherDisabledMessage(),n.unregisterBotListeners(),t.resetSelfExclusion()};if(n.error_type===p.ErrorTypes.RECOVERABLE_ERRORS){var i,l,c,s,u=null===(i=n.dbot)||void 0===i||null===(l=i.interpreter)||void 0===l||null===(c=l.bot)||void 0===c||null===(s=c.tradeEngine)||void 0===s?void 0:s.options;if(u){var f=u.shouldRestartOnError,d=u.timeMachineEnabled;f||d?(n.error_type=void 0,n.setContractStage(to.PURCHASE_SENT)):(n.setIsRunning(!1),a())}}else n.error_type===p.ErrorTypes.UNRECOVERABLE_ERRORS?(n.setIsRunning(!1),a()):n.has_open_contract&&(n.error_type=void 0,n.is_sell_requested=!1,n.setContractStage(to.CONTRACT_CLOSED),o.setAccountSwitcherDisabledMessage(),n.unregisterBotListeners(),t.resetSelfExclusion());n.setHasOpenContract(!1),r.clearContractUpdateConfigValues();var m=new Event("ListenPWAUpdate");document.dispatchEvent(m)},this.onBotReadyEvent=function(){n.setIsRunning(!1),p.observer.unregisterAll("bot.bot_ready")},this.onBotTradeAgain=function(e){e||n.stopBot()},this.onContractStatusEvent=function(e){switch(e.id){case"contract.purchase_sent":n.setContractStage(to.PURCHASE_SENT);break;case"contract.purchase_received":n.is_contracy_buying_in_progress=!1,n.setContractStage(to.PURCHASE_RECEIVED);var t=e.buy;!n.core.client.is_virtual&&t&&n.core.gtm.pushDataLayer({event:"dbot_purchase",buy_price:t.buy_price});break;case"contract.sold":n.is_sell_requested=!1,n.setContractStage(to.CONTRACT_CLOSED),e.contract&&Zt.onTransactionClosed(e.contract)}},this.onClickSell=function(){n.root_store.summary_card.is_multiplier&&n.setContractStage(to.IS_STOPPING),n.dbot.interpreter.bot.getInterface().sellAtMarket()},this.clear=function(){p.observer.emit("statistics.clear")},this.onBotContractEvent=function(e){null!=e&&e.is_sold&&(n.is_sell_requested=!1,n.setContractStage(to.CONTRACT_CLOSED))},this.onError=function(e){var t=e.error||e;p.unrecoverable_errors.includes(t.code)?(n.root_store.summary_card.clear(),n.error_type=p.ErrorTypes.UNRECOVERABLE_ERRORS):n.error_type=p.ErrorTypes.RECOVERABLE_ERRORS;var r=null==t?void 0:t.message;n.showErrorMessage(r)},this.showErrorMessage=function(e){var t,r=n.root_store.journal,o=n.core,a=o.notifications,i=o.ui;r.onError(e),r.journal_filters.some((function(e){return e===p.MessageTypes.ERROR}))?(n.toggleDrawer(!0),n.setActiveTabIndex(ro.JOURNAL),i.setPromptHandler(!1)):(a.addNotificationMessage((t=n.switchToJournal,{key:"bot_error",header:(0,_.localize)("The bot encountered an error while running."),action:{text:(0,_.localize)("View in Journal"),onClick:t},type:"danger",platform:z.platform_name.DBot,is_disposable:!0})),a.removeNotificationMessage({key:"bot_error"}))},this.switchToJournal=function(){var e=n.root_store.journal,t=n.core.notifications;e.journal_filters.push(p.MessageTypes.ERROR),n.setActiveTabIndex(ro.JOURNAL),n.toggleDrawer(!0),t.toggleNotificationsModal(),t.removeNotificationByKey({key:"bot_error"})},this.unregisterBotListeners=function(){p.observer.unregisterAll("bot.running"),p.observer.unregisterAll("bot.stop"),p.observer.unregisterAll("bot.click_stop"),p.observer.unregisterAll("bot.trade_again"),p.observer.unregisterAll("contract.status"),p.observer.unregisterAll("bot.contract"),p.observer.unregisterAll("Error")},this.setContractStage=function(e){n.contract_stage=e},this.setHasOpenContract=function(e){n.has_open_contract=e},this.setIsRunning=function(e){n.is_running=e},this.onMount=function(){var e=n.root_store.journal;p.observer.register("ui.log.error",n.showErrorMessage),p.observer.register("ui.log.notify",e.onNotify),p.observer.register("ui.log.success",e.onLogSuccess),p.observer.register("client.invalid_token",n.handleInvalidToken)},this.onUnmount=function(){var e=n.root_store,t=e.journal,r=e.summary_card,o=e.transactions;n.is_running||(n.unregisterBotListeners(),n.disposeReactionsFn(),t.disposeReactionsFn(),r.disposeReactionsFn(),o.disposeReactionsFn()),p.observer.unregisterAll("ui.log.error"),p.observer.unregisterAll("ui.log.notify"),p.observer.unregisterAll("ui.log.success"),p.observer.unregisterAll("client.invalid_token")},this.handleInvalidToken=co(io().mark((function e(){var t;return io().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.core.client,e.next=3,t.logout();case 3:n.setActiveTabIndex(ro.SUMMARY);case 4:case"end":return e.stop()}}),e)}))),this.preloadAudio=function(){n.dbot.getStrategySounds().forEach((function(e){var t=document.getElementById(e);t&&(t.muted=!0,t.play().catch((function(){})),t.pause(),t.muted=!1)}))},(0,j.makeObservable)(this,{active_index:j.observable,contract_stage:j.observable,dialog_options:j.observable,has_open_contract:j.observable,is_running:j.observable,is_statistics_info_modal_open:j.observable,is_drawer_open:j.observable,is_dialog_open:j.observable,is_sell_requested:j.observable,run_id:j.observable,error_type:j.observable,show_bot_stop_message:j.observable,is_stop_button_visible:j.computed,is_stop_button_disabled:j.computed,is_clear_stat_disabled:j.computed,toggleDrawer:j.action,onBotSellEvent:j.action,setContractStage:j.action,setHasOpenContract:j.action,setIsRunning:j.action,onRunButtonClick:j.action,is_contracy_buying_in_progress:j.observable,OpenPositionLimitExceededEvent:j.action,onStopButtonClick:j.action,onClearStatClick:j.action,clearStat:j.action,toggleStatisticsInfoModal:j.action,setActiveTabIndex:j.action,onCloseDialog:j.action,stopMyBot:j.action,closeMultiplierContract:j.action,showStopMultiplierContractDialog:j.action,showLoginDialog:j.action,showRealAccountDialog:j.action,showClearStatDialog:j.action,showIncompatibleStrategyDialog:j.action,showContractUpdateErrorDialog:j.action,registerBotListeners:j.action,registerReactions:j.action,onBotRunningEvent:j.action,onBotStopEvent:j.action,onBotReadyEvent:j.action,onBotTradeAgain:j.action,onContractStatusEvent:j.action,onClickSell:j.action,clear:j.action,onBotContractEvent:j.action,onError:j.action,showErrorMessage:j.action,switchToJournal:j.action,unregisterBotListeners:j.action,handleInvalidToken:j.action,preloadAudio:j.action,onMount:j.action,onUnmount:j.action}),this.root_store=t,this.dbot=this.root_store.dbot,this.core=r,this.disposeReactionsFn=this.registerReactions(),this.timer=null},(t=[{key:"is_stop_button_visible",get:function(){return this.is_running||this.has_open_contract}},{key:"is_stop_button_disabled",get:function(){return!this.is_contracy_buying_in_progress&&[to.PURCHASE_SENT,to.IS_STOPPING].includes(this.contract_stage)}},{key:"is_clear_stat_disabled",get:function(){var e,t=this.root_store,r=t.journal,n=t.transactions;return this.is_running||this.has_open_contract||0===r.unfiltered_messages.length&&0===(null==n||null===(e=n.transactions)||void 0===e?void 0:e.length)}}])&&so(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),po=r(3917),mo=r.n(po);function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function yo(){yo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==ho(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ho(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function vo(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function _o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){vo(a,n,o,i,l,"next",e)}function l(e){vo(a,n,o,i,l,"throw",e)}i(void 0)}))}}function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Eo(n.key),n)}}function go(e,t,r){return t&&bo(e.prototype,t),r&&bo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eo(e){var t=function(e){if("object"!=ho(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ho(t)?t:t+""}var wo=go((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_save_modal_open=!1,this.button_status=or.NORMAL,this.bot_name="",this.toggleSaveModal=function(){r.is_save_modal_open||r.setButtonStatus(or.NORMAL),r.is_save_modal_open=!r.is_save_modal_open},this.validateBotName=function(e){var t={};return""===e.bot_name.trim()&&(t.bot_name=(0,_.localize)("Strategy name cannot be empty")),t},this.addStrategyToWorkspace=function(){var e=_o(yo().mark((function e(t,n,o,a,i){var l,c,s,u,f,d,m,h,y,v,_,b;return yo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.getSavedWorkspaces)();case 3:return c=e.sent,s=c.findIndex((function(e){return e.id===t})),u=r.root_store.load_modal.getSaveType,f=n?p.save_types.LOCAL:p.save_types.GOOGLE_DRIVE,d=o?p.save_types.UNSAVED:f,m=null===(l=u(d))||void 0===l?void 0:l.toLowerCase(),h={id:t,xml:window.Blockly.Xml.domToText(i),name:a,timestamp:Date.now(),save_type:m},s>=0?(y=h,c[s]=y):c.push(h),c.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)})).reverse(),c.length>10&&c.pop(),v=r.root_store.load_modal,_=v.setRecentStrategies,mo().setItem("saved_workspaces",dn().compress(JSON.stringify(c))),e.next=19,(0,p.getSavedWorkspaces)();case 19:b=e.sent,_(b),(0,r.root_store.dashboard.setStrategySaveType)(m),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),p.observer.emit("Error",e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),this.onConfirmSave=function(){var e=_o(yo().mark((function e(t){var n,o,a,i,l,c,s,u,f,d,m,h,y,v,_,b,g,E,w,k,x,S,O,T;return yo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.is_local,o=t.save_as_collection,a=t.bot_name,i=r.root_store,l=i.load_modal,c=i.dashboard,s=i.google_drive,u=l.loadStrategyToBuilder,f=l.selected_strategy,d=c.active_tab,r.setButtonStatus(or.LOADING),m=s.saveFile,y=null,1!==d){e.next=11;break}h=null===(v=window.Blockly)||void 0===v||null===(_=v.Xml)||void 0===_?void 0:_.workspaceToDom(null===(b=window.Blockly)||void 0===b?void 0:b.derivWorkspace),e.next=18;break;case 11:return e.next=13,(0,p.getSavedWorkspaces)();case 13:E=e.sent,(y=null===(g=E.filter((function(e){return e.id===f.id})))||void 0===g?void 0:g[0]).name=a,y.save_type=n?p.save_types.LOCAL:p.save_types.GOOGLE_DRIVE,h=window.Blockly.utils.xml.textToDom(y.xml);case 18:if(h.setAttribute("is_dbot","true"),h.setAttribute("collection",o?"true":"false"),!n){e.next=24;break}(0,p.save)(a,o,h),e.next=27;break;case 24:return e.next=26,m({name:a,content:null===(w=window.Blockly)||void 0===w||null===(k=w.Xml)||void 0===k?void 0:k.domToPrettyText(h),mimeType:"application/xml"});case 26:r.setButtonStatus(or.COMPLETED);case 27:if(r.updateBotName(a),0!==d){e.next=37;break}return T=null!==(x=f.id)&&void 0!==x?x:null===(S=window.Blockly)||void 0===S||null===(O=S.utils)||void 0===O?void 0:O.genUid(),e.next=32,r.addStrategyToWorkspace(T,n,o,a,h);case 32:if(!y){e.next=35;break}return e.next=35,u(y);case 35:e.next=39;break;case 37:return e.next=39,(0,p.saveWorkspaceToRecent)(h,n?p.save_types.LOCAL:p.save_types.GOOGLE_DRIVE);case 39:r.toggleSaveModal();case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateBotName=function(e){r.bot_name=e},this.setButtonStatus=function(e){r.button_status=e},(0,j.makeObservable)(this,{is_save_modal_open:j.observable,button_status:j.observable,bot_name:j.observable,toggleSaveModal:j.action.bound,validateBotName:j.action.bound,onConfirmSave:j.action.bound,updateBotName:j.action.bound,setButtonStatus:j.action.bound}),this.root_store=t}));function ko(e){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}function xo(){xo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==ko(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ko(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function So(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,To(n.key),n)}}function To(e){var t=function(e){if("object"!=ko(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ko(t)?t:t+""}var Lo=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.api_max_losses=0,this.run_limit=-1,this.is_restricted=!1,this.form_max_losses=void 0,(0,j.makeObservable)(this,{api_max_losses:j.observable,run_limit:j.observable,is_restricted:j.observable,initial_values:j.computed,should_bot_run:j.computed,setIsRestricted:j.action.bound,setApiMaxLosses:j.action.bound,setRunLimit:j.action.bound,resetSelfExclusion:j.action.bound,checkRestriction:j.action.bound}),this.root_store=t,this.core=r},t=[{key:"initial_values",get:function(){return{form_max_losses:this.api_max_losses||"",run_limit:-1!==this.run_limit?this.run_limit:""}}},{key:"should_bot_run",get:function(){var e=this.core.client;return!(e.is_eu&&!e.is_virtual&&(0===this.api_max_losses||-1===this.run_limit))}},{key:"setIsRestricted",value:function(e){this.is_restricted=e}},{key:"setApiMaxLosses",value:function(e){this.api_max_losses=e}},{key:"setRunLimit",value:function(e){this.run_limit=e}},{key:"resetSelfExclusion",value:function(){this.is_restricted=!1,this.api_max_losses=0,this.form_max_losses=0,this.run_limit=-1}},{key:"checkRestriction",value:(r=xo().mark((function e(){var t;return xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.core.client,e.next=3,t.getSelfExclusion();case 3:t.self_exclusion.max_losses&&this.setApiMaxLosses(t.self_exclusion.max_losses);case 4:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){So(a,n,o,i,l,"next",e)}function l(e){So(a,n,o,i,l,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})}],t&&Oo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n}();function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Co(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ao(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ao(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Po=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?No(Object(r),!0).forEach((function(t){Co(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):No(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function(e){return{ACCU:{name:(0,_.localize)("Accumulators"),position:"top"},ASIANU:{name:(0,_.localize)("Asian Up"),position:"top"},ASIAND:{name:(0,_.localize)("Asian Down"),position:"bottom"},CALL:{name:e?(0,_.localize)("Higher"):(0,_.localize)("Rise"),position:"top"},PUT:{name:e?(0,_.localize)("Lower"):(0,_.localize)("Fall"),position:"bottom"},CALLE:{name:(0,_.localize)("Rise"),position:"top"},PUTE:{name:(0,_.localize)("Fall"),position:"bottom"},CALLSPREAD:{name:(0,_.localize)("Spread Up"),position:"top"},PUTSPREAD:{name:(0,_.localize)("Spread Down"),position:"bottom"},DIGITMATCH:{name:(0,_.localize)("Matches"),position:"top"},DIGITDIFF:{name:(0,_.localize)("Differs"),position:"bottom"},DIGITEVEN:{name:(0,_.localize)("Even"),position:"top"},DIGITODD:{name:(0,_.localize)("Odd"),position:"bottom"},DIGITOVER:{name:(0,_.localize)("Over"),position:"top"},DIGITUNDER:{name:(0,_.localize)("Under"),position:"bottom"},EXPIRYMISS:{name:(0,_.localize)("Ends Outside"),position:"top"},EXPIRYRANGE:{name:(0,_.localize)("Ends Between"),position:"bottom"},LBFLOATCALL:{name:(0,_.localize)("Close-to-Low"),position:"top"},LBFLOATPUT:{name:(0,_.localize)("High-to-Close"),position:"top"},LBHIGHLOW:{name:(0,_.localize)("High-to-Low"),position:"top"},MULTUP:{name:(0,_.localize)("Up"),position:"top"},MULTDOWN:{name:(0,_.localize)("Down"),position:"bottom"},ONETOUCH:{name:(0,_.localize)("Touch"),position:"top"},NOTOUCH:{name:(0,_.localize)("No Touch"),position:"bottom"},RANGE:{name:(0,_.localize)("Stays Between"),position:"top"},UPORDOWN:{name:(0,_.localize)("Goes Outside"),position:"bottom"},RESETCALL:{name:(0,_.localize)("Reset Call"),position:"top"},RESETPUT:{name:(0,_.localize)("Reset Put"),position:"bottom"},RUNHIGH:{name:(0,_.localize)("Only Ups"),position:"top"},RUNLOW:{name:(0,_.localize)("Only Downs"),position:"bottom"},TICKHIGH:{name:(0,_.localize)("High Tick"),position:"top"},TICKLOW:{name:(0,_.localize)("Low Tick"),position:"bottom"}}}(e))},Io=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Po(t)[e]?Po(t)[e.toUpperCase()].name:""},jo=function(e){var t=(0,z.getLimitOrderAmount)(e),r=t.stop_loss,n=t.take_profit;return{contract_update_stop_loss:r?Math.abs(r).toString():"",contract_update_take_profit:n?n.toString():"",has_contract_update_stop_loss:!!r,has_contract_update_take_profit:!!n}};function zo(e){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(e)}function Ro(e,t,r){return(t=Bo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Do(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bo(n.key),n)}}function Bo(e){var t=function(e){if("object"!=zo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zo(t)?t:t+""}var Mo=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.disposeReactionsFn=void 0,this.disposeSwitchAcountListener=void 0,this.contract_info=null,this.is_loading=!1,this.indicative_movement="",this.profit_movement="",this.validation_errors={},this.validation_rules={has_contract_update_stop_loss:{trigger:"contract_update_stop_loss"},has_contract_update_take_profit:{trigger:"contract_update_take_profit"},contract_update_stop_loss:{rules:[["req",{condition:function(e){return!e.contract_update_stop_loss},message:(0,_.localize)("Please enter a stop loss amount.")}],["custom",{func:function(e,t,r){var n=(0,z.getTotalProfit)(r.contract_info);return!(n<0&&-e>n)},message:(0,_.localize)("Please enter a stop loss amount that's higher than the current potential loss.")}],["custom",{func:function(e,t,r){var n;return e<((null==r||null===(n=r.contract_info)||void 0===n?void 0:n.buy_price)||0)+1},message:(0,_.localize)("Invalid stop loss. Stop loss cannot be more than stake.")}]]},contract_update_take_profit:{rules:[["req",{condition:function(e){return!e.contract_update_take_profit},message:(0,_.localize)("Please enter a take profit amount.")}],["custom",{func:function(e,t,r){var n=(0,z.getTotalProfit)(r.contract_info);return!(n>0&&+e<n)},message:(0,_.localize)("Please enter a take profit amount that's higher than the current potential profit.")}]]}},this.contract_update_take_profit=null,this.contract_update_stop_loss=null,this.has_contract_update_take_profit=!1,this.has_contract_update_stop_loss=!1,this.contract_update_config={},this.profit_loss=0,this.contract_id=null,this.profit=0,this.indicative=0,this.is_bot_running=!1,(0,j.makeObservable)(this,{contract_info:j.observable,indicative_movement:j.observable,profit_movement:j.observable,validation_errors:j.observable,validation_rules:j.observable,contract_update_take_profit:j.observable,contract_update_stop_loss:j.observable,has_contract_update_take_profit:j.observable,has_contract_update_stop_loss:j.observable,is_bot_running:j.observable,contract_update_config:j.observable,contract_id:j.observable,profit:j.observable,indicative:j.observable,is_contract_completed:j.computed,is_contract_loading:j.computed,is_contract_inactive:j.computed,is_multiplier:j.computed,clear:j.action.bound,clearContractUpdateConfigValues:j.action.bound,getLimitOrder:j.action.bound,onBotContractEvent:j.action.bound,onChange:j.action.bound,populateContractUpdateConfig:j.action.bound,setContractUpdateConfig:j.action.bound,setIsBotRunning:j.action.bound,updateLimitOrder:j.action.bound,setValidationErrorMessages:j.action,validateProperty:j.action,registerReactions:j.action.bound}),this.root_store=t,this.core=r,this.disposeReactionsFn=this.registerReactions()},t=[{key:"is_contract_completed",get:function(){var e;return!(null===(e=this.contract_info)||void 0===e||!e.is_sold)&&this.root_store.run_panel.contract_stage!==to.PURCHASE_RECEIVED}},{key:"is_contract_loading",get:function(){return this.root_store.run_panel.is_running&&null===this.contract_info||this.root_store.run_panel.contract_stage===to.PURCHASE_SENT||this.root_store.run_panel.contract_stage===to.STARTING}},{key:"is_contract_inactive",get:function(){return!this.contract_info&&!this.is_loading}},{key:"is_multiplier",get:function(){var e;return(0,z.isMultiplierContract)(null===(e=this.contract_info)||void 0===e?void 0:e.contract_type)}},{key:"is_accumulator",get:function(){var e;return(0,z.isAccumulatorContract)(null===(e=this.contract_info)||void 0===e?void 0:e.contract_type)}},{key:"clear",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.contract_info=null),this.profit=0,this.profit_loss=0,this.indicative=0,this.indicative_movement="",this.profit_movement=""}},{key:"clearContractUpdateConfigValues",value:function(){if(this.contract_info){var e=jo(this.contract_info.limit_order),t=e.contract_update_stop_loss,r=e.contract_update_take_profit,n=e.has_contract_update_stop_loss,o=e.has_contract_update_take_profit;this.contract_update_stop_loss=t,this.contract_update_take_profit=r,this.has_contract_update_stop_loss=n,this.has_contract_update_take_profit=o}}},{key:"getLimitOrder",value:function(){var e,t,r={};return r.take_profit=this.has_contract_update_take_profit?+(null!==(e=this.contract_update_take_profit)&&void 0!==e?e:0):0,r.stop_loss=this.has_contract_update_stop_loss?+(null!==(t=this.contract_update_stop_loss)&&void 0!==t?t:0):0,r}},{key:"onBotContractEvent",value:function(e){var t=this,r=e.profit,n=(0,z.getIndicativePrice)(e);this.profit=r,this.contract_id!==e.id&&(this.clear(!1),this.contract_id=e.id,this.indicative=n);var o={profit:r,indicative:n};Object.keys(o).forEach((function(e){var r=o[e],n=t[e];e in t&&r&&r!==n?t["".concat(e,"_movement")]=r&&r>(t[e]||0)?"profit":"loss":""!==t["".concat(e,"_movement")]&&(t.indicative_movement=""),"profit"===e&&(t.profit_loss=r),"indicative"===e&&(t.indicative=r)})),this.contract_info=e}},{key:"onChange",value:function(e){var t=e.name,r=e.value;this[t]=r,this.validateProperty(t,r)}},{key:"populateContractUpdateConfig",value:function(e){var t=jo(null==e?void 0:e.contract_update);if(!(0,z.isEqualObject)(this.contract_update_config,t)){Object.assign(this,t),this.contract_update_config=t;var r,n=e.contract_update,o=e.error;this.contract_info&&n&&!o&&(this.contract_info.limit_order=Object.assign((null===(r=this.contract_info)||void 0===r?void 0:r.limit_order)||{},n))}}},{key:"setContractUpdateConfig",value:function(e,t){e&&t&&(this.has_contract_update_take_profit=!!e,this.has_contract_update_stop_loss=!!t,this.contract_update_take_profit=this.has_contract_update_take_profit?+e:null,this.contract_update_stop_loss=this.has_contract_update_stop_loss?+t:null)}},{key:"setIsBotRunning",value:function(){var e=this;if(this.is_contract_loading){var t=setTimeout((function(){e.is_contract_loading&&(e.is_bot_running=!0,e.root_store.run_panel.setContractStage(to.RUNNING))}),5e3);return function(){return clearTimeout(t)}}this.is_bot_running=!1}},{key:"updateLimitOrder",value:function(){var e,t,r=this,n=this.getLimitOrder();null!==(e=this.contract_info)&&void 0!==e&&e.contract_id&&this.root_store.ws.contractUpdate(null===(t=this.contract_info)||void 0===t?void 0:t.contract_id,n).then((function(e){e.error?r.root_store.run_panel.showContractUpdateErrorDialog(e.error.message):r.populateContractUpdateConfig(e)}))}},{key:"setValidationErrorMessages",value:function(e,t){var r=this;this.validation_errors[e]&&!r.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!r.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"validateProperty",value:function(e,t){var r=this,n=this.validation_rules[e].trigger,o=Ro({},e,void 0!==t?t:this[e]),a=Ro({},e,this.validation_rules[e].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(o[n]=this[n],a[n]=this.validation_rules[n].rules||[]);var i=new z.Validator(o,a,this);i.isPassed(),Object.keys(o).forEach((function(e){r.setValidationErrorMessages(e,i.errors.get(e))}))}},{key:"registerReactions",value:function(){var e=this,t=this.core.client;return this.disposeSwitchAcountListener=(0,j.reaction)((function(){return t.loginid}),(function(){return e.clear()})),function(){"function"==typeof e.disposeSwitchAcountListener&&e.disposeSwitchAcountListener()}}}],t&&Do(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Fo(){Fo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Uo(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Uo(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Go(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function qo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Go(a,n,o,i,l,"next",e)}function l(e){Go(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ho(n.key),n)}}function Yo(e,t,r){return t&&Vo(e.prototype,t),r&&Vo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ho(e){var t=function(e){if("object"!=Uo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Uo(t)?t:t+""}var Wo=Yo((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_animation_info_modal_open=!1,this.is_dialog_open=!1,this.file_name=p.config.default_file_name,this.has_undo_stack=!1,this.has_redo_stack=!1,this.is_reset_button_clicked=!1,this.setResetButtonState=function(e){r.is_reset_button_clicked=e},this.onResetClick=function(){r.is_dialog_open=!0},this.closeResetDialog=function(){r.is_dialog_open=!1},this.onResetOkButtonClick=function(){r.setResetButtonState(!0),(0,p.runGroupedEvents)(!1,(function(){r.resetDefaultStrategy()}),"reset"),r.is_dialog_open=!1},this.resetDefaultStrategy=qo(Fo().mark((function e(){var t,r,n,o,a;return Fo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=window.Blockly.derivWorkspace).current_strategy_id=null===(t=window)||void 0===t||null===(r=t.Blockly)||void 0===r||null===(n=r.utils)||void 0===n||null===(o=n.idGenerator)||void 0===o?void 0:o.genUid(),e.next=4,(0,p.load)({block_string:a.cached_xml.main,file_name:p.config.default_file_name,workspace:a,drop_event:null,strategy_id:null,from:null,showIncompatibleStrategyDialog:null});case 4:a.strategy_to_load=a.cached_xml.main;case 5:case"end":return e.stop()}}),e)}))),this.onSortClick=function(){var e=p.config.workspaces.indentWorkspace,t=e.x,r=e.y;window.Blockly.derivWorkspace.cleanUp(t,r)},this.onUndoClick=function(e){window.Blockly.Events.setGroup("undo_clicked"),window.Blockly.derivWorkspace.undo(e),window.Blockly.svgResize(window.Blockly.derivWorkspace),r.setHasRedoStack(),r.setHasUndoStack(),window.Blockly.Events.setGroup(!1)},this.onZoomInOutClick=function(e){var t=window.Blockly.derivWorkspace,r=t.getMetrics(),n=e?1:-1;t.zoom(r.viewWidth/2,r.viewHeight/2,n)},this.setHasUndoStack=function(){var e,t;r.has_undo_stack=(null===(e=window.Blockly.derivWorkspace)||void 0===e||null===(t=e.undoStack_)||void 0===t?void 0:t.length)>0},this.setHasRedoStack=function(){var e,t;r.has_redo_stack=(null===(e=window.Blockly.derivWorkspace)||void 0===e||null===(t=e.redoStack_)||void 0===t?void 0:t.length)>0},(0,j.makeObservable)(this,{is_animation_info_modal_open:j.observable,is_dialog_open:j.observable,file_name:j.observable,has_undo_stack:j.observable,has_redo_stack:j.observable,is_reset_button_clicked:j.observable,onResetClick:j.action.bound,closeResetDialog:j.action.bound,onResetOkButtonClick:j.action.bound,onUndoClick:j.action.bound,resetDefaultStrategy:j.action.bound,setHasUndoStack:j.action.bound,setHasRedoStack:j.action.bound}),this.root_store=t}));function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function $o(e){return function(e){if(Array.isArray(e))return Xo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jo(n.key),n)}}function Jo(e){var t=function(e){if("object"!=Ko(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ko(t)?t:t+""}var Zo=function(){return e=function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.disposeToolboxToggleReaction=void 0,this.typing_timer=void 0,this.is_toolbox_open=!0,this.is_search_loading=!1,this.is_search_focus=!1,this.sub_category_index=[],this.toolbox_dom=void 0,this.toolbox_examples=void 0,this.is_workspace_scroll_adjusted=!1,this.onMount=function(e){var t,r;n.adjustWorkspace(),n.toolbox_dom=window.Blockly.utils.xml.textToDom(null==e?void 0:e.current);var o=$o(null!==(t=null===(r=n.toolbox_dom)||void 0===r?void 0:r.childNodes)&&void 0!==t?t:[]).find((function(e){return e instanceof HTMLElement&&"examples"===e.tagName}));o&&(n.toolbox_examples=o),n.setWorkspaceOptions(),n.disposeToolboxToggleReaction=(0,j.reaction)((function(){return n.is_toolbox_open}),(function(e){e&&n.core.gtm.pushDataLayer({event:"dbot_toolbox_visible",value:!0})}))},this.getCategoryContents=function(e){var t=window.Blockly.derivWorkspace,r=e.getAttribute("dynamic"),n=Array.from(e.childNodes);if("string"==typeof r){var o=t.getToolboxCategoryCallback(r);"VARIABLE"===r&&(o=Blockly.DataCategory),n=o(t)}return n},this.getAllCategories=function(){var e=[];return Array.from(n.toolbox_dom.childNodes).forEach((function(t){e.push(t),n.hasSubCategory(t.children)&&Array.from(t.children).forEach((function(t){e.push(t)}))})),e},this.hasSubCategory=function(e){return!!Object.keys(e).filter((function(t){if("CATEGORY"===e[Number(t)].tagName.toUpperCase())return e[Number(t)]})).length},this.onSearch=function(e){var t=e.search,r=void 0===t?"":t;n.is_search_focus=!0,n.showSearch(r)},this.showSearch=function(e){var t=window.Blockly.derivWorkspace,r=[],o=e.replace(/\s+/g," ").trim().toUpperCase(),a=o.split(" "),i=t.getVariablesOfType(""),l=window.Blockly.Procedures.allProcedures(t),c=n.root_store.flyout;c.setVisibility(!1);var s=[(0,_.localize)("THE"),(0,_.localize)("OF"),(0,_.localize)("YOU"),(0,_.localize)("IS"),(0,_.localize)("THIS"),(0,_.localize)("THEN"),(0,_.localize)("A"),(0,_.localize)("AN")];if(0!==o.length){if(o.length<=1||a.every((function(e){return s.includes(e)})))return c.setIsSearchFlyout(!0),void c.setContents(r,e);var u=n.getAllCategories().filter((function(e){return!n.hasSubCategory(e.children)})).map((function(e){var t=n.getCategoryContents(e);return Array.from(t).filter((function(e){return"BLOCK"===e.tagName.toUpperCase()}))})).flat(),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.some((function(e){return e===t}))||e.push(t)};["exact_block_name","match_words","block_term","block_definitions","block_meta"].forEach((function(e){return function(e){u.forEach((function(t){var n=t.getAttribute("type"),i=window.Blockly.Blocks[n],l=i.meta instanceof Function&&i.meta(),c=i.definition instanceof Function&&i.definition(),s=l.display_name,u=n.toUpperCase().split("_"),d=s.toUpperCase().split(" "),p=/^((message)|(tooltip)|(category))/;switch(e){case"exact_block_name":o!==s.toUpperCase()&&o!==n.toUpperCase()||f(r,t);break;case"match_words":(a.every((function(e){return d.some((function(t){return t.includes(e)}))}))||a.every((function(e){return u.some((function(t){return t.includes(e)}))})))&&f(r,t);break;case"block_term":(u.some((function(e){return a.some((function(t){return e.includes(t)}))}))||d.some((function(e){return a.some((function(t){return e.includes(t)}))})))&&f(r,t);break;case"block_definitions":Object.keys(c).forEach((function(e){var n=c[e];p.test(e)&&a.some((function(e){return n.includes(e)}))&&f(r,t),n instanceof Array&&n.forEach((function(e){var n=JSON.stringify(e).toUpperCase();"field_dropdown"===e.type&&o.length>2&&a.some((function(e){return n.includes(e)}))&&f(r,t)}))}));break;case"block_meta":var m=Object.keys(l).filter((function(e){return"display_name"!==e})).find((function(e){var t=l[e].toUpperCase().replace(/[^\w\s]/gi,"").split(" ");return a.some((function(e){return t.some((function(t){return t.includes(e)}))}))}));m&&m.length&&f(r,t)}}))}(e)}));var d=i.filter((function(e){return e.name.toUpperCase().includes(o)})),p=Blockly.DataCategory.search(d).filter((function(e){return-1===r.indexOf(e)}));p&&p.length&&r.unshift.apply(r,$o(p));var m={0:[],1:[]},h=l[0],y=l[1];Object.keys(h).forEach((function(e){var t=h[e];t[0].toUpperCase().includes(o)&&m[0].unshift(t)})),Object.keys(y).forEach((function(e){var t=y[e];t[0].toUpperCase().includes(o)&&m[1].unshift(t)}));var v=Blockly.Procedures.populateDynamicProcedures(m).filter((function(e){return-1===r.indexOf(e)}));v.length&&r.unshift.apply(r,$o(v)),c.setIsSearchFlyout(!0),c.setContents(r,e)}},(0,j.makeObservable)(this,{is_toolbox_open:j.observable,is_search_loading:j.observable,is_search_focus:j.observable,sub_category_index:j.observable,toolbox_dom:j.observable,toolbox_examples:j.observable,onMount:j.action.bound,onUnmount:j.action.bound,setWorkspaceOptions:j.action.bound,adjustWorkspace:j.action.bound,toggleDrawer:j.action.bound,onToolboxItemClick:j.action.bound,onToolboxItemExpand:j.action.bound,getCategoryContents:j.action.bound,getAllCategories:j.action.bound,hasSubCategory:j.action.bound,onSearch:j.action.bound,onSearchBlur:j.action.bound,onSearchClear:j.action.bound,onSearchKeyUp:j.action.bound,showSearch:j.action.bound}),this.root_store=t,this.core=r},t=[{key:"onUnmount",value:function(){"function"==typeof this.disposeToolboxToggleReaction&&this.disposeToolboxToggleReaction()}},{key:"setWorkspaceOptions",value:function(){var e,t,r,n,o,a=window.Blockly.derivWorkspace;a.options.readOnly?(e=null,t=!1,r=!1,n=!1,o=!1):(e=this.toolbox_dom,r=t=Boolean(e&&e.getElementsByTagName("category").length),n=t,o=t),a.options.collapse=r,a.options.comments=n,a.options.disable=o,a.options.hasCategories=t,a.options.languageTree=e}},{key:"adjustWorkspace",value:function(){var e=this,t=this.root_store.load_modal.is_load_modal_open,r=t?window.Blockly.getMainWorkspace():window.Blockly.derivWorkspace;if(this.is_workspace_scroll_adjusted||t){if(t&&null!=r&&r.RTL){var n,o=r.getMetrics(),a=o.scrollWidth+o.viewLeft-o.viewWidth;null==r||null===(n=r.scrollbar)||void 0===n||n.set(a,380)}}else this.is_workspace_scroll_adjusted=!0,setTimeout((function(){var t,n,o=(null===(t=document.getElementById("gtm-toolbox"))||void 0===t?void 0:t.getBoundingClientRect().width)||0,a=null===(n=r.svgBlockCanvas_)||void 0===n?void 0:n.getBoundingClientRect();if(r.RTL&&a){var i=e.core.ui.is_mobile,l=i?a.right:a.left,c=o-l+20,s=o-l+36,u=e.core.ui.is_mobile?c:s;(Math.round(l)<=o||i)&&(0,p.scrollWorkspace)(r,u,!0,!1)}else if(Math.round(null==a?void 0:a.left)<=o){var f=e.core.ui.is_mobile?o-a.left+50:o-a.left+36;(0,p.scrollWorkspace)(r,f,!0,!1)}e.is_workspace_scroll_adjusted=!1}),300)}},{key:"toggleDrawer",value:function(){this.is_toolbox_open=!this.is_toolbox_open}},{key:"onToolboxItemClick",value:function(e){var t,r=this.root_store.flyout,n=e.getAttribute("id"),o=this.getCategoryContents(e);r.setIsSearchFlyout(!1),(null===(t=r.selected_category)||void 0===t?void 0:t.getAttribute("id"))===n?r.setVisibility(!1):(r.setSelectedCategory(e),r.setContents(o))}},{key:"onToolboxItemExpand",value:function(e){if(this.sub_category_index.includes(e)){var t=this.sub_category_index.filter((function(t){return t!==e}));this.sub_category_index=t}else this.sub_category_index=[].concat($o(this.sub_category_index),[e])}},{key:"onSearchBlur",value:function(){this.is_search_focus=!1}},{key:"onSearchClear",value:function(e){e("search",""),this.showSearch("")}},{key:"onSearchKeyUp",value:function(e){var t=this;this.is_search_loading=!0,clearTimeout(this.typing_timer),this.typing_timer=setTimeout((0,j.action)((function(){e(),t.is_search_loading=!1})),1e3)}}],t&&Qo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),ea=Object.freeze({CONTRACT:"contract",DIVIDER:"divider"});function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach((function(t){oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oa(e,t,r){return(t=la(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aa(e){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(e)}function ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,la(n.key),n)}}function la(e){var t=function(e){if("object"!=aa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==aa(t)?t:t+""}var ca=function(){return e=function e(t,r){var n,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.disposeReactionsFn=void 0,this.TRANSACTION_CACHE="transaction_cache",this.elements=pn(this.TRANSACTION_CACHE,null===(n=this.core)||void 0===n||null===(o=n.client)||void 0===o?void 0:o.loginid,[]),this.active_transaction_id=null,this.recovered_completed_transactions=[],this.recovered_transactions=[],this.is_called_proposal_open_contract=!1,this.is_transaction_details_modal_open=!1,this.toggleTransactionDetailsModal=function(e){a.is_transaction_details_modal_open=e},this.root_store=t,this.core=r,this.is_transaction_details_modal_open=!1,this.disposeReactionsFn=this.registerReactions(),(0,j.makeObservable)(this,{elements:j.observable,active_transaction_id:j.observable,recovered_completed_transactions:j.observable,recovered_transactions:j.observable,is_called_proposal_open_contract:j.observable,is_transaction_details_modal_open:j.observable,transactions:j.computed,onBotContractEvent:j.action.bound,pushTransaction:j.action.bound,clear:j.action.bound,registerReactions:j.action.bound,recoverPendingContracts:j.action.bound,updateResultsCompletedContract:j.action.bound,sortOutPositionsBeforeAction:j.action.bound,recoverPendingContractsById:j.action.bound})},t=[{key:"transactions",get:function(){var e,t,r,n,o;return null!==(e=this.core)&&void 0!==e&&null!==(t=e.client)&&void 0!==t&&t.loginid&&null!==(r=this.elements[null===(n=this.core)||void 0===n||null===(o=n.client)||void 0===o?void 0:o.loginid])&&void 0!==r?r:[]}},{key:"statistics",get:function(){var e=0,t=this.transactions.filter((function(e){return e.type===ea.CONTRACT&&"object"===aa(e.data)})).reduce((function(t,r){var n,o=r.data,a=o.profit,i=void 0===a?0:a,l=o.is_completed,c=void 0!==l&&l,s=o.payout,u=o.buy_price,f=void 0===u?0:u,d=o.bid_price;return c&&(i>0?(t.won_contracts+=1,t.total_payout+=null!==(n=null!=s?s:d)&&void 0!==n?n:0):t.lost_contracts+=1,t.total_profit+=i,t.total_stake+=f,e+=1),t}),{lost_contracts:0,number_of_runs:0,total_profit:0,total_payout:0,total_stake:0,won_contracts:0});return t.number_of_runs=e,t}},{key:"onBotContractEvent",value:function(e){this.pushTransaction(e)}},{key:"pushTransaction",value:function(e){var t,r,n,o=(0,z.isEnded)(e),a=this.root_store.run_panel.run_id,i=null===(t=this.core)||void 0===t||null===(r=t.client)||void 0===r?void 0:r.loginid,l=na(na({},e),{},{is_completed:o,run_id:a,date_start:(0,z.formatDate)(e.date_start,"YYYY-M-D HH:mm:ss [GMT]"),entry_tick:e.entry_tick_display_value,entry_tick_time:e.entry_tick_time&&(0,z.formatDate)(e.entry_tick_time,"YYYY-M-D HH:mm:ss [GMT]"),exit_tick:e.exit_tick_display_value,exit_tick_time:e.exit_tick_time&&(0,z.formatDate)(e.exit_tick_time,"YYYY-M-D HH:mm:ss [GMT]"),profit:o?e.profit:0});this.elements[i]||(this.elements=na(na({},this.elements),{},oa({},i,[])));var c=null===(n=this.elements[i])||void 0===n?void 0:n.findIndex((function(t){var r,n;return"string"!=typeof t.data&&t.type===ea.CONTRACT&&(null===(r=t.data)||void 0===r?void 0:r.transaction_ids)&&t.data.transaction_ids.buy===(null===(n=e.transaction_ids)||void 0===n?void 0:n.buy)}));if(-1===c){var s,u;if((null===(s=this.elements[i])||void 0===s?void 0:s.length)>0){var f,d,p,m=null===(f=this.elements[i])||void 0===f?void 0:f[0];m.type===ea.CONTRACT&&"object"===aa(m.data)&&l.run_id!==(null==m||null===(d=m.data)||void 0===d?void 0:d.run_id)&&(null===(p=this.elements[i])||void 0===p||p.unshift({type:ea.DIVIDER,data:l.run_id}))}null===(u=this.elements[i])||void 0===u||u.unshift({type:ea.CONTRACT,data:l})}else{var h;null===(h=this.elements[i])||void 0===h||h.splice(c,1,{type:ea.CONTRACT,data:l})}this.elements=na({},this.elements)}},{key:"clear",value:function(){var e,t,r,n;this.elements[null===(e=this.core)||void 0===e||null===(t=e.client)||void 0===t?void 0:t.loginid]=[],this.recovered_completed_transactions=null===(r=this.recovered_completed_transactions)||void 0===r?void 0:r.slice(0,0),this.recovered_transactions=null===(n=this.recovered_transactions)||void 0===n?void 0:n.slice(0,0),this.is_transaction_details_modal_open=!1}},{key:"registerReactions",value:function(){var e=this,t=this.core.client,r=(0,j.reaction)((function(){return e.elements[null==t?void 0:t.loginid]}),(function(r){var n,o=mn(e.TRANSACTION_CACHE,{});o[t.loginid]=null!==(n=null==r?void 0:r.slice(0,5e3))&&void 0!==n?n:[],hn(e.TRANSACTION_CACHE,o)})),n=(0,j.reaction)((function(){return e.transactions.length}),(function(){return e.recoverPendingContracts()}));return function(){r(),n()}}},{key:"recoverPendingContracts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.transactions.forEach((function(r){var n=r.data;"string"==typeof n||null!=n&&n.is_completed||null==n||!n.contract_id||e.recovered_transactions.includes(null==n?void 0:n.contract_id)||e.recoverPendingContractsById(n.contract_id,t)}))}},{key:"updateResultsCompletedContract",value:function(e){var t=this.root_store,r=t.journal,n=t.summary_card.contract_info,o=e.currency,a=e.profit;e.contract_id!==(null==n?void 0:n.contract_id)&&(this.onBotContractEvent(e),e.contract_id&&!this.recovered_transactions.includes(e.contract_id)&&this.recovered_transactions.push(e.contract_id),e.contract_id&&!this.recovered_completed_transactions.includes(e.contract_id)&&(0,z.isEnded)(e)&&(this.recovered_completed_transactions.push(e.contract_id),r.onLogSuccess({log_type:a&&a>0?p.LogTypes.PROFIT:p.LogTypes.LOST,extra:{currency:o,profit:a}})))}},{key:"sortOutPositionsBeforeAction",value:function(e,t){var r=this;null==e||e.forEach((function(e){if(!t||t&&e.id===t){var n=e.contract_info;r.updateResultsCompletedContract(n)}}))}},{key:"recoverPendingContractsById",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.core.portfolio.positions;if(n&&(this.is_called_proposal_open_contract=!0,n.contract_id===e&&this.updateResultsCompletedContract(n)),!this.is_called_proposal_open_contract&&null!==(t=this.core)&&void 0!==t&&null!==(r=t.client)&&void 0!==r&&r.loginid){var a,i,l,c,s=null===(a=this.core)||void 0===a||null===(i=a.client)||void 0===i?void 0:i.loginid;null!==(l=this.elements[s])&&void 0!==l&&l.length||this.sortOutPositionsBeforeAction(o);var u=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ta(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.elements[s],1)[0],f=void 0===u?null:u;if("object"===aa(null==f?void 0:f.data)&&(null==f||null===(c=f.data)||void 0===c||!c.profit)){var d=f.data.contract_id;this.sortOutPositionsBeforeAction(o,d)}}}}],t&&ia(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}function ua(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,da(n.key),n)}}function fa(e,t,r){return t&&ua(e.prototype,t),r&&ua(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function da(e){var t=function(e){if("object"!=sa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sa(t)?t:t+""}var pa=fa((function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ws=void 0,this.dbot=void 0,this.app=void 0,this.summary_card=void 0,this.flyout=void 0,this.flyout_help=void 0,this.google_drive=void 0,this.journal=void 0,this.load_modal=void 0,this.run_panel=void 0,this.save_modal=void 0,this.transactions=void 0,this.toolbar=void 0,this.toolbox=void 0,this.quick_strategy=void 0,this.route_prompt_dialog=void 0,this.self_exclusion=void 0,this.dashboard=void 0,this.chart_store=void 0,this.blockly_store=void 0,this.data_collection_store=void 0,this.ws=r,this.dbot=n,this.app=new F(this,t),this.summary_card=new Mo(this,t),this.flyout=new nr(this),this.flyout_help=new Qt(this),this.google_drive=new an(this),this.journal=new wn(this,t),this.load_modal=new Rn(this,t),this.run_panel=new fo(this,t),this.save_modal=new wo(this),this.transactions=new ca(this,t),this.toolbar=new Wo(this),this.toolbox=new Zo(this,t),this.quick_strategy=new Xn(this),this.route_prompt_dialog=new eo(this,t),this.self_exclusion=new Lo(this,t),this.dashboard=new Ce(this,t),this.chart_store=new oe(this),this.blockly_store=new J(this),this.data_collection_store=new qe(this,t)})),ma=(0,u.createContext)(null),ha=function(e){var t=e.children,r=e.ws,n=e.mock,o=v(),a=(0,u.useMemo)((function(){return n||new pa(o,r,p.DBot)}),[n,o,r]);return f().createElement(ma.Provider,{value:a},t)},ya=function(){var e=(0,u.useContext)(ma);if(!e)throw new Error("useDBotStore must be used within DBotStoreProvider");return e},va=r(992),_a=r.n(va),ba=r(5885);function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function Ea(e,t,r){return(t=function(e){var t=function(e){if("object"!=ga(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ga(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ka="transaction-details-modal-desktop",xa=function(e){var t,r=e.label,n=e.extra_classes,o=void 0===n?[]:n,a=e.loader,i=void 0!==a&&a;return f().createElement("div",{className:_a().apply(void 0,["".concat(ka,"__table-cell")].concat((t=o,function(e){if(Array.isArray(e))return wa(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return wa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wa(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))},i?f().createElement(Ta,null):r)},Sa=function(e){var t=e.columns;return f().createElement("div",{className:_a()("".concat(ka,"__table-row"),"".concat(ka,"__table-header"))},null==t?void 0:t.map((function(e){return f().createElement(xa,{key:e.key,extra_classes:[e.extra_class?"".concat(ka,"__table-cell").concat(e.extra_class):""],label:e.label,loader:!1})})))},Oa=function(e){var t=e.message,r=e.icon;return f().createElement("div",{className:"".concat(ka,"__icon-wrapper")},f().createElement(m.Popover,{alignment:(0,kn.Qq)()?"right":"left",message:t,zIndex:"9999"},r))},Ta=function(){return f().createElement(ba.Ay,{className:"transactions__loader-text","data-testid":"transaction_details_table_cell_loader",height:10,width:30,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)"},f().createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"60",height:"12"}))};function La(e){var t,r,n,o=e.result,a=e.result_columns,i=e.transactions,l=e.transaction_columns,c=e.account,s=e.balance;return f().createElement("div",{"data-testid":"transaction_details_tables",className:"transaction-details-tables"},f().createElement("div",{className:_a()("".concat(ka,"__table-container"),"".concat(ka,"__table-container__top-table"))},f().createElement(Sa,{columns:l}),null==i?void 0:i.map((function(e){var t,r,n,o,a=e.data;return e.type===ea.CONTRACT?f().createElement("div",{className:"".concat(ka,"__table-row"),key:null==a||null===(t=a.transaction_ids)||void 0===t?void 0:t.buy},f().createElement(xa,{label:(null==a?void 0:a.date_start)&&(0,z.convertDateFormat)(null==a?void 0:a.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"),extra_classes:["".concat(ka,"__table-cell--grow-big")]}),f().createElement(xa,{label:null==a||null===(r=a.transaction_ids)||void 0===r?void 0:r.buy,extra_classes:["".concat(ka,"__table-cell--grow-mid")]}),f().createElement(xa,{label:f().createElement(Oa,{message:null==a?void 0:a.display_name,icon:f().createElement(m.Icon,{icon:"IcUnderlying".concat(null==a?void 0:a.underlying),size:24})})}),f().createElement(xa,{label:f().createElement(Oa,{message:(0,p.getContractTypeName)(a),icon:f().createElement(m.IconTradeTypes,{type:null==a?void 0:a.contract_type,size:24})})}),f().createElement(xa,{label:null==a?void 0:a.entry_tick,loader:!(null!=a&&a.entry_tick)}),f().createElement(xa,{label:null==a?void 0:a.exit_tick,loader:!a.exit_tick}),f().createElement(xa,{label:Math.abs(null!==(n=null==a?void 0:a.buy_price)&&void 0!==n?n:0).toFixed(2)}),f().createElement(xa,{label:f().createElement("div",{className:_a()(Ea(Ea({},"".concat(ka,"__profit--win"),(null==a?void 0:a.profit)>0),"".concat(ka,"__profit--loss"),(null==a?void 0:a.profit)<0))},Math.abs(null!==(o=null==a?void 0:a.profit)&&void 0!==o?o:0).toFixed(2)),loader:!a.is_completed})):f().createElement("div",{className:"".concat(ka,"__table-row"),key:"transaction-row-divider-".concat(a)},f().createElement("div",{className:"".concat(ka,"__divider")},f().createElement("div",{className:"transactions__divider-line"})))}))),f().createElement("div",{className:_a()("".concat(ka,"__table-container"),"".concat(ka,"__table-container__bottom-table"))},f().createElement(Sa,{columns:a}),f().createElement("div",{className:"".concat(ka,"__table-row")},f().createElement(xa,{label:c,extra_classes:["".concat(ka,"__table-cell--grow-mid")]}),f().createElement(xa,{label:null==o?void 0:o.number_of_runs}),f().createElement(xa,{label:Math.abs(null!==(t=null==o?void 0:o.total_stake)&&void 0!==t?t:0).toFixed(2)}),f().createElement(xa,{label:Math.abs(null!==(r=null==o?void 0:o.total_payout)&&void 0!==r?r:0).toFixed(2)}),f().createElement(xa,{label:null==o?void 0:o.won_contracts}),f().createElement(xa,{label:null==o?void 0:o.lost_contracts,extra_classes:["".concat(ka,"__loss")]}),f().createElement(xa,{label:f().createElement("div",{className:_a()((null==o?void 0:o.total_profit)&&Ea(Ea({},"".concat(ka,"__profit--win"),(null==o?void 0:o.total_profit)>0),"".concat(ka,"__profit--loss"),(null==o?void 0:o.total_profit)<0)),"data-testid":"transaction_details_table_profit"},Math.abs(null!==(n=null==o?void 0:o.total_profit)&&void 0!==n?n:0).toFixed(2))}),f().createElement(xa,{label:s}))))}var Aa=[{key:"timestamp",label:(0,_.localize)("Timestamp"),extra_class:"--grow-big"},{key:"reference",label:(0,_.localize)("Reference"),extra_class:"--grow-mid"},{key:"market",label:(0,_.localize)("Market")},{key:"contract_type",label:(0,_.localize)("Trade type")},{key:"entry_tick",label:(0,_.localize)("Entry spot")},{key:"exit_tick",label:(0,_.localize)("Exit spot")},{key:"buy_price",label:(0,_.localize)("Buy price")},{key:"profit",label:(0,_.localize)("Profit/Loss")}],Na=[{key:"account",label:(0,_.localize)("Account"),extra_class:"--grow-mid"},{key:"no_of_runs",label:(0,_.localize)("No. of runs")},{key:"total_stake",label:(0,_.localize)("Total stake")},{key:"total_payout",label:(0,_.localize)("Total payout")},{key:"win",label:(0,_.localize)("Win")},{key:"loss",label:(0,_.localize)("Loss")},{key:"total_profit",label:(0,_.localize)("Total profit/loss")},{key:"balance",label:(0,_.localize)("Balance")}],Ca=(0,h.observer)((function(){var e=v().client,t=e.loginid,r=e.balance,n=ya().transactions,o=n.toggleTransactionDetailsModal,a=n.is_transaction_details_modal_open,i=n.transactions,l=n.statistics;return f().createElement(f().Fragment,null,a&&f().createElement(I,{boundary:".main",header:(0,_.localize)("Transactions detailed summary"),onClose:function(){return o(!1)},modalWidth:882,modalHeight:404,minWidth:882,minHeight:404,enableResizing:!0},f().createElement(La,{transaction_columns:Aa,transactions:i,result_columns:Na,result:l,account:null!=t?t:"",balance:null!=r?r:0})))}));const Pa=Ca,Ia=function(e){var t=e.wrapper_ref,r=e.checked_filters,n=e.filters,o=e.filterMessage,a=e.className,i=e.classNameLabel;return f().createElement("div",{ref:t,className:a},n.map((function(e){var t=Array.isArray(r)&&r.includes(e.id);return f().createElement(m.Checkbox,{key:e.id,classNameLabel:i,value:t,defaultChecked:t,label:e.label,onChange:function(){return o(!t,e.id)}})})))},ja=function(e){var t=e.toggle_ref,r=e.checked_filters,n=e.filters,o=e.filterMessage,a=e.is_filter_dialog_visible,i=e.toggleFilterDialog,l=f().useRef(null);return(0,m.useOnClickOutside)(l,i,(function(e){var r;return a&&!(null!==(r=t.current)&&void 0!==r&&r.contains(e.target))})),f().createElement(Ia,{wrapper_ref:l,checked_filters:r,filters:n,filterMessage:o,className:"filter-dialog"})},za=function(e){var t=e.logType,r=e.className,n=e.extra;return f().createElement("div",{className:_a()("journal__text",r)},function(){switch(t){case p.LogTypes.LOAD_BLOCK:return(0,_.localize)("Blocks are loaded successfully");case p.LogTypes.NOT_OFFERED:return(0,_.localize)("Resale of this contract is not offered.");case p.LogTypes.PURCHASE:var e=n.longcode,r=n.transaction_id;return f().createElement(_.Localize,{i18n_default_text:"<0>Bought</0>: {{longcode}} (ID: {{transaction_id}})",values:{longcode:e,transaction_id:r},components:[f().createElement(m.Text,{key:0,size:"xxs",styles:{color:"var(--status-info)"}})],options:{interpolation:{escapeValue:!1}}});case p.LogTypes.SELL:var o=n.sold_for;return f().createElement(_.Localize,{i18n_default_text:"<0>Sold for</0>: {{sold_for}}",values:{sold_for:o},components:[f().createElement(m.Text,{key:0,size:"xxs",styles:{color:"var(--status-warning)"}})]});case p.LogTypes.PROFIT:var a=n.currency,i=n.profit;return f().createElement(_.Localize,{i18n_default_text:"Profit amount: <0>{{profit}}</0>",values:{profit:"".concat((0,z.formatMoney)(a,i,!0)," ").concat((0,z.getCurrencyDisplayCode)(a))},components:[f().createElement(m.Text,{key:0,size:"xxs",styles:{color:"var(--status-success)"}})]});case p.LogTypes.LOST:var l=n.currency,c=n.profit;return f().createElement(_.Localize,{i18n_default_text:"Loss amount: <0>{{profit}}</0>",values:{profit:"".concat((0,z.formatMoney)(l,c,!0)," ").concat((0,z.getCurrencyDisplayCode)(l))},components:[f().createElement(m.Text,{key:0,size:"xxs",styles:{color:"var(--status-danger)"}})]});case p.LogTypes.WELCOME_BACK:var s=n.current_currency;return s?f().createElement(_.Localize,{i18n_default_text:"Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",values:{current_currency:s}}):f().createElement(_.Localize,{i18n_default_text:"Welcome back! Your messages have been restored."});case p.LogTypes.WELCOME:var u=n.current_currency;if(u)return f().createElement(_.Localize,{i18n_default_text:"You are using your {{current_currency}} account.",values:{current_currency:u}});break;default:return null}}())};var Ra=r(715);const Da=function(e){var t=e.row,r=e.is_new_row,n=e.measure,o=(0,z.useNewRowTransition)(r).in_prop,a=t.date,i=t.time,l=t.message,c=t.message_type,s=t.className,u=t.extra,d=function(e){var t=e.date,r=e.time;return f().createElement(f().Fragment,null,f().createElement("span",{className:"journal__text-date"},t)," | ",f().createElement("span",{className:"journal__text-time"},r))}({date:a,time:i});return f().createElement(Ra.A,{in:o,timeout:500,classNames:"list__animation","data-testid":"mock-css-transition"},f().createElement("div",{className:"journal__item",dir:(0,kn.Qq)()?"rtl":"ltr"},f().createElement("div",{className:"journal__item-content"},function(e,t,r,n,o){switch(t){case p.MessageTypes.SUCCESS:return f().createElement(za,{logType:e,extra:n,className:r});case p.MessageTypes.NOTIFY:return"function"==typeof e?f().createElement("div",{className:_a()("journal__text",r)},e(o)):f().createElement("div",{className:_a()("journal__text",r)},e);case p.MessageTypes.ERROR:return f().createElement("div",{className:"journal__text--error journal__text"},e);default:return null}}(l,c,s,u,n)),f().createElement("div",{className:"journal__text-datetime"},d)))},Ba=function(e){var t=e.is_mobile;return f().createElement(ba.Ay,{className:_a()("journal__loader",{"journal__loader--mobile":t}),speed:3,width:350,height:92,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},f().createElement("rect",{x:"15",y:"15",rx:"5",ry:"5",width:"320",height:"40"}),f().createElement("rect",{x:"15",y:"60",rx:"5",ry:"5",width:"180",height:"7"}))};var Ma=function(e,t){var r,n,o,a,i,l,c,s,u=encodeURI("data:text/csv;charset=utf-8, ".concat(t)),f=document.createElement("a");f.setAttribute("href",u),f.setAttribute("download","".concat(e," ").concat((o=(n=new Date).getUTCFullYear(),a=(n.getUTCMonth()+1).toString().padStart(2,"0"),i=n.getUTCDate().toString().padStart(2,"0"),l=n.getUTCHours().toString().padStart(2,"0"),c=n.getUTCMinutes().toString().padStart(2,"0"),s=n.getUTCSeconds().toString().padStart(2,"0"),"".concat(o,"-").concat(a,"-").concat(i," ").concat(l).concat(c).concat(s)),".csv")),document.body.appendChild(f),f.click(),null===(r=f.parentNode)||void 0===r||r.removeChild(f)},Ua=(0,h.observer)((function(e){var t,r,n=e.tab,o=ya(),a=o.run_panel,i=o.transactions,l=o.journal,c=a.is_clear_stat_disabled,s=a.is_running,u=l.filtered_messages,d=i.transactions,h=!1;return"transactions"===n?(t=function(){var e=[[(0,_.localize)("Market"),(0,_.localize)("Reference ID (buy)"),(0,_.localize)("Reference ID (sell)"),(0,_.localize)("Barrier"),(0,_.localize)("Start Time"),(0,_.localize)("Entry Spot"),(0,_.localize)("Entry Spot Time"),(0,_.localize)("Exit Spot"),(0,_.localize)("Exit Spot Time"),(0,_.localize)("Buy Price"),(0,_.localize)("Profit/Loss")]];d.forEach((function(t){var r=t.data;"string"!=typeof r&&e.push([r.display_name,r.transaction_ids.buy,r.transaction_ids.sell,r.barrier,r.date_start,r.entry_tick,r.entry_tick_time,r.exit_tick,r.exit_tick_time,r.buy_price,r.profit])}));var t=e.map((function(e){return e.join(",")})).join("\n");Ma((0,_.localize)("Transactions"),t)},h=!d.length||s,r=(0,_.localize)("Download your transaction history."),d.length||(r=(0,_.localize)("No transaction or activity yet."))):"journal"===n&&(t=function(){var e=[[(0,_.localize)("Date"),(0,_.localize)("Time"),(0,_.localize)("Message")]];u.map((function(t){var r,n;n="success"!==t.message_type?JSON.stringify(t.message):function(e,t){var r=t.profit,n=t.sold_for,o=t.longcode,a=t.transaction_id,i=t.current_currency;switch(e){case p.LogTypes.LOAD_BLOCK:return(0,_.localize)("Blocks are loaded successfully");case p.LogTypes.NOT_OFFERED:return(0,_.localize)("Resale of this contract is not offered.");case p.LogTypes.PURCHASE:return(0,_.localize)("Bought: {{longcode}} (ID: {{transaction_id}})",{longcode:o,transaction_id:a});case p.LogTypes.SELL:return(0,_.localize)("Sold for: {{sold_for}}",{sold_for:n});case p.LogTypes.PROFIT:return(0,_.localize)("Profit amount: {{profit}}",{profit:r});case p.LogTypes.LOST:return(0,_.localize)("Loss amount: {{profit}}",{profit:r});case p.LogTypes.WELCOME_BACK:return i?(0,_.localize)("Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",{current_currency:i}):(0,_.localize)("Welcome back! Your messages have been restored.");case p.LogTypes.WELCOME:if(i)return(0,_.localize)("You are using your {{current_currency}} account.",{current_currency:i});break;default:return""}}(t.message.toString(),t.extra);var o=[t.date,t.time,null===(r=n)||void 0===r?void 0:r.replace("&#x2F;","/")];e.push(o)}));var t=e.map((function(e){return e.join(",")})).join("\n");Ma((0,_.localize)("Journal"),t)},r=(0,_.localize)("Download your journal."),(h=c)&&(r=(0,_.localize)("No transaction or activity yet."))),s&&(r=(0,_.localize)("Download is unavailable while your bot is running.")),f().createElement(m.Popover,{className:"run-panel__info",classNameBubble:"run-panel__info--bubble",alignment:"bottom",message:r,zIndex:"5"},f().createElement(m.Button,{id:"download-button",is_disabled:h,className:"download__button",text:(0,_.localize)("Download"),onClick:t,secondary:!0}))}));const Fa=Ua,Ga=function(e){var t=e.checked_filters,r=e.filters,n=e.filterMessage,o=e.is_filter_dialog_visible,a=e.toggleFilterDialog,i=f().useRef(null);return f().createElement(f().Fragment,null,f().createElement("div",{className:"journal-tools__container"},f().createElement(Fa,{tab:"journal"}),f().createElement("div",{ref:i,className:"journal-tools__container-filter",onClick:a},f().createElement(m.Text,{size:"xs",className:"journal-tools__container-filter--label"},f().createElement(_.Localize,{i18n_default_text:"Filters"})),f().createElement(m.Icon,{icon:"IcFilter",size:16}))),f().createElement(Ra.A,{in:o,classNames:{enter:"filter-dialog--enter",enterDone:"filter-dialog--enter-done",exit:"filter-dialog--exit"},timeout:150,unmountOnExit:!0},f().createElement(ja,{toggle_ref:i,checked_filters:t,filters:r,filterMessage:n,is_filter_dialog_visible:o,toggleFilterDialog:a})))};var qa=(0,h.observer)((function(){var e=v().ui,t=ya(),r=t.journal,n=t.run_panel,o=r.checked_filters,a=r.filterMessage,i=r.filters,l=r.filtered_messages,c=r.is_filter_dialog_visible,s=r.toggleFilterDialog,u=r.unfiltered_messages,d=n.is_stop_button_visible,p=n.contract_stage,h=Array.isArray(l)&&l.length,y=Array.isArray(u)&&u.length,b=e.is_desktop;return f().createElement("div",{className:_a()("journal run-panel-tab__content--no-stat",{"run-panel-tab__content":b}),"data-testid":"dt_mock_journal"},f().createElement(Ga,{checked_filters:o,filters:i,filterMessage:a,is_filter_dialog_visible:c,toggleFilterDialog:s}),f().createElement("div",{className:"journal__item-list"},h?f().createElement(m.DataList,{className:"journal",data_source:l,rowRenderer:function(e){return f().createElement(Da,e)},keyMapper:function(e){return e.unique_id}}):f().createElement(f().Fragment,null,p>=to.STARTING&&Object.keys(o).length&&!y&&d?f().createElement(Ba,{is_mobile:!b}):f().createElement("div",{className:"journal-empty"},f().createElement(m.Icon,{icon:"IcBox",className:"journal-empty__icon",size:64,color:"secondary"}),f().createElement(m.Text,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",line_height:"xxs",className:"journal-empty__header"},(0,_.localize)("There are no messages to display")),f().createElement("div",{className:"journal-empty__message"},f().createElement(m.Text,{size:"xxs",color:"less-prominent"},(0,_.localize)("Here are the possible reasons:")),f().createElement("ul",{className:"journal-empty__list"},f().createElement("li",null,f().createElement(m.Text,{size:"xxs",color:"less-prominent"},(0,_.localize)("The bot is not running"))),f().createElement("li",null,f().createElement(m.Text,{size:"xxs",color:"less-prominent"},(0,_.localize)("The stats are cleared"))),f().createElement("li",null,f().createElement(m.Text,{size:"xxs",color:"less-prominent"},(0,_.localize)("All messages are filtered out")))))))))}));const Va=qa;var Ya=r(7106),Ha=r(9067),Wa=r.n(Ha);function Ka(e){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(e)}function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$a.apply(null,arguments)}function Xa(){Xa=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ka(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ka(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Qa(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Za=function(e){var t,r,n=(t=f().useState(""),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ja(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ja(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],i=e.is_onscreen_keyboard_active,l=e.is_logged_in,c=e.initial_values,s=e.api_max_losses,u=e.onRunButtonClick,d=e.resetSelfExclusion,p=e.updateSelfExclusion,h=e.setRunLimit,y=e.is_mobile;f().useEffect((function(){l||d()}));var v=function(){var e,t=(e=Xa().mark((function e(t){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form_max_losses===s){e.next=7;break}return e.next=3,p({max_losses:t.form_max_losses});case 3:if(null==(r=e.sent)||!r.error){e.next=7;break}return a((0,_.localize)(r.error.message)),e.abrupt("return");case 7:h(t.run_limit),u();case 9:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Qa(a,n,o,i,l,"next",e)}function l(e){Qa(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return f().createElement("div",{className:"db-self-exclusion","data-testid":"self-exclusion"},f().createElement("div",{className:"db-self-exclusion__content"},f().createElement("div",{className:"db-self-exclusion__info"},(0,_.localize)("Enter limits to stop your bot from trading when any of these conditions are met.")),f().createElement(Ya.Formik,{initialValues:c,validate:function(e){var t={},r=/^\d+(\.\d+)?$/,n=/^\d+$/,o=(0,_.localize)("This field is required."),i=(0,_.localize)("Should be a valid number"),l=(0,_.localize)("Reached maximum number of digits"),c=(0,_.localize)("Reached maximum number of decimals"),u=(0,_.localize)("Please enter a number between 0 and {{api_max_losses}}.",{api_max_losses:s});return["run_limit","form_max_losses"].forEach((function(r){e[r]||(t[r]=o)})),["run_limit","form_max_losses"].forEach((function(n){e[n]&&(r.test(e[n])?+e[n]>9999999999999&&(t[n]=l):t[n]=i)})),["run_limit"].forEach((function(r){e[r]&&(n.test(e[r])||(t[r]=i))})),["form_max_losses"].forEach((function(r){var n,o=null===(n=e[r])||void 0===n?void 0:n.toString().split(".")[1];(o?o.length:0)>2&&(t[r]=c)})),["form_max_losses"].forEach((function(r){0!==s&&s!==e[r]&&s<e[r]?t[r]=u:a("")})),t},onSubmit:v},(function(e){var t=e.values,r=e.touched,n=e.errors,a=e.isValid,l=e.handleChange;return f().createElement(Ya.Form,{role:"form"},f().createElement("div",{className:"db-self-exclusion__form-group"},f().createElement(Ya.Field,{name:"form_max_losses"},(function(e){var a=e.field;return f().createElement(m.Input,$a({},a,{className:"db-self-exclusion__input",type:"text",label:(0,_.localize)("Daily loss limit"),value:t.form_max_losses,onChange:l,error:o||r[a.name]&&n[a.name],hint:(0,_.localize)("Limits your potential losses for the day across all Deriv platforms."),data_testId:a.name}))}))),f().createElement("div",{className:"db-self-exclusion__form-group"},f().createElement(Ya.Field,{name:"run_limit"},(function(e){var o=e.field;return f().createElement(m.Input,$a({},o,{className:"db-self-exclusion__input",type:"text",label:(0,_.localize)("Maximum consecutive trades"),value:t.run_limit,onChange:l,error:r[o.name]&&n.run_limit,hint:(0,_.localize)("Maximum number of trades your bot will execute for this run."),data_testId:o.name}))}))),f().createElement("div",{className:_a()("db-self-exclusion__footer",{"db-self-exclusion__footer--relative":y&&i})},f().createElement("div",{className:"db-self-exclusion__footer-btn-group"},f().createElement(m.Button,{large:!0,text:(0,_.localize)("Cancel"),onClick:d,secondary:!0,type:"button"}),f().createElement(m.Button,{type:"submit",large:!0,text:(0,_.localize)("Apply and run"),is_disabled:!a||!t.run_limit||!t.form_max_losses||""!==o,primary:!0}))))}))))},ei=(0,h.observer)((function(e){var t=e.onRunButtonClick,r=ya().self_exclusion,n=v(),o=n.ui,a=n.client,i=r.is_restricted,l=r.resetSelfExclusion,c=r.initial_values,s=r.api_max_losses,u=r.run_limit,d=r.setRunLimit,p=o.is_onscreen_keyboard_active,h=o.is_desktop,y={is_onscreen_keyboard_active:p,is_logged_in:a.is_logged_in,initial_values:c,api_max_losses:s,onRunButtonClick:t,resetSelfExclusion:l,updateSelfExclusion:a.updateSelfExclusion,setRunLimit:d,virtual_account_loginid:a.virtual_account_loginid,run_limit:u,is_desktop:h};return f().createElement(f().Fragment,null,h?f().createElement(m.Modal,{is_open:i,has_close_icon:!0,width:"440px",height:"374px",toggleModal:l,className:"db-self-exclusion__modal",title:(0,_.localize)("Limits")},f().createElement(Za,y)):f().createElement(m.FadeWrapper,{is_visible:i,className:"limits__wrapper",keyname:"limitis__wrapper"},f().createElement(m.PageOverlay,{header:(0,_.localize)("Limits"),onClickClose:l},f().createElement(m.Div100vhContainer,{className:"limits__wrapper--is-mobile"},f().createElement(Za,y)))))}));ei.propTypes={onRunButtonClick:Wa().func};const ti=ei;var ri=(0,_.localize)("Your bot is running and waiting for a signal to buy a contract.");const ni=function(){return f().createElement(f().Fragment,null,f().createElement(m.Icon,{id:"rotate-icon",icon:"IcCircleLoader",color:"black",size:16}),f().createElement(m.Text,{color:"less-prominent",line_height:"xs",size:"xxs",weight:"bold",align:"center",className:"dc-contract-card-message"},ri))},oi=function(e){var t=e.speed,r=void 0===t?3:t,n=e.contract_stage;return f().createElement(f().Fragment,null,n===to.RUNNING?f().createElement(ni,null):f().createElement(ba.Ay,{height:153,width:334,speed:r,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)","data-testid":"contract-card-loader"},f().createElement("rect",{x:"12",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),f().createElement("rect",{x:"61",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),f().createElement("rect",{x:"180",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),f().createElement("rect",{x:"229",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),f().createElement("rect",{x:"12",y:"48",rx:"0",ry:"0",width:"60",height:"8"}),f().createElement("rect",{x:"12",y:"64",rx:"0",ry:"0",width:"308",height:"8"}),f().createElement("rect",{x:"12",y:"80",rx:"0",ry:"0",width:"308",height:"1"}),f().createElement("rect",{x:"12",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),f().createElement("rect",{x:"12",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),f().createElement("rect",{x:"12",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),f().createElement("rect",{x:"12",y:"137",rx:"0",ry:"0",width:"60",height:"8"}),f().createElement("rect",{x:"180",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),f().createElement("rect",{x:"180",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),f().createElement("rect",{x:"180",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),f().createElement("rect",{x:"180",y:"137",rx:"0",ry:"0",width:"60",height:"8"})))};var ai=(0,h.observer)((function(e){var t,r=e.contract_info,n=e.is_contract_loading,o=e.is_bot_running,a=ya(),i=a.summary_card,l=a.run_panel,c=v(),s=c.ui,u=c.common,d=i.is_contract_completed,p=i.is_contract_inactive,h=i.is_multiplier,y=i.is_accumulator,b=i.setIsBotRunning,g=l.onClickSell,E=l.is_sell_requested,w=l.contract_stage,k=s.addToast,x=s.current_focus,S=s.removeToast,O=s.setCurrentFocus,T=u.server_time,L=s.is_desktop;f().useEffect((function(){return b()}),[n]);var A=f().createElement(m.ContractCard.Header,{contract_info:r,getCardLabels:z.getCardLabels,getContractTypeDisplay:Io,has_progress_slider:!h,is_sold:d,server_time:T}),N=f().createElement(m.ContractCard.Body,{addToast:k,contract_info:r,currency:null!==(t=null==r?void 0:r.currency)&&void 0!==t?t:"",current_focus:x,error_message_alignment:"left",getCardLabels:z.getCardLabels,getContractById:function(){return i},is_mobile:!L,is_multiplier:h,is_accumulator:y,is_sold:d,removeToast:S,server_time:T,setCurrentFocus:O}),C=f().createElement(m.ContractCard.Footer,{contract_info:r,getCardLabels:z.getCardLabels,is_multiplier:h,is_sell_requested:E,onClickSell:g}),P=f().createElement(f().Fragment,null,A,N,C);return f().createElement("div",{className:_a()("db-summary-card",{"db-summary-card--mobile":!L,"db-summary-card--inactive":p&&!n&&!r,"db-summary-card--completed":d,"db-summary-card--completed-mobile":d&&!L,"db-summary-card--delayed-loading":o}),"data-testid":"dt_mock_summary_card"},n&&!o&&f().createElement(oi,{speed:2}),o&&f().createElement(oi,{speed:2,contract_stage:w}),!n&&r&&!o&&f().createElement(m.ContractCard,{contract_info:r,getCardLabels:z.getCardLabels,is_multiplier:h,profit_loss:r.profit,should_show_result_overlay:!0},f().createElement("div",{className:_a()("dc-contract-card",{"dc-contract-card--green":r.profit>0,"dc-contract-card--red":r.profit<0})},P)),!n&&!r&&!o&&f().createElement(m.Text,{as:"p",line_height:"s",size:"xs"},(0,_.localize)("When you’re ready to trade, hit "),f().createElement("strong",null,(0,_.localize)("Run")),(0,_.localize)(". You’ll be able to track your bot’s performance here.")))}));const ii=ai;const li=(0,h.observer)((function(e){var t=e.is_drawer_open,r=v().ui,n=ya(),o=n.dashboard,a=n.summary_card,i=a.is_contract_loading,l=a.contract_info,c=a.is_bot_running,s=o.active_tour,u=r.is_desktop;return f().createElement("div",{className:_a()({"run-panel-tab__content":u,"run-panel-tab__content--mobile":!u&&t,"run-panel-tab__content--summary-tab":u&&t||s}),"data-testid":"mock-summary"},f().createElement(m.ThemedScrollbars,{className:_a()({summary:!i&&!l||c,"summary--loading":!u&&i||!u&&!i&&l})},f().createElement(ii,{is_contract_loading:i,contract_info:l,is_bot_running:c})))})),ci=function(e){var t=e.profit>=0;return f().createElement("div",{className:_a()("db-contract-card__result",{"db-contract-card__result--won":t,"db-contract-card__result--lost":!t})},f().createElement(m.Text,{weight:"bold",className:"db-contract-card__result-caption"},t?f().createElement(f().Fragment,null,f().createElement(_.Localize,{i18n_default_text:"Won"}),f().createElement(m.Icon,{icon:"IcCheckmarkCircle",className:"db-contract-card__result-icon",color:"green"})):f().createElement(f().Fragment,null,f().createElement(_.Localize,{i18n_default_text:"Lost"}),f().createElement(m.Icon,{icon:"IcCrossCircle",className:"db-contract-card__result-icon",color:"red"}))))},si=function(e){var t=e.className;return f().createElement("div",{className:_a()("circular-wrapper",t)},f().createElement("span",{className:"static-circle"}),f().createElement("span",{className:"dynamic-circle"}))};var ui=Object.freeze({NOT_RUNNING:"Bot is not running",STARTING:"Bot is starting",RUNNING:"Bot running",PURCHASE_SENT:"Buying contract",PURCHASE_RECEIVED:"Contract bought",IS_STOPPING:"Bot is stopping",CONTRACT_CLOSED:"Contract closed"});const fi=function(e){switch(e.contract_stage){case to.STARTING:return f().createElement(_.Localize,{i18n_default_text:ui.STARTING});case to.RUNNING:return f().createElement(_.Localize,{i18n_default_text:ui.RUNNING});case to.PURCHASE_SENT:return f().createElement(_.Localize,{i18n_default_text:ui.PURCHASE_SENT});case to.PURCHASE_RECEIVED:return f().createElement(_.Localize,{i18n_default_text:ui.PURCHASE_RECEIVED});case to.IS_STOPPING:return f().createElement(_.Localize,{i18n_default_text:ui.IS_STOPPING});case to.CONTRACT_CLOSED:return f().createElement(_.Localize,{i18n_default_text:ui.CONTRACT_CLOSED});case to.NOT_RUNNING:default:return f().createElement(_.Localize,{i18n_default_text:ui.NOT_RUNNING})}};function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},di.apply(null,arguments)}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mi=(0,h.observer)((function(e){var t,r,n=e.className,o=e.should_show_overlay,a=ya(),i=a.dashboard,l=a.run_panel,c=a.summary_card,s=v().client,u=i.active_tab,d=c.is_contract_completed,p=c.profit,h=l.contract_stage,y=l.is_stop_button_visible,b=l.is_stop_button_disabled,g=l.onRunButtonClick,E=l.onStopBotClick,w=l.performSelfExclusionCheck,k=s.account_status,x=null==k?void 0:k.cashier_validation,S=(t=f().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return pi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pi(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=S[0],T=S[1],L=null==x?void 0:x.includes("WithdrawServiceUnavailableForPA");f().useEffect((function(){w()}),[]),f().useEffect((function(){O&&setTimeout((function(){T(!1)}),1e3)}),[O]);var A=["","",""],N=h===to.PURCHASE_SENT,C=h===to.PURCHASE_RECEIVED,P=h-(N||C?2:3);if(P>=0){P<A.length&&(A[P]="active"),d&&(P+=1);for(var I=0;I<P-1;I++)A[I]="completed"}var j=b||O,R=f().useMemo((function(){return y?{id:"db-animation__stop-button",class:"animation__stop-button",text:(0,_.localize)("Stop"),icon:"IcBotStop"}:{id:"db-animation__run-button",class:"animation__run-button",text:(0,_.localize)("Run"),icon:"IcPlay"}}),[y]),D=o&&d,B=["dashboard","bot_builder","charts","tutorials"];return f().createElement("div",{className:_a()("animation__wrapper",n)},f().createElement(m.Button,di({is_disabled:j&&!L,className:R.class,id:R.id,text:R.text,icon:f().createElement(m.Icon,{icon:R.icon,color:"active"}),onClick:function(){var e,t;T(!0),y?E():(g(),e={subpage_name:(t=u,B[t])}.subpage_name,z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.RUN_BOT,form_name:ar,subpage_name:e}}}]))},has_effect:!0},y||!L?{primary:!0}:{green:!0})),f().createElement("div",{className:_a()("animation__container",n,{"animation--running":h>0,"animation--completed":D})},D&&f().createElement(ci,{profit:p}),f().createElement("span",{className:"animation__text"},f().createElement(fi,{contract_stage:h})),f().createElement("div",{className:"animation__progress"},f().createElement("div",{className:"animation__progress-line"},f().createElement("div",{className:"animation__progress-bar animation__progress-".concat(h)})),A.map((function(e,t){return f().createElement(si,{key:"status_class-".concat(e,"-").concat(t),className:e})})))))}));const hi=mi;var yi=Object.freeze({QUICK_STRATEGY:99999,TOOLBAR:100,TRANSACTION:10,SUMMARY_TOOLTIPS:5,RUN_PANEL:8}),vi=function(e){var t=e.icon,r=e.title,n=e.message,o=e.className;return f().createElement(f().Fragment,null,f().createElement(m.Popover,{className:_a()(o,"transactions__icon"),alignment:(0,kn.Qq)()?"right":"left",message:r,zIndex:yi.TRANSACTION.toString()},t),n)},_i=function(){return f().createElement(ba.Ay,{className:"transactions__loader-text",height:10,width:80,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)"},f().createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"}))},bi=function(){return f().createElement(ba.Ay,{className:"transactions__loader-icon",speed:3,width:24,height:24,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},f().createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"24",height:"24"}))},gi=function(e){var t=e.icon,r=e.title,n=e.children;return f().createElement("div",{className:"transactions__popover-item"},t&&f().createElement("div",{className:"transaction__popover-icon"},t),f().createElement("div",{className:"transactions__popover-details"},f().createElement("div",{className:"transactions__popover-title"},r),n))},Ei=function(e){var t=e.contract;return f().createElement("div",{className:"transactions__popover-content"},t.transaction_ids&&f().createElement(gi,{title:(0,_.localize)("Reference IDs")},t.transaction_ids.buy&&f().createElement("div",{className:"transactions__popover-value"},"".concat(t.transaction_ids.buy," ").concat((0,_.localize)("(Buy)"))),t.transaction_ids.sell&&f().createElement("div",{className:"transactions__popover-value"},"".concat(t.transaction_ids.sell," ").concat((0,_.localize)("(Sell)")))),t.tick_count&&f().createElement(gi,{title:(0,_.localize)("Duration")},f().createElement("div",{className:"transactions__popover-value"},"".concat(t.tick_count," ").concat((0,_.localize)("ticks")))),t.barrier&&f().createElement(gi,{title:(0,_.localize)("Barrier")},f().createElement("div",{className:"transactions__popover-value"},t.barrier))||t.high_barrier&&t.low_barrier&&f().createElement(gi,{title:(0,_.localize)("Barriers")},f().createElement("div",{className:"transactions__popover-value"},"".concat(t.high_barrier," ").concat((0,_.localize)("(High)"))),f().createElement("div",{className:"transactions__popover-value"},"".concat(t.low_barrier," ").concat((0,_.localize)("(Low)")))),t.date_start&&f().createElement(gi,{title:(0,_.localize)("Start time")},f().createElement("div",{className:"transactions__popover-value"},(0,z.convertDateFormat)(t.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"))),t.entry_tick&&f().createElement(gi,{title:(0,_.localize)("Entry spot")},f().createElement("div",{className:"transactions__popover-value"},t.entry_tick),t.entry_tick_time&&f().createElement("div",{className:"transactions__popover-value"},(0,z.convertDateFormat)(t.entry_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"))),t.exit_tick&&t.exit_tick_time&&f().createElement(gi,{title:(0,_.localize)("Exit spot")},f().createElement("div",{className:"transactions__popover-value"},t.exit_tick),f().createElement("div",{className:"transactions__popover-value"},(0,z.convertDateFormat)(t.exit_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")))||t.exit_tick&&f().createElement(gi,{title:(0,_.localize)("Exit time")},f().createElement("div",{className:"transactions__popover-value"},t.exit_tick)))};const wi=function(e){var t,r,n,o=e.contract,a=e.active_transaction_id,i=e.onClickTransaction;return f().createElement(m.Popover,{zIndex:yi.TRANSACTION.toString(),alignment:(0,kn.Qq)()?"right":"left",className:"transactions__item-wrapper",is_open:!(!o||a!==(null==o||null===(t=o.transaction_ids)||void 0===t?void 0:t.buy)),message:o&&f().createElement(Ei,{contract:o})},f().createElement("div",{"data-testid":"dt_transactions_item",className:"transactions__item",onClick:function(){var e;return i&&i((null==o||null===(e=o.transaction_ids)||void 0===e?void 0:e.buy)||null)}},f().createElement("div",{className:"transactions__cell transactions__trade-type","data-testid":"dt_transactions_item_trade_type"},f().createElement("div",{className:"transactions__loader-container"},o?f().createElement(vi,{icon:f().createElement(m.Icon,{icon:"IcUnderlying".concat(o.underlying),size:16}),title:o.display_name||""}):f().createElement(bi,null)),f().createElement("div",{className:"transactions__loader-container"},o?f().createElement(vi,{icon:f().createElement(m.IconTradeTypes,{type:o.contract_type||"",size:16}),title:(0,p.getContractTypeName)(o)}):f().createElement(bi,null))),f().createElement("div",{className:"transactions__cell transactions__entry-spot","data-testid":"dt_transactions_item_entry_spot"},f().createElement(vi,{icon:f().createElement(m.Icon,{icon:"IcContractEntrySpot"}),title:(0,_.localize)("Entry spot"),message:null!==(r=null==o?void 0:o.entry_tick)&&void 0!==r?r:f().createElement(_i,null)})),f().createElement("div",{className:"transactions__cell transactions__exit-spot","data-testid":"dt_transactions_item_exit_spot"},f().createElement(vi,{icon:f().createElement(m.Icon,{icon:"IcContractExitSpot"}),title:(0,_.localize)("Exit spot"),message:null!==(n=null==o?void 0:o.exit_tick)&&void 0!==n?n:f().createElement(_i,null)})),f().createElement("div",{className:"transactions__cell transactions__stake","data-testid":"dt_transactions_item_stake"},o?f().createElement(m.Money,{amount:o.buy_price,currency:o.currency,show_currency:!0}):f().createElement(_i,null)),f().createElement("div",{className:"transactions__cell transactions__profit","data-testid":"dt_transactions_item_profit"},null!=o&&o.is_completed?f().createElement("div",{"data-testid":null!=o&&o.profit&&(null==o?void 0:o.profit)>=0?"dt_transactions_profit_win":"dt_transactions_profit_loss",className:_a()({"transactions__profit--win":(null==o?void 0:o.profit)&&(null==o?void 0:o.profit)>=0,"transactions__profit--loss":(null==o?void 0:o.profit)&&(null==o?void 0:o.profit)<0})},f().createElement(m.Money,{amount:Math.abs(o.profit||0),currency:o.currency,show_currency:!0})):f().createElement(_i,null))))};function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ki.apply(null,arguments)}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Si=function(e){var t=e.row,r=e.is_new_row,n=void 0!==r&&r,o=e.onClickTransaction,a=e.active_transaction_id,i=(0,z.useNewRowTransition)(n).in_prop;switch(t.type){case ea.CONTRACT:var l=t.data;return f().createElement(Ra.A,{in:i,timeout:500,classNames:"list__animation"},f().createElement(wi,{contract:l,onClickTransaction:o,active_transaction_id:a}));case ea.DIVIDER:return f().createElement("div",{className:"transactions__divider"},f().createElement("div",{className:"transactions__divider-line"}));default:return null}},Oi=(0,h.observer)((function(e){var t,r,n=e.is_drawer_open,o=(t=f().useState(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return xi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xi(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],i=o[1],l=v().ui,c=ya(),s=c.run_panel,u=c.transactions,d=s.contract_stage,p=u.transactions,h=u.toggleTransactionDetailsModal,y=u.recoverPendingContracts,b=l.is_desktop;f().useEffect((function(){return window.addEventListener("click",g),y(),function(){window.removeEventListener("click",g)}}),[]),f().useEffect((function(){a&&i(null)}),[null==p?void 0:p.length]);var g=function(e){((null==e?void 0:e.composedPath())||[]).some((function(e){var t;return null===(t=e.classList)||void 0===t?void 0:t.contains("transactions__item-wrapper")}))||i(null)},E=function(e){i(e&&a===e?null:e)};return f().createElement("div",{className:_a()("transactions",{"run-panel-tab__content":b,"run-panel-tab__content--mobile":!b&&n})},f().createElement("div",{className:"download__container transaction-details__button-container"},f().createElement(Fa,{tab:"transactions"}),f().createElement(m.Button,{id:"download__container__view-detail-button",className:"download__container__view-detail-button",is_disabled:!(null!=p&&p.length),text:(0,_.localize)("View Detail"),onClick:function(){h(!0)},secondary:!0})),f().createElement("div",{className:"transactions__header"},f().createElement("span",{className:"transactions__header-column transactions__header-type"},(0,_.localize)("Type")),f().createElement("span",{className:"transactions__header-column transactions__header-spot"},(0,_.localize)("Entry/Exit spot")),f().createElement("span",{className:"transactions__header-column transactions__header-profit"},(0,_.localize)("Buy price and P/L"))),f().createElement("div",{className:_a()({transactions__content:b,"transactions__content--mobile":!b})},f().createElement("div",{className:"transactions__scrollbar"},null!=p&&p.length?f().createElement(m.DataList,{className:"transactions",data_source:p,rowRenderer:function(e){return f().createElement(Si,ki({onClickTransaction:E,active_transaction_id:a},e))},keyMapper:function(e){switch(e.type){case ea.CONTRACT:return e.data.transaction_ids.buy;case ea.DIVIDER:return e.data;default:return null}},getRowSize:function(e){var t=e.index;switch((null==p?void 0:p[t]).type){case ea.CONTRACT:return 50;case ea.DIVIDER:return 21;default:return 0}}}):f().createElement(f().Fragment,null,d>=to.STARTING?f().createElement(wi,{contract:null}):f().createElement(m.ThemedScrollbars,null,f().createElement("div",{className:"transactions-empty-box"},f().createElement("div",{className:"transactions-empty"},f().createElement("div",{className:"transactions-empty__icon-box"},f().createElement(m.Icon,{icon:"IcBox",className:"transactions-empty__icon",size:64,color:"secondary"})),f().createElement(m.Text,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",line_height:"xxs",className:"transactions-empty__header"},(0,_.localize)("There are no transactions to display")),f().createElement("div",{className:"transactions-empty__message"},f().createElement(m.Text,{size:"xxs",color:"less-prominent"},(0,_.localize)("Here are the possible reasons:")),f().createElement("ul",{className:"transactions-empty__list"},f().createElement("li",null,(0,_.localize)("The bot is not running")),f().createElement("li",null,(0,_.localize)("The stats are cleared")))))))))))}));const Ti=Oi;var Li=["active_index","is_drawer_open","active_tour","setActiveTabIndex"],Ai=function(e){var t=e.content,r=e.contentClassName,n=e.title;return f().createElement("div",{className:"run-panel__tile"},f().createElement("div",{className:"run-panel__tile-title"},n),f().createElement("div",{className:_a()("run-panel__tile-content",r)},t))},Ni=function(e){var t=e.currency,r=e.is_mobile,n=e.lost_contracts,o=e.number_of_runs,a=e.total_stake,i=e.total_payout,l=e.toggleStatisticsInfoModal,c=e.total_profit,s=e.won_contracts;return f().createElement("div",{className:_a()("run-panel__stat",{"run-panel__stat--mobile":r})},f().createElement("div",{className:"run-panel__stat--info",onClick:l},f().createElement("div",{className:"run-panel__stat--info-item"},f().createElement(_.Localize,{i18n_default_text:"What's this?"}))),f().createElement("div",{className:"run-panel__stat--tiles"},f().createElement(Ai,{title:(0,_.localize)("Total stake"),alignment:"top",content:f().createElement(m.Money,{amount:a,currency:t,show_currency:!0})}),f().createElement(Ai,{title:(0,_.localize)("Total payout"),alignment:"top",content:f().createElement(m.Money,{amount:i,currency:t,show_currency:!0})}),f().createElement(Ai,{title:(0,_.localize)("No. of runs"),alignment:"top",content:o}),f().createElement(Ai,{title:(0,_.localize)("Contracts lost"),alignment:"bottom",content:n}),f().createElement(Ai,{title:(0,_.localize)("Contracts won"),alignment:"bottom",content:s}),f().createElement(Ai,{title:(0,_.localize)("Total profit/loss"),content:f().createElement(m.Money,{amount:c,currency:t,has_sign:!0,show_currency:!0}),alignment:"bottom",contentClassName:_a()("run-panel__stat-amount",{"run-panel__stat-amount--positive":c>0,"run-panel__stat-amount--negative":c<0})})))},Ci=function(e){var t=e.is_clear_stat_disabled,r=e.is_mobile,n=e.is_drawer_open,o=e.onClearStatClick;return r&&n&&f().createElement(m.Button,{id:"db-run-panel__clear-button",className:"run-panel__clear-button",is_disabled:t,text:(0,_.localize)("Reset"),onClick:o,secondary:!0})},Pi=function(e){var t=e.active_index,r=e.is_drawer_open,n=e.active_tour,o=e.setActiveTabIndex,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Li);return f().createElement(f().Fragment,null,f().createElement(m.Tabs,{active_index:t,onTabItemClick:o,top:!0},f().createElement("div",{id:"db-run-panel-tab__summary",label:(0,_.localize)("Summary")},f().createElement(li,{is_drawer_open:r})),f().createElement("div",{id:"db-run-panel-tab__transactions",label:(0,_.localize)("Transactions")},f().createElement(Ti,{is_drawer_open:r})),f().createElement("div",{id:"db-run-panel-tab__journal",label:(0,_.localize)("Journal")},f().createElement(Va,null))),(r&&2!==t||n)&&f().createElement(Ni,a))},Ii=function(e){var t=e.is_clear_stat_disabled,r=e.onClearStatClick;return f().createElement("div",{className:"run-panel__footer"},f().createElement(m.Button,{id:"db-run-panel__clear-button",className:"run-panel__footer-button",is_disabled:t,text:(0,_.localize)("Reset"),onClick:r,has_effect:!0,secondary:!0}))},ji=function(){return f().createElement("div",{className:"controls__section"},f().createElement("div",{className:"controls__buttons"},f().createElement(hi,{className:"controls__animation",should_show_overlay:!0})))},zi=function(e){var t=e.is_mobile,r=e.is_statistics_info_modal_open,n=e.toggleStatisticsInfoModal;return f().createElement(m.Modal,{className:_a()("statistics__modal",{"statistics__modal--mobile":t}),title:(0,_.localize)("What's this?"),is_open:r,toggleModal:n,width:"440px"},f().createElement(m.Modal.Body,null,f().createElement("div",{className:_a()("statistics__modal-body",{"statistics__modal-body--mobile":t})},f().createElement(m.ThemedScrollbars,{className:"statistics__modal-scrollbar"},f().createElement(m.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content no-margin"},(0,_.localize)("Total stake")),f().createElement(m.Text,{as:"p"},(0,_.localize)("Total stake since you last cleared your stats.")),f().createElement(m.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,_.localize)("Total payout")),f().createElement(m.Text,{as:"p"},(0,_.localize)("Total payout since you last cleared your stats.")),f().createElement(m.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,_.localize)("No. of runs")),f().createElement(m.Text,{as:"p"},(0,_.localize)("The number of times your bot has run since you last cleared your stats. Each run includes the execution of all the root blocks.")),f().createElement(m.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,_.localize)("Contracts lost")),f().createElement(m.Text,{as:"p"},(0,_.localize)("The number of contracts you have lost since you last cleared your stats.")),f().createElement(m.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,_.localize)("Contracts won")),f().createElement(m.Text,{as:"p"},(0,_.localize)("The number of contracts you have won since you last cleared your stats.")),f().createElement(m.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,_.localize)("Total profit/loss")),f().createElement(m.Text,{as:"p"},(0,_.localize)("Your total profit/loss since you last cleared your stats. It is the difference between your total payout and your total stake."))))))},Ri=(0,h.observer)((function(){var e=ya(),t=e.run_panel,r=e.dashboard,n=e.transactions,o=v(),a=o.client,i=o.ui.is_desktop,l=a.currency,c=t.active_index,s=t.is_drawer_open,u=t.is_statistics_info_modal_open,d=t.is_clear_stat_disabled,p=t.onClearStatClick,h=t.onMount,y=t.onRunButtonClick,_=t.onUnmount,b=t.setActiveTabIndex,g=t.toggleDrawer,E=t.toggleStatisticsInfoModal,w=n.statistics,k=r.active_tour,x=r.active_tab,S=w.total_payout,O=w.total_profit,T=w.total_stake,L=w.won_contracts,A=w.lost_contracts,N=w.number_of_runs,C=q.BOT_BUILDER,P=q.CHART;f().useEffect((function(){return h(),function(){return _()}}),[h,_]),f().useEffect((function(){i||g(!1)}),[]);var I=f().createElement(Pi,{active_index:c,currency:l,is_drawer_open:s,is_mobile:!i,lost_contracts:A,number_of_runs:N,setActiveTabIndex:b,toggleStatisticsInfoModal:E,total_payout:S,total_profit:O,total_stake:T,won_contracts:L,active_tour:k}),j=f().createElement(Ii,{is_clear_stat_disabled:d,onClearStatClick:p}),z=f().createElement(Ci,{is_clear_stat_disabled:d,is_mobile:!i,is_drawer_open:s,onClearStatClick:p});return![C,P].includes(x)&&!k&&i||"bot_builder"===k?null:f().createElement(f().Fragment,null,f().createElement("div",{className:!i&&s?"run-panel__container--mobile":"run-panel"},f().createElement(m.Drawer,{anchor:"right",className:_a()("run-panel",{"run-panel__container":i,"run-panel__container--tour-active":i&&k}),contentClassName:"run-panel__content",header:z,footer:i&&j,is_open:s,toggleDrawer:g,width:366,zIndex:yi.RUN_PANEL},I),!i&&f().createElement(ji,null)),f().createElement(ti,{onRunButtonClick:y}),f().createElement(zi,{is_mobile:!i,is_statistics_info_modal_open:u,toggleStatisticsInfoModal:E}))}));const Di=Ri;function Bi(e){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(e)}function Mi(e,t,r){return(t=function(e){var t=function(e){if("object"!=Bi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Bi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ui="transaction-details-modal-mobile",Fi=function(){return f().createElement(ba.Ay,{className:"transactions__loader-text","data-testid":"transaction_details_card_cell_loader",height:10,width:80,speed:3,foregroundColor:"var(--general-section-2)",backgroundColor:"var(--general-hover)"},f().createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"}))},Gi=function(e){var t=e.label,r=void 0===t?"":t,n=e.large_title,o=void 0!==n&&n,a=e.right_aligned,i=void 0!==a&&a,l=e.title,c=void 0===l?"":l,s=e.loader,u=void 0!==s&&s;return f().createElement("div",{className:_a()("".concat(Ui,"__card__column"),Mi({},"".concat(Ui,"__right-align"),i))},c&&f().createElement("div",{className:_a()(Mi(Mi({},"".concat(Ui,"__small-title"),!o),"".concat(Ui,"__large-title"),o))},(0,_.localize)(c)),f().createElement("div",{className:"".concat(Ui,"__label")},u?f().createElement(Fi,null):r))},qi=function(e){var t=e.message,r=e.icon;return f().createElement("div",{className:_a()("".concat(Ui,"__table-cell"),"".concat(Ui,"__table-cell__icon-wrapper"))},t&&f().createElement(m.Popover,{alignment:(0,kn.Qq)()?"left":"right",message:t,zIndex:"7"},r))};function Vi(e){var t,r,n,o=e.transaction;return f().createElement("div",{className:"".concat(Ui,"__card"),"data-testid":"dt_mobile_transaction_card"},f().createElement("div",{className:"".concat(Ui,"__card__row")},f().createElement(Gi,{label:f().createElement("div",{className:"".concat(Ui,"__icon-wrapper")},f().createElement(qi,{message:null==o?void 0:o.display_name,icon:f().createElement(m.Icon,{icon:"IcUnderlying".concat(null==o?void 0:o.underlying),size:32})}),f().createElement(qi,{message:(0,p.getContractTypeName)(o),icon:f().createElement(m.IconTradeTypes,{type:null==o?void 0:o.contract_type,size:24})}))})),f().createElement("div",{className:"".concat(Ui,"__card__row")},f().createElement(Gi,{title:"Ref. ID",label:null==o||null===(t=o.transaction_ids)||void 0===t?void 0:t.buy})),f().createElement("div",{className:"".concat(Ui,"__card__row")},f().createElement(Gi,{title:"Timestamp",label:(0,z.convertDateFormat)(null==o?void 0:o.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")}),f().createElement(Gi,{title:"Entry Spot",label:null==o?void 0:o.entry_tick,right_aligned:!0,loader:!o.entry_tick})),f().createElement("div",{className:"".concat(Ui,"__card__row")},f().createElement(Gi,{title:"Buy Price",label:Math.abs(null!==(r=null==o?void 0:o.buy_price)&&void 0!==r?r:0).toFixed(2)}),f().createElement(Gi,{title:"Exit Spot",label:null==o?void 0:o.exit_tick,right_aligned:!0,loader:!o.exit_tick})),f().createElement("div",{className:"".concat(Ui,"__card__row")},f().createElement(Gi,{title:"Profit / Loss",large_title:!0}),f().createElement(Gi,{label:f().createElement("div",{className:_a()(Mi(Mi({},"".concat(Ui,"__card__profit--win"),(null==o?void 0:o.profit)>0),"".concat(Ui,"__card__profit--loss"),(null==o?void 0:o.profit)<0))},Math.abs(null!==(n=null==o?void 0:o.profit)&&void 0!==n?n:0).toFixed(2)),right_aligned:!0,loader:!o.is_completed})))}var Yi=(0,h.observer)((function(){var e,t,r,n,o,a,i=v().client,l=ya(),c=l.transactions,s=l.run_panel,u=c.toggleTransactionDetailsModal,d=c.is_transaction_details_modal_open,p=c.transactions,h=c.statistics,y=s.toggleStatisticsInfoModal;return f().createElement(m.MobileFullPageModal,{is_modal_open:d,className:"transaction-details-modal-mobile",header:(0,_.localize)("Transactions detailed summary"),onClickClose:function(){u(!1)},height_offset:"80px"},f().createElement("div",{className:"transaction-details-modal-mobile__wrapper","data-testid":"transaction_details_cards"},null==p?void 0:p.map((function(e){var t,r=e.data;return e.type===ea.CONTRACT?f().createElement(Vi,{transaction:r,key:null==r||null===(t=r.transaction_ids)||void 0===t?void 0:t.buy}):f().createElement("div",{className:"transaction-details-modal-mobile__divider",key:"transaction-row-divider-".concat(r)},f().createElement("div",{className:"transactions__divider-line"}))}))),f().createElement("div",{className:"transaction-details-modal-mobile__card__footer"},f().createElement(Ni,{is_mobile:!0,currency:null==i?void 0:i.currency,lost_contracts:null!==(e=null==h?void 0:h.lost_contracts)&&void 0!==e?e:0,number_of_runs:null!==(t=null==h?void 0:h.number_of_runs)&&void 0!==t?t:0,total_payout:null!==(r=null==h?void 0:h.total_payout)&&void 0!==r?r:0,total_profit:null!==(n=null==h?void 0:h.total_profit)&&void 0!==n?n:0,total_stake:null!==(o=null==h?void 0:h.total_stake)&&void 0!==o?o:0,won_contracts:null!==(a=null==h?void 0:h.won_contracts)&&void 0!==a?a:0,toggleStatisticsInfoModal:y})))}));const Hi=Yi,Wi=(0,h.observer)((function(){var e=v().ui.is_desktop;return f().createElement(u.Suspense,{fallback:f().createElement(m.Loading,null)},e?f().createElement(Pa,null):f().createElement(Hi,null))})),Ki=function(){return f().createElement(f().Fragment,null,f().createElement("audio",{id:"announcement","aria-label":"audio",src:"".concat(r.p,"media/announcement.mp3")}),f().createElement("audio",{id:"earned-money","aria-label":"audio",src:"".concat(r.p,"media/coins.mp3")}),f().createElement("audio",{id:"job-done","aria-label":"audio",src:"".concat(r.p,"media/job-done.mp3")}),f().createElement("audio",{id:"error","aria-label":"audio",src:"".concat(r.p,"media/out-of-bounds.mp3")}),f().createElement("audio",{id:"severe-error","aria-label":"audio",src:"".concat(r.p,"media/i-am-being-serious.mp3")}))},$i=(0,h.observer)((function(){var e=ya().blockly_store.is_loading;return f().createElement(f().Fragment,null,e&&f().createElement("div",{className:"bot__loading","data-testid":"blockly-loader"},f().createElement(m.Loading,null)))}));var Xi=q.BOT_BUILDER,Qi=q.CHART,Ji=(0,h.observer)((function(){var e=v().ui,t=ya(),r=t.run_panel,n=t.dashboard,o=r.is_drawer_open,a=e.notification_messages_ui,i=n.active_tab,l=n.is_info_panel_visible;return f().createElement("div",{className:_a()("notifications-container",{"notifications-container__dashboard":0===i&&l,"notifications-container--panel-open":[Xi,Qi].includes(i)&&o}),"data-testid":"dt_notifications_container"},f().createElement(a,null))}));const Zi=Ji,el=(0,h.observer)((function(){var e=ya().dashboard.is_web_socket_intialised,t=function(){location.reload()};return f().createElement(m.Dialog,{is_visible:!e,is_mobile_full_width:!0,className:"dc-dialog bot-stopped-dialog",cancel_button_text:(0,_.localize)("Go to Reports"),confirm_button_text:(0,_.localize)("Back to Bot"),onCancel:function(){return location.replace("reports/positions")},onConfirm:function(){return location.reload()}},f().createElement("div",{className:"dc-dialog__content__header"},f().createElement(m.Text,{"data-testid":"data-title",weight:"bold",as:"p",align:"left",size:"s",color:"prominent"},(0,_.localize)("You're back online")),f().createElement("div",{"data-testid":"data-close-button",onClick:t,onKeyDown:function(e){"Enter"===e.key&&t()},tabIndex:0},f().createElement(m.Icon,{icon:"IcCross"}))),f().createElement(m.Text,{as:"p",align:"left",size:"xs",color:"prominent"},(0,_.localize)("The bot has stopped, but your trade may still be running. You can check it on the Reports page.")))}));var tl=r(9514),rl=r.n(tl);function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ol=(0,h.observer)((function(e){var t,r,n=e.should_open,o=void 0!==n&&n,a=v(),i=a.common,l=a.ui,c=i.network_status,s=(t=f().useState(o),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return nl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nl(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],d=s[1],p=c.message,h=c.status,y=document.getElementById("popup_root"),_=l.is_desktop;return y&&p?(u||"online"===h?u&&"online"===h&&setTimeout((function(){d(!1)}),1500):d(!0),rl().createPortal(!_&&f().createElement(m.Toast,{className:_a()({"dc-toast--blinker":"blinker"===h}),is_open:u,timeout:0,type:"error"},p),y)):null}));const al=(0,h.observer)((function(){var e=ya().route_prompt_dialog,t=e.continueRoute,r=e.should_show,n=e.is_confirmed,o=e.last_location,a=e.onCancel,i=e.onConfirm;return f().useEffect(t,[n,o,t]),f().createElement(m.Dialog,{title:(0,_.localize)("Leaving already?"),confirm_button_text:(0,_.localize)("Yes, I'll come back later"),cancel_button_text:(0,_.localize)("No, I'll stay"),onConfirm:i,onCancel:a,is_visible:r,has_close_icon:!1},f().createElement(_.Localize,{i18n_default_text:"If you leave, your current contract will be completed, but your bot will stop running immediately."}))}));const il=(0,h.observer)((function(){var e=v().ui,t=ya(),r=t.google_drive,n=t.load_modal,o=r.is_authorised,a=r.signIn,i=r.signOut,l=n.is_open_button_loading,c=n.onDriveOpen,s=e.is_desktop;return f().createElement("div",{className:"load-strategy__container","data-testid":"dt_google_drive"},f().createElement("div",{className:"load-strategy__google-drive"},f().createElement(m.Icon,{icon:"IcGoogleDrive",className:_a()("load-strategy__google-drive-icon",{"load-strategy__google-drive-icon--disabled":!o}),size:s?128:96}),f().createElement("div",{className:"load-strategy__google-drive-connected-text"},o?f().createElement(_.Localize,{i18n_default_text:"You are connected to Google Drive"}):"Google Drive"),o?f().createElement(m.Button.Group,null,f().createElement(m.Button,{onClick:function(){i(),z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.GOOGLE_DRIVE_DISCONNECT,form_name:ar,subpage_name:"bot_builder"}}}])},has_effect:!0,secondary:!0,large:!0},f().createElement(_.Localize,{i18n_default_text:"Disconnect"})),f().createElement(m.Button,{onClick:function(){c()},is_loading:l,has_effect:!0,primary:!0,large:!0},f().createElement(_.Localize,{i18n_default_text:"Open"}))):f().createElement(f().Fragment,null,f().createElement("div",{className:"load-strategy__google-drive-terms"},f().createElement("div",{className:"load-strategy__google-drive-text"},f().createElement(_.Localize,{i18n_default_text:"To import your bot from your Google Drive, you'll need to sign in to your Google account."})),f().createElement("div",{className:"load-strategy__google-drive-text"},f().createElement(_.Localize,{i18n_default_text:"To know how Google Drive handles your data, please review Deriv’s <0>Privacy policy.</0>",components:[f().createElement(m.StaticUrl,{key:0,className:"link",href:"tnc/security-and-privacy.pdf",is_document:!0})]}))),f().createElement(m.Button,{onClick:function(){a(),z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.GOOGLE_DRIVE_CONNECT,form_name:ar,subpage_name:"bot_builder"}}}])},has_effect:!0,primary:!0,large:!0},f().createElement(_.Localize,{i18n_default_text:"Sign in"})))))}));const ll=(0,h.observer)((function(){var e=v().ui,t=ya(),r=t.load_modal,n=t.dashboard,o=r.is_open_button_loading,a=r.is_open_button_disabled,i=r.loadStrategyOnBotBuilder,l=r.setLoadedLocalFile,c=r.saveStrategyToLocalStorage,s=r.toggleLoadModal,u=n.setOpenSettings,d=n.setPreviewOnPopup,p=e.is_desktop,h=p?f().Fragment:m.Button.Group;return f().createElement(h,null,!p&&f().createElement(m.Button,{text:(0,_.localize)("Cancel"),onClick:function(){return l(null)},has_effect:!0,secondary:!0,large:!0}),f().createElement(m.Button,{text:(0,_.localize)("Open"),onClick:function(){i(),c(),l(null),s(),d(!1),u(le.Dc.BOT_IMPORT)},is_loading:o,has_effect:!0,primary:!0,large:!0,disabled:a}))})),cl=function(e){var t=e.icon,r=e.message,n=e.className;return f().createElement("div",{className:n},t&&f().createElement("span",{className:"icon"},f().createElement(m.Icon,{icon:t})),f().createElement("span",{className:"text"},f().createElement(m.Text,{size:"xs"},r)))},sl=(0,h.observer)((function(e){var t=e.mockZoomInOut,r=ya().dashboard.onZoomInOutClick;return f().createElement("div",{className:"load-strategy__preview-workspace-controls"},f().createElement(m.Icon,{icon:"IcAddRounded",className:"load-strategy__preview-workspace-icon",onClick:function(){t?t(!0):r(!0)},data_testid:"zoom-in"}),f().createElement(m.Icon,{icon:"IcMinusRounded",className:"load-strategy__preview-workspace-icon",onClick:function(){t?t(!1):r(!1)},data_testid:"zoom-out"}))}));function ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const fl=(0,h.observer)((function(){var e,t,r=v().ui,n=ya(),o=n.dashboard,a=n.load_modal,i=n.blockly_store,l=o.active_tab,c=o.active_tour,s=a.handleFileChange,d=a.loaded_local_file,p=a.setLoadedLocalFile,h=a.imported_strategy_type,y=a.is_open_button_loading,b=f().useRef(null),g=(e=f().useState(!0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ul(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ul(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=g[0],w=g[1],k=r.is_desktop,x=i.is_loading;return(0,u.useEffect)((function(){d&&E&&"pending"!==h&&!x&&"old"===h&&(0,ie.N)(le.UC.strategy_conversion,void 0,{closeButton:!1})}),[d,E,h,y,x]),d&&E?f().createElement("div",{className:"load-strategy__container load-strategy__container--has-footer"},f().createElement("div",{className:_a()("load-strategy__local-preview",{"load-strategy__local-preview--active":1===l&&c})},f().createElement("div",{className:"load-strategy__title"},f().createElement(_.Localize,{i18n_default_text:"Preview"})),f().createElement("div",{className:"load-strategy__preview-workspace"},f().createElement("div",{id:"load-strategy__blockly-container",style:{height:"100%"}},f().createElement("div",{className:"load-strategy__local-preview-close"},f().createElement(m.Icon,{data_testid:"dt_load-strategy__local-preview-close",icon:"IcCross",onClick:function(){return p(null)}})),f().createElement(sl,null)))),!k&&f().createElement("div",{className:"load-strategy__local-footer"},f().createElement(ll,null))):f().createElement("div",{className:"load-strategy__container"},f().createElement("div",{className:"load-strategy__local-dropzone"},f().createElement("input",{type:"file",ref:b,accept:"application/xml, text/xml",style:{display:"none"},onChange:function(e){return w(s(e,!1))},"data-testid":"dt-load-strategy-file-input"}),f().createElement(cl,{message:(0,_.localize)("Importing XML files from Binary Bot and other third-party platforms may take longer."),icon:"IcInfoOutline",className:"load-strategy__section_message"}),f().createElement("div",{"data-testid":"dt__local-dropzone-area",className:"load-strategy__local-dropzone-area",onDrop:function(e){s(e,!1)}},k?f().createElement(f().Fragment,null,f().createElement(m.Icon,{icon:"IcPc",className:"load-strategy__local-icon",size:k?128:96}),f().createElement("div",{className:"load-strategy__local-title"},f().createElement(_.Localize,{i18n_default_text:"Drag your XML file here"})),f().createElement("div",{className:"load-strategy__local-description"},f().createElement(_.Localize,{i18n_default_text:"or, if you prefer..."}))):f().createElement(m.Icon,{icon:"IcLocal",className:"load-strategy__local-icon",size:k?128:96}),f().createElement(m.Button,{text:E?(0,_.localize)("Select an XML file from your device"):(0,_.localize)("Please upload an XML file"),"data-testid":"dt_load-strategy__local-upload",onClick:function(){var e;return null==b||null===(e=b.current)||void 0===e?void 0:e.click()},has_effect:!0,primary:!0,large:!0}))))}));var dl=(0,h.observer)((function(e){var t=e.workspace,r=ya(),n=r.load_modal,o=r.blockly_store.setLoading,a=n.getRecentFileIcon,i=n.getSaveType,l=n.loadStrategyOnModalRecentPreview,c=n.selected_strategy_id,s=n.updateXmlValuesOnStrategySelection;return f().createElement("div",{className:_a()("load-strategy__recent-item",{"load-strategy__recent-item--selected":c===t.id}),key:t.id,onClick:function(){c!==t.id&&(o(!0),l(t.id),s())},"data-testid":"dt_recent_workspace_item"},f().createElement("div",{className:"load-strategy__recent-item-text"},f().createElement("div",{className:"load-strategy__recent-item-title",title:t.name},t.name),f().createElement("div",{className:"load-strategy__recent-item-time"},(0,p.timeSince)(t.timestamp))),f().createElement("div",{className:"load-strategy__recent-item-location"},f().createElement(m.Icon,{icon:a(t.save_type),className:_a()({"load-strategy__recent-icon--active":t.save_type===Dn.e.GOOGLE_DRIVE})}),f().createElement("div",{className:"load-strategy__recent-item-saved"},i(t.save_type))))}));const pl=dl;var ml=(0,h.observer)((function(){var e=ya().load_modal,t=e.is_explanation_expand,r=e.recent_strategies,n=e.toggleExplanationExpand;return r.length?f().createElement("div",{className:"load-strategy__container load-strategy__container--has-footer"},f().createElement("div",{className:"load-strategy__recent"},f().createElement("div",{className:"load-strategy__recent__files"},r.map((function(e){return f().createElement(pl,{key:e.id,workspace:e})}))),f().createElement("div",{className:"load-strategy__recent__preview"},f().createElement("div",{className:"load-strategy__title load-strategy__recent-preview-title"},f().createElement(_.Localize,{i18n_default_text:"Preview"})),f().createElement("div",{className:"load-strategy__preview-workspace"},f().createElement("div",{id:"load-strategy__blockly-container",style:{height:"100%"}},f().createElement(sl,null)))))):f().createElement("div",{className:"load-strategy__container"},f().createElement("div",{className:"load-strategy__recent__empty","data-testid":"dt-load-strategy__recent__empty"},f().createElement(m.Icon,{icon:"IcEmptyFolder",className:"load-strategy__recent__empty-icon",size:128}),f().createElement("div",{className:"load-strategy__recent__empty-title"},f().createElement(_.Localize,{i18n_default_text:"You do not have any recent bots"})),f().createElement("div",{className:"load-strategy__recent__empty-description"},f().createElement(_.Localize,{i18n_default_text:"Create one or upload one from your local drive or Google Drive."})),f().createElement("div",{tabIndex:0,className:"load-strategy__recent__empty-expand","data-testid":"dt-load-strategy__recent__empty-expand",onClick:n,onKeyDown:function(e){"Enter"===e.key&&n()}},f().createElement(_.Localize,{i18n_default_text:"Why can't I see my recent bots?"})),f().createElement("div",{"data-testid":t?"dt-empty-explanation-list--open":"dt-empty-explanation-list--close",className:_a()("load-strategy__recent__empty-explanation",{"load-strategy__recent__empty-explanation--show":t})},f().createElement("div",null,f().createElement(_.Localize,{i18n_default_text:"If you've recently used bots but don't see them in this list, it may be because you:"})),f().createElement("ol",{className:"load-strategy__recent__empty-explanation-list"},f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"1. Logged in from a different device"})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"2. Logged in from a different browser"})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"3. Cleared your browser cache"}))))))}));const hl=ml;const yl=(0,h.observer)((function(){var e=ya(),t=e.load_modal,r=e.dashboard,n=t.is_open_button_loading,o=t.is_open_button_disabled,a=t.loadStrategyOnBotBuilder,i=t.toggleLoadModal,l=r.setOpenSettings;return f().createElement(m.Button,{text:(0,_.localize)("Open"),onClick:function(){a(),i(),l(le.Dc.BOT_IMPORT)},is_loading:n,has_effect:!0,primary:!0,large:!0,disabled:o})}));const vl=(0,h.observer)((function(){var e=v().ui,t=ya(),r=t.load_modal,n=t.dashboard,o=r.active_index,a=r.is_load_modal_open,i=r.loaded_local_file,l=r.onEntered,c=r.recent_strategies,s=r.setActiveTabIndex,u=r.toggleLoadModal,d=r.tab_name,p=n.setPreviewOnPopup,h=e.is_desktop,y=(0,_.localize)("Load strategy"),b=function(e){var t;s(e),t={load_strategy_tab:Yr[e+(h?0:1)]}.load_strategy_tab,z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.SWITCH_LOAD_STRATEGY_TAB,form_name:ar,load_strategy_tab:t,subform_name:"load_strategy",subpage_name:"bot_builder"}}}])};if(!h)return f().createElement(m.MobileFullPageModal,{is_modal_open:a,className:"load-strategy__wrapper",header:y,onClickClose:function(){p(!1),u(),$r({subform_name:"load_strategy",load_strategy_tab:Yr[o+1]})},height_offset:"80px",page_overlay:!0},f().createElement(m.Tabs,{active_index:o,onTabItemClick:b,top:!0},f().createElement("div",{label:(0,_.localize)("Local")},f().createElement(fl,null)),f().createElement("div",{label:"Google Drive"},f().createElement(il,null))));var g=!!i&&d===xn.TAB_LOCAL,E=c.length>0&&d===xn.TAB_RECENT;return f().createElement(m.Modal,{title:y,className:"load-strategy",width:"1000px",height:"80vh",is_open:a,toggleModal:function(){u(),$r({subform_name:"load_strategy",load_strategy_tab:Yr[o+(h?0:1)]})},onEntered:l,elements_to_ignore:[document.querySelector(".injectionDiv")]},f().createElement(m.Modal.Body,null,f().createElement(m.Tabs,{active_index:o,onTabItemClick:b,top:!0,header_fit_content:!0},f().createElement("div",{label:(0,_.localize)("Recent")},f().createElement(hl,null)),f().createElement("div",{label:(0,_.localize)("Local")},f().createElement(fl,null)),f().createElement("div",{label:"Google Drive"},f().createElement(il,null)))),E&&f().createElement(m.Modal.Footer,{has_separator:!0},f().createElement(yl,null)),g&&f().createElement(m.Modal.Footer,{has_separator:!0},f().createElement(ll,null)))})),_l=function(e){var t=e.icon,r=e.text,n=e.google_drive_connected,o=e.onDriveConnect,a="Google Drive"===r;return f().createElement("div",{className:"save-type__container"},f().createElement("div",{className:"save-type__radio"},t&&f().cloneElement(t,{className:_a()("save-type__icon",{"save-type__icon--active":a&&n,"save-type__icon--disabled":a&&!n},t.props.className)}),f().createElement(m.Text,{as:"p",align:"center",size:"xxs",color:a&&!n?"disabled":"prominent",line_height:"s",className:"save-type__radio-text"},(0,_.localize)(r))),a&&f().createElement(m.Text,{as:"p",align:"center",size:"xs",weight:"bold",styles:{color:"var(--brand-red-coral)"},className:"save-type__drive-status",onClick:o},(0,_.localize)(n?(0,_.localize)("Disconnect"):(0,_.localize)("Connect"))))};function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(null,arguments)}var gl=function(e){var t=e.bot_name,r=e.button_status,n=e.is_authorised,o=e.onConfirmSave,a=e.onDriveConnect,i=e.validateBotName,l=e.toggleSaveModal,c=e.is_mobile,s=e.is_onscreen_keyboard_active,u=e.setCurrentFocus;return f().createElement(Ya.Formik,{initialValues:{is_local:!0,save_as_collection:!1,bot_name:t===p.config.default_file_name?"":t},validate:i,onSubmit:o},(function(e){var t=e.values.is_local,o=e.setFieldValue,i=e.touched,d=e.errors,h=c?"calc(100%)":"500px";return f().createElement(m.ThemedScrollbars,{height:h,autohide:!0},f().createElement(Ya.Form,{className:_a()({"form--active-keyboard":s})},f().createElement("div",{className:"modal__content"},f().createElement(m.Text,{size:"xs",line_height:"l"},(0,_.localize)("Enter your bot name, choose to save on your computer or Google Drive, and hit "),f().createElement("strong",null,(0,_.localize)("Save."))),f().createElement("div",{className:"modal__content-row"},f().createElement(Ya.Field,{name:"bot_name"},(function(e){var t=e.field;return f().createElement(m.Input,bl({className:"save-type__input",type:"text",placeholder:(0,_.localize)("Untitled Strategy"),error:i[t.name]&&d[t.name],label:(0,_.localize)("Bot name"),onFocus:function(e){return u(e.currentTarget.name)},onBlur:function(){return u(null)}},t))}))),f().createElement("div",{className:"modal__content-row"},f().createElement(m.RadioGroup,{className:"radio-group__save-type",name:"is_local",selected:function(){return n&&!t?p.save_types.GOOGLE_DRIVE:p.save_types.LOCAL},onToggle:function(){return o("is_local",!t)}},f().createElement(m.RadioGroup.Item,{id:"local",label:f().createElement(_l,{text:(0,_.localize)("Local"),icon:f().createElement(m.Icon,{icon:c?"IcLocal":"IcMyComputer",size:48})}),value:p.save_types.LOCAL}),f().createElement(m.RadioGroup.Item,{id:"drive",label:f().createElement(_l,{text:"Google Drive",icon:f().createElement(m.Icon,{icon:"IcGoogleDrive",size:48}),google_drive_connected:n,onDriveConnect:a}),value:p.save_types.GOOGLE_DRIVE,disabled:!n,className:_a()({"dc-radio-group__item-disabled":!n})})))),f().createElement("div",{className:_a()("modal__footer",{"modal__footer--active-keyboard":s})},f().createElement(m.Button,{type:"button",className:"modal__footer--button",text:(0,_.localize)("Cancel"),onClick:l,secondary:!0}),f().createElement(m.Button,{className:"modal__footer--button",type:"submit",is_loading:1===r,is_submit_success:2===r,text:(0,_.localize)("Save"),primary:!0}))))}))},El=(0,h.observer)((function(){var e=ya(),t=e.save_modal,r=e.google_drive,n=e.dashboard,o=e.load_modal,a=v().ui,i=o.dashboard_strategies,l=t.button_status,c=t.bot_name,s=t.is_save_modal_open,d=t.onConfirmSave,p=t.toggleSaveModal,h=t.updateBotName,y=t.validateBotName,b=r.is_authorised,g=r.onDriveConnect,E=a.is_onscreen_keyboard_active,w=a.setCurrentFocus,k=a.is_mobile,x=n.active_tab;return(0,u.useEffect)((function(){var e,t;1===x&&h(null!==(e=null==i||null===(t=i[0])||void 0===t?void 0:t.name)&&void 0!==e?e:"")}),[x,i,h]),k?f().createElement(m.MobileFullPageModal,{is_modal_open:s,className:"save-modal__wrapper",header:(0,_.localize)("Save strategy"),onClickClose:p,height_offset:"80px",page_overlay:!0},f().createElement(gl,{bot_name:c,button_status:l,is_authorised:b,onConfirmSave:d,onDriveConnect:g,validateBotName:y,toggleSaveModal:p,is_mobile:k,is_onscreen_keyboard_active:E,setCurrentFocus:w})):f().createElement(m.Modal,{title:(0,_.localize)("Save strategy"),className:"modal--save",width:"32.8rem",height:"50rem",is_open:s,toggleModal:p},f().createElement(gl,{bot_name:c,button_status:l,is_authorised:b,onConfirmSave:d,onDriveConnect:g,validateBotName:y,toggleSaveModal:p,setCurrentFocus:w}))}));const wl=El;var kl=r(9339);function xl(e){return xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xl(e)}var Sl=["steps","styles","handleCallback"];function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(null,arguments)}function Tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ll(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(r),!0).forEach((function(t){Al(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Al(e,t,r){return(t=function(e){var t=function(e){if("object"!=xl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=xl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nl={fontWeight:"700",fontSize:"1.4rem",height:"4rem",padding:"1rem 1.6rem"};const Cl=function(e){var t=e.steps,r=e.styles,n=e.handleCallback,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Sl);return f().createElement(kl.Ay,Ol({steps:t,continuous:!0,callback:n,locale:{back:(0,_.localize)("Previous"),next:(0,_.localize)("Next")}},o,{styles:Ll({options:{arrowColor:"var(--general-main-2)",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",width:440},buttonBack:Ll({border:"0.2rem solid var(--text-less-prominent)",marginInlineEnd:"1rem",borderRadius:"0.4rem",color:"var(--text-general)"},Nl),buttonNext:Ll({},Nl),buttonClose:{insetInlineEnd:"0px",right:"unset"},overlay:{height:"100%"}},r)}))};const Pl=(0,h.observer)((function(){var e=v().ui,t=ya().dashboard,r=t.is_tour_dialog_visible,n=t.setTourDialogVisibility,o=e.is_desktop;return f().createElement("div",null,f().createElement(m.Dialog,{is_visible:r,confirm_button_text:(0,_.localize)("OK"),onConfirm:function(){n(!1)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1},f().createElement("div",{className:"dc-dialog__content__header"},f().createElement(m.Text,{weight:"bold",color:"prominent",size:o?"s":"xs"},(0,_.localize)("Congratulations"))),f().createElement("div",{className:"dc-dialog__content__description"},f().createElement(m.Text,{size:o?"xs":"xxs",color:"prominent"},f().createElement(f().Fragment,null,f().createElement("div",{className:"dc-dialog__content__description__text","data-testid":"tour-success-message"},f().createElement(_.Localize,{key:0,i18n_default_text:"You have successfully created your bot using a simple strategy."})),f().createElement("div",{className:"dc-dialog__content__description__text"},f().createElement(_.Localize,{key:0,i18n_default_text:"Now, <0>run the bot</0> to test out the strategy.",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"dc-dialog__content__description__text"},f().createElement(_.Localize,{key:0,i18n_default_text:"Note: If you wish to learn more about the Bot Builder, you can proceed to the <0>Tutorials</0> tab.",components:[f().createElement("strong",{key:0})]})))))))}));var Il=r(2872);const jl=(0,h.observer)((function(e){var t=e.content,r=e.media,n=e.label,o=e.step_index,a=e.has_localize_component,i=void 0!==a&&a,l=e.show_actions,c=void 0===l||l;return f().createElement(f().Fragment,null,f().createElement("div",{className:"onboard"},c&&f().createElement("div",{className:"onboard__header"},f().createElement(m.Text,{color:"less-prominent",line_height:"l"},o,"/6")),f().createElement("div",{className:"onboard__steps"},f().createElement("div",{className:"onboard__label"},f().createElement(m.Text,{as:"p",line_height:"l",weight:"bold"},n)),r&&f().createElement("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",style:{width:"100%"},src:r}),f().createElement("div",{className:"onboard__content"},f().createElement(f().Fragment,null,t.map((function(e,t){return i?e:f().createElement("div",{className:"onboard__content__block",key:"onboard--".concat((0,Il.yk)())},f().createElement(m.Text,{align:"left",as:"p",size:"xs",line_height:"l"},e))})))))))}));function zl(e){return zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(e)}function Rl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(r),!0).forEach((function(t){Bl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bl(e,t,r){return(t=function(e){var t=function(e){if("object"!=zl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=zl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ml={showProgress:!1,spotlightClicks:!1,disableBeacon:!0,disableOverlay:!0,disableCloseOnEsc:!0},Ul=[Dl(Dl({target:"#id-bot-builder",content:f().createElement(jl,{label:(0,_.localize)("Build from scratch"),content:[(0,_.localize)("Create your bot using our drag-and-drop blocks or click Quick Strategy to choose from the ready-to-use bot templates."),(0,_.localize)("We also provide a guide on the Tutorial tab to show you how you can build and execute a simple strategy.")],media:(0,z.getUrlBase)("/public/videos/dbot-onboarding-tour-step-1.mp4"),step_index:1})},Ml),{},{disableOverlay:!1}),Dl(Dl({target:"#id-charts",content:f().createElement(jl,{label:(0,_.localize)("Monitor the market"),content:[(0,_.localize)("View the market price of your favourite assets.")],media:(0,z.getUrlBase)("/public/videos/dbot-onboarding-tour-step-2.mp4"),step_index:2})},Ml),{},{disableOverlay:!1}),Dl(Dl({target:"#id-tutorials",content:f().createElement(jl,{label:(0,_.localize)("Learn more with our tutorials"),content:[(0,_.localize)("Explore the video guides and FAQs to build your bot in the tutorials tab.")],media:(0,z.getUrlBase)("/public/videos/dbot-onboarding-tour-step-3.mp4"),step_index:3})},Ml),{},{disableOverlay:!1}),Dl(Dl({target:"#tab__dashboard__table__tiles",content:f().createElement(jl,{label:(0,_.localize)("Use these shortcuts"),content:[(0,_.localize)("You can also import or build your bot using any of these shortcuts.")],step_index:4}),placement:(0,kn.Qq)()?"left":"right"},Ml),{},{disableOverlay:!1}),Dl(Dl({target:".dc-drawer__container",content:f().createElement(jl,{label:(0,_.localize)("Check your bot’s performance"),content:[(0,_.localize)("See how your bot is doing in real-time.")],media:(0,z.getUrlBase)("/public/videos/dbot-onboarding-tour-step-5.mp4"),step_index:5}),placement:(0,kn.Qq)()?"right":"left"},Ml),{},{disableOverlay:!1}),Dl(Dl({target:".animation__wrapper",content:f().createElement(jl,{label:(0,_.localize)("Run your bot"),content:[f().createElement(_.Localize,{key:"run your bot",i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[f().createElement("strong",{key:0})]})],media:(0,z.getUrlBase)("/public/videos/dbot-onboarding-tour-step-6.mp4"),step_index:6})},Ml),{},{disableOverlay:!1}),Dl(Dl({target:"#id-tutorials",content:f().createElement(jl,{label:(0,_.localize)("Want to retake the tour?"),content:[f().createElement(m.Text,{key:"".concat(0,"-id-tutorials"),as:"p"},f().createElement(_.Localize,{i18n_default_text:"Head to the Tutorials tab to do so."}))],step_index:7,show_actions:!1,has_localize_component:!0}),locale:{last:(0,_.localize)("Got it, thanks!")}},Ml),{},{hideBackButton:!0,disableOverlay:!1})],Fl=function(e){var t=e.show_label,r=void 0!==t&&t;return f().createElement("div",{className:"joyride-content"},r&&f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Step 1 :"})),f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"First, set the <0>Trade parameters</0> block.",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left joyride-content__sub-title"},f().createElement(_.Localize,{i18n_default_text:"<0>1. Trade parameters:<0>",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left"},f().createElement("ul",null,f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"First, set <0>Market</0> to Derived > Continuous Indices > Volatility 100 (1s) Index.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Then, set <0>Trade type</0> to Up/Down > Rise/Fall.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"For <0>Contract type,</0> set it to Both.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"For <0>Default candle interval,</0> set it to 1 minute",components:[f().createElement("strong",{key:0})]})))))},Gl=function(){return f().createElement("div",{className:"joyride-content"},f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"For <0>Trade options</0>, set it as below:",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left"},f().createElement("ul",null,f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"<0>Duration</0>: Ticks 1",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"<0>Stake: USD</0> 10 (min: 0.35 - max: 50000)",components:[f().createElement("strong",{key:0})]})))))},ql=function(e){var t=e.show_label,r=void 0!==t&&t;return f().createElement("div",{className:"joyride-content"},r&&f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Step 2 :"})),f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Then, set the <0>Purchase conditions</0> block.",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left joyride-content__sub-title"},f().createElement(_.Localize,{i18n_default_text:"<0>2. Purchase conditions</0>:",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left"},f().createElement("ul",null,f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"<0>Purchase</0>: Rise",components:[f().createElement("strong",{key:0})]})))))},Vl=function(e){var t=e.show_label,r=void 0!==t&&t;return f().createElement("div",{className:"joyride-content"},r&&f().createElement("div",{className:"joyride-content__left joyride-content__left__step-three"},f().createElement(_.Localize,{i18n_default_text:"Step 3 :"})),f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"The third block is <0>optional</0>. You may use this block if you want to sell your contract before it expires. For now, leave the block as it is. ",components:[f().createElement("strong",{key:0})]})))},Yl=function(e){var t=e.show_label,r=void 0!==t&&t;return f().createElement("div",{className:"joyride-content"},r&&f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Step 4 :"})),f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Next, go to <0>Utility tab</0> under the Blocks menu. Tap the drop-down arrow and hit <0>Loops</0>.",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left"},f().createElement("ul",null,f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Look for the <0>Repeat While/Until</0>, and click the + icon to add the block to the workspace area.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Choose <0>until</0> as the repeat option.",components:[f().createElement("strong",{key:0})]}))),f().createElement("div",{className:"joyride-content__left joyride-content__with-icon"},f().createElement("div",{className:"joyride-content__with-icon__left"},f().createElement(m.Icon,{icon:"IcCheckmarkCircle",className:"db-contract-card__result-icon",color:"green"})),f().createElement("div",{className:"joyride-content__with-icon__right"},f().createElement(_.Localize,{i18n_default_text:"Pro tip: You can also click and drag out the desired block",components:[f().createElement("strong",{key:0})]})))),f().createElement("div",null,f().createElement("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload"},f().createElement("source",{src:(0,z.getUrlBase)("/public/videos/bot-builder-tour-step-4.mp4"),type:"video/mp4"}))))},Hl=function(e){var t=e.show_label,r=void 0!==t&&t;return f().createElement("div",{className:"joyride-content"},r&&f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Step 5 :"})),f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Now, tap the <0>Analysis</0> drop-down arrow and hit <0>Contract</0>.",components:[f().createElement("strong",{key:0})]})),f().createElement("div",{className:"joyride-content__left"},f().createElement("ul",null,f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Go to the <0>Last trade result</0> block and click + icon to add the <0>Result is Win</0> block to the workspace.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Then, drag the <0>Result is win</0> into the empty slot next to <0>repeat until</0> block.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Now, go to the <0>Restart trading conditions</0> block.",components:[f().createElement("strong",{key:0})]})),f().createElement("li",null,f().createElement(_.Localize,{i18n_default_text:"Drag the <0>Trade again</0> block and add it into the <0>do</0> part of the <0>Repeat until</0> block.",components:[f().createElement("strong",{key:0})]})))),f().createElement("div",null,f().createElement("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload"},f().createElement("source",{src:(0,z.getUrlBase)("/public/videos/bot-builder-tour-step-5.mp4"),type:"video/mp4"}))))},Wl=function(e){var t=e.show_label,r=void 0!==t&&t;return f().createElement("div",{className:"joyride-content"},r&&f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Step 6 :"})),f().createElement("div",{className:"joyride-content__left"},f().createElement(_.Localize,{i18n_default_text:"Finally, drag and add the whole <0>Repeat</0> block to the <0>Restart trading conditions</0> block.",components:[f().createElement("strong",{key:0})]})))},Kl=[Dl({target:".animation__wrapper",content:f().createElement(Fl,{show_label:!0}),placement:(0,kn.Qq)()?"bottom":"right"},Ml),Dl({target:".animation__wrapper",content:f().createElement(Gl,null),placement:(0,kn.Qq)()?"bottom":"right"},Ml),Dl({target:".animation__wrapper",content:f().createElement(ql,{show_label:!0}),placement:(0,kn.Qq)()?"bottom":"right"},Ml),Dl({target:".animation__wrapper",content:f().createElement(Vl,{show_label:!0}),placement:(0,kn.Qq)()?"bottom":"right"},Ml),Dl({target:".animation__wrapper",content:f().createElement(Yl,{show_label:!0}),placement:(0,kn.Qq)()?"bottom":"right"},Ml),Dl({target:".animation__wrapper",content:f().createElement(Hl,{show_label:!0}),placement:(0,kn.Qq)()?"bottom":"right"},Ml),Dl({target:".animation__wrapper",content:f().createElement(Wl,{show_label:!0}),locale:{last:(0,_.localize)("Next")}},Ml)],$l=[{header:(0,_.localize)("Step 1"),content:[f().createElement(_.Localize,{key:"step-1",i18n_default_text:"First, click the Import icon on the tool bar."})],tour_step_key:1},{header:(0,_.localize)("Step 2"),content:[f().createElement(_.Localize,{key:"step-2",i18n_default_text:"Next, import your bot directly from your mobile device or from Google Drive."})],tour_step_key:2},{header:(0,_.localize)("Step 3"),content:[f().createElement(_.Localize,{key:"step-3",i18n_default_text:"Once imported, you will see a preview of the bot on the workspace. Click run to start trading with this bot."})],tour_step_key:3}],Xl=[{header:(0,_.localize)("Get started on Deriv Bot"),content:[f().createElement(_.Localize,{key:"get-started-on-deriv-bot",i18n_default_text:"Hi! Hit <0>Start</0> for a quick tour.",components:[f().createElement("strong",{key:0})]})],tour_step_key:1},{header:(0,_.localize)("Import or choose your bot"),content:[f().createElement(_.Localize,{key:"import-or-choose-your-bot",i18n_default_text:"Import your bot or tap Quick Strategies to choose from the ready-to-use bot templates."})],media:(0,z.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-1.mp4"),tour_step_key:2},{header:(0,_.localize)("Monitor the market"),content:[f().createElement(_.Localize,{key:"monitor-the-market",i18n_default_text:"View the market price of your favourite assets."})],media:(0,z.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-2.mp4"),tour_step_key:3},{header:(0,_.localize)("Learn more with our tutorials"),content:[f().createElement(_.Localize,{key:"learn-more-with-our-tutorials",i18n_default_text:"Explore the video guides and FAQs to build your bot in the tutorials tab."})],media:(0,z.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-3.mp4"),tour_step_key:4},{header:(0,_.localize)("Use these shortcuts"),img:c("dbot-mobile-onboarding-step-4.png"),content:[f().createElement(_.Localize,{key:"use-these-shortcuts",i18n_default_text:"You can also import or build your bot using any of these shortcuts."})],tour_step_key:5},{header:(0,_.localize)("Check your bot’s performance"),media:(0,z.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-5.mp4"),content:[f().createElement(_.Localize,{key:"check-your-bots-performance",i18n_default_text:"See how your bot is doing in real-time."})],tour_step_key:6},{header:(0,_.localize)("Run your bot"),media:(0,z.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-6.mp4"),content:[f().createElement(_.Localize,{key:"run-your-bot",i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[f().createElement("strong",{key:0})]})],tour_step_key:7},{header:(0,_.localize)("Want to retake the tour?"),img:c("dbot-mobile-onboarding-step-7.png"),content:[f().createElement(_.Localize,{key:"want-to-retake-the-tour",i18n_default_text:"Head to the Tutorials tab to do so."})],tour_step_key:8}],Ql=f().createElement(_.Localize,{key:"onboarding-tour-header",i18n_default_text:"Get started on Deriv Bot"});const Jl=(0,h.observer)((function(){var e=v().ui,t=ya().dashboard,r=t.active_tab,n=t.is_tour_dialog_visible,o=t.setTourDialogVisibility,a=t.setActiveTour,i=t.setShowMobileTourDialog,l=e.is_desktop,c=0===r?"onboard_tour_token":"bot_builder_token",s=r===q.DASHBOARD,u=l?f().createElement(_.Localize,{key:"tour-dialog-info-desktop",i18n_default_text:"Learn how to build your bot from scratch using a simple strategy."}):f().createElement(_.Localize,{key:"tour-dialog-info-mobile",i18n_default_text:"Here’s a quick guide on how to use Deriv Bot on the go."}),d=!l?f().createElement(_.Localize,{key:"tour-dialog-action-mobile",i18n_default_text:"You can import a bot from your mobile device or from Google drive, see a preview in the bot builder, and start trading by running the bot."}):f().createElement(_.Localize,{key:"tour-dialog-action-desktop",i18n_default_text:"Hit the <0>Start</0> button to begin and follow the tutorial."}),p=l?"s":"xs",h=l?"xs":"xxs",y=0===r?Ql:function(e){return e?f().createElement(_.Localize,{key:"tour_header-mobile",i18n_default_text:"Bot Builder guide"}):f().createElement(_.Localize,{key:"tour_header-desktop",i18n_default_text:"Let's build a Bot!"})}(!l);return f().createElement("div",null,f().createElement(m.Dialog,{is_visible:n,cancel_button_text:(0,_.localize)("Skip"),onCancel:function(){return l||i(!1),o(!1),a(""),void we((new Date).getTime(),c)},confirm_button_text:(0,_.localize)("Start"),onConfirm:function(){a(ke[r]),l||i(!1),o(!1),we((new Date).getTime(),c)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1},f().createElement("div",{className:"dc-dialog__content__header"},f().createElement(m.Text,{weight:"bold",color:"prominent",size:p},y)),f().createElement("div",{className:"dc-dialog__content__description"},f().createElement(m.Text,{size:h,color:"prominent"},f().createElement(f().Fragment,null,s?f().createElement(_.Localize,{key:0,i18n_default_text:"Hi! Hit <0>Start</0> for a quick tour.",components:[f().createElement("strong",{key:0})]}):f().createElement(f().Fragment,null,f().createElement("div",{className:"dc-dialog__content__description__text"},u),f().createElement("div",{className:"dc-dialog__content__description__text"},d),f().createElement("div",{className:"dc-dialog__content__description__text"},f().createElement(_.Localize,{key:0,i18n_default_text:"Note: You can also find this tutorial in the <0>Tutorials</0> tab.",components:[f().createElement("strong",{key:0})]}))))))))}));function Zl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ec(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ec(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tc=function(){var e=Zl((0,u.useState)(!1),2),t=e[0],r=e[1],n=Zl((0,u.useState)(!1),2),o=n[0],a=n[1];return{is_finished:t,handleJoyrideCallback:function(e){var t=e.action;"finished"===e.status?r(!0):"close"!==t&&"skip"!==t||a(!0)},setIsFinished:r,is_close_tour:o,setIsCloseTour:a}};const rc=(0,h.observer)((function(){var e=tc(),t=e.is_close_tour,r=e.is_finished,n=e.handleJoyrideCallback,o=e.setIsCloseTour,a=ya().dashboard,i=a.active_tab,l=a.active_tour,c=a.setActiveTour,s=a.setTourDialogVisibility;return H("bot_builder_token")||1!==i||s(!0),f().useEffect((function(){r?(s(!0),c("")):t&&(c(""),o(!1))}),[t,r,c,o,s]),f().createElement(f().Fragment,null,r?f().createElement(Pl,null):f().createElement(Jl,null),l&&f().createElement(Cl,{handleCallback:n,steps:Kl,styles:{options:{arrowColor:"transparent",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)"}}}))}));var nc=["label","type"];function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}const ac=function(e){var t=e.label,r=e.type,n=void 0===r?"default":r,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,nc);return t?f().createElement("button",oc({className:n},o),f().createElement(m.Text,{color:"prominent",align:"center",weight:"bold",as:"span",line_height:"s",size:"xs"},t)):null};function ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const lc=(0,h.observer)((function(){var e,t,r=ya(),n=r.dashboard,o=r.load_modal,a=r.quick_strategy,i=o.toggleTourLoadModal,l=n.onTourEnd,c=n.setTourActiveStep,s=n.active_tour,u=n.show_mobile_tour_dialog,d=n.active_tab,p=n.setShowMobileTourDialog,h=n.setTourDialogVisibility,y=a.is_open,v=(e=f().useState(1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ic(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ic(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=v[0],g=v[1],E=$l.find((function(e){return e.tour_step_key===b})),w=3===b?"finish-bot-builder-tour":"next-bot-builder-tour";f().useEffect((function(){var e,t,r;c(b),!u&&(e=s,t=b,r=document.querySelector(".toolbar__group-btn svg:nth-child(2)"),e&&1===t?null==r||r.classList.add("dbot-tour-blink"):null==r||r.classList.remove("dbot-tour-blink")),2===b?i(!0):""!==s&&i(!1),H("bot_builder_token")||1!==d||(h(!y),p(!0))}),[b,u]);var k=3===b?(0,_.localize)("Finish"):(0,_.localize)("Next"),x="onboarding"===s;return f().createElement(f().Fragment,null,u&&f().createElement(Jl,null),s&&!u&&f().createElement("div",{"data-testid":"botbuilder-tour-mobile",className:"dbot-slider dbot-slider__bot-builder-tour"},f().createElement("div",{className:"dbot-slider__label"},f().createElement(m.Text,{as:"span",size:"xs",weight:"bold"},null==E?void 0:E.header)),f().createElement("div",{className:"dbot-slider__content"},f().createElement(m.Text,{as:"span",line_height:"s",size:"xxs"},null==E?void 0:E.content)),f().createElement("div",{className:"dbot-slider__status"},f().createElement("div",{className:"dbot-slider__progress-bar"},f().createElement(m.ProgressBarTracker,{step:b,steps_list:$l.map((function(e){return e.tour_step_key.toString()})),onStepChange:g})),f().createElement("div",{className:"dbot-slider__button-group"},1!==b&&f().createElement(ac,{onClick:function(){g(b-1)},label:(0,_.localize)("Previous"),"data-testid":"prev-bot-builder-tour"}),f().createElement(ac,{type:"danger",onClick:function(){g(b+1),l(b,x)},label:k,"data-testid":w})))))})),cc=(0,h.observer)((function(e){var t=e.is_mobile;return f().createElement(f().Fragment,null,t?f().createElement(lc,null):f().createElement(rc,null),";")}));var sc=r(6200),uc=r(461),fc=r.n(uc);function dc(e){return dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(e)}function pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(r),!0).forEach((function(t){hc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hc(e,t,r){return(t=function(e){var t=function(e){if("object"!=dc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=dc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yc=function(e){var t=e.form_values,r=e.selected_strategy;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:mc({action:ir.RUN_QUICK_STRATEGY,form_name:ar,subform_name:"quick_strategy",strategy_name:qr(r)},Hr({form_values:t,selected_strategy:r}))}}])},vc=function(e){var t=e.form_values,r=e.selected_strategy;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:mc({action:ir.EDIT_QUICK_STRATEGY,form_name:ar,subform_name:"quick_strategy",strategy_name:qr(r)},Hr({form_values:t,selected_strategy:r}))}}])};function _c(e){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(e)}var bc=["content_data","expanded","test_id","is_cursive","no_collapsible","has_subtitle","font_size"];function gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(r),!0).forEach((function(t){wc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wc(e,t,r){return(t=function(e){var t=function(e){if("object"!=_c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const xc=function(e){var t,r,n=e.content_data,o=e.expanded,a=void 0!==o&&o,i=e.test_id,l=void 0===i?"dbot-acc-id":i,c=e.is_cursive,s=void 0!==c&&c,d=e.no_collapsible,p=void 0===d||d,h=e.has_subtitle,y=void 0===h||h,v=e.font_size,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,bc),g=(t=(0,u.useState)(a),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return kc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kc(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=g[0],w=g[1],k=ya().quick_strategy.selected_strategy;if(!n)return null;var x=n.content,S=n.header,O=b.expanded_subtitles_storage,T=b.setExpandedSubtitlesStorage,L="".concat(S,"__").concat(k).split(" ").join("_").toLocaleLowerCase(),A=!!O&&O[L]||E||!y;return f().createElement("div",{className:"dbot-accordion"},y&&f().createElement("button",{className:_a()("dbot-accordion__navbar",{"dbot-accordion__navbar--no-event":!p}),"data-testid":l,onClick:function(e){e.preventDefault(),w(!A),O&&T&&T(Ec(Ec({},O),{},wc({},L,!A)))}},f().createElement("div",{className:_a()("dbot-accordion__header",{"dbot-accordion__header--cursive":s})},f().createElement(m.Text,{as:"span",size:v,weight:"bold"},(0,_.localize)(S))),p&&f().createElement("div",{className:"dbot-accordion__icon"},f().createElement(m.Icon,{icon:A?"IcMinus":"IcAdd"}))),f().createElement("div",{className:_a()("dbot-accordion__content",{"dbot-accordion__content--open":A}),"data-testid":"accordion-content"},f().createElement(m.Text,{as:"span",line_height:"s",size:v},x)))};var Sc=r(187);const Oc=(0,h.observer)((function(e){var t,r=e.item,n=e.font_size,o=v().ui.is_dark_mode_on,a=null!==(t=null==r?void 0:r.className)&&void 0!==t?t:"";switch(r.type){case"text":var i,l=_a()("qs__description__content ".concat(a));return f().createElement(f().Fragment,null,null==r||null===(i=r.content)||void 0===i?void 0:i.map((function(e){var t=(0,Sc.Ay)(e);return f().createElement("div",{className:l,key:e},f().createElement(m.Text,{size:n},t))})));case"text_italic":var c,s=_a()("qs__description__content italic ".concat(a));return f().createElement(f().Fragment,null,null==r||null===(c=r.content)||void 0===c?void 0:c.map((function(e){var t=(0,Sc.Ay)(e);return f().createElement("div",{className:s,key:e},f().createElement(m.Text,{size:n},t))})));case"media":var u,d=_a()("qs__description__image ".concat(a));return f().createElement("div",{className:d,style:null==r?void 0:r.styles},f().createElement("img",{src:o&&null!==(u=r.dark_src)&&void 0!==u?u:r.src,alt:r.alt}));default:return null}}));var Tc=function(e){var t=e.item,r=e.font_size,n=Array.isArray(t)?t:t.slice(1);return f().createElement(f().Fragment,null,Array.isArray(n)&&(null==n?void 0:n.map((function(e){return f().createElement(f().Fragment,{key:e.id},f().createElement(Oc,{item:e,font_size:r}))}))))};const Lc=(0,h.observer)((function(e){var t=e.tutorial_selected_strategy,r=e.grouped_objects_by_title,n=e.expanded_subtitles_storage,o=e.setExpandedSubtitlesStorage,a=v().ui.is_desktop,i=t?"s":"xs",l=f().useMemo((function(){return a?i:"xs"}),[a,i]);return f().createElement(f().Fragment,null,Array.isArray(r)&&r.map((function(e){var t,r,a,i,c,s=null!==(t=null==e||null===(r=e[0])||void 0===r||null===(a=r.content)||void 0===a?void 0:a[0])&&void 0!==t?t:"";return f().createElement(xc,{key:"accordion-".concat(s),content_data:{header:s,content:f().createElement(Tc,{item:e,font_size:l})},expanded:!(null===(i=e[0])||void 0===i||!i.expanded),is_cursive:!1,no_collapsible:null===(c=e[0])||void 0===c?void 0:c.no_collapsible,has_subtitle:!!s,expanded_subtitles_storage:n,setExpandedSubtitlesStorage:o,font_size:l})})))}));function Ac(e){return Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(e)}function Nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(r),!0).forEach((function(t){Pc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pc(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ac(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ac(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ac(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const jc=(0,h.observer)((function(e){var t,r,n,o=e.formfields,a=e.active_tab,i=e.tutorial_selected_strategy,l=ya().quick_strategy.selected_strategy,c={},s=(r=(0,u.useState)(c),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(r,n)||function(e,t){if(e){if("string"==typeof e)return Ic(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ic(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],p=s[1],m=Fr[i||l],h=Array.isArray(null==m?void 0:m.description)?null==m||null===(t=m.description)||void 0===t?void 0:t.reduce((function(e,t,r){var n;return"subtitle_italic"!==t.type&&"subtitle"!==t.type||(e.push([]),c[function(e,t){return"".concat(e.content[0],"__").concat(t).split(" ").join("_").toLowerCase()}(t,l)]=null!==(n=null==t?void 0:t.expanded)&&void 0!==n&&n),e[e.length-1].push(Cc(Cc({},t),{},{id:r})),e}),[]):[{type:"text",content:[null==m?void 0:m.description]}];return f().createElement(f().Fragment,null,"TRADE_PARAMETERS"===a?f().createElement("div",{className:"qs__body__content__form"},o):f().createElement("div",{className:"qs__body__content__description"},f().createElement(Lc,{tutorial_selected_strategy:i,grouped_objects_by_title:h,expanded_subtitles_storage:d,setExpandedSubtitlesStorage:p})))}));function zc(e){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(e)}function Rc(){Rc=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==zc(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(zc(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Dc(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Bc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Dc(a,n,o,i,l,"next",e)}function l(e){Dc(a,n,o,i,l,"throw",e)}i(void 0)}))}}const Mc=function(){var e=v().client,t=e.currency,r=e.balance,n=e.is_logged_in,o=(0,Ya.useFormikContext)(),a=o.submitForm,i=o.setFieldValue,l=o.values,c=o.isValid,s=o.validateForm,u=ya(),f=u.quick_strategy,d=u.run_panel,p=f.toggleStopBotDialog,m=f.setLossThresholdWarningData,h=f.selected_strategy,y=f.loss_threshold_warning_data,_=f.onSubmit,b=function(){var e=Bc(Rc().mark((function e(){var o,a,i,c,s,u,f;return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Number(null!==(o=null==l?void 0:l.loss)&&void 0!==o?o:0),s=Number(null!==(a=null==l?void 0:l.profit)&&void 0!==a?a:0),u=null===(i=localStorage)||void 0===i?void 0:i.getItem("qs-dont-show-loss-threshold-warning"),f=JSON.parse(null!=u?u:"false"),!y.already_shown&&(c>.5*Number(null!=r?r:0)||c>2*s)&&n&&!f?m({show:!0,loss_amount:c,currency:t,already_shown:!0}):g();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Bc(Rc().mark((function e(){return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.is_running){e.next=9;break}return e.next=3,i("action","EDIT");case 3:s(),a(),p(),yc({form_values:l,selected_strategy:h}),e.next=13;break;case 9:return e.next=11,i("action","RUN");case 11:s(),a().then((function(e){c&&e&&(yc({form_values:l,selected_strategy:h}),_(e))}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleSubmit:b,proceedFormSubmission:g}};var Uc=r(2690),Fc=r(1188),Gc=function(e){return e[e.StrategySelect=0]="StrategySelect",e[e.StrategyVerified=1]="StrategyVerified",e[e.StrategyCompleted=2]="StrategyCompleted",e}({}),qc=Object.freeze({ALL:0,ACCUMULATORS:1,OPTIONS:2}),Vc=[(0,_.localize)("All"),(0,_.localize)("Accumulators"),(0,_.localize)("Options")],Yc=[{name:"MARTINGALE",display_name:Fr.MARTINGALE.label,id:0,parent:[(0,_.localize)("Options")]},{name:"D_ALEMBERT",display_name:Fr.D_ALEMBERT.label,id:1,parent:[(0,_.localize)("Options")]},{name:"REVERSE_MARTINGALE",display_name:Fr.REVERSE_MARTINGALE.label,id:2,parent:[(0,_.localize)("Options")]},{name:"REVERSE_D_ALEMBERT",display_name:Fr.REVERSE_D_ALEMBERT.label,id:3,parent:[(0,_.localize)("Options")]},{name:"OSCARS_GRIND",display_name:Fr.OSCARS_GRIND.label,id:4,parent:[(0,_.localize)("Options")]},{name:"STRATEGY_1_3_2_6",display_name:Fr.STRATEGY_1_3_2_6.label,id:5,parent:[(0,_.localize)("Options")]},{name:"ACCUMULATORS_MARTINGALE",display_name:Fr.ACCUMULATORS_MARTINGALE.label,id:6,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_MARTINGALE_ON_STAT_RESET",display_name:Fr.ACCUMULATORS_MARTINGALE_ON_STAT_RESET.label,id:7,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_DALEMBERT",display_name:Fr.ACCUMULATORS_DALEMBERT.label,id:8,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_DALEMBERT_ON_STAT_RESET",display_name:Fr.ACCUMULATORS_DALEMBERT_ON_STAT_RESET.label,id:9,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_MARTINGALE",display_name:Fr.ACCUMULATORS_REVERSE_MARTINGALE.label,id:10,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET",display_name:Fr.ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET.label,id:11,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_DALEMBERT",display_name:Fr.ACCUMULATORS_REVERSE_DALEMBERT.label,id:12,parent:[(0,_.localize)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET",display_name:Fr.ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET.label,id:13,parent:[(0,_.localize)("Accumulators")]}];const Hc=function(e){var t=e.current_step,r=e.is_mobile,n=void 0!==r&&r,o=t===Gc.StrategyCompleted?100:50;return n?f().createElement(Fc.o,{percentage:o,label:"",danger_limit:101,is_loading:!1,warning_limit:0}):f().createElement("div",{className:"qs-stepper"},f().createElement(Uc.o,{currentStep:t,labels:[(0,_.localize)("Default"),(0,_.localize)("Strategy template"),(0,_.localize)("Trade parameters")]}))};var Wc=r(2241),Kc=r(3715),$c=r(953),Xc=r(734);function Qc(e){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(e)}function Jc(e){return function(e){if(Array.isArray(e))return Zc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ts(e,t,r){return(t=function(e){var t=function(e){if("object"!=Qc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rs=function(e){var t=e.title,r=e.items,n=e.onSelectStrategy;return r.length>0?f().createElement("div",{className:"strategy-template-picker__strategy"},f().createElement("div",{className:"strategy-template-picker__title"},f().createElement(m.Text,{size:"xs",weight:"bold"},t)),r.map((function(e,r){return f().createElement("div",{className:"strategy-template-picker__links",key:r},f().createElement(Xc.N,{hasChevron:!0,size:"sm",onClick:function(){return n(e.name,t)}},e.display_name))}))):null};const ns=function(e){var t=e.selector_chip_value,r=e.search_value,n=e.is_searching,o=e.onSelectStrategy,a=[],i=!1;Yc.filter((function(e){return e.parent.some((function(e){return function(e){return i=e.toLowerCase().includes(r.toLowerCase()),n&&i||!n}(e)}))||e.display_name.toLowerCase().includes(r.toLowerCase())})).forEach((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach((function(t){ts(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);if(n&&""!==r)if(e.display_name.toLowerCase().includes(r.toLowerCase()))t.parent=Jc(e.parent);else{var o=t.parent.filter((function(e){return e.toLowerCase().includes(r.toLowerCase())}));t.parent=o.length>0?o:e.parent}else t.parent=Jc(e.parent);a.push(t)}));var l=a.filter((function(e){return e.parent.includes(Vc[qc.OPTIONS])})),c=a.filter((function(e){return e.parent.includes(Vc[qc.MULTIPLIERS])})),s=a.filter((function(e){return e.parent.includes(Vc[qc.ACCUMULATORS])})),u=Vc[t],d=[{type:(0,_.localize)("Accumulators"),items:s},{type:(0,_.localize)("Options"),items:l},{type:(0,_.localize)("Multipliers"),items:c}].filter((function(e){return t=e.type,u===(0,_.localize)("All")||u===t;var t})),p=d.some((function(e){return e.items.length>0}));return a.length>0&&p?f().createElement("div",{className:"strategy-template-picker__strategies"},d.map((function(e){var t=e.type,r=e.items;return f().createElement(rs,{key:t,title:t,items:r,onSelectStrategy:o})}))):f().createElement("div",{className:"no-results"},f().createElement(m.Text,{size:"xs"},(0,_.localize)("No results found")))};function os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return as(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?as(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var is=(0,h.observer)((function(e){var t=e.setCurrentStep,r=e.setSelectedTradeType,n=ya(),o=n.dashboard,a=n.quick_strategy,i=o.setActiveTabTutorial,l=o.setActiveTab,c=o.setFAQSearchValue,s=o.filterTuotrialTab,u=a.setFormVisibility,d=a.setSelectedStrategy,p=os(f().useState(0),2),m=p[0],h=p[1],y=os(f().useState(!1),2),v=y[0],b=y[1],g=os(f().useState(""),2),E=g[0],w=g[1];return f().createElement("div",{className:"strategy-template-picker"},f().createElement("div",{className:"strategy-template-picker__panel"},f().createElement(Kc.L,{onChange:function(e){w(e.target.value),b(!0),c(e.target.value),s(e.target.value)},placeholder:(0,_.localize)("Search"),type:"text",value:E,inputSize:"sm"}),f().createElement("button",{className:"strategy-template-picker__icon",onClick:function(){l(q.TUTORIAL),i(3),u(!1)}},f().createElement(Wc.A,{iconSize:"sm"}))),f().createElement("div",{className:"strategy-template-picker__chips"},Vc.map((function(e,t){return f().createElement($c.v.Selectable,{key:t,onClick:function(){return function(e){h(e)}(t)},selected:t==m,size:"sm",label:e})}))),f().createElement(ns,{selector_chip_value:m,search_value:E,is_searching:v,onSelectStrategy:function(e,n){d(e),r(n),t(Gc.StrategyVerified)}}))}));const ls=is;function cs(e){return cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cs(e)}function ss(){ss=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==cs(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(cs(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function us(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var fs=function(e){var t=e.selected_trade_type,r=e.selected_startegy_label,n=e.children;return f().createElement(f().Fragment,null,f().createElement("div",{className:"qs__selected-options"},f().createElement("div",{className:"qs__selected-options__item"},f().createElement(m.Text,{size:"xs",line_height:"s"},(0,_.localize)("Trade type")),f().createElement(m.Text,{size:"xs",weight:"bold",line_height:"s"},t)),f().createElement("div",{className:"qs__selected-options__item"},f().createElement(m.Text,{size:"xs",line_height:"s"},(0,_.localize)("Strategy")),f().createElement(m.Text,{className:"qs__selected-options__item__description",weight:"bold",line_height:"s"},r))),f().createElement(jc,{formfields:n,active_tab:"TRADE_PARAMETERS"}))},ds=(0,h.observer)((function(e){var t=e.children,r=e.current_step,n=e.setCurrentStep,o=e.onClickClose,a=e.selected_trade_type,i=e.setSelectedTradeType,l=f().useRef(null),c=(0,Ya.useFormikContext)(),s=c.submitForm,u=c.isValid,d=c.setFieldValue,p=c.validateForm,h=c.values,y=ya().quick_strategy,v=y.selected_strategy,b=y.onSubmit,g=y.is_stop_bot_dialog_open,E=Mc().handleSubmit,w=Fr[v].label,k=r===Gc.StrategySelect;f().useEffect((function(){u&&r===Gc.StrategyVerified&&n(Gc.StrategyCompleted),u||r!==Gc.StrategyCompleted||n(Gc.StrategyVerified)}),[u,r]),f().useEffect((function(){p()}),[v,p]);var x=function(){var e,t=(e=ss().mark((function e(){return ss().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("action","EDIT");case 2:p(),s().then((function(e){u&&e&&(vc({form_values:h,selected_strategy:v}),b(e))}));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){us(a,n,o,i,l,"next",e)}function l(e){us(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),S=f().useCallback((function(){switch(r){case Gc.StrategySelect:return f().createElement(ls,{setCurrentStep:n,setSelectedTradeType:i});case Gc.StrategyVerified:case Gc.StrategyCompleted:return f().createElement(fs,{selected_trade_type:a,selected_startegy_label:w},t);default:return null}}),[r,a,w,t,n,i]);return!g&&f().createElement("div",{className:"qs"},f().createElement("div",{className:"qs__head"},f().createElement("div",{className:"qs__head__title"},f().createElement(m.Text,{weight:"bold"},(0,_.localize)("Quick Strategy"))),f().createElement("div",{className:"qs__head__action"},f().createElement("span",{"data-testid":"qs-desktop-close-button",onClick:o,tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&o()}},f().createElement(fc(),{icon:"IcCross"})))),f().createElement("div",{className:"qs__body"},f().createElement("div",{className:"qs__body__sidebar"},f().createElement("div",{className:"qs__body__sidebar__subtitle"},f().createElement(m.Text,{size:"xs"},(0,_.localize)("Choose a template below and set your trade parameters."))),f().createElement(Hc,{current_step:r})),f().createElement("div",{className:"qs__body__content"},f().createElement(m.ThemedScrollbars,{className:"qs__form__container qs__form__container--no-footer",autohide:!1,refSetter:l},S()),!k&&f().createElement("div",{className:"qs__body__content__footer"},f().createElement(m.Button,{transparent:!0,classNameSpan:"qs__body__content__footer--back",disabled:k,onClick:function(){n(Gc.StrategySelect)}},(0,_.localize)("Back")),f().createElement(m.Button,{secondary:!0,disabled:!u,onClick:x},(0,_.localize)("Load")),f().createElement(m.Button,{"data-testid":"qs-run-button",primary:!0,onClick:function(e){e.preventDefault(),E()},disabled:!u},(0,_.localize)("Run"))))))}));const ps=f().memo(ds),ms=(0,h.observer)((function(e){var t=e.children,r=e.current_step,n=e.selected_trade_type,o=e.setCurrentStep,a=e.setSelectedTradeType,i=(0,Ya.useFormikContext)(),l=i.isValid,c=i.validateForm,s=i.values,u=ya().quick_strategy.selected_strategy,d=Mc().handleSubmit,p=Fr[u].label,h=r===Gc.StrategyVerified||r===Gc.StrategyCompleted,y=r===Gc.StrategySelect;return f().useEffect((function(){c()}),[u,c]),f().useEffect((function(){l&&r===Gc.StrategyVerified&&o(Gc.StrategyCompleted),l||r!==Gc.StrategyCompleted||o(Gc.StrategyVerified)}),[l,r]),f().createElement("div",{className:"qs"},f().createElement("div",{className:"qs__body"},f().createElement("div",{className:"qs__body__content"},f().createElement(m.ThemedScrollbars,{className:_a()("qs__form__container qs__form__container--no-footer",{"qs__form__container--template":y}),autohide:!1},f().createElement(Hc,{setCurrentStep:o,current_step:r,isValid:l,is_mobile:!0}),y&&f().createElement(ls,{setSelectedTradeType:a,setCurrentStep:o}),h&&f().createElement(f().Fragment,null,f().createElement("div",{className:"qs__selected-options"},f().createElement("div",{className:"qs__selected-options__item"},f().createElement(m.Text,{size:"xs"},(0,_.localize)("Trade type")),f().createElement(m.Text,{size:"xs",weight:"bold"},n)),f().createElement("div",{className:"qs__selected-options__item"},f().createElement(m.Text,{size:"xs"},(0,_.localize)("Strategy")),f().createElement(m.Text,{className:"qs__selected-options__item__description",size:"xs",weight:"bold"},p))),f().createElement(jc,{formfields:t,active_tab:"TRADE_PARAMETERS"}))),h&&f().createElement("div",{className:"qs__body__content__footer"},f().createElement(m.Button,{secondary:!0,disabled:y,onClick:function(){o(Gc.StrategySelect)}},(0,_.localize)("Back")),f().createElement(m.Button,{primary:!0,"data-testid":"qs-run-button",type:"submit",onClick:function(e){e.preventDefault(),yc({form_values:s,selected_strategy:u}),d()},disabled:!l},(0,_.localize)("Run"))))))}));var hs="loss-threshold-warning-dialog";const ys=(0,h.observer)((function(){var e=ya().quick_strategy,t=e.loss_threshold_warning_data,r=e.setLossThresholdWarningData,n=e.initializeLossThresholdWarningData,o=Mc().proceedFormSubmission;return f().createElement(m.Dialog,{portal_element_id:"modal_root_absolute",title:(0,_.localize)("Are you sure you want to continue?"),is_visible:t.show,confirm_button_text:(0,_.localize)("Yes, continue"),onConfirm:function(){n(),o()},cancel_button_text:(0,_.localize)("Edit the amount"),onCancel:function(){r({show:!1,highlight_field:["loss"]})},is_mobile_full_width:!1,has_close_icon:!1,className:hs},f().createElement("div",{className:"".concat(hs,"__body-text")},f().createElement(_.Localize,{i18n_default_text:"Please confirm that your loss threshold amount is {{loss_amount}} {{currency}}.",values:{loss_amount:null==t?void 0:t.loss_amount,currency:null==t?void 0:t.currency}})),f().createElement(m.Checkbox,{defaultChecked:!1,label:(0,_.localize)("Do not show this message again."),onChange:function(){var e,t,r=null===(e=localStorage)||void 0===e?void 0:e.getItem("qs-dont-show-loss-threshold-warning"),n=JSON.parse(null!=r?r:"false");null===(t=localStorage)||void 0===t||t.setItem("qs-dont-show-loss-threshold-warning","".concat(!n))}}))}));var vs=["ACCUMULATORS_MARTINGALE","ACCUMULATORS_DALEMBERT","ACCUMULATORS_MARTINGALE_ON_STAT_RESET","ACCUMULATORS_DALEMBERT_ON_STAT_RESET","ACCUMULATORS_REVERSE_MARTINGALE","ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET","ACCUMULATORS_REVERSE_DALEMBERT","ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET"];function _s(e){return _s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_s(e)}var bs=["value"];function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gs.apply(null,arguments)}function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(r),!0).forEach((function(t){ks(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ks(e,t,r){return(t=function(e){var t=function(e){if("object"!=_s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ss(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ss(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Os=function(e){var t=e.symbol;return f().createElement("div",{key:t.value,className:"qs__select__option"},f().createElement(m.Icon,{data_testid:"dt_symbol_icon",icon:"IcUnderlying".concat(t.value),size:32}),f().createElement(m.Text,{className:"qs__select__option__text",size:"xs",color:"prominent"},t.text))};const Ts=function(){var e=ya().quick_strategy,t=v().ui.is_desktop,r=e.setValue,n=e.selected_strategy,o=xs(f().useState([]),2),a=o[0],i=o[1],l=xs((0,u.useState)(!1),2),c=l[0],s=l[1],d=xs((0,u.useState)({text:"",value:""}),2),h=d[0],y=d[1],_=xs((0,u.useState)({text:"",value:""}),2),b=_[0],g=_[1],E=(0,Ya.useFormikContext)(),w=E.setFieldValue,k=E.values,x=vs.includes(n),S=(0,u.useMemo)((function(){return a.map((function(e){return ws({component:f().createElement(Os,{key:e.text,symbol:e})},e)}))}),[a]);(0,u.useEffect)((function(){var e,t=p.ApiHelpers.instance.active_symbols.getSymbolsForBot();x&&(t=t.filter((function(e){var t;return null==e||null===(t=e.group)||void 0===t?void 0:t.startsWith("Continuous Indices")}))),i(t);var n,o,a,l,c=!(null===(e=t)||void 0===e||!e.find((function(e){return(null==e?void 0:e.value)===(null==k?void 0:k.symbol)})));c||(w("symbol",null===(n=t)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.value),r("symbol",null===(a=t)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.value))}),[]),(0,u.useEffect)((function(){var e=S.find((function(e){return e.value===k.symbol}));e&&y({text:e.text,value:e.value})}),[S,k.symbol,y]);var O=function(){t&&!c&&(s(!0),y({text:"",value:""}))},T=function(e){y(ws(ws({},h),{},{text:e.target.value}))},L=function(e){if(null!=e&&e.value){var t=e.value;w("symbol",t),r("symbol",t),s(!1)}},A=function(){if(t){var e=S.find((function(e){return e.value===k.symbol}));e&&e.text!==h.text&&(y({text:e.text,value:e.value}),g({text:e.text,value:e.value}),s(!1)),e||(y({text:b.text,value:b.value}),s(!1))}};return f().createElement("div",{className:"qs__form__field qs__form__field__input"},f().createElement(Ya.Field,{name:"symbol",key:"asset",id:"asset"},(function(e){var r=e.field,n=(r.value,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,bs));return f().createElement(f().Fragment,null,f().createElement(m.Autocomplete,gs({},n,{readOnly:!t,inputMode:"none","data-testid":"dt_qs_symbol",autoComplete:"off",className:"qs__autocomplete",value:h.text,list_items:S,onItemSelection:L,onChange:T,onFocus:O,onHideDropdownList:A,leading_icon:f().createElement(m.Icon,{icon:"IcUnderlying".concat(h.value),size:24})})))})))};function Ls(e){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(e)}function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},As.apply(null,arguments)}function Ns(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cs(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ls(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ls(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ls(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ps(){Ps=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ls(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ls(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Is(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function js(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var zs=function(e){var t=e.trade_type,r=t.value,n=t.icon,o=t.text;return f().createElement("div",{key:r,className:"qs__select__option"},null!=n&&n.length?n.map((function(e,t){return f().createElement(m.IconTradeTypes,{type:e,className:"qs__select__option__icon",key:"".concat(e,"id-").concat(t)})})):null,f().createElement(m.Text,{className:"qs__select__option__text",size:"xs",color:"prominent"},o))};const Rs=function(){var e,t,r=(e=f().useState([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return js(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?js(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1],a=(0,Ya.useFormikContext)(),i=a.setFieldValue,l=a.values,c=a.validateForm,s=ya().quick_strategy,u=s.setValue,d=s.selected_strategy,h=vs.includes(d);f().useEffect((function(){if(null!=l&&l.symbol){var e=null==l?void 0:l.tradetype,t=h?"ACCU":"",r=p.ApiHelpers.instance.contracts_for,n=function(){var n,a=(n=Ps().mark((function n(){var a,c,s;return Ps().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getTradeTypesForQuickStrategy(null==l?void 0:l.symbol,t);case 2:c=n.sent,s=null==c?void 0:c.some((function(t){return t.value===e})),s||(null==c||null===(a=c[0])||void 0===a?void 0:a.value)===e||(null==i||i("tradetype",(null==c?void 0:c[0].value)||""),u("tradetype",null==c?void 0:c[0].value)),o(c);case 6:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){Is(a,r,o,i,l,"next",e)}function l(e){Is(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();n(),c()}}),[null==l?void 0:l.symbol]);var y=f().useMemo((function(){return n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(r),!0).forEach((function(t){Cs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ns(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({component:f().createElement(zs,{key:e.text,trade_type:e})},e)}))}),[n]);return f().createElement("div",{className:"qs__form__field qs__form__field__input qs__form__field__group-icons"},f().createElement(Ya.Field,{name:"tradetype",key:"tradetype",id:"tradetype"},(function(e){var t,r,n=e.field,o=null==y?void 0:y.find((function(e){return e.value===n.value})),a=h?"Buy":null==o?void 0:o.text;return f().createElement(m.Autocomplete,As({},n,{readOnly:!0,inputMode:"none","data-testid":"dt_qs_tradetype",autoComplete:"off",className:"qs__autocomplete",value:a||"",list_items:y,onItemSelection:function(e){var t=null==e?void 0:e.value,r=null==e?void 0:e.text;t&&r&&(null==i||i("tradetype",t),u("tradetype",t))},leading_icon:f().createElement(m.Text,null,f().createElement(m.IconTradeTypes,{type:(null==o||null===(t=o.icon)||void 0===t?void 0:t[0])||"CALL"}),f().createElement(m.IconTradeTypes,{type:(null==o||null===(r=o.icon)||void 0===r?void 0:r[1])||"PUT"}))}))})))};function Ds(e){return Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(e)}function Bs(){return Bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bs.apply(null,arguments)}function Ms(){Ms=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ds(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ds(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Us(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Gs=(0,h.observer)((function(e){var t,r,n=e.name,o=v().ui.is_desktop,a=(t=f().useState([]),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Fs(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fs(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=ya().quick_strategy.setValue,s=(0,Ya.useFormikContext)(),u=s.setFieldValue,d=s.values,h=d.symbol,y=d.tradetype;f().useEffect((function(){if(y&&h){var e=null==d?void 0:d.type,t=function(){var t,r=(t=Ms().mark((function t(){var r,o,a,i,s;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.ApiHelpers.instance,o=r.contracts_for,t.next=3,o.getContractTypes(y);case 3:a=t.sent,l(a),(null==a?void 0:a.some((function(t){return t.value===e})))||(null==u||u(n,null==a||null===(i=a[0])||void 0===i?void 0:i.value),c(n,null==a||null===(s=a[0])||void 0===s?void 0:s.value));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){Us(a,n,o,i,l,"next",e)}function l(e){Us(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}}),[h,y]);var _=function(e){null==u||u(n,e),c(n,e)},b="qs-contract-type-".concat(n);return f().createElement("div",{className:"qs__form__field qs__form__field__input no-top-spacing"},f().createElement(Ya.Field,{name:n,key:b,id:b},(function(e){var t=e.field,r=null==i?void 0:i.find((function(e){return(null==e?void 0:e.value)===(null==t?void 0:t.value)}));return o?f().createElement(m.Autocomplete,Bs({},t,{readOnly:!0,inputMode:"none","data-testid":"dt_qs_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==r?void 0:r.text)||"",list_items:i,onItemSelection:function(e){var t=e.value;t&&_(t)}})):f().createElement("ul",{className:"qs__form__field__list","data-testid":"dt_qs_contract_types"},i.map((function(e){var t=(null==r?void 0:r.value)===(null==e?void 0:e.value);return f().createElement("li",{key:null==e?void 0:e.value,className:_a()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:function(){_(null==e?void 0:e.value)}},f().createElement(m.Text,{size:"xs",color:"prominent",weight:t?"bold ":"normal"},null==e?void 0:e.text))})))})))}));const qs=Gs;function Vs(e){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(e)}function Ys(){return Ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ys.apply(null,arguments)}function Hs(){Hs=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Vs(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Vs(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ws(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ks(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Xs=function(e){var t=e.attached,r=Ks(f().useState([]),2),n=r[0],o=r[1],a=Ks(f().useState(""),2),i=a[0],l=a[1],c=Ks(f().useState(""),2),s=c[0],u=c[1],d=ya().quick_strategy,h=d.setValue,y=d.setCurrentDurationMinMax,v=(0,Ya.useFormikContext)(),_=v.setFieldValue,b=v.validateForm,g=v.values,E=g.symbol,w=g.tradetype;return f().useEffect((function(){if(w&&E){var e=function(){var e,t=(e=Hs().mark((function e(){var t,r,n,a,c,f,d,m,v,b,k,x,S;return Hs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.ApiHelpers.instance,r=t.contracts_for,e.next=3,r.getDurations(E,w);case 3:n=e.sent,a=null==n?void 0:n.map((function(e){var t,r;return{text:null!==(t=e.display)&&void 0!==t?t:"",value:null!==(r=e.unit)&&void 0!==r?r:"",min:e.min,max:e.max}})),o(a),c=null==g?void 0:g.durationtype,f=null==a?void 0:a.some((function(e){return e.value===c})),f&&i===E&&s===w?(S=null==a?void 0:a.find((function(e){return e.value===c})),y(null==S?void 0:S.min,null==S?void 0:S.max)):(y(null==n||null===(d=n[0])||void 0===d?void 0:d.min,null==n||null===(m=n[0])||void 0===m?void 0:m.max),null==_||_("durationtype",null==n||null===(v=n[0])||void 0===v?void 0:v.unit,!0),null==_||_("duration",null==n||null===(b=n[0])||void 0===b?void 0:b.min,!0),h("durationtype",null!==(k=null==n||null===(x=n[0])||void 0===x?void 0:x.unit)&&void 0!==k?k:"")),l(E),u(w);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ws(a,n,o,i,l,"next",e)}function l(e){Ws(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}}),[E,w]),f().createElement("div",{className:_a()("qs__form__field qs__form__field__input",{"no-top-border-radius":t})},f().createElement(Ya.Field,{name:"durationtype",key:"durationtype",id:"durationtype"},(function(e){var t=e.field,r=null==n?void 0:n.find((function(e){return e.value===t.value}));return f().createElement(m.Autocomplete,Ys({},t,{readOnly:!0,inputMode:"none","data-testid":"dt_qs_durationtype",autoComplete:"off",className:"qs__select",value:(null==r?void 0:r.text)||"",list_items:n,onItemSelection:function(e){var t=e,r=t.value,n=t.min,o=t.max;r&&(y(n,o),null==_||_("durationtype",r),h("durationtype",r),null==_||_("duration",n).then((function(){b()})),h("duration",n))}}))})))};function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qs.apply(null,arguments)}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Zs=(0,h.observer)((function(e){var t,r,n=e.name,o=e.onChange,a=e.type,i=void 0===a?"text":a,l=e.attached,c=void 0!==l&&l,s=e.disabled,u=void 0!==s&&s,d=e.min,p=e.max,h=e.has_currency_unit,y=void 0!==h&&h,_=v(),b=_.ui.is_desktop,g=_.client.currency,E=ya().quick_strategy.loss_threshold_warning_data,w=(t=f().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Js(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Js(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=w[0],x=w[1],S=(0,Ya.useFormikContext)(),O=S.setFieldValue,T=S.setFieldTouched,L="number"===i,A=Number.MAX_SAFE_INTEGER,N=f().useRef(null);f().useEffect((function(){var e=function(e){document.activeElement===N.current&&e.preventDefault()},t=N.current;return t&&t.addEventListener("wheel",e,{passive:!1}),function(){t&&t.removeEventListener("wheel",e)}}),[]);var C=function(e,t){null==e||e.preventDefault(),o(n,t),T(n,!0,!0),O(n,t)};return f().createElement(Ya.Field,{name:n,key:n,id:n},(function(e){var t,r=e.field,a=e.meta.error,l=a,s=y;return f().createElement("div",{className:_a()("qs__form__field qs__form__field__input",{"no-top-spacing":c,"no-border-top":c})},f().createElement("div",{"data-testid":"dt_qs_input_container",onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)}},f().createElement(m.Popover,{alignment:"bottom",message:a,is_open:b?!!a&&k:!!a,zIndex:"9999",classNameBubble:"qs__warning-bubble",has_error:!0,should_disable_pointer_events:!0},f().createElement(m.Input,Qs({data_testId:"dt_qs_".concat(n),className:_a()("qs__input",{error:l},{highlight:null==E||null===(t=E.highlight_field)||void 0===t?void 0:t.includes(n)}),type:i,leading_icon:L?f().createElement("button",{disabled:u||!!d&&r.value<=d,"data-testid":"dt_qs_input_decrease",onClick:function(e){var t=Number(r.value)-1;C(e,String(t%1?t.toFixed(2):t))}},"-"):void 0,trailing_icon:L?f().createElement("button",{disabled:u||r.value==A||!!p&&r.value>=p,"data-testid":"dt_qs_input_increase",onClick:function(e){var t=Number(r.value)+1;C(e,String(t%1?t.toFixed(2):t))}},"+"):null},r,{disabled:u,onChange:function(e){return function(e){var t=e.target.value,r=0;t.length>=12?(r=t.slice(0,12),r=L?Number(r):r):r=L?Number(t):t,o(n,r)}(e)},placeholder:s?"0":"",bottom_label:s?g:"",max_characters:2,maxLength:2,ref:N})))))}))}));function eu(e){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(e)}function tu(){tu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==eu(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(eu(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ru(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}const nu=function(e){var t=e.name,r=e.label,n=e.description,o=e.attached,a=void 0!==o&&o,i=e.isEnabledToggleSwitch,l=e.setIsEnabledToggleSwitch,c=(0,Ya.useFormikContext)(),s=c.values,u=c.setFieldValue,d=function(){var e,r=(e=tu().mark((function e(){return tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,u(t,!(null!=s&&s[t]),!0);case 3:return e.next=5,u("max_stake",null==s?void 0:s.max_stake,!0);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ru(a,n,o,i,l,"next",e)}function l(e){ru(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return f().createElement(Ya.Field,{name:t},(function(e){return e.field,f().createElement("div",{className:_a()("qs__form__field qs__form__field__input",{"no-border-bottom-radius":a})},f().createElement("div",{className:"qs__checkbox"},f().createElement("div",{className:"qs__checkbox__container"},f().createElement("label",{className:"dc-checkbox"},f().createElement(m.Text,{size:"xs",className:"dc-checkbox__label"},r),f().createElement(m.Text,{size:"xxs"},(0,_.localize)("(optional)"))),f().createElement("span",null,f().createElement(m.Popover,{classNameTargetIcon:"qs__checkbox__info",message:n,zIndex:"9999",alignment:"top",icon:"info"})),f().createElement(m.ToggleSwitch,{id:"dt_mobile_drawer_theme_toggler",handleToggle:d,is_enabled:i,"data-testid":"qs-toggle-switch"}))))}))},ou=function(e){var t,r=e.label,n=e.description,o=e.additional_data;return t="function"==typeof n?n(o):n,f().createElement("div",{className:"qs__form__field"},f().createElement("div",{className:"qs__input-label"},f().createElement(m.Text,{weight:"bold",className:"qs__input-label__wrapper",size:"xs"},r),f().createElement("span",null,f().createElement(m.Popover,{message:t,zIndex:"9999",alignment:"top",icon:"info"}))))};var au=r(651),iu=r(148);function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(null,arguments)}function su(){su=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==lu(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(lu(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uu(Object(r),!0).forEach((function(t){du(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function du(e,t,r){return(t=function(e){var t=function(e){if("object"!=lu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=lu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pu(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function mu(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){pu(a,n,o,i,l,"next",e)}function l(e){pu(a,n,o,i,l,"throw",e)}i(void 0)}))}}function hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const yu=(0,h.observer)((function(e){var t,r,n=e.name,o=v(),a=o.ui,i=o.client,l=a.is_desktop,c=(t=f().useState([]),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return hu(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hu(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],u=c[1],d=ya(),p=d.quick_strategy,h=d.ws,y=p.setValue,b=p.setAdditionalData,E=(0,Ya.useFormikContext)(),w=E.setFieldValue,k=E.values,x=E.setFieldError,S=E.errors,O=f().useRef(null),T=f().useRef(null),L=f().useRef({tick_count:null,take_profit:null});f().useEffect((function(){u([{text:"1%",value:"0.01"},{text:"2%",value:"0.02"},{text:"3%",value:"0.03"},{text:"4%",value:"0.04"},{text:"5%",value:"0.05"}]),null==w||w("tradetype","accumulator"),y("tradetype","accumulator")}),[]),f().useEffect((function(){var e,t,r,n;k.boolean_tick_count?(w("take_profit",0),x("tick_count",null!==(e=null===(t=L.current)||void 0===t?void 0:t.tick_count)&&void 0!==e?e:void 0),x("take_profit",void 0)):(w("tick_count",0),x("take_profit",null!==(r=null===(n=L.current)||void 0===n?void 0:n.take_profit)&&void 0!==r?r:void 0),x("tick_count",void 0))}),[k,S.take_profit,S.tick_count,k.boolean_tick_count]);var A=function(){var e=mu(su().mark((function e(t){var r,n,o,a,l,c,s,u,f,d,p,m,y,v,g,E,w,k,S,A,N;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Number(t.growth_rate),n=Number(t.stake),o=Number(t.take_profit),a={amount:n,currency:i.currency,growth_rate:r,symbol:t.symbol,limit_order:fu({},!t.boolean_tick_count&&{take_profit:o})},O.current=fu(fu({},a),{},{boolean_tick_count:t.boolean_tick_count}),e.prev=5,e.next=8,(0,au.XC)(a,h);case 8:f=e.sent,d=null==f||null===(l=f.proposal)||void 0===l||null===(c=l.validation_params)||void 0===c?void 0:c.max_ticks,p="",m="",T.current=null==f||null===(s=f.proposal)||void 0===s||null===(u=s.validation_params)||void 0===u?void 0:u.max_payout,y=Number(t.tick_count),b({max_payout:T.current,max_ticks:d}),!isNaN(y)&&y>d?(m="Maximum tick count is: ".concat(d),x("tick_count",m),L.current.tick_count=m):!isNaN(y)&&y<1?(p="Minimum tick count is: ".concat(1),x("tick_count",p),L.current.tick_count=p):(L.current.tick_count=null,x("tick_count",void 0)),L.current.take_profit=null,e.next=24;break;case 20:e.prev=20,e.t0=e.catch(5),E=null!==(v=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==v?v:null===e.t0||void 0===e.t0||null===(g=e.t0.error)||void 0===g?void 0:g.message,t.boolean_tick_count?(x("tick_count",E),L.current.tick_count=E):("take_profit"===(null===e.t0||void 0===e.t0||null===(w=e.t0.error)||void 0===w||null===(k=w.details)||void 0===k?void 0:k.field)&&(E="Your total payout is ".concat(Number(t.take_profit)+Number(t.stake),". Enter amount less than ").concat(T.current," ").concat((0,_.localize)("By changing your initial stake and/or take profit."))),"stake"===(null===e.t0||void 0===e.t0||null===(S=e.t0.error)||void 0===S||null===(A=S.details)||void 0===A?void 0:A.field)&&(E="".concat(null===e.t0||void 0===e.t0||null===(N=e.t0.error)||void 0===N?void 0:N.message," ").concat((0,_.localize)("Update your initial stake."))),x("take_profit",E),L.current.take_profit=E);case 24:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}(),N=f().useCallback(g()(A,500,{trailing:!0,leading:!1}),[]);f().useEffect((function(){var e,t,r,n,o,a,l;(null===(e=O.current)||void 0===e?void 0:e.symbol)===k.symbol&&(null===(t=O.current)||void 0===t?void 0:t.amount)===k.stake&&(null===(r=O.current)||void 0===r||null===(n=r.limit_order)||void 0===n?void 0:n.take_profit)===k.take_profit&&(null===(o=O.current)||void 0===o?void 0:o.currency)===i.currency&&(null===(a=O.current)||void 0===a?void 0:a.growth_rate)===k.growth_rate&&(null===(l=O.current)||void 0===l?void 0:l.boolean_tick_count)===k.boolean_tick_count||N(k)}),[k.take_profit,k.tick_count,k.stake,k.growth_rate,iu.currency,k.boolean_tick_count]);var C=function(){var e=mu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==w||w(n,t),y(n,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P="qs-contract-type-".concat(n);return f().createElement("div",{className:"qs__form__field qs__form__field__input no-top-spacing"},f().createElement(Ya.Field,{name:n,key:P,id:P},(function(e){var t=e.field,r=null==s?void 0:s.find((function(e){return(null==e?void 0:e.value)===(null==t?void 0:t.value)}));return l?f().createElement(m.Autocomplete,cu({},t,{readOnly:!0,inputMode:"none","data-testid":"dt_qs_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==r?void 0:r.text)||"",list_items:s,onItemSelection:function(e){var t=e.value;t&&C(t)}})):f().createElement("ul",{className:"qs__form__field__list","data-testid":"dt_qs_contract_types"},s.map((function(e){var t=(null==r?void 0:r.value)===(null==e?void 0:e.value);return f().createElement("li",{key:null==e?void 0:e.value,className:_a()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:function(){C(null==e?void 0:e.value)},onChange:function(){C(null==e?void 0:e.value)}},f().createElement(m.Text,{size:"xs",color:"prominent",weight:t?"bold ":"normal"},null==e?void 0:e.text))})))})))}));function vu(e){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(e)}function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_u.apply(null,arguments)}function bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bu(Object(r),!0).forEach((function(t){Eu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Eu(e,t,r){return(t=function(e){var t=function(e){if("object"!=vu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=vu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ku=[{text:"Take Profit",value:"take_profit"},{text:"Tick Count",value:"tick_count"}];const xu=function(e){var t,r,n=e.attached,o=ya().quick_strategy.setValue,a=(0,Ya.useFormikContext)(),i=a.setFieldValue,l=a.values,c=(t=(0,u.useState)(l.boolean_tick_count?ku[1]:ku[0]),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return wu(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wu(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],d=c[1],p=function(e){if(null!=e&&e.value){var t="take_profit"===e.value,r=t?"Take Profit":"Tick Count";o("boolean_tick_count",!t),null==i||i("boolean_tick_count",!t),d(gu(gu({},s),{},{text:r}))}};return f().createElement("div",{className:_a()("qs__form__field qs__form__field__input",{"no-top-border-radius":n})},f().createElement(Ya.Field,{name:"sell_conditions",key:"sell_conditions",id:"sell_conditions"},(function(e){var t=e.field;return f().createElement(m.Autocomplete,_u({},t,{readOnly:!0,inputMode:"none","data-testid":"dt_qs_sell_conditions",autoComplete:"off",className:"qs__select",value:s.text,list_items:ku,onItemSelection:p}))})))};function Su(e){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(e)}function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ou.apply(null,arguments)}function Tu(){Tu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Su(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Su(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Lu(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Au(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Nu=(0,h.observer)((function(){var e,t,r,n,o=v().ui,a=ya().quick_strategy,i=a.selected_strategy,l=a.setValue,c=a.form_data,s=null===(e=Fr[i])||void 0===e?void 0:e.fields,u=o.is_desktop,d=(0,Ya.useFormikContext)(),p=d.values,m=d.setFieldTouched,h=d.setFieldValue,y=a.current_duration_min_max,_=a.additional_data,b=(r=f().useState(null!==(t=null==p?void 0:p.boolean_max_stake)&&void 0!==t&&t),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(r,n)||function(e,t){if(e){if("string"==typeof e)return Au(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Au(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=b[0],E=b[1];f().useEffect((function(){var e;window.addEventListener("keydown",k);var t=null;try{var r;t=JSON.parse(null!==(r=localStorage.getItem("qs-fields"))&&void 0!==r?r:"{}")}catch(e){t=null}return E(!(null===(e=t)||void 0===e||!e.boolean_max_stake)),function(){window.removeEventListener("keydown",k)}}),[]),f().useEffect((function(){!g&&null!=p&&p.max_stake&&h("max_stake",0)}),[g,null==p?void 0:p.max_stake]);var w=function(){var e,t=(e=Tu().mark((function e(t,r){return Tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(t,r),e.next=3,m(t,!0,!0);case 3:return e.next=5,h(t,r,!0);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Lu(a,n,o,i,l,"next",e)}function l(e){Lu(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),k=function(e){null!=e&&e.key&&"Enter"==e.key&&(e.preventDefault(),e.stopPropagation())},x=function(e){return e.every((function(e){var t,r=null==p||null===(t=p[e.key])||void 0===t?void 0:t.toString();return e.multiple?e.multiple.includes(r):p[e.key]===e.value}))},S=function(){E((function(e){return!e}))};return f().createElement("div",null,s.map((function(e,t){return null!=e&&e.length?f().createElement("div",{className:"qs__body__content__form__group",key:t},e.map((function(e,t){var r,n,o="".concat(e.name||e.type," + ").concat(t);if(!u&&null!==(r=e.hide)&&void 0!==r&&r.includes("mobile")||u&&null!==(n=e.hide)&&void 0!==n&&n.includes("desktop"))return null;switch(e.type){case"number":if(!e.name)return null;var a,i=e.should_have,l=void 0===i?[]:i,s=e.hide_without_should_have,d=void 0!==s&&s,p=e.has_currency_unit,m=void 0!==p&&p,h=x(l),v=1;"duration"===e.name&&y&&(v=y.min,a=y.max);var b=e.should_have;return b&&"max_stake"===e.name&&(v=+(null==c?void 0:c.stake),isNaN(v)&&(v=1)),b&&"last_digit_prediction"===e.name&&((isNaN(+(null==c?void 0:c.last_digit_prediction))||1==+(null==c?void 0:c.last_digit_prediction))&&(v=0),+(null==c?void 0:c.last_digit_prediction)>0&&(v=+(null==c?void 0:c.last_digit_prediction)-1),a=9),null!=l&&l.length?h||u&&!d?f().createElement(Zs,Ou({},e,{key:o,name:e.name,disabled:!h,onChange:w,min:v,max:a,has_currency_unit:m})):null:f().createElement(Zs,Ou({},e,{onChange:w,key:o,name:e.name,min:v,max:a,has_currency_unit:m}));case"label":var E;if(!e.label)return null;var k=e.should_have,O=void 0===k?[]:k,T=e.hide_without_should_have,L=void 0!==T&&T;return!x(O)&&L?null:f().createElement(ou,{key:o,label:e.label,description:null!==(E=e.description)&&void 0!==E?E:"",additional_data:_});case"checkbox":return f().createElement(nu,Ou({},e,{key:o,name:e.name,label:e.label,isEnabledToggleSwitch:!!g,setIsEnabledToggleSwitch:S}));case"symbol":return f().createElement(Ts,Ou({},e,{key:o}));case"tradetype":return f().createElement(Rs,Ou({},e,{key:o}));case"durationtype":return f().createElement(Xs,Ou({},e,{key:o}));case"contract_type":return f().createElement(qs,Ou({},e,{key:o,name:e.name}));case"growth_rate":return f().createElement(yu,Ou({},e,{name:e.name}));case"sell_conditions":return f().createElement(xu,Ou({},e,{key:o}));default:return null}}))):null})))}));const Cu=Nu;function Pu(){Pu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Iu(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Iu(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Iu(e){return Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(e)}function ju(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function zu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ru(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ru(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Du=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT";return{DURATION:{MIN:(0,_.localize)("Minimum duration: {{ value }}",{value:t}),MAX:(0,_.localize)("Maximum duration: {{ value }}",{value:t})},LAST_DIGIT_PREDICTION:{MIN:(0,_.localize)("Enter a value from {{ value }} to 9.",{value:t}),MAX:(0,_.localize)("Enter a value from 0 to {{ value }}.",{value:t})},DEFAULT:{MIN:(0,_.localize)("The value must be equal or greater than {{ value }}",{value:t}),MAX:(0,_.localize)("The value must be equal or less than {{ value }}",{value:t})}}[r][e]},Bu=(0,h.observer)((function(e){var t,r=e.children,n=ya().quick_strategy,o=n.selected_strategy,a=n.form_data,i=n.current_duration_min_max,l=n.initializeLossThresholdWarningData,c=null===(t=Fr[o])||void 0===t?void 0:t.fields,s=zu((0,u.useState)(sc.Ik().shape({})),2),d=s[0],m=s[1],h=(0,u.useRef)(!0),y=null;f().useEffect((function(){return function(){h.current=!1}}),[]),f().useEffect((function(){l()}),[]);var v,b,g,E,w,k,x,S,O,T,L,A,N,C,P,I,j,z,R,D,B,M=function(e){var t={};c.forEach((function(r){if(null==r||!r.length)return null;r.forEach(function(){var r,n=(r=Pu().mark((function r(n){var o,l,c,s,u,f,d,p,m,h,v;return Pu().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:null!=n&&null!==(o=n.validation)&&void 0!==o&&o.length&&null!=n&&n.name&&n.validation.includes("number")&&(c=sc.ai().typeError((0,_.localize)("Must be a number")),u=10,f=Du("MIN",s=0),d=Du("MAX",u),p="","duration"===n.name&&i&&(s=i.min,u=i.max,f=Du("MIN",s,"DURATION"),d=Du("MAX",u,"DURATION")),(m=!n.should_have||(null===(l=n.should_have)||void 0===l?void 0:l.every((function(t){var r,n=null==e||null===(r=e[t.key])||void 0===r?void 0:r.toString();return t.multiple?t.multiple.includes(n):(null==e?void 0:e[t.key])===t.value}))))&&"max_stake"===n.name&&(s=+(null==a?void 0:a.stake),isNaN(s)&&(s=+(null!==(h=null===(v=y)||void 0===v?void 0:v.stake)&&void 0!==h?h:0)),f=Du("MIN",s)),m&&"last_digit_prediction"===n.name&&(s=0,d=Du("MAX",u=9,"LAST_DIGIT_PREDICTION"),p="Enter a value from 0 to 9."),m&&n.validation.forEach((function(e){if("string"==typeof e)switch(e){case"required":c=c.required((0,_.localize)("Field cannot be empty"));break;case"min":c=c.min(s,f);break;case"max":c=c.max(u,d);break;case"ceil":c=c.round("ceil");break;case"floor":c=c.round("floor");break;case"integer":c=c.integer(p)}else"object"===Iu(e)&&null!=e&&e.type&&(c=c[e.type](e.value,(0,_.localize)(e.getMessage(e.value))))})),t[n.name]=c);case 1:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){ju(a,n,o,i,l,"next",e)}function l(e){ju(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}())})),h.current&&m(sc.Ik().shape(t))};return f().createElement(Ya.Formik,{initialValues:(B=function(){var e=null;try{var t;e=JSON.parse(null!==(t=localStorage.getItem("qs-fields"))&&void 0!==t?t:"{}")}catch(t){e=null}return e}(),y={symbol:null!==(v=null==B?void 0:B.symbol)&&void 0!==v?v:p.config.QUICK_STRATEGY.DEFAULT.symbol,tradetype:null!==(b=null==B?void 0:B.tradetype)&&void 0!==b?b:"",type:null!==(g=null==B?void 0:B.type)&&void 0!==g?g:"",durationtype:null!==(E=null==B?void 0:B.durationtype)&&void 0!==E?E:p.config.QUICK_STRATEGY.DEFAULT.durationtype,duration:null!==(w=null==B?void 0:B.duration)&&void 0!==w?w:"1",stake:null!==(k=null==B?void 0:B.stake)&&void 0!==k?k:"1",loss:null!==(x=null==B?void 0:B.loss)&&void 0!==x?x:"",profit:null!==(S=null==B?void 0:B.profit)&&void 0!==S?S:"",size:null!==(O=null==B?void 0:B.size)&&void 0!==O?O:String(p.config.QUICK_STRATEGY.DEFAULT.size),unit:null!==(T=null==B?void 0:B.unit)&&void 0!==T?T:String(p.config.QUICK_STRATEGY.DEFAULT.unit),action:null!==(L=null==B?void 0:B.action)&&void 0!==L?L:"RUN",max_stake:null!==(A=null==B?void 0:B.max_stake)&&void 0!==A?A:10,boolean_max_stake:null!==(N=null==B?void 0:B.boolean_max_stake)&&void 0!==N&&N,last_digit_prediction:null!==(C=null==B?void 0:B.last_digit_prediction)&&void 0!==C?C:1,growth_rate:null!==(P=null==B?void 0:B.growth_rate)&&void 0!==P?P:"0.01",tick_count:null!==(I=null==B?void 0:B.tick_count)&&void 0!==I?I:0,take_profit:null!==(j=null==B?void 0:B.take_profit)&&void 0!==j?j:0,boolean_tick_count:null!==(z=null==B?void 0:B.boolean_tick_count)&&void 0!==z&&z,max_payout:null!==(R=null==B?void 0:B.max_payout)&&void 0!==R?R:0,max_ticks:null!==(D=null==B?void 0:B.max_ticks)&&void 0!==D?D:0}),validationSchema:d,onSubmit:function(e){var t;return M(e),null===(t=localStorage)||void 0===t||t.setItem("qs-fields",JSON.stringify(e)),e},validate:function(e){return M(e)},validateOnChange:!1},r)}));const Mu=(0,h.observer)((function(){var e=ya().quick_strategy,t=v().ui.is_desktop,r=e.is_open,n=e.setFormVisibility,o=e.form_data,a=e.selected_strategy,i=(0,u.useRef)(null),l=zu(f().useState(Gc.StrategySelect),2),c=l[0],s=l[1],d=zu(f().useState(""),2),p=d[0],h=d[1],y=function(){var e,t,r,l;l="learn more"===(null===(e=i.current)||void 0===e||null===(t=e.querySelector(".active"))||void 0===t||null===(r=t.textContent)||void 0===r?void 0:r.toLowerCase())?"learn more":"trade parameters",$r({subform_name:"quick_strategy",quick_strategy_tab:l,selected_strategy:a,form_values:o}),n(!1)};return f().createElement(Bu,null,f().createElement(Ya.Form,null,f().createElement(ys,null),t?f().createElement(m.Modal,{className:"modal--strategy",is_open:r,width:"72rem"},f().createElement(ps,{onClickClose:y,setCurrentStep:s,current_step:c,selected_trade_type:p,setSelectedTradeType:h},f().createElement(Cu,null))):f().createElement(m.MobileFullPageModal,{is_modal_open:r,className:"quick-strategy__wrapper",header:f().createElement(m.Text,{size:"xs",weight:"bold"},(0,_.localize)("Step ".concat(c===Gc.StrategyCompleted?2:1,"/2: Choose your strategy"))),onClickClose:y,height_offset:"8rem"},f().createElement(ms,{setCurrentStep:s,current_step:c,selected_trade_type:p,setSelectedTradeType:h},f().createElement(Cu,null)))))})),Uu=(0,h.observer)((function(e){var t=e.block_node,r=e.should_hide_display_name,n=ya().flyout.initBlockWorkspace,o=f().useRef();return f().useEffect((function(){n(o,t)}),[]),f().createElement("div",{ref:function(e){return o=e},className:_a()({"flyout__block-workspace--center":r,"flyout__block-workspace--top":!r}),"data-testid":"flyout-block-workspace"})})),Fu=function(e){var t=e.onInfoClick,r=e.block_node,n=e.is_active,o=e.should_hide_display_name,a=r.getAttribute("type")||"",i=window.Blockly.Blocks[a].meta(),l="variables_get"===a,c="variables_set"===a,s=i.display_name,u=i.description,d=function(){return f().createElement("div",{className:"flyout__item-buttons"},f().createElement(m.Button,{id:"db-flyout__add--".concat(a),"data-testid":"dt_flyout__add_".concat(a),className:"flyout__button-add flyout__button-add--hide",has_effect:!0,is_plus:!0,onClick:function(){return window.Blockly.derivWorkspace.addBlockNode(r)},type:"button"}))};return f().createElement(f().Fragment,null,c&&f().createElement("div",{className:"flyout__hr"}),f().createElement("div",{className:_a()("flyout__item",{"flyout__item--active":n})},!o&&f().createElement(f().Fragment,null,f().createElement("div",{className:"flyout__item-header"},f().createElement(m.Text,{size:l?"xs":"xsm",line_height:l?void 0:"xl",weight:l?void 0:"bold"},s),!l&&f().createElement(d,null)),f().createElement("div",{className:"flyout__item-description"},u,t&&f().createElement("a",{id:s.replace(/\s/gi,"-"),className:"flyout__item-info",onClick:t},f().createElement(_.Localize,{i18n_default_text:"Learn more"})))),f().createElement("div",{className:"flyout__block-workspace__header"},f().createElement(Uu,{block_node:r,should_hide_display_name:!0}),l&&f().createElement(d,null))))},Gu=function(e){var t=e.width,r=e.url,n={width:t};return f().createElement("div",{className:"flyout__item","data-testid":"dt_flyout_image"},f().createElement("img",{src:r,className:"flyout__image",style:n}))},qu=function(e){var t=e.text;return f().createElement(m.Text,{as:"p",size:"xs",styles:{lineHeight:"1.3em"}},t)},Vu=function(e){return f().createElement("div",{className:"flyout__item","data-testid":"dt_flyout_video_container"},f().createElement("iframe",{"data-testid":"dt_flyout_video",className:"flyout__video",src:e.url,frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%"}))};const Yu=(0,h.observer)((function(){var e=ya(),t=e.flyout,n=e.flyout_help,o=n.block_node,a=n.block_type,i=n.examples,l=n.help_string,c=n.onBackClick,s=n.onSequenceClick,u=n.should_next_disable,d=n.should_previous_disable,p=n.title,h=t.is_search_flyout,y=l&&Je(r.p)[a],v=0;return f().createElement(f().Fragment,null,f().createElement("div",{className:"flyout__help-header","data-testid":"dt_flyout_help_base"},f().createElement("button",{className:"dc-btn flyout__button-back",onClick:c},f().createElement(m.Icon,{icon:"IcArrowLeft"})),f().createElement(m.Text,{weight:"bold",className:"flyout__help-title"},p),f().createElement("div",{className:"flyout__item-buttons"},f().createElement(m.Button,{className:"flyout__button-add",has_effect:!0,id:"db-flyout-help__add--".concat(a),onClick:function(){return Blockly.derivWorkspace.addBlockNode(o)},primary:!0,text:(0,_.localize)("Add"),type:"button"}))),f().createElement("div",{className:"flyout__help-content"},y&&y.map((function(e,t){var r=e.type,n=e.width,c=e.url,s=e.example_id,u=l.text,d=i.find((function(e){return e.id===s}));switch(r){case Ve:return v<u.length?f().createElement(qu,{key:"".concat(a,"_").concat(t),text:u[v++]}):null;case"video":return f().createElement(Vu,{key:"".concat(a,"_").concat(t),url:c});case Ye:return f().createElement(Gu,{key:"".concat(a,"_").concat(t),width:n,url:c});case He:return f().createElement(Uu,{key:"".concat(a,"_").concat(t),block_node:o});case We:return d?f().createElement(Uu,{key:"".concat(a,"_").concat(t),block_node:d.childNodes[0]}):null;default:return null}}))),!h&&!(d&&u)&&f().createElement("div",{className:"flyout__help-footer"},f().createElement(m.Button,{className:"flyout__button-previous",secondary:!0,onClick:function(){return s(!1)},text:(0,_.localize)("Previous"),type:"button",is_disabled:d,renderText:function(e){return d&&f().createElement(m.Text,{size:"xs",weight:"bold",align:"center",color:"disabled"},e)}}),f().createElement(m.Button,{className:"flyout__button-next",secondary:!0,onClick:function(){return s(!0)},text:(0,_.localize)("Next"),type:"button",is_disabled:u,renderText:function(e){return u&&f().createElement(m.Text,{size:"xs",weight:"bold",align:"center",color:"disabled"},e)}})))}));var Hu=function(e){var t=e.search_term,r=e.total_result;return f().createElement("div",{className:"flyout__search-header"},f().createElement(m.Text,{weight:"bold",className:"flyout__search-header-text"},(0,_.localize)('Results for "{{ search_term }}"',{search_term:t,interpolation:{escapeValue:!1}})),f().createElement(m.Text,{weight:"bold",color:"profit-success",className:"flyout__search-header-text"},"".concat(r," ").concat(r>1?(0,_.localize)("results"):(0,_.localize)("result"))))},Wu=function(e){var t=f().useRef(),n=e.flyout_content,o=e.active_helper,a=e.setHelpContent,i=e.initFlyoutHelp,l=e.is_empty,c=e.is_search_flyout,s=e.selected_category,u=e.first_get_variable_block_index;return f().createElement("div",{ref:t,className:_a()("flyout__content",{"flyout__normal-content":!c})},f().createElement(m.ThemedScrollbars,{className:"flyout__content-scrollbar"},"indicators"===(null==s?void 0:s.getAttribute("id"))&&f().createElement("div",{className:"flyout__content-disclaimer"},f().createElement("span",{className:"flyout__content-disclaimer-icon"},f().createElement(m.Icon,{icon:"IcBlackWarning",custom_color:"#000000",className:"flyout__content-disclaimer__warning-icon"})),f().createElement("span",{className:"flyout__content-disclaimer-text"},(0,_.localize)("Indicators on the chart tab are for indicative purposes only and may vary slightly from the ones on the {{platform_name_dbot}} workspace.",{platform_name_dbot:(0,z.getPlatformSettings)("dbot").name}))),l?f().createElement("div",{className:"flyout__search-empty"},f().createElement(m.Text,{as:"h2",weight:"bold",line_height:"xxs"},(0,_.localize)("No results found"))):n.map((function(e,t){switch(e.tagName.toUpperCase()){case Blockly.Xml.NODE_BLOCK:var n,l,s,d,p=e.getAttribute("type")||"";return f().createElement(Fu,{key:"".concat(e.getAttribute("type")).concat(null===(n=window)||void 0===n||null===(l=n.Blockly)||void 0===l||null===(s=l.utils)||void 0===s||null===(d=s.idGenerator)||void 0===d?void 0:d.genUid()),id:"flyout__item-workspace--".concat(t),block_node:e,should_hide_display_name:"variables_get"===p&&t!==u,onInfoClick:Je(r.p)[p]&&(c?function(){return a(e)}:function(){return i(e,p)}),is_active:o===p});case Blockly.Xml.NODE_LABEL:return f().createElement("div",{key:"".concat(e.getAttribute("text")).concat(t),className:"flyout__item-label-bold"},e.getAttribute("text"));case Blockly.Xml.NODE_INPUT:return f().createElement(m.Input,{key:"".concat(e.getAttribute("name")).concat(t),className:"".concat(e.getAttribute("className")),type:"".concat(e.getAttribute("type")),name:"".concat(e.getAttribute("name")),placeholder:"".concat(e.getAttribute("placeholder")),autoComplete:"off"});case Blockly.Xml.NODE_BUTTON:var h=e.getAttribute("callbackKey"),y=e.getAttribute("id");return f().createElement("button",{id:y,key:"".concat(h).concat(t),className:_a()("dc-btn","dc-btn-effect","dc-btn--primary","".concat(e.getAttribute("className"))),onClick:function(e){var t=window.Blockly.derivWorkspace,r=t.getButtonCallback(h);e.targetWorkspace_=t,e.getTargetWorkspace=function(){return e.targetWorkspace_},null==r||r(e)}},e.getAttribute("text"));default:return null}}))))},Ku=(0,h.observer)((function(){var e=ya(),t=e.flyout,r=e.flyout_help,n=v().gtm,o=r.active_helper,a=r.initFlyoutHelp,i=r.setHelpContent,l=t.flyout_content,c=t.flyout_width,s=t.is_help_content,u=t.is_search_flyout,d=t.is_visible,p=t.onMount,m=t.onUnmount,h=t.search_term,y=t.selected_category,_=t.first_get_variable_block_index,b=n.pushDataLayer;f().useEffect((function(){return p(),function(){return m()}}),[p,m]),d&&u&&b({event:"dbot_search_results",value:!0});var g=Object.keys(l).length,E=0===g;return d&&f().createElement("div",{id:"gtm-search-results",className:_a()("flyout",{flyout__search:u,flyout__help:s,flyout__normal:!s&&!u}),style:{width:"".concat(c,"px")}},u&&!s&&f().createElement(Hu,{search_term:h,total_result:g}),s?f().createElement(Yu,null):f().createElement(Wu,{is_empty:E,flyout_content:l,active_helper:o,setHelpContent:i,initFlyoutHelp:a,is_search_flyout:u,selected_category:y,first_get_variable_block_index:_}))}));const $u=Ku,Xu=function(e){var t=e.is_running,r=e.is_multiplier,n=e.is_contract_dialog_open,o=e.is_stop_bot_dialog_open,a=e.closeMultiplierContract,i=e.onOkButtonClick,l=e.toggleStopBotDialog,c=t&&r?(0,_.localize)("Keep my contract"):(0,_.localize)("Stop my bot"),s=t&&r?(0,_.localize)("Close my contract"):(0,_.localize)("Back"),u=t&&r?(0,_.localize)("Keep your current contract?"):(0,_.localize)("Stop your current bot?"),d=t&&r?a:l;return f().createElement(f().Fragment,null,f().createElement(m.Dialog,{portal_element_id:"modal_root",title:u,is_visible:t?o:n,confirm_button_text:c,onConfirm:i,cancel_button_text:s,onCancel:d,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0},t&&r?f().createElement(f().Fragment,null,f().createElement(m.Text,{as:"p",line_height:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"}},f().createElement(_.Localize,{i18n_default_text:"Close your contract now or keep it running. If you decide to keep it running, you can check and close it later on the "}),f().createElement(m.Text,{weight:"bold",as:"span",line_height:"s",size:"xs"},f().createElement(_.Localize,{i18n_default_text:"Reports"})),f().createElement(_.Localize,{i18n_default_text:"page."})),f().createElement(m.Text,{as:"p",line_height:"s",size:"xs"},f().createElement(_.Localize,{i18n_default_text:"The Quick Strategy you just created will be loaded to the workspace."}))):f().createElement(f().Fragment,null,f().createElement(m.Text,{as:"p",line_height:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"}},f().createElement(_.Localize,{i18n_default_text:"Stopping the current bot will load the Quick Strategy you just created to the workspace."})),f().createElement(m.Text,{as:"p",line_height:"s",size:"xs"},f().createElement(_.Localize,{i18n_default_text:"Any open contracts can be viewed on the "}),f().createElement(m.Text,{weight:"bold",as:"span",line_height:"s",size:"xs"},f().createElement(_.Localize,{i18n_default_text:"Reports"})),f().createElement(m.Text,{as:"span",line_height:"s",size:"xs",styles:{paddingInlineStart:"0.4rem"}},f().createElement(_.Localize,{i18n_default_text:"page."}))))))};var Qu=(0,h.observer)((function(){var e=ya(),t=e.run_panel,r=e.quick_strategy,n=e.summary_card,o=r.is_contract_dialog_open,a=r.is_stop_bot_dialog_open,i=r.toggleStopBotDialog,l=t.is_running,c=t.closeMultiplierContract,s=t.stopMyBot,u=t.is_dialog_open,d=n.is_multiplier;return f().createElement(Xu,{is_running:l,onOkButtonClick:s,is_contract_dialog_open:o,is_stop_bot_dialog_open:a,is_multiplier:d,closeMultiplierContract:c,is_dialog_open:u,toggleStopBotDialog:i})}));const Ju=Qu,Zu=function(e){var t=e.popover_message,r=e.button_id,n=e.button_classname,o=e.buttonOnClick,a=e.icon,i=e.button_text;return f().createElement(m.Popover,{alignment:"bottom",message:t,should_disable_pointer_events:!0},f().createElement(m.Button,{id:r,className:n,has_effect:!0,onClick:o,icon:a,green:!0},i))};function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ef.apply(null,arguments)}const tf=function(e){var t=e.popover_message,r=e.icon,n=e.icon_id,o=e.icon_color,a=e.action,i=e.data_testid,l=function(){return f().createElement(m.Icon,ef({icon:r,id:n,className:"toolbar__icon",onClick:a},o&&{color:o},{data_testid:i}))};return v().ui.is_desktop?f().createElement(m.Popover,{alignment:"bottom",message:t,zIndex:String(yi.TOOLBAR),should_disable_pointer_events:!0},l()):l()};var rf=(0,h.observer)((function(){var e=ya(),t=e.dashboard,r=e.toolbar,n=e.load_modal,o=e.save_modal,a=t.setPreviewOnPopup,i=t.setChartModalVisibility,l=t.setTradingViewModalVisibility,c=r.has_redo_stack,s=r.has_undo_stack,u=r.onResetClick,d=r.onSortClick,p=r.onUndoClick,m=r.onZoomInOutClick,h=o.toggleSaveModal,y=n.toggleLoadModal,b=v().ui.is_desktop;return f().createElement("div",{className:"toolbar__wrapper"},f().createElement("div",{className:"toolbar__group toolbar__group-btn","data-testid":"dt_toolbar_group_btn"},f().createElement(tf,{popover_message:(0,_.localize)("Reset"),icon:"IcReset",icon_id:"db-toolbar__reset-button",data_testid:"dt_toolbar_reset_button",action:u}),f().createElement(tf,{popover_message:(0,_.localize)("Import"),icon:"IcFolderOpen",icon_id:"db-toolbar__import-button",data_testid:"dt_toolbar_import_button",action:function(){a(!0),y(),Kr({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"load_strategy",load_strategy_tab:"recent"})}}),f().createElement(tf,{popover_message:(0,_.localize)("Save"),icon:"IcSave",icon_id:"db-toolbar__save-button",data_testid:"dt_toolbar_save_button",action:h}),f().createElement(tf,{popover_message:(0,_.localize)("Sort blocks"),icon:"IcSort",icon_id:"db-toolbar__sort-button",data_testid:"dt_toolbar_sort_button",action:d}),b&&f().createElement(f().Fragment,null,f().createElement("div",{className:"vertical-divider"}),f().createElement(tf,{popover_message:(0,_.localize)("Charts"),icon:"IcChartsTabDbot",icon_id:"db-toolbar__charts-button",data_testid:"dt_toolbar_chart_button",action:function(){return i()}}),f().createElement(tf,{popover_message:(0,_.localize)("TradingView Chart"),icon:"IcTradingViewChart",icon_id:"db-toolbar__tradingview-button",data_testid:"dt_toolbar_tradingview_chart_button",action:function(){return l()}})),f().createElement("div",{className:"vertical-divider"}),f().createElement(tf,{popover_message:(0,_.localize)("Undo"),icon:"IcUndo",icon_id:"db-toolbar__undo-button",data_testid:"dt_toolbar_undo_button",icon_color:s?void 0:"disabled",action:function(){return p(!1)}}),f().createElement(tf,{popover_message:(0,_.localize)("Redo"),icon:"IcRedo",icon_id:"db-toolbar__redo-button",data_testid:"dt_toolbar_redo_button",icon_color:c?void 0:"disabled",action:function(){return p(!0)}}),f().createElement("div",{className:"vertical-divider"}),f().createElement(tf,{popover_message:(0,_.localize)("Zoom in"),icon:"IcZoomIn",icon_id:"db-toolbar__zoom-in-button",data_testid:"dt_toolbar_zoom_in_button",action:function(){return m(!0)}}),f().createElement(tf,{popover_message:(0,_.localize)("Zoom out"),icon:"IcZoomOut",icon_id:"db-toolbar__zoom-out",data_testid:"dt_toolbar_zoom_out_button",action:function(){return m(!1)}})))}));const nf=rf;var of=(0,h.observer)((function(){var e=ya(),t=e.run_panel,r=e.toolbar,n=e.quick_strategy,o=v().ui.is_desktop,a=r.is_dialog_open,i=r.closeResetDialog,l=r.onResetOkButtonClick,c=t.is_running,s=n.setFormVisibility,u=c?(0,_.localize)("Yes"):(0,_.localize)("OK"),d=c?(0,_.localize)("No"):(0,_.localize)("Cancel");return f().createElement(f().Fragment,null,f().createElement("div",{className:"toolbar dashboard__toolbar","data-testid":"dt_dashboard_toolbar"},f().createElement("div",{className:"toolbar__section"},!o&&f().createElement(Zu,{popover_message:(0,_.localize)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:function(){s(!0),Kr({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"quick_strategy"})},button_text:(0,_.localize)("Quick strategy")}),o&&f().createElement(nf,null))),!o&&f().createElement(nf,null),f().createElement(m.Dialog,{portal_element_id:"modal_root",title:(0,_.localize)("Are you sure?"),is_visible:a,confirm_button_text:u,onConfirm:l,cancel_button_text:d,onCancel:i,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0},c?f().createElement(_.Localize,{i18n_default_text:"The workspace will be reset to the default strategy and any unsaved changes will be lost. <0>Note: This will not affect your running bot.</0>",components:[f().createElement("div",{key:0,className:"toolbar__dialog-text--second","data-testid":"dt_toolbar_dialog_text_second"})]}):f().createElement(_.Localize,{i18n_default_text:"Any unsaved changes will be lost."})))}));const af=of,lf=(0,h.observer)((function(e){var t=e.search,r=e.is_search_loading,n=e.onClick;return t?r?f().createElement("div",{className:"loader","data-testid":"loader"}):f().createElement(m.Icon,{icon:"IcCloseCircle",onClick:n,color:"secondary"}):f().createElement(m.Icon,{icon:"IcSearch"})}));function cf(){return cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cf.apply(null,arguments)}const sf=function(e){var t=e.is_search_loading,r=e.onSearch,n=e.onSearchBlur,o=e.onSearchClear,a=e.onSearchKeyUp;return f().createElement("div",{className:"db-toolbox__search"},f().createElement(Ya.Formik,{initialValues:{search:""},onSubmit:r},(function(e){var r=e.submitForm,i=e.values.search,l=e.setFieldValue;return f().createElement(Ya.Form,null,f().createElement(Ya.Field,{name:"search"},(function(e){var c=e.field;return f().createElement(m.Input,cf({},c,{className:"db-toolbox__search-field",type:"text",name:"search",placeholder:(0,_.localize)("Search"),onKeyUp:function(){return a(r)},onFocus:r,onBlur:n,leading_icon:f().createElement(lf,{search:i,is_search_loading:t,onClick:function(){return o(l)}})}))})))})))};function uf(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ff.apply(null,arguments)}var df=function(e){var t=ff({},(uf(e),e));return f().createElement("arg",t)},pf=function(e){var t=ff({},(uf(e),e));return f().createElement("block",t)},mf=function(e){var t=ff({},(uf(e),e));return f().createElement("category",t)},hf=function(e){var t=ff({},(uf(e),e));return f().createElement("example",t)},yf=function(e){var t=ff({},(uf(e),e));return f().createElement("examples",t)},vf=function(e){var t=ff({},(uf(e),e));return f().createElement("field",t)},_f=function(e){var t=ff({},(uf(e),e));return f().createElement("mutation",t)},bf=function(e){var t=ff({},(uf(e),e));return f().createElement("next",t)},gf=function(e){var t=ff({},(uf(e),e));return f().createElement("shadow",t)},Ef=function(e){var t=ff({},(uf(e),e));return f().createElement("statement",t)},wf=function(e){var t=ff({},(uf(e),e));return f().createElement("value",t)},kf=function(e){var t=ff({},(uf(e),e));return f().createElement("xml",t)},xf=r(931).renderToStaticMarkup(f().createElement(kf,{xmlns:"http://www.w3.org/1999/xhtml",id:"toolbox"},f().createElement(mf,{id:"trade_parameters",name:(0,_.localize)("Trade parameters")},f().createElement(pf,{type:"trade_definition"},f().createElement(Ef,{name:"TRADE_OPTIONS"},f().createElement(pf,{type:"trade_definition_market",deletable:"false",movable:"false"},f().createElement(vf,{name:"MARKET_LIST"}),f().createElement(vf,{name:"SUBMARKET_LIST"}),f().createElement(vf,{name:"SYMBOL_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"trade_definition_tradetype",deletable:"false",movable:"false"},f().createElement(vf,{name:"TRADETYPECAT_LIST"}),f().createElement(vf,{name:"TRADETYPE_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"trade_definition_contracttype",deletable:"false",movable:"false"},f().createElement(vf,{name:"TYPE_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"trade_definition_candleinterval",deletable:"false",movable:"false"},f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"60"),f().createElement(bf,null,f().createElement(pf,{type:"trade_definition_restartbuysell",deletable:"false",movable:"false"},f().createElement(vf,{name:"TIME_MACHINE_ENABLED"},"FALSE"),f().createElement(bf,null,f().createElement(pf,{type:"trade_definition_restartonerror",deletable:"false",movable:"false"},f().createElement(vf,{name:"RESTARTONERROR"},"TRUE")))))))))))))),f().createElement(pf,{type:"trade_definition_tradeoptions"},f().createElement(_f,{has_first_barrier:"false",has_second_barrier:"false",has_prediction:"false"}),f().createElement(vf,{name:"DURATIONTYPE_LIST"}),f().createElement(vf,{name:"CURRENCY_LIST"},"USD"),f().createElement(wf,{name:"DURATION"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(wf,{name:"AMOUNT"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(vf,{name:"AMOUNT_LIMITS"})),f().createElement(pf,{type:"trade_definition_multiplier"},f().createElement(vf,{name:"MULTIPLIERTYPE_LIST"}),f().createElement(vf,{name:"CURRENCY_LIST"},"USD"),f().createElement(wf,{name:"AMOUNT"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(vf,{name:"AMOUNT_LIMITS"})),f().createElement(pf,{type:"multiplier_take_profit"},f().createElement(wf,{name:"AMOUNT"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0")))),f().createElement(pf,{type:"multiplier_stop_loss"},f().createElement(wf,{name:"AMOUNT"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0")))),f().createElement(pf,{type:"trade_definition_accumulator"},f().createElement(vf,{name:"GROWTHRATE_LIST"}),f().createElement(vf,{name:"CURRENCY_LIST"},"USD"),f().createElement(wf,{name:"AMOUNT"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")))),f().createElement(pf,{type:"accumulator_take_profit"},f().createElement(wf,{name:"AMOUNT"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0"))))),f().createElement(mf,{id:"purchase_conditions",name:(0,_.localize)("Purchase conditions")},f().createElement(pf,{type:"before_purchase"}),f().createElement(pf,{type:"purchase"})),f().createElement(mf,{id:"sell_conditions",name:(0,_.localize)("Sell conditions (optional)")},f().createElement(pf,{type:"during_purchase"}),f().createElement(pf,{type:"sell_at_market"})),f().createElement(mf,{id:"trade_results",name:(0,_.localize)("Restart trading conditions")},f().createElement(pf,{type:"after_purchase"}),f().createElement(pf,{type:"trade_again"})),f().createElement(mf,{id:"analysis",name:(0,_.localize)("Analysis")},f().createElement(mf,{id:"indicators",name:(0,_.localize)("Indicators")},f().createElement(pf,{type:"sma_statement"},f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))))))),f().createElement(pf,{type:"smaa_statement"},f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))))))),f().createElement(pf,{type:"bb_statement"},f().createElement(vf,{name:"BBRESULT_LIST"},"0"),f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))),f().createElement(bf,null,f().createElement(pf,{type:"std_dev_multiplier_up",deletable:"false",movable:"false"},f().createElement(wf,{name:"UPMULTIPLIER"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"5"))),f().createElement(bf,null,f().createElement(pf,{type:"std_dev_multiplier_down"},f().createElement(wf,{name:"DOWNMULTIPLIER"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"5")))))))))))),f().createElement(pf,{type:"bba_statement"},f().createElement(vf,{name:"BBRESULT_LIST"},"0"),f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))),f().createElement(bf,null,f().createElement(pf,{type:"std_dev_multiplier_up",deletable:"false",movable:"false"},f().createElement(wf,{name:"UPMULTIPLIER"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"5"))),f().createElement(bf,null,f().createElement(pf,{type:"std_dev_multiplier_down"},f().createElement(wf,{name:"DOWNMULTIPLIER"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"5")))))))))))),f().createElement(pf,{type:"ema_statement"},f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))))))),f().createElement(pf,{type:"emaa_statement"},f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))))))),f().createElement(pf,{type:"rsi_statement"},f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))))))),f().createElement(pf,{type:"rsia_statement"},f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))))))),f().createElement(pf,{type:"macda_statement"},f().createElement(vf,{name:"MACDFIELDS_LIST"},"1"),f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"}),f().createElement(bf,null,f().createElement(pf,{type:"fast_ema_period",deletable:"false",movable:"false"},f().createElement(wf,{name:"FAST_EMA_PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"12"))),f().createElement(bf,null,f().createElement(pf,{type:"slow_ema_period",deletable:"false",movable:"false"},f().createElement(wf,{name:"SLOW_EMA_PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"26"))),f().createElement(bf,null,f().createElement(pf,{type:"signal_ema_period",deletable:"false",movable:"false"},f().createElement(wf,{name:"SIGNAL_EMA_PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"9"))))))))))))),f().createElement(mf,{name:(0,_.localize)("Tick and candle analysis"),id:"tick_analysis"},f().createElement(pf,{type:"tick_analysis"}),f().createElement(pf,{type:"tick"}),f().createElement(pf,{type:"last_digit"}),f().createElement(pf,{type:"stat"}),f().createElement(pf,{type:"stat_list"}),f().createElement(pf,{type:"ticks"}),f().createElement(pf,{type:"lastDigitList"}),f().createElement(pf,{type:"check_direction"}),f().createElement(pf,{type:"is_candle_black"}),f().createElement(pf,{type:"read_ohlc"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"),f().createElement(wf,{name:"CANDLEINDEX"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")))),f().createElement(pf,{type:"read_ohlc_obj"}),f().createElement(pf,{type:"ohlc_values"}),f().createElement(pf,{type:"ohlc_values_in_list"}),f().createElement(pf,{type:"get_ohlc"},f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"),f().createElement(wf,{name:"CANDLEINDEX"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")))),f().createElement(pf,{type:"ohlc"})),f().createElement(mf,{name:(0,_.localize)("Contract"),id:"contract_details"},f().createElement(pf,{type:"contract_check_result"}),f().createElement(pf,{type:"read_details"}),f().createElement(pf,{type:"sell_price"}),f().createElement(pf,{type:"check_sell"}),f().createElement(pf,{type:"payout"}),f().createElement(pf,{type:"ask_price"})),f().createElement(mf,{name:(0,_.localize)("Stats"),id:"stats"},f().createElement(pf,{type:"balance"}),f().createElement(pf,{type:"total_profit"}),f().createElement(pf,{type:"total_runs"}))),f().createElement(mf,{id:"utility",name:(0,_.localize)("Utility")},f().createElement(mf,{name:(0,_.localize)("Custom functions"),id:"custom_functions",dynamic:"PROCEDURE"}),f().createElement(mf,{name:(0,_.localize)("Variables"),id:"variables",dynamic:"VARIABLE"}),f().createElement(mf,{name:(0,_.localize)("Notifications"),id:"notifications"},f().createElement(pf,{type:"text_print"},f().createElement(wf,{name:"TEXT"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"text_prompt_ext"},f().createElement(vf,{name:"TYPE"},"TEXT"),f().createElement(wf,{name:"TEXT"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"notify_telegram"},f().createElement(wf,{name:"TELEGRAM_ACCESS_TOKEN"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"}))),f().createElement(wf,{name:"TELEGRAM_CHAT_ID"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"}))),f().createElement(wf,{name:"TELEGRAM_MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc"))))),f().createElement(mf,{name:(0,_.localize)("Time"),id:"time"},f().createElement(pf,{type:"epoch"}),f().createElement(pf,{type:"timeout"}),f().createElement(pf,{type:"tick_delay"}),f().createElement(pf,{type:"totimestamp"},f().createElement(wf,{name:"DATETIME"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"yyyy-mm-dd hh:mm:ss")))),f().createElement(pf,{type:"todatetime"},f().createElement(wf,{name:"TIMESTAMP"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0"))))),f().createElement(mf,{name:(0,_.localize)("Math"),id:"math"},f().createElement(pf,{type:"math_number"}),f().createElement(pf,{type:"math_arithmetic"},f().createElement(vf,{name:"OP"},"ADD"),f().createElement(wf,{name:"A"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(wf,{name:"B"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")))),f().createElement(pf,{type:"math_single"},f().createElement(vf,{name:"OP"},"ROOT"),f().createElement(wf,{name:"NUM"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"9")))),f().createElement(pf,{type:"math_trig"},f().createElement(vf,{name:"OP"},"SIN"),f().createElement(wf,{name:"NUM"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"45")))),f().createElement(pf,{type:"math_constant"}),f().createElement(pf,{type:"math_number_property"},f().createElement(_f,{divisor_input:"false"}),f().createElement(vf,{name:"PROPERTY"},"EVEN"),f().createElement(wf,{name:"NUMBER_TO_CHECK"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0")))),f().createElement(pf,{type:"math_change"},f().createElement(vf,{name:"VAR",variabletype:""},"item"),f().createElement(wf,{name:"DELTA"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")))),f().createElement(pf,{type:"math_on_list"}),f().createElement(pf,{type:"math_round"},f().createElement(vf,{name:"OP"},"ROUND"),f().createElement(wf,{name:"NUM"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"3.1")))),f().createElement(pf,{type:"math_modulo"},f().createElement(wf,{name:"DIVIDEND"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"64"))),f().createElement(wf,{name:"DIVISOR"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10")))),f().createElement(pf,{type:"math_constrain"},f().createElement(wf,{name:"Value"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"50"))),f().createElement(wf,{name:"LOW"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(wf,{name:"HIGH"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"100")))),f().createElement(pf,{type:"math_random_int"},f().createElement(wf,{name:"FROM"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(wf,{name:"TO"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"100")))),f().createElement(pf,{type:"math_random_float"})),f().createElement(mf,{name:(0,_.localize)("Text"),id:"text"},f().createElement(pf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")),f().createElement(pf,{type:"text_join"},f().createElement(vf,{name:"VARIABLE",variabletype:""},"text"),f().createElement(Ef,{name:"STACK"},f().createElement(pf,{type:"text_statement",movable:"false"},f().createElement(wf,{name:"TEXT"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))))),f().createElement(pf,{type:"text_append"},f().createElement(vf,{name:"VAR",variabletype:""},"text"),f().createElement(wf,{name:"TEXT"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"text_length"},f().createElement(wf,{name:"Value"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"text_isEmpty"},f().createElement(wf,{name:"Value"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"})))),f().createElement(pf,{type:"text_indexOf"},f().createElement(vf,{name:"END"},"FIRST"),f().createElement(wf,{name:"Value"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"text"))),f().createElement(wf,{name:"FIND"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"text_charAt"},f().createElement(_f,{at:"true"}),f().createElement(vf,{name:"WHERE"},"FROM_START"),f().createElement(wf,{name:"Value"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"item"))),f().createElement(wf,{name:"AT"},f().createElement(gf,{type:"math_number_positive"},f().createElement(vf,{name:"NUM"},"1")))),f().createElement(pf,{type:"text_getSubstring"},f().createElement(_f,{at1:"true",at2:"true"}),f().createElement(vf,{name:"WHERE1"},"FROM_START"),f().createElement(vf,{name:"WHERE2"},"FROM_START"),f().createElement(wf,{name:"STRING"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"text"))),f().createElement(wf,{name:"AT1"},f().createElement(gf,{type:"math_number_positive"},f().createElement(vf,{name:"NUM"},"0"))),f().createElement(wf,{name:"AT2"},f().createElement(gf,{type:"math_number_positive"},f().createElement(vf,{name:"NUM"},"2")))),f().createElement(pf,{type:"text_changeCase"},f().createElement(vf,{name:"CASE"},"UPPERCASE"),f().createElement(wf,{name:"TEXT"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))),f().createElement(pf,{type:"text_trim"},f().createElement(vf,{name:"MODE"},"BOTH"),f().createElement(wf,{name:"TEXT"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc"))))),f().createElement(mf,{name:(0,_.localize)("Logic"),id:"logic"},f().createElement(pf,{type:"controls_if"}),f().createElement(pf,{type:"logic_compare"}),f().createElement(pf,{type:"logic_operation"}),f().createElement(pf,{type:"logic_negate"}),f().createElement(pf,{type:"logic_boolean"}),f().createElement(pf,{type:"logic_null"}),f().createElement(pf,{type:"logic_ternary"})),f().createElement(mf,{name:(0,_.localize)("Lists"),id:"lists"},f().createElement(pf,{type:"lists_create_with"},f().createElement(vf,{name:"VARIABLE",variabletype:""},"list"),f().createElement(Ef,{name:"STACK"},f().createElement(pf,{type:"lists_statement",movable:"false"},f().createElement(bf,null,f().createElement(pf,{type:"lists_statement",movable:"false"}))))),f().createElement(pf,{type:"lists_repeat"},f().createElement(wf,{name:"NUM"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"5")))),f().createElement(pf,{type:"lists_length"}),f().createElement(pf,{type:"lists_isEmpty"}),f().createElement(pf,{type:"lists_indexOf"}),f().createElement(pf,{type:"lists_getIndex"}),f().createElement(pf,{type:"lists_setIndex"}),f().createElement(pf,{type:"lists_getSublist"}),f().createElement(pf,{type:"lists_split"},f().createElement(_f,{mode:"SPLIT"}),f().createElement(vf,{name:"MODE"},"SPLIT"),f().createElement(wf,{name:"DELIM"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},",")))),f().createElement(pf,{type:"lists_sort"})),f().createElement(mf,{name:(0,_.localize)("Loops"),id:"loops"},f().createElement(pf,{type:"controls_repeat"}),f().createElement(pf,{type:"controls_repeat_ext"}),f().createElement(pf,{type:"controls_whileUntil"}),f().createElement(pf,{type:"controls_for"}),f().createElement(pf,{type:"controls_forEach"}),f().createElement(pf,{type:"controls_flow_statements"})),f().createElement(mf,{name:(0,_.localize)("Miscellaneous"),id:"misc"},f().createElement(pf,{type:"loader"}),f().createElement(pf,{type:"block_holder"}),f().createElement(pf,{type:"console"},f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")))))),f().createElement(yf,{id:"examples"},f().createElement(hf,{id:"sell_available"},f().createElement(pf,{type:"during_purchase"},f().createElement(Ef,{name:"DURING_PURCHASE_STACK"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"check_sell"})),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"sell_at_market"})))))),f().createElement(hf,{id:"trade_again"},f().createElement(pf,{type:"after_purchase"},f().createElement(Ef,{name:"AFTERPURCHASE_STACK"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"total_profit"})),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"target_profit"))))))))),f().createElement(hf,{id:"sma_block_example"},f().createElement(pf,{type:"sma_statement"},f().createElement(vf,{name:"VARIABLE",variabletype:""},"sma"),f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"},f().createElement(pf,{type:"ohlc_values"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"))),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))))))))),f().createElement(hf,{id:"sma_array"},f().createElement(pf,{type:"smaa_statement"},f().createElement(vf,{name:"VARIABLE",variabletype:""},"smaa"),f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))))))))),f().createElement(hf,{id:"sma_block_example_1"},f().createElement(pf,{type:"sma_statement"},f().createElement(vf,{name:"VARIABLE",variabletype:""},"sma"),f().createElement(Ef,{name:"STATEMENT"},f().createElement(pf,{type:"input_list",deletable:"false",movable:"false"},f().createElement(wf,{name:"INPUT_LIST"},f().createElement(pf,{type:"ticks"})),f().createElement(bf,null,f().createElement(pf,{type:"period",deletable:"false",movable:"false"},f().createElement(wf,{name:"PERIOD"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))))))))),f().createElement(hf,{id:"in_candle_list_read"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"op"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"read_ohlc"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"),f().createElement(wf,{name:"CANDLEINDEX"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))))))),f().createElement(hf,{id:"read_candle_value"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"op"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"read_ohlc_obj"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(wf,{name:"OHLCOBJ"},f().createElement(pf,{type:"read_ohlc"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"),f().createElement(wf,{name:"CANDLEINDEX"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))))))))),f().createElement(hf,{id:"candle_list"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"candle_list"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"ohlc_values"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"))))),f().createElement(hf,{id:"candle_list_1"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"cl"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"ohlc_values_in_list"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(wf,{name:"OHLCLIST"},f().createElement(pf,{type:"ohlc"},f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"))))))),f().createElement(hf,{id:"get_candle"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"candle_open_price"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"read_ohlc_obj"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"epoch"),f().createElement(wf,{name:"OHLCOBJ"},f().createElement(pf,{type:"get_ohlc"},f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"),f().createElement(wf,{name:"CANDLEINDEX"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"2"))))))))),f().createElement(hf,{id:"check_result"},f().createElement(pf,{type:"after_purchase"},f().createElement(Ef,{name:"AFTERPURCHASE_STACK"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"contract_check_result"},f().createElement(vf,{name:"CHECK_RESULT"},"win"))),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"trade_again"})))))),f().createElement(hf,{id:"sell_pl"},f().createElement(pf,{type:"during_purchase"},f().createElement(Ef,{name:"DURING_PURCHASE_STACK"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"check_sell"})),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"sell_price"})),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"stake"))))),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"sell_at_market"})))))))),f().createElement(hf,{id:"if-return"},f().createElement(pf,{type:"procedures_defreturn"},f().createElement(_f,null,f().createElement(df,{name:"x"})),f().createElement(vf,{name:"NAME"},"do something"),f().createElement(Ef,{name:"STACK"},f().createElement(pf,{type:"procedures_ifreturn"},f().createElement(_f,{value:"1"}),f().createElement(wf,{name:"CONDITION"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))))),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"text"},f().createElement(vf,{name:"TEXT"},"x must be positive or zero"))))),f().createElement(wf,{name:"RETURN"},f().createElement(pf,{type:"math_single"},f().createElement(vf,{name:"OP"},"ROOT"),f().createElement(wf,{name:"NUM"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"9")),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))))))),f().createElement(hf,{id:"notify_telegram"},f().createElement(pf,{type:"notify_telegram"},f().createElement(wf,{name:"TELEGRAM_ACCESS_TOKEN"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"})),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"access_token"))),f().createElement(wf,{name:"TELEGRAM_CHAT_ID"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"})),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"chat_id"))),f().createElement(wf,{name:"TELEGRAM_MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"Enjoy!"))))),f().createElement(hf,{id:"epoch"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"candle"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"read_ohlc"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"open"),f().createElement(vf,{name:"CANDLEINTERVAL_LIST"},"default"),f().createElement(wf,{name:"CANDLEINDEX"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))))),f().createElement(bf,null,f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"Open Time"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"read_ohlc_obj"},f().createElement(vf,{name:"OHLCFIELD_LIST"},"epoch"),f().createElement(wf,{name:"OHLCOBJ"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"candle"))))),f().createElement(bf,null,f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"Open Time"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"math_arithmetic"},f().createElement(vf,{name:"OP"},"MINUS"),f().createElement(wf,{name:"A"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")),f().createElement(pf,{type:"epoch"})),f().createElement(wf,{name:"B"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1")),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"Open Time"))))),f().createElement(bf,null,f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"GTE"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"Time Since Candle Opened"))),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"30"))))))))))))),f().createElement(hf,{id:"totimestamp"},f().createElement(pf,{type:"before_purchase"},f().createElement(Ef,{name:"BEFOREPURCHASE_STACK"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"epoch"})),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"totimestamp"},f().createElement(wf,{name:"DATETIME"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"1957-08-31 00:00:00"))))))),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"purchase"},f().createElement(vf,{name:"PURCHASE_LIST"},"CALL"))))))),f().createElement(hf,{id:"todatetime"},f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")),f().createElement(pf,{type:"todatetime"},f().createElement(wf,{name:"TIMESTAMP"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0")),f().createElement(pf,{type:"epoch"})))))),f().createElement(hf,{id:"constrain"},f().createElement(pf,{type:"math_constrain"},f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"5"))),f().createElement(wf,{name:"LOW"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))),f().createElement(wf,{name:"HIGH"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"20"))))),f().createElement(hf,{id:"controls_if"},f().createElement(pf,{type:"controls_if"},f().createElement(_f,{elseif:"1",else:"1"}),f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"var1"))),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"var2"))))),f().createElement(wf,{name:"IF1"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"var3"))),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"var4"))))))),f().createElement(hf,{id:"compare_logic"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"))),f().createElement(hf,{id:"compare_logic_1"},f().createElement(pf,{type:"logic_operation"},f().createElement(vf,{name:"OP"},"AND"))),f().createElement(hf,{id:"repeat_while"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0"))),f().createElement(bf,null,f().createElement(pf,{type:"controls_whileUntil"},f().createElement(vf,{name:"MODE"},"WHILE"),f().createElement(wf,{name:"BOOL"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"LTE"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))))),f().createElement(Ef,{name:"DO"},f().createElement(pf,{type:"math_change"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"DELTA"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"1"))),f().createElement(bf,null,f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))))))))))),f().createElement(hf,{id:"repeat_until"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"20"))),f().createElement(bf,null,f().createElement(pf,{type:"controls_whileUntil"},f().createElement(vf,{name:"MODE"},"UNTIL"),f().createElement(wf,{name:"BOOL"},f().createElement(pf,{type:"logic_compare"},f().createElement(vf,{name:"OP"},"EQ"),f().createElement(wf,{name:"A"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))),f().createElement(wf,{name:"B"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))))),f().createElement(Ef,{name:"DO"},f().createElement(pf,{type:"math_change"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"DELTA"},f().createElement(gf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"-1"))),f().createElement(bf,null,f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))))))))))),f().createElement(hf,{id:"controls_for"},f().createElement(pf,{type:"controls_for"},f().createElement(vf,{name:"VAR",variabletype:""},"i"),f().createElement(wf,{name:"FROM"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"0"))),f().createElement(wf,{name:"TO"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"10"))),f().createElement(wf,{name:"BY"},f().createElement(pf,{type:"math_number"},f().createElement(vf,{name:"NUM"},"2"))),f().createElement(Ef,{name:"DO"},f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"i"))))))),f().createElement(hf,{id:"controls_forEach"},f().createElement(pf,{type:"lists_create_with"},f().createElement(vf,{name:"VARIABLE"},"list"),f().createElement(Ef,{name:"STACK"},f().createElement(pf,{type:"lists_statement"},f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"item1"))),f().createElement(bf,null,f().createElement(pf,{type:"lists_statement"},f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"item2"))),f().createElement(bf,null,f().createElement(pf,{type:"lists_statement"},f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"item3"))))))))),f().createElement(bf,null,f().createElement(pf,{type:"controls_forEach"},f().createElement(vf,{name:"VAR",variabletype:""},"i"),f().createElement(wf,{name:"LIST"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"list"))),f().createElement(Ef,{name:"DO"},f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc")),f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"i"))))))))),f().createElement(hf,{id:"break_out"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"logic_boolean"},f().createElement(vf,{name:"BOOL"},"TRUE"))),f().createElement(bf,null,f().createElement(pf,{type:"controls_repeat"},f().createElement(vf,{name:"TIMES"},"10"),f().createElement(Ef,{name:"DO"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_negate"},f().createElement(wf,{name:"BOOL"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))))),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"controls_flow_statements"},f().createElement(vf,{name:"FLOW"},"BREAK"))),f().createElement(bf,null,f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc"))))))))))),f().createElement(hf,{id:"continue"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"logic_boolean"},f().createElement(vf,{name:"BOOL"},"FALSE"))),f().createElement(bf,null,f().createElement(pf,{type:"controls_repeat"},f().createElement(vf,{name:"TIMES"},"10"),f().createElement(Ef,{name:"DO"},f().createElement(pf,{type:"controls_if"},f().createElement(wf,{name:"IF0"},f().createElement(pf,{type:"logic_negate"},f().createElement(wf,{name:"BOOL"},f().createElement(pf,{type:"variables_get"},f().createElement(vf,{name:"VAR",variabletype:""},"x"))))),f().createElement(Ef,{name:"DO0"},f().createElement(pf,{type:"variables_set"},f().createElement(vf,{name:"VAR",variabletype:""},"x"),f().createElement(wf,{name:"VALUE"},f().createElement(pf,{type:"logic_boolean"},f().createElement(vf,{name:"BOOL"},"TRUE"))),f().createElement(bf,null,f().createElement(pf,{type:"controls_flow_statements"},f().createElement(vf,{name:"FLOW"},"CONTINUE"))))),f().createElement(bf,null,f().createElement(pf,{type:"notify"},f().createElement(vf,{name:"NOTIFICATION_TYPE"},"success"),f().createElement(vf,{name:"NOTIFICATION_SOUND"},"silent"),f().createElement(wf,{name:"MESSAGE"},f().createElement(gf,{type:"text"},f().createElement(vf,{name:"TEXT"},"abc"))))))))))))));function Sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Of=(0,h.observer)((function(){var e,t,r=v().ui.is_desktop,n=ya(),o=n.toolbox,a=n.flyout,i=n.quick_strategy,l=o.hasSubCategory,c=o.is_search_loading,s=o.onMount,u=o.onSearch,d=o.onSearchBlur,p=o.onSearchClear,h=o.onSearchKeyUp,y=o.onToolboxItemClick,b=o.onToolboxItemExpand,g=o.onUnmount,E=o.sub_category_index,w=o.toolbox_dom,k=i.setFormVisibility,x=a.setVisibility,S=a.selected_category,O=f().useRef(xf),T=(e=f().useState(!0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),L=T[0],A=T[1];return f().useEffect((function(){return s(O),function(){return g()}}),[]),r?f().createElement("div",{className:"db-toolbox","data-testid":"dashboard__toolbox"},f().createElement(Zu,{popover_message:(0,_.localize)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:function(){k(!0),Kr({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"quick_strategy"})},button_text:(0,_.localize)("Quick strategy")}),f().createElement("div",{id:"gtm-toolbox",className:"db-toolbox__content"},f().createElement("div",{className:"db-toolbox__header"},f().createElement("div",{className:"db-toolbox__title","data-testid":"db-toolbox__title",onClick:function(){A(!L),x(!1)}},(0,_.localize)("Blocks menu"),f().createElement("span",{className:_a()("db-toolbox__title__chevron",{"db-toolbox__title__chevron--active":L})},f().createElement(m.Icon,{icon:"IcChevronDownBold"})))),f().createElement("div",{className:_a()("db-toolbox__content-wrapper",{active:L}),"data-testid":"db-toolbox__content-wrapper"},f().createElement(sf,{is_search_loading:c,onSearch:u,onSearchBlur:d,onSearchClear:p,onSearchKeyUp:h}),f().createElement("div",{className:"db-toolbox__category-menu"},w&&Array.from(w.childNodes).map((function(e,t){if("CATEGORY"===e.tagName.toUpperCase()){var r=l(e.children),n=E.includes(t);return f().createElement("div",{key:"db-toolbox__row--".concat(e.getAttribute("id")),className:_a()("db-toolbox__row",{"db-toolbox__row--active":(null==S?void 0:S.getAttribute("id"))===(null==e?void 0:e.id)})},f().createElement("div",{className:"db-toolbox__item",onClick:function(){r?b(t):y(e)}},f().createElement("div",{className:"db-toolbox__category-text"},f().createElement("div",{className:"db-toolbox__label"},(0,_.localize)(e.getAttribute("name"))),r&&f().createElement("div",{className:_a()("db-toolbox__category-arrow",{"db-toolbox__category-arrow--active":n})},f().createElement(m.Icon,{icon:"IcChevronDownBold"})))),r&&n&&Array.from(e.childNodes).map((function(e){return f().createElement("div",{key:"db-toolbox__sub-category-row--".concat(e.getAttribute("id")),className:_a()("db-toolbox__sub-category-row",{"db-toolbox__sub-category-row--active":(null==S?void 0:S.getAttribute("id"))===(null==e?void 0:e.id)}),onClick:function(){y(e)}},f().createElement(m.Text,{size:"xxs"},(0,_.localize)(e.getAttribute("name"))))})))}return null})))))):null})),Tf=(0,h.observer)((function(){var e,t=ya().blockly_store,r=t.onMount,n=t.onUnmount,o=t.is_loading;return f().useEffect((function(){return r(),function(){n()}}),[]),o?null:null!==(e=window.Blockly)&&void 0!==e&&e.derivWorkspace?f().createElement(f().Fragment,null,f().createElement(Of,null),f().createElement(af,null),f().createElement($u,null),f().createElement(Ju,null)):null}));var Lf=(0,h.observer)((function(){var e=v().ui,t=ya(),r=t.dashboard,n=t.app,o=t.run_panel,a=t.toolbar,i=t.quick_strategy,l=t.blockly_store,c=r.active_tab,s=r.active_tour,u=r.is_preview_on_popup,d=i.is_open,p=o.is_running,m=l.is_loading,h=f().useRef(!1),y=f().useRef(!1),b=e.is_desktop,g=n.onMount,E=n.onUnmount,w=f().useRef(null),k=null;f().useEffect((function(){return g(),function(){return E()}}),[g,E]),f().useEffect((function(){var e,t=null===(e=window.Blockly)||void 0===e?void 0:e.derivWorkspace;return t&&p&&!h.current?(h.current=!0,t.addChangeListener(x)):S(),function(){t&&h.current&&S()}}),[p]);var x=function(e){var t=a.is_reset_button_clicked;"selected"===e.type||t?t&&S():((0,ie.N)(le.UC.workspace_change),S())},S=function(){var e,t;h.current=!1,null===(e=window.Blockly)||void 0===e||null===(t=e.derivWorkspace)||void 0===t||t.removeChangeListener(x)};f().useEffect((function(){var e,t=null===(e=window.Blockly)||void 0===e?void 0:e.derivWorkspace;t&&!y.current&&(y.current=!0,t.addChangeListener(O))}),[m]);var O=function(e){var t=a.is_reset_button_clicked,r=a.setResetButtonState;"delete"!==e.type||t||(k=e.blockId),"selected"===e.type&&k===e.oldElementId&&T(),"change"===e.type&&"AMOUNT_LIMITS"===e.name&&"(min: 0.35 - max: 50000)"===e.newValue&&t&&r(!1)},T=function(){(0,ie.N)(le.UC.block_delete,{label:(0,_.localize)("Undo"),onClick:function(e){window.Blockly.derivWorkspace.undo(),null==e||e()}})};return f().createElement(f().Fragment,null,f().createElement("div",{className:_a()("bot-builder",{"bot-builder--active":1===c&&!u,"bot-builder--inactive":u,"bot-builder--tour-active":s})},u?null:f().createElement("div",{id:"scratch_div",ref:w},f().createElement(Tf,null))),1===c&&f().createElement(cc,{is_mobile:!b}),f().createElement(vl,null),f().createElement(wl,null),d&&f().createElement(Mu,null))}));const Af=Lf;var Nf=r(4220),Cf=r(2829);const Pf=function(){return f().createElement("iframe",{id:"trading-view-iframe",style:{width:"100%",height:"100%",backgroundColor:"white"},src:"https://charts.deriv.com/deriv?hide-signup=true"})};const If=(0,h.observer)((function(){var e=ya().dashboard,t=e.is_trading_view_modal_visible,r=e.setTradingViewModalVisibility;return f().createElement(f().Fragment,null,t&&f().createElement(I,{boundary:".main",header:(0,_.localize)("TradingView Chart"),onClose:r,modalWidth:526,modalHeight:595,minWidth:526,minHeight:524,enableResizing:!0},f().createElement("div",{style:{height:"calc(100% - 6rem)",padding:"0.5rem"}},f().createElement(Pf,null))))})),jf=Di;var zf,Rf=function(e){return function(){return zf||(zf=(0,z.moduleLoader)((function(){return Promise.resolve().then(r.t.bind(r,2319,23))}))).then((function(e){(0,e.setSmartChartsPublicPath)((0,z.getUrlBase)("/js/smartcharts/"))})),zf.then((function(t){return{default:t[e]}}))}},Df=f().lazy(Rf("SmartChart")),Bf=f().lazy(Rf("ChartTitle")),Mf=(Rf("ChartSize"),f().lazy(Rf("ChartMode"))),Uf=f().lazy(Rf("DrawTools")),Ff=f().lazy(Rf("Share")),Gf=f().lazy(Rf("StudyLegend")),qf=f().lazy(Rf("Views")),Vf=f().lazy(Rf("ToolbarWidget"));Rf("FastMarker"),Rf("RawMarker");const Yf=function(e){var t=e.updateChartType,r=e.updateGranularity,n=e.position,o=v().ui.is_desktop;return f().createElement(Vf,{position:n},f().createElement(Mf,{portalNodeId:"modal_root",onChartType:t,onGranularity:r}),o&&f().createElement(f().Fragment,null,f().createElement(Gf,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),f().createElement(qf,{portalNodeId:"modal_root",onChartType:t,onGranularity:r,searchInputClassName:"data-hj-whitelist"}),f().createElement(Uf,{portalNodeId:"modal_root"}),f().createElement(Ff,{portalNodeId:"modal_root"})))};var Hf=(0,h.observer)((function(e){var t=e.show_digits_stats,r=v(),n=r.common,o=r.ui,a=ya(),i=a.chart_store,l=a.run_panel,c=a.dashboard,s=i.chart_type,u=i.getMarketsOrder,d=i.granularity,p=i.onSymbolChange,m=i.setChartStatus,h=i.symbol,y=i.updateChartType,_=i.updateGranularity,b=i.wsForget,g=i.wsForgetStream,E=i.wsSendRequest,w=i.wsSubscribe,k=v().ui,x=k.is_desktop,S=k.is_mobile,O=l.is_drawer_open,T=c.is_chart_modal_visible,L=n.is_socket_opened,A={assetInformation:!1,countdown:!0,isHighestLowestMarkerEnabled:!1,language:n.current_language.toLowerCase(),position:o.is_chart_layout_default?"bottom":"left",theme:o.is_dark_mode_on?"dark":"light"};return f().createElement("div",{className:_a()("dashboard__chart-wrapper",{"dashboard__chart-wrapper--expanded":O&&x,"dashboard__chart-wrapper--modal":T&&x}),dir:"ltr"},f().createElement(Df,{id:"dbot",barriers:[],showLastDigitStats:t,chartControlsWidgets:null,enabledChartFooter:!1,chartStatusListener:function(e){return m(!e)},toolbarWidget:function(){return f().createElement(Yf,{updateChartType:y,updateGranularity:_,position:x?null:"bottom"})},chartType:s,isMobile:S,enabledNavigationWidget:x,granularity:d,requestAPI:E,requestForget:b,requestForgetStream:g,requestSubscribe:w,settings:A,symbol:h,topWidgets:function(){return f().createElement(Bf,{onChange:p})},isConnectionOpened:L,getMarketsOrder:u,isLive:!0,leftMargin:80}))}));const Wf=Hf;const Kf=(0,h.observer)((function(){var e=ya().dashboard,t=e.is_chart_modal_visible,r=e.setChartModalVisibility;return f().createElement(f().Fragment,null,t&&f().createElement(I,{boundary:".main",header:(0,_.localize)("Chart"),onClose:r,modalWidth:526,modalHeight:595,minWidth:526,minHeight:524,enableResizing:!0},f().createElement("div",{className:"chart-modal-dialog","data-testid":"chart-modal-dialog"},f().createElement(Wf,{show_digits_stats:!1}))))})),$f=(0,h.observer)((function(){var e=v().ui.is_desktop;return f().createElement(u.Suspense,{fallback:f().createElement(m.Loading,null)},e&&f().createElement(Kf,null))}));const Xf=(0,h.observer)((function(){var e=ya().dashboard,t=e.active_tab,r=e.active_tour,n=e.setActiveTour,o=e.setTourDialogVisibility,a=tc(),i=a.is_close_tour,l=a.is_finished,c=a.handleJoyrideCallback,s=a.setIsCloseTour;return f().useEffect((function(){(i||l)&&(s(!1),n(""))}),[i,l,n,s]),H("onboard_tour_token")||0!==t||o(!0),f().createElement(f().Fragment,null,f().createElement(Jl,null),r&&f().createElement(Cl,{handleCallback:c,steps:Ul,spotlightClicks:!0}))}));function Qf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Zf={content:[],header:"",img:"",tour_step_key:1};const ed=(0,h.observer)((function(){var e=ya().dashboard,t=e.onCloseTour,r=e.onTourEnd,n=e.setTourActiveStep,o=e.active_tour,a=e.active_tab,i=e.setActiveTour,l=Qf(f().useState(1),2),c=l[0],s=l[1],u=Qf(f().useState(Zf),2),d=u[0],p=u[1],h=d.content,y=d.header,v=d.img,b=d.media,g=d.tour_step_key,E=1===c?(0,_.localize)("Start"):(0,_.localize)("Next"),w=8===c?(0,_.localize)("Got it, thanks!"):E,k=8===g?"finish-onboard-tour":"next-onboard-tour",x="onboarding"===o;return f().useEffect((function(){H("onboard_tour_token")||0!==a||i("onboarding")}),[a,o]),f().useEffect((function(){Xl.forEach((function(e){e.tour_step_key===c&&p(e),n(c)}))}),[c]),o?f().createElement("div",{className:_a()("dbot-slider",{"dbot-slider--active":1===c,"dbot-slider--tour-position":1!==c}),"data-testid":"onboarding-tour-mobile"},1!==g&&f().createElement("div",{className:"dbot-slider__navbar"},f().createElement(m.Text,{color:"less-prominent",weight:"less-prominent",line_height:"s",size:"xxs","data-testid":"dbot-onboard-slider__navbar"},"".concat(g-1,"/7")),f().createElement("span",{onClick:t},f().createElement(m.Icon,{icon:"IcCross",data_testid:"exit-onboard-tour",className:"db-contract-card__result-icon",color:"secondary"}))),y&&f().createElement(m.Text,{color:"prominent",weight:"bold",align:"center",className:"dbot-slider__title",as:"span",line_height:"s",size:"xs"},(0,_.localize)(y)),b&&f().createElement("div",{className:"dbot-slider__media"},f().createElement("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",src:b})),v&&f().createElement("div",{className:"dbot-slider__image"},f().createElement("img",{src:v})),h&&f().createElement(f().Fragment,null,h.map((function(e){return f().createElement(m.Text,{key:e,align:"center",color:"prominent",className:"dbot-slider__content",as:"div",line_height:"s",size:"xxs"},e)}))),f().createElement("div",{className:"dbot-slider__status"},f().createElement("div",{className:"dbot-slider__progress-bar"},f().createElement(m.ProgressBarTracker,{step:c,steps_list:Xl.map((function(e){return e.tour_step_key.toString()})),onStepChange:s})),f().createElement("div",{className:"dbot-slider__button-group"},1===c&&f().createElement(ac,{onClick:function(){t()},label:(0,_.localize)("Skip"),"data-testid":"skip-onboard-tour"}),![1,2,8].includes(c)&&f().createElement(ac,{onClick:function(){s(c-1)},label:(0,_.localize)("Previous"),"data-testid":"prev-onboard-tour"}),f().createElement(ac,{type:"danger",onClick:function(){s(c+1),r(c,x)},label:w,"data-testid":k})))):null})),td=(0,h.observer)((function(e){var t=e.is_mobile;return f().createElement(f().Fragment,null,t?f().createElement(ed,null):f().createElement(Xf,null))}));var rd=function(e){var t=e.dashboard_click_name,r=e.subpage_name;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.DASHBOARD_CLICK,form_name:ar,subpage_name:r,dashboard_click_name:t}}}])},nd=function(e){var t=e.announcement_name,r=e.announcement_action;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.ANNOUNCEMENT_ACTION,form_name:ar,subform_name:"announcements",subform_source:"dashboard",announcement_name:t,announcement_action:r}}}])};function od(e){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(e)}function ad(){ad=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==od(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(od(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function id(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ld(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){id(a,n,o,i,l,"next",e)}function l(e){id(a,n,o,i,l,"throw",e)}i(void 0)}))}}const cd=(0,h.observer)((function(){var e=ya(),t=e.load_modal,r=e.dashboard,n=t.is_delete_modal_open,o=t.onToggleDeleteDialog,a=t.selected_strategy_id,i=t.setDashboardStrategies,l=t.loadStrategyToBuilder,c=t.refreshStrategiesTheme,s=t.resetBotBuilderStrategy,u=r.setOpenSettings,d=function(){var e=ld(ad().mark((function e(t,r){return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.length){e.next=8;break}if(a!==t){e.next=4;break}return e.next=4,l(null==r?void 0:r[0]);case 4:return e.next=6,c();case 6:e.next=9;break;case 8:s();case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=ld(ad().mark((function e(t){var r,n;return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getSavedWorkspaces)();case 2:return r=e.sent,n=r.filter((function(e){return e.id!==t})),i(n),mo().setItem("saved_workspaces",dn().compress(JSON.stringify(n))),e.next=8,d(t,n);case 8:o(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return f().createElement("div",null,f().createElement(m.Dialog,{title:(0,_.localize)("Delete bot"),is_visible:n,confirm_button_text:(0,_.localize)("Yes, delete"),onConfirm:function(){h(a),o(!1),u(le.Dc.BOT_DELETE)},cancel_button_text:(0,_.localize)("No"),onCancel:function(){o(!1)},is_mobile_full_width:!1,className:"dc-dialog__delete-strategy--delete",has_close_icon:!0},f().createElement("div",null,f().createElement(m.Text,{color:"prominent",line_height:"s",size:"xs"},(0,_.localize)("Your bot will be permanently deleted when you hit "),f().createElement("strong",null,(0,_.localize)("Yes, delete.")))),f().createElement("div",null,f().createElement(m.Text,{color:"prominent",line_height:"xl",size:"xs"},(0,_.localize)("Are you sure you want to delete it?")))))}));var sd="open",ud="save",fd="delete",dd=[{type:sd,icon:"IcOpen",label:(0,_.localize)("Open")},{type:ud,icon:"IcSave",label:(0,_.localize)("Save")},{type:fd,icon:"IcDelete",label:(0,_.localize)("Delete")}];function pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function md(e){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(e)}function hd(){hd=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==md(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(md(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function yd(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function vd(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){yd(a,n,o,i,l,"next",e)}function l(e){yd(a,n,o,i,l,"throw",e)}i(void 0)}))}}var _d=(0,h.observer)((function(e){var t=e.workspace,r=v().ui.is_desktop,n=ya(),o=n.dashboard,a=n.load_modal,i=n.save_modal,l=o.setActiveTab,c=i.toggleSaveModal,s=i.updateBotName,u=a.dashboard_strategies,d=a.getRecentFileIcon,h=a.getSaveType,y=a.loadFileFromRecent,b=a.onToggleDeleteDialog,g=a.selected_strategy_id,E=a.setSelectedStrategyId,w=f().useRef(null),k=f().useRef(null),x=function(e){var t,r,n=(t=f().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return pd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pd(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],i=function(e){"ESCAPE"===e.key.toUpperCase()&&a(!1)},l=function(t){var r;null!=e&&null!==(r=e.current)&&void 0!==r&&r.contains(t.target)||a(!1)};return f().useEffect((function(){return document.addEventListener("keydown",i,!0),document.addEventListener("click",l,!0),function(){document.removeEventListener("keydown",i,!0),document.removeEventListener("click",l,!0)}}),[]),{is_dropdown_visible:o,setDropdownVisibility:a}}(k),S=x.setDropdownVisibility,O=x.is_dropdown_visible,T=function(){var e=vd(hd().mark((function e(){return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:l(q.BOT_BUILDER),rd({dashboard_click_name:"open",subpage_name:"bot_builder"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=vd(hd().mark((function e(r){return hd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t.id),e.t0=r,e.next=e.t0===sd?4:e.t0===ud?7:e.t0===fd?9:12;break;case 4:return e.next=6,T();case 6:case 12:return e.abrupt("break",13);case 7:return s(null==t?void 0:t.name),c(),rd({dashboard_click_name:"save",subpage_name:"dashboard"}),e.abrupt("break",13);case 9:return b(!0),rd({dashboard_click_name:"delete",subpage_name:"dashboard"}),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=g===t.id&&O,N=r?"xs":"xxs";return f().createElement("div",{className:_a()("bot-list__item",{"bot-list__item--loaded":u,"bot-list__item--min":!(null==u||!u.length||r)}),key:t.id,ref:w},f().createElement("div",{className:"bot-list__item__label"},f().createElement("div",{className:"text-wrapper",title:t.name},f().createElement(m.Text,{align:"left",as:"p",size:N,line_height:"l"},t.name||(0,_.localize)("Untitled Bot")))),f().createElement("div",{className:"bot-list__item__time-stamp"},f().createElement(m.Text,{align:"left",as:"p",size:N,line_height:"l"},(0,p.timeSince)(t.timestamp))),f().createElement("div",{className:"bot-list__item__load-type"},f().createElement(m.Icon,{icon:d(t.save_type),className:_a()({"bot-list__item__load-type__icon--active":t.save_type===Dn.e.GOOGLE_DRIVE})}),f().createElement("div",{className:"bot-list__item__load-type__icon--saved"},f().createElement(m.Text,{align:"left",as:"p",size:N,line_height:"l"},h(t.save_type)))),r?f().createElement("div",{className:"bot-list__item__actions"},dd.map((function(e){var t=e.type,r=e.label,n=e.icon;return f().createElement("div",{"data-testid":"dt_desktop_bot_list_action-".concat(t),key:t,className:"bot-list__item__actions__action-item",onClick:function(e){e.stopPropagation(),L(t)},onKeyDown:function(e){"Enter"===e.key&&(e.stopPropagation(),L(t))},tabIndex:0},f().createElement(m.Popover,{alignment:"top",message:r,zIndex:"9999"},f().createElement(m.Icon,{icon:n})))}))):f().createElement(f().Fragment,null,f().createElement("div",{className:"bot-list__item__actions"},f().createElement("button",{ref:k,onClick:function(e){e.stopPropagation(),S(!O),E(t.id)},tabIndex:0,"data-testid":"dt_mobile_menu_icon"},f().createElement(m.Icon,{icon:"IcMenuDots"}))),f().createElement("div",{className:_a()("bot-list__item__responsive",{"bot-list__item__responsive--active":A,"bot-list__item__responsive--min":u.length<=5})},dd.map((function(e){var t=e.type,r=e.label,n=e.icon;return f().createElement("div",{key:t,className:"bot-list__item__responsive__menu",onClick:function(e){e.stopPropagation(),L(t)},onKeyDown:function(e){"Enter"===e.key&&(e.stopPropagation(),L(t))},tabIndex:0},f().createElement("div",null,f().createElement(m.Icon,{icon:n})),f().createElement(m.Text,{"data-testid":"dt_mobile_bot_list_action-".concat(t),color:"prominent",className:"bot-list__item__responsive__menu__item",as:"p",size:"xxs"},r))})))))}));const bd=_d;function gd(e){return gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(e)}function Ed(){Ed=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==gd(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(gd(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function wd(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var kd=[{label:(0,_.localize)("Bot name"),className:"bot-list__header__label"},{label:(0,_.localize)("Last modified"),className:"bot-list__header__time-stamp"},{label:(0,_.localize)("Status"),className:"bot-list__header__load-type"}],xd=(0,h.observer)((function(){var e=ya(),t=e.load_modal,r=e.dashboard,n=t.setDashboardStrategies,o=t.dashboard_strategies,a=r.setStrategySaveType,i=r.strategy_save_type,l=v().ui.is_desktop,c=f().useRef(!1),s=f().useRef(!1);return f().useEffect((function(){a("");var e=function(){var e,t=(e=Ed().mark((function e(){var t;return Ed().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getSavedWorkspaces)();case 2:t=e.sent,n(t),s.current||(s.current=!0);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){wd(a,n,o,i,l,"next",e)}function l(e){wd(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[i]),f().useEffect((function(){null!=o&&o.length||c.current||(c.current=!0)}),[]),null!=o&&o.length?f().createElement("div",{className:"bot-list__container"},f().createElement("div",{className:"bot-list__wrapper"},f().createElement("div",{className:"bot-list__title"},f().createElement(m.Text,{size:l?"s":"xs",weight:"bold"},f().createElement(_.Localize,{i18n_default_text:"Your bots:"}))),f().createElement("div",{className:"bot-list__header"},kd.map((function(e){var t=e.label,r=e.className;return f().createElement("div",{className:r,key:t},f().createElement(m.Text,{size:l?"xs":"xxs",weight:"bold"},t))}))),f().createElement("div",{className:"bot-list__table"},o.map((function(e){return f().createElement(bd,{key:e.id,workspace:e})})))),f().createElement(cd,null)):null}));const Sd=xd;const Od=(0,h.observer)((function(e){var t=e.is_mobile,r=e.has_dashboard_strategies,n=ya(),o=n.dashboard,a=n.load_modal,i=n.quick_strategy,l=a.toggleLoadModal,c=a.setActiveTabIndex,s=o.is_dialog_open,u=o.setActiveTab,d=i.setFormVisibility,p=[{type:"my-computer",icon:t?"IcLocal":"IcMyComputer",content:t?(0,_.localize)("Local"):(0,_.localize)("My computer"),callback:function(){l(),c(t?0:1),u(q.BOT_BUILDER),Kr({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"load_strategy",load_strategy_tab:"local"})}},{type:"google-drive",icon:"IcGoogleDriveDbot",content:(0,_.localize)("Google Drive"),callback:function(){l(),c(t?1:2),u(q.BOT_BUILDER),Kr({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"load_strategy",load_strategy_tab:"google drive"})}},{type:"bot-builder",icon:"IcBotBuilder",content:(0,_.localize)("Bot Builder"),callback:function(){u(q.BOT_BUILDER),rd({dashboard_click_name:"bot_builder",subpage_name:"bot_builder"})}},{type:"quick-strategy",icon:"IcQuickStrategy",content:(0,_.localize)("Quick strategy"),callback:function(){u(q.BOT_BUILDER),d(!0),Kr({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"quick_strategy"})}}];return f().useMemo((function(){return f().createElement("div",{className:_a()("tab__dashboard__table",{"tab__dashboard__table--minimized":r&&t})},f().createElement("div",{className:_a()("tab__dashboard__table__tiles",{"tab__dashboard__table__tiles--minimized":r&&t}),id:"tab__dashboard__table__tiles"},p.map((function(e){var n=e.icon,o=e.content,a=e.callback;return f().createElement("div",{key:o,className:_a()("tab__dashboard__table__block",{"tab__dashboard__table__block--minimized":r&&t}),onClick:function(){a()},onKeyDown:function(e){"Enter"===e.key&&a()},tabIndex:0},f().createElement(m.Icon,{className:_a()("tab__dashboard__table__images",{"tab__dashboard__table__images--minimized":r}),width:"8rem",height:"8rem",icon:n,id:n}),f().createElement(m.Text,{color:"prominent",size:t?"xxs":"xs"},o))}))),f().createElement(Sd,null))}),[s,r])}));var Td=[{label:(0,_.localize)("Welcome to Deriv Bot!"),content:[{data:(0,_.localize)("Ready to automate your trading strategy without writing any code? You’ve come to the right place.")},{data:(0,_.localize)("Check out these guides and FAQs to learn more about building your bot:")}],link:!1},{label:(0,_.localize)("Guide"),content:[{data:(0,_.localize)("Deriv Bot - your automated trading partner")}],link:!0},{label:(0,_.localize)("FAQs"),content:[{data:(0,_.localize)("What is Deriv Bot?"),faq_id:"faq-0"},{data:(0,_.localize)("Where do I find the blocks I need?"),faq_id:"faq-1"},{data:(0,_.localize)("How do I remove blocks from the workspace?"),faq_id:"faq-2"}],link:!0}];const Ld=(0,h.observer)((function(){var e=v().ui.is_desktop,t=ya().dashboard,r=t.active_tour,n=t.is_info_panel_visible,o=t.setActiveTab,a=t.setActiveTabTutorial,i=t.setInfoPanelVisibility,l=t.setFaqTitle,c=function(){i(!1),localStorage.setItem("dbot_should_show_info",JSON.stringify(Date.now()))},s=function(){return f().createElement("div",{className:"db-info-panel"},f().createElement("div",{"data-testid":"close-icon",className:"db-info-panel__close-action",onClick:c},f().createElement(m.Icon,{width:"1rem",height:"1rem",icon:"IcCloseIconDbot"})),Td.map((function(t){var r=t.label,n=t.content,i=t.link;return f().createElement("div",{key:"".concat(r,"-").concat(n)},f().createElement(m.Text,{color:"prominent",line_height:"xxl",size:e?"m":"s",weight:"bold",as:"h1"},r),n.map((function(t){return f().createElement(m.Text,{key:"info-panel-tour".concat(t.data),className:_a()("db-info-panel__card",{"db-info-panel__content":i}),color:"prominent",line_height:"xl",as:"p",onClick:function(){return function(e,t,r){var n=e?o(q.TUTORIAL):null,i=a("Guide"===t?0:1);return l(r),{tutorial_link:n,tutorial_label:i}}(i,r,t.faq_id)},size:e?"s":"xxs"},t.data)})))})))};return e?!r&&f().createElement("div",{className:_a()("tab__dashboard__info-panel",{"tab__dashboard__info-panel--active":n})},s()):f().createElement(m.Modal,{className:"statistics__modal statistics__modal--mobile",is_open:n,toggleModal:c,width:"440px"},f().createElement(m.Modal.Body,null,s()))}));var Ad=r(1765),Nd=r(6902),Cd=r(4612),Pd=r(3927),Id=function(e){var t=e.announce;return f().createElement(f().Fragment,null,f().createElement(Pd.A,{fill:"var(--text-info-blue)",width:"24",height:"26"}),t&&f().createElement("div",{className:"notification__icon--indicator"}))},jd=function(e){var t=e.title,r=e.announce;return f().createElement(m.Text,{size:"xs",line_height:"l",weight:r?"bold":"normal",styles:r?{}:{color:"var(--text-general)"}},t)},zd=function(e){var t=e.message,r=e.date,n=e.announce;return f().createElement(f().Fragment,null,f().createElement(m.Text,{size:"xs",line_height:"m",weight:n?"normal":"lighter",styles:n?{}:{color:"var(--text-general)"}},t),f().createElement(m.Text,{size:"xxs",line_height:"xl",styles:{color:"var(--text-primary)"}},r))},Rd=function(e){switch(e.announce_id){case"MOVING_STRATEGIES_ANNOUNCE":return f().createElement(m.Icon,{icon:"IcMigrateStrategy",className:"category-type",color:"brand",height:"100",width:"140"});case"BLOCKLY_ANNOUNCE":return f().createElement(m.Icon,{icon:"IcUpgradeBlockly",className:"category-type",color:"brand",size:"120"});case"ACCUMULATOR_ANNOUNCE":return f().createElement(m.Icon,{icon:"IcTradetypeAccu",className:"category-type",color:"brand",size:"80"});default:return null}},Dd={UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE:{announcement:{id:"UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE",main_title:(0,_.localize)("Updates: Quick strategy modal"),event_name:"Updated: Quick Strategy Modal",event_action:{confirm_button_text:"Explore now"},confirm_button_text:(0,_.localize)("Explore now"),base_classname:"announcement-dialog",media:[(0,z.getUrlBase)("/public/videos/dbot-new-look-QS-and-accumulators-addition.gif")],title:[f().createElement(m.Text,{key:0,as:"div",align:"left",size:"xs",className:"announcement-dialog__title"},f().createElement(_.Localize,{i18n_default_text:"We've improved the Quick strategy (QS) modal for a better trading experience."})),f().createElement(_.Localize,{key:1,i18n_default_text:"<0>What’s new:</0>",components:[f().createElement("div",{key:0})]})],unordered_list:[{id:0,text:f().createElement(_.Localize,{i18n_default_text:"<0>A revamped design</0> for improved functionality.",components:[f().createElement("strong",{key:0})]})},{id:1,text:f().createElement(_.Localize,{i18n_default_text:"<0>Support for multiple trade types </0> with a filter to find strategies by preference.",components:[f().createElement("strong",{key:0})]})},{id:2,text:f().createElement(_.Localize,{i18n_default_text:"<0>Integration of Accumulators Options</0> for direct strategy application within the QS modal.",components:[f().createElement("strong",{key:0})]})}]},should_not_be_cancel:!0,switch_tab_on_confirm:q.BOT_BUILDER,should_toggle_qs_modal:!0},MOVING_STRATEGIES_ANNOUNCE:{announcement:{id:"MOVING_STRATEGIES_ANNOUNCE",main_title:(0,_.localize)("Moving strategies to Deriv Bot"),event_name:"Moving strategies to Deriv Bot",event_action:{confirm_button_text:"Import strategy"},confirm_button_text:(0,_.localize)("Import strategy"),base_classname:"announcement-dialog",title:f().createElement(_.Localize,{i18n_default_text:"<0>Follow these steps to smoothly transfer your strategies:</0>",components:[f().createElement("strong",{key:0})]}),numbered_content:[{id:0,text:(0,_.localize)("Download your strategy in XML format and import it to Deriv Bot.")},{id:1,text:(0,_.localize)("Run your updated strategy to check its performance.")},{id:2,text:(0,_.localize)("Save the updated strategy for quicker re-imports.")}],plain_text:[{id:0,text:f().createElement(_.Localize,{i18n_default_text:"<0>Note</0>: Uploading complex strategies may take some time. Saving them from Deriv Bot ensures quicker access later. If you have questions, contact us via <1/>.",components:[f().createElement("strong",{key:0}),f().createElement(m.OpenLiveChatLink,{className:"",key:1})]})}]},should_not_be_cancel:!0,should_toggle_load_modal:!0,switch_tab_on_confirm:q.BOT_BUILDER,onConfirm:function(){Kr({subpage_name:"bot_builder",subform_source:"announcements",subform_name:"load_strategy",load_strategy_tab:"recent"})}},BLOCKLY_ANNOUNCE:{announcement:{id:"BLOCKLY_ANNOUNCE",main_title:(0,_.localize)("Google Blockly v10 update"),event_name:"Google Blockly v10 update",base_classname:"announcement-dialog",title:f().createElement(_.Localize,{i18n_default_text:"We have updated our Blockly system in Deriv Bot from <0>version 3 to version 10</0>. This brings:",components:[f().createElement("strong",{key:0})]}),numbered_content:[{id:0,text:(0,_.localize)("Better security.")},{id:1,text:(0,_.localize)("Faster performance.")},{id:2,text:(0,_.localize)("New features for developers.")}],plain_text:[{id:0,text:f().createElement(_.Localize,{i18n_default_text:"<0>Note</0>: Some complex strategies might face issues in the Bot Builder. If you have questions, contact us via <1/>.",components:[f().createElement("strong",{key:0}),f().createElement(m.OpenLiveChatLink,{className:"",key:1})]})}]},should_not_be_cancel:!0},ACCUMULATOR_ANNOUNCE:{announcement:{id:"ACCUMULATOR_ANNOUNCE",main_title:(0,_.localize)("Accumulators now on Deriv Bot"),event_name:"Accumulators is now on Deriv Bot",event_action:{confirm_button_text:"Try now",cancel_button_text:"Learn more"},confirm_button_text:(0,_.localize)("Try now"),cancel_button_text:(0,_.localize)("Learn more"),base_classname:"announcement-dialog",title:f().createElement(_.Localize,{i18n_default_text:"<0>Boost your trading strategy with Accumulators</0>",components:[f().createElement("strong",{key:0})]}),content:[{id:0,text:(0,_.localize)("Trade Accumulators to build up potential profits with a structured approach.")},{id:1,text:(0,_.localize)("Customise your investment period and price levels to fit your trading goals.")},{id:2,text:(0,_.localize)("Manage risks while capitalising on market opportunities.")}]},switch_tab_on_cancel:q.TUTORIAL,switch_tab_on_confirm:q.BOT_BUILDER,onConfirm:function(){return Ud()}}},Bd="modal_button_action",Md=[{id:"UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE",icon:Id,title:(0,_.localize)("Updated: Quick Strategy Modal"),message:(0,_.localize)("We've improved the Quick strategy (QS) modal for a better trading experience."),date:"18 November 2024 00:00 UTC",buttonAction:Bd,actionText:""},{id:"MOVING_STRATEGIES_ANNOUNCE",icon:Id,title:(0,_.localize)("Moving strategies to Deriv Bot"),message:(0,_.localize)("Follow these steps to smoothly transfer your strategies"),date:"1 August 2024 00:00 UTC",buttonAction:Bd,actionText:""},{id:"BLOCKLY_ANNOUNCE",icon:Id,title:(0,_.localize)("Google Blockly v10 update"),message:(0,_.localize)("We have updated our Blockly system in Deriv Bot from version 3 to version 10."),date:"24 July 2024 00:00 UTC",buttonAction:Bd,actionText:""},{id:"ACCUMULATOR_ANNOUNCE",icon:Id,title:(0,_.localize)("Accumulators is now on Deriv Bot"),message:(0,_.localize)("Boost your trading strategy with Accumulators."),date:"2 July 2024 00:00 UTC",buttonAction:Bd,actionText:""}],Ud=function(){Promise.resolve().then(r.bind(r,2745)).then((function(e){var t,r,n=Blockly.utils.xml.textToDom(e.default);t="".concat("tradetypecat".toUpperCase(),"_LIST"),null==(r=null==n?void 0:n.querySelectorAll('field[name="'.concat(t,'"]')))||r.forEach((function(e){e.textContent="accumulator"}));var o=Blockly.derivWorkspace;(0,p.load)({block_string:Blockly.Xml.domToText(n),file_name:"Strategy with accumulator trade type",workspace:o,from:p.save_types.UNSAVED,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null})})).catch((function(e){console.error("Failed to load strategy XML:",e)}))},Fd=function(e,t,r){switch(e.buttonAction){case Bd:return t(e.id,Dd[e.id]);case"redirect_button_action":var n=Dd[e.id].url_redirect;return!!n&&r(n);default:return!1}},Gd=r(249);const qd=function(e){var t=e.announcement,r=e.handleOnConfirm,n=e.handleOnCancel,o=e.is_announce_dialog_open,a=e.setIsAnnounceDialogOpen,i=e.is_tablet,l=t.id,c=t.main_title,s=t.confirm_button_text,u=t.cancel_button_text,d=t.base_classname,p=t.title,h=t.content,y=t.numbered_content,v=t.plain_text,_=t.unordered_list,b=t.media,g=t.event_name;return f().createElement(m.Dialog,{portal_element_id:"modal_root_absolute",title:c,is_visible:o,confirm_button_text:s,onConfirm:r,cancel_button_text:u,onCancel:n,is_mobile_full_width:!0,has_close_icon:!0,onClose:function(){a(!1),$r({subform_name:"announcements",announcement_name:g})},className:i?"".concat(d," ").concat(d,"--tablet"):d},f().createElement("div",{className:"".concat(d,"__body-text")},f().createElement("div",{className:"".concat(d,"__body-icon--").concat(l.toLowerCase())},f().createElement(Rd,{announce_id:l})),Array.isArray(b)&&f().createElement(f().Fragment,null,b.map((function(e,t){return f().createElement("img",{className:"".concat(d,"__image"),key:t,src:e,alt:e})}))),f().createElement("div",{className:"".concat(d,"__body-main-content")},f().createElement(m.Text,{as:"p",size:"xs",className:"".concat(d,"__title--").concat(l.toLowerCase())},p),Array.isArray(h)&&h.map((function(e){return f().createElement("div",{className:"".concat(d,"__body-item"),key:null==e?void 0:e.id},f().createElement("div",null,f().createElement(Gd.A,{fill:"var(--icon-black-plus)"})),f().createElement(m.Text,{as:"p",line_height:"l",size:"xs"},null==e?void 0:e.text))})),Array.isArray(_)&&f().createElement("ul",{className:"".concat(d,"__unordered_list"),key:0},_.map((function(e){return f().createElement("li",{key:null==e?void 0:e.id},f().createElement(m.Text,{as:"p",line_height:"l",size:"xs"},null==e?void 0:e.text))}))),Array.isArray(y)&&f().createElement("ol",{className:"".concat(d,"__body-item--numbered")},y.map((function(e){return f().createElement(m.Text,{as:"li",line_height:"xl",size:"xs",key:null==e?void 0:e.id,styles:{listStyle:"auto"}},null==e?void 0:e.text)}))),Array.isArray(v)&&f().createElement("div",null,v.map((function(e){return f().createElement("span",{key:null==e?void 0:e.id},f().createElement(m.Text,{line_height:"m",size:"xs",key:e.id,styles:{listStyle:"auto"}},e.text))}))))))};function Vd(e){return Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(e)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yd.apply(null,arguments)}function Hd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hd(Object(r),!0).forEach((function(t){Kd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kd(e,t,r){return(t=function(e){var t=function(e){if("object"!=Vd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Vd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vd(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Qd=(0,h.observer)((function(e){var t=e.is_mobile,r=e.is_tablet,n=e.handleTabChange,o=ya(),a=o.load_modal.toggleLoadModal,i=o.dashboard.showVideoDialog,l=o.quick_strategy.setFormVisibility,c=$d(f().useState(!1),2),s=c[0],u=c[1],d=$d(f().useState(!1),2),p=d[0],h=d[1],y=$d(f().useState(null),2),v=y[0],b=y[1],g=$d(f().useState({}),2),E=g[0],w=g[1],k=$d(f().useState(0),2),x=k[0],S=k[1],O=(0,Ad.W6)(),T=$d(f().useState([]),2),L=T[0],A=T[1],N="announcements__label",C=function(e){var t;null===(t=localStorage)||void 0===t||t.setItem("bot-announcements",JSON.stringify(e))},P=function(e,t){return function(){var r;b(t),u(!0),h((function(e){return!e})),r={announcement_name:t.announcement.event_name}.announcement_name,z.cacheTrackEvents.loadEvent([{event:[{name:"ce_bot_form",properties:{action:ir.ANNOUNCEMENT_CLICK,form_name:ar,subform_name:"announcements",subform_source:"dashboard",announcement_name:r}}]}]),function(e){var t,r;r=JSON.parse(null!==(t=localStorage.getItem("bot-announcements"))&&void 0!==t?t:"{}"),C(Wd(Wd({},r),{},Kd({},e,!1)));var n=j();w(n)}(e)}},I=function(e){return function(){O&&O.push(e)}},j=function(){var e,t;t=JSON.parse(null!==(e=localStorage.getItem("bot-announcements"))&&void 0!==e?e:"{}");var r=[],n={};return Md.map((function(e){var o=!0;t&&Object.hasOwn(t,e.id)&&(o=t[e.id]),r.push({key:e.id,icon:f().createElement(e.icon,{announce:o}),title:f().createElement(jd,{title:e.title,announce:o}),message:f().createElement(zd,{message:e.message,date:e.date,announce:o}),buttonAction:Fd(e,P,I),actionText:e.actionText}),n[e.id]=o})),A(r),n};return f().useEffect((function(){var e=j();C(e),w(e)}),[]),f().useEffect((function(){var e=Object.values(E).filter((function(e){return e})).length;S(e)}),[E]),f().createElement("div",{className:"announcements"},f().createElement("button",{className:"announcements__button",onClick:function(){h((function(e){return!e})),p||Kr({subform_name:"announcements",subform_source:"dashboard"})},"data-testid":"btn-announcements"},f().createElement(Nd.A,{fill:"var(--icon-black-plus)",iconSize:"sm"}),!t&&f().createElement(m.Text,{size:"xs",line_height:"s",className:N},(0,_.localize)("Announcements")),0!==x&&f().createElement("div",{className:"announcements__amount"},f().createElement("p",{"data-testid":"announcements__amount"},x))),f().createElement("div",{className:"notifications__wrapper"},f().createElement(Cd.$,Yd({className:_a()("",{"notifications__wrapper--mobile":t,"notifications__wrapper--desktop":!t,"notifications__wrapper--tablet":r}),clearNotificationsCallback:function(){var e=Object.fromEntries(Object.keys(E).map((function(e){return[e,!1]})));C(e);var t=j();w(t)},componentConfig:{clearButtonText:(0,_.localize)("Mark all as read"),modalTitle:(0,_.localize)("Announcements"),noNotificationsMessage:"",noNotificationsTitle:""},isOpen:p,setIsOpen:h,notifications:L,excludedClickOutsideClass:N},t&&{appElement:document.getElementById("modal_root")}))),(null==v?void 0:v.announcement)&&f().createElement(qd,{announcement:v.announcement,is_announce_dialog_open:s,setIsAnnounceDialogOpen:u,handleOnCancel:null!=v&&v.should_not_be_cancel?null:function(){var e,t,r,o;nd({announcement_name:null==v?void 0:v.announcement.event_name,announcement_action:null==v||null===(e=v.announcement)||void 0===e||null===(t=e.event_action)||void 0===t?void 0:t.cancel_button_text}),null!=v&&v.switch_tab_on_cancel&&(n(v.switch_tab_on_cancel),"ACCUMULATOR_ANNOUNCE"===v.announcement.id&&(o=_e.find((function(e){return 4===e.id})))&&i({url:o.url,type:"url"})),null==v||null===(r=v.onCancel)||void 0===r||r.call(v),b(null)},handleOnConfirm:function(){var e,t,r;nd({announcement_name:null==v?void 0:v.announcement.event_name,announcement_action:null==v||null===(e=v.announcement)||void 0===e||null===(t=e.event_action)||void 0===t?void 0:t.confirm_button_text}),null!=v&&v.switch_tab_on_confirm&&n(v.switch_tab_on_confirm),null!=v&&v.should_toggle_qs_modal&&l(!0),null!=v&&v.should_toggle_load_modal&&a(),null==v||null===(r=v.onConfirm)||void 0===r||r.call(v),b(null)},is_tablet:r}))}));const Jd=(0,h.observer)((function(e){var t=e.handleTabChange,r=v().ui,n=ya(),o=n.load_modal,a=n.dashboard,i=o.dashboard_strategies,l=a.active_tab,c=a.active_tour,s=!(null==i||!i.length),u=r.is_desktop,d=r.is_tablet;return f().createElement(f().Fragment,null,f().createElement("div",{className:_a()("tab__dashboard",{"tab__dashboard--tour-active":c})},f().createElement("div",{className:"tab__dashboard__content"},f().createElement(Qd,{is_mobile:!u,is_tablet:d,handleTabChange:t}),f().createElement("div",{className:"quick-panel"},f().createElement("div",{className:_a()("tab__dashboard__header",{"tab__dashboard__header--listed":u&&s})},!s&&f().createElement(m.Text,{className:"title",as:"h2",color:"prominent",size:u?"sm":"s",line_height:"xxl",weight:"bold"},(0,_.localize)("Load or build your bot")),f().createElement(m.Text,{as:"p",color:"prominent",line_height:"s",size:u?"s":"xxs",className:_a()("subtitle",{"subtitle__has-list":s})},(0,_.localize)("Import a bot from your computer or Google Drive, build it from scratch, or start with a quick strategy."))),f().createElement(Od,{has_dashboard_strategies:s,is_mobile:!u})))),f().createElement(Ld,null),0===l&&f().createElement(td,{is_mobile:!u}))})),Zd=function(){return f().createElement("div",{className:"toolbar__section","data-testid":"dt_run_strategy"},f().createElement(hi,{className:"toolbar__animation"}))},ep=(0,h.observer)((function(){var e=ya().dashboard.faq_search_value;return f().createElement("div",{className:"dc-tabs__content dc-tabs__content--no-result","data-testid":"no-search-result"},f().createElement(m.Icon,{icon:"IcDbotNoSearchResult",size:80}),f().createElement(m.Text,{className:"dc-tabs__content--no-result__title",as:"h1",weight:"bold",line_height:"xxs"},f().createElement(_.Localize,{i18n_default_text:"No results found"})),f().createElement(m.Text,{className:"dc-tabs__content--no-result__content",line_height:"xxs"},f().createElement(_.Localize,{i18n_default_text:'We couldn’t find anything matching "'.concat(e,'".')})),f().createElement(m.Text,{className:"dc-tabs__content--no-result__content",line_height:"xxs"},f().createElement(_.Localize,{i18n_default_text:"Try another term."})))})),tp=(0,h.observer)((function(e){var t=e.quick_strategy_tab_content,r=e.tutorial_selected_strategy,n=e.setTutorialSelectedStrategy,o=v().ui.is_desktop?"s":"xs";return f().createElement(f().Fragment,null,""===r?f().createElement("div",{className:"tutorials-quick-strategy__cards"},null==t?void 0:t.map((function(e,t){var r=e.qs_name,a=e.content,i=e.type;return f().createElement("div",{className:"tutorials-quick-strategy__placeholder",key:i,onClick:function(){var e;n(r),function(e){var t=e.selected_strategy;z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.SELECT_QUICK_STRATEGY_GUIDE,form_name:ar,subpage_name:"tutorials",strategy_name:qr(t)}}}])}({selected_strategy:r}),(e=document.querySelector(".tutorials-mobile__qs-guide"))&&(e.scrollTop=0)},tabIndex:t,"data-testid":"dt_quick_strategy_guides_details",onKeyDown:function(e){"Enter"===e.key&&n(r)}},f().createElement("div",null,f().createElement("div",{className:"tutorials-quick-strategy__placeholder__title"},f().createElement(m.Text,{align:"center",weight:"bold",color:"prominent",line_height:"s",size:o},i)),f().createElement("div",{className:"tutorials-quick-strategy__placeholder__content"},f().createElement("ul",null,a.map((function(e){return f().createElement("li",{key:e},f().createElement(m.Text,{align:"center",color:"prominent",line_height:"s",size:o,className:"tutorials-quick-strategy__placeholder__content__text"},e))}))))),f().createElement(m.Icon,{className:"tutorials-quick-strategy__placeholder__icon",icon:(0,kn.Qq)()?"IcChevronLeftBold":"IcChevronRightBold"}))}))):f().createElement(f().Fragment,null,f().createElement("div",{className:"tutorials-quick-strategy__breadcrumb"},f().createElement(m.Text,{className:"tutorials-quick-strategy__breadcrumb__clickable",color:"prominent",line_height:"s",size:o,as:"div",onClick:function(){n("")}},f().createElement(_.Localize,{i18n_default_text:"Quick strategy guides >"})),f().createElement(m.Text,{color:"less-prominent",line_height:"s",size:o,as:"div"},f().createElement(_.Localize,{i18n_default_text:"About ".concat(Fr[r].label)}))),f().createElement(m.Text,{color:"prominent",line_height:"s",size:o,weight:"bold",as:"div"},f().createElement(_.Localize,{i18n_default_text:"About ".concat(Fr[r].label)})),f().createElement(jc,{tutorial_selected_strategy:r})))}));function rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const np=function(){var e,t,r=v().ui.is_desktop,n=ya().dashboard.quick_strategy_tab_content,o=(e=f().useState(""),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],i=o[1];return f().createElement("div",{className:"tutorials-quick-strategy"},""===a&&n.length>0&&f().createElement(m.Text,{className:"tutorials-quick-strategy__title",weight:"bold",color:"prominent",line_height:"s",size:r?"s":"xs",as:"div"},(0,_.localize)("Quick strategy guides")),f().createElement(tp,{tutorial_selected_strategy:a,setTutorialSelectedStrategy:i,quick_strategy_tab_content:n}))};function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},op.apply(null,arguments)}var ap=function(e){var t=e.type,r=e.content,n=void 0===r?"":r,o=e.src,a=e.imageclass,i=e.is_mobile;if("image"===t)return f().createElement("img",{src:o,className:a});var l=(0,Sc.Ay)(n);return f().createElement(m.Text,{as:"p",size:i?"xs":"s",line_height:i?"xl":"xxl",className:"faq__description",weight:"normal",key:n},l)};const ip=function(e){var t=e.faq_list,r=e.handleTabChange,n=v().ui.is_desktop,o=ya().dashboard,a=o.faq_title,i=o.setFaqTitle;f().useEffect((function(){t.forEach((function(e){e.search_id===a&&document.querySelectorAll(".faq__title").forEach((function(e,t){Number(a.split("-")[1])===t&&(e.click(),i(""),r(q.TUTORIAL))}))}))}),[]);var l=f().useRef(null),c=f().useRef(null),s=function(){c.current=setTimeout((function(){var e,t=null===(e=l.current)||void 0===e?void 0:e.querySelector(".dc-accordion__item--open"),r=null==t?void 0:t.previousElementSibling;if(l.current&&t){var o=r?r.offsetTop-80:0,a=document.querySelector(".dc-tabs__content--tutorials"),i=document.querySelector(".tutorials-mobile__faq");!function(e,t){e&&e.scrollTo({top:t,behavior:"smooth"})}(n?a:i,o)}null!=c&&c.current&&clearTimeout(c.current)}),5)},u=function(e){"Enter"===e.key&&s()};return f().useEffect((function(){return function(){c.current&&clearTimeout(c.current)}}),[]),f().useMemo((function(){return f().createElement("div",{className:"faq__wrapper","data-testid":"dt_faq_wrapper",ref:l},(null==t?void 0:t.length)>0&&f().createElement(f().Fragment,null,f().createElement(m.Text,{as:"p",line_height:"xl",className:"faq__wrapper__header",weight:"bold",size:n?"s":"xs"},f().createElement(_.Localize,{i18n_default_text:"FAQ"})),f().createElement("div",{"data-testid":"dt_accordion_test",onClick:s,onKeyDown:u,tabIndex:0},f().createElement(m.Accordion,{className:"faq__wrapper__content",list:t.map((function(e){var t=e.title,r=e.description;return{header:f().createElement(m.Text,{as:"p",line_height:"xl",className:"faq__title",weight:"bold",key:t,size:n?"s":"xs"},t),content:null==r?void 0:r.map((function(e,t){return f().createElement(ap,op({},e,{is_mobile:!n,key:"faq-description-item-".concat(null==e?void 0:e.content,"-").concat(t)}))}))}})),icon_close:"",icon_open:""}))))}),[t])},lp=function(e){var t=e.guide_tab_content,r=e.video_tab_content,n=e.is_dialog_open,o=v().ui.is_desktop,a=ya().dashboard,i=a.dialog_options,l=a.onCloseDialog,c=a.setActiveTab,s=a.setTourDialogVisibility,u=a.showVideoDialog,d=a.setActiveTour,p=a.setShowMobileTourDialog,h=function(e){var t;"OnBoard"===e?(delete(t=Y()||{}).onboard_tour_token,localStorage.setItem("dbot_settings",JSON.stringify(t)),c(q.DASHBOARD),o||d("onboarding"),s(!0)):(c(q.BOT_BUILDER),o||d("bot_builder"),s(!0),o||p(!0))},y=function(e){"Enter"===e.key&&h("OnBoard")},b=t.length>0||r.length>0;return f().useMemo((function(){return b&&f().createElement("div",{className:"tutorials-wrap"},t&&t.length>0&&f().createElement("div",{className:"tutorials-wrap__group"},f().createElement("div",{className:"tutorials-wrap__group__title"},f().createElement(m.Text,{align:"left",weight:"bold",color:"prominent",line_height:"s",size:o?"s":"xs"},f().createElement(_.Localize,{i18n_default_text:"Step-by-step guides"}))),f().createElement("div",{className:"tutorials-wrap__group__guides"},null==t?void 0:t.map((function(e){var t=e.id,r=e.content,n=e.src,a=e.subtype;return f().createElement("div",{className:"tutorials-wrap__group__cards",key:t},f().createElement("div",{tabIndex:t,className:"tutorials-wrap--tour",onClick:function(){return h(a)},onKeyDown:y,"data-testid":"tutorials-wrap--tour"},f().createElement("div",{className:_a()("tutorials-wrap__placeholder__tours",{"tutorials-wrap__placeholder--disabled":!n}),style:{backgroundImage:"url(".concat(n,")")}})),f().createElement(m.Text,{align:"center",color:"prominent",line_height:"s",size:o?"s":"xs"},r))})))),r&&r.length>0&&f().createElement("div",{className:"tutorials-wrap__group"},f().createElement("div",{className:"tutorials-wrap__group__title"},f().createElement(m.Text,{align:"left",weight:"bold",color:"prominent",line_height:"s",size:o?"s":"xs"},f().createElement(_.Localize,{i18n_default_text:"Videos on Deriv Bot"}))),f().createElement("div",{className:"tutorials-wrap__group__guides"},null==r?void 0:r.map((function(e){var t=e.content,r=e.src,n=e.url,a=e.id;return f().createElement("div",{className:"tutorials-wrap__group__cards",key:a},f().createElement("div",{className:_a()("tutorials-wrap__placeholder",{"tutorials-wrap__placeholder--disabled":!n}),style:{backgroundImage:"url(".concat(r,")")}},f().createElement("div",{className:"tutorials-wrap__placeholder__button-group"},f().createElement(m.Icon,{className:"tutorials-wrap__placeholder__button-group--play",width:"4rem",height:"4rem",icon:"IcPlayOutline",onClick:function(){return u({type:"url",url:n})}}))),f().createElement("div",{className:"tutorials-wrap__placeholder__description"},f().createElement(m.Text,{align:"left",color:"prominent",line_height:"s",size:o?"s":"xs"},t)))})))),f().createElement(m.Dialog,{title:i.title,is_visible:n,cancel_button_text:(0,_.localize)("Cancel"),onCancel:l,confirm_button_text:(0,_.localize)("OK"),onConfirm:l,is_mobile_full_width:!0,className:"dc-dialog",has_close_icon:!0,onClose:l},f().createElement("iframe",{width:"100%",height:"100%",src:i.url,frameBorder:"0",allowFullScreen:!0})))}),[t,r,n])};const cp=(0,h.observer)((function(e){var t=e.faq_value,r=e.setFaqSearchContent,n=e.prev_active_tutorials,o=ya().dashboard,a=f().useRef(null),i=o.setActiveTabTutorial,l=o.filterTuotrialTab,c=f().useCallback(g()((function(e){var t;l(e),i(3),t={search_term:e}.search_term,z.cacheTrackEvents.loadEvent([{event:{name:"ce_bot_form",properties:{action:ir.SEARCH,form_name:ar,subpage_name:"tutorials",search_term:t}}}]),""===e&&i(n)}),500,{trailing:!0,leading:!1}),[]);return f().createElement(f().Fragment,null,f().createElement("input",{ref:a,"data-testid":"id-test-input-search",type:"text",placeholder:(0,_.localize)("Search"),className:"dc-tabs__wrapper__group__search-input",onChange:function(e){return function(e){r(e.target.value),c(e.target.value)}(e)},value:t}))}));const sp=(0,h.observer)((function(e){var t=e.tutorial_tabs,r=e.prev_active_tutorials,n=ya().dashboard,o=n.active_tab_tutorials,a=n.faq_search_value,i=n.setActiveTabTutorial,l=n.setFAQSearchValue,c=n.resetTutorialTabContent,s=null==a?void 0:a.toLowerCase();return f().useEffect((function(){""!==a&&i(3)}),[o]),f().createElement("div",{className:"dc-tabs__wrapper","data-testid":"tutorials-tab-desktop"},f().createElement("div",{className:"dc-tabs__wrapper__group"},f().createElement(m.Icon,{className:"search-icon",data_testid:"id-test-search",width:"1.6rem",height:"1.6rem",icon:"IcSearch"}),f().createElement(cp,{faq_value:a,setFaqSearchContent:l,prev_active_tutorials:r}),s&&f().createElement(m.Icon,{className:"close-icon",data_testid:"id-test-close",width:"1.6rem",height:"1.6rem",icon:"IcDbotClose",onClick:function(){l(""),c(),i(r)}})),f().createElement(m.Tabs,{className:_a()("tutorials",{"tutorials-guide":0===r,"tutorials-faq":1===r,"tutorials-qs-guide":2===r,"tutorials-search":3===o}),active_index:o,onTabItemClick:i,top:!0},null==t?void 0:t.map((function(e){var t=e.label,r=e.content;return r&&f().createElement("div",{label:t,key:"".concat(r,"_").concat(t)},r)}))))}));function up(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const dp=(0,h.observer)((function(e){var t=e.tutorial_tabs,r=e.prev_active_tutorials,n=ya().dashboard,o=n.active_tab_tutorials,a=n.faq_search_value,i=n.setActiveTabTutorial,l=n.setFAQSearchValue,c=n.resetTutorialTabContent,s=null==a?void 0:a.toLowerCase(),u=up(f().useState({label:"",content:void 0}),2),d=u[0],p=u[1],h=up(f().useState(!1),2),y=h[0],v=h[1],_=f().useRef(null);f().useEffect((function(){s&&v(!0),p(t[o]||{})}),[t]);var b=f().useCallback((function(e){var r=e.target;return i(t.findIndex((function(e){return e.label===r.value})))}),[o]);return f().useEffect((function(){var e=document.getElementById("dt_components_select-native_select-tag");e&&e.removeChild(null==e?void 0:e.options[3])}),[]),f().createElement("div",{className:"tutorials-mobile","data-testid":"test-tutorials-mobile"},f().createElement("div",{className:_a()("tutorials-mobile__select",{"tutorials-mobile__select--show-search":y,"tutorials-mobile__select--hide-search":!y}),"data-testid":y?"id-search-visible":"id-search-hidden"},f().createElement(m.Icon,{onClick:function(){l(""),v(!y),c(),i(r),p(t[r]||{})},data_testid:"id-arrow-left-bold",className:"arrow-left-bold",icon:"IcArrowLeftBold"}),f().createElement(cp,{faq_value:a,setFaqSearchContent:l,prev_active_tutorials:r}),s&&f().createElement(m.Icon,{data_testid:"id-close-icon",className:"close-icon","data-testid":"id-test-search",width:"1.6rem",height:"1.6rem",icon:"IcDbotClose",onClick:function(){i(3),l(""),i(r),c()}}),f().createElement(m.SelectNative,{data_testid:"id-tutorials-select",className:"dc-tabs__wrapper__group__search-input--active",list_items:t.map((function(e,t){var r=e.label;return{id:t,value:r,text:r}})),value:d.label,label:"",should_show_empty_option:!1,onChange:function(e){b(e),_.current&&(_.current.scrollTop=0)}}),f().createElement(m.Icon,{onClick:function(){v(!y)},className:"search-icon",icon:"IcSearch",data_testid:"search-icon"})),f().createElement("div",{className:_a()({"tutorials-mobile__guide":0===o,"tutorials-mobile__faq":1===o,"tutorials-mobile__qs-guide":2===o,"tutorials-mobile__search":3===o}),ref:_},d.content))}));function pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const mp=(0,h.observer)((function(e){var t,r,n=e.handleTabChange,o=v().ui.is_desktop,a=ya().dashboard,i=(t=f().useState(0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return pp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pp(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],s=a.active_tab_tutorials,u=a.video_tab_content,d=a.guide_tab_content,p=a.faq_tab_content,m=a.is_dialog_open,h=a.quick_strategy_tab_content;f().useEffect((function(){[0,1,2].includes(s)&&c(s)}),[s]);var y=d.length>0||u.length>0||p.length>0||h.length>0,b=[{label:(0,_.localize)("Guide"),content:f().createElement(lp,{is_dialog_open:m,guide_tab_content:d,video_tab_content:u})},{label:(0,_.localize)("FAQ"),content:f().createElement(ip,{faq_list:p,handleTabChange:n})},{label:(0,_.localize)("Quick strategy guides"),content:f().createElement(np,{quick_strategy_tab_content:h})},{label:(0,_.localize)("Search"),content:y?f().createElement(f().Fragment,null,f().createElement(lp,{is_dialog_open:m,guide_tab_content:d,video_tab_content:u}),f().createElement(ip,{faq_list:p}),f().createElement(np,{quick_strategy_tab_content:h})):f().createElement(ep,null)}];return o?f().createElement(sp,{tutorial_tabs:b,prev_active_tutorials:l}):f().createElement(dp,{tutorial_tabs:b,prev_active_tutorials:l})}));var hp=(0,h.observer)((function(){var e,t,r=ya(),n=r.dashboard,o=r.load_modal,a=r.run_panel,i=r.quick_strategy,l=r.summary_card,c=n.active_tab,s=n.active_tour,d=n.is_chart_modal_visible,h=n.is_trading_view_modal_visible,y=n.setActiveTab,b=n.setWebSocketState,g=n.setActiveTour,E=n.setTourDialogVisibility,w=o.onEntered,k=o.dashboard_strategies,x=a.is_dialog_open,S=a.is_drawer_open,O=a.dialog_options,T=a.onCancelButtonClick,L=a.onCloseDialog,A=a.onOkButtonClick,N=i.is_open,C=O,P=C.cancel_button_text,I=C.ok_button_text,j=C.title,z=C.message,R=l.clear,D=q.DASHBOARD,B=q.BOT_BUILDER,M=f().useRef(!0),U=v().ui,F=U.url_hashed_values,G=U.is_desktop,Y=["dashboard","bot_builder","chart","tutorial"],H=(e=c,(t=null==F?void 0:F.split("#")[1])?Number(Y.indexOf(String(t))):e),W=function(){var e=Cf.R.getConnectionStatus();null===document.getElementById("db-animation__stop-button")||"Closed"!==e&&"Closing"!==e||(Nf.A.terminateBot(),R(),b(!1))};f().useEffect((function(){return window.addEventListener("focus",W),function(){window.removeEventListener("focus",W)}}),[]),f().useEffect((function(){N&&E(!1),M.current?(y(Number(H)),G||K(Number(H)),M.current=!1):window.location.hash=Y[c]||Y[0],""!==s&&g("")}),[c]),f().useEffect((function(){var e=setTimeout((function(){var e,t;if(c===B&&null!==(e=window.Blockly)&&void 0!==e&&null!==(t=e.derivWorkspace)&&void 0!==t&&t.trashcan){var r,n,o,a,i=window.innerHeight-250;a=S?(0,kn.Qq)()?380:window.innerWidth-460:(0,kn.Qq)()?20:window.innerWidth-100,null===(r=window.Blockly)||void 0===r||null===(n=r.derivWorkspace)||void 0===n||null===(o=n.trashcan)||void 0===o||o.setTrashcanPosition(a,i)}}),100);return function(){clearTimeout(e)}}),[c,S]),(0,u.useEffect)((function(){var e;return k.length>0&&(e=setTimeout((function(){(0,p.updateWorkspaceName)()}))),function(){e&&clearTimeout(e)}}),[k,c]);var K=f().useCallback((function(e){y(e);var t=V[e];if(t){var r=document.getElementById(t);setTimeout((function(){null==r||r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),10)}}),[c]);return f().createElement(f().Fragment,null,f().createElement("div",{className:"main"},f().createElement("div",{className:_a()("main__container",{"main__container--active":s&&c===D&&!G})},f().createElement(m.Tabs,{active_index:c,className:"main__tabs",onTabItemChange:w,onTabItemClick:K,top:!0},f().createElement("div",{icon:"IcDashboardComponentTab",label:f().createElement(_.Localize,{i18n_default_text:"Dashboard"}),id:"id-dbot-dashboard"},f().createElement(Jd,{handleTabChange:K})),f().createElement("div",{icon:"IcBotBuilderTabIcon",label:f().createElement(_.Localize,{i18n_default_text:"Bot Builder"}),id:"id-bot-builder"}),f().createElement("div",{icon:"IcChartsTabDbot",label:f().createElement(_.Localize,{i18n_default_text:"Charts"}),id:d||h?"id-charts--disabled":"id-charts"},f().createElement(Wf,{show_digits_stats:!1})),f().createElement("div",{icon:"IcTutorialsTabs",label:f().createElement(_.Localize,{i18n_default_text:"Tutorials"}),id:"id-tutorials"},f().createElement("div",{className:"tutorials-wrapper"},f().createElement(mp,{handleTabChange:K})))))),G?f().createElement(f().Fragment,null,f().createElement("div",{className:"main__run-strategy-wrapper"},4!==c&&f().createElement(f().Fragment,null,f().createElement(Zd,null),f().createElement(jf,null))),f().createElement($f,null),f().createElement(If,null)):!N&&4!==c&&f().createElement(jf,null),f().createElement(m.Dialog,{cancel_button_text:P||(0,_.localize)("Cancel"),className:"dc-dialog__wrapper--fixed",confirm_button_text:I||(0,_.localize)("Ok"),has_close_icon:!0,is_mobile_full_width:!1,is_visible:x,onCancel:T,onClose:L,onConfirm:A||L,portal_element_id:"modal_root",title:j},z))}));const yp=hp;function vp(e){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(e)}function _p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(r),!0).forEach((function(t){gp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gp(e,t,r){return(t=function(e){var t=function(e){if("object"!=vp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vp(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r(9021);const wp=(0,h.observer)((function(){var e,t,r=(e=f().useState(!0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ep(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ep(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1],a=v(),i=a.common,l=a.client,c=ya(),s=c.app,u=c.transactions,h=s.showDigitalOptionsMaltainvestError,y=bp(bp({},c),{},{core:bp({},a)}),_=u.recovered_transactions,b=u.recoverPendingContracts,g=f().useRef(!1),E=f().useRef(null),w=f().useRef(null),k=f().useCallback((function(e){var t=e.data;if("proposal_open_contract"===(null==t?void 0:t.msg_type)&&(null==t||!t.error)){var r=t.proposal_open_contract;"open"===(null==r?void 0:r.status)||null!=_&&_.includes(null==r?void 0:r.contract_id)||b(r)}}),[_,b]),x=f().useCallback((function(){E.current=setInterval((function(){var e;null!==p.api_base&&void 0!==p.api_base&&p.api_base.api&&(clearInterval(E.current),null!==p.api_base&&void 0!==p.api_base&&p.api_base.api&&!g.current&&(g.current=!0,w.current=null===(e=p.api_base.api.onMessage())||void 0===e?void 0:e.subscribe(k)))}),500)}),[k]);f().useEffect((function(){return!g.current&&l.is_logged_in&&x(),function(){g.current&&w.current&&(g.current=!1,w.current.unsubscribe())}}),[x,l.is_logged_in,l.loginid]),f().useEffect((function(){h(l,i)}),[l.is_options_blocked,l.account_settings.country_code,l.clients_country]);var S=function(){Zt.init(y),p.ServerTime.init(i),s.setDBotEngineStores(y),p.ApiHelpers.setInstance(s.api_helpers_store)},O=function(){S(),p.ApiHelpers.instance.active_symbols.retrieveActiveSymbols(!0).then((function(){o(!1)}))};return f().useEffect((function(){S(),o(!0),l.is_logged_in||O()}),[]),f().useEffect((function(){l.is_logged_in&&l.is_landing_company_loaded&&O()}),[l.is_landing_company_loaded]),f().useEffect((function(){var e=function(){o(!1)};return window.addEventListener("offline",e),function(){window.removeEventListener("offline",e)}}),[]),n?f().createElement(m.Loading,null):f().createElement(f().Fragment,null,f().createElement($i,null),f().createElement("div",{className:"bot-dashboard bot","data-testid":"dt_bot_dashboard"},f().createElement(Ki,null),f().createElement(Zi,null),f().createElement(yp,null),f().createElement(ol,null),f().createElement(Af,null),f().createElement(el,null),f().createElement(al,null),f().createElement(Wi,null),f().createElement(d.N9,{limit:3,draggable:!1})))}));var kp=r(891),xp=r.n(kp),Sp=r(1385),Op=r(4447);function Tp(e){return Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(e)}function Lp(){Lp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Tp(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Tp(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ap(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var Np=function(){var e,t=(e=Lp().mark((function e(t){var r,n,o,a;return Lp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new TextEncoder).encode(JSON.stringify(t)),e.next=3,crypto.subtle.digest("SHA-256",r);case 3:return n=e.sent,o=Array.from(new Uint8Array(n)),a=o.map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ap(a,n,o,i,l,"next",e)}function l(e){Ap(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();function Cp(e){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(e)}function Pp(){Pp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new N(n||[]);return o(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function _(){}function b(){}var g={};s(g,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(C([])));w&&w!==r&&n.call(w,i)&&(g=w);var k=b.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Cp(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Cp(t)+" is not iterable")}return _.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:_,configurable:!0}),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),s(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),s(k,c,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ip(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jp(Object(r),!0).forEach((function(t){Rp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rp(e,t,r){return(t=function(e){var t=function(e){if("object"!=Cp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Cp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cp(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Mp=(0,u.createContext)(null),Up=function(e){var t,r,n;window.DerivAPI||(window.DerivAPI={});var o,a,i,l=(o=(0,z.getSocketURL)(),a=(0,z.getAppId)(),i=localStorage.getItem("i18n_language"),"wss://".concat(o,"/websockets/v3?app_id=").concat(a,"&l=").concat(i,"&brand=").concat("deriv")),c=function(e,t){window.WSConnections||(window.WSConnections={});var r=window.WSConnections[e];return r&&r instanceof WebSocket&&![2,3].includes(r.readyState)||(window.WSConnections[e]=new WebSocket(e),window.WSConnections[e].addEventListener("close",(function(){"function"==typeof t&&t()}))),window.WSConnections[e]}(l,e);return(null===(t=window.DerivAPI)||void 0===t||!t[l]||null!==(r=window.DerivAPI)&&void 0!==r&&r[l].isConnectionClosed())&&(window.DerivAPI[l]=new(xp())({connection:c})),null===(n=window.DerivAPI)||void 0===n?void 0:n[l]},Fp=(window.ReactQueryClient||(window.ReactQueryClient=new Sp.E),window.ReactQueryClient),Gp=function(e){return window.localStorage.getItem("config.server_url")?"custom":e&&!/^(VRT|VRW)/.test(e)?"real":"demo"};const qp=function(e){var t=e.children,r=e.standalone,n=void 0!==r&&r,o=(0,z.useWS)(),a=Dp((0,u.useState)(!1),2),i=a[0],l=a[1],c=window.localStorage.getItem("active_loginid"),s=Dp((0,u.useState)(Gp(c)),2),d=s[0],p=s[1],m=(0,u.useRef)(n?Up((function(){return l(!0)})):null),h=(0,u.useRef)(),y=function(){var e,t=(e=Pp().mark((function e(t,r){var n,o,a,i,l,c,s;return Pp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Np({name:t,payload:r});case 2:if(i=e.sent,!(l=null===(n=h.current)||void 0===n?void 0:n[i])){e.next=6;break}return e.abrupt("return",{id:i,subscription:l});case 6:return c=(null!=r?r:{}).payload,s=null===(o=m.current)||void 0===o?void 0:o.subscribe(zp(Rp(Rp({},t,1),"subscribe",1),null!=c?c:{})),h.current=zp(zp({},null!==(a=h.current)&&void 0!==a?a:{}),Rp({},i,s)),e.abrupt("return",{id:i,subscription:s});case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ip(a,n,o,i,l,"next",e)}function l(e){Ip(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){var e=m.current,t=h.current;return function(){t&&Object.keys(t).forEach((function(e){t[e].unsubscribe()})),e&&1===e.connection.readyState&&e.disconnect()}}),[]);var v=(0,u.useCallback)((function(e){if(n){var t=Gp(e);"custom"!==t&&t!==d&&p(t)}}),[d,n]);return(0,u.useEffect)((function(){var e;return n&&(e=setInterval((function(){var e;return null===(e=m.current)||void 0===e?void 0:e.send({ping:1})}),1e4)),function(){return clearInterval(e)}}),[n]),(0,u.useEffect)((function(){var e;return(n||i)&&(m.current=Up((function(){e=setTimeout((function(){return l(!0)}),500)})),l(!1)),function(){return clearTimeout(e)}}),[d,i,n]),f().createElement(Mp.Provider,{value:{derivAPI:n?m.current:o,switchEnvironment:v,send:function(e,t){var r;return null===(r=m.current)||void 0===r?void 0:r.send(zp(Rp({},e,1),t))},subscribe:y,unsubscribe:function(e){var t,r=null===(t=h.current)||void 0===t?void 0:t[e];r&&r.unsubscribe()},queryClient:Fp}},f().createElement(Op.Ht,{client:Fp},t))};var Vp=r(7229);function Yp(e){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(e)}function Hp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wp(n.key),n)}}function Wp(e){var t=function(e){if("object"!=Yp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Yp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yp(t)?t:t+""}function Kp(e){return Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(e)}function $p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xp(n.key),n)}}function Xp(e){var t=function(e){if("object"!=Kp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Kp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kp(t)?t:t+""}function Qp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qp=function(){return!!e})()}function Jp(e){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jp(e)}function Zp(e,t){return Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zp(e,t)}var em={dtrader_v2_mobile:!1,dtrader_v2_desktop:!1,next_qs:!1,sharkfin:!1,wallet:!1},tm=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance&&t.instance.cleanup(),(e=function(e,t,r){return t=Jp(t),function(e,t){if(t&&("object"==Kp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qp()?Reflect.construct(t,r||[],Jp(e).constructor):t.apply(e,r))}(this,t,["FeatureFlagsStore",function(){e.data||e.update(em),e.data&&Object.keys(e.data).length!==Object.keys(em).length&&e.update((function(e){var t=em;return Object.keys(em).forEach((function(r){void 0!==e[r]&&(t[r]=e[r])})),t}))}])).data=em,t.instance=e,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zp(e,t)}(t,e),r=t,(n=[{key:"cleanup",value:function(){this.unmount()}}])&&$p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=void 0,(0,j.makeObservable)(this,{data:j.observable,update:j.action.bound,unmount:j.action.bound}),(0,Vp.pu)(this,{name:t,properties:["data"],storage:window.localStorage}).then((function(){return null==r?void 0:r()}))},(t=[{key:"update",value:function(e){this.data=e instanceof Function?e(this.data):e}},{key:"unmount",value:function(){(0,Vp.xC)(this)}}])&&Hp(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function rm(e){return rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(e)}function nm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nm(Object(r),!0).forEach((function(t){am(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function am(e,t,r){return(t=function(e){var t=function(e){if("object"!=rm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=rm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rm(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}tm.instance=null;const im=function(e){var t=e.children,r=e.store,n=(0,u.useMemo)((function(){return"is_mock"in r&&r.is_mock?r:om(om({},r),{},{feature_flags:new tm})}),[r]);return(0,u.useEffect)((function(){return function(){Object.values(n).forEach((function(e){"object"===rm(e)&&"unmount"in e&&e.unmount()}))}}),[n]),f().createElement(y.Provider,{value:n},t)},lm=function(e){var t=e.children,r=e.store,n=e.WS;return f().createElement(im,{store:r},f().createElement(qp,null,f().createElement(ha,{ws:n},t)))};var cm={"staging-app.deriv.com":"staging-dbot.deriv.com","staging-app.deriv.me":"staging-dbot.deriv.com","staging-app.deriv.be":"staging-dbot.deriv.com","app.deriv.com":"dbot.deriv.com","app.deriv.me":"dbot.deriv.me","app.deriv.be":"dbot.deriv.be"};const sm=function(e){var t=e.passthrough,r=cm[window.location.host];r&&window.location.assign("https://".concat(r));var n=t.root_store,o=t.WS;return f().useEffect((function(){var e=window.innerHeight;return document.body.style.setProperty("--vh","".concat(e,"px")),function(){if(!s){s=!0;var e=(0,i.nP)(),t=JSON.parse(localStorage.getItem("client.accounts"))||void 0,r=function(){if(e&&t){var r=t[e]||{};n=r.residence,o=r.account_type,a=r.created_at,window.Survicate&&(n&&window.Survicate.track("userCountry",n),o&&window.Survicate.track("accountType",o),a&&window.Survicate.track("accountCreationDate",a))}var n,o,a};if(document.getElementById("dbot-survicate")){var n=document.getElementById("survicate-box");n&&(n.style.display="block"),r()}else!function(e){var t=document.createElement("script");t.id="dbot-survicate",t.async=!0,t.src="https://survey.survicate.com/workspaces/83b651f6b3eca1ab4551d95760fe5deb/web_surveys.js",t.onload=e;var r=document.getElementsByTagName("script")[0];null!=r&&r.parentNode?r.parentNode.insertBefore(t,r):document.body.appendChild(t)}(r)}}(),function(){var e=document.getElementById("survicate-box");e&&(e.style.display="none")}}),[]),f().createElement(lm,{store:n,WS:o},f().createElement(wp,null))}},1361:(e,t,r)=>{"use strict";r.d(t,{Dc:()=>c,EP:()=>u,UC:()=>s});var n=r(7621),o=r(3620),a=r(2641);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e){return e.BOT_IMPORT="BOT_IMPORT",e.BOT_DELETE="BOT_DELETE",e}({}),s=l(l(l(l({bot_stop:(0,a.localize)("You’ve just stopped the bot. Any open contracts can be viewed on the Reports page."),workspace_change:(0,a.localize)("Changes you make will not affect your running bot."),block_delete:(0,a.localize)("You’ve just deleted a block."),invalid_xml:(0,a.localize)("Your import failed due to an invalid file. Upload a complete file in XML format.")},c.BOT_IMPORT,(0,a.localize)("You’ve successfully imported a bot.")),c.BOT_DELETE,(0,a.localize)("You’ve successfully deleted a bot.")),"strategy_conversion",(0,a.localize)("Save this strategy as an XML file from Deriv Bot for faster re-imports.")),"google_drive_error",(0,a.localize)("Your session has expired. Please sign in again.")),u={type:n.oR.TYPE.DEFAULT,position:(0,o.Qq)()?n.oR.POSITION.BOTTOM_RIGHT:n.oR.POSITION.BOTTOM_LEFT,autoClose:6e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,pauseOnFocusLoss:!1}},8843:(e,t,r)=>{"use strict";r.d(t,{N:()=>c});var n=r(9155),o=r.n(n),a=r(7621),i=r(1361),l=function(e){var t=e.message,r=e.primary_action,n=e.closeToast;return o().useEffect((function(){var e=function(){"hidden"===document.visibilityState&&a.oR.dismiss()};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[]),o().createElement("div",{className:"notification-content","data-testid":"dt_bot_notification"},o().createElement("div",null,t),r&&o().createElement("button",{onClick:function(){return r.onClick(n)}},r.label))},c=function(e,t,r){var n,c,s,u,f,d,p,m;return(0,a.oR)((function(r){var n=r.closeToast;return o().createElement(l,{message:e,primary_action:t,closeToast:n})}),{type:null!==(n=null==r?void 0:r.type)&&void 0!==n?n:i.EP.type,position:null!==(c=null==r?void 0:r.position)&&void 0!==c?c:i.EP.position,autoClose:null!==(s=null==r?void 0:r.autoClose)&&void 0!==s?s:i.EP.autoClose,hideProgressBar:null!==(u=null==r?void 0:r.hideProgressBar)&&void 0!==u?u:i.EP.hideProgressBar,closeOnClick:null!==(f=null==r?void 0:r.closeOnClick)&&void 0!==f?f:i.EP.closeOnClick,pauseOnHover:null!==(d=null==r?void 0:r.pauseOnHover)&&void 0!==d?d:i.EP.pauseOnHover,pauseOnFocusLoss:null!==(p=null==r?void 0:r.pauseOnFocusLoss)&&void 0!==p?p:i.EP.pauseOnFocusLoss,closeButton:null===(m=null==r?void 0:r.closeButton)||void 0===m||m})}},2745:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n='<xml xmlns="http://www.w3.org/1999/xhtml" collection="false" is_dbot="true">\n  <variables></variables>\n  <block type="trade_definition" x="0" y="0">\n    <statement name="TRADE_OPTIONS">\n      <block type="trade_definition_market" deletable="false" movable="false">\n        <field name="MARKET_LIST"></field>\n        <field name="SUBMARKET_LIST"></field>\n        <field name="SYMBOL_LIST"></field>\n        <next>\n          <block type="trade_definition_tradetype" deletable="false" movable="false">\n            <field name="TRADETYPECAT_LIST"></field>\n            <field name="TRADETYPE_LIST"></field>\n            <next>\n              <block type="trade_definition_contracttype" deletable="false" movable="false">\n                <field name="TYPE_LIST"></field>\n                <next>\n                  <block type="trade_definition_candleinterval" deletable="false" movable="false">\n                    <field name="CANDLEINTERVAL_LIST">60</field>\n                    <next>\n                      <block type="trade_definition_restartbuysell" deletable="false" movable="false">\n                        <field name="TIME_MACHINE_ENABLED">FALSE</field>\n                        <next>\n                          <block type="trade_definition_restartonerror" deletable="false" movable="false">\n                            <field name="RESTARTONERROR">TRUE</field>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n    <statement name="SUBMARKET">\n      <block type="trade_definition_tradeoptions">\n        <mutation has_first_barrier="false" has_second_barrier="false" has_prediction="false"></mutation>\n        <field name="DURATIONTYPE_LIST"></field>\n        <field name="CURRENCY_LIST">USD</field>\n        <value name="DURATION">\n          <shadow type="math_number_positive">\n            <field name="NUM">5</field>\n          </shadow>\n        </value>\n        <value name="AMOUNT">\n          <shadow type="math_number_positive">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <field name="AMOUNT_LIMITS"></field>\n      </block>\n    </statement>\n  </block>\n  <block type="during_purchase" x="720" y="0">\n    <statement name="DURING_PURCHASE_STACK">\n      <block type="controls_if">\n        <value name="IF0">\n          <block type="check_sell"></block>\n        </value>\n      </block>\n    </statement>\n  </block>\n  <block type="after_purchase" x="720" y="248">\n    <statement name="AFTERPURCHASE_STACK">\n      <block type="trade_again"></block>\n    </statement>\n  </block>\n  <block type="before_purchase" x="0" y="576">\n    <statement name="BEFOREPURCHASE_STACK">\n      <block type="purchase">\n        <field name="PURCHASE_LIST"></field>\n      </block>\n    </statement>\n  </block>\n</xml>'},6176:(e,t,r)=>{var n={"./1_3_2_6.xml":[9192,982],"./accumulators_dalembert.xml":[3975,763],"./accumulators_dalembert_on_stat_reset.xml":[6298,70],"./accumulators_martingale.xml":[6143,757],"./accumulators_martingale_on_stat_reset.xml":[6034,632],"./accumulators_reverse_dalembert.xml":[328,320],"./accumulators_reverse_dalembert_on_stat_reset.xml":[5794,357],"./accumulators_reverse_martingale.xml":[6846,728],"./accumulators_reverse_martingale_on_stat_reset.xml":[2827,445],"./dalembert.xml":[6515,637],"./dalembert_max-stake.xml":[2269,631],"./martingale.xml":[5763,511],"./martingale_max-stake.xml":[9901,397],"./oscars_grind.xml":[3243,87],"./oscars_grind_max-stake.xml":[8175,826],"./reverse_dalembert.xml":[7612,990],"./reverse_martingale.xml":[5882,526]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=6176,e.exports=o}}]);
//# sourceMappingURL=bot.bot-web-ui-app.ed8b1c7239d74b95408d.js.map