/*! For license information please see trader.trader-app-v2.3cc798b369796d64eee5.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app-v2"],{"./src/AppV2/Utils/contract-description-utils.tsx":(e,t,r)=>{r.d(t,{ts:()=>S,gl:()=>O,H5:()=>g,OG:()=>E});var n=r("react"),o=r.n(n),a=r("@deriv/translations"),i=r("../../node_modules/@deriv-com/quill-ui/dist/components/Typography/text/index.js"),l=r("../../node_modules/classnames/index.js"),c=r.n(l),u=r("@deriv/components"),s=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),d=r("@deriv/shared"),f=r("./src/AppV2/Utils/trade-types-utils.tsx"),m=r("../../node_modules/@lottiefiles/dotlottie-react/dist/index.js");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const _=function(e){var t=e.contract_type,r=p(o().useState(!0),2),n=r[0],a=r[1],i=p(o().useState(null),2),l=i[0],y=i[1],_=(0,s.Y)().isMobile,v=o().useCallback((function(e){return(0,d.getUrlBase)("/public/videos/".concat(t.toLowerCase(),"_").concat(_?"mobile":"desktop",".").concat(e))}),[t,_]),h=o().useMemo((function(){return v("lottie")}),[v]);return o().useEffect((function(){var e=function(){return a(!1)};return l&&l.addEventListener("load",e),function(){l&&l.removeEventListener("load",e)}}),[l]),o().createElement("div",{className:c()("video-fragment__wrapper",{"video-fragment__wrapper--accumulator":t.toLowerCase()===f.OA.ACCUMULATORS.toLowerCase()})},n&&o().createElement(u.Skeleton,{width:248,height:161,className:"skeleton-video-loader"}),o().createElement(m.GL,{autoplay:!0,dotLottieRefCallback:function(e){return y(e)},src:h,loop:!0}))};var v=r("./src/Modules/Trading/Helpers/video-config.ts");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(){return{BARRIER:(0,a.localize)("Barrier"),CONTRACT_VALUE:(0,a.localize)("Contract value"),DEAL_CANCELLATION:(0,a.localize)("Deal cancellation"),ENTRY_SPOT:(0,a.localize)("Entry spot"),EXIT_SPOT:(0,a.localize)("Exit spot"),EXPIRY:(0,a.localize)("Expiry"),FINAL_PRICE:(0,a.localize)("Final price"),GROWTH_RATE:(0,a.localize)("Growth rate"),PAYOUT:(0,a.localize)("Payout"),PAYOUT_PER_POINT:(0,a.localize)("Payout per point"),PREVIOUS_SPOT_PRICE:(0,a.localize)("Previous spot price"),RANGE:(0,a.localize)("Range"),SLIPPAGE_RISK:(0,a.localize)("Slippage risk"),STOP_OUT_LEVEL:(0,a.localize)("Stop out level"),STOP_LOSS:(0,a.localize)("Stop loss"),STRIKE_PRICE:(0,a.localize)("Strike price"),TAKE_PROFIT:(0,a.localize)("Take profit")}},E=function(e){var t=e.contract_type,r=e.term;if(t&&r){var n,l,c,u,s,d,m,p,y,_,v,h,E,S,w,O,A,k,x,C=(l=g(),c=l.BARRIER,u=l.CONTRACT_VALUE,s=l.DEAL_CANCELLATION,d=l.ENTRY_SPOT,m=l.EXIT_SPOT,p=l.EXPIRY,y=l.FINAL_PRICE,_=l.GROWTH_RATE,v=l.PAYOUT,h=l.PAYOUT_PER_POINT,E=l.PREVIOUS_SPOT_PRICE,S=l.RANGE,w=l.SLIPPAGE_RISK,O=l.STOP_OUT_LEVEL,A=l.STOP_LOSS,k=l.STRIKE_PRICE,x=l.TAKE_PROFIT,b(b(b(b(b(b(b(b(b(b(n={},c,o().createElement(a.Localize,{i18n_default_text:"This is the corresponding price level based on the payout per point you’ve selected. If this barrier is ever breached, your contract would be terminated."})),u,(function(e){return e===f.OA.VANILLAS?o().createElement(a.Localize,{i18n_default_text:"We’ll offer to buy your contract at this price should you choose to sell it before its expiry. This is based on several factors, such as the current spot price, duration, etc. However, we won’t offer a contract value if the remaining duration is below 60 seconds."}):o().createElement(a.Localize,{i18n_default_text:"This is the resale value of your contract, based on the prevailing market conditions (e.g, the current spot), including additional commissions if any."})})),s,o().createElement(a.Localize,{i18n_default_text:"If you select this feature, you can cancel your trade within a chosen time frame if the asset price moves against your favour. You will get your stake back without profit/loss. We charge a small fee for this. Take profit and stop loss are disabled when deal cancellation is active."})),d,o().createElement(a.Localize,{i18n_default_text:"We use current-tick-execution mechanism, which is the latest asset price when the trade opening is processed by our servers for Volatility Index, Basket Indices, Jump Indices and Crash/Boom Indices."})),m,o().createElement(a.Localize,{i18n_default_text:"The latest asset price when the trade closure is processed by our servers."})),p,o().createElement(o().Fragment,null,o().createElement(i.E,{className:"definition__paragraph"},o().createElement(a.Localize,{i18n_default_text:"This is when your contract will expire based on the duration or end time you’ve selected. If the duration is more than 24 hours, the cut-off time and expiry date will apply instead."})),o().createElement(i.E,null,o().createElement(a.Localize,{i18n_default_text:"Cut off time:"})),o().createElement(i.E,{className:"definition__paragraph"},o().createElement(a.Localize,{i18n_default_text:"Contracts will expire at exactly 23:59:59 GMT on your selected expiry date."})),o().createElement(i.E,null,o().createElement(a.Localize,{i18n_default_text:"Expiry date:"})),o().createElement(i.E,null,o().createElement(a.Localize,{i18n_default_text:"Your contract will expire on this date (in GMT), based on the end time you’ve selected."})))),y,o().createElement(a.Localize,{i18n_default_text:"This is the spot price of the last tick at expiry."})),_,o().createElement(a.Localize,{i18n_default_text:"You can choose a growth rate with values of 1%, 2%, 3%, 4%, and 5%."})),v,(function(e){return e===f.OA.VANILLAS?o().createElement(a.Localize,{i18n_default_text:"Your payout is equal to the payout per point multiplied by the difference between the final price and the strike price."}):e===f.OA.TURBOS?o().createElement(a.Localize,{i18n_default_text:"The payout at expiry is equal to the payout per point multiplied by the distance between the final price and the barrier."}):o().createElement(a.Localize,{i18n_default_text:"Payout is the sum of your initial stake and profit."})})),h,(function(e){return e===f.OA.VANILLAS?o().createElement(a.Localize,{i18n_default_text:"We calculate this based on the strike price and duration you’ve selected."}):o().createElement(a.Localize,{i18n_default_text:"The amount you choose to receive at expiry for every point of change between the final price and the barrier. "})})),b(b(b(b(b(b(b(n,E,o().createElement(a.Localize,{i18n_default_text:"Spot price on the previous tick."})),S,o().createElement(a.Localize,{i18n_default_text:"It is a percentage of the previous spot price. The percentage rate is based on your choice of the index and the growth rate."})),w,(function(e){return e===f.OA.ACCUMULATORS?o().createElement(a.Localize,{i18n_default_text:"The spot price may change by the time your order reaches our servers. When this happens, your payout may be affected."}):o().createElement(a.Localize,{i18n_default_text:"Slippage happens when the asset price changes by the time it reaches our servers."})})),O,o().createElement(a.Localize,{i18n_default_text:"Your trade will be closed automatically at the nearest available asset price when your loss reaches a certain percentage of your stake, but your loss never exceeds your stake. This percentage depends on the chosen underlying asset and the Multiplier."})),A,o().createElement(a.Localize,{i18n_default_text:"If you select this feature, your trade will be closed automatically at the nearest available asset price when your loss reaches or exceeds the stop loss amount. Your loss may be more than the amount you entered depending on the market price at closing."})),k,o().createElement(o().Fragment,null,o().createElement(i.E,{className:"definition__paragraph"},o().createElement(a.Localize,{i18n_default_text:"You must select the strike price before entering the contract."})),o().createElement(i.E,{className:"definition__paragraph"},o().createElement(a.Localize,{i18n_default_text:"If you select “Call”, you’ll earn a payout if the final price is above the strike price at expiry. Otherwise, you won’t receive a payout."})),o().createElement(i.E,null,o().createElement(a.Localize,{i18n_default_text:"If you select ‘Put”, you’ll earn a payout if the final price is below the strike price at expiry. Otherwise, you won’t receive a payout."})))),x,o().createElement(a.Localize,{i18n_default_text:"If you select this feature, your trade will be closed automatically at the nearest available asset price when your profit reaches or exceeds the take profit amount. Your profit may be more than the amount you entered depending on the market price at closing."})))[r];return"function"==typeof C?C(t):null!=C?C:""}},S=function(e){return e.map((function(e,t){var r=e.type,n=e.text;return"heading"===r&&"string"!=typeof n?o().createElement(i.E,{key:n.props.i18n_default_text,bold:!0,size:"md",className:"description__heading"},n):"paragraph"!==r&&"general"!==r||"string"==typeof n?"video"===r&&"string"==typeof n?o().createElement(_,{contract_type:n,key:n+t}):void 0:o().createElement(i.E,{as:"p",key:n.props.i18n_default_text,size:"sm",className:"description__".concat(r),color:"quill-typography__color--default"},n)}))},w=b(b(b(b(b(b(b(b(b(b({},f.OA.ACCUMULATORS,v.fm.accumulator),f.OA.EVEN_ODD,v.fm.even_odd),f.OA.HIGHER_LOWER,v.fm.high_low),f.OA.MATCHES_DIFFERS,v.fm.match_diff),f.OA.MULTIPLIERS,v.fm.multiplier),f.OA.OVER_UNDER,v.fm.over_under),f.OA.RISE_FALL,v.fm.rise_fall),f.OA.TOUCH_NO_TOUCH,v.fm.touch),f.OA.VANILLAS,v.fm.vanilla),f.OA.TURBOS,v.fm.turbos),O=function(){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===(e=w[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""])||void 0===e?void 0:e[t?"dark":"light"]}},"./src/AppV2/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>ym});var n=r("react"),o=r.n(n),a=r("./src/App/init-store.ts"),i=r("@deriv/shared"),l=r("./src/Stores/Providers/modules-providers.tsx"),c=r("./src/trader-providers.tsx"),u=r("../stores/src/useStore.ts"),s=r("../../node_modules/lodash.debounce/index.js"),d=r.n(s),f=r("mobx");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=(0,i.toMoment)().startOf("day").unix();return e&&t>e?e:(0,i.epochToMoment)(t).add(1,"d").subtract(1,"s").unix()},h=function(e,t,r,n){var o=(0,i.toMoment)().startOf("day").unix();return n&&o>n?r:e&&t?t:r};const b=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return y(y({},function(e,t,r,n){var o=(0,i.toMoment)().startOf("day").unix();return n&&o>n?!!e||t:t?r||e:!!e||!1}(e,n,r,t)&&{date_from:h(n,r,e,t)}),(t||n)&&{date_to:v(t)})};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new P(n||[]);return o(i,"_invoke",{value:C(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(N([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==O(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=T(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(O(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function k(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){k(a,n,o,i,l,"next",e)}function l(e){k(a,n,o,i,l,"throw",e)}i(void 0)}))}}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}var N=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,f.makeObservable)(this,{validation_errors:f.observable,validation_rules:f.observable,partial_fetch_time:f.observable,retrieveFromStorage:f.action,setValidationErrorMessages:f.action,setValidationRules:f.action,addRule:f.action,validateProperty:f.action,validateAllProperties:f.action,onSwitchAccount:f.action.bound,onPreSwitchAccount:f.action.bound,onLogout:f.action.bound,onClientInit:f.action.bound,onNetworkStatusChange:f.action.bound,onThemeChange:f.action.bound,onRealAccountSignupEnd:f.action.bound,disposePreSwitchAccount:f.action.bound,disposeSwitchAccount:f.action.bound,disposeLogout:f.action.bound,disposeClientInit:f.action.bound,disposeNetworkStatusChange:f.action.bound,disposeThemeChange:f.action.bound,disposeRealAccountSignupEnd:f.action.bound,onUnmount:f.action.bound,assertHasValidCache:f.action.bound});var n=r.root_store,o=r.local_storage_properties,a=r.session_storage_properties,i=r.validation_rules,l=r.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),o&&o.length||a&&a.length){if(!l)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:l,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=o||[],this.session_storage_properties=a||[],setTimeout((function(){t.setValidationRules(i),t.setupReactionForLocalStorage(),t.setupReactionForSessionStorage(),t.retrieveFromStorage()}),0)}return t=e,r=[{key:"getSnapshot",value:function(e){var t=(0,f.toJS)(this);return(0,i.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,r){return Object.assign(e,j({},r,t[r]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,f.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,f.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,r){var n=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));r===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),n=T(T({},t),r);Object.keys(n).forEach((function(t){return e[t]=n[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var r=this;this.validation_errors[e]&&!r.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!r.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(r){e.addRule(r,t[r])}))}},{key:"addRule",value:function(e,t){var r=this;this.validation_rules[e]=t,(0,f.intercept)(this,e,(function(t){return r.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var r=this,n=this.validation_rules[e].trigger,o=j({},e,void 0!==t?t:this[e]),a=j({},e,this.validation_rules[e].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(o[n]=this[n],a[n]=this.validation_rules[n].rules||[]);var l=new i.Validator(o,a,this);l.isPassed(),Object.keys(o).forEach((function(e){r.setValidationErrorMessages(e,l.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),r.forEach((function(r){t.includes(r)||delete e.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,f.when)((function(){return t.root_store.client.switch_broadcast}),(function(){try{var e=t.switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Switching account listeners are required to return a promise.");e.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)}))}catch(e){(0,i.isProduction)()||console.error(e)}})))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,f.when)((function(){return t.root_store.client.pre_switch_broadcast}),(function(){try{var e,r=null===(e=t.pre_switch_account_listener)||void 0===e?void 0:e.call(t);if(!r||!r.then||"function"!=typeof r.then)throw new Error("Pre-switch account listeners are required to return a promise.");r.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)}))}catch(e){(0,i.isProduction)()||console.error(e)}})))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,f.when)((function(){return t.root_store.client.has_logged_out}),x(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.logout_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,f.when)((function(){return t.root_store.client.initialized_broadcast}),x(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.client_init_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,f.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,i.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,f.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,i.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,f.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,i.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}],r&&L(t.prototype,r),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function D(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(){R=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==I(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(I(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return(t=H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function V(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){q(a,n,o,i,l,"next",e)}function l(e){q(a,n,o,i,l,"throw",e)}i(void 0)}))}}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function H(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}function G(e,t,r){return t=W(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],W(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}N.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var K=function(e){function t(e){var r,n=e.root_store;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=G(this,t,[{root_store:n}])).data=[],r.date_from=null,r.date_to=(0,i.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),r.error="",r.has_loaded_all=!1,r.is_loading=!0,r.filtered_date_range=void 0,r.client_loginid="",r.fetchOnScroll=d()((function(e,t){e<1500&&r.fetchNextBatch(t)}),150),(0,f.makeObservable)(r,{data:f.observable,date_from:f.observable,date_to:f.observable,error:f.observable,has_loaded_all:f.observable,is_loading:f.observable,filtered_date_range:f.observable,client_loginid:f.observable,is_empty:f.computed,has_selected_date:f.computed,fetchNextBatch:f.action.bound,profitTableResponseHandler:f.action.bound,handleScroll:f.action.bound,networkStatusChangeListener:f.action.bound,onMount:f.action.bound,onUnmount:f.override,totals:f.computed,accountSwitcherListener:f.action.bound,clearTable:f.action.bound,clearDateFilter:f.action.bound,handleDateChange:f.action.bound}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),r=t,n=[{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"shouldFetchNextBatch",value:function(e){return!!e||!this.has_loaded_all&&!this.is_loading}},{key:"fetchNextBatch",value:(l=V(R().mark((function e(t,r){var n,o,a,l,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shouldFetchNextBatch(r)){e.next=2;break}return e.abrupt("return");case 2:return this.is_loading=!0,a=b(this.date_from,this.date_to,0,!1),l=t?F(F({},b(null===(n=this.root_store.modules.positions)||void 0===n?void 0:n.dateFrom,null===(o=this.root_store.modules.positions)||void 0===o?void 0:o.dateTo,0,!1)),{},{contract_type:this.root_store.modules.positions.filteredContractTypes}):a,e.next=7,i.WS.profitTable(50,this.data.length,l);case 7:c=e.sent,this.profitTableResponseHandler(c);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"profitTableResponseHandler",value:function(e){var t=this;if("error"in e)this.error=e.error.message;else{var r=e.profit_table.transactions.map((function(e){return function(e,t){var r,n,o,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c="DD MMM YYYY HH:mm:ss",u=e.purchase_time&&"".concat((0,i.toMoment)(Number(e.purchase_time)).format(c)),s=e.purchase_time,d=e.sell_time&&"".concat((0,i.toMoment)(Number(e.sell_time)).format(c)),f=null!==(r=e.payout)&&void 0!==r?r:NaN,m=null!==(n=e.sell_price)&&void 0!==n?n:NaN,p=null!==(o=e.buy_price)&&void 0!==o?o:NaN,y=(0,i.formatMoney)(t,Number(m-p),!0),_=(0,i.getSymbolDisplayName)(l,(0,i.getMarketInformation)(null!==(a=e.shortcode)&&void 0!==a?a:"").underlying);return S(S({},e),{payout:f,sell_price:m,buy_price:p,profit_loss:y,sell_time:d,purchase_time:u,display_name:_,purchase_time_unix:s})}(e,t.root_store.client.currency,t.root_store.active_symbols.active_symbols)})).filter(i.filterDisabledPositions);this.data=[].concat(D(this.data),D(r)),this.has_loaded_all=r.length<50,this.is_loading=!1}}},{key:"handleScroll",value:function(e,t){var r=e.target,n=r.scrollTop,o=r.scrollHeight-(n+r.clientHeight);this.fetchOnScroll(o,t)}},{key:"networkStatusChangeListener",value:function(e){this.is_loading=this.is_loading||!e}},{key:"onMount",value:(a=V(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,i.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),e.next=6,i.WS.wait("authorize");case 6:this.fetchNextBatch(t,!0);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),i.WS.forgetAll("proposal")}},{key:"totals",get:function(){var e=0;return this.data.forEach((function(t){e+=parseFloat(t.profit_loss.replace(/,/g,""))})),{profit_loss:e.toString()}}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise((function(t){return e.clearTable(),e.clearDateFilter(),t(e.fetchNextBatch())}))}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,i.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix()}},{key:"handleDateChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.date_range,n=t.shouldFilterContractTypes,o=e.from,a=e.to,l=e.is_batch;this.filtered_date_range=r,o?this.date_from=(0,i.toMoment)(o).unix():l&&(this.date_from=null),a&&(this.date_to=(0,i.toMoment)(a).unix()),n&&(this.root_store.modules.positions.setDateFrom(this.date_from),this.root_store.modules.positions.setDateTo(this.date_to)),this.clearTable(),this.fetchNextBatch(n)}}],n&&B(r.prototype,n),o&&B(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,l}(N),J=r("@deriv/translations");function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=e.action_type,c=e.app_id,u=e.contract_id,s=e.longcode,d=e.purchase_time,f=e.withdrawal_details,m=(0,i.toMoment)(e.transaction_time).format("DD MMM YYYY HH:mm:ss"),p=null!==(r=e.payout)&&void 0!==r?r:NaN,y=null!==(n=e.amount)&&void 0!==n?n:NaN,_=null!==(o=e.balance_after)&&void 0!==o?o:NaN,v=!0,h=["buy","sell"].includes(null!=l?l:"")?e.shortcode:null,b=h?(0,i.getSymbolDisplayName)(a,(0,i.getMarketInformation)(h).underlying):"";return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({action:(0,J.localize)((0,i.toTitleCase)(null!=l?l:"")),date:m,display_name:b,refid:e.transaction_id,payout:isNaN(p)?"-":(0,i.formatMoney)(t,p,v),amount:isNaN(y)?"-":(0,i.formatMoney)(t,y,v),balance:isNaN(_)?"-":(0,i.formatMoney)(t,_,v),desc:null==s?void 0:s.replace(/\n/g,"<br />"),id:u,app_id:c,shortcode:h,action_type:l,purchase_time:d,transaction_time:e.transaction_time},f&&{withdrawal_details:f,longcode:s})};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oe(){oe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==te(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(te(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function ae(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ae(a,n,o,i,l,"next",e)}function l(e){ae(a,n,o,i,l,"throw",e)}i(void 0)}))}}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ce(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}function ue(e,t,r){return t=de(t),function(e,t){if(t&&("object"==te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,se()?Reflect.construct(t,r||[],de(e).constructor):t.apply(e,r))}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}var me=function(e){function t(e){var r,n=e.root_store;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ue(this,t,[{root_store:n}])).data=[],r.is_loading=!0,r.has_loaded_all=!1,r.date_from=null,r.date_to=(0,i.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),r.error="",r.action_type="all",r.filtered_date_range=void 0,r.client_loginid="",r.account_statistics={},r.fetchOnScroll=d()((function(e){e<1500&&r.fetchNextBatch()}),150),(0,f.makeObservable)(r,{data:f.observable,is_loading:f.observable,has_loaded_all:f.observable,date_from:f.observable,date_to:f.observable,error:f.observable,action_type:f.observable,filtered_date_range:f.observable,client_loginid:f.observable,account_statistics:f.observable,is_empty:f.computed,has_selected_date:f.computed,clearTable:f.action.bound,clearDateFilter:f.action.bound,fetchNextBatch:f.action.bound,statementHandler:f.action.bound,handleDateChange:f.action.bound,handleFilterChange:f.action.bound,handleScroll:f.action.bound,accountSwitcherListener:f.action.bound,networkStatusChangeListener:f.action.bound,onMount:f.action.bound,onUnmount:f.override}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(t,e),r=t,n=[{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,i.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),this.partial_fetch_time=0}},{key:"shouldFetchNextBatch",value:function(e){if(!e&&(this.has_loaded_all||this.is_loading))return!1;var t=(0,i.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix();return!(this.date_to<t)||!e&&this.partial_fetch_time}},{key:"fetchNextBatch",value:(l=ie(oe().mark((function e(){var t,r,n,o=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],this.shouldFetchNextBatch(t)){e.next=3;break}return e.abrupt("return");case 3:return this.is_loading=!0,r=b(this.date_from,this.date_to,this.partial_fetch_time,t),"all"!==this.action_type&&(r.action_type=this.action_type),e.next=8,i.WS.statement(100,t?void 0:this.data.length,r);case 8:n=e.sent,this.statementHandler(n,t);case 10:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"statementHandler",value:function(e,t){var r=this;if("error"in e)this.error=e.error.message;else{var n=e.statement.transactions.map((function(e){return ee(e,r.root_store.client.currency,r.root_store.active_symbols.active_symbols)})).filter(i.filterDisabledPositions);this.data=t?[].concat(re(n),re(this.data)):[].concat(re(this.data),re(n)),this.has_loaded_all=!t&&n.length<100,this.is_loading=!1,n.length>0&&(this.partial_fetch_time=(0,i.toMoment)().unix())}}},{key:"handleDateChange",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).date_range,r=e.from,n=e.to,o=e.is_batch;this.filtered_date_range=t,r?this.date_from=(0,i.toMoment)(r).unix():o&&(this.date_from=null),n&&(this.date_to=(0,i.toMoment)(n).unix()),this.clearTable(),this.fetchNextBatch()}},{key:"handleFilterChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action_type=e,this.clearTable(),this.fetchNextBatch()}},{key:"handleScroll",value:function(e){var t=e.target,r=t.scrollTop,n=t.scrollHeight-(r+t.clientHeight);this.fetchOnScroll(n)}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise((function(t){return e.clearTable(),e.clearDateFilter(),t(e.fetchNextBatch())}))}},{key:"networkStatusChangeListener",value:function(e){this.is_loading=this.is_loading||!e}},{key:"onMount",value:(a=ie(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,this.client_loginid?this.clearTable:function(){return null},i.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),e.next=6,i.WS.wait("authorize");case 6:this.fetchNextBatch(!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),i.WS.forgetAll("proposal")}}],n&&le(r.prototype,n),o&&le(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,l}(N),pe=o().createContext(null),ye=function(e){var t=e.children,r=(0,u.A)(),n=o().useMemo((function(){return{profit_table:new K({root_store:r}),statement:new me({root_store:r})}}),[r]);return o().createElement(pe.Provider,{value:n},t)},_e=r("../../node_modules/@deriv-com/quill-ui/dist/providers/notification/notificationsProvider.js"),ve=r("../../node_modules/@deriv-com/quill-ui/dist/providers/snackbar/snackbarProvider.js"),he=r("mobx-react-lite"),be=r("../../node_modules/@deriv-com/quill-ui/dist/hooks/useNotifications/index.js"),ge=r("../../node_modules/@deriv-com/quill-ui/dist/components/Notification/banners/index.js"),Ee=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneFlagCheckeredFillIcon.js"),Se=r("react-router-dom");function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=(0,he.observer)((function(){var e=(0,be.E)(),t=e.addBanner,r=e.banners,n=e.removeBanner,a=(0,u.A)().portfolio.setAddNotificationBannerCallback,l=(0,Se.useLocation)().pathname;return o().useEffect((function(){r.length>1&&n(r[0].id),l!==i.routes.trade&&r.forEach((function(e){var t=e.type,r=e.id;t||n(r)}))}),[r,l]),o().useEffect((function(){return a((function(e,r){return t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:o().createElement(Ee.A,{iconSize:"sm",className:"trade-notification--".concat(r),key:"contract-closed"})},e))})),function(){return a()}}),[]),o().createElement(ge.$,{autohideTimeout:4e3,banners:r,className:"trade-notification",isMobile:!0,onClose:n,zIndex:100})}));const xe=ke;var Ce=r("@deriv/components"),Te=r("../../node_modules/clsx/dist/clsx.mjs"),je=r("../utils/src/index.ts");function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ne=function(e,t){var r,n,a=Le(o().useState(null!==(r=null!==(n=(0,je.Lg)(e))&&void 0!==n?n:t)&&void 0!==r?r:null),2),i=a[0],l=a[1];o().useEffect((function(){localStorage.setItem(e,JSON.stringify(i))}),[e,i]);return[i,l,function(){localStorage.removeItem(e),l(null!=t?t:null)}]};var Ie=r("../../node_modules/@deriv-com/quill-ui/dist/components/Typography/text/index.js"),De=r("../../node_modules/@deriv-com/quill-ui/dist/snackbar-controller-ChcV5SXl.js"),Me=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedChevronUpSmBoldIcon.js"),Re=r("./src/Stores/useTraderStores.tsx");function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ue=function(e){var t,r=e.rows,a=e.animation_class,i=e.is_moving_transaction,l=e.className,c=ze((0,n.useState)(0),2),u=c[0],s=c[1];return(0,n.useEffect)((function(){s((function(e){return e+1}))}),[a]),o().createElement(o().Fragment,null,o().createElement("div",{className:"".concat(l,"__stat")},o().createElement(Ie.E,{size:"sm",bold:!0,className:a,"data-testid":"accumulator-first-stat",color:"quill-typography__color--prominent",key:u},r[0])),null===(t=r.slice(1))||void 0===t?void 0:t.map((function(e,t){return o().createElement("div",{key:t+1,className:(0,Te.A)("".concat(l,"__stat"),{"slide-right":i&&0==t})},o().createElement(Ie.E,{size:"sm"},e))})))};var qe=r("./src/Modules/Trading/Helpers/video-config.ts"),Ve=r("../../node_modules/@deriv-com/quill-ui/dist/components/Loader/skeleton/index.js"),Be=r("./src/AppV2/Utils/trade-params-utils.tsx"),He=136,Ge=30,Ye=56,We=56,$e=40,Ke=24,Je=.5625,Xe=function(e){var t,r,n=e.component_key,o=e.contract_type,a=e.has_cancellation,i=e.symbol;return n in(null!==(t=null===(r=(0,Be.LL)(i,a))||void 0===r?void 0:r[o])&&void 0!==t?t:{})},Ze=function(e){var t=e.contract_type,r=e.has_cancellation,n=e.is_accumulator,o=e.symbol,a=window.innerHeight-$e-Ye-He-Ke,i=function(e){return Xe({component_key:e,symbol:o,has_cancellation:r,contract_type:t})};return n?a-We:i("expiration")||i("mult_info_display")||i("payout_per_point_info")||i("allow_equals")||i("payout")?a-Ge:a},Qe="InsufficientBalance",et="AuthorizationRequired",tt="PleaseAuthenticate",rt="PendingVerification",nt="CompanyWideLimitExceeded",ot=function(e){var t=e.services_error,r=e.is_mf_verification_pending_modal_visible,n=t||{},o=n.code,a=n.type;return o===Qe||o===et&&"buy"===a||o===tt||!!r},at=["autoplay","controls","letterbox_color","loop","muted","preload","src","test_id","title"];function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},it.apply(null,arguments)}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ut=function(e){var t=e.autoplay,r=void 0===t||t,n=e.controls,a=void 0!==n&&n,i=e.letterbox_color,l=void 0===i?"transparent":i,c=e.loop,u=void 0===c||c,s=e.muted,d=void 0===s||s,f=e.preload,m=void 0===f?"auto":f,p=e.src,y=e.test_id,_=e.title,v=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,at),h=lt(o().useState(!0),2),b=h[0],g=h[1],E=["letterboxColor=".concat(encodeURIComponent(l)),"muted=".concat(d),"preload=".concat(m),"loop=".concat(u),"autoplay=".concat(r),"controls=".concat(a)].join("&");return o().createElement("div",{className:(0,Te.A)("stream__wrapper",b&&"stream__wrapper--is-loading")},b&&o().createElement(Ve.E.Square,{height:"calc(100vw * ".concat(Je,")")}),o().createElement("iframe",it({allowFullScreen:!1,className:"stream__iframe",width:"100%",height:"100%",src:"https://iframe.cloudflarestream.com/".concat(p,"?").concat(E),"data-testid":y,title:_,onLoad:function(){return g(!1)}},v)))},st=ut;const dt=function(e){var t=e.onActionSheetClose;return o().createElement(De.A.Portal,{showHandlebar:!0,shouldCloseOnDrag:!0,handleBarPosition:"absolute"},o().createElement("div",{className:"stats-description"},o().createElement(st,{src:qe.Jz.accumulator_stats,title:"accumulator_stats"}),o().createElement("div",{className:"stats-description__content"},o().createElement("div",{className:"stats-description__content__title"},o().createElement(Ie.E,{size:"lg",bold:!0,color:"quill-typography__color--prominent"},o().createElement(J.Localize,{i18n_default_text:"Stats"}))),o().createElement("div",{className:"stats-description__content__description"},o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Stats show the history of consecutive tick counts, i.e. the number of ticks the price remained within range continuously."}))))),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Got it"}),onAction:t}}))};const ft=function(e){var t=e.rows,r=e.animation_class,n=e.is_moving_transaction;return o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement("div",{className:"stats-sheet"},o().createElement("div",{className:"stats-sheet__title"},o().createElement(Ie.E,{size:"lg",bold:!0,color:"quill-typography__color--prominent"},o().createElement(J.Localize,{i18n_default_text:"Stats"}))),o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"History of tick counts"}))),o().createElement(De.A.Content,null,o().createElement("div",{className:"stats-sheet__stats"},o().createElement(Ue,{rows:t[0],animation_class:r,is_moving_transaction:n,className:"stats-sheet__stats"})),t.slice(1).map((function(e,t){return o().createElement("div",{key:t,className:"stats-sheet__stats"},e.map((function(e,r){return o().createElement("div",{key:"".concat(t,"-").concat(r),className:"stats-sheet__stats__number"},o().createElement(Ie.E,{size:"sm"},e))})))}))))};function mt(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||yt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){if(e){if("string"==typeof e)return _t(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const vt=(0,he.observer)((function(){var e,t=(0,Re.P)().ticks_history_stats,r=void 0===t?{}:t,a=pt((0,n.useState)(!1),2),i=a[0],l=a[1],c=pt((0,n.useState)(!1),2),u=c[0],s=c[1],d=pt((0,n.useState)(""),2),f=d[0],m=d[1],p=pt((0,n.useState)(null),2),y=p[0],_=p[1],v=pt((0,n.useState)(!1),2),h=v[0],b=v[1],g=(0,n.useMemo)((function(){var e;return null!==(e=null==r?void 0:r.ticks_stayed_in)&&void 0!==e?e:[]}),[r]),E=(0,n.useMemo)((function(){return g.reduce((function(e,t,r){return r%5==0&&e.push(g.slice(r,r+5)),e}),[])}),[g]),S=function(){l(!1),s(!1)};return(0,n.useEffect)((function(){var e,t,r;if(E[0]&&E[0].length>0){m(""),clearTimeout(e),clearTimeout(t),clearTimeout(r);var n=y===E[0][1];n?t=setTimeout((function(){return m("animate-error")}),0):e=setTimeout((function(){return m("animate-success")}),0),b(n),n&&(r=setTimeout((function(){return b(!1)}),600)),_(E[0][0])}return function(){clearTimeout(e),clearTimeout(t),clearTimeout(r)}}),[null===(e=E[0])||void 0===e?void 0:e[0],g]),0===E.length?null:o().createElement("div",null,o().createElement("div",{className:"accumulators-stats-v2"},o().createElement("div",{className:"accumulators-stats-v2__container"},o().createElement("button",{className:"accumulators-stats-v2__container__heading",onClick:function(){return s(!0)}},o().createElement(Ie.E,{size:"sm"},o().createElement(J.Localize,{i18n_default_text:"Stats"}))),o().createElement("div",{className:"accumulators-stats-v2__container__divider"}),o().createElement("div",{className:"accumulators-stats-v2__container__stats"},o().createElement(Ue,{rows:[].concat(mt(E[0]),mt(E[1]||[])),animation_class:f,is_moving_transaction:h,className:"accumulators-stats-v2__container__stats"})),o().createElement("button",{className:"accumulators-stats-v2__container__expand",onClick:function(){return l(!0)}},o().createElement(Me.A,{"data-testid":"expand-stats-icon",fill:"var(--semantic-color-monochrome-textIcon-normal-high)"})))),o().createElement(De.A.Root,{isOpen:i||u,onClose:S,position:"left",className:"accumulator-stats-sheet-wrapper",expandable:!1},i&&o().createElement(ft,{rows:E,is_moving_transaction:h,animation_class:f}),u&&o().createElement(dt,{onActionSheetClose:S})))}));var ht=r("../../node_modules/classnames/index.js"),bt=r.n(ht),gt=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneChartAreaRegularIcon.js"),Et=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneChartAreaFillIcon.js"),St=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneClockThreeRegularIcon.js"),wt=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneClockThreeFillIcon.js"),Ot=r("../../node_modules/@deriv-com/quill-ui/dist/components/Badge/index.js"),At=r("../../node_modules/@deriv-com/quill-ui/dist/components/Navigation/index.js"),kt=r("react-router");function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Tt=(0,he.observer)((function(e){var t=e.children,r=e.className,n=e.onScroll,a=(0,kt.useHistory)(),l=(0,kt.useLocation)(),c=(0,u.A)(),s=c.client,d=c.portfolio.active_positions_count,f=s.is_logged_in,m=[{icon:o().createElement(gt.A,{iconSize:"sm"}),activeIcon:o().createElement(Et.A,{iconSize:"sm"}),label:o().createElement(J.Localize,{i18n_default_text:"Trade"}),path:i.routes.trade},{icon:d>0?o().createElement(Ot.E,{variant:"notification",position:"top-right",label:d.toString(),color:"danger",size:"sm",contentSize:"sm",className:"bottom-nav-item__position-badge"},o().createElement(St.A,{iconSize:"sm"})):o().createElement(St.A,{iconSize:"sm"}),activeIcon:d>0?o().createElement(Ot.E,{variant:"notification",position:"top-right",label:d.toString(),color:"danger",size:"sm",contentSize:"sm",className:"bottom-nav-item__position-badge"},o().createElement(wt.A,{iconSize:"sm"})):o().createElement(wt.A,{iconSize:"sm"}),label:o().createElement(o().Fragment,null,o().createElement("span",{className:"user-guide__anchor"}),o().createElement(J.Localize,{i18n_default_text:"Positions"})),path:i.routes.trader_positions}],p=m.findIndex((function(e){return e.path===l.pathname})),y=xt(o().useState(p>-1?p:0),2),_=y[0],v=y[1];return o().createElement("div",{className:bt()("bottom-nav",r)},o().createElement("div",{className:"bottom-nav-selection",onScroll:n},t),f?o().createElement(At.V.Bottom,{className:"bottom-nav-container",onChange:function(e,t){return function(e){v(e),a.push(m[e].path)}(t)}},m.map((function(e,t){return o().createElement(At.V.BottomAction,{key:t,index:t,activeIcon:o().createElement(o().Fragment,null),icon:t===_?e.activeIcon:e.icon,label:e.label,selected:t===_,showLabel:!0,className:(0,Te.A)("bottom-nav-item",t===_&&"bottom-nav-item--active",e.path===i.routes.trader_positions&&"bottom-nav-item--positions")})}))):o().createElement(o().Fragment,null))}));function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Pt={},Nt={},It=function(e){return Array.isArray(e)?e.join("-"):e},Dt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=It(e),a=r.enabled,l=void 0===a||a,c=jt((0,n.useState)(Pt[o]||null),2),u=c[0],s=c[1],d=jt((0,n.useState)(null),2),f=d[0],m=d[1],p=jt((0,n.useState)(!Pt[o]&&l),2),y=p[0],_=p[1],v=(0,n.useRef)(!1),h=JSON.stringify(t),b=r.wait_for_authorize,g=void 0===b||b;(0,n.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);var E=(0,n.useCallback)((function(){var e,t;if(_(!0),Nt[o])t=Nt[o];else{var r=JSON.parse(h);t=g?i.WS.authorized.send(r):i.WS.send(r),Nt[o]=t}null===(e=t)||void 0===e||e.then((function(e){v.current&&(Pt[o]=e,s(e),_(!1))})).catch((function(e){v.current&&(m(e),_(!1))})).finally((function(){delete Nt[o]}))}),[o,h,g]);(0,n.useEffect)((function(){l&&!Pt[o]&&E()}),[o,E,l]),(0,n.useEffect)((function(){l&&u!==Pt[o]&&s(Pt[o])}),[l,o,u]);var S=(0,n.useCallback)((function(){Pt[o]=null,E()}),[E,o]);return{data:u,error:f,is_fetching:y,refetch:S}},Mt=r("./src/AppV2/Utils/trade-types-utils.tsx"),Rt=function(e){return[i.isVanillaContract,i.isTurbosContract,i.isRiseFallContract].some((function(t){return e.every((function(e){return t(e)}))}))};function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ut=function(){var e=zt(o().useState([]),2),t=e[0],r=e[1],a=zt(o().useState([]),2),l=a[0],c=a[1],s=(0,Re.P)(),d=s.contract_type,f=s.onChange,m=s.setContractTypesListV2,p=s.setDefaultStake,y=s.processContractsForV2,_=s.symbol,v=(0,u.A)().client,h=v.loginid,b=v.is_switching,g=v.landing_company_shortcode,E=o().useRef(g),S=(0,n.useCallback)((function(){return!(function(e){return e&&"null"!==e}(h)&&!g)&&!b}),[h,b,g]),w=Dt(["contracts_for_company",null!=h?h:"",g],{contracts_for_company:1,landing_company:g},{enabled:S()}),O=w.data,A=w.error,k=w.is_fetching,x=(0,i.getContractCategoriesConfig)(),C=(0,i.cloneObject)(x),T=(0,i.getContractTypesConfig)(),j=zt(o().useState(),2),L=j[0],P=j[1],N=(0,n.useRef)(k),I=(0,n.useCallback)((function(e){return e.some((function(e){return Rt([d,e.value])||d===e.value}))}),[d]),D=(0,n.useCallback)((function(e){return Array.isArray(e)&&0===e.length?[]:(0,Mt.ae)(e)}),[]),M=(0,n.useCallback)((function(e){return!I(e)&&e.length>0?e[0].value:d}),[d,I]),R=(0,n.useCallback)((function(e){d!=e&&e&&f({target:{name:"contract_type",value:e}}),(0,i.setTradeURLParams)({contractType:e})}),[d,f]);(0,n.useEffect)((function(){P(void 0),r([]),N.current=!0}),[h]),(0,n.useEffect)((function(){try{var e=(O||{}).contracts_for_company,t={};if(N.current=!1,!A&&null!=e&&e.available.length){e.available.forEach((function(e){var r=Object.keys(T).find((function(t){return-1!==T[t].trade_types.indexOf(e.contract_type)&&("PUT"!==e.contract_type||1===T[t].barrier_count)}));if(r){if(!t[r]){var n,o,a=null!==(n=Object.keys(C).find((function(e){return-1!==C[e].categories.indexOf(r)})))&&void 0!==n?n:"",l=null===(o=C[a])||void 0===o?void 0:o.categories;if(!l)return;l[l.indexOf(r)]={value:r,text:T[r].title,barrier_category:e.barrier_category},t[r]=(0,i.cloneObject)(T[r])}var c=t[r].config||{};c.barrier_category=0===T[r].barrier_count?"euro_atm":e.barrier_category,c.default_stake=e.default_stake,r===d&&p(e.default_stake),t[r].config=c}})),m(C),r(C),P(t);var n=D(C);c(n);var o=M(n);R(o),g!==E.current&&f({target:{name:"symbol",value:_}}).then((function(){y(),E.current=g}))}}catch(e){console.error(e)}}),[O]);return{trade_types:l,contract_types_list:t,available_contract_types:L,is_fetching_ref:N,resetTradeTypes:function(){c([])}}};function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Vt(){Vt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==qt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qt(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function Bt(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const $t=function(){var e,t,r,o=(0,u.A)(),a=o.client,l=o.common,c=a.loginid,s=a.is_switching,d=l.showError,f=l.current_language,m=(0,Re.P)(),p=m.active_symbols,y=m.contract_type,_=m.is_vanilla,v=m.is_turbos,h=m.setActiveSymbolsV2,b=Yt((0,n.useState)(p),2),g=b[0],E=b[1],S=Ut(),w=S.available_contract_types,O=S.is_fetching_ref,A=[i.TRADE_TYPES.RISE_FALL,i.TRADE_TYPES.RISE_FALL_EQUAL,i.TRADE_TYPES.HIGH_LOW],k=((null==w||null===(e=w[y])||void 0===e?void 0:e.config)||{}).barrier_category,x=(0,n.useCallback)((function(){return!(!w||O.current||s)}),[w,s,O]),C=Dt(["active_symbols",null!=c?c:"",(0,i.isTurbosContract)(y)?"turbos":(0,i.isVanillaContract)(y)?"vanilla":y,f],function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({active_symbols:"brief",contract_type:v?[i.CONTRACT_TYPES.TURBOS.LONG,i.CONTRACT_TYPES.TURBOS.SHORT]:_?[i.CONTRACT_TYPES.VANILLA.CALL,i.CONTRACT_TYPES.VANILLA.PUT]:null!==(t=null===(r=(0,i.getContractTypesConfig)()[y])||void 0===r?void 0:r.trade_types)&&void 0!==t?t:[]},A.includes(y)&&k?{barrier_category:[k]}:{}),{enabled:x()}),T=C.data;return(0,n.useEffect)((function(){var e=function(){var e,t=(e=Vt().mark((function e(){var t,r;return Vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:t=T.active_symbols,r=void 0===t?[]:t,T.error?d({message:(0,J.localize)("Trading is unavailable at this time.")}):null!=r&&r.length?(E(r),h(r)):E([]);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Bt(a,n,o,i,l,"next",e)}function l(e){Bt(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[T]),{activeSymbols:g}};var Kt=r("../../node_modules/@deriv-com/quill-ui/dist/components/Typography/caption/index.js");const Jt=function(e){var t=e.opening_time,r=e.days_offset,n=e.current_language,a=(0,i.convertTimeFormat)(t),l=(0,i.toMoment)(new Date).locale(n.toLowerCase()).add(r,"days").format("DD MMM YYYY");return o().createElement(Kt.O,{bold:!0,className:"market-opening-time-banner"},o().createElement(J.Localize,{i18n_default_text:"{{formatted_opening_time}} (GMT), {{opening_date}}",values:{formatted_opening_time:a,opening_date:l}}))};var Xt=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedStopwatchMdBoldIcon.js");const Zt=function(e){var t=e.time_left,r="";if(Object.keys(t).length){var n=(24*Number(t.days)+Number(t.hours)).toString().padStart(2,"0"),a=Number(t.minutes).toString().padStart(2,"0"),i=Number(t.seconds).toString().padStart(2,"0");r="".concat(n,":").concat(a,":").concat(i)}return o().createElement("div",{className:"market-countdown-timer"},o().createElement(Xt.A,{fill:"var(--component-textIcon-static-prominentDark)"}),o().createElement(Ie.E,{bold:!0,size:"md",className:"market-countdown-timer-text"},r))};var Qt=function(e){var t=e-Date.now();return t>0?{days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}:{}},er=function(e,t){for(var r,n=t.markets,o=0;o<n.length;o++){var a=n[o].submarkets;if(a)for(var i=0;i<a.length;i++){var l=a[i].symbols;if(void 0!==(r=null==l?void 0:l.find((function(t){return t.symbol===e}))))return r}}};function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function or(){or=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==tr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(tr(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function ar(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ir(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ar(a,n,o,i,l,"next",e)}function l(e){ar(a,n,o,i,l,"throw",e)}i(void 0)}))}}var lr=function(){var e=ir(or().mark((function e(t){var r;return or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.WS.tradingTimes(t);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",{api_initial_load_error:r.error.message});case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const cr=(0,he.observer)((function(){var e=(0,u.A)().common.current_language,t=(0,Re.P)(),r=t.symbol,n=t.prepareTradeStore,a=t.is_market_closed,l=$t().activeSymbols,c=(0,i.useIsMounted)(),s=rr(o().useState({}),2),d=s[0],f=s[1],m=rr(o().useState(Qt(null==d?void 0:d.remaining_time_to_open)),2),p=m[0],y=m[1],_=rr(o().useState(!0),2),v=_[0],h=_[1];if(o().useEffect((function(){if(a){h(!0);var e=function(){var t=ir(or().mark((function t(n,o){var a,l,u,s,d,m,p,y,_;return or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>7)){t.next=2;break}return t.abrupt("return",{});case 2:return l=(0,i.toMoment)(new Date).add(n,"days"),t.next=5,lr(l.format("YYYY-MM-DD"));case 5:if((u=t.sent).api_initial_load_error){t.next=26;break}if(s=er(o,u.trading_times),d=null==s?void 0:s.times.open,m=null==s?void 0:s.times.close,!(1===(null==d?void 0:d.length)&&"--"===d[0]&&"--"===m[0])){t.next=13;break}return t.abrupt("return",e(n+1,o));case 13:p=l.toISOString().substring(0,11),y=function(e){return new Date("".concat(p).concat(e,"Z"))},_=0;case 16:if(!(_<(null==d?void 0:d.length))){t.next=25;break}if(!(+y(d[_])-Date.now()>0)){t.next=22;break}if(a=+y(d[_]),!c()||o!==r){t.next=22;break}return t.abrupt("return",f({days_offset:n,opening_time:d[_],remaining_time_to_open:a}));case 22:_++,t.next=16;break;case 25:e(n+1,o);case 26:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();e(0,r)}y({}),f({})}),[l,r]),o().useEffect((function(){var e;return null!=d&&d.remaining_time_to_open&&(e=setTimeout((function(){y(Qt(d.remaining_time_to_open)),+new Date(d.remaining_time_to_open)-+new Date<1e3&&(h(!0),n(!1))}),1e3)),function(){e&&clearTimeout(e)}}),[p,d,n]),!d||!Object.keys(p).length||!a)return null;var b=d.opening_time,g=d.days_offset;return v&&h(!1),o().createElement("div",{className:(0,Te.A)("closed-market-message--container",{"closed-market-message--loading":v})},o().createElement("div",{className:"closed-market-message--left"},o().createElement(Kt.O,{className:"closed-market-message--left-message"},o().createElement(J.Localize,{i18n_default_text:"This market will reopen at"})),o().createElement(Jt,{opening_time:b,days_offset:g,current_language:e})),o().createElement(Zt,{time_left:p}))}));var ur=r("../../node_modules/@deriv-com/quill-ui/dist/components/Typography/heading/index.js");function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fr="increment",mr="decrement",pr="add10",yr=function(e){var t=e.has_tick_count,r=e.spot,n=e.tick,a=Number(null==r?void 0:r.slice(-1)),i=(0,Ce.usePrevious)(r),l=Number(null==i?void 0:i.slice(-1)),c=sr(o().useState(!1),2),u=c[0],s=c[1],d=sr(o().useState(!1),2),f=d[0],m=d[1],p=sr(o().useState(a),2),y=p[0],_=p[1],v=sr(o().useState(a),2),h=v[0],b=v[1],g=o().useRef(l),E=o().useRef(),S=o().useRef(),w=o().useRef(null);return o().useEffect((function(){var e;if(!isNaN(l)&&!isNaN(a)&&r){var t=Math.abs(Number(l)-a),n=t>0?Math.floor(80/t):80,o=Number(l)<=a;null===(e=w.current)||void 0===e||e.style.setProperty("--animation-time","".concat(n,"ms")),o?s(!0):m(!0),S.current=setTimeout((function(){s(!1),m(!1),b(g.current%10)}),80);var i;return g.current=Number(l),function(e,t,r,n){clearInterval(E.current);var o=setInterval((function(){e===fr&&g.current<n?g.current=(g.current+1)%10:e===mr&&g.current>n?g.current=Math.abs(g.current-1)%10:e===pr&&g.current<r+10?g.current+=1:(e===pr?g.current===r+10:g.current===n)&&clearInterval(o),_(g.current%10)}),t);E.current=o}((i=pr,Number(l)<a?i=fr:Number(l)>a&&(i=mr),i),n,Number(l),a),function(){clearTimeout(S.current),clearInterval(E.current)}}}),[r,l,a]),r?o().createElement("div",{className:"current-spot__display"},t&&o().createElement(Ie.E,{size:"xl",color:"quill-typography__color--prominent"},o().createElement(J.Localize,{i18n_default_text:"Tick {{current_tick}}",values:{current_tick:n}})),o().createElement("div",{className:"current-spot"},o().createElement(Ie.E,{size:"xl",bold:!0,color:"quill-typography__color--prominent"},r.slice(0,-1)),o().createElement("div",{className:"current-spot__last-digit-container"},o().createElement("div",{ref:w,className:(0,Te.A)("current-spot__last-digit-wrapper",u&&"current-spot__last-digit-wrapper--enter-from-top",f&&"current-spot__last-digit-wrapper--enter-from-bottom")},u&&o().createElement(ur.D.H2,{color:"quill-typography__color--prominent",className:"current-spot__last-digit"},y),o().createElement(ur.D.H2,{color:"quill-typography__color--prominent",className:"current-spot__last-digit"},h),f&&o().createElement(ur.D.H2,{color:"quill-typography__color--prominent",className:"current-spot__last-digit"},y))))):null};const _r=o().memo(yr);function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var br="lost",gr="won",Er=(0,he.observer)((function(){var e,t,r,n,a=o().useRef(),l=(0,u.A)().contract_trade,c=l.last_contract,s=l.prev_contract,d=null!==(e=c.contract_info)&&void 0!==e&&e.entry_tick||!s?c:s,m=d.contract_info,p=void 0===m?{}:m,y=d.digits_info,_=void 0===y?{}:y,v=d.display_status,h=d.is_digit_contract,b=d.is_ended,g=(0,Re.P)(),E=g.tick_data,S=g.symbol,w=p.contract_id,O=p.entry_tick,A=p.date_start,k=p.contract_type,x=p.tick_stream,C=p.underlying,T=(0,Ce.usePrevious)(w),j=null===(t=c.contract_info)||void 0===t||null===(r=t.tick_stream)||void 0===r?void 0:r.length,L=(0,Ce.usePrevious)(j),P=E,N=(0,i.isContractElapsed)(p,P),I=(0,i.isContractElapsed)(null==s?void 0:s.contract_info,P),D=!N&&P?v:null;if(A&&!N&&null!=x&&x.length){var M=(0,f.toJS)(x.slice(-1)[0]),R=M.epoch,z=M.tick,F=M.tick_display_value;P={ask:z,bid:z,epoch:R,pip_size:null==F?void 0:F.split(".")[1].length,quote:z,current_tick:x.length}}var U=P&&"current_tick"in P?P.current_tick:null,q=b&&h,V=q&&D===gr,B=q&&D===br,H=Object.keys(_).sort((function(e,t){return+e-+t})).map((function(e){return _[+e]})),G=o().useMemo((function(){return H.slice(-1)[0]||{}}),[H]),Y=P?+P.pip_size:null,W=null!==(n=P)&&void 0!==n&&n.quote&&Y?P.quote.toFixed(Y):null,$=W?+(W.split("").pop()||""):null,K=o().useMemo((function(){return V||B?G:{digit:$,spot:W}}),[V,B,$,W,G]),J=vr(o().useState(U),2),X=J[0],Z=J[1],Q=vr(o().useState(K.spot),2),ee=Q[0],te=Q[1],re=vr(o().useState(!1),2),ne=re[0],oe=re[1],ae=!N&&P?Number(p.barrier):null,ie=(0,Be.yk)(k,ae,K.digit),le=h&&D&&K.spot&&!!O,ce=le&&!b,ue=C===S||!C,se=le&&ue,de=!(null!=s&&s.contract_info&&(!I||1!==j||L)),fe=o().useCallback((function(){Z(U),te(K.spot)}),[U,K.spot]);return o().useEffect((function(){var e;(null==s?void 0:s.contract_info)&&!I&&(null===(e=c.contract_info)||void 0===e?void 0:e.entry_tick)&&(T&&w&&T!==w)?(oe(!0),a.current=setTimeout((function(){oe(!1),fe()}),240)):ne||fe()}),[w,I,c,s,T,fe,ne]),o().useEffect((function(){return function(){clearTimeout(a.current)}}),[]),o().createElement("div",{className:(0,Te.A)("trade__current-spot",se&&"trade__current-spot--has-contract",se&&de&&"trade__current-spot--enter-from-left",!se&&N&&"trade__current-spot--enter-from-right",ce&&ie&&"trade__current-spot--winning",V&&"trade__current-spot--won",ce&&!ie&&"trade__current-spot--losing",B&&"trade__current-spot--lost")},P&&ue&&ee?o().createElement("div",{className:(0,Te.A)("current-spot__wrapper",ne&&"current-spot__wrapper--enter-from-top")},ne&&o().createElement(_r,{has_tick_count:!!le,spot:K.spot,tick:U}),o().createElement(_r,{has_tick_count:!!le,spot:ee,tick:X})):o().createElement(Ce.Skeleton,{width:128,height:32}))}));const Sr=Er;var wr=r("../../node_modules/@deriv-com/quill-ui/dist/components/Tab/index.js"),Or=r("../../node_modules/@deriv-com/quill-ui/dist/components/Input/search-field/index.js"),Ar=r("../../node_modules/@deriv-com/quill-ui/dist/components/Button/base/index.js"),kr=(0,he.observer)((function(e){var t,r=e.isSearching,a=e.setIsSearching,l=e.searchValue,c=e.setSearchValue,s=(0,u.A)().ui.is_dark_mode_on,d=(0,Re.P)().contract_type,f=null===(t=(0,i.getContractTypesConfig)()[d])||void 0===t?void 0:t.title,m=(0,n.useRef)(null);(0,n.useEffect)((function(){var e=m.current;if(e){var t=function(){return a(!0)};return e.addEventListener("focus",t),function(){e.removeEventListener("focus",t)}}}),[]);return o().createElement("div",{className:(0,Te.A)("symbols-search-field__container",{"symbols-search-field--is-focused":r})},o().createElement(Or.L,{inputSize:"sm",placeholder:(0,J.localize)("Search markets on ")+f,variant:"fill",ref:m,value:l,onChange:function(e){c(e.target.value)}}),r&&o().createElement(Ar.$n,{variant:"tertiary",label:o().createElement(J.Localize,{i18n_default_text:"Cancel"}),size:"sm",color:s?"white":"black",onClick:function(){c(""),a(!1)}}))}));const xr=kr;const Cr=function(e){var t=["synthetic_index","forex","indices","cryptocurrency","commodities"].reduce((function(e,t,r){return e[t]=r,e}),{});return e.slice().sort((function(r,n){var o=void 0!==t[r.market]?t[r.market]:e.length,a=void 0!==t[n.market]?t[n.market]:e.length;return o!==a?o-a:r.submarket_display_name.localeCompare(n.submarket_display_name)}))};function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(r),!0).forEach((function(t){Pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ir(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Dr=r("../../node_modules/@deriv-com/quill-ui/dist/hooks/useSnackbar.js"),Mr=r("../../node_modules/@deriv-com/quill-ui/dist/components/Tag/index.js"),Rr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneStarRegularIcon.js"),zr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneStarFillIcon.js"),Fr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexAudcadIcon.js"),Ur=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexAudchfIcon.js"),qr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexAudjpyIcon.js"),Vr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexAudnzdIcon.js"),Br=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexAudusdIcon.js"),Hr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedAudBasketIcon.js"),Gr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBearIcon.js"),Yr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBoom1000Icon.js"),Wr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBoom600Icon.js"),$r=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBoom900Icon.js"),Kr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBoom300Icon.js"),Jr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBoom500Icon.js"),Xr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedBullIcon.js"),Zr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedCrash1000Icon.js"),Qr=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedCrash600Icon.js"),en=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedCrash900Icon.js"),tn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedCrash300Icon.js"),rn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedCrash500Icon.js"),nn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketCommoditySilverusdIcon.js"),on=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketCommodityGoldusdIcon.js"),an=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketCommodityPalladiumusdIcon.js"),ln=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketCommodityPlatinumusdIcon.js"),cn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketCryptocurrencyBtcusdIcon.js"),un=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketCryptocurrencyEthusdIcon.js"),sn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedEurBasketIcon.js"),dn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedGbpBasketIcon.js"),fn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedGoldBasketIcon.js"),mn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedJump10Icon.js"),pn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedJump100Icon.js"),yn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedJump25Icon.js"),_n=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedJump50Icon.js"),vn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedJump75Icon.js"),hn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedStepIndices100Icon.js"),bn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedStepIndices200Icon.js"),gn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedStepIndices300Icon.js"),En=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedStepIndices400Icon.js"),Sn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedStepIndices500Icon.js"),wn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedUsdBasketIcon.js"),On=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility101sIcon.js"),An=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility1001sIcon.js"),kn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility1501sIcon.js"),xn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility2501sIcon.js"),Cn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility251sIcon.js"),Tn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility501sIcon.js"),jn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility751sIcon.js"),Ln=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEuraudIcon.js"),Pn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEurcadIcon.js"),Nn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEurchfIcon.js"),In=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEurgbpIcon.js"),Dn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEurjpyIcon.js"),Mn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEurnzdIcon.js"),Rn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexEurusdIcon.js"),zn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpaudIcon.js"),Fn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpcadIcon.js"),Un=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpchfIcon.js"),qn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpjpyIcon.js"),Vn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpnokIcon.js"),Bn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpnzdIcon.js"),Hn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexGbpusdIcon.js"),Gn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexNzdjpnIcon.js"),Yn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexNzdusdIcon.js"),Wn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdcadIcon.js"),$n=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdchfIcon.js"),Kn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdjpyIcon.js"),Jn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdmxnIcon.js"),Xn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdnokIcon.js"),Zn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdplnIcon.js"),Qn=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketForexUsdsekIcon.js"),eo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesAustralia200Icon.js"),to=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesEuro50Icon.js"),ro=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesFrance40Icon.js"),no=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesGerman40Icon.js"),oo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesHongKong50Icon.js"),ao=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesJapan225Icon.js"),io=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesNetherlands25Icon.js"),lo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesSwiss20Icon.js"),co=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesUk100Icon.js"),uo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesUs500Icon.js"),so=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesUsTech100Icon.js"),fo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketIndicesWallStreet30Icon.js"),mo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility10Icon.js"),po=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility100Icon.js"),yo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility25Icon.js"),_o=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility50Icon.js"),vo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Markets/MarketDerivedVolatility75Icon.js"),ho={frxAUDCAD:Fr.A,frxAUDCHF:Ur.A,frxAUDJPY:qr.A,frxAUDNZD:Vr.A,frxAUDUSD:Br.A,WLDAUD:Hr.A,RDBEAR:Gr.A,BOOM1000:Yr.A,BOOM600:Wr.A,BOOM900:$r.A,BOOM300N:Kr.A,BOOM500:Jr.A,RDBULL:Xr.A,CRASH1000:Zr.A,CRASH600:Qr.A,CRASH900:en.A,CRASH300N:tn.A,CRASH500:rn.A,frxXAGUSD:nn.A,frxXAUUSD:on.A,frxXPDUSD:an.A,frxXPTUSD:ln.A,cryBTCUSD:cn.A,cryETHUSD:un.A,WLDEUR:sn.A,WLDGBP:dn.A,WLDXAU:fn.A,JD10:mn.A,JD100:pn.A,JD25:yn.A,JD50:_n.A,JD75:vn.A,stpRNG:hn.A,stpRNG2:bn.A,stpRNG3:gn.A,stpRNG4:En.A,stpRNG5:Sn.A,WLDUSD:wn.A,"1HZ10V":On.A,"1HZ100V":An.A,"1HZ150V":kn.A,"1HZ250V":xn.A,"1HZ25V":Cn.A,"1HZ50V":Tn.A,"1HZ75V":jn.h,frxEURAUD:Ln.A,frxEURCAD:Pn.A,frxEURCHF:Nn.A,frxEURGBP:In.A,frxEURJPY:Dn.A,frxEURNZD:Mn.A,frxEURUSD:Rn.A,frxGBPAUD:zn.A,frxGBPCAD:Fn.A,frxGBPCHF:Un.A,frxGBPJPY:qn.A,frxGBPNOK:Vn.A,frxGBPNZD:Bn.A,frxGBPUSD:Hn.A,frxNZDJPY:Gn.A,frxNZDUSD:Yn.A,frxUSDCAD:Wn.A,frxUSDCHF:$n.A,frxUSDJPY:Kn.A,frxUSDMXN:Jn.A,frxUSDNOK:Xn.A,frxUSDPLN:Zn.A,frxUSDSEK:Qn.A,OTC_AS51:eo.A,OTC_SX5E:to.A,OTC_FCHI:ro.A,OTC_GDAXI:no.A,OTC_HSI:oo.A,OTC_N225:ao.A,OTC_AEX:io.A,OTC_SSMI:lo.A,OTC_FTSE:co.A,OTC_SPC:uo.A,OTC_NDX:so.A,OTC_DJI:fo.A,R_10:mo.A,R_100:po.A,R_25:yo.A,R_50:_o.A,R_75:vo.A};const bo=function(e){var t=e.symbol,r=ho[t];return r?o().createElement(r,{iconSize:"md"}):null};var go=r("./src/Stores/useModulesStores.tsx");function Eo(e){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eo(e)}function So(e){return function(e){if(Array.isArray(e))return xo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ko(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(){wo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Eo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Eo(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function Oo(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||ko(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(e,t){if(e){if("string"==typeof e)return xo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xo(e,t):void 0}}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Co=(0,n.forwardRef)((function(e,t){var r=e.item,a=e.selectedSymbol,l=e.setSelectedSymbol,c=e.setIsOpen,u=Ao((0,n.useState)(!1),2),s=u[0],d=u[1],f=(0,Re.P)().onChange,m=(0,go.q)().markets,p=m.favoriteSymbols,y=m.setFavoriteSymbols,_=m.removeFavoriteSymbol,v=(0,Dr.d)().addSnackbar;(0,n.useEffect)((function(){d(p.includes(r.symbol))}),[p,r.symbol]);var h=function(){var e,t=(e=wo().mark((function e(t){return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(t),e.next=3,f({target:{name:"symbol",value:t}});case 3:c(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Oo(a,n,o,i,l,"next",e)}function l(e){Oo(a,n,o,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),b=function(e){var t=(null==e?void 0:e.currentTarget).getAttribute("data-symbol")||"";(0,i.clickAndKeyEventHandler)((function(){return h(t)}),e)},g=function(e){var t=(null==e?void 0:e.currentTarget).getAttribute("data-symbol")||"";(0,i.clickAndKeyEventHandler)((function(){return function(e){e&&(-1!==p.indexOf(e)?(_(e),v({icon:o().createElement(Rr.A,{fill:"var(--component-snackbar-icon-neutral)",iconSize:"sm"}),message:o().createElement(J.Localize,{i18n_default_text:"Removed from favourites"}),hasCloseButton:!1})):(y([].concat(So(p),[e])),v({icon:o().createElement(zr.A,{fill:"var(--core-color-solid-mustard-700)",iconSize:"sm"}),message:o().createElement(J.Localize,{i18n_default_text:"Added to favourites"}),hasCloseButton:!1})),d(p.includes(e)))}(t)}),e)};return o().createElement("div",{className:(0,Te.A)("market-category-item",{"market-category-item--selected":a===r.symbol}),ref:t},o().createElement("span",{className:"market-category-item-left","data-symbol":r.symbol,onClick:b,onKeyDown:b},o().createElement(bo,{symbol:r.symbol}),o().createElement(Ie.E,{size:"sm",className:(0,Te.A)("market-category-item-symbol",{"market-category-item-symbol--selected":a===r.symbol})},o().createElement("span",null,r.display_name)),!r.exchange_is_open&&o().createElement(Mr.v,{label:o().createElement(J.Localize,{key:"exchange-closed",i18n_default_text:"CLOSED"}),color:"error",variant:a===r.symbol?"outline":"fill",showIcon:!1})),o().createElement("span",{onClick:g,onKeyDown:g,"data-symbol":r.symbol},s?o().createElement(zr.A,{fill:"var(--core-color-solid-mustard-700)",iconSize:"sm"}):o().createElement(Rr.A,{fill:a===r.symbol?"var(--semantic-color-slate-solid-textIcon-inverse-highest)":"var(--semantic-color-monochrome-textIcon-normal-mid)",iconSize:"sm"})))}));Co.displayName="MarketCategoryItem";const To=(0,he.observer)(Co);const jo=function(){return o().createElement("div",{className:"favorite-symbols--no-fav"},o().createElement(zr.A,{fill:"var(--semantic-color-slate-solid-surface-static-midLowest)",iconSize:"2xl"}),o().createElement(Ie.E,{size:"lg",bold:!0,color:"quill-typography__color--subtle"},o().createElement(J.Localize,{i18n_default_text:"No favourites"})),o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},o().createElement(J.Localize,{i18n_default_text:"Your favourite markets will appear here."})))};const Lo=(0,he.observer)((function(e){var t=e.selectedSymbol,r=e.setSelectedSymbol,a=e.setIsOpen,i=function(){var e=$t().activeSymbols,t=(0,go.q)().markets.favoriteSymbols,r=(0,n.useMemo)((function(){return null==t?void 0:t.map((function(t){return e.find((function(e){return e.symbol===t}))})).filter((function(e){return void 0!==e}))}),[e,t]);return(0,n.useMemo)((function(){return Cr(r)}),[r])}();return o().createElement(o().Fragment,null,i.length>0?o().createElement("div",{className:"favorite-symbols__container"},i.map((function(e){return o().createElement(To,{key:null==e?void 0:e.display_name,item:e,selectedSymbol:t,setSelectedSymbol:r,setIsOpen:a})}))):o().createElement(jo,null))}));function Po(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return No(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?No(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Io=function(e){var t=e.category,r=e.selectedSymbol,a=e.setSelectedSymbol,i=e.setIsOpen,l=e.isOpen,c=(0,n.useRef)({}),u=(0,Ce.usePrevious)(r);return(0,n.useEffect)((function(){var e;l&&"all"===t.market&&r&&c.current[r]&&!u&&(null===(e=c.current[r])||void 0===e||e.scrollIntoView({block:"center"}))}),[l,t.market,r,u]),o().createElement(wr.o.Panel,{key:t.market_display_name},"favorites"!==t.market?Object.entries(t.subgroups).map((function(e){var n=Po(e,2),l=n[0],u=n[1];return o().createElement("div",{key:l,className:"market-category-content__container"},"none"!==l&&o().createElement("div",{className:"market-category-title__container"},o().createElement(Ie.E,{size:"sm",className:"market-category-title"},t.subgroups[l].subgroup_display_name)),Object.entries(u.submarkets).map((function(e){var t=Po(e,2),n=t[0],l=t[1];return o().createElement("div",{className:"market-category-body",key:n},o().createElement(Kt.O,{size:"sm",className:"market-category-subtitle"},l.submarket_display_name),o().createElement("div",{className:"market-category-items"},l.items.map((function(e){return o().createElement(To,{key:e.display_name,ref:e.symbol===r?function(t){return c.current[e.symbol]=t}:void 0,item:e,selectedSymbol:r,setSelectedSymbol:a,setIsOpen:i})}))))})))})):o().createElement("div",null,o().createElement(Lo,{selectedSymbol:r,setSelectedSymbol:a,setIsOpen:i})))};const Do=function(e){var t=e.category;return o().createElement(wr.o.Trigger,{key:t.market_display_name},"indices"===t.market?o().createElement(J.Localize,{i18n_default_text:"Stocks & indices"}):t.market_display_name)};const Mo=(0,he.observer)((function(e){var t=e.selectedSymbol,r=e.setSelectedSymbol,n=e.setIsOpen,a=e.isOpen,i=e.marketCategoriesRef,l=function(e){if(0===e.length)return{};var t=Cr(e).reduce((function(e,t){var r,n,o,a,i,l=t.market,c=t.market_display_name,u=t.subgroup,s=t.subgroup_display_name,d=t.submarket,f=t.submarket_display_name;return null!==(r=e[l])&&void 0!==r||(e[l]={market:l,market_display_name:c,subgroups:{}}),null!==(o=(n=e[l].subgroups)[u])&&void 0!==o||(n[u]={subgroup_display_name:s,submarkets:{}}),null!==(i=(a=e[l].subgroups[u].submarkets)[d])&&void 0!==i||(a[d]={submarket_display_name:f,items:[]}),e[l].subgroups[u].submarkets[d].items.push(t),e}),{});Object.keys(t).forEach((function(e){Object.keys(t[e].subgroups).forEach((function(r){var n=t[e].subgroups[r].submarkets,o=Object.entries(n).sort((function(e,t){var r=Nr(e,2)[1],n=Nr(t,2)[1];return r.submarket_display_name.localeCompare(n.submarket_display_name)})).reduce((function(e,t){var r=Nr(t,2),n=r[0],o=r[1];return e[n]=o,e}),{});t[e].subgroups[r].submarkets=o}))}));var r=Object.values(t).reduce((function(e,t){return Object.keys(t.subgroups).forEach((function(r){var n="none"===r?t.market:r,o="none"===r?t.market_display_name:t.subgroups[r].subgroup_display_name;e[n]={subgroup_display_name:o,submarkets:t.subgroups[r].submarkets}})),e}),{});return t=Lr({favorites:{market:"favorites",market_display_name:(0,J.localize)("Favourites"),subgroups:{}},all:{market:"all",market_display_name:(0,J.localize)("All"),subgroups:Lr({},r)}},t)}($t().activeSymbols);return o().createElement(o().Fragment,null,o().createElement(wr.o.List,null,Object.values(l).map((function(e){return o().createElement(Do,{key:e.market,category:e})}))),o().createElement(wr.o.Content,{className:"market-categories__list",ref:i},Object.values(l).map((function(e){return o().createElement(Io,{key:e.market,category:e,selectedSymbol:t,setSelectedSymbol:r,setIsOpen:n,isOpen:a})}))))}));const Ro=function(e){var t=e.searchTerm;return o().createElement("div",{className:"symbol-not-found__container"},o().createElement("div",{className:"symbol-not-found__content"},o().createElement(Ie.E,{size:"lg",bold:!0,color:"quill-typography__color--subtle"},o().createElement(J.Localize,{i18n_default_text:"No results for {{searchTerm}}",values:{searchTerm:t}})),o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},o().createElement(J.Localize,{i18n_default_text:"Try searching for something else."}))))};const zo=(0,he.observer)((function(e){var t=e.searchValue,r=e.setIsOpen,a=e.setSelectedSymbol,i=function(e){var t=$t().activeSymbols,r=(0,n.useMemo)((function(){return""===e.trim()?[]:t.filter((function(t){return t.display_name.toLowerCase().includes(e.toLowerCase())}))}),[e,t]);return(0,n.useMemo)((function(){return Cr(r)}),[r])}(t);return o().createElement("div",{className:"symbol-search-results__container"},""===t&&o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle",className:"symbol-search-results--suggestion"},o().createElement(J.Localize,{i18n_default_text:"Try searching for markets or keywords"})),""!==t&&(i.length>0?i.map((function(e){return o().createElement(To,{key:null==e?void 0:e.display_name,item:e,selectedSymbol:"",setSelectedSymbol:a,setIsOpen:r})})):o().createElement(Ro,{searchTerm:t})))}));var Fo=r("./src/Analytics/index.ts");function Uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Vo=(0,he.observer)((function(e){var t=e.isOpen,r=e.setIsOpen,a=(0,Re.P)(),i=a.setTickData,l=a.setDigitStats,c=a.symbol,u=a.contract_type,s=Uo((0,n.useState)(!1),2),d=s[0],f=s[1],m=Uo((0,n.useState)(c),2),p=m[0],y=m[1],_=Uo((0,n.useState)(""),2),v=_[0],h=_[1],b=(0,n.useRef)(null);return(0,n.useEffect)((function(){y(c),i(null),l([])}),[l,i,c]),o().createElement(o().Fragment,null,o().createElement(De.A.Root,{isOpen:t,onClose:function(){return r(!1)}},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0,fullHeightOnOpen:!0},o().createElement(xr,{searchValue:v,setSearchValue:h,isSearching:d,setIsSearching:f}),o().createElement(wr.o.Container,{contentStyle:"hug",size:"md",className:"active-symbols-list__content",selectedTabIndex:1,onChangeTab:function(e){var t;1!==e&&(null===(t=b.current)||void 0===t||t.scrollTo({top:0}))}},d?o().createElement(zo,{searchValue:v,setSearchValue:h,setIsOpen:r,setSelectedSymbol:function(e){(0,Fo.iN)(e,u),y(e)}}):o().createElement(Mo,{selectedSymbol:p,setSelectedSymbol:function(e){(0,Fo.iN)(e,u),y(e)},setIsOpen:r,isOpen:t,marketCategoriesRef:b})))))}));const Bo=Vo;var Ho=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedChevronDownMdRegularIcon.js");function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Wo=(0,he.observer)((function(){var e=Go((0,n.useState)(!1),2),t=e[0],r=e[1],a=$t().activeSymbols,i=(0,Re.P)(),l=i.symbol,c=i.tick_data,u=i.is_market_closed,s=a.find((function(e){return e.symbol===l})),d=null!=c?c:{},f=d.pip_size,m=d.quote,p=null==m?void 0:m.toFixed(f),y=u?o().createElement(Ie.E,null,"-"):o().createElement(Ve.E.Square,{height:18,width:64,rounded:!0});return void 0===(null==s?void 0:s.exchange_is_open)?o().createElement(Ve.E.Square,{height:42,width:240,rounded:!0}):o().createElement(o().Fragment,null,o().createElement("div",{className:"market-selector__container",onClick:function(){return r(!0)}},o().createElement("div",{className:"market-selector"},o().createElement(bo,{symbol:l}),o().createElement("div",{className:"market-selector-info"},o().createElement("div",{className:"market-selector-info__label"},o().createElement(Ie.E,{bold:!0},null==s?void 0:s.display_name),!(null!=s&&s.exchange_is_open)&&o().createElement(Mr.v,{label:o().createElement(J.Localize,{key:"closed",i18n_default_text:"CLOSED"}),color:"error",variant:"fill",showIcon:!1,size:"sm"}),o().createElement(Ho.A,{fill:"var(--component-textIcon-normal-default"})),p?o().createElement(Kt.O,{className:"market-selector-info__price"},p):y))),o().createElement(Bo,{isOpen:t,setIsOpen:r}))}));const $o=Wo;var Ko=r("../../node_modules/react-joyride/dist/index.mjs"),Jo=r("../../node_modules/@deriv-com/quill-ui/dist/components/Button/icon-button/index.js"),Xo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedChevronsUpXlBoldIcon.js"),Zo=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedXmarkSmBoldIcon.js"),Qo=r("../../node_modules/react-swipeable/dist/react-swipeable.umd.js");function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ea.apply(null,arguments)}const ta=function(e){var t=e.isLastStep,r=e.primaryProps,n=e.skipProps,a=e.step,i=e.tooltipProps,l=e.setStepIndex,c=(0,Qo.useSwipeable)({onSwipedUp:function(){var e;null===(e=document.querySelector(".trade__chart"))||void 0===e||e.scrollIntoView(),l((function(e){return e+1}))},preventDefaultTouchmoveEvent:!0,trackTouch:!0,trackMouse:!0});return"scroll-icon"===a.title?o().createElement("div",ea({},c,{className:"guide-tooltip__wrapper-scroll"}),o().createElement(Xo.A,{className:"guide-tooltip--bounce"}),o().createElement(Ie.E,{size:"sm",bold:!0,className:"guide-tooltip__wrapper-scroll-text"},o().createElement(J.Localize,{i18n_default_text:"Swipe up to see the chart"}))):o().createElement("div",ea({},i,{className:"guide-tooltip__wrapper"}),o().createElement("div",null,a.title&&o().createElement("div",{className:"guide-tooltip__header"},o().createElement(Kt.O,{bold:!0,className:"guide-tooltip__header__title"},a.title),o().createElement(Jo.K,{onClick:n.onClick,icon:o().createElement(Zo.A,{fill:"var(--component-textIcon-inverse-prominent)",key:"close-button"}),className:"guide-tooltip__close",size:"sm",color:"white-black",variant:"tertiary"})),a.content&&o().createElement(Kt.O,{className:"guide-tooltip__content"},a.content)),o().createElement(Ar.$n,{onClick:function(e){l((function(e){return e+1})),r.onClick(e)},color:"white-black",className:"guide-tooltip__button",variant:"secondary",size:"sm",label:t?o().createElement(J.Localize,{i18n_default_text:"Done"}):o().createElement(J.Localize,{i18n_default_text:"Next"})}))};const ra=[{content:o().createElement(J.Localize,{i18n_default_text:"Scroll left or right to explore trade types."}),offset:0,spotlightPadding:2,target:".trade__trade-types",title:o().createElement(J.Localize,{i18n_default_text:"Explore trade types (1/6)"})},{content:o().createElement(J.Localize,{i18n_default_text:"View available markets here."}),offset:4,placement:"bottom-start",spotlightPadding:8,target:".market-selector__container",title:o().createElement(J.Localize,{i18n_default_text:"Choose a market (2/6)"})},{content:o().createElement(J.Localize,{i18n_default_text:"Specify your trade parameters."}),offset:4,spotlightPadding:8,target:".trade-params",title:o().createElement(J.Localize,{i18n_default_text:"Open your trade (3/6)"})},{content:"",disableBeacon:!1,offset:0,spotlightPadding:0,styles:{spotlight:{display:"none"},arrow:{display:"none"}},target:"#react-joyride-portal",title:"scroll-icon"},{content:o().createElement(J.Localize,{i18n_default_text:"Track market trends with our interactive charts."}),spotlightPadding:8,offset:4,target:".trade__chart-tooltip",title:o().createElement(J.Localize,{i18n_default_text:"Analyse with charts (4/6)"}),placement:"bottom"},{content:o().createElement(J.Localize,{i18n_default_text:"Scroll left or right to adjust your trade parameters."}),disableScrolling:!1,offset:-4,target:".trade__parameter",title:o().createElement(J.Localize,{i18n_default_text:"Make quick adjustments (5/6)"})},{content:o().createElement(J.Localize,{i18n_default_text:"View your positions here."}),offset:-4,target:".user-guide__anchor",title:o().createElement(J.Localize,{i18n_default_text:"Check your positions (6/6)"})}];function na(){return na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},na.apply(null,arguments)}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ia=function(e){var t=e.should_run,r=e.onFinishGuide,n=oa(o().useState(0),2),a=n[0],i=n[1];return o().createElement(Ko.Ay,{continuous:!0,callback:function(e){var t=e.status,n=e.step;0===e.index&&(n.disableBeacon=!0),[Ko.XQ.FINISHED,Ko.XQ.SKIPPED].includes(t)&&r()},disableCloseOnEsc:!0,disableOverlayClose:!0,disableScrolling:!0,floaterProps:{styles:{arrow:{length:4,spread:8,display:3===a?"none":"inline-flex"}}},run:t,showSkipButton:!0,steps:ra,spotlightPadding:0,scrollToFirstStep:!0,styles:{options:{arrowColor:"var(--component-textIcon-normal-prominent)",overlayColor:"var(--core-color-opacity-black-600)"},spotlight:{borderRadius:"unset"}},stepIndex:a,tooltipComponent:function(e){return o().createElement(ta,na({},e,{setStepIndex:i}))}})};const la=o().memo(ia);function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ua(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ua(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const sa=function(e){var t=e.type,r=ca(o().useState(!0),2),n=r[0],a=r[1],l=o().useCallback((function(e){return(0,i.getUrlBase)("/public/videos/user-onboarding-guide-".concat(t.replaceAll("_","-"),".").concat(e))}),[t]),c=o().useMemo((function(){return l("mp4")}),[l]);return o().createElement("div",{className:(0,Te.A)("guide__player__wrapper",n&&"guide__player__wrapper--is-loading")},n&&o().createElement(Ve.E.Square,{height:"calc(100vw * ".concat(Je,")")}),o().createElement("video",{autoPlay:!0,className:"guide__player","data-testid":"dt_onboarding_guide_video",muted:!0,loop:!0,onLoadedData:function(){return a(!1)},playsInline:!0,preload:"auto"},o().createElement("source",{src:c,type:"video/mp4"}),o().createElement(J.Localize,{i18n_default_text:"Unfortunately, your browser does not support the video."})))};function da(e){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(e)}function fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(r),!0).forEach((function(t){pa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=da(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==da(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var va=function(e){var t=e.type,r=void 0===t?"trade_page":t,n=e.is_dark_mode_on,a=e.callback,i=ya(o().useState(!1),2),l=i[0],c=i[1],u=ya(o().useState(!1),2),s=u[0],d=u[1],f=o().useRef(),m=o().useRef(!1),p=ya(Ne("guide_dtrader_v2",{trade_types_selection:!1,trade_page:!1,positions_page:!1}),2),y=p[0],_=p[1],v="trade_page"===r,h=o().useCallback((function(){d(!1),_(ma(ma({},y),{},pa({},r,!0))),null==a||a()}),[_]),b=function(){m.current||(h(),c(!1))},g=ma({image:o().createElement(sa,{type:n?"".concat(r,"_dark"):r}),title:o().createElement(J.Localize,{i18n_default_text:"View your positions"}),content:o().createElement(J.Localize,{i18n_default_text:"You can view your open and closed positions here. Tap an item for more details."}),button_label:o().createElement(J.Localize,{i18n_default_text:"Got it"}),primaryButtonCallback:b},v?{title:o().createElement(J.Localize,{i18n_default_text:"Welcome to the new Deriv Trader"}),content:o().createElement(J.Localize,{i18n_default_text:"Enjoy a smoother, more intuitive trading experience. Here’s a quick tour to get you started."}),button_label:o().createElement(J.Localize,{i18n_default_text:"Let's begin"}),primaryButtonCallback:function(){m.current=!0,d(!0),c(!1)}}:{});return o().useEffect((function(){return null!=y&&y[r]||(f.current=setTimeout((function(){return c(!0)}),800)),function(){return clearTimeout(f.current)}}),[null==y?void 0:y[r]]),o().createElement(o().Fragment,null,o().createElement(De.M,{isOpened:l,isNonExpandable:!0,isMobile:!0,showHandleBar:!0,shouldCloseModalOnSwipeDown:!0,toggleModal:b,primaryButtonLabel:g.button_label,primaryButtonCallback:g.primaryButtonCallback},o().createElement(De.M.Header,{image:g.image,title:g.title}),o().createElement(De.M.Body,null,g.content)),v&&o().createElement(la,{should_run:s,onFinishGuide:h}))};const ha=o().memo(va);var ba=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),ga=r("../hooks/src/useMFAccountStatus.ts");const Ea=function(e){var t=e.currency,r=e.has_open_accu_contract,n=e.has_no_button_content,a=e.info,l=e.is_multiplier,c=e.is_turbos,u=e.is_vanilla,s=e.is_reverse;if(n)return null;var d=(0,i.getLocalizedBasis)(),f=d.payout,m=d.stake,p=l?m:f,y=function(){var e=a.stake,t=a.obj_contract_basis;return l?e:null==t?void 0:t.value}(),_=!p||!y;return o().createElement(Kt.O,{size:"sm",className:(0,Te.A)("purchase-button__information__wrapper",s&&"purchase-button__information__wrapper--reverse",_&&"purchase-button__information__wrapper--disabled-placeholder"),"data-testid":"dt_purchase_button_wrapper"},!_&&o().createElement(o().Fragment,null,o().createElement(Kt.O,{as:"span",size:"sm",className:(0,Te.A)(!r&&"purchase-button__information__item"),color:"quill-typography__color--prominent"},p),o().createElement(Kt.O,{as:"span",size:"sm",className:(0,Te.A)(!r&&"purchase-button__information__item"),color:"quill-typography__color--prominent"},o().createElement(Ce.Money,{amount:y,currency:t,should_format:!c&&!u,show_currency:!0}))))};var Sa=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneStopwatchRegularIcon.js"),wa=r("../../node_modules/react-transition-group/esm/CSSTransition.js");function Oa(e){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(e)}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Aa.apply(null,arguments)}function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Oa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oa(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ta(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ta(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ja=(0,he.observer)((function(){var e=Ca(o().useState(null),2),t=e[0],r=e[1],n=(0,ba.Y)().isMobile,a=(0,be.E)().addBanner,l=(0,u.A)(),c=l.portfolio,s=c.all_positions,d=c.onClickSell,f=c.open_accu_contract,m=c.active_positions,p=l.client.is_logged_in,y=l.common.services_error,_=l.ui,v=_.is_mf_verification_pending_modal_visible,h=_.setIsMFVericationPendingModal,b=(0,Re.P)(),g=b.contract_type,E=b.currency,S=b.has_open_accu_contract,w=b.is_accumulator,O=b.is_multiplier,A=b.is_purchase_enabled,k=b.is_touch,x=b.is_trade_enabled_v2,C=b.is_turbos,T=b.is_vanilla_fx,j=b.is_vanilla,L=b.proposal_info,P=b.purchase_info,N=b.onPurchaseV2,I=b.symbol,D=b.trade_type_tab,M=b.trade_types,R=Ca(o().useState(w&&S),2),z=R[0],F=R[1],U=Ca(o().useState(450),2),q=U[0],V=U[1],B=(0,Ce.usePrevious)(!!f&&!!m.find((function(e){var t=e.contract_info,r=e.type;return(0,i.isAccumulatorContract)(r)&&t.underlying===I}))),H=(0,ga.A)(),G=/^high_low$/.test(g.toLowerCase()),Y={currency:E,has_open_accu_contract:S,is_multiplier:O,is_turbos:C,is_vanilla:j},W=j||T||C||G||k||w&&!S,$=(0,Mt.H1)(M,g,D),K=w?s.find((function(e){var t=e.contract_info,r=e.type;return(0,i.isAccumulatorContract)(r)&&t.underlying===I&&!t.is_sold})):void 0,J=!(null==K||!K.contract_info)&&((0,i.hasContractEntered)(K.contract_info)&&(0,i.isOpen)(K.contract_info)&&(0,i.isValidToSell)(K.contract_info)),X=J&&K&&(0,i.getIndicativePrice)(K.contract_info)||null,Z=(0,i.getCardLabelsV2)(),Q=ot({services_error:y,is_mf_verification_pending_modal_visible:v}),ee=!J||(null==K?void 0:K.is_sell_requested),te=function(e,t){var r=(0,Be.FN)(g).findIndex((function(e){return e.contract_type===t}));return(r<0?e:r)?"sell":"purchase"},re=function(e,t){return(0,Fo.Dr)(g,I,t),a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){xa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:o().createElement(Sa.A,{iconSize:"sm",className:"trade-notification--purchase",key:"contract-opened"})},e))};return o().useEffect((function(){A&&r(null)}),[A]),o().useEffect((function(){V(!B&&S||B&&!S&&w?450:0),F(!!w&&S)}),[w,S]),o().createElement(o().Fragment,null,o().createElement(wa.A,{in:!z,timeout:q,classNames:"slide",key:"purchase-button",unmountOnExit:!0,mountOnEnter:!0},o().createElement("div",{className:(0,Te.A)("purchase-button__wrapper",{"purchase-button__wrapper__un-auth":!p})},$.map((function(e,a){var l=(null==L?void 0:L[e])||{},c=1===$.length,u=t===a,s=!x||l.has_error||!!P.error&&!Q;return o().createElement(o().Fragment,{key:e},o().createElement(Ar.$n,{color:te(a,e),size:"lg",label:(0,i.getContractTypeDisplay)(e,{isHighLow:G,showButtonName:!0}),fullWidth:!0,className:(0,Te.A)("purchase-button",u&&"purchase-button--loading",c&&"purchase-button--single"),isLoading:u,isOpaque:!0,disabled:s&&!u,onClick:function(){O&&H===i.MT5_ACCOUNT_STATUS.PENDING?h(!0):(r(a),N(e,n,re))}},!u&&o().createElement(Ea,Aa({},Y,{has_no_button_content:W,info:l,is_reverse:!!a}))))})))),o().createElement(wa.A,{in:z,timeout:q,classNames:"slide",key:"sell-button",unmountOnExit:!0,mountOnEnter:!0},o().createElement("div",{className:"purchase-button__wrapper"},o().createElement(Ar.$n,{color:"black-white",size:"lg",label:ee?"".concat(Z.CLOSE):"".concat(Z.CLOSE," ").concat(X," ").concat(E),fullWidth:!0,isOpaque:!0,isLoading:null==K?void 0:K.is_sell_requested,className:"purchase-button purchase-button--single",disabled:!J,onClick:function(){return d(null==K?void 0:K.contract_info.contract_id)}}))))}));const La=ja;const Pa=function(e){var t=e.error_type,r=e.services_error_message,n=function(){switch(t){case Qe:return{title:o().createElement(J.Localize,{i18n_default_text:"Insufficient balance"}),text:r||o().createElement(J.Localize,{i18n_default_text:"An error occurred."})};case et:return{title:o().createElement(J.Localize,{i18n_default_text:"Start trading with us"}),text:o().createElement(J.Localize,{i18n_default_text:"Log in or create a free account to place a trade."})};case tt:return{title:o().createElement(J.Localize,{i18n_default_text:"Account verification required"}),text:o().createElement(J.Localize,{i18n_default_text:"Please submit your proof of identity and proof of address to verify your account and continue trading."})};case rt:return{title:o().createElement(J.Localize,{i18n_default_text:"Pending verification"}),text:o().createElement(J.Localize,{i18n_default_text:"You cannot trade as your documents are still under review. We will notify you by email once your verification is approved."})};default:return{}}}()||{},a=n.title,i=n.text;return o().createElement(o().Fragment,null,o().createElement(Ie.E,{size:"lg",bold:!0,className:"service-error-sheet__body__heading"},a),o().createElement(Ie.E,null,i))};function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Na.apply(null,arguments)}function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Da(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Da(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ma=(0,he.observer)((function(){var e=Ia((0,n.useState)(!1),2),t=e[0],r=e[1],a=(0,u.A)(),l=a.common,c=a.client,s=a.ui,d=s.is_mf_verification_pending_modal_visible,f=s.setIsMFVericationPendingModal,m=c.has_wallet,p=c.is_virtual,y=l.services_error,_=l.resetServicesError,v=(0,Re.P)(),h=v.clearPurchaseInfo,b=v.requestProposal,g=(0,kt.useHistory)(),E=y||{},S=E.code,w=E.message,O=E.type,A=S===Qe,k=S===et&&"buy"===O,x=S===tt,C=(!(0,i.isEmptyObject)(y)||d)&&ot({services_error:y,is_mf_verification_pending_modal_visible:d}),T=function(){if(r(!1),"buy"===y.type){if(A)return;h(),b()}};return(0,n.useEffect)((function(){r(C)}),[C]),(0,n.useEffect)((function(){!t&&S&&_(),t||f(!1)}),[t]),C?o().createElement(De.A.Root,{className:"service-error-sheet",isOpen:t,onClose:T,expandable:!1,position:"left"},o().createElement(De.A.Portal,{showHandlebar:!0,shouldCloseOnDrag:!0},o().createElement("div",{className:"service-error-sheet__body"},o().createElement(Pa,{error_type:A?Qe:k?et:x?tt:d?rt:null,services_error_message:w})),o().createElement(De.A.Footer,Na({className:"service-error-sheet__footer",alignment:"vertical",primaryButtonColor:"coral"},A?{primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Deposit now"}),onAction:function(){var e;_(),p?T():null==g||null===(e=g.push)||void 0===e||e.call(g,m?i.routes.wallets_deposit:i.routes.cashier_deposit)}}}:k?{primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Create free account"}),onAction:function(){_(),(0,i.redirectToSignUp)()}},secondaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Login"}),onAction:function(){_(),(0,i.redirectToLogin)(!1,(0,J.getLanguage)())}}}:x?{primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Submit Proof"}),onAction:function(){_(),g.push(i.routes.proof_of_identity)}}}:d?{primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Got it"}),onAction:function(){_(),f(!1),T()}}}:void 0)))):null}));var Ra=r("../../node_modules/@deriv-com/quill-ui/dist/components/Snackbar/snackbar-controller.js");const za=function(e){var t,r=e.error_fields,n=(0,Re.P)(),o=n.contract_type,a=n.proposal_info,i=n.validation_errors,l=n.trade_type_tab,c=n.trade_types,u=(0,Mt.H1)(c,o,l),s=null!==(t=null==a?void 0:a[u[0]])&&void 0!==t?t:{},d=s.has_error,f=s.error_field,m=s.message;return r.map((function(e){return function(e){var t,r,n,o=(null==i||null===(t=i[e])||void 0===t?void 0:t.length)>0;return{is_error_matching_field:d&&f===e||o,message:null!==(r=null!=m?m:null==i||null===(n=i[e])||void 0===n?void 0:n[0])&&void 0!==r?r:""}}(e)})).find((function(e){return e.is_error_matching_field}))||{is_error_matching_field:!1,message:""}};const Fa=(0,he.observer)((function(e){var t=e.error_fields,r=e.should_show_snackbar,n=(0,u.A)().client.is_logged_in,a=(0,Dr.d)().addSnackbar,i=za({error_fields:t}),l=i.is_error_matching_field,c=i.message;return o().useEffect((function(){l&&r&&a({message:c,status:"fail",hasCloseButton:!0,hasFixedHeight:!1,style:{marginBottom:n?"48px":"-8px",width:"calc(100% - var(--core-spacing-800)"}})}),[l,r]),o().createElement(Ra.C,null)}));var Ua=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedPresentationScreenSmRegularIcon.js"),qa=r("./src/AppV2/Utils/contract-description-utils.tsx");const Va=function(e){var t=e.contract_type,r=e.term,n=e.onClose;return o().createElement(De.A.Root,{isOpen:!!r,onClose:n,position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Content,{className:"definition__wrapper"},o().createElement(ur.D.H4,{className:"definition__title"},r),o().createElement(Ie.E,{as:"div"},(0,qa.OG)({term:r,contract_type:t}))),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Got it"}),onAction:n},className:"definition__button"})))};var Ba=r("../../node_modules/@deriv-com/quill-ui/dist/components/Chip/index.js"),Ha=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("accumulators-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/accumulators-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Ga=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("multipliers-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/multipliers-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Ya=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("vanillas-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/vanillas-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Wa=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("turbos-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/turbos-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),$a=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("rise-fall-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/rise-fall-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Ka=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("higher-lower-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/higher-lower-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Ja=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("touch-no-touch-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/touch-no-touch-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Xa=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("matches-differs-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/matches-differs-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Za=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("even-odd-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/even-odd-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))(),Qa=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return r.e("over-under-trade-description").then(r.bind(r,"./src/AppV2/Components/Guide/Description/ContractDescription/over-under-trade-description.tsx"))}))}),(function(){return o().createElement(Ce.Loading,{is_fullscreen:!1})}))();const ei=function(e){var t,r=e.contract_type,n=e.onTermClick;switch(r){case Mt.OA.ACCUMULATORS:t=o().createElement(Ha,{onTermClick:n});break;case Mt.OA.RISE_FALL:t=o().createElement($a,null);break;case Mt.OA.MULTIPLIERS:t=o().createElement(Ga,{onTermClick:n});break;case Mt.OA.VANILLAS:t=o().createElement(Ya,{onTermClick:n});break;case Mt.OA.TURBOS:t=o().createElement(Wa,{onTermClick:n});break;case Mt.OA.HIGHER_LOWER:t=o().createElement(Ka,null);break;case Mt.OA.TOUCH_NO_TOUCH:t=o().createElement(Ja,null);break;case Mt.OA.MATCHES_DIFFERS:t=o().createElement(Xa,null);break;case Mt.OA.EVEN_ODD:t=o().createElement(Za,null);break;case Mt.OA.OVER_UNDER:t=o().createElement(Qa,null);break;default:t=o().createElement(Ie.E,{as:"p"},o().createElement(J.Localize,{i18n_default_text:"Description not found."}))}return o().createElement(o().Fragment,null,t)};var ti=r("../../node_modules/@cloudflare/stream-react/dist/stream-react.esm.js"),ri=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedPlayMdFillIcon.js");const ni=function(e){var t=e.contract_type,r=e.toggleVideoPlayer,n=e.video_src;return o().createElement("div",{className:"guide-video__wrapper",onClick:r,onKeyDown:r},o().createElement("div",{className:"guide-video__preview","data-testid":"dt_video_preview"},o().createElement(ti.Z,{className:"guide-video",letterboxColor:"transparent",muted:!0,preload:"auto",responsive:!1,src:n,width:"112px",height:"73px"}),o().createElement("div",{className:"guide-video__preview__icon__wrapper"},o().createElement(ri.A,{className:"guide-video__preview__icon"}))),o().createElement("div",{className:"guide-video__description"},o().createElement(Kt.O,{bold:!0,color:"quill-typography__color--default"},o().createElement(J.Localize,{i18n_default_text:"How to trade "}),t,"?"),o().createElement(Kt.O,{color:"quill-typography__color--default"},o().createElement(J.Localize,{i18n_default_text:"Watch this video to learn about this trade type."}))))};const oi=function(e){var t=e.contract_list,r=e.onChipSelect,n=e.onTermClick,a=e.selected_contract_type,i=e.show_guide_for_selected_contract,l=e.show_description_in_a_modal,c=void 0===l||l,u=e.toggleVideoPlayer,s=e.video_src;return o().createElement(o().Fragment,null,!i&&o().createElement("div",{className:"guide__menu"},t.map((function(e){var t=e.tradeType,n=e.id;return o().createElement(Ba.v.Selectable,{key:n,onChipSelect:function(){return r(n)},selected:n===a},o().createElement(Ie.E,{size:"sm"},t))}))),o().createElement("div",{className:(0,Te.A)("guide__contract-description",{"guide__contract-description--without-btn":!c}),key:a},o().createElement(ei,{contract_type:a,onTermClick:n}),o().createElement(ni,{contract_type:a,toggleVideoPlayer:u,video_src:s})))};function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ii(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ii(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var li=function(e){var t=e.contract_list,r=e.is_dark_mode_on,n=e.is_open,a=e.onChipSelect,l=e.onClose,c=e.onTermClick,u=e.selected_contract_type,s=e.show_guide_for_selected_contract,d=e.show_description_in_a_modal,f=void 0===d||d,m=ai(o().useState(!1),2),p=m[0],y=m[1],_=o().useRef(null),v=(0,qa.gl)(u,r),h=function(e){(0,i.clickAndKeyEventHandler)((function(){return y(!p)}),e)},b={contract_list:t,onChipSelect:a,onTermClick:c,selected_contract_type:u,show_guide_for_selected_contract:s,show_description_in_a_modal:f,toggleVideoPlayer:h,video_src:v};return o().useEffect((function(){_.current&&(p?_.current.showModal():_.current.close())}),[p]),o().createElement(o().Fragment,null,f?o().createElement(De.A.Root,{isOpen:n,onClose:l,position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Content,{className:"guide__wrapper__content"},o().createElement(ur.D.H4,{className:"guide__title"},s?u:o().createElement(J.Localize,{i18n_default_text:"Trade types"})),o().createElement(oi,b)),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Got it"}),onAction:l},className:"guide__button"}))):o().createElement("div",{className:"guide__wrapper__content--separate"},o().createElement(oi,b)),p&&o().createElement("dialog",{ref:_,onClick:h,onKeyDown:h,className:"modal-player"},o().createElement("div",{onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}},o().createElement(Ce.VideoPlayer,{className:"modal-player__wrapper",data_testid:"dt_video_player",height:"180px",is_mobile:!0,increased_drag_area:!0,src:v}))))};const ci=o().memo(li);function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||di(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e){return function(e){if(Array.isArray(e))return fi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||di(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){if(e){if("string"==typeof e)return fi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fi(e,t):void 0}}function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mi=(0,he.observer)((function(e){var t,r,n=e.has_label,a=e.is_open_by_default,i=e.show_guide_for_selected_contract,l=e.show_trigger_button,c=void 0===l||l,s=e.show_description_in_a_modal,d=void 0===s||s,f=(0,u.A)(),m=f.ui.is_dark_mode_on,p=f.common.current_language,y=(0,Re.P)().contract_type,_=null!==(t=null===(r=Mt.Ou.find((function(e){return e.for.includes(y)})))||void 0===r?void 0:r.id)&&void 0!==t?t:"",v=Ut().trade_types,h=[Mt.OA.RISE_FALL,Mt.OA.ACCUMULATORS,Mt.OA.MULTIPLIERS,Mt.OA.VANILLAS,Mt.OA.TURBOS,Mt.OA.HIGHER_LOWER,Mt.OA.TOUCH_NO_TOUCH,Mt.OA.MATCHES_DIFFERS,Mt.OA.EVEN_ODD,Mt.OA.OVER_UNDER],b=Mt.Ou.filter((function(e){return v.some((function(t){return t.text===e.id}))})),g=si(b).sort((function(e,t){return h.findIndex((function(t){return t===e.id}))-h.findIndex((function(e){return e===t.id}))})),E=ui(o().useState(a),2),S=E[0],w=E[1],O=ui(o().useState(_),2),A=O[0],k=O[1],x=ui(o().useState(""),2),C=x[0],T=x[1],j=o().useCallback((function(e){return k(null!=e?e:"")}),[]),L=o().useCallback((function(){return w(!1)}),[]);return o().useEffect((function(){i&&k(_)}),[i,_]),o().useEffect((function(){w(S)}),[a]),o().createElement(o().Fragment,null,c&&o().createElement(Ar.$n,{color:m?"white":"black",icon:o().createElement(Ua.A,{key:"guide-button-icon"}),onClick:function(){(0,Fo.YL)(y,"main_trade_page"),w(!0)},variant:n?"secondary":"tertiary",key:p},n&&o().createElement(Ie.E,{size:"sm",bold:!0,color:"quill-typography__color--prominent"},o().createElement(J.Localize,{i18n_default_text:"Guide"}))),o().createElement(ci,{contract_list:g,is_dark_mode_on:m,is_open:S,onChipSelect:function(e){var t,r,n=g.find((function(t){return t.id===e}));(0,Fo.YL)(null!==(t=null==n||null===(r=n.for)||void 0===r?void 0:r[0])&&void 0!==t?t:"","trade_type_page"),j(e)},onClose:L,onTermClick:T,selected_contract_type:A,show_guide_for_selected_contract:i,show_description_in_a_modal:d}),o().createElement(Va,{contract_type:A,term:C,onClose:function(){return T("")}}))}));const pi=mi;var yi=function(e){var t=e.children,r=e.is_minimized,n=e.is_minimized_visible,a=r&&n;return o().createElement("section",{className:(0,Te.A)("",{"trade-params--minimized":a,"trade-params":!a})},!a&&o().createElement("div",{className:"trade-params__title"},o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Set your trade"})),o().createElement(pi,{has_label:!0,show_guide_for_selected_contract:!0})),t)};const _i=o().memo(yi);const vi=(0,he.observer)((function(){var e,t=(0,Re.P)(),r=t.currency,n=t.is_market_closed,a=t.maximum_payout;return(null===(e=t.proposal_info[i.CONTRACT_TYPES.ACCUMULATOR])||void 0===e?void 0:e.has_error)?null:o().createElement("div",{className:"accumulators-info__wrapper"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)(n&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"Max. payout"})),a?o().createElement(Ie.E,{size:"sm",bold:!0,className:(0,Te.A)(n&&"trade-params__text--disabled")},o().createElement(Ce.Money,{amount:a,show_currency:!0,currency:r})):o().createElement(Ce.Skeleton,{width:100,height:14}))}));var hi=r("../../node_modules/@deriv-com/quill-ui/dist/components/SelectionControl/toggle-switch/index.js"),bi=r("./src/Stores/Modules/Trading/Helpers/allow-equals.ts");function gi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ei(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ei(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Si=(0,he.observer)((function(){var e=(0,Re.P)(),t=e.contract_types_list,r=e.contract_start_type,n=e.duration_unit,a=e.expiry_type,l=e.is_equal,c=e.is_market_closed,u=e.onChange,s=gi(o().useState(!1),2),d=s[0],f=s[1],m=(0,bi.jZ)(t,n,r),p=(0,bi.KM)(t),y=function(e){c||(0,i.clickAndKeyEventHandler)((function(){return f(!0)}),e)},_=function(){return f(!1)};return(m||"endtime"===a)&&p?o().createElement(o().Fragment,null,o().createElement("div",{className:"allow-equals__wrapper"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)("allow-equals__title",c&&"allow-equals__title--disabled"),onClick:y,onKeyDown:y},o().createElement(J.Localize,{i18n_default_text:"Allow equals"})),o().createElement(hi.j,{checked:!!l,onChange:function(e){u({target:{name:"is_equal",value:Number(e)}}),f(!1)},disabled:c})),o().createElement(De.A.Root,{isOpen:d,onClose:_,position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Content,{className:"allow-equals__definition__wrapper"},o().createElement(ur.D.H4,{className:"allow-equals__definition__title"},o().createElement(J.Localize,{i18n_default_text:"Allow equals"})),o().createElement(Ie.E,{as:"div"},o().createElement(J.Localize,{i18n_default_text:"Win payout if exit spot is also equal to entry spot."}))),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Got it"}),onAction:_},className:"allow-equals__button"})))):null}));var wi=r("../../node_modules/@deriv-com/quill-ui/dist/components/Input/text-field/index.js");function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oi.apply(null,arguments)}function Ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ki(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ki(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const xi=function(e){var t=e.classname,r=e.current_index,n=e.header,a=e.is_swipeable,i=e.is_infinite_loop,l=e.onNextButtonClick,c=e.onPreviousButtonClick,u=e.pages,s=e.previous_icon,d=e.title,f=e.next_icon,m=e.setCurrentIndex,p=Ai(o().useState(0),2),y=p[0],_=p[1],v=n,h=void 0!==r&&void 0!==m,b=h?r:y,g="AR"===(0,J.getLanguage)(),E=function(){if(i||!(b+1>=u.length)){var e=(b+1)%u.length;h?null==m||m(e):_(e),null==l||l()}},S=function(){if(i||!(b-1<0)){var e=(b-1+u.length)%u.length;h?null==m||m(e):_(e),null==c||c()}},w=(0,Qo.useSwipeable)({onSwipedLeft:E,onSwipedRight:S});return o().createElement(o().Fragment,null,v&&o().createElement(v,{current_index:b,onNextClick:E,onPrevClick:S,previous_icon:s,next_icon:f,title:d}),o().createElement("ul",Oi({className:(0,Te.A)("carousel",t),"data-testid":"dt_carousel"},a?w:{}),u.map((function(e){var t=e.component,r=e.id;return o().createElement("li",{className:"carousel__item",style:{transform:"translateX(".concat(100*b*(g?1:-1),"%)")},key:r},t)}))))};const Ci=function(e){var t=e.isDays;return o().createElement(De.A.Content,{className:"barrier-params__description-content"},t?o().createElement("div",{className:"content-section"},o().createElement(Ie.E,{bold:!0},o().createElement(J.Localize,{i18n_default_text:"Fixed barrier:"})),o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Barrier set at specific price."}))):o().createElement(o().Fragment,null,o().createElement("div",{className:"content-section"},o().createElement(Ie.E,{bold:!0},o().createElement(J.Localize,{i18n_default_text:"Above spot:"})),o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Barrier set above spot price."}))),o().createElement("div",{className:"content-section"},o().createElement(Ie.E,{bold:!0},o().createElement(J.Localize,{i18n_default_text:"Below spot:"})),o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Barrier set below spot price."}))),o().createElement("div",{className:"content-section"},o().createElement(Ie.E,{bold:!0},o().createElement(J.Localize,{i18n_default_text:"Fixed barrier:"})),o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Barrier set at specific price."})))))};var Ti=r("../../node_modules/@deriv-com/quill-ui/dist/components/Input/text-field-addon/index.js");function ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Li(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Li(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Pi=[{name:o().createElement(J.Localize,{i18n_default_text:"Above spot"})},{name:o().createElement(J.Localize,{i18n_default_text:"Below spot"})},{name:o().createElement(J.Localize,{i18n_default_text:"Fixed barrier"})}];const Ni=(0,he.observer)((function(e){var t=e.setInitialBarrierValue,r=e.isDays,n=e.onClose,a=(0,Re.P)(),i=a.barrier_1,l=a.onChange,c=a.validation_errors,u=a.tick_data,s=a.setV2ParamsInitialValues,d=ji(o().useState(0),2),f=d[0],m=d[1],p=ji(o().useState(!1),2),y=p[0],_=p[1],v=ji(o().useState(i),2),h=v[0],b=v[1],g=ji(o().useState(!1),2),E=g[0],S=g[1],w=(null!=u?u:{}).pip_size,O=o().useRef(null),A=(null==c?void 0:c.barrier_1.length)>0&&(i||y);o().useEffect((function(){t(i),s({name:"barrier_1",value:i}),i.includes("-")?m(1):i.includes("+")?m(0):m(2),l({target:{name:"barrier_1",value:i}})}),[]),o().useEffect((function(){var e=O.current,t=function(){S(!(!e||!e.contains(document.activeElement)))};return document.addEventListener("focusin",t),document.addEventListener("focusout",t),function(){document.removeEventListener("focusin",t),document.removeEventListener("focusout",t)}})),o().useEffect((function(){E&&_(!1)}),[E]);var k=function(e){var t=e.target.value;0===f&&(t="+".concat(t)),1===f&&(t="-".concat(t)),l({target:{name:"barrier_1",value:t}}),s({name:"barrier_1",value:t}),b(t)};return o().createElement(o().Fragment,null,o().createElement(De.A.Content,null,o().createElement("div",{className:"barrier-params"},!r&&o().createElement("div",{className:"barrier-params__chips"},Pi.map((function(e,t){return o().createElement(Ba.v.Selectable,{key:t,onClick:function(){return function(e){m(e);var t=i.replace(/^[+-]/,""),r=h.replace(/^[+-]/,"");0===e?r="+".concat(r):1===e?r="-".concat(r):2===e&&(r="",b(t)),(r.startsWith("+")||r.startsWith("-"))&&"."===r.charAt(1)?r="".concat(r.charAt(0),"0").concat(r.slice(1)):r.startsWith(".")&&(r="0".concat(r)),l({target:{name:"barrier_1",value:r}})}(t)},selected:t==f},o().createElement(Ie.E,{size:"sm"},e.name))}))),o().createElement("div",null,2===f||r?o().createElement(wi.A,{customType:"commaRemoval",name:"barrier_1",noStatusIcon:!0,status:A?"error":"neutral",shouldRound:!1,value:i,allowDecimals:!0,decimals:w,allowSign:!1,inputMode:"decimal",regex:/[^0-9.,]/g,textAlignment:"center",onChange:k,placeholder:(0,J.localize)("Price"),variant:"fill",message:A?null==c?void 0:c.barrier_1[0]:"",ref:O}):o().createElement(Ti.M,{fillAddonBorderColor:"var(--semantic-color-slate-solid-surface-frame-mid)",customType:"commaRemoval",name:"barrier_1",noStatusIcon:!0,addonLabel:0==f?"+":"-",decimals:w,value:i.replace(/[+-]/g,""),allowDecimals:!0,inputMode:"decimal",allowSign:!1,status:A?"error":"neutral",shouldRound:!1,onChange:k,placeholder:(0,J.localize)("Distance to spot"),regex:/[^0-9.,]/g,variant:"fill",message:A?null==c?void 0:c.barrier_1[0]:"",ref:O}),(0==(null==c?void 0:c.barrier_1.length)||!A)&&o().createElement("div",{className:"barrier-params__error-area"})),o().createElement("div",{className:"barrier-params__current-spot-wrapper"},o().createElement(Ie.E,{size:"sm"},o().createElement(J.Localize,{i18n_default_text:"Current spot"})),o().createElement(Ie.E,{size:"sm"},null==u?void 0:u.quote)))),o().createElement(De.A.Footer,{alignment:"vertical",shouldCloseOnPrimaryButtonClick:!1,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){0===c.barrier_1.length?(n(!0),k({target:{name:"barrier_1",value:i.replace(/[+-]/g,"")}})):_(!0)}}}))}));var Ii=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedCircleInfoMdRegularIcon.js"),Di=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedArrowLeftMdRegularIcon.js");const Mi=function(e){var t=e.current_index,r=e.onNextClick,n=e.onPrevClick,a=e.previous_icon,i=e.next_icon,l=e.title,c=null!=i?i:Ii.A,u=null!=a?a:Di.A;return o().createElement(De.A.Header,{className:"carousel-controls",title:l,icon:t?o().createElement(u,{onClick:n}):o().createElement(c,{onClick:r}),iconPosition:t?"left":"right"})};function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Fi=(0,he.observer)((function(e){var t,r,n=e.is_minimized,a=(0,Re.P)(),i=a.barrier_1,l=a.onChange,c=a.duration_unit,u=a.is_market_closed,s=a.setV2ParamsInitialValues,d=a.v2_params_initial_values,f=a.validation_errors,m=a.proposal_info,p=a.trade_type_tab,y=Ri(o().useState(!1),2),_=y[0],v=y[1],h=Ri(o().useState(""),2),b=h[0],g=h[1],E="d"==c,S=f.barrier_1.length>0||(null==m||null===(t=m[p])||void 0===t?void 0:t.has_error)&&"barrier"===(null==m||null===(r=m[p])||void 0===r?void 0:r.error_field),w=(0,Dr.d)().addSnackbar,O=Ri(o().useState(!1),2),A=O[0],k=O[1],x=o().useCallback((function(){_&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||l({target:{name:"barrier_1",value:b}}),s({value:"",name:"barrier_1"}),v(!1))}),[b,_]);o().useEffect((function(){var e,t,r,o=null==m||null===(e=m[p])||void 0===e?void 0:e.has_error,a=null==m||null===(t=m[p])||void 0===t?void 0:t.error_field,i=null==m||null===(r=m[p])||void 0===r?void 0:r.message;!o||"barrier"!==a||A||_||n||(w({message:i,hasCloseButton:!0,status:"fail",style:{marginBottom:"48px"}}),k(!0))}),[m]),o().useEffect((function(){_&&k(!1)}),[_]);var C=[{id:1,component:o().createElement(Ni,{isDays:E,setInitialBarrierValue:g,onClose:x})},{id:2,component:o().createElement(Ci,{isDays:E})}];return o().createElement(o().Fragment,null,o().createElement(wi.A,{className:(0,Te.A)("trade-params__option",n&&"trade-params__option--minimized"),disabled:u,variant:"fill",readOnly:!0,noStatusIcon:!0,label:o().createElement(J.Localize,{i18n_default_text:"Barrier",key:"barrier".concat(n?"-minimized":"")}),value:d.barrier_1||i,onClick:function(){return v(!0)},status:S&&!_?"error":void 0}),o().createElement(De.A.Root,{isOpen:_,onClose:x,position:"left",expandable:!1,shouldBlurOnClose:_},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{header:Mi,title:o().createElement(J.Localize,{i18n_default_text:"Barrier"}),pages:C}))))}));var Ui=(0,he.observer)((function(){var e,t=(0,Re.P)(),r=t.barrier_1,n=t.contract_type,a=t.is_market_closed;return(null===(e=t.proposal_info[n.toUpperCase()])||void 0===e?void 0:e.has_error)?null:o().createElement("div",{className:"barrier-info__container"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)(a&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"Barrier"})),r?o().createElement(Ie.E,{size:"sm",bold:!0,className:(0,Te.A)(a&&"trade-params__text--disabled")},r):o().createElement(Ce.Skeleton,{width:50,height:14}))}));const qi=Ui;const Vi=function(e){var t=e.duration_units_list,r=e.onChangeUnit,n=e.unit,a=t.length>1;return a?o().createElement("div",{className:"duration-container__chips"},t.map((function(e,t){return"d"!==e.value&&o().createElement(Ba.v.Selectable,{key:"".concat(e.text,"-").concat(t),selected:n==e.value,className:"duration-container__chips__chip",onClick:function(){return r(e.value)}},o().createElement(Ie.E,{size:"sm"},e.text))})),a&&o().createElement(Ba.v.Selectable,{key:"end-time",selected:"d"===n,className:"duration-container__chips__chip",onClick:function(){return r("d")}},o().createElement(Ie.E,{size:"sm"},o().createElement(J.Localize,{i18n_default_text:"End Time"})))):o().createElement(o().Fragment,null)};var Bi=r("../../node_modules/@deriv-com/quill-ui/dist/components/Atom/WheelPicker/wheel-picker/index.js");function Hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Yi=function(e){var t,r,a=e.setWheelPickerValue,i=e.selected_hour,l=e.selected_time,c=e.duration_min_max,u=Hi((0,n.useState)([]),2),s=u[0],d=u[1],f=Hi((0,n.useState)([]),2),m=f[0],p=f[1];(0,n.useEffect)((function(){var e=Math.max(c.intraday.min,3600),t=c.intraday.max,r=Math.max(1,Math.ceil(e/3600)),n=Math.floor(t/3600),o=Array.from({length:n-r+1},(function(e,t){return{label:"".concat(t+r," ").concat((0,J.localize)("h")),value:t+r}}));d(o),y(i[0]||r,e,t)}),[c,i]);var y=function(e,t,r){var n=0,o=59;e===Math.ceil(t/3600)&&(n=Math.ceil(t%3600/60)),e===Math.floor(r/3600)&&(o=Math.floor(r%3600/60)),n>0&&3600*e>=t&&(n=0);var a=Array.from({length:o-n+1},(function(e,t){return{label:"".concat(t+n," ").concat((0,J.localize)("min")),value:t+n}}));p(a)},_=function(e,t){var r,n=e.find((function(e){return e.value===t}));return n?n.label:(null===(r=e[0])||void 0===r?void 0:r.label)||"1 ".concat((0,J.localize)("h"))};return o().createElement(Bi.N,{data:[s,m],defaultValue:[_(s,i[0]),_(m,l[1])],containerHeight:"268px",inputValues:[i[0]||(null===(t=s[0])||void 0===t?void 0:t.value),l[1]||(null===(r=m[0])||void 0===r?void 0:r.value)],setInputValues:function(e,t){a(e,t),0===e&&y(Number(t),c.intraday.min,c.intraday.max)}})};const Wi=(0,he.observer)((function(e){var t=e.unit,r=e.setWheelPickerValue,n=e.selected_hour,a=e.selected_time,i=(0,Re.P)(),l=i.duration_min_max,c=i.duration_units_list,u=o().useMemo((function(){return(0,Be.nw)(t,l)}),[t,l]);return o().createElement("div",{className:(0,Te.A)("duration-container__wheel-picker-container",{"duration-container__wheel-picker-container__single":1==c.length&&t!==Be.mM.DAYS})},t!==Be.mM.HOURS?o().createElement(Bi.N,{data:u,defaultValue:[String(a)],containerHeight:t===Be.mM.DAYS?"228px":1===c.length?"230px":"268px",inputValues:a,setInputValues:r}):o().createElement(Yi,{setWheelPickerValue:r,selected_hour:n,selected_time:a,duration_min_max:l}))}));var $i=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedCalendarSmRegularIcon.js"),Ki=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedClockThreeSmRegularIcon.js"),Ji=r("../../node_modules/@deriv-com/quill-ui/dist/components/Atom/Calendar/index.js"),Xi=r("./src/Stores/Modules/Trading/Helpers/contract-type.ts");function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function Qi(){Qi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Zi(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Zi(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function el(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function tl(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){el(a,n,o,i,l,"next",e)}function l(e){el(a,n,o,i,l,"throw",e)}i(void 0)}))}}function rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ol=function(e){var t=e.start_date,r=e.end_date,a=e.setEndDate,l=rl(o().useState([]),2),c=l[0],u=l[1],s=(0,Re.P)().symbol,d=(0,i.useIsMounted)(),f=o().useCallback(tl(Qi().mark((function e(){var t,r,n,o=arguments;return Qi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:(0,i.toMoment)().format("YYYY-MM-DD"),r=[],e.next=4,Xi.h.getTradingEvents(t,s);case 4:null==(n=e.sent)||n.forEach((function(e){-1!==e.dates.split(", ").indexOf("Fridays")&&(r=[6,0])})),d()&&u(r);case 7:case"end":return e.stop()}}),e)}))),[d,s]);(0,n.useEffect)((function(){f()}),[]);return o().createElement("div",{className:"duration-datepicker duration-container__date-picker"},o().createElement(Ji.l,{className:"date-picker",hasFixedWidth:!1,minDate:new Date(t),maxDate:new Date((new Date).setFullYear((new Date).getFullYear()+1)),view:"month",value:r,tileDisabled:function(e){var t=e.date.getDay();return c.includes(t)},onChange:function(e){e&&e instanceof Date&&a(e)},wrapperClassName:"duration-container__date-picker__sheet"}))};var al=r("../../node_modules/@deriv-com/quill-ui/dist/components/Atom/WheelPicker/time-wheel-picker/index.js");const il=function(e){var t=e.end_time,r=e.setEndTime,n=e.current_gmt_time,a=e.adjusted_start_time;return o().createElement("div",{className:"duration-container__time-picker"},o().createElement(al.I,{is12Hour:!1,startTimeIn24Format:a,minutesInterval:5,selectedTime:t,setSelectedValue:function(e){return r(e)},containerHeight:"256px",hoursInterval:1}),o().createElement("div",{className:"duration-container__endtime"},o().createElement(Kt.O,{color:"quill-typography__color--subtle"},o().createElement(J.Localize,{i18n_default_text:"Current time"})),o().createElement(Ie.E,{size:"sm"},"".concat(n," GMT"))))};var ll=r("./src/Stores/Modules/Trading/Helpers/end-time.ts");function cl(e){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(e)}function ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(r),!0).forEach((function(t){dl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ul(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dl(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=cl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ml(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ml(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pl=function(e){var t=fl(e.split(":").map(Number),2);return 60*t[0]+t[1]};const yl=function(e){var t,r=e.end_time,a=e.expiry_time_input,l=e.saved_expiry_date_v2,c=e.setEndTime,s=e.setExpiryTimeInput,d=e.setUnsavedExpiryDateV2,f=e.unsaved_expiry_date_v2,m=fl(o().useState(""),2),p=m[0],y=m[1],_=fl(o().useState(!1),2),v=_[0],h=_[1],b=fl(o().useState(!1),2),g=b[0],E=b[1],S=fl((0,n.useState)(!1),2),w=S[0],O=S[1],A=fl((0,n.useState)(!1),2),k=A[0],x=A[1],C=fl((0,n.useState)(new Date(l||f)),2),T=C[0],j=C[1],L=fl((0,n.useState)(),2),P=L[0],N=L[1],I=fl((0,n.useState)(),2),D=I[0],M=I[1],R=(0,u.A)().common,z=fl((0,n.useState)(null),2),F=z[0],U=z[1],q=R.server_time,V=(0,Re.P)(),B=V.barrier_1,H=V.contract_type,G=V.duration_min_max,Y=V.duration_units_list,W=V.duration,$=V.expiry_date,K=V.is_turbos,X=V.market_close_times,Z=V.market_open_times,Q=V.start_date,ee=V.start_time,te=V.symbol,re=V.tick_data,ne=V.trade_types,oe=(0,Re.P)(),ae=(0,Dr.d)().addSnackbar,ie=sl(sl({duration_unit:"d",duration:F||W,expiry_type:"duration",contract_type:H,basis:"stake",amount:"5",symbol:te},P&&{payout_per_point:P}),D&&{barrier:D}),le=(0,Be.hi)({new_values:ie,trade_store:oe,trade_type:Object.keys(ne)[0]}),ce=Dt(["proposal",JSON.stringify(F),JSON.stringify(P),JSON.stringify(D)],sl(sl({},le),{},{symbol:te},!B||K||D?{}:{barrier:Math.round(null==re?void 0:re.quote)}),{enabled:w}).data;(0,n.useEffect)((function(){if(ce){var e,t,r,n,a,i,l;if("ContractBuyValidationError"===(null==ce||null===(e=ce.error)||void 0===e?void 0:e.code)){var c=ce.error.details;if("payout_per_point"===(null==c?void 0:c.field)&&null!=c&&c.payout_per_point_choices){var u=null==c?void 0:c.payout_per_point_choices[0];return N(u),void O(!0)}if("barrier"===(null==c?void 0:c.field)&&null!=c&&c.barrier_choices){var d=null==c?void 0:c.barrier_choices[0];return M(d),void O(!0)}}if(null!=ce&&null!==(t=ce.error)&&void 0!==t&&t.message&&"duration"===(null==ce||null===(r=ce.error)||void 0===r||null===(n=r.details)||void 0===n?void 0:n.field))ae({message:o().createElement(J.Localize,{i18n_default_text:null==ce||null===(i=ce.error)||void 0===i?void 0:i.message}),status:"fail",hasCloseButton:!0,style:{marginBottom:"48px"}}),x(!0);else x(!1);if(null!=ce&&null!==(a=ce.proposal)&&void 0!==a&&a.date_expiry)s(new Date(1e3*(null==ce||null===(l=ce.proposal)||void 0===l?void 0:l.date_expiry)).toISOString().split("T")[1].substring(0,8));f=["proposal",JSON.stringify(F),JSON.stringify(P),JSON.stringify(D)],m=It(f),Pt[m]=null,O(!1)}var f,m}),[ce,s,d]);var ue=(0,i.toMoment)($),se=Z.map((function(e){return(0,i.setTime)(ue.clone(),e)})),de=X.map((function(e){return(0,i.setTime)(ue.clone(),e)})),fe=(0,i.toMoment)(q),me=(null===(t=(0,ll.h)(fe.clone(),se,de).start[0])||void 0===t?void 0:t.clone().add(5,"minutes").format("HH:mm"))||(0,Be.nz)(5),pe=new Date(f).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),ye=(new Date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});o().useEffect((function(){var e=function(){var e=(new Date).toLocaleTimeString("en-GB",{timeZone:"GMT",hour12:!1});y(e)};e();var t=setInterval(e,1e3);return""!==r&&pl(r)<pl(me)&&5===Math.abs(pl(me)-pl(r))&&!g&&c(me),function(){return clearInterval(t)}}),[r,me]),(0,n.useEffect)((function(){pe!==ye||r||c(me)}),[f]);var _e,ve=(0,i.hasIntradayDurationUnit)(Y),he=new Date(Date.parse("".concat(pe," 00:00:00"))),be=he.getFullYear()===q.year()&&he.getMonth()===q.month()&&he.getDate()===q.date();_e=(!!Q||be)&&ve;return o().createElement("div",{className:"duration-container__days-input"},o().createElement(wi.A,{variant:"fill",readOnly:!0,name:"date","data-testid":"dt_date_input",textAlignment:"center",value:pe,disabled:0===Y.filter((function(e){return"d"===e.value})).length,onClick:function(){h(!0)},leftIcon:o().createElement($i.A,{width:24,height:24})}),o().createElement(wi.A,{variant:"fill",readOnly:!0,textAlignment:"center",name:"time",value:"".concat((_e?r:a)||"23:59:59"," GMT"),disabled:!_e,onClick:function(){E(!0)},leftIcon:o().createElement(Ki.A,{width:24,height:24})}),o().createElement("div",{className:"duration-container__days-input__expiry"},o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},o().createElement(J.Localize,{i18n_default_text:"Expiry"})),o().createElement(Ie.E,{size:"sm"},"\n                ".concat(pe," ").concat((pe===ye?r:a)||"23:59:59"," GMT"))),o().createElement(De.A.Root,{isOpen:v||g,onClose:function(){h(!1),E(!1),x(!1)},position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:v?o().createElement(J.Localize,{i18n_default_text:"Pick an end date"}):o().createElement(J.Localize,{i18n_default_text:"Pick an end time"})}),v&&o().createElement(ol,{start_date:(0,Be.bg)(Y,q,ee,G),end_date:T,setEndDate:function(e){var t=e.getTime()-(new Date).getTime(),r=Math.ceil(t/864e5);if(U(Number(r)),j(e),0==r){c(me);var n=(new Date).toISOString().split("T")[0];d(n)}else c(""),d("".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")));O(!0)}}),g&&o().createElement(il,{setEndTime:c,end_time:r,current_gmt_time:p,adjusted_start_time:me}),o().createElement(De.A.Footer,{alignment:"vertical",shouldCloseOnPrimaryButtonClick:!1,isPrimaryButtonDisabled:k,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Done"}),onAction:function(){k||(h(!1),E(!1),new Date(f).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})!==ye&&c(""),pl(me)>pl(r)&&c(me))}}}))))};function _l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var hl=(0,he.observer)((function(e){var t=e.end_time,r=e.expiry_time_string,a=e.saved_expiry_date_v2,i=e.selected_hour,l=e.setEndTime,c=e.setExpiryTimeString,u=e.setSavedExpiryDateV2,s=e.setSelectedHour,d=e.setUnit,f=e.setUnsavedExpiryDateV2,m=e.unit,p=e.unsaved_expiry_date_v2,y=(0,Re.P)(),_=y.duration,v=y.duration_units_list,h=y.onChangeMultiple,b=_l((0,n.useState)([_]),2),g=b[0],E=b[1],S=_l(o().useState(r),2),w=S[0],O=S[1];o().useEffect((function(){f(a||p)}),[]);var A=o().useCallback((function(e){d(e),E([]),e!==Be.mM.HOURS&&s([])}),[d,s]);return o().createElement("div",{className:"duration-container"},o().createElement(De.A.Header,{title:o().createElement(J.Localize,{i18n_default_text:"Duration"})}),o().createElement(Vi,{duration_units_list:v,onChangeUnit:A,unit:m}),m!==Be.mM.DAYS&&o().createElement(Wi,{unit:m,setWheelPickerValue:function(e,t){var r=Number(t);if(m===Be.mM.HOURS){var n=i;n[e]=r,s(n)}else E([r])},selected_hour:i,selected_time:g}),m===Be.mM.DAYS&&o().createElement(yl,{end_time:t,expiry_time_input:w,saved_expiry_date_v2:a,setEndTime:l,setExpiryTimeInput:O,setUnsavedExpiryDateV2:f,unsaved_expiry_date_v2:p||a}),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){if(c(w),u(p),m===Be.mM.HOURS){var e=60*i[0]+i[1],r=Math.floor(_/60);s([r,_%60]),l(""),h({duration_unit:Be.mM.MINUTES,duration:Number(e),expiry_time:null,expiry_type:"duration"})}else if(m===Be.mM.DAYS){var n=new Date(p).getTime()-(new Date).getTime(),o=Math.ceil(n/864e5);s([]),t?h({expiry_time:t,expiry_type:"endtime"}):(l(""),h({duration_unit:Be.mM.DAYS,duration:Number(o),expiry_time:null,expiry_type:"duration"}))}else l(""),s([]),h({duration_unit:m,duration:Number(g),expiry_time:null,expiry_type:"duration"})}}}))}));const bl=hl;function gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return El(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?El(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function El(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Sl=(0,he.observer)((function(e){var t,r,a,l=e.is_minimized,c=(0,Re.P)(),s=c.contract_type,d=c.duration_min_max,f=c.duration_unit,m=c.duration_units_list,p=c.duration,y=c.expiry_epoch,_=c.expiry_time,v=c.expiry_type,h=c.is_market_closed,b=c.onChangeMultiple,g=c.proposal_info,E=c.saved_expiry_date_v2,S=c.setSavedExpiryDateV2,w=c.setUnsavedExpiryDateV2,O=c.start_time,A=c.symbol,k=c.trade_type_tab,x=c.trade_types,C=c.unsaved_expiry_date_v2,T=c.validation_errors,j=(0,Dr.d)().addSnackbar,L=null!==(t=(0,i.getUnitMap)()[f])&&void 0!==t?t:{},P=L.name_plural,N=L.name,I=null!=P?P:N,D=gl((0,n.useState)([]),2),M=D[0],R=D[1],z=gl((0,n.useState)(!1),2),F=z[0],U=z[1],q=gl((0,n.useState)(""),2),V=q[0],B=q[1],H=gl((0,n.useState)(""),2),G=(H[0],H[1]),Y=gl((0,n.useState)(new Date),2),W=(Y[0],Y[1]),$=gl((0,n.useState)(""),2),K=$[0],X=$[1],Z=gl((0,n.useState)(_?"d":f),2),Q=Z[0],ee=Z[1],te=(0,Mt.H1)(x,s,k),re=(null===(r=g[te[0]])||void 0===r?void 0:r.has_error)&&"duration"===(null===(a=g[te[0]])||void 0===a?void 0:a.error_field)||T.duration.length>0,ne=(0,n.useRef)(!0),oe=(0,u.A)(),ae=oe.common,ie=oe.client.is_logged_in,le=ae.server_time;(0,n.useEffect)((function(){if(y){B(new Date(1e3*y).toISOString().split("T")[1].substring(0,8)||"");var e=new Date(1e3*y).toISOString().split("T")[0];G(new Date(1e3*y).toISOString().split("T")[0]),S(e)}}),[y]),(0,n.useEffect)((function(){if("d"==f){var e=new Date;e.setDate(e.getDate()+p),W(e)}}),[f]),(0,n.useEffect)((function(){if(ne.current){var e=setTimeout((function(){ne.current=!1}),500);return function(){return clearTimeout(e)}}var t=(0,Be.yv)(d,m);"d"==(null==t?void 0:t.unit)&&W(new Date);var r=setTimeout((function(){b({duration_unit:null==t?void 0:t.unit,duration:null==t?void 0:t.value,expiry_time:null,expiry_type:"duration"})}),10),n=(0,Be.bg)(m,le,O,d);return W(new Date(n)),function(){return clearTimeout(r)}}),[A,s,d,m]);var ce=o().useCallback((function(){return U(!1)}),[]);(0,n.useEffect)((function(){if(re&&!l){var e,t=g[te[0]]||(null==T||null===(e=T.duration)||void 0===e?void 0:e[0]);"duration"===(null==t?void 0:t.error_field)&&j({message:t.message,status:"fail",hasCloseButton:!0,hasFixedHeight:!1,style:{marginBottom:ie?"48px":"-8px",width:"calc(100% - var(--core-spacing-800)"}})}}),[re,te[0]]);var ue=o().useCallback((function(){if(_)ee("d"),X(_);else if("m"===f&&p>59){var e=Math.floor(p/60),t=p%60;ee("h"),R([e,t])}else R([]),ee(f)}),[p,f,_]);return(0,n.useEffect)((function(){F&&ue()}),[F]),o().createElement(o().Fragment,null,o().createElement(wi.A,{variant:"fill",key:"".concat(p,"-$").concat(f),readOnly:!0,label:o().createElement(J.Localize,{i18n_default_text:"Duration",key:"duration".concat(l?"-minimized":"")}),value:function(){var e=E?new Date(E).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"";if("duration"==v){if("m"===f&&p>59){var t=Math.floor(p/60),r=p%60;return"".concat(t," ").concat((0,J.localize)("hours")," ").concat(r?"".concat(r," ").concat((0,J.localize)("minutes")):""," ")}return"d"===f?e?"".concat((0,J.localize)("Ends on")," ").concat(e,", ").concat(V||"23:59:59"," GMT"):"":"".concat(p," ").concat(I)}if(_)return"".concat((0,J.localize)("Ends on")," ").concat(e," ").concat(_," GMT")}(),noStatusIcon:!0,disabled:h,className:(0,Te.A)("trade-params__option",l&&"trade-params__option--minimized"),onClick:function(){return U(!0)},status:re?"error":"neutral"}),o().createElement(De.A.Root,{isOpen:F,onClose:ce,position:"left",expandable:!1,shouldBlurOnClose:F},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(bl,{selected_hour:M,setSelectedHour:R,unit:Q,setUnit:ee,expiry_time_string:V,setExpiryTimeString:B,end_time:K,setEndTime:X,saved_expiry_date_v2:E,setSavedExpiryDateV2:S,unsaved_expiry_date_v2:C,setUnsavedExpiryDateV2:w}))))}));const wl=Sl;const Ol=function(e){var t=e.classname,r=e.description,n=e.is_custom_description;return r?o().createElement(De.A.Content,{className:(0,Te.A)("trade-param-definition",t)},n?r:o().createElement(Ie.E,null,r)):null};var Al=r("../../node_modules/@deriv-com/quill-ui/dist/components/Atom/WheelPicker/base/index.js"),kl=d()((function(e,t){e(t)}),200);const xl=function(e){var t=e.accumulator_range_list,r=void 0===t?[]:t,n=e.growth_rate,a=e.maximum_ticks,l=e.setGrowthRate,c=e.setV2ParamsInitialValues,u=e.should_show_details,s=e.tick_size_barrier_percentage,d=o().useRef(),f=o().useRef(n),m=r.map((function(e){return{value:"".concat((0,i.getGrowthRatePercentage)(e),"%")}})),p=[{label:o().createElement(J.Localize,{i18n_default_text:"Barrier"}),value:"±".concat(s)},{label:o().createElement(J.Localize,{i18n_default_text:"Max duration"}),value:"".concat(a||0," ").concat(1===a?(0,J.localize)("tick"):(0,J.localize)("ticks"))}];o().useEffect((function(){return!d.current&&n&&(d.current=n,c({value:n,name:"growth_rate"})),function(){d.current&&d.current!==f.current&&l(d.current),kl.cancel()}}),[]);return o().createElement(o().Fragment,null,o().createElement(De.A.Content,{className:"growth-rate__picker"},o().createElement("div",{className:"growth-rate__wheel-picker"},r.length?o().createElement(Al.I,{data:m,selectedValue:"".concat((0,i.getGrowthRatePercentage)(f.current),"%"),setSelectedValue:function(e){var t=Number(e.slice(0,-1))/100;t!==f.current&&(kl(l,t),f.current=t)}}):o().createElement(Ce.Skeleton,null)),o().createElement("div",{className:"growth-rate__details"},p.map((function(e){var t=e.label,r=e.value;return o().createElement("span",{key:r,className:"growth-rate__details-item"},o().createElement(Ie.E,{color:"quill-typography__color--subtle",size:"sm"},t),o().createElement("div",{className:"growth-rate__details-item-value"},u?o().createElement(Ie.E,{size:"sm"},r):o().createElement(Ce.Skeleton,{height:14,width:75})))})))),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){d.current=f.current,c({value:f.current,name:"growth_rate"})}}}))};function Cl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Tl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var jl=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),n=r.accumulator_range_list,a=r.growth_rate,l=r.is_purchase_enabled,c=r.is_trade_enabled,u=r.is_market_closed,s=r.has_open_accu_contract,d=r.maximum_ticks,f=r.onChange,m=r.proposal_info,p=r.setV2ParamsInitialValues,y=r.tick_size_barrier_percentage,_=r.v2_params_initial_values,v=Cl(o().useState(!1),2),h=v[0],b=v[1],g=(0,Be.Qv)(),E=(null==m?void 0:m[i.CONTRACT_TYPES.ACCUMULATOR])||{},S=c&&!(0,i.isEmptyObject)(m)&&!!E.id&&l,w=(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized"),O=function(e){f({target:{name:"growth_rate",value:e}})},A=o().useCallback((function(){return b(!1)}),[]),k=[{id:1,component:o().createElement(xl,{accumulator_range_list:n,maximum_ticks:d,growth_rate:a,setGrowthRate:O,setV2ParamsInitialValues:p,should_show_details:S,tick_size_barrier_percentage:y})},{id:2,component:o().createElement(Ol,{description:o().createElement(J.Localize,{i18n_default_text:"Your stake will grow at {{growth_rate}}% per tick as long as the current spot price remains within ±{{tick_size_barrier_percentage}} from the previous spot price.",values:{growth_rate:(0,i.getGrowthRatePercentage)(a),tick_size_barrier_percentage:y}})})}];return o().useEffect((function(){var e=null==_?void 0:_.growth_rate;e&&a!==e&&O(e)}),[]),a?o().createElement(o().Fragment,null,o().createElement(wi.A,{className:w,disabled:s||u,label:o().createElement(J.Localize,{i18n_default_text:"Growth rate",key:"growth-rate".concat(t?"-minimized":"")}),onClick:function(){return b(!0)},readOnly:!0,value:"".concat((0,i.getGrowthRatePercentage)(a),"%"),variant:"fill"}),o().createElement(De.A.Root,{isOpen:h,onClose:A,position:"left",expandable:!1,shouldBlurOnClose:h},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{classname:(0,Te.A)("growth-rate__carousel",g&&"growth-rate__carousel--small"),header:Mi,pages:k,title:o().createElement(J.Localize,{i18n_default_text:"Growth rate"})})))):o().createElement("div",{className:w},o().createElement(Ce.Skeleton,null))}));const Ll=jl;const Pl=function(e){var t=e.digit,r=e.digit_stats,n=void 0===r?[]:r,a=e.is_active,i=e.is_disabled,l=e.is_max,c=e.is_min,u=e.onClick,s=n.length?n[t]:null,d=s?100*s/1e3:null,f=d&&!isNaN(d)?parseFloat(d.toFixed(1)):null;return!t&&isNaN(t)?null:o().createElement("div",{key:t,className:"digit"},o().createElement("button",{className:(0,Te.A)(a&&"active"),disabled:i,onClick:function(){return null==u?void 0:u(t)},name:"last_digit"},o().createElement(Ie.E,{size:"xl",color:i?"quill-typography__color--disabled":""},t)),f?o().createElement(Kt.O,{size:"sm",className:(0,Te.A)("percentage",l&&"percentage--max",c&&"percentage--min"),"data-testid":"dt_digit_stats_percentage"},f,"%"):o().createElement(Ve.E.Square,{width:36,height:12,rounded:!0}))};function Nl(e){return function(e){if(Array.isArray(e))return Il(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Il(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Il(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Dl=function(e){var t=e.digits,r=void 0===t?[]:t,n=e.digit_stats,a=e.is_disabled,i=e.onDigitSelect,l=e.selected_digit;return o().createElement("div",{className:"last-digit-prediction__selector"},Nl(Array(2).keys()).map((function(e){return o().createElement("div",{key:e,className:"last-digit-prediction__selector-row"},r.slice(5*e,5*(e+1)).map((function(e){return o().createElement(Pl,{key:e,digit:e,digit_stats:n,is_active:l===e,is_disabled:a,is_max:n[e]===Math.max.apply(Math,Nl(n)),is_min:n[e]===Math.min.apply(Math,Nl(n)),onClick:i})})))})))};function Ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Rl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rl(e,t){if(e){if("string"==typeof e)return zl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zl(e,t):void 0}}function zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Fl,Ul=function(e){if(Array.isArray(e))return zl(e)}(Fl=Array(10).keys())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Fl)||Rl(Fl)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();const ql=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),n=r.digit_stats,a=void 0===n?[]:n,i=r.is_market_closed,l=r.last_digit,c=r.onChange,u=Ml(o().useState(!1),2),s=u[0],d=u[1],f=Ml(o().useState(l),2),m=f[0],p=f[1];o().useEffect((function(){p(l)}),[l]);var y=function(e){c({target:{name:"last_digit",value:e}})},_=o().useCallback((function(){d(!1),p(l)}),[l]);return t?o().createElement(o().Fragment,null,o().createElement(wi.A,{className:(0,Te.A)("trade-params__option","trade-params__option--minimized"),disabled:i,variant:"fill",readOnly:!0,label:o().createElement(J.Localize,{i18n_default_text:"Last digit prediction",key:"last-digit-prediction".concat(t?"-minimized":"")}),value:l,onClick:function(){return d(!0)}}),o().createElement(De.A.Root,{isOpen:s,onClose:_,position:"left",expandable:!1,shouldBlurOnClose:s},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:o().createElement(J.Localize,{i18n_default_text:"Last digit prediction"})}),o().createElement(De.A.Content,null,o().createElement(Dl,{digits:Ul,digit_stats:a,onDigitSelect:p,selected_digit:m})),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){l!==m&&y(m)}}})))):o().createElement("div",{className:(0,Te.A)("last-digit-prediction",i&&"last-digit-prediction--disabled")},o().createElement(Kt.O,{size:"sm",className:"last-digit-prediction__title"},o().createElement(J.Localize,{i18n_default_text:"Last digit prediction"})),o().createElement(Dl,{digits:Ul,digit_stats:a,onDigitSelect:y,selected_digit:l,is_disabled:i}))}));var Vl=d()((function(e,t){e(t)}),200);const Bl=function(e){var t=e.multiplier,r=e.multiplier_range_list,a=void 0===r?[]:r,l=e.currency,c=e.commission,u=e.setMultiplier,s=a.map((function(e){return{value:e.text}})),d=o().useRef(t),f=o().useRef(t);(0,n.useEffect)((function(){return function(){d.current&&d.current!==f.current&&u(d.current),Vl.cancel()}}),[]);return o().createElement(o().Fragment,null,o().createElement(De.A.Content,{className:"multiplier__picker"},o().createElement("div",{className:"multiplier__wheel-picker"},s.length?o().createElement(Al.I,{data:s,selectedValue:"x".concat(f.current),setSelectedValue:function(e){var t=Number(e.slice(1));t!==f.current&&(Vl(u,t),f.current=Number(t))}}):o().createElement(Ve.E.Square,null)),o().createElement("div",{className:"multiplier__commission"},o().createElement(Ie.E,{color:"quill-typography__color--subtle",size:"sm"},o().createElement(J.Localize,{i18n_default_text:"Commission"})),o().createElement(Ie.E,{size:"sm",as:"div",className:"multiplier__commission-value"},c?o().createElement(o().Fragment,null,(0,i.formatMoney)(l,c,!0)," ",l):o().createElement(Ve.E.Square,{width:60,height:14})))),o().createElement(De.A.Footer,{isPrimaryButtonDisabled:!1,shouldCloseOnPrimaryButtonClick:!0,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){d.current=f.current}}}))};function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Yl=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),a=r.multiplier,i=r.multiplier_range_list,l=r.commission,c=r.is_market_closed,u=r.onChange,s=r.currency,d=Hl((0,n.useState)(!1),2),f=d[0],m=d[1],p=(0,Be.Qv)(),y=(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized"),_=o().useCallback((function(){return m(!1)}),[]),v=[{id:1,component:o().createElement(Bl,{multiplier:a,multiplier_range_list:i,currency:s,commission:l,setMultiplier:function(e){u({target:{name:"multiplier",value:e}})}})},{id:2,component:o().createElement(Ol,{description:o().createElement(J.Localize,{i18n_default_text:"Multipliers amplify your potential profit if the market moves in your favour, with losses limited to your initial capital."})})}];return a?o().createElement(o().Fragment,null,o().createElement(wi.A,{className:y,disabled:c,variant:"fill",readOnly:!0,label:o().createElement(J.Localize,{i18n_default_text:"Multiplier",key:"multiplier".concat(t?"-minimized":"")}),value:"x".concat(a),onClick:function(){return m(!0)}}),o().createElement(De.A.Root,{expandable:!1,isOpen:f,position:"left",onClose:_,shouldBlurOnClose:f},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{classname:(0,Te.A)("multiplier__carousel",p&&"multiplier__carousel--small"),header:Mi,pages:v,title:o().createElement(J.Localize,{i18n_default_text:"Multiplier"})})))):o().createElement("div",{className:y},o().createElement(Ve.E.Square,null))}));const Wl=Yl;const $l=(0,he.observer)((function(){var e,t,r,n,a=(0,Re.P)(),l=a.currency,c=a.is_market_closed,u=a.proposal_info,s=null==u||null===(e=u[i.CONTRACT_TYPES.MULTIPLIER.UP])||void 0===e||null===(t=e.cancellation)||void 0===t?void 0:t.ask_price;return(null==u||null===(r=u[i.CONTRACT_TYPES.MULTIPLIER.UP])||void 0===r?void 0:r.has_error)||(null==u||null===(n=u[i.CONTRACT_TYPES.MULTIPLIER.DOWN])||void 0===n?void 0:n.has_error)?null:o().createElement("div",{className:"multipliers-info__row"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)(c&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"Deal cancellation fee"})),o().createElement(Ie.E,{size:"sm",bold:!0,as:"div",className:(0,Te.A)(c&&"trade-params__text--disabled")},s?o().createElement(Ce.Money,{amount:s,show_currency:!0,currency:l}):o().createElement(Ce.Skeleton,{width:65,height:18})))}));const Kl=(0,he.observer)((function(){var e=(0,Re.P)(),t=e.expiration,r=e.is_market_closed,n=(0,u.A)().common.server_time,a=(0,i.formatDuration)((0,i.getDiffDuration)(Number(null==n?void 0:n.unix()),Number(t)),"HH:mm"),l=a.days,c=a.timestamp,s=(0,i.getDateFromNow)(l,"day","DD MMM YYYY");return o().createElement("div",{className:"multipliers-expiration-info__container"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)(r&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"Expires on"})),o().createElement(Ie.E,{size:"sm",bold:!0,className:(0,Te.A)(r&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"{{date}} at {{timestamp}}",values:{date:s,timestamp:c}})))}));const Jl=(0,he.observer)((function(){var e,t,r=(0,Re.P)(),n=r.currency,a=r.is_market_closed,i=r.proposal_info,l=r.trade_type_tab,c=((null===(e=i[l])||void 0===e?void 0:e.obj_contract_basis)||{}).value,u=null===(t=i[l])||void 0===t?void 0:t.has_error;return o().createElement("div",{className:"payout-info__container"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)(a&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"Payout"})),c?o().createElement(Ie.E,{size:"sm",bold:!0,className:(0,Te.A)(a&&"trade-params__text--disabled")},o().createElement(Ce.Money,{amount:c,show_currency:!0,currency:n})):u?o().createElement(Ie.E,{size:"sm",bold:!0},"- ",n):o().createElement(Ce.Skeleton,{width:60,height:14}))}));function Xl(e){return function(e){if(Array.isArray(e))return ec(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ql(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Ql(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ql(e,t){if(e){if("string"==typeof e)return ec(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ec(e,t):void 0}}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tc=(0,he.observer)((function(e){var t=e.barrier,r=e.current_payout_per_point,n=e.is_open,a=e.onPayoutPerPointSelect,i=e.onClose,l=e.payout_per_point_list,c=(0,Re.P)(),u=c.trade_types,s=Zl(o().useState(r),2),d=s[0],f=s[1],m=Zl(o().useState(t),2),p=m[0],y=m[1],_=o().useRef(!1),v={payout_per_point:String(d)},h=(0,Be.hi)({new_values:v,trade_store:c,trade_type:Object.keys(u)[0]}),b=Dt(["proposal"].concat(Xl(Object.entries(v).flat().join("-")),["".concat(t),Object.keys(u)[0],JSON.stringify(h)]),h,{enabled:n}).data;return o().useEffect((function(){b&&function(e){var t=e.error,r=e.proposal,n=(null!=r?r:{}).barrier_spot_distance;n&&!t&&y(n),_.current=!0}(b)}),[b]),o().createElement(o().Fragment,null,o().createElement(De.A.Content,{className:"payout-per-point__wrapper","data-testid":"dt_payout-per-point_wrapper"},o().createElement("div",{className:"payout-per-point__wheel-picker"},o().createElement(Al.I,{data:l,selectedValue:d,setSelectedValue:function(e){var t=d===e;_.current=t,t||f(e)}})),o().createElement("div",{className:"payout-per-point__barrier"},o().createElement(Ie.E,{color:"quill-typography__color--subtle",size:"sm"},o().createElement(J.Localize,{i18n_default_text:"Barrier"})),o().createElement(Ie.E,{size:"sm",as:"div",className:"payout-per-point__barrier__content"},null!=p?p:o().createElement(Ce.Skeleton,{width:90,height:14})))),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){_.current&&(a(d),i())}},shouldCloseOnPrimaryButtonClick:!1}))}));const rc=tc;function nc(e){return function(e){if(Array.isArray(e))return ic(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ac(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||ac(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(e,t){if(e){if("string"==typeof e)return ic(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ic(e,t):void 0}}function ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var lc=(0,he.observer)((function(e){var t=e.is_minimized,r=oc(o().useState(!1),2),n=r[0],a=r[1],l=(0,Re.P)(),c=l.barrier_1,u=l.currency,s=l.is_market_closed,d=l.payout_choices,f=l.payout_per_point,m=l.setPayoutPerPoint,p=(0,Be.Qv)(),y=(0,i.getCurrencyDisplayCode)(u),_=nc(d).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return{value:e,label:"".concat(e," ").concat(y)}})),v=o().useCallback((function(){return a(!1)}),[]),h=[{id:1,component:o().createElement(rc,{barrier:c,current_payout_per_point:f,is_open:n,onPayoutPerPointSelect:m,onClose:v,payout_per_point_list:_})},{id:2,component:o().createElement(Ol,{description:o().createElement(J.Localize,{i18n_default_text:"The amount you choose to receive at expiry for every point of change between the final price and the barrier."})})}],b=(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized");return f?o().createElement(o().Fragment,null,o().createElement(wi.A,{disabled:s,className:b,label:o().createElement(J.Localize,{i18n_default_text:"Payout per point",key:"payout-per-point".concat(t?"-minimized":"")}),onClick:function(){return a(!0)},readOnly:!0,variant:"fill",value:"".concat(f," ").concat(y)}),o().createElement(De.A.Root,{isOpen:n,onClose:v,position:"left",expandable:!1,shouldBlurOnClose:n},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{classname:(0,Te.A)("payout-per-point__carousel",p&&"payout-per-point__carousel--small"),header:Mi,pages:h,title:o().createElement(J.Localize,{i18n_default_text:"Payout per point"})})))):o().createElement("div",{className:b},o().createElement(Ce.Skeleton,null))}));const cc=lc;var uc=(0,he.observer)((function(){var e,t,r=(0,Re.P)(),n=r.contract_type,a=r.currency,i=r.is_market_closed,l=r.proposal_info,c=n.toUpperCase(),u=((null===(e=l[c])||void 0===e?void 0:e.obj_contract_basis)||{}).value;return(null===(t=l[c])||void 0===t?void 0:t.has_error)?null:o().createElement("div",{className:"payout-per-point-info__container"},o().createElement(Ie.E,{size:"sm",className:(0,Te.A)(i&&"trade-params__text--disabled")},o().createElement(J.Localize,{i18n_default_text:"Payout per point"})),u?o().createElement(Ie.E,{size:"sm",bold:!0,className:(0,Te.A)(i&&"trade-params__text--disabled")},u," ",a):o().createElement(Ce.Skeleton,{width:100,height:14}))}));const sc=uc;var dc=r("../../node_modules/@deriv-com/quill-ui/dist/components/SegmentedControl/single-choice/index.js");function fc(e){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(e)}function mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(r),!0).forEach((function(t){yc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const hc=(0,he.observer)((function(e){var t=e.closeActionSheet,r=(0,Re.P)(),n=r.has_cancellation,a=r.has_take_profit,i=r.has_stop_loss,l=r.cancellation_range_list,c=r.cancellation_duration,u=r.onChangeMultiple,s=(0,Dr.d)().addSnackbar,d=_c(o().useState(n),2),f=d[0],m=d[1],p=_c(o().useState(c),2),y=p[0],_=p[1],v=l.map((function(e){var t=e.text,r=e.value;return{label:(0,Be._V)({value:t}),value:r}}));return o().createElement(o().Fragment,null,o().createElement("div",{className:"deal-cancellation__container"},o().createElement("div",{className:"deal-cancellation__toggle"},o().createElement(Ie.E,null,o().createElement(J.Localize,{i18n_default_text:"Deal cancellation"})),o().createElement(hi.j,{checked:f,onChange:m})),o().createElement("div",{className:"deal-cancellation__wheel-picker"},l.length?o().createElement(Al.I,{data:v,disabled:!f,selectedValue:y,setSelectedValue:_}):o().createElement(Ve.E.Square,null))),o().createElement(Ar.$n,{color:"black-white",size:"lg",label:o().createElement(J.Localize,{i18n_default_text:"Save"}),fullWidth:!0,className:"risk-management__save-button",onClick:function(){n!==f||y!==c?(f&&(a||i)&&s({message:(0,Be.B1)({has_cancellation:f,has_stop_loss:i,has_take_profit:a,switching_cancellation:!0}),hasCloseButton:!0}),u(pc(pc({has_cancellation:f},f?{has_take_profit:!1,has_stop_loss:!1}:{}),{},{cancellation_duration:y})),t()):t()}}))}));function bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ec=function(e){var t=bc(o().useState(!1),2),r=t[0],n=t[1],a=bc(o().useState(!1),2),i=a[0],l=a[1];return o().useEffect((function(){var t,r=function(t){var r=t.target,o="focusin"===t.type;r&&r.id===e&&n(o)},o=function(e){var t=e.target;if(t&&null!=t&&t.height&&null!=t&&t.scale){var r=t.height*t.scale/window.screen.height<.75;l(r)}};return document.addEventListener("focusin",r),document.addEventListener("focusout",r),null===(t=window.visualViewport)||void 0===t||t.addEventListener("resize",o),function(){var e;document.removeEventListener("focusin",r),document.removeEventListener("focusout",r),null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",o)}}),[]),{is_key_board_visible:r&&i}};function Sc(e){return Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(e)}function wc(e){return function(e){if(Array.isArray(e))return Tc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ac(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(r),!0).forEach((function(t){kc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Sc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Cc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cc(e,t){if(e){if("string"==typeof e)return Tc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tc(e,t):void 0}}function Tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const jc=(0,he.observer)((function(e){var t,r,n,a,l,c,u,s=e.classname,d=e.has_save_button,f=void 0===d||d,m=e.has_actionsheet_wrapper,p=void 0===m||m,y=e.initial_error_text,_=e.onActionSheetClose,v=e.parent_ref,h=e.parent_is_api_response_received_ref,b=e.type,g=void 0===b?"take_profit":b,E=(0,Re.P)(),S=E.contract_type,w=E.currency,O=E.has_take_profit,A=E.has_stop_loss,k=E.is_accumulator,x=E.take_profit,C=E.stop_loss,T=E.trade_types,j=E.trade_type_tab,L=E.onChangeMultiple,P=E.validation_params,N="take_profit"===g,I=(0,Mt.H1)(T,S,j),D=za({error_fields:[g]}).message,M=o().useRef(!1),R=h||M,z=xc(o().useState(N?O:A),2),F=z[0],U=z[1],q=xc(o().useState(N?x:C),2),V=q[0],B=q[1],H=xc(o().useState(""),2),G=H[0],Y=H[1],W=xc(o().useState(null!==(t=null!=y?y:D)&&void 0!==t?t:""),2),$=W[0],K=W[1],X=xc(o().useState(10),2),Z=X[0],Q=X[1],ee=o().useRef(null),te=o().useRef(null),re=o().useRef(),ne=(0,i.getDecimalPlaces)(w),oe=(0,i.getCurrencyDisplayCode)(w),ae=p?De.A.Content:"div",ie=null===(r=P[I[0]])||void 0===r||null===(n=r[g])||void 0===n?void 0:n.min,le=null===(a=P[I[0]])||void 0===a||null===(l=a[g])||void 0===l?void 0:l.max,ce=xc(o().useState({min_value:ie,max_value:le}),2),ue=ce[0],se=ce[1],de=Ac(Ac({},N?{has_take_profit:F}:{has_stop_loss:F}),{},{has_cancellation:!1},N?{take_profit:F?V:""}:{stop_loss:F?V:""}),fe=(0,Be.hi)({new_values:de,trade_store:E,trade_type:Object.keys(T)[0]});N&&null!==(c=fe.limit_order)&&void 0!==c&&c.stop_loss&&delete fe.limit_order.stop_loss,!N&&null!==(u=fe.limit_order)&&void 0!==u&&u.take_profit&&delete fe.limit_order.take_profit;var me=Dt(["proposal"].concat(wc(Object.entries(de).flat().join("-")),[Object.keys(T)[0],JSON.stringify(fe)]),fe,{enabled:F}).data,pe=ue.min_value&&ue.max_value?o().createElement(J.Localize,{i18n_default_text:"Acceptable range: {{min_value}} to {{max_value}} {{currency}}",values:{currency:oe,min_value:ue.min_value,max_value:ue.max_value}}):"",ye=function(e){var t=e.field_name,r=e.new_value;null!=v&&v.current&&t&&(v.current=Ac(Ac({},v.current),{},kc({},t,r)))},_e=function(e){var t;(R.current=!1,U(e),ye({field_name:N?"has_take_profit":"has_stop_loss",new_value:e}),e)?(clearTimeout(re.current),re.current=(0,Be.rx)(te.current,ee.current)):(K(""),Y(""),ye({field_name:N?"tp_error_text":"sl_error_text",new_value:""}),null===(t=ee.current)||void 0===t||t.blur())};o().useEffect((function(){me&&function(e){var t,r,n,o=e.error,a=e.proposal,i=null!==(t=null==o?void 0:o.message)&&void 0!==t?t:"",l=(null==o||null===(r=o.details)||void 0===r?void 0:r.field)===g||!(null!=o&&null!==(n=o.details)&&void 0!==n&&n.field);if(Y(l?i:""),ye({field_name:N?"tp_error_text":"sl_error_text",new_value:l?i:""}),!ue.min_value||!ue.max_value){var c,u,s=null!==(c=null==a||null===(u=a.validation_params)||void 0===u?void 0:u[g])&&void 0!==c?c:{},d=s.min,f=s.max;se((function(e){return e.min_value!==d&&d||e.max_value!==f&&f?{min_value:d,max_value:f}:e}))}R.current=!0}(me)}),[F,me]);var ve=Ec(g).is_key_board_visible;return o().useEffect((function(){var e;ve&&(null===(e=window)||void 0===e||e.scrollTo({top:225,behavior:"smooth"}))}),[ve]),o().useEffect((function(){K(null!=y?y:"")}),[y]),o().useEffect((function(){se((function(e){return e.min_value!==ie&&ie||e.max_value!==le&&le?{min_value:ie,max_value:le}:e}))}),[ie,le]),o().useEffect((function(){return function(){return clearTimeout(re.current)}}),[]),o().createElement(o().Fragment,null,o().createElement(ae,{className:(0,Te.A)("take-profit__wrapper",s)},o().createElement("div",{className:"take-profit__content"},o().createElement(Ie.E,null,N?o().createElement(J.Localize,{i18n_default_text:"Take profit"}):o().createElement(J.Localize,{i18n_default_text:"Stop loss"})),o().createElement(hi.j,{checked:F,onChange:_e})),o().createElement(De.T,{allowDecimals:!0,customType:"commaRemoval",className:"text-field--custom",disabled:!F,decimals:ne,"data-testid":N?"dt_tp_input":"dt_sl_input",inputMode:"decimal",id:g,message:F&&($||G||pe),minusDisabled:Number(V)-1<=0,name:g,noStatusIcon:!0,onChange:function(e){var t=String(e.target.value);t.length>1&&(t=/^[0-]+$/.test(t)?"0":t.replace(/^0*/,"").replace(/^\./,"0."));var r=t===V;R.current=r,r||(K(""),B(t),ye({field_name:g,new_value:t}))},placeholder:(0,J.localize)("Amount"),ref:ee,regex:/[^0-9.,]/g,status:$||G?"error":"neutral",shouldRound:!1,textAlignment:"center",unitLeft:oe,variant:"fill",value:null!=V?V:"",onBeforeInput:function(e){var t,r,n;[".",","].includes(null!==(t=null===(r=e.nativeEvent)||void 0===r?void 0:r.data)&&void 0!==t?t:"")&&(null!==(n=null==V?void 0:V.length)&&void 0!==n?n:0)<=10?Q(ne?11+ne:10):null!=V&&V.includes(".")||Q(10)},maxLength:Z}),!F&&o().createElement("button",{className:"take-profit__overlay","data-testid":"dt_take_profit_overlay",onClick:function(){return _e(!0)}}),o().createElement("input",{ref:te,style:{height:0,opacity:0,display:"none"},inputMode:"decimal"}),k&&o().createElement(Kt.O,{color:"quill-typography__color--subtle",className:"take-profit__accu-information"},o().createElement(J.Localize,{i18n_default_text:"Note: Cannot be adjusted for ongoing accumulator contracts."}))),f&&o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){if((R.current||!F)&&(!G||!F))if(V||!F){var e=!G&&F;L(Ac(Ac(Ac({},N?{has_take_profit:e}:{has_stop_loss:e}),N?{take_profit:G||"0"===V?"":V}:{stop_loss:G||"0"===V?"":V}),e?{has_cancellation:!1}:{})),_()}else K(N?(0,J.localize)("Please enter a take profit amount."):(0,J.localize)("Please enter a stop loss amount."))}},shouldCloseOnPrimaryButtonClick:!1}))}));function Lc(e){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(e)}function Pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Lc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ic(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Mc=(0,he.observer)((function(e){var t,r,n,a,i,l,c=e.closeActionSheet,u=(0,Re.P)(),s=u.has_take_profit,d=u.has_cancellation,f=u.has_stop_loss,m=u.take_profit,p=u.onChangeMultiple,y=u.stop_loss,_=u.validation_errors,v=(0,Dr.d)().addSnackbar,h=Ic(o().useState(null!==(t=null==_||null===(r=_.take_profit)||void 0===r?void 0:r[0])&&void 0!==t?t:""),2),b=h[0],g=h[1],E=o().useRef({has_take_profit:s,take_profit:m,tp_error_text:null==_||null===(n=_.take_profit)||void 0===n?void 0:n[0]}),S=o().useRef(!1),w=Ic(o().useState(null!==(a=null==_||null===(i=_.stop_loss)||void 0===i?void 0:i[0])&&void 0!==a?a:""),2),O=w[0],A=w[1],k=o().useRef({has_stop_loss:f,stop_loss:y,sl_error_text:null==_||null===(l=_.stop_loss)||void 0===l?void 0:l[0]}),x=o().useRef(!1);return o().createElement("div",{className:"risk-management__tp-sl__wrapper"},o().createElement(jc,{classname:"risk-management__tp-sl",has_save_button:!1,has_actionsheet_wrapper:!1,initial_error_text:b,onActionSheetClose:c,parent_ref:E,parent_is_api_response_received_ref:S}),o().createElement(jc,{classname:"risk-management__tp-sl",has_save_button:!1,has_actionsheet_wrapper:!1,initial_error_text:O,onActionSheetClose:c,parent_ref:k,parent_is_api_response_received_ref:x,type:"stop_loss"}),o().createElement(Ar.$n,{color:"black-white",size:"lg",label:o().createElement(J.Localize,{i18n_default_text:"Save"}),fullWidth:!0,className:"risk-management__save-button",onClick:function(){if((S.current||!E.current.has_take_profit)&&(x.current||!k.current.has_stop_loss)){var e=E.current,t=e.has_take_profit,r=e.take_profit,n=e.tp_error_text,a=k.current,i=a.has_stop_loss,l=a.stop_loss,u=a.sl_error_text,s=!r&&t,f=!l&&i;if(s&&g(o().createElement(J.Localize,{i18n_default_text:"Please enter a take profit amount."})),f&&A(o().createElement(J.Localize,{i18n_default_text:"Please enter a stop loss amount."})),!(n&&t||u&&i||f||s)){var m=!n&&t,y=!u&&i;(m||y)&&d&&v({message:(0,Be.B1)({has_cancellation:d,has_stop_loss:y,has_take_profit:m,switching_tp_sl:!0}),hasCloseButton:!0}),p(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pc(Object(r),!0).forEach((function(t){Nc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({has_take_profit:t,take_profit:n||"0"===r?"":r,has_stop_loss:i,stop_loss:u||"0"===l?"":l},m||y?{has_cancellation:!1}:{})),c()}}}}))}));const Rc=Mc;function zc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Uc=function(e){var t=e.closeActionSheet,r=e.initial_tab_index,n=void 0===r?0:r,a=e.should_show_deal_cancellation,i=zc(o().useState(n),2),l=i[0],c=i[1];return o().createElement(De.A.Content,{className:"risk-management__picker"},a&&o().createElement(dc.v,{hasContainerWidth:!0,onChange:c,options:[{label:o().createElement(J.Localize,{i18n_default_text:"TP & SL"})},{label:o().createElement(J.Localize,{i18n_default_text:"Deal cancellation"})}],size:"sm",selectedItemIndex:l}),l?o().createElement(hc,{closeActionSheet:t}):o().createElement(Rc,{closeActionSheet:t}))};var qc=r("../../node_modules/@deriv-com/quill-ui/dist/components/SectionMessage/index.js");const Vc=function(e){var t=e.should_show_deal_cancellation,r=[{definition:o().createElement(J.Localize,{i18n_default_text:"When your profit reaches or exceeds this amount, your trade will be closed automatically."}),is_displayed:!0,label:o().createElement(J.Localize,{i18n_default_text:"Take Profit"})},{definition:o().createElement(J.Localize,{i18n_default_text:"When your loss reaches or exceeds this amount, your trade will be closed automatically."}),is_displayed:!0,label:o().createElement(J.Localize,{i18n_default_text:"Stop loss"})},{definition:o().createElement(J.Localize,{i18n_default_text:"When this is active, you can cancel your trade within the chosen time frame. Your stake will be returned without loss."}),is_displayed:t,label:o().createElement(J.Localize,{i18n_default_text:"Deal cancellation"})}];return o().createElement(o().Fragment,null,r.map((function(e){var t=e.definition,r=e.is_displayed,n=e.label;return r&&o().createElement(o().Fragment,{key:t.props.i18n_default_text},o().createElement(Ie.E,{bold:!0},n),o().createElement(Ie.E,{className:"risk-management__description__definition"},t))})),t&&o().createElement(qc.H,{message:o().createElement(J.Localize,{i18n_default_text:"Take profit and/or stop loss are not available while deal cancellation is active."}),size:"sm",status:"info"}))};function Bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Gc=(0,he.observer)((function(e){var t=e.is_minimized,r=Bc(o().useState(!1),2),n=r[0],a=r[1],l=(0,Re.P)(),c=l.cancellation_range_list,u=l.cancellation_duration,s=l.currency,d=l.has_cancellation,f=l.has_take_profit,m=l.has_stop_loss,p=l.is_market_closed,y=l.take_profit,_=l.stop_loss,v=za({error_fields:["stop_loss","take_profit"]}).is_error_matching_field,h=o().useCallback((function(){return a(!1)}),[]),b=(0,Be.Qv)(),g=(null==c?void 0:c.length)>0,E=(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized"),S=[{id:1,component:o().createElement(Uc,{closeActionSheet:h,initial_tab_index:Number(d),should_show_deal_cancellation:g})},{id:2,component:o().createElement(Ol,{classname:"risk-management__description",description:o().createElement(Vc,{should_show_deal_cancellation:g}),is_custom_description:!0})}];return o().createElement(o().Fragment,null,o().createElement(wi.A,{className:E,disabled:p,label:o().createElement(J.Localize,{i18n_default_text:"Risk management",key:"risk-management".concat(t?"-minimized":"")}),onClick:function(){return a(!0)},readOnly:!0,value:d?"DC: ".concat((0,Be._V)({value:u,unit:(0,J.localize)("minutes")})):f&&m?"TP: ".concat(y," ").concat((0,i.getCurrencyDisplayCode)(s)," / SL: ").concat(_," ").concat((0,i.getCurrencyDisplayCode)(s)):f?"TP: ".concat(y," ").concat((0,i.getCurrencyDisplayCode)(s)):m?"SL: ".concat(_," ").concat((0,i.getCurrencyDisplayCode)(s)):"-",variant:"fill",status:v?"error":"neutral"}),o().createElement(De.A.Root,{isOpen:n,onClose:h,position:"left",expandable:!1,shouldBlurOnClose:n},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{classname:(0,Te.A)("risk-management__carousel",b&&"risk-management__carousel--small"),header:Mi,pages:S,title:o().createElement(J.Localize,{i18n_default_text:"Risk management"})}))))}));const Yc=Gc;function Wc(e){return function(e){if(Array.isArray(e))return $c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Kc=function(e){var t,r=e.trade_store,n=e.proposal_request_values,o=e.contract_type,a=e.contract_types,i=e.is_enabled,l=(0,Be.hi)({new_values:n,trade_store:r,trade_type:o}),c=n?Object.entries(n):[],u=["proposal"].concat(Wc(c.flat().join("-")),["".concat(null!==(t=null==n?void 0:n.amount)&&void 0!==t?t:""),JSON.stringify(l),a.join("-")]);return Dt(u,l,{enabled:i})},Jc=r("./src/Stores/Modules/Trading/Helpers/proposal.ts");function Xc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Qc=function(e){var t=e.contract_type,r=e.contract_types,n=e.currency,a=e.details,l=e.has_stop_loss,c=e.is_loading_proposal,u=e.is_multiplier,s=e.is_empty,d=e.should_show_payout_details,f=Xc(o().useState({is_first_payout_exceeded:!1,is_second_payout_exceeded:!1,commission:"",first_contract_payout:"",max_payout:"",second_contract_payout:"",stop_out:""}),2),m=f[0],p=f[1];o().useEffect((function(){var e=function(e,t){return"-"===t&&c||!e||s?"-":(0,i.formatMoney)(n,Number(e),!0)},t=m.commission,r=m.first_contract_payout,o=m.is_first_payout_exceeded,l=m.is_second_payout_exceeded,u=m.second_contract_payout,d=m.stop_out,f=m.max_payout,y=e(Math.abs(Number(a.commission)),t),_=e(a.first_contract_payout,r),v=e(a.second_contract_payout,u),h=e(Math.abs(Number(a.stop_out)),d),b=e(a.max_payout,f);t===y&&r===_&&m.is_first_payout_exceeded===o&&m.is_second_payout_exceeded===l&&u===v&&d===h&&f===b||p({commission:y,first_contract_payout:_,is_first_payout_exceeded:o,is_second_payout_exceeded:l,second_contract_payout:v,stop_out:h,max_payout:b})}),[n,a,m,c,s]);var y=o().createElement(J.Localize,{i18n_default_text:"Payout"}),_=[{is_displayed:!l&&u&&!d,label:o().createElement(J.Localize,{i18n_default_text:"Stop out"}),value:m.stop_out},{is_displayed:u&&!d,label:o().createElement(J.Localize,{i18n_default_text:"Commission"}),value:m.commission},{is_displayed:!!a.max_payout&&d,label:o().createElement(J.Localize,{i18n_default_text:"Max payout"}),value:(0,i.formatMoney)(n,+a.max_payout,!0)},{contract_type:(0,i.getTradeTypeName)(r[0],{isHighLow:t===i.TRADE_TYPES.HIGH_LOW}),is_displayed:!!r.length&&d,label:y,has_error:a.is_first_payout_exceeded,value:m.first_contract_payout},{contract_type:(0,i.getTradeTypeName)(r[1],{isHighLow:t===i.TRADE_TYPES.HIGH_LOW}),is_displayed:r.length>1&&d,label:y,has_error:a.is_second_payout_exceeded,value:m.second_contract_payout}];return o().createElement("div",{className:"stake-content__details"},_.map((function(e,t){var r=e.contract_type,a=e.is_displayed,l=e.label,c=e.has_error,u=e.value;return a&&o().createElement("div",{key:"".concat(t,"_").concat(u),className:(0,Te.A)("stake-content__details-row",c&&"error")},o().createElement(Ie.E,{size:"sm"},l,r&&" (".concat(r,")")),o().createElement(Ie.E,{size:"sm"},u," ",(0,i.getCurrencyDisplayCode)(n)))})))};function eu(e){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(e)}function tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ru(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ru(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ou(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(r),!0).forEach((function(t){au(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function au(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=eu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iu=function(e,t){switch(t.type){case"SET_PROPOSAL_VALUES":return ou(ou({},e),{},{proposal_request_values:ou(ou({},e.proposal_request_values),t.payload)});case"SET_STAKE_ERROR":return ou(ou({},e),{},{stake_error:t.payload});case"SET_FE_STAKE_ERROR":return ou(ou({},e),{},{fe_stake_error:t.payload});case"UPDATE_DETAILS":return ou(ou({},e),{},{details:ou(ou({},e.details),t.payload)});case"SET_MAX_LENGTH":return ou(ou({},e),{},{max_length:t.payload});case"RESET_ERRORS":return ou(ou({},e),{},{stake_error:"",fe_stake_error:""});default:return e}},lu=function(e,t){var r,n=e.amount,o=e.commission,a=e.contract_type,i=e.trade_type_tab,l=e.trade_types,c=e.proposal_info,u=e.validation_params,s=e.stop_out,d=(0,Mt.H1)(l,a,i),f=(0,Be.Nw)(c[d[0]]),m=f.contract_payout,p=f.max_payout,y=f.error,_=(0,Be.Nw)(c[d[1]]),v=_.contract_payout,h=_.error,b=(null!==(r=u[d[0]]||u[d[1]])&&void 0!==r?r:{}).stake,g=null!=b?b:{},E=g.max,S=void 0===E?0:E,w=g.min,O=void 0===w?0:w;return{proposal_request_values:{amount:n},stake_error:"",fe_stake_error:"",max_length:cu(n,t),details:{commission:o,error_1:y,error_2:h,first_contract_payout:m,second_contract_payout:v,is_first_payout_exceeded:!!y&&m>p,is_second_payout_exceeded:!!h&&v>p,max_payout:p,max_stake:S,min_stake:O,stop_out:s}}},cu=function(e,t){return String(e).includes(".")||String(e).includes(",")?11+t:10},uu=(0,he.observer)((function(e){var t=e.onClose,r=e.is_open,n=(0,Re.P)(),a=n.contract_type,l=n.currency,c=n.barrier_1,u=n.has_stop_loss,s=n.is_accumulator,d=n.is_multiplier,f=n.is_turbos,m=n.is_vanilla,p=n.onChange,y=n.trade_type_tab,_=n.trade_types,v=(0,i.getDecimalPlaces)(l),h=tu(o().useReducer(iu,null,(function(){return lu(n,v)})),2),b=h[0],g=h[1],E=b.proposal_request_values,S=b.stake_error,w=b.fe_stake_error,O=b.details,A=o().useMemo((function(){return(0,Mt.H1)(_,a,y)}),[_,a,y]),k=!(s||d||f||m),x="stake_input",C=Ec(x).is_key_board_visible;o().useEffect((function(){var e;C&&(null===(e=window)||void 0===e||e.scrollTo({top:225,behavior:"smooth"}))}),[C]),o().useEffect((function(){var e=lu(n,v);g({type:"SET_PROPOSAL_VALUES",payload:e.proposal_request_values}),g({type:"UPDATE_DETAILS",payload:e.details})}),[]);var T=A.length>1&&!d,j=!!O.error_1&&!!O.error_2,L=!T||T&&j,P=Kc({trade_store:n,proposal_request_values:E,contract_type:A[0],contract_types:A,is_enabled:r}),N=P.data,I=P.is_fetching,D=Kc({trade_store:n,proposal_request_values:E,contract_type:A[1],contract_types:A,is_enabled:r&&T}),M=D.data,R=D.is_fetching,z=I||T&&R,F=function(e,t){var r,o,a,i,l,u,s,p=e.error,y=e.proposal;if(""!==E.amount){if(m&&null!=p&&null!==(r=p.details)&&void 0!==r&&r.barrier_choices){var _=p.details.barrier_choices;if(null==_||!_.includes(c)){var v=Math.floor(_.length/2);return void g({type:"SET_PROPOSAL_VALUES",payload:{barrier_1:_[v]}})}}if(f&&null!=p&&null!==(o=p.details)&&void 0!==o&&o.payout_per_point_choices&&"payout_per_point"===(null==p||null===(a=p.details)||void 0===a?void 0:a.field)){var h=p.details.payout_per_point_choices,b=Math.floor(h.length/2);g({type:"SET_PROPOSAL_VALUES",payload:{payout_per_point:h[b]}})}else{var S=null!==(i=null==p?void 0:p.message)&&void 0!==i?i:"",w=["amount","stake"].includes(null!==(l=null==p||null===(u=p.details)||void 0===u?void 0:u.field)&&void 0!==l?l:"")||!(null!=p&&null!==(s=p.details)&&void 0!==s&&s.field);if(g({type:"SET_STAKE_ERROR",payload:w?S:""}),k){var A=(0,Jc.vL)(n,e),x=(0,Be.Nw)(A),C=x.contract_payout,T=x.max_payout,j=x.error;g({type:"UPDATE_DETAILS",payload:ou(ou({},T?{max_payout:T}:{}),{},au(au(au({},"".concat(t,"_contract_payout"),C||0),"is_".concat(t,"_payout_exceeded"),!!j&&C>T),"error_".concat("first"===t?1:2),j))})}else{if((!O.min_stake||!O.max_stake)&&null!=p&&p.details){var L=p.details,P=L.max_stake,N=L.min_stake;P&&N&&g({type:"UPDATE_DETAILS",payload:{max_stake:P,min_stake:N}})}if(y){var I,D,M=y,R=M.commission,z=M.limit_order,F=M.validation_params,U=null!==(I=null==F?void 0:F.stake)&&void 0!==I?I:{},q=U.max,V=U.min,B=(null!==(D=null==z?void 0:z.stop_out)&&void 0!==D?D:{}).order_amount;g({type:"UPDATE_DETAILS",payload:ou(ou({},d&&R&&B?{commission:R,stop_out:B}:{}),O.max_stake||O.min_stake?{}:{max_stake:q,min_stake:V})})}else!y&&d&&g({type:"UPDATE_DETAILS",payload:{commission:0,stop_out:0}})}}}else g({type:"SET_STAKE_ERROR",payload:""})};o().useEffect((function(){N&&F(N,"first")}),[N]),o().useEffect((function(){M&&F(M,"second")}),[M]);return o().createElement(o().Fragment,null,o().createElement(De.A.Content,{className:"stake-content"},o().createElement(De.T,{allowDecimals:!0,allowSign:!1,className:"text-field--custom",customType:"commaRemoval","data-testid":"dt_input_with_steppers",decimals:v,inputMode:"decimal",id:x,maxLength:b.max_length,message:w||L&&S||!!O.min_stake&&!!O.max_stake&&o().createElement(J.Localize,{i18n_default_text:"Acceptable range: {{min_stake}} to {{max_stake}} {{currency}}",values:{currency:(0,i.getCurrencyDisplayCode)(l),min_stake:(0,i.formatMoney)(l,+O.min_stake,!0),max_stake:(0,i.formatMoney)(l,+O.max_stake,!0)}}),minusDisabled:Number(E.amount)-1<=0,name:"amount",noStatusIcon:!0,onChange:function(e){var t=String(e.target.value);(g({type:"SET_MAX_LENGTH",payload:cu(t,v)}),t.endsWith(".")||t.endsWith(","))?g({type:"SET_FE_STAKE_ERROR",payload:(0,J.localize)("Should be a valid number.")}):t===String(E.amount)||(g({type:"RESET_ERRORS"}),g({type:"SET_PROPOSAL_VALUES",payload:{amount:t}}))},onBeforeInput:function(e){var t,r,n,o;[".",","].includes(null!==(t=null===(r=e.nativeEvent)||void 0===r?void 0:r.data)&&void 0!==t?t:"")&&(null!==(n=null===(o=String(E.amount))||void 0===o?void 0:o.length)&&void 0!==n?n:0)<=10&&g({type:"SET_MAX_LENGTH",payload:v?11+v:10})},placeholder:(0,J.localize)("Amount"),regex:/[^0-9.,]/g,status:w||L&&S?"error":"neutral",shouldRound:!1,textAlignment:"center",unitLeft:(0,i.getCurrencyDisplayCode)(l),value:E.amount,variant:"fill"}),o().createElement(Qc,{contract_type:a,contract_types:A,currency:l,details:O,has_stop_loss:u,is_loading_proposal:z,is_multiplier:d,is_empty:!E.amount,should_show_payout_details:k})),o().createElement(De.A.Footer,{alignment:"vertical",shouldCloseOnPrimaryButtonClick:!1,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){I||T&&R||L&&S||w||(""!==E.amount?(p({target:{name:"amount",value:E.amount}}),t()):g({type:"SET_FE_STAKE_ERROR",payload:(0,J.localize)("Amount is a required field.")}))}}}))}));const su=uu;function du(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fu(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mu=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),n=r.amount,a=r.currency,l=r.contract_type,c=r.has_open_accu_contract,u=r.is_market_closed,s=r.is_multiplier,d=r.trade_types,f=r.trade_type_tab,m=r.proposal_info,p=za({error_fields:["stake","amount"]}).is_error_matching_field,y=du(o().useState(!1),2),_=y[0],v=y[1],h=(0,Mt.H1)(d,l,f),b=h.every((function(e){var t;return null==m||null===(t=m[e])||void 0===t?void 0:t.has_error})),g=1===h.length||s||b,E=o().useCallback((function(){return v(!1)}),[]);return o().createElement(o().Fragment,null,o().createElement(wi.A,{disabled:c||u,variant:"fill",readOnly:!0,label:o().createElement(J.Localize,{i18n_default_text:"Stake",key:"stake".concat(t?"-minimized":"")}),noStatusIcon:!0,onClick:function(){return v(!0)},value:"".concat(n," ").concat((0,i.getCurrencyDisplayCode)(a)),className:(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized"),status:p&&g?"error":"neutral"}),o().createElement(De.A.Root,{isOpen:_,onClose:E,position:"left",expandable:!1,shouldBlurOnClose:_},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:o().createElement(J.Localize,{i18n_default_text:"Stake"})}),o().createElement(su,{onClose:E,is_open:_}))))}));const pu=mu;var yu=d()((function(e,t){return t(e)}),200);const _u=function(e){var t=e.current_strike,r=e.currency,n=e.onStrikePriceSelect,a=e.payout_per_point,i=e.strike_price_list,l=e.setV2ParamsInitialValues,c=o().useRef(),u=o().useRef(t);return o().useEffect((function(){return!c.current&&t&&(c.current=t,l({value:t,name:"strike"})),function(){c.current&&c.current!==u.current&&n(c.current),yu.cancel()}}),[]),o().createElement(o().Fragment,null,o().createElement(De.A.Content,{className:"strike__wrapper","data-testid":"dt_strike_wrapper"},o().createElement("div",{className:"strike__wheel-picker"},o().createElement(Al.I,{data:i,selectedValue:u.current,setSelectedValue:function(e){e!==u.current&&(u.current=e,yu(e,n))}})),o().createElement("div",{className:"strike__payout"},o().createElement(Ie.E,{color:"quill-typography__color--subtle",size:"sm"},o().createElement(J.Localize,{i18n_default_text:"Payout per point:"})),o().createElement(Ie.E,{size:"sm",as:"div",className:"strike__payout__content"},a?o().createElement(o().Fragment,null,a," ",r):o().createElement(Ce.Skeleton,{width:90,height:14})))),o().createElement(De.A.Footer,{alignment:"vertical",primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){c.current=u.current,l({value:u.current,name:"strike"})}}}))};function vu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hu(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bu=(0,he.observer)((function(e){var t,r,n=e.is_minimized,a=vu(o().useState(!1),2),l=a[0],c=a[1],u=(0,Re.P)(),s=u.barrier_1,d=u.barrier_choices,f=u.contract_type,m=u.currency,p=u.is_market_closed,y=u.onChange,_=u.proposal_info,v=u.setV2ParamsInitialValues,h=u.v2_params_initial_values,b=(0,Be.Qv)(),g=d.map((function(e){return{value:e}})),E=(0,i.isEmptyObject)(_)?"":null===(t=_[f.toUpperCase()])||void 0===t||null===(r=t.obj_contract_basis)||void 0===r?void 0:r.value,S=function(e){return y({target:{name:"barrier_1",value:e}})},w=o().useCallback((function(){return c(!1)}),[]),O=[{id:1,component:o().createElement(_u,{current_strike:s,currency:(0,i.getCurrencyDisplayCode)(m),onStrikePriceSelect:S,payout_per_point:E,strike_price_list:g,setV2ParamsInitialValues:v})},{id:2,component:o().createElement(Ol,{description:o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement(J.Localize,{i18n_default_text:"It is the price where you can start receiving a payout from an option."})),o().createElement("br",null),o().createElement("p",null,o().createElement(J.Localize,{i18n_default_text:"For a Call option, you receive a payout if the final price is higher than the strike price."})),o().createElement("br",null),o().createElement("p",null,o().createElement(J.Localize,{i18n_default_text:"For a Put option, you receive a payout if the final price is lower than the strike price."})))})}],A=(0,Te.A)("trade-params__option",n&&"trade-params__option--minimized");return o().useEffect((function(){var e=null==h?void 0:h.strike;e&&s!==e&&S(e)}),[]),s?o().createElement(o().Fragment,null,o().createElement(wi.A,{className:A,disabled:p,label:o().createElement(J.Localize,{i18n_default_text:"Strike price",key:"strike".concat(n?"-minimized":"")}),onClick:function(){return c(!0)},readOnly:!0,variant:"fill",value:s}),o().createElement(De.A.Root,{isOpen:l,onClose:w,position:"left",expandable:!1,shouldBlurOnClose:l},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{classname:(0,Te.A)("strike__carousel",b&&"strike__carousel--small"),header:Mi,pages:O,title:o().createElement(J.Localize,{i18n_default_text:"Strike price"})})))):o().createElement("div",{className:A},o().createElement(Ce.Skeleton,null))}));const gu=bu;function Eu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Su(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Su(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var wu=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),n=r.currency,a=r.has_open_accu_contract,l=r.has_take_profit,c=r.is_market_closed,u=r.take_profit,s=za({error_fields:["take_profit"]}).is_error_matching_field,d=Eu(o().useState(!1),2),f=d[0],m=d[1],p=o().useCallback((function(){return m(!1)}),[]),y=[{id:1,component:o().createElement(jc,{onActionSheetClose:p})},{id:2,component:o().createElement(Ol,{description:o().createElement(J.Localize,{i18n_default_text:"When your profit reaches or exceeds the set amount, your trade will be closed automatically."})})}];return o().createElement(o().Fragment,null,o().createElement(wi.A,{className:(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized"),disabled:a||c,label:o().createElement(J.Localize,{i18n_default_text:"Take profit",key:"take-profit".concat(t?"-minimized":"")}),onClick:function(){return m(!0)},readOnly:!0,variant:"fill",value:l&&u?"".concat(u," ").concat((0,i.getCurrencyDisplayCode)(n)):"-",status:s?"error":"neutral"}),o().createElement(De.A.Root,{isOpen:f,onClose:p,position:"left",expandable:!1,shouldBlurOnClose:f},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(xi,{header:Mi,pages:y,title:o().createElement(J.Localize,{i18n_default_text:"Take profit"})}))))}));const Ou=wu;function Au(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ku(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ku(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ku(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xu=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),n=r.contract_type,a=r.is_market_closed,i=r.onChange,l=r.trade_type_tab,c=r.setTradeTypeTab,u=(0,Be.FN)(n),s=0;"VANILLALONGPUT"===l&&"vanillalongcall"===n||"TURBOSSHORT"===l&&"turboslong"===n||(s=u.findIndex((function(e){return l?e.contract_type===l:e.value===n})));var d=s<0?0:s,f=Au(o().useState(d),2),m=f[0],p=f[1];return o().useEffect((function(){var e;p(d),c(null===(e=u[d])||void 0===e?void 0:e.contract_type)}),[u,d]),u.length?o().createElement(dc.v,{className:(0,Te.A)("trade-params__option",t&&"trade-params__option--minimized"),hasContainerWidth:!0,onChange:function(e){var t,r=null!==(t=u[e])&&void 0!==t?t:{},o=r.contract_type,a=r.value;p(e),c(o),a!==n&&i({target:{name:"contract_type",value:a}})},options:u.map((function(e){var t=e.label;return{disabled:a,label:t}})),selectedItemIndex:m,key:"".concat(m).concat(a)}):null}));const Cu=xu;var Tu=(0,he.observer)((function(e){var t=e.is_minimized,r=(0,Re.P)(),n=r.contract_type,a=r.has_cancellation,i=r.symbol,l=function(e){return Xe({component_key:e,contract_type:n,has_cancellation:a,symbol:i})};return o().createElement("div",{className:(0,Te.A)("trade-params__options__wrapper",t&&"trade-params__options__wrapper--minimized")},t&&o().createElement(o().Fragment,null,l("expiration")&&o().createElement(Kl,null),l("mult_info_display")&&o().createElement($l,null),l("payout_per_point_info")&&o().createElement(sc,null),l("allow_equals")&&o().createElement(Si,null),l("payout")&&o().createElement(Jl,null)),o().createElement("div",{className:(0,Te.A)("trade-params__options__wrapper",t&&"trade-params__options__wrapper--horizontal")},l("trade_type_tabs")&&o().createElement(Cu,{is_minimized:t}),l("last_digit")&&o().createElement(ql,{is_minimized:t}),l("duration")&&o().createElement(wl,{is_minimized:t}),l("strike")&&o().createElement(gu,{is_minimized:t}),l("barrier")&&o().createElement(Fi,{is_minimized:t}),l("growth_rate")&&o().createElement(Ll,{is_minimized:t}),l("multiplier")&&o().createElement(Wl,{is_minimized:t}),l("stake")&&o().createElement(pu,{is_minimized:t}),l("payout_per_point")&&o().createElement(cc,{is_minimized:t}),l("allow_equals")&&!t&&o().createElement(Si,null),l("take_profit")&&o().createElement(Ou,{is_minimized:t}),l("risk_management")&&o().createElement(Yc,{is_minimized:t}),l("expiration")&&!t&&o().createElement(Kl,null),l("accu_info_display")&&!t&&o().createElement(vi,null),l("barrier_info")&&!t&&o().createElement(qi,null),l("payout_per_point_info")&&!t&&o().createElement(sc,null),l("payout")&&!t&&o().createElement(Jl,null),l("mult_info_display")&&!t&&o().createElement($l,null)))}));const ju=Tu;var Lu=r("./src/Modules/Trading/Helpers/digits.ts"),Pu=r("./src/Modules/SmartChart/index.js"),Nu=r("./src/Modules/SmartChart/Components/Markers/accumulators-chart-elements.tsx"),Iu=r("./src/Modules/SmartChart/Components/toolbar-widgets.tsx");function Du(e){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(e)}function Mu(){Mu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new j(n||[]);return o(i,"_invoke",{value:k(e,r,l)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",p="executing",y="completed",_={};function v(){}function h(){}function b(){}var g={};u(g,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==r&&n.call(S,i)&&(g=S);var w=b.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Du(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=f;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=x(l,n);if(c){if(c===_)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?y:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,_;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Du(t)+" is not iterable")}return h.prototype=b,o(w,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function Ru(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function zu(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ru(a,n,o,i,l,"next",e)}function l(e){Ru(a,n,o,i,l,"throw",e)}i(void 0)}))}}function Fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Uu(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const qu=function(){var e=(0,Re.P)(),t=e.processContractsForV2,r=e.onChange,o=e.symbol,a=$t().activeSymbols,l=(0,n.useRef)(!1),c=Fu((0,n.useState)(""),2),u=c[0],s=c[1],d=(0,n.useCallback)((function(e){var t=l.current;return e.some((function(e){var r=!!t||1===e.exchange_is_open;return e.symbol===o&&r}))}),[o]),f=(0,n.useCallback)(function(){var e=zu(Mu().mark((function e(n){var a,c,u;return Mu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.current,c=!a&&n,u=o!=n&&n,s(n),!c&&!u){e.next=8;break}return e.next=7,r({target:{name:"symbol",value:n}});case 7:t();case 8:(0,i.setTradeURLParams)({symbol:n});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,t,o]);return(0,n.useEffect)((function(){var e=function(){var e=zu(Mu().mark((function e(){var t;return Mu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d(a)){e.next=4;break}e.t0=o,e.next=10;break;case 4:return e.next=6,(0,i.pickDefaultSymbol)(a);case 6:if(e.t1=e.sent,e.t1){e.next=9;break}e.t1="1HZ100V";case 9:e.t0=e.t1;case 10:t=e.t0,f(t),l.current=!0;case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a,d,f,o]),{symbol:u}};function Vu(e){return Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(e)}function Bu(e){return function(e){if(Array.isArray(e))return Hu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Hu(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Gu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gu(Object(r),!0).forEach((function(t){Wu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wu(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Vu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $u=(0,he.observer)((function(e){var t=e.digits,r=e.tick,n=(0,Re.P)(),a=n.setDigitStats,i=n.setTickData;return o().useEffect((function(){i(r)}),[r]),o().useEffect((function(){a(t)}),[t.join("-")]),null})),Ku=(0,he.observer)((function(){var e=(0,u.A)(),t=e.ui,r=e.common,n=e.contract_trade,a=e.portfolio,l=(0,ba.Y)().isMobile,c=n.accumulator_barriers_data,s=n.accumulator_contract_barriers_data,d=n.chart_type,f=n.granularity,m=n.has_crossed_accu_barriers,p=n.markers_array,y=n.updateChartType,_=n.updateGranularity,v=o().useRef(null),h=a.all_positions,b=t.is_chart_countdown_visible,g=t.is_chart_layout_default,E=t.is_dark_mode_on,S=t.is_positions_drawer_on,w=r.current_language,O=r.is_socket_opened,A=$t().activeSymbols,k=qu().symbol,x=(0,Re.P)(),C=x.barriers_flattened,T=x.chartStateChange,j=x.chart_layout,L=x.contract_type,P=x.exportLayout,N=x.has_alternative_source,I=x.has_barrier,D=x.main_barrier_flattened,M=x.setChartStatus,R=x.show_digits_stats,z=x.onChange,F=x.prev_contract_type,U=x.wsForget,q=x.wsForgetStream,V=x.wsSendRequest,B=x.wsSubscribe,H=(0,i.isAccumulatorContract)(L),G=Yu(Yu({countdown:b,isHighestLowestMarkerEnabled:!1,language:w.toLowerCase(),position:g?"bottom":"left",theme:E?"dark":"light"},H?{whitespace:190,minimumLeftBars:l?3:void 0}:{}),I?{whitespace:110}:{}),Y=c||{},W=Y.current_spot,$=Y.current_spot_time;o().useEffect((function(){var e;if((H||R)&&null!==(e=v.current)&&void 0!==e&&e.hasPredictionIndicators()){var t;null===(t=v.current)||void 0===t||t.triggerPopup((function(){return z({target:{name:"contract_type",value:F}})}))}}),[H,z,F,R]);var K=D?[D].concat(Bu(C)):C,J=0===f?8:24;return k&&A.length?o().createElement(Pu.GR,{ref:v,barriers:K,contracts_array:p,bottomWidgets:$u,crosshair:l?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:!0,chartControlsWidgets:null,chartStatusListener:function(e){return M(!e,!0)},chartType:d,initialData:{activeSymbols:JSON.parse(JSON.stringify(A))},chartData:{activeSymbols:JSON.parse(JSON.stringify(A))},feedCall:{activeSymbols:!1},enabledNavigationWidget:!l,enabledChartFooter:!1,id:"trade",isMobile:l,isVerticalScrollEnabled:!1,maxTick:l?J:void 0,granularity:R||H?0:f,requestAPI:V,requestForget:U,requestForgetStream:q,requestSubscribe:B,settings:G,allowTickChartTypeOnly:R||H,stateChangeListener:T,symbol:k,topWidgets:function(){return o().createElement("div",null)},isConnectionOpened:O,clearChart:!1,toolbarWidget:function(){return o().createElement(Iu.A,{updateChartType:y,updateGranularity:_})},importedLayout:j,onExportLayout:P,shouldFetchTradingTimes:!1,hasAlternativeSource:N,getMarketsOrder:function(e){var t="synthetic_index",r=e.some((function(e){return e.market===t}));return e.slice().sort((function(e,t){return e.display_name<t.display_name?-1:1})).map((function(e){return e.market})).reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),r?[t]:[])},should_zoom_out_on_yaxis:H,yAxisMargin:{top:l?76:106},isLive:!0,leftMargin:!l&&S?328:80},H&&o().createElement(Nu.A,{all_positions:h,current_spot:W,current_spot_time:$,has_crossed_accu_barriers:m,should_show_profit_text:!!s.accumulators_high_barrier,symbol:k,is_mobile:l})):null}));const Ju=Ku;function Xu(e){return Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xu(e)}function Zu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(r),!0).forEach((function(t){es(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function es(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Xu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rs(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ns=function(e){var t=e.is_dark_mode_on,r=ts(o().useState(!1),2),n=r[0],a=r[1],i=o().useRef(),l=ts(Ne("guide_dtrader_v2",{trade_types_selection:!1,trade_page:!1,positions_page:!1}),2),c=l[0],u=l[1],s=(c||{}).trade_types_selection,d=t?qe.fm.trade_type_selection.dark:qe.fm.trade_type_selection.light,f=function(){a(!1),u(Qu(Qu({},c),{},{trade_types_selection:!0}))};return o().useEffect((function(){return s||(i.current=setTimeout((function(){return a(!0)}),800)),function(){return clearTimeout(i.current)}}),[s]),s?null:o().createElement(De.M,{isOpened:n,isNonExpandable:!0,isMobile:!0,showHandleBar:!0,shouldCloseModalOnSwipeDown:!0,toggleModal:f,primaryButtonLabel:o().createElement(J.Localize,{i18n_default_text:"Got it"}),primaryButtonCallback:f},o().createElement(De.M.Header,{image:o().createElement(st,{src:d,title:"trade_types_selection"}),title:o().createElement(J.Localize,{i18n_default_text:"Manage your trade types"})}),o().createElement(De.M.Body,null,o().createElement(J.Localize,{i18n_default_text:"Pin, rearrange, or remove your favorite trade types for easy access."})))};const os=o().memo(ns);var as=r("../../node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),is=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneGripDotsVerticalBoldIcon.js"),ls=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneCircleMinusFillIcon.js");function cs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return us(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?us(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function us(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ss=function(e){var t=e.active,r=e.disabled,a=e.leftIcon,l=e.onLeftIconClick,c=e.onRightIconClick,u=e.rightIcon,s=e.title,d=o().createElement(is.A,{iconSize:"sm",fill:"var(--component-textIcon-normal-default)"}),f=o().createElement(ls.A,{fill:"var(--core-color-solid-red-700)",iconSize:"sm"}),m=cs((0,n.useState)(!1),2),p=m[0],y=m[1];return o().createElement("div",{className:(0,Te.A)("draggable-list-item",{"draggable-list-item--active":t})},o().createElement("div",{className:"draggable-list-item__left"},o().createElement("button",{className:"draggable-list-item__left-icon","data-testid":"dt_draggable_list_item_left_icon",onClick:l,disabled:r},a||d),o().createElement("div",{className:"draggable-list-item__title"},s)),o().createElement("button",{className:(0,Te.A)("draggable-list-item__icon",{"draggable-list-item__icon--disabled":r}),"data-testid":"dt_draggable_list_item_icon",onClick:function(){!(0,i.isTouchDevice)()&&c&&c()},onTouchMove:function(){p||y(!0)},onTouchEnd:function(){p||!c||r||c(),y(!1)},disabled:r},u||f))};function ds(e){return ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ds(e)}function fs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(r),!0).forEach((function(t){ps(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ps(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ds(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ds(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ys.apply(null,arguments)}function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vs(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var hs=function(e){var t=e.category,r=e.draggedItemId,n=e.onRightIconClick,a=e.show_editing_divider;return o().createElement("div",{className:a?"draggable-list-category":""},o().createElement(as.gL,{droppableId:t.id},(function(e){return o().createElement("div",ys({},e.droppableProps,{ref:e.innerRef,className:"draggable-list-category__droppable-area"}),o().createElement(bs,{items:t.items,draggedItemId:r,onRightIconClick:n}),e.placeholder)})))},bs=function(e){var t=e.items,r=e.draggedItemId,n=e.onRightIconClick;return o().createElement(o().Fragment,null,t.map((function(e,a){return e.id&&o().createElement(as.sx,{key:e.id,draggableId:e.id,index:a},(function(a){return o().createElement("div",ys({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{className:"draggable-list-category__item"}),o().createElement(ss,{title:e.title,onRightIconClick:function(){return n(e)},active:r===e.id,disabled:1===t.length}))}))})))},gs=function(e,t){var r=t.source,n=t.destination;if(!n)return e;var o=e.findIndex((function(e){return e.id===r.droppableId})),a=e.findIndex((function(e){return e.id===n.droppableId}));if(-1===o||-1===a)return e;var i=e[o],l=e[a],c=Array.from(i.items),u=_s(c.splice(r.index,1),1)[0];if(o===a)c.splice(n.index,0,u);else{var s=Array.from(l.items);s.splice(n.index,0,u),e[a]=ms(ms({},l),{},{items:s})}return e[o]=ms(ms({},i),{},{items:c}),Array.from(e)};const Es=function(e){var t=e.categories,r=e.onRightIconClick,n=e.onDrag,a=e.show_editing_divider,i=_s(o().useState(t),2),l=i[0],c=i[1],u=_s(o().useState(null),2),s=u[0],d=u[1];return o().useEffect((function(){return c(t)}),[t]),o().createElement(as.JY,{onDragEnd:function(e){if(d(null),e.destination){var t=gs(l,e);c(t),null==n||n(t)}},onDragStart:function(e){return d(e.draggableId)}},l.map((function(e){return o().createElement(hs,{key:e.id,category:e,draggedItemId:s,onRightIconClick:r,show_editing_divider:a})})))};var Ss=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneCirclePlusFillIcon.js");const ws=function(e){var t=e.title,r=e.selected,n=e.leftIcon,a=e.rightIcon,i=e.onLeftIconClick,l=e.onRightIconClick,c=e.onTradeTypeClick,u=o().createElement(Ss.A,{fill:"var(--core-color-solid-green-700)",iconSize:"sm"});return o().createElement("div",{className:(0,Te.A)("trade-type-list-item",{"trade-type-list-item--selected":r}),onClick:c,onKeyDown:c},n&&o().createElement("button",{className:"trade-type-list-item__left-icon","data-testid":"dt_trade_type_list_item_left_icon",onClick:i},n),o().createElement("div",{className:"trade-type-list-item__title"},t),l&&o().createElement("button",{className:"trade-type-list-item__icon","data-testid":"dt_trade_type_list_item_right_icon",onClick:l},a||u))};function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return As(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?As(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function As(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ks=function(e){var t,r=e.categories,n=e.isSelected,a=e.selectable,i=e.show_divider,l=e.onRightIconClick,c=e.onTradeTypeClick,u=Os(o().useState(r),2),s=u[0],d=u[1];return o().useEffect((function(){d(r)}),[r]),null!=r&&null!==(t=r[0])&&void 0!==t&&t.items.length?o().createElement(o().Fragment,null,null==s?void 0:s.map((function(e){var t;return o().createElement("div",{key:e.id,className:(0,Te.A)("trade-type-list-category",{"trade-type-list-category__border":e.items&&e.items.length>0&&i})},o().createElement("div",{className:"trade-type-list-category__items"},null===(t=e.items)||void 0===t?void 0:t.map((function(e){return o().createElement("div",{key:e.id},o().createElement(ws,{title:e.title,selected:!!a&&n(e.id),onRightIconClick:l&&function(){return l(e)},onTradeTypeClick:c}))}))))}))):null};const xs=function(e){var t=e.handleCustomizeTradeTypes,r=e.handleRemovePinnedClick,n=e.handleOnDrag,a=e.handleOnTradeTypeSelect,i=e.handleAddPinnedClick,l=e.is_editing,c=e.is_dark_mode_on,u=e.isTradeTypeSelected,s=e.savePinnedToLocalStorage,d=e.show_trade_type_list_divider,f=e.show_editing_divider,m=e.other_trade_types,p=e.pinned_trade_types;return o().createElement(o().Fragment,null,o().createElement("div",null,o().createElement("div",{className:"draggable-list-category-header"},o().createElement(Ie.E,{size:"sm",bold:!0,className:"draggable-list-category-header-title"},l&&o().createElement(J.Localize,{i18n_default_text:"Pinned"})),o().createElement(Ar.$n,{color:c?"white":"black",variant:"secondary",className:"draggable-list-category-header-button",onClick:l?s:t},l?o().createElement(J.Localize,{i18n_default_text:"Done"}):o().createElement(J.Localize,{i18n_default_text:"Customise"})))),o().createElement(De.A.Content,{className:"trade-types-dialog__content"},l?o().createElement(Es,{categories:p,onRightIconClick:r,onDrag:n,show_editing_divider:f}):o().createElement(ks,{categories:p,onTradeTypeClick:a,isSelected:u,selectable:!0,show_divider:d}),o().createElement(ks,{categories:m,onRightIconClick:l?i:void 0,onTradeTypeClick:l?void 0:a,isSelected:u,selectable:!l})))};function Cs(e){return Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cs(e)}function Ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(r),!0).forEach((function(t){Ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ts(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ls(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Cs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ps(e){return function(e){if(Array.isArray(e))return Ds(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Is(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Is(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Is(e,t){if(e){if("string"==typeof e)return Ds(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ds(e,t):void 0}}function Ds(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ms=function(e){var t,r,a,i,l,c=e.contract_type,u=e.onTradeTypeSelect,s=e.trade_types,d=e.is_dark_mode_on,f=Ns(o().useState(!1),2),m=f[0],p=f[1],y=Ns(o().useState(!1),2),_=y[0],v=y[1],h=o().useRef(null),b=null!==(t=localStorage.getItem("pinned_trade_types"))&&void 0!==t?t:"[]",g=(0,n.useMemo)((function(){var e;return null!==(e=(0,je.xL)(b))&&void 0!==e?e:[]}),[b]),E=Ns((0,n.useState)([]),2),S=E[0],w=E[1],O=Ns((0,n.useState)(g),2),A=O[0],k=O[1],x=(0,n.useMemo)((function(){return e=[],s.forEach((function(t){var r;e.push({id:t.value,title:null!==(r=t.text)&&void 0!==r?r:""})})),e;var e}),[s]),C=(0,n.useCallback)((function(){var e=z(R(g),x);return 0===e.length&&e.push.apply(e,Ps(x.slice(0,x.length))),e}),[g,x]),T=(0,n.useCallback)((function(){var e=C(),t=[{id:"pinned",title:(0,J.localize)("Pinned"),items:e}],r=[{id:"other",items:x.filter((function(t){return!e.some((function(e){return e.id===t.id}))}))}];k(t),w(r)}),[C,x]);(0,n.useEffect)((function(){T()}),[T]),(0,n.useEffect)((function(){D()}),[]);var j,L,P=function(e,t,r){return e.map((function(e){return"pinned"===e.id?js(js({},e),{},{items:"add"===r?[].concat(Ps(e.items),[t]):e.items.filter((function(e){return e.id!==t.id}))}):e}))},N=function(e,t){return e.map((function(e){return js(js({},e),{},{items:e.items.filter((function(e){return e.id!==t.id}))})}))},I=function(e,t){return e.map((function(e){return"other"===e.id?js(js({},e),{},{items:(0,Mt.c1)(s,[].concat(Ps(e.items),[t]))}):e}))},D=function(){setTimeout((function(){var e=0;if(h.current){var t=h.current.querySelector('button[data-state="selected"]');t&&(e=t.getBoundingClientRect().x-(window.innerWidth-t.getBoundingClientRect().width)/2||0),h.current.scrollBy({left:e,top:0})}}),0)},M=function(e){return Rt([c,e])||c===e},R=function(e){return e.flatMap((function(e){return e.items}))},z=function(e,t){var r=t.map((function(e){return e.id}));return e.filter((function(e){return r.includes(e.id)}))},F=(j=C(),L=j.some((function(e){return e.id===c}))?null:R(S).find((function(e){return e&&(e.id===c||Rt([e.id,c]))})),[].concat(Ps(j),[L]).filter(Boolean)),U=F.length>=2||R(S).length>0,q=!(null===(r=S[0])||void 0===r||null===(a=r.items)||void 0===a||!a.length),V=x.length!==(null===(i=A[0])||void 0===i||null===(l=i.items)||void 0===l?void 0:l.length),B={handleCustomizeTradeTypes:function(){v(!0)},handleRemovePinnedClick:function(e){k((function(t){return N(t,e)})),w((function(t){return I(t,e)}))},handleOnDrag:function(e){k(e)},handleOnTradeTypeSelect:function(e){u(e,"trade_type_page",C().length),D(),p(!1)},handleAddPinnedClick:function(e){w((function(t){return N(t,e)})),k((function(t){return P(t,e,"add")}))},is_editing:_,is_dark_mode_on:d,isTradeTypeSelected:M,savePinnedToLocalStorage:function(){localStorage.setItem("pinned_trade_types",JSON.stringify(A)),v(!1)},show_trade_type_list_divider:q,show_editing_divider:V,other_trade_types:S,pinned_trade_types:A},H=[{id:1,component:o().createElement(xs,B)},{id:2,component:o().createElement(pi,{show_trigger_button:!1,is_open_by_default:!0,show_description_in_a_modal:!1})}];return o().createElement("div",{className:"trade__trade-types",ref:h},F.map((function(e){var t=e.title,r=e.id;return o().createElement(Ba.v.Selectable,{key:r,onChipSelect:function(e){return u(e,"main_trade_page",C().length)},selected:M(r)},o().createElement(Ie.E,{size:"sm"},t))})),U&&o().createElement(Ar.$n,{key:"trade-types-all",onClick:function(){T(),p(!0)},variant:"tertiary",className:"trade__trade-types-header",color:d?"white":"black"},o().createElement(Ie.E,{size:"sm",bold:!0,underlined:!0,color:"var(--component-button-label-color-blackWhite-tertiary)"},o().createElement(J.Localize,{i18n_default_text:"View all"}))),o().createElement(De.A.Root,{className:(0,Te.A)("trade-types-dialog",{"trade-types-dialog--is_editing":_}),isOpen:m,expandable:!1,onClose:function(){p(!1),v(!1)}},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},_?o().createElement(o().Fragment,null,o().createElement(De.A.Header,{title:o().createElement("div",{className:"trade-types-dialog__title"},o().createElement(J.Localize,{i18n_default_text:"Trade types"}))}),o().createElement(xs,B)):o().createElement(xi,{header:Mi,pages:H,title:o().createElement(J.Localize,{i18n_default_text:"Trade types"}),next_icon:Ua.A,onNextButtonClick:function(){return(0,Fo.YL)(c,"trade_type_page")}}))),m&&o().createElement(os,{is_dark_mode_on:d}))};const Rs=o().memo(Ms);function zs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fs(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Us=(0,he.observer)((function(){var e=zs(o().useState(!1),2),t=e[0],r=e[1],a=o().useRef(null),i=(0,u.A)(),l=i.client,c=l.is_logged_in,s=l.is_switching,d=i.common,f=d.current_language,m=d.network_status,p=i.ui.is_dark_mode_on,y=(0,Re.P)(),_=y.active_symbols,v=y.contract_type,h=y.has_cancellation,b=y.is_accumulator,g=y.is_multiplier,E=y.is_market_closed,S=y.onChange,w=y.onMount,O=y.onUnmount,A=y.symbol,k=y.proposal_info,x=y.trade_types,C=y.trade_type_tab,T=Ut(),j=T.trade_types,L=T.resetTradeTypes,P=zs(Ne("guide_dtrader_v2",{trade_types_selection:!1,trade_page:!1,positions_page:!1}),1)[0],N=(0,Mt.H1)(x,v,C),I=N.every((function(e){var t;return null==k||null===(t=k[e])||void 0===t?void 0:t.has_error})),D=1===N.length||g||I,M=o().useMemo((function(){return _.map((function(e){return{text:e.display_name,value:e.symbol}}))}),[_]),R=o().useCallback((function(e,t,r){var n,o=null===(n=j.find((function(t){return t.text===e.target.textContent})))||void 0===n?void 0:n.value;S({target:{name:"contract_type",value:o}}),(0,Fo.bC)(o||"",t,A,r)}),[j,S,A]),z=o().useCallback((function(){var e=null==a?void 0:a.current;if(e){var t=e.getBoundingClientRect().bottom,n=window.innerHeight-Ye;r(t<=n)}}),[]);return o().useEffect((function(){return w(),O}),[f,m.class]),(0,n.useEffect)((function(){s&&L()}),[s]),o().createElement(Tt,{onScroll:z},M.length&&j.length&&!s?o().createElement(o().Fragment,null,o().createElement("div",{className:"trade"},o().createElement(Rs,{contract_type:v,onTradeTypeSelect:R,trade_types:j,is_dark_mode_on:p}),o().createElement($o,null),(0,Lu.E)(v)&&o().createElement(Sr,null),o().createElement(_i,null,o().createElement(ju,null)),o().createElement("div",{className:"trade__chart-tooltip"},o().createElement("section",{className:(0,Te.A)("trade__chart",{"trade__chart--with-borderRadius":!b}),style:{height:Ze({is_accumulator:b,symbol:A,has_cancellation:h,contract_type:v})},ref:a},o().createElement(Ju,null))),b&&o().createElement(vt,null)),o().createElement("div",{className:(0,Te.A)("trade__parameter",{"trade__parameter--with-button":!E})},o().createElement(_i,{is_minimized_visible:t,is_minimized:!0},o().createElement(ju,{is_minimized:!0})),!E&&o().createElement(La,null)),!(null!=P&&P.trade_page)&&c&&o().createElement(ha,{type:"trade_page",is_dark_mode_on:p})):o().createElement(Ce.Loading.DTraderV2,null),o().createElement(Ma,null),o().createElement(cr,null),o().createElement(Fa,{error_fields:["stop_loss","take_profit","date_start","stake","amount"],should_show_snackbar:D}))}));const qs=Us;var Vs=r("./src/AppV2/Utils/positions-utils.ts"),Bs=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneSearchFillIcon.js"),Hs=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneBriefcaseFillIcon.js");const Gs=function(e){var t=e.isClosedTab,r=e.noMatchesFound,n=r?Bs.A:Hs.A;return o().createElement("div",{className:"empty-positions__".concat(t?Vs.Eu.CLOSED.toLowerCase():Vs.Eu.OPEN.toLowerCase())},o().createElement("div",{className:"icon","data-testid":"dt_empty_state_icon"},o().createElement(n,{iconSize:"2xl"})),o().createElement("div",{className:"message"},o().createElement(Ie.E,{bold:!0,size:"lg",color:"quill-typography__color--subtle"},r&&o().createElement(J.Localize,{i18n_default_text:"No matches found"}),!r&&(t?o().createElement(J.Localize,{i18n_default_text:"No closed positions"}):o().createElement(J.Localize,{i18n_default_text:"No open positions"}))),o().createElement(Ie.E,{size:"sm",centered:!0,color:"quill-typography__color--subtle"},r&&o().createElement(J.Localize,{i18n_default_text:"Try changing or removing filters to view available positions."}),!r&&(t?o().createElement(J.Localize,{i18n_default_text:"Your closed positions will be shown here."}):o().createElement(J.Localize,{i18n_default_text:"Your open positions will appear here."})))))};var Ys=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedStopwatchCaptionRegularIcon.js"),Ws=function(e){var t=e.currentTick,r=e.date_expiry,n=e.isSold,a=e.serverTime,l=e.tick_count,c=l?"".concat(null!=t?t:0,"/").concat(l," ").concat((0,i.getCardLabels)().TICKS.toLowerCase()):r&&a?o().createElement(Ce.RemainingTime,{as:"span",end_time:r,getCardLabels:i.getCardLabels,start_time:a,key:"remaining-time"}):null;return!r||(null==a?void 0:a.unix())>+r||n?o().createElement(Mr.v,{className:"status",label:(0,i.getCardLabels)().CLOSED,variant:"custom",color:"custom",size:"sm"}):c?o().createElement(Mr.v,{className:"timer",icon:o().createElement(Ys.A,{key:"open-contract-card",fill:"var(--component-tag-label-color-default)"}),label:c,variant:"custom",size:"sm"}):null};const $s=function(e){var t=e.formatted_date,r=e.formatted_time;return t&&r?o().createElement(Mr.v,{color:"info",className:"forward-starting","data-testid":"dt_forward-starting",label:o().createElement(J.Localize,{i18n_default_text:"Starts on {{formatted_date}}, {{formatted_time}}",values:{formatted_date:t,formatted_time:r}}),showIcon:!1,size:"sm",variant:"fill"}):null};function Ks(e){return Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ks(e)}function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Js.apply(null,arguments)}function Xs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ks(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ks(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ks(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ed(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ed(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var td="left",rd="right",nd={trackMouse:!0,preventScrollOnSwipe:!0};const od=function(e){var t,r,n,a=e.className,l=void 0===a?"contract-card":a,c=e.contractInfo,u=e.currency,s=e.hasActionButtons,d=e.isSellRequested,f=e.onCancel,m=e.onClick,p=e.onClose,y=e.redirectTo,_=e.serverTime,v=Qs(o().useState(!1),2),h=v[0],b=v[1],g=Qs(o().useState(!1),2),E=g[0],S=g[1],w=Qs(o().useState(!1),2),O=w[0],A=w[1],k=Qs(o().useState(!1),2),x=k[0],C=k[1],T=c,j=T.buy_price,L=T.contract_type,P=T.display_name,N=T.purchase_time,I=T.sell_time,D=T.shortcode,M=T.limit_order,R=null!=M?M:{take_profit:{},stop_loss:{}},z=R.take_profit,F=R.stop_loss,U=(0,i.isHighLow)({shortcode:D}),q=(0,i.getTradeTypeName)(null!=L?L:"",{isHighLow:U,showMainTitle:!0}),V="cancellation"in c?null===(t=c.cancellation)||void 0===t?void 0:t.date_expiry:null,B="tick_count"in c&&c.tick_count?(0,i.getCurrentTick)(c):null,H="".concat(q," ").concat((0,i.getTradeTypeName)(null!=L?L:"",{isHighLow:U})).trim(),G="underlying_symbol"in c?(0,i.getMarketName)(null!==(r=c.underlying_symbol)&&void 0!==r?r:""):P,Y=(0,i.isCryptoContract)(c.underlying),W=(0,i.isMultiplierContract)(L),$=!!I||(0,i.isEnded)(c),K=(0,Vs.Dd)(c),J=(0,i.isValidToCancel)(c),X=(0,i.isValidToSell)(c)&&!d,Z=d&&O,Q=d&&E,ee=W&&!Y,te=(0,i.isForwardStarting)(null!=D?D:"",N),re=(0,i.getStartTime)(null!=D?D:""),ne=(0,i.hasForwardContractStarted)(null!=D?D:""),oe=te&&!!re&&!ne&&!$,ae=(!ee||ee&&$)&&!oe,ie=y?Se.NavLink:"div",le=function(e){C(e===td)},ce=(0,Qo.useSwipeable)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(r),!0).forEach((function(t){Zs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onSwipedLeft:function(){return le(td)},onSwipedRight:function(){return le(rd)}},nd)),ue=function(e,t){e.preventDefault(),e.stopPropagation(),t?(null==f||f(e),A(!0)):(null==p||p(e),S(!0))},se=(n=[],null!=z&&z.order_amount&&n.push("TP"),null!=F&&F.order_amount&&n.push("SL"),J&&n.push("DC"),n),de=!!se.length&&!$;return o().useEffect((function(){$&&s&&b(!0)}),[$,s]),L?o().createElement("div",{className:(0,Te.A)("".concat(l,"-wrapper"),{deleted:h})},o().createElement(ie,Js({},s?ce:{},{className:(0,Te.A)(l,{"show-buttons":x,"has-cancel-button":J,lost:Number(K)<0,won:Number(K)>=0}),onClick:m,onDragStart:function(e){return e.preventDefault()},to:y}),o().createElement("div",{className:"".concat(l,"__body")},o().createElement("div",{className:"".concat(l,"__details")},o().createElement(Ce.IconTradeTypes,{type:U?"".concat(L,"_barrier"):L,size:16}),o().createElement("div",{className:"tag__wrapper"},de&&se.map((function(e){return o().createElement(Mr.v,{className:"risk-management",label:e,key:e,variant:"custom",size:"sm"})})),ae&&o().createElement(Ws,Js({currentTick:B,isSold:$,serverTime:_},c)),oe&&o().createElement($s,{formatted_date:(0,i.formatDate)((0,i.toMoment)(parseInt(re||"")),"DD MMM YYYY"),formatted_time:(0,i.formatTime)(parseInt(re||""),"HH:mm [GMT]")}))),o().createElement("div",{className:"".concat(l,"__details")},o().createElement(Ie.E,{className:"trade-type",size:"sm"},H),o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},o().createElement(Ce.Money,{amount:j,currency:u,show_currency:!0}))),o().createElement("div",{className:"".concat(l,"__details")},o().createElement(Ie.E,{size:"sm",className:"symbol",color:"quill-typography__color--subtle"},G),o().createElement(Ie.E,{className:"profit",size:"sm"},o().createElement(Ce.Money,{amount:K,currency:u,has_sign:!0,show_currency:!0})))),s&&o().createElement("div",{className:"buttons"},J&&o().createElement("button",{className:(0,Te.A)({loading:Z}),disabled:Number(c.profit)>=0||d,onClick:function(e){return ue(e,!0)}},Z?o().createElement("div",{className:"circle-loader","data-testid":"dt_button_loader"}):o().createElement(o().Fragment,null,o().createElement(Kt.O,{bold:!0,as:"div",className:"label",color:"quill-typography__color--prominent"},(0,i.getCardLabels)().CANCEL),V&&o().createElement(Kt.O,{bold:!0,as:"div",className:"label",color:"quill-typography__color--prominent"},o().createElement(Ce.RemainingTime,{end_time:V,format:"mm:ss",getCardLabels:i.getCardLabels,start_time:_})))),o().createElement("button",{className:(0,Te.A)({loading:Q}),disabled:!X,onClick:ue},Q?o().createElement("div",{className:"circle-loader","data-testid":"dt_button_loader"}):o().createElement(Kt.O,{bold:!0,as:"div",className:"label",color:"var(--component-textIcon-static-prominentDark)"},(0,i.getCardLabels)().CLOSE))))):null};var ad=["hasButtonsDemo","onClickCancel","onClickSell","positions","setHasButtonsDemo"];function id(){return id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},id.apply(null,arguments)}const ld=function(e){var t=e.hasButtonsDemo,r=e.onClickCancel,n=e.onClickSell,a=e.positions,l=void 0===a?[]:a,c=e.setHasButtonsDemo,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ad);return o().useEffect((function(){var e;return t&&c&&(e=setTimeout((function(){return c(!1)}),720)),function(){e&&clearTimeout(e)}}),[]),l.length?o().createElement("div",{className:(0,Te.A)("contract-card-list",{"contract-card-list--has-buttons-demo":t&&!l[0].contract_info.sell_time})},l.map((function(e){var t=e.contract_info.contract_id;return o().createElement(od,id({key:t,contractInfo:e.contract_info,hasActionButtons:!!n,isSellRequested:e.is_sell_requested,onCancel:function(){return t&&(null==r?void 0:r(t))},onClose:function(){return t&&(null==n?void 0:n(t))},redirectTo:t?{pathname:(0,i.getContractPath)(t),state:{from_table_row:!0}}:""},u))}))):null};var cd=r("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneLoaderBoldIcon.js");function ud(e){return function(e){if(Array.isArray(e))return sd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dd=function(e){var t=e.isLoadingMore,r=e.hasBottomMargin,n=e.positions,a=e.currency,l=function(e){return(0,i.toMoment)(e).format("DD MMM YYYY")},c=null==n?void 0:n.map((function(e){var t=e.contract_info.purchase_time_unix;return t&&l(t)})),u=ud(new Set(c));return null!=n&&n.length?o().createElement(o().Fragment,null,o().createElement("div",{className:(0,Te.A)("contract-cards-sections",r&&"contract-cards-sections--has-bottom-margin")},u.map((function(e){return o().createElement("div",{className:"contract-cards-section",key:e},o().createElement(Ie.E,{as:"p",className:"contract-cards-section__title",bold:!0,size:"sm"},e),o().createElement(ld,{positions:n.filter((function(t){var r=t.contract_info.purchase_time_unix;return r&&l(r)===e})),currency:a}))}))),t&&o().createElement("div",{className:"load-more-spinner","data-testid":"dt_load_more_spinner"},o().createElement(cd.A,{iconSize:"md"}))):null};const fd=o().memo(dd);function md(e){return function(e){if(Array.isArray(e))return _d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||yd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yd(e,t){if(e){if("string"==typeof e)return _d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_d(e,t):void 0}}function _d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const vd=function(e){var t=e.contractTypeFilter,r=e.onApplyContractTypeFilter,n=pd(o().useState(!1),2),a=n[0],i=n[1],l=pd(o().useState(t),2),c=l[0],u=l[1],s=function(e){var t=e.target.id;c.includes(t)?u(md(c.filter((function(e){return e!==t})))):u([].concat(md(c),[t]))};return o().createElement(o().Fragment,null,o().createElement(Ba.v.Standard,{className:"filter__chip",dropdown:!0,isDropdownOpen:a,onClick:function(){return i(!a)},selected:!!c.length,size:"md"},o().createElement(Ie.E,{size:"sm"},o().createElement(J.Localize,{i18n_default_text:"Trade types"})),!!c.length&&o().createElement(Ie.E,null,"(",c.length,")")),o().createElement(De.A.Root,{isOpen:a,onClose:function(){i(!1),u(t)},position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:o().createElement(J.Localize,{i18n_default_text:"Filter by trade types"})}),o().createElement(De.A.Content,{className:"filter__item__wrapper"},Mt.Ou.map((function(e){var t=e.tradeType,r=e.id;return o().createElement(De.e,{checked:c.includes(r),checkboxPosition:"right",className:"filter__item",id:r,key:r,label:t,onChange:s,size:"md"})}))),o().createElement(De.A.Footer,{alignment:"horizontal",isSecondaryButtonDisabled:!c.length,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Apply"}),onAction:function(){return r(c)}},secondaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Clear All"}),onAction:function(){return u([])}},shouldCloseOnSecondaryButtonClick:!1}))))};var hd=r("../../node_modules/@deriv-com/quill-ui/dist/components/SelectionControl/radio/radio-group/index.js"),bd=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedChevronRightSmBoldIcon.js");const gd=function(e){var t=e.customTimeRangeFilter,r=e.setShowDatePicker;return o().createElement("button",{className:"custom-time-filter__wrapper",onClick:function(){return r(!0)}},o().createElement(Ie.E,{size:"md",className:"custom-time-filter__label"},o().createElement(J.Localize,{i18n_default_text:"Custom"})),t&&o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},t),o().createElement(bd.A,{className:"custom-time-filter__icon",fill:"var(--component-textIcon-normal-default)"}))};var Ed=r("../../node_modules/moment/moment.js"),Sd=r.n(Ed);function wd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Od(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Od(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Od(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Ad=function(e){var t=e.applyHandler,r=e.handleDateChange,n=e.onClose,a=e.isOpen,l=e.setCustomTimeRangeFilter,c=wd(o().useState(),2),u=c[0],s=c[1],d=wd(o().useState([]),2),f=d[0],m=d[1];return o().createElement(De.A.Root,{isOpen:a,onClose:n,position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:o().createElement(J.Localize,{i18n_default_text:"Choose a date range"})}),o().createElement(De.A.Content,null,o().createElement(Ji.l,{allowPartialRange:!0,className:"date-picker__action-sheet",locale:"en-GB",selectRange:!0,onFormattedDate:function(e){var t=e.trim(),r=t.endsWith("-");s(r?t.substring(0,t.length-1):t)},onChange:m,optionsConfig:Vs.m$,tileDisabled:function(e){var t=e.date;return Date.parse(t.toDateString())>Date.parse((0,i.toMoment)().toString())},maxDate:new Date})),o().createElement(De.A.Footer,{alignment:"vertical",isPrimaryButtonDisabled:!u,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Apply"}),onAction:function(){l(u),Array.isArray(f)&&f.length&&r({from:(0,i.toMoment)(f[0]),to:f[1]?(0,i.toMoment)(f[1]):Sd()(f[0]).endOf("day")},{shouldFilterContractTypes:!0}),t()}}})))};function kd(e){return kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(e)}function xd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xd(Object(r),!0).forEach((function(t){Td(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Td(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=kd(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kd(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ld(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ld(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Pd=[{value:"0",label:o().createElement(J.Localize,{i18n_default_text:"All time"})},{value:"Today",label:o().createElement(J.Localize,{i18n_default_text:"Today"})},{value:"Yesterday",label:o().createElement(J.Localize,{i18n_default_text:"Yesterday"})},{value:"7",label:o().createElement(J.Localize,{i18n_default_text:"Last 7 days"})},{value:"30",label:o().createElement(J.Localize,{i18n_default_text:"Last 30 days"})},{value:"60",label:o().createElement(J.Localize,{i18n_default_text:"Last 60 days"})},{value:"90",label:o().createElement(J.Localize,{i18n_default_text:"Last 90 days"})}];const Nd=function(e){var t,r=e.customTimeRangeFilter,n=e.handleDateChange,a=e.setTimeFilter,l=e.setCustomTimeRangeFilter,c=e.setNoMatchesFound,u=e.timeFilter,s=jd(o().useState(!1),2),d=s[0],f=s[1],m=jd(o().useState(!1),2),p=m[0],y=m[1],_=r||u||"0",v=!(!r&&!u),h=function(){a(""),l(""),f(!1),n({to:(0,i.toMoment)().endOf("day"),is_batch:!0},{shouldFilterContractTypes:!0}),c(!1)};return o().createElement(o().Fragment,null,o().createElement(Ba.v.Standard,{className:"filter__chip",dropdown:!0,isDropdownOpen:d,onClick:function(){return f(!d)},selected:v,size:"md"},o().createElement(Ie.E,{size:"sm"},r||(null===(t=Pd.find((function(e){return e.value===(u||"0")})))||void 0===t?void 0:t.label))),o().createElement(De.A.Root,{isOpen:d,onClose:function(){return f(!1)},position:"left",expandable:!1},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:o().createElement(J.Localize,{i18n_default_text:"Filter by time"})}),o().createElement(De.A.Content,{className:"filter__item__wrapper"},o().createElement(hd.z,{className:"filter__item--radio",onToggle:function(e){var t,r=e.target.value;if("0"!==r){a(r),f(!1);var o={Today:{from:(0,i.toMoment)().startOf("day"),to:(0,i.toMoment)().endOf("day")},Yesterday:{from:(0,i.toMoment)().subtract(1,"days").startOf("day"),to:(0,i.toMoment)().subtract(1,"days").endOf("day")},default:{from:(0,i.toMoment)().startOf("day").subtract(Number(r),"day").add(1,"s"),to:(0,i.toMoment)().endOf("day")}};n(Cd(Cd({},null!==(t=o[r])&&void 0!==t?t:o.default),{},{is_batch:!0}),{shouldFilterContractTypes:!0})}else h()},selected:_,size:"sm"},Pd.map((function(e){var t=e.value,r=e.label;return o().createElement(hd.z.Item,{value:t,label:r,key:t,radioButtonPosition:"right"})}))),o().createElement(gd,{customTimeRangeFilter:r,setShowDatePicker:y})),o().createElement(De.A.Footer,{alignment:"vertical",secondaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Reset"}),onAction:h},shouldCloseOnSecondaryButtonClick:!1}))),p&&o().createElement(Ad,{applyHandler:function(){y(!1),f(!1)},handleDateChange:n,isOpen:p,onClose:function(){return y(!1)},setCustomTimeRangeFilter:l}))};const Id=function(e){var t=e.currency,r=e.hasBottomAlignment,n=e.is_bold,a=void 0===n||n,l=e.positionsCount,c=void 0===l?"":l,u=e.totalProfitLoss;return o().createElement("div",{className:(0,Te.A)("total-profit-loss",r&&"bottom"),"data-testid":"dt_total_profit_loss"},o().createElement(Ie.E,{bold:a,size:"sm",className:"total-profit-loss__label"},r?o().createElement(J.Localize,{i18n_default_text:"Last {{positionsCount}} contracts:",values:{positionsCount:c}}):(0,i.getCardLabels)().TOTAL_PROFIT_LOSS),o().createElement(Ie.E,{className:(0,Te.A)("total-profit-loss__amount",{positive:+u>0,negative:+u<0}),bold:a,size:"sm"},o().createElement(Ce.Money,{amount:u,currency:t,show_currency:!0,has_sign:!0})))};const Dd=function(e){var t=e.isClosedTab,r=(0,go.q)().positions,n=r.setClosedContractTypeFilter,o=r.setOpenContractTypeFilter,a=r.openContractTypeFilter,i=r.closedContractTypeFilter;return{contractTypeFilter:t?i:a,setContractTypeFilter:t?n:o}};const Md=function(){var e=(0,go.q)().positions;return{timeFilter:e.timeFilter,setTimeFilter:e.setTimeFilter,customTimeRangeFilter:e.customTimeRangeFilter,setCustomTimeRangeFilter:e.setCustomTimeRangeFilter}};function Rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Fd=(0,he.observer)((function(e){var t,r,n=e.hasButtonsDemo,a=e.isClosedTab,i=e.setHasButtonsDemo,l=Dd({isClosedTab:a}),c=l.contractTypeFilter,s=l.setContractTypeFilter,d=Md(),f=d.timeFilter,m=d.setTimeFilter,p=d.customTimeRangeFilter,y=d.setCustomTimeRangeFilter,_=Rd(o().useState([]),2),v=_[0],h=_[1],b=Rd(o().useState(!1),2),g=b[0],E=b[1],S=(0,u.A)(),w=S.common,O=S.client,A=S.portfolio,k=(a?{}:w).server_time,x=void 0===k?void 0:k,C=O.currency,T=A.active_positions,j=A.is_active_empty,L=A.is_loading,P=A.onClickCancel,N=A.onClickSell,I=A.onMount,D=function(){var e=o().useContext(pe);if(!e)throw new Error("useReportsStore must be used within ReportsStoreProvider");return e}().profit_table,M=D.clearTable,R=D.data,z=D.fetchNextBatch,F=D.handleScroll,U=D.handleDateChange,q=D.is_empty,V=D.is_loading,B=D.onMount,H=D.onUnmount,G=o().useMemo((function(){return R.map((function(e){return{contract_info:e}}))}),[R]),Y=o().useMemo((function(){return a?G:T}),[T,a,G]),W=(a?!f&&!p&&!c.length:!c.length)&&(a?q:j),$=W||g,K=!!v.length&&(a||(null===(t=v[0])||void 0===t||null===(r=t.contract_info)||void 0===r?void 0:r.status)),J=a?V&&!v.length:L,X=!a||!(!f&&!p),Z=a?o().createElement(fd,{currency:C,positions:v,isLoadingMore:V,hasBottomMargin:X}):o().createElement(ld,{currency:C,hasButtonsDemo:n,onClickCancel:a?void 0:P,onClickSell:a?void 0:N,positions:v,setHasButtonsDemo:i,serverTime:x});return o().useEffect((function(){var e=(0,Vs.H9)(Y,c);c.length?(h(e),a||E(!e.length)):(E(!1),h(Y)),a&&E(!e.length&&!!(f||p||c.length))}),[a,Y,c,f,p]),o().useEffect((function(){return a?B(!0):I(),function(){a&&(M(),H())}}),[]),J||!K&&!$?o().createElement(Ce.Loading.DTraderV2,{is_positions:!0,is_closed_tab:a}):o().createElement("div",{className:"positions-page__".concat(a?Vs.Eu.CLOSED.toLowerCase():Vs.Eu.OPEN.toLowerCase()),onScroll:a?function(e){a&&F(e,!0)}:void 0},!W&&o().createElement("div",{className:"positions-page__filter__wrapper"},a?o().createElement(Nd,{timeFilter:f,setTimeFilter:m,handleDateChange:U,customTimeRangeFilter:p,setCustomTimeRangeFilter:y,setNoMatchesFound:E}):o().createElement(vd,{contractTypeFilter:c,onApplyContractTypeFilter:function(e){s(e),a&&(M(),z(!0))}})),$?o().createElement(Gs,{isClosedTab:a,noMatchesFound:g}):K&&o().createElement(o().Fragment,null,X&&o().createElement(Id,{positionsCount:v.length,currency:C,hasBottomAlignment:a,totalProfitLoss:(0,Vs.jw)(v)}),Z))}));const Ud=Fd;function qd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Bd=(0,he.observer)((function(){var e=qd(o().useState(!1),2),t=e[0],r=e[1],n=qd(o().useState((0,i.getPositionsV2TabIndexFromURL)()),2),a=n[0],l=n[1],c=qd(Ne("guide_dtrader_v2",{trade_types_selection:!1,trade_page:!1,positions_page:!1}),1)[0],s=(0,Se.useHistory)(),d=(0,u.A)(),f=d.client.is_logged_in,m=d.ui.is_dark_mode_on,p=(0,go.q)().positions.onUnmount,y=[{id:Vs.Eu.OPEN.toLowerCase(),title:o().createElement(J.Localize,{i18n_default_text:"Open"}),content:o().createElement(Ud,{hasButtonsDemo:t,setHasButtonsDemo:r})},{id:Vs.Eu.CLOSED.toLowerCase(),title:o().createElement(J.Localize,{i18n_default_text:"Closed"}),content:o().createElement(Ud,{isClosedTab:!0})}];return o().useEffect((function(){return(0,Vs.RN)(y[a].id),null!=c&&c.positions_page&&r(!0),function(){s.location.pathname.startsWith("/contract/")||p()}}),[]),o().createElement(Tt,null,o().createElement("div",{className:"positions-page"},o().createElement(wr.o.Container,{contentStyle:"fill",className:"positions-page__tabs",size:"md",selectedTabIndex:a,onChangeTab:function(e){l(e),(0,Vs.RN)(y[e].id)}},o().createElement(wr.o.List,null,y.map((function(e){var t=e.id,r=e.title;return o().createElement(wr.o.Trigger,{key:t},r)}))),o().createElement(wr.o.Content,{className:"positions-page__tabs-content"},y.map((function(e){var t=e.id,r=e.content;return o().createElement(wr.o.Panel,{key:t},r)}))))),!(null!=c&&c.positions_page)&&f&&o().createElement(ha,{type:"positions_page",is_dark_mode_on:m,callback:function(){return r(!0)}}))}));const Hd=function(e){var t=e.label,r=e.value,n=e.date,a=e.time;return o().createElement("div",{className:"entry-exit-details__table-row"},o().createElement("div",{className:"entry-exit-details__table-cell"},o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},t)),o().createElement("div",{className:"entry-exit-details__table-cell"},o().createElement(Ie.E,{size:"sm"},r),o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},n),o().createElement(Kt.O,{color:"quill-typography__color--subtle"},a)))};const Gd=function(e){var t=e.title,r=e.children,n=e.className;return o().createElement("div",{className:(0,Te.A)("card-wrapper",n)},t&&o().createElement(Ie.E,{size:"sm",bold:!0,className:"title"},t),r)};function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yd.apply(null,arguments)}var Wd=function(e){if(e){var t=new Date(1e3*e),r=Sd()(t);return{date:(0,i.formatDate)(r,"DD MMM YYYY"),time:(0,i.formatTime)(e,"HH:mm:ss [GMT]")}}};const $d=function(e){var t=e.contract_info,r=t.entry_tick_time,a=t.entry_spot_display_value,l=t.exit_tick_time,c=t.date_start,u=t.exit_tick_display_value,s=(0,n.useMemo)((function(){var e;return{entry:r?Wd(r):void 0,exit:l?Wd(l):void 0,start:c?Wd(c):void 0,end:(0,i.getEndTime)(t)?Wd(null!==(e=(0,i.getEndTime)(t))&&void 0!==e?e:0):void 0}}),[t]),d=a?(0,i.addComma)(a):null,f=u?(0,i.addComma)(u):null;return o().createElement(Gd,{title:o().createElement(J.Localize,{i18n_default_text:"Entry & exit details"}),className:"entry-exit-details"},o().createElement("div",{className:"entry-exit-details__table"},s.start&&o().createElement(Hd,{label:o().createElement(J.Localize,{i18n_default_text:"Start time"}),value:s.start.date,time:s.start.time}),s.entry&&d&&o().createElement(Hd,Yd({label:o().createElement(J.Localize,{i18n_default_text:"Entry spot"}),value:d},s.entry)),s.end&&o().createElement(Hd,{label:o().createElement(J.Localize,{i18n_default_text:"Exit time"}),value:s.end.date,time:s.end.time}),s.exit&&f&&o().createElement(Hd,Yd({label:o().createElement(J.Localize,{i18n_default_text:"Exit spot"}),value:f},s.exit))))};var Kd=r("../../node_modules/@deriv-com/quill-ui/dist/components/Pagination/index.js");function Jd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Zd=function(e){var t=e.history,r=void 0===t?[]:t,a=e.currency,l=e.is_multiplier,c=Jd((0,n.useState)(0),2),u=c[0],s=c[1],d=Math.ceil(r.length/4),f=o().useCallback((function(e){s(e.currentPage-1)}),[]);if(!r.length)return null;var m=r.reduce((function(e,t,n){return n%4||e.push(r.slice(n,n+4)),e}),[]).map((function(e,t){return{id:t,component:o().createElement(o().Fragment,null,e.map((function(e,t){return o().createElement("div",{key:"take-profit-history-".concat(t),className:"take-profit-history__table-row"},o().createElement("div",{className:bt()("take-profit-history__table-cell","take-profit-history__table-cell--left")},o().createElement(Kt.O,{color:"quill-typography__color--subtle",size:"sm"},(0,i.formatDate)(e.order_date,"DD MMM YYYY")),o().createElement(Kt.O,{color:"quill-typography__color--subtle"},(0,i.formatTime)(Number(e.order_date)))),o().createElement("div",{className:"take-profit-history__table-cell"},o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},e.display_name),o().createElement(Ie.E,{size:"sm"},0===Math.abs(Number(e.order_amount))?(0,J.localize)("Cancelled"):"".concat((0,i.formatMoney)(String(a),String(e.order_amount),!0)," ").concat(a))))})))}}));return o().createElement(Gd,{title:l?o().createElement(J.Localize,{i18n_default_text:"TP & SL history"}):o().createElement(J.Localize,{i18n_default_text:"TP history"}),className:"take-profit-history"},o().createElement("div",{className:bt()("take-profit-history__table",{"take-profit-history__table--fixed-height":r.length>4})},o().createElement(xi,{classname:"take-profit-history__carousel",current_index:u,is_swipeable:!0,pages:m,setCurrentIndex:s})),d>1&&o().createElement(Kd.d,{initialPage:u+1,contentLength:r.length,contentPerPage:4,hideChevron:!0,onClickPagination:f,variant:"bullet"}))};const Qd=function(e){var t=e.contract_info;return o().createElement(Gd,{title:o().createElement(J.Localize,{i18n_default_text:"How do I earn a payout?"})},o().createElement(Ie.E,{size:"sm"},t.longcode))};const ef=function(){var e=(0,u.A)(),t=e.contract_replay,r=e.contract_trade.getContractById,o=t.contract_store,a=t.onMount,i=t.onUnmount,l=o.contract_info,c=r(l.contract_id),s=(0,kt.useLocation)();return(0,n.useEffect)((function(){var e=s.pathname.split("/").pop();e!=l.contract_id&&a(parseInt(e))}),[s.pathname,a,i,l.contract_id]),{contract_info:l,contract:c,is_loading:!l.contract_id}};var tf=r("./src/Modules/Contract/Containers/replay-chart.tsx");const rf=(0,he.observer)((function(){var e=ef().contract_info,t=(0,i.isResetContract)(e.contract_type),r=(0,i.isAccumulatorContract)(e.contract_type);return o().createElement("div",{className:"contract-details-chart"},o().createElement(tf.A,{is_accumulator_contract:r,is_reset_contract:t,is_vertical_scroll_disabled:!0}))}));var nf,of=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.ts"),af=r("./src/Stores/Modules/Trading/Helpers/logic.ts");function lf(e){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(e)}function cf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(r),!0).forEach((function(t){sf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=lf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lf(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var df=function(e,t){var r,n,o,a,l,c=e.tick_count,u=e.tick_passed,s=e.contract_type,d=Number(c)<2?t.TICK:t.TICKS,f=(0,i.isAccumulatorContract)(s)?"".concat(u,"/").concat(c," ").concat(t.TICKS):"".concat(c," ").concat(d);return sf(sf(sf(sf(sf({},t.REFERENCE_ID,[null!==(r=e.transaction_ids)&&void 0!==r&&r.buy?"".concat(e.transaction_ids.buy," (").concat(t.BUY,")"):"",null!==(n=e.transaction_ids)&&void 0!==n&&n.sell?"".concat(e.transaction_ids.sell," (").concat(t.SELL,")"):""]),t.STAKE,e.buy_price&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.buy_price,!0)," ").concat(e.currency):""),t.DURATION,Number(c)>0?f:"".concat(null!==(o=(0,i.getDurationTime)(e))&&void 0!==o?o:""," ").concat(null!==(a=(0,i.getDurationUnitText)((0,i.getDurationPeriod)(e)))&&void 0!==a?a:"")),t.PAYOUT_PER_POINT,null!==(l=e.display_number_of_contracts)&&void 0!==l?l:""),t.POTENTIAL_PAYOUT,e.payout)},ff=function(e,t){var r,n,o,a,l,c,u=df(e,t),s=function(e,t){var r,n;if(null!==(r=e.cancellation)&&void 0!==r&&r.ask_price&&e.currency)return n=(0,i.isUserCancelled)(e)?t.EXECUTED:(0,af.d)(e)?t.EXPIRED:t.ACTIVE,["".concat((0,i.formatMoney)(e.currency,e.cancellation.ask_price,!0)," ").concat(e.currency),"(".concat(n,")")]}(e,t);return uf(uf(sf(sf(sf(sf({},t.REFERENCE_ID,u[t.REFERENCE_ID]),t.MULTIPLIER,e.multiplier?"x".concat(e.multiplier):""),t.STAKE,u[t.STAKE]),t.COMMISSION,e.commission?"".concat((0,i.formatMoney)(e.currency,e.commission,!0)," ").concat(e.currency):""),s&&sf({},t.DEAL_CANCEL_FEE,s)),{},sf(sf(sf({},t.TAKE_PROFIT,null!==(r=e.limit_order)&&void 0!==r&&null!==(n=r.take_profit)&&void 0!==n&&n.order_amount&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.limit_order.take_profit.order_amount,!0)," ").concat(e.currency):t.NOT_SET),t.STOP_LOSS,null!==(o=e.limit_order)&&void 0!==o&&null!==(a=o.stop_loss)&&void 0!==a&&a.order_amount&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.limit_order.stop_loss.order_amount,!0)," ").concat(e.currency):t.NOT_SET),t.STOP_OUT_LEVEL,null!==(l=e.limit_order)&&void 0!==l&&null!==(c=l.stop_out)&&void 0!==c&&c.order_amount&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.limit_order.stop_out.order_amount,!0)," ").concat(e.currency):""))},mf=function(e,t){var r,n=e.barrier,o=e.purchase_time,a=e.shortcode,l=(0,i.isForwardStarting)(null!=a?a:"",o),c=(0,i.getStartTime)(null!=a?a:""),u=(0,i.hasForwardContractStarted)(null!=a?a:""),s=l&&!!c&&!u,d=df(e,t);return sf(sf(sf(sf(sf({},t.REFERENCE_ID,d[t.REFERENCE_ID]),t.DURATION,d[t.DURATION]),t.BARRIER,null!==(r=s?"TBD":n)&&void 0!==r?r:""),t.STAKE,d[t.STAKE]),t.POTENTIAL_PAYOUT,d[t.POTENTIAL_PAYOUT])},pf=function(e,t){var r,n,o,a=df(e,t);return sf(sf(sf(sf(sf(sf({},t.REFERENCE_ID,a[t.REFERENCE_ID]),t.DURATION,a[t.DURATION]),t.BARRIER,null!==(r=e.barrier)&&void 0!==r?r:""),t.PAYOUT_PER_POINT,"".concat(a[t.PAYOUT_PER_POINT]," ").concat(e.currency)),t.STAKE,a[t.STAKE]),t.TAKE_PROFIT,null!==(n=e.limit_order)&&void 0!==n&&null!==(o=n.take_profit)&&void 0!==o&&o.order_amount&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.limit_order.take_profit.order_amount,!0)," ").concat(e.currency):t.NOT_SET)},yf=function(e,t){var r,n=df(e,t),o=null!==(r=(0,i.getDurationTime)(e))&&void 0!==r?r:"";return sf(sf(sf(sf(sf({},t.REFERENCE_ID,n[t.REFERENCE_ID]),t.DURATION,"".concat(o," ").concat(+o>1?(0,i.getUnitMap)().t.name_plural:(0,i.getUnitMap)().t.name_singular)),t.TARGET,(0,of.Vb)(e)),t.STAKE,n[t.STAKE]),t.POTENTIAL_PAYOUT,n[t.POTENTIAL_PAYOUT])},_f=function(e,t){var r,n,o=df(e,t);return sf(sf(sf(sf(sf({},t.REFERENCE_ID,o["".concat(t.REFERENCE_ID)]),t.DURATION,"".concat(null!==(r=(0,i.getDurationTime)(e))&&void 0!==r?r:""," ").concat(null!==(n=(0,i.getDurationUnitText)((0,i.getDurationPeriod)(e)))&&void 0!==n?n:"")),t.STRIKE_PRICE,((0,i.isResetContract)(e.contract_type)?(0,i.addComma)(e.entry_spot_display_value):(0,of.Vb)(e))||" - "),t.PAYOUT_PER_POINT,"".concat(o[t.PAYOUT_PER_POINT]," ").concat(e.currency)),t.STAKE,o[t.STAKE])},vf=function(e,t){var r,n,o=df(e,t);return sf(sf(sf(sf(sf(sf({},t.REFERENCE_ID,o["".concat(t.REFERENCE_ID)]),t.DURATION,"".concat(null!==(r=(0,i.getDurationTime)(e))&&void 0!==r?r:""," ").concat(null!==(n=(0,i.getDurationUnitText)((0,i.getDurationPeriod)(e)))&&void 0!==n?n:"")),t.HIGH_BARRIER,e.high_barrier),t.LOW_BARRIER,e.low_barrier),t.STAKE,o[t.STAKE]),t.POTENTIAL_PAYOUT,e.payout&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.payout,!0)," ").concat(e.currency):"")},hf=function(e,t){var r,n=df(e,t);return sf(sf(sf(sf(sf({},t.REFERENCE_ID,n[t.REFERENCE_ID]),t.DURATION,n[t.DURATION]),t.BARRIER,null!==(r=e.barrier)&&void 0!==r?r:""),t.STAKE,n[t.STAKE]),t.POTENTIAL_PAYOUT,e.payout&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.payout,!0)," ").concat(e.currency):"")},bf=function(e,t){var r,n,o,a,l=df(e,t),c=e.contract_type==i.CONTRACT_TYPES.LB_CALL;return a=null!==(r=e.transaction_ids)&&void 0!==r&&r.sell?c?t.LOW_SPOT:t.HIGH_SPOT:c?t.INDICATIVE_LOW_SPOT:t.INDICATIVE_HIGH_SPOT,sf(sf(sf(sf(sf({},t.REFERENCE_ID,l[t.REFERENCE_ID]),t.DURATION,l[t.DURATION]),t.MULTIPLIER,null!==(n=e.multiplier)&&void 0!==n?n:""),a,null!==(o=e.barrier)&&void 0!==o?o:""),t.STAKE,l[t.STAKE])},gf=function(e,t){var r,n,a,l,c=df(e,t);return uf(uf(uf(sf(sf(sf({},t.REFERENCE_ID,c[t.REFERENCE_ID]),t.DURATION,[c[t.DURATION],{caption:o().createElement(J.Localize,{key:"reset_time",i18n_default_text:"The reset time is {{ reset_time }}",values:{reset_time:void 0!==e.tick_count?"".concat(Math.floor(Number(e.tick_count)/2)," ").concat(Number(e.tick_count)<2?t.TICK:t.TICKS):(0,i.formatResetDuration)(e)}})}]),t.BARRIER,null!==(r=e.barrier)&&void 0!==r?r:""),e.reset_barrier?sf({},t.RESET_BARRIER,e.reset_barrier):{}),e.reset_time?sf({},t.RESET_TIME,null!==(a=e.reset_time,l=new Date(1e3*a),n=["".concat(l.getUTCDate().toString().padStart(2,"0")," ").concat(l.toLocaleString("en-GB",{month:"short",timeZone:"UTC"})," ").concat(l.getUTCFullYear()),"".concat(l.getUTCHours().toString().padStart(2,"0"),":").concat(l.getUTCMinutes().toString().padStart(2,"0"),":").concat(l.getUTCSeconds().toString().padStart(2,"0")," GMT")])&&void 0!==n?n:""):{}),{},sf(sf({},t.STAKE,c[t.STAKE]),t.POTENTIAL_PAYOUT,e.payout&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.payout,!0)," ").concat(e.currency):""))},Ef=function(e,t){var r=df(e,t);return sf(sf(sf(sf({},t.REFERENCE_ID,r[t.REFERENCE_ID]),t.DURATION,r[t.DURATION]),t.STAKE,r[t.STAKE]),t.POTENTIAL_PAYOUT,e.payout&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.payout,!0)," ").concat(e.currency):"")},Sf=function(e,t){var r,n,o=df(e,t);return sf(sf(sf(sf(sf({},t.REFERENCE_ID,o[t.REFERENCE_ID]),t.DURATION,o[t.DURATION]),t.SELECTED_TICK,[null!==(r=e.selected_tick)&&void 0!==r?r:"",{caption:null!==(n=e.barrier)&&void 0!==n?n:""}]),t.STAKE,o[t.STAKE]),t.POTENTIAL_PAYOUT,e.payout&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.payout,!0)," ").concat(e.currency):"")},wf=(sf(sf(sf(sf(sf(sf(sf(sf(sf(sf(nf={},i.CONTRACT_TYPES.TURBOS.LONG,pf),i.CONTRACT_TYPES.TURBOS.SHORT,pf),i.CONTRACT_TYPES.MULTIPLIER.DOWN,ff),i.CONTRACT_TYPES.MULTIPLIER.UP,ff),i.CONTRACT_TYPES.MATCH_DIFF.MATCH,yf),i.CONTRACT_TYPES.MATCH_DIFF.DIFF,yf),i.CONTRACT_TYPES.EVEN_ODD.EVEN,yf),i.CONTRACT_TYPES.EVEN_ODD.ODD,yf),i.CONTRACT_TYPES.OVER_UNDER.OVER,yf),i.CONTRACT_TYPES.OVER_UNDER.UNDER,yf),sf(sf(sf(sf(sf(sf(sf(sf(sf(sf(nf,i.CONTRACT_TYPES.PUT,mf),i.CONTRACT_TYPES.PUTE,mf),i.CONTRACT_TYPES.CALLE,mf),i.CONTRACT_TYPES.CALL,mf),i.CONTRACT_TYPES.TOUCH.ONE_TOUCH,mf),i.CONTRACT_TYPES.TOUCH.NO_TOUCH,mf),i.CONTRACT_TYPES.ACCUMULATOR,(function(e,t){var r,n,o,a=df(e,t);return uf(uf(sf({},t.REFERENCE_ID,a[t.REFERENCE_ID]),uf({},(e.is_expired||e.is_sold)&&sf({},t.DURATION,a[t.DURATION]))),{},sf(sf({},t.GROWTH_RATE,e.growth_rate?"".concat((0,i.getGrowthRatePercentage)(e.growth_rate),"%"):""),t.STAKE,a[t.STAKE]),uf({},(null===(r=e.limit_order)||void 0===r?void 0:r.take_profit)&&sf({},t.TAKE_PROFIT,null!==(n=e.limit_order)&&void 0!==n&&null!==(o=n.take_profit)&&void 0!==o&&o.order_amount&&e.currency?"".concat((0,i.formatMoney)(e.currency,e.limit_order.take_profit.order_amount,!0)," ").concat(e.currency):t.NOT_SET)))})),i.CONTRACT_TYPES.VANILLA.CALL,_f),i.CONTRACT_TYPES.VANILLA.PUT,_f),i.CONTRACT_TYPES.END.IN,vf),sf(sf(sf(sf(sf(sf(sf(sf(sf(sf(nf,i.CONTRACT_TYPES.END.OUT,vf),i.CONTRACT_TYPES.STAY.IN,vf),i.CONTRACT_TYPES.STAY.OUT,vf),i.CONTRACT_TYPES.ASIAN.UP,hf),i.CONTRACT_TYPES.ASIAN.DOWN,hf),i.CONTRACT_TYPES.LB_HIGH_LOW,(function(e,t){var r,n,o,a,i,l=df(e,t);return uf(uf(sf(sf(sf({},t.REFERENCE_ID,l[t.REFERENCE_ID]),t.DURATION,l[t.DURATION]),t.MULTIPLIER,null!==(r=e.multiplier)&&void 0!==r?r:""),sf(sf({},null!==(n=e.transaction_ids)&&void 0!==n&&n.sell?t.HIGH_SPOT:t.INDICATIVE_HIGH_SPOT,null!==(o=e.high_barrier)&&void 0!==o?o:""),null!==(a=e.transaction_ids)&&void 0!==a&&a.sell?t.LOW_SPOT:t.INDICATIVE_LOW_SPOT,null!==(i=e.low_barrier)&&void 0!==i?i:"")),{},sf({},t.STAKE,l[t.STAKE]))})),i.CONTRACT_TYPES.LB_CALL,bf),i.CONTRACT_TYPES.LB_PUT,bf),i.CONTRACT_TYPES.RESET.CALL,gf),i.CONTRACT_TYPES.RESET.PUT,gf),sf(sf(sf(sf(sf(nf,i.CONTRACT_TYPES.TICK_HIGH_LOW.HIGH,Sf),i.CONTRACT_TYPES.TICK_HIGH_LOW.LOW,Sf),i.CONTRACT_TYPES.FALL,vf),i.CONTRACT_TYPES.RUN_HIGH_LOW.HIGH,Ef),i.CONTRACT_TYPES.RUN_HIGH_LOW.LOW,Ef));const Of=function(e){var t=e;if(t.contract_type){var r=wf[t.contract_type];return{details:r?r(t,(0,i.getCardLabelsV2)()):{}}}};function Af(e){return Af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(e)}function kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Cf=function(e){var t=e.contract_info,r=Of(t),n=r?r.details:{};return o().createElement(Gd,{title:o().createElement(J.Localize,{i18n_default_text:"Order Details"})},o().createElement("div",{className:"order-details"},o().createElement("div",{className:"order-details__table"},Object.entries(n).map((function(e){var t=kf(e,2),r=t[0],n=t[1];return o().createElement("div",{className:"order-details__table-row",key:r},o().createElement("div",{className:"order-details__table-row-cell"},o().createElement(Ie.E,{size:"sm",color:"quill-typography__color--subtle"},r)),o().createElement("div",{className:"order-details__table-row-cell"},Array.isArray(n)?n.map((function(e,t){var n;return["number","string"].includes(Af(e))?o().createElement(Ie.E,{key:"".concat(r,"_").concat(t),size:"sm"},e):o().createElement(Kt.O,{key:"".concat(r,"_").concat(t),size:"sm",color:"quill-typography__color--subtle"},null!==(n=null==e?void 0:e.caption)&&void 0!==n?n:"")})):o().createElement(Ie.E,{size:"sm"},n)))})))))};function Tf(e){return Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(e)}function jf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Tf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tf(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lf={isTakeProfitVisible:!1,isDealCancellationVisible:!1,isStopLossVisible:!1,isTpHistoryVisible:!1},Pf=function(e){return jf(jf(jf(jf(jf({},i.CONTRACT_TYPES.ACCUMULATOR,{isTakeProfitVisible:!0,isDealCancellationVisible:!1,isStopLossVisible:!1,isTpHistoryVisible:!0}),i.CONTRACT_TYPES.MULTIPLIER.UP,{isTakeProfitVisible:!0,isDealCancellationVisible:!0,isStopLossVisible:!0,isTpHistoryVisible:!0}),i.CONTRACT_TYPES.MULTIPLIER.DOWN,{isTakeProfitVisible:!0,isDealCancellationVisible:!0,isStopLossVisible:!0,isTpHistoryVisible:!0}),i.CONTRACT_TYPES.TURBOS.LONG,{isTakeProfitVisible:!0,isDealCancellationVisible:!1,isStopLossVisible:!1,isTpHistoryVisible:!0}),i.CONTRACT_TYPES.TURBOS.SHORT,{isTakeProfitVisible:!0,isDealCancellationVisible:!1,isStopLossVisible:!1,isTpHistoryVisible:!0})[e]||Lf},Nf=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedCircleInfoSmRegularIcon.js");function If(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Df(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Df(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Df(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Mf=function(e){var t=e.header_content,r=e.body_content,n=e.info_message,a=If(o().useState(!1),2),i=a[0],l=a[1];return o().createElement(o().Fragment,null,o().createElement("button",{onClick:function(){return l(!i)}},o().createElement(Nf.A,{fill:"var(--component-textIcon-normal-default)"})),o().createElement(De.M,{isNonExpandable:!0,shouldCloseModalOnSwipeDown:!0,isOpened:i,toggleModal:l,primaryButtonLabel:o().createElement(J.Localize,{i18n_default_text:"Got it"}),shouldCloseOnPrimaryButtonClick:!0,isMobile:!0,showHandleBar:!0},o().createElement(De.M.Header,{title:t}),o().createElement(De.M.Body,null,o().createElement("div",{className:"risk-management-info-modal__container"},o().createElement(Ie.E,{size:"md"},r),n&&o().createElement(qc.H,{message:n,size:"sm",status:"info"})))))};const Rf=(0,he.observer)((function(e){var t=e.format,r=void 0===t?"mm:ss":t,n=(0,u.A)().common.server_time,a=(ef().contract_info.cancellation||{}).date_expiry;return!a||n.unix()>+a?null:o().createElement(Mr.v,{className:"deal-cancellation-badge","data-testid":"dt_deal_cancellation_badge",icon:o().createElement(Ys.A,{key:"open-contract-card",fill:"var(--component-tag-label-color-default)"}),label:o().createElement(Ce.RemainingTime,{end_time:a,format:r,getCardLabels:i.getCardLabelsV2,start_time:n}),size:"sm",variant:"custom"})}));function zf(e){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(e)}function Ff(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=zf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zf(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Vf=(0,he.observer)((function(e){var t,r,n,a,l,c,u=e.label,s=e.modal_body_content,d=e.is_deal_cancellation,f=void 0!==d&&d,m=e.value,p=e.type,y=Uf(o().useState(Boolean(m)),2),_=y[0],v=y[1],h=Uf(o().useState(!1),2),b=h[0],g=h[1],E=Uf(o().useState(!1),2),S=E[0],w=E[1],O=Uf(o().useState(),2),A=O[0],k=O[1],x=Uf(o().useState(!1),2),C=x[0],T=x[1],j=ef(),L=j.contract_info,P=j.contract,N=L.contract_type,I=L.currency,D=L.validation_params,M=P.validation_errors,R=P.updateLimitOrder,z=P.clearContractUpdateConfigValues,F=(0,i.isValidToCancel)(L),U=(0,i.isAccumulatorContract)(N),q=(0,Vs.Dd)(L);o().useEffect((function(){return m&&(k(m),v(Boolean(m))),function(){return z()}}),[z,m]);var V=F,B=Math.abs(m),H="contract_update_".concat(p),G=null!==(t=null===(r=M[H])||void 0===r?void 0:r[0])&&void 0!==t?t:"",Y=F?o().createElement(J.Localize,{i18n_default_text:"Take profit and/or stop loss are not available while deal cancellation is active."}):null,W=Ff(Ff(Ff({},i.CONTRACT_TYPES.ACCUMULATOR,o().createElement(J.Localize,{i18n_default_text:"Take profit can’t be adjusted for ongoing accumulator contracts."})),i.CONTRACT_TYPES.MULTIPLIER.UP,Y),i.CONTRACT_TYPES.MULTIPLIER.DOWN,Y),$=p&&(null!==(n=null==D||null===(a=D[p])||void 0===a?void 0:a.min)&&void 0!==n?n:0),K=p&&(null!==(l=null==D||null===(c=D[p])||void 0===c?void 0:c.max)&&void 0!==l?l:0),X=function(){var e="take_profit"===p?(0,J.localize)("take profit"):(0,J.localize)("stop loss");return A?$&&+A<+$?(0,J.localize)("Please enter a {{field_label}} amount that's at least {{min_value}}.",{field_label:e,min_value:$}):K&&+A>+K?(0,J.localize)("Maximum {{field_label}} allowed is {{max_value}}.",{field_label:e,max_value:K}):G:(0,J.localize)("Please enter a {{field_label}} amount.",{field_label:e})},Z=C?X():"";return o().createElement("div",{className:"risk-management-item__container"},o().createElement("div",{className:"risk-management-item"},o().createElement("span",{className:"risk-management-item__title"},o().createElement(Ie.E,{size:"sm"},u),o().createElement(Mf,{header_content:u,body_content:s,info_message:W[N]||""})),!f&&(U&&I?o().createElement(Ie.E,{size:"sm"},(0,i.formatMoney)(I,B,!0)," ",I):o().createElement(hi.j,{disabled:V,checked:_,onChange:function(e){var t;(z(),e)?(g(!0),k(""),w(!0),T(!1)):(null===(t=P.onChange)||void 0===t||t.call(P,{name:"has_contract_update_".concat(p),value:e}),R(),v(!_))}})),F&&f&&o().createElement(Rf,null)),!U&&_&&I&&o().createElement(wi.A,{variant:"fill",inputSize:"md",disabled:b,textAlignment:"center",value:"".concat((0,i.formatMoney)(I,"stop_loss"==p?-B:B,!0)," ").concat(I),onClick:function(){z(),k(B),g(!0),T(!1)},onFocus:function(){return g(!0)}}),o().createElement(De.A.Root,{expandable:!1,isOpen:b,position:"left",onClose:function(){w(!1),g(!1),T(!1)}},o().createElement(De.A.Portal,{shouldCloseOnDrag:!0},o().createElement(De.A.Header,{title:u}),o().createElement(De.A.Content,{className:"risk-management-item__action-sheet-content"},b&&o().createElement(De.T,{allowDecimals:!0,allowSign:!1,className:"text-field--custom",customType:"commaRemoval",decimals:(0,i.getDecimalPlaces)(I),message:Z,minusDisabled:Number(A)-1<=0,name:p,noStatusIcon:!0,onChange:function(e){var t,r=e.target.value;k(r),T(!0),null===(t=P.onChange)||void 0===t||t.call(P,{name:"contract_update_".concat(p),value:r})},placeholder:(0,J.localize)("Amount"),regex:/[^0-9.,]/g,status:Z?"error":"neutral",shouldRound:!1,textAlignment:"center",inputMode:"decimal",unitLeft:(0,i.getCurrencyDisplayCode)(I),value:A,variant:"fill"}),!!q&&o().createElement(Id,{currency:(0,i.getCurrencyDisplayCode)(I),is_bold:!1,totalProfitLoss:q})),o().createElement(De.A.Footer,{shouldCloseOnPrimaryButtonClick:!1,primaryAction:{content:o().createElement(J.Localize,{i18n_default_text:"Save"}),onAction:function(){T(!0);var e=X();if(e){var t;null===(t=P.onChange)||void 0===t||t.call(P,{name:H,value:e})}else{var r;if(S)null===(r=P.onChange)||void 0===r||r.call(P,{name:"has_contract_update_".concat(p),value:!0}),w(!1);R(),g(!1)}}}}))))}));const Bf=Vf;const Hf=(0,he.observer)((function(){var e,t,r=ef().contract_info,n=r.limit_order;return Pf(null!==(e=r.contract_type)&&void 0!==e?e:"").isTakeProfitVisible?o().createElement(Bf,{label:o().createElement(J.Localize,{i18n_default_text:"Take profit"}),modal_body_content:o().createElement(J.Localize,{i18n_default_text:"When your profit reaches or exceeds the set amount, your trade will be closed automatically."}),value:null==n||null===(t=n.take_profit)||void 0===t?void 0:t.order_amount,type:"take_profit"}):null}));const Gf=(0,he.observer)((function(){var e,t,r=ef().contract_info,n=r.limit_order;return Pf(null!==(e=r.contract_type)&&void 0!==e?e:"").isStopLossVisible?o().createElement(Bf,{label:o().createElement(J.Localize,{i18n_default_text:"Stop loss"}),modal_body_content:o().createElement(J.Localize,{i18n_default_text:"When your loss reaches or exceeds the set amount, your trade will be closed automatically."}),value:null==n||null===(t=n.stop_loss)||void 0===t?void 0:t.order_amount,type:"stop_loss"}):null}));const Yf=(0,he.observer)((function(){var e,t=ef().contract_info,r=Pf(null!==(e=t.contract_type)&&void 0!==e?e:"").isDealCancellationVisible;return(0,i.isValidToCancel)(t)&&r&&(0,i.isOpen)(t)?o().createElement(Gd,null,o().createElement(Bf,{label:o().createElement(J.Localize,{i18n_default_text:"Deal cancellation"}),modal_body_content:o().createElement(J.Localize,{i18n_default_text:"When this is active, you can cancel your trade within the chosen time frame. Your stake will be returned without loss."}),is_deal_cancellation:!0})):null}));var Wf=r("../../node_modules/@deriv-com/utils/dist/deriv-utils.js");function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$f.apply(null,arguments)}var Kf=(0,he.observer)((function(e){var t=e.contract_info,r=t.bid_price,n=t.currency,a=t.contract_id,l=t.cancellation,c=(void 0===l?{}:l).date_expiry,s=t.profit,d=t.contract_type,f=(0,u.A)(),m=f.contract_replay,p=f.common.server_time,y=m.onClickCancel,_=m.onClickSell,v=m.is_sell_requested,h=(0,i.isValidToSell)(t),b=(0,i.isValidToCancel)(t),g=(0,i.isMultiplierContract)(d),E=(0,i.getCardLabelsV2)(),S=Wf.DW.formatMoney(r||0,{currency:n}),w=Number(s)<0&&b,O=w?"":"".concat(S," ").concat(n),A="".concat(E.CLOSE," ").concat(O),k={color:"black-white",size:"lg",fullWidth:!0};return o().createElement("div",{className:"contract-details-footer--container"},g?o().createElement(o().Fragment,null,o().createElement("span",{className:"contract-details-footer-button__wrapper"},o().createElement(Ar.$n,$f({label:A,isLoading:v,disabled:w,onClick:function(){return _(a)}},k))),b&&o().createElement("span",{className:"contract-details-footer-button__wrapper"},o().createElement(Ar.$n,$f({onClick:function(){return y(a)},label:o().createElement(o().Fragment,null,E.CANCEL," ",o().createElement(Ce.RemainingTime,{as:"span",end_time:c,format:"mm:ss",getCardLabels:i.getCardLabelsV2,start_time:p})),disabled:Number(s)>=0,variant:"secondary"},k)))):o().createElement("span",{className:"contract-details-footer-button__wrapper"},o().createElement(Ar.$n,$f({label:h?"".concat(E.CLOSE," ").concat(S," ").concat(n):E.RESALE_NOT_OFFERED,isLoading:v&&h,isOpaque:!0,onClick:h?function(){return _(a)}:void 0,disabled:!h,variant:"primary"},k))))}));const Jf=Kf;const Xf=function(e){var t=e.class_name,r=e.contract_info,n=e.server_time,a=r.purchase_time,l=r.sell_time,c=r.shortcode,u=!!l||(0,i.isEnded)(r),s=(0,i.isForwardStarting)(null!=c?c:"",a),d=(0,i.getStartTime)(null!=c?c:""),f=(0,i.hasForwardContractStarted)(null!=c?c:"");return s&&!!d&&!f&&!u?o().createElement("div",{className:(0,Te.A)("banner__wrapper",t)},o().createElement("div",{className:"banner__content--left"},o().createElement(Kt.O,{size:"sm",className:"banner__text"},o().createElement(J.Localize,{i18n_default_text:"This contract starts on"})),o().createElement(Kt.O,{bold:!0,size:"sm",className:"banner__text"},(0,i.formatDate)((0,i.toMoment)(parseInt(d||"")),"DD MMM YYYY"),", ",(0,i.formatTime)(parseInt(d||""),"HH:mm [GMT]"))),o().createElement(Ie.E,{bold:!0,size:"md",className:"banner__timer",as:"div"},o().createElement(Xt.A,{fill:"var(--component-textIcon-static-prominentDark)"}),o().createElement(Ce.RemainingTime,{as:"span",className:"banner__timer__countdown",end_time:parseInt(d||""),getCardLabels:i.getCardLabels,start_time:n,key:"remaining-time"}))):null};var Zf=r("../../node_modules/@deriv/quill-icons/dist/esm/react/LabelPaired/LabelPairedArrowLeftSmBoldIcon.js");const Qf=(0,he.observer)((function(){var e=(0,Se.useLocation)().state,t=(0,Se.useHistory)(),r=(0,u.A)().common.routeBackInApp;return o().createElement("header",{className:"header contract-details-header-v2"},o().createElement(o().Suspense,{fallback:o().createElement("div",null)},o().createElement(Jo.K,{variant:"tertiary",icon:o().createElement(Zf.A,{height:"22px",width:"13px","data-testid":"arrow",key:"arrow"}),className:"arrow",color:"black-white",onClick:function(){return!(0,i.isEmptyObject)(e)&&e.from_table_row?t.goBack():r(t)}}),o().createElement(Ie.E,{size:"md",bold:!0,color:"quill-typography__color--prominent"},o().createElement(J.Localize,{i18n_default_text:"Contract Details"}))))}));function em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tm(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tm(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rm=(0,he.observer)((function(){var e,t,r=ef(),n=r.contract_info,a=r.is_loading,l=n.contract_id,c=n.currency,s=n.contract_type,d=n.limit_order,f=null!=d?d:{take_profit:{},stop_loss:{}},m=f.take_profit,p=f.stop_loss,y=em(o().useState([]),2),_=y[0],v=y[1],h=(0,u.A)().common.server_time,b=Pf(null!=s?s:""),g=b.isTakeProfitVisible,E=b.isStopLossVisible,S=(0,i.isValidToSell)(n),w=o().useCallback((function(e){e&&i.WS.contractUpdateHistory(e).then((function(e){v(e.contract_update_history.sort((function(e,t){return Number(null==t?void 0:t.order_date)-Number(null==e?void 0:e.order_date)})))})).catch((function(){return null}))}),[]);if(o().useEffect((function(){w(l)}),[l,null==m?void 0:m.order_amount,null==p?void 0:p.order_amount,w]),a)return o().createElement(Ce.Loading.DTraderV2,{is_contract_details:!0});var O=(0,i.isMultiplierContract)(n.contract_type),A=(0,i.isValidToCancel)(n),k=((0,i.hasContractEntered)(n)||(0,i.isForwardStarting)(null!==(e=null==n?void 0:n.shortcode)&&void 0!==e?e:"",n.purchase_time))&&(0,i.isOpen)(n),x=Pf(null!==(t=n.contract_type)&&void 0!==t?t:""),C=x.isTpHistoryVisible,T=x.isDealCancellationVisible,j=O&&A,L=(0,i.isOpen)(n)&&(g||E)&&(S||T);return(0,i.isAccumulatorContract)(n.contract_type)&&(L=(0,i.isOpen)(n)&&Boolean(d)),o().createElement(o().Fragment,null,o().createElement(Qf,null),o().createElement("div",{className:bt()("contract-details",{"contract-details--two-buttons":k&&j,"contract-details--one-button":k&&!j})},o().createElement(Xf,{contract_info:n,server_time:h}),o().createElement(od,{contractInfo:n,serverTime:h,currency:c}),o().createElement(rf,null),o().createElement(Yf,null),L&&o().createElement(Gd,null,o().createElement(Hf,null),o().createElement(Gf,null)),o().createElement(Cf,{contract_info:n}),o().createElement(Qd,{contract_info:n}),o().createElement($d,{contract_info:n}),C&&_.length>0&&o().createElement(Zd,{history:_,currency:c,is_multiplier:O})),k&&o().createElement(Jf,{contract_info:n}))}));const nm=rm;const om=[{path:i.routes.trade,component:qs,exact:!0,default:!1},{path:i.routes.trader_positions,component:Bd,is_authenticated:!0,default:!1},{path:i.routes.contract,component:nm,is_authenticated:!0,default:!1},{path:"/*",component:(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.ts"))})),default:!1}];var am=r("./src/Modules/Page404/index.ts");function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(null,arguments)}const lm=(0,he.observer)((function(){var e=(0,u.A)(),t=e.client,r=e.common,a=e.portfolio,i=t.is_logged_in,l=r.current_language,c=a.onMount,s=a.onUnmount;return o().useEffect((function(){return c(),s}),[]),o().createElement(n.Suspense,{fallback:o().createElement(Ce.UILoader,null)},o().createElement(Se.Switch,null,om.map((function(e,t){return o().createElement(Ce.RouteWithSubroutes,im({key:t,is_logged_in:i,language:l,Component404:am.default,should_redirect_login:!0,routes:om,to:""},e))}))))}));function cm(e){return cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(e)}function um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sm(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=cm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cm(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dm=(0,he.observer)((function(){var e,t=(0,u.A)(),r=t.common,n=r.services_error,a=r.resetServicesError,l=t.ui.is_mf_verification_pending_modal_visible,c=t.client.is_logged_in,s=(0,Re.P)(),d=s.is_multiplier,f=s.proposal_info,m=s.validation_errors,p=s.trade_types,y=s.contract_type,_=s.trade_type_tab,v=ef().contract_info,h=(0,Dr.d)().addSnackbar,b=(0,Se.useLocation)().pathname,g=n||{},E=g.code,S=g.message,w=!(0,i.isEmptyObject)(n),O=ot({services_error:n,is_mf_verification_pending_modal_visible:l}),A=null!==(e=f[(0,Mt.H1)(p,y,_)[0]])&&void 0!==e?e:{},k=A.has_error,x=A.error_field,C=A.message,T=k&&!x&&!Object.keys(m).some((function(e){return m[e].length})),j=!(!w&&!T)&&(b===i.routes.trade?w&&!O||T:!(b!==i.routes.trader_positions&&!location.pathname.startsWith("/contract/"))&&w),L=j&&E===nt,P=location.pathname.startsWith("/contract/")&&d&&(0,i.isValidToCancel)(v)?"104px":"48px",N={actionText:(0,J.localize)("View"),onActionClick:function(){return window.open((0,i.getStaticUrl)("tnc/trading-terms.pdf",!0))}};return o().useEffect((function(){j&&h(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?um(Object(r),!0).forEach((function(t){sm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):um(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({message:null!=S?S:C,status:"fail",hasCloseButton:!0,hasFixedHeight:!1,onSnackbarRemove:a,style:{marginBottom:c?P:"-8px",width:"calc(100% - var(--core-spacing-800)"}},L?N:{}))}),[j,L]),o().createElement(Ra.C,null)}));const fm=dm;function mm(e){return function(e){if(Array.isArray(e))return pm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pm(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pm(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ym=function(e){var t=e.passthrough,r=(0,a.A)(t.root_store,t.WS);return o().useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[r]),o().useLayoutEffect((function(){var e,t,r=document.head,n=r.querySelectorAll('link[rel="stylesheet"]'),o=null===(e=n[n.length-1])||void 0===e||null===(t=e.href)||void 0===t?void 0:t.includes("/trader"),a=mm(n).filter((function(e){var t;return null==e||null===(t=e.href)||void 0===t?void 0:t.includes("/trader")}));if(!o){var i=null==a?void 0:a.map((function(e){return null==e?void 0:e.cloneNode(!0)}));return i.forEach((function(e){return r.appendChild(e)})),function(){return null==i?void 0:i.forEach((function(e){return r.removeChild(e)}))}}}),[]),o().useEffect((function(){window.location.pathname===i.routes.trade&&(0,Fo._S)()}),[window.location.pathname]),o().createElement(c.A,{store:r},o().createElement(ye,null,o().createElement(l.A,{store:r},o().createElement(_e._,null,o().createElement(ve.n,null,o().createElement(xe,null),o().createElement(lm,null),o().createElement(fm,null))))))}},"./src/Modules/Contract/Containers/contract-replay-widget.tsx":(e,t,r)=>{r.d(t,{dO:()=>O,fy:()=>w,$i:()=>E,WN:()=>S});var n=r("react"),o=r.n(n),a=r("./src/Modules/Contract/Components/Digits/index.ts"),i=r("./src/App/Components/Animations/index.ts"),l=r("../../node_modules/classnames/index.js"),c=r.n(l),u=r("@deriv/components"),s=r("@deriv/translations"),d=r("@deriv/shared"),f=r("mobx-react-lite"),m=r("../stores/src/useStore.ts");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const _=(0,f.observer)((function(e){var t=e.contract_info,r=(0,m.A)().ui.is_mobile,n=r?47:150,a=p(o().useState(!0),2),i=a[0],l=a[1],f=function(e){e?(e.preventDefault(),("keydown"!==e.type||"keydown"===e.type&&"Enter"===e.key)&&l(!i)):l(!i)};return o().createElement("div",{className:"info-box-longcode"},o().createElement(u.Icon,{icon:"IcContractFlag",className:"info-box-longcode-icon",size:24}),o().createElement("div",{className:"info-box-longcode-wrapper",onClick:r?f:void 0,onKeyDown:f},o().createElement(u.Text,{size:"xs",className:c()("info-box-longcode-text",{"info-box-longcode-text--collapsed":i||r,"info-box-longcode-text--collapsed--fixed-height":!d.isTabletOs&&(i||r)})},t.longcode)," ",(null==t?void 0:t.longcode)&&t.longcode.length>n&&o().createElement(u.Text,{as:"a",href:"#",size:"xs",onClick:f,className:"info-box-longcode-text"},i||r?o().createElement(s.Localize,{i18n_default_text:"View more"}):o().createElement(s.Localize,{i18n_default_text:"View less"}))),o().createElement(u.Modal,{className:"info-box-longcode--modal",is_open:r&&!i,title:o().createElement(s.Localize,{i18n_default_text:"Trade info"}),has_close_icon:!1,should_close_on_click_outside:!0,small:!0,toggleModal:f},o().createElement(u.Modal.Body,null,o().createElement(u.Text,{size:"xs"},t.longcode)),o().createElement(u.Modal.Footer,null,o().createElement(u.Button,{className:"info-box-longcode--modal-button",primary:!0,large:!0,onClick:f},o().createElement(s.Localize,{i18n_default_text:"OK"})))))}));const v=function(e){var t=e.message,r=void 0===t?"":t,n=e.onClickClose;return r?o().createElement("div",{className:"message"},o().createElement("div",{className:"message-icon"},o().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16"},o().createElement("g",{fill:"none",fillRule:"evenodd"},o().createElement("circle",{cx:"8",cy:"8",r:"8",fill:"#F44336"}),o().createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M8 7.293l3.146-3.147a.5.5 0 0 1 .708.708L8.707 8l3.147 3.146a.5.5 0 0 1-.708.708L8 8.707l-3.146 3.147a.5.5 0 0 1-.708-.708L7.293 8 4.146 4.854a.5.5 0 1 1 .708-.708L8 7.293z"})))),o().createElement("div",{className:"message-text"},r),o().createElement("div",{className:"message-close",onClick:n},o().createElement(u.Icon,{icon:"IcCross"}))):null};const h=function(e){var t=e.contract_info,r=e.error_message,n=e.removeError,a=!!t.longcode;return o().createElement(i.F,{is_visible:a,className:"info-box-container",keyname:"info-box-container"},!!t.contract_type&&o().createElement("div",{className:"info-box"},o().createElement(_,{contract_info:t})),o().createElement(v,{message:r,onClickClose:n}))};var b=r("./src/Modules/SmartChart/Components/bottom-widgets.tsx"),g=r("./src/Modules/SmartChart/Components/top-widgets.tsx"),E=(0,f.observer)((function(){var e=(0,m.A)(),t=e.contract_replay,r=e.ui.is_mobile,n=t.contract_store,i=n.contract_info,l=n.digits_info,c=n.display_status,u=n.is_digit_contract,s=n.is_ended;return o().createElement(a.A,{is_digit_contract:u,is_ended:s,is_mobile:r,contract_info:i,digits_info:l,display_status:c})})),S=(0,f.observer)((function(){var e=(0,m.A)().contract_replay,t=e.contract_store,r=e.removeErrorMessage,n=e.error_message,a=t.contract_info;return o().createElement(h,{contract_info:a,error_message:n,removeError:r})})),w=function(){return o().createElement(g.A,{InfoBox:o().createElement(S,null),is_title_enabled:!1})},O=function(){return o().createElement(b.A,{Widget:o().createElement(E,null)})}},"./src/Modules/Contract/Containers/replay-chart.tsx":(e,t,r)=>{r.d(t,{A:()=>_});var n=r("react"),o=r.n(n),a=r("@deriv/components"),i=r("@deriv/shared"),l=r("mobx-react-lite"),c=r("../stores/src/useStore.ts"),u=r("./src/Stores/useTraderStores.tsx"),s=r("./src/Modules/Contract/Containers/contract-replay-widget.tsx"),d=r("./src/Modules/SmartChart/Components/Markers/marker.tsx"),f=function(e){var t=e.contract_info,r=null!=t?t:{},n=r.contract_type,a=r.entry_spot,i=r.reset_time,l=r.reset_barrier,c=/CALL/i.test(null!=n?n:""),u=Math.max(Number(a),Number(l));return c&&(u=Math.min(Number(a),Number(l))),o().createElement(o().Fragment,null,o().createElement(d.A,{is_positioned_behind:!0,marker_config:{ContentComponent:"div",x:Number(i),y:u},marker_content_props:{className:"sc-barrier_gradient sc-barrier_gradient--".concat(c?"to-bottom":"to-top")}}),o().createElement(d.A,{is_positioned_behind:!0,marker_config:{ContentComponent:"div",x:Number(i),y:Number(l)},marker_content_props:{className:"sc-reset_barrier"}}))};const m=o().memo(f);var p=r("./src/Modules/SmartChart/index.js"),y=r("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js");const _=(0,l.observer)((function(e){var t,r=e.is_dark_theme_prop,n=e.is_accumulator_contract,l=e.is_reset_contract,f=e.is_vertical_scroll_disabled,_=(0,u.P)(),v=(0,c.A)(),h=v.contract_replay,b=v.common,g=v.ui,E=(0,y.Y)().isMobile,S=h.contract_store,w=h.chart_state,O=h.chartStateChange,A=h.margin,k=S.contract_config,x=S.is_digit_contract,C=S.barriers_array,T=S.getContractsArray,j=S.markers_array,L=S.contract_info,P=L.underlying,N=L.audit_details,I=L.barrier_count,D="READY"===w||"SCROLL_TO_LEFT"===w,M=b.app_routing_history,R=b.current_language,z=b.is_socket_opened,F=g.is_chart_layout_default,U=g.is_chart_countdown_visible,q=k||{},V=q.end_epoch,B=q.chart_type,H=q.start_epoch,G=q.granularity,Y=r||g.is_dark_mode_on,W=!(null==L||!L.is_forward_starting||(0,i.hasContractStarted)(L)||!L.is_sold),$="DBot"===(0,i.getPlatformRedirect)(M).name,K={language:R,theme:Y&&!$?"dark":"light",position:F?"bottom":"left",countdown:U,assetInformation:!1,isHighestLowestMarkerEnabled:!1},J=D&&k?k.scroll_to_epoch:void 0,X=N?N.all_ticks:[],Z=_.wsForget,Q=_.wsSubscribe,ee=_.wsSendRequest,te=_.wsForgetStream,re=function(){return!E&&x},ne=(0,a.usePrevious)(H),oe=!!(0,i.getEndTime)(L),ae=(0,i.isDtraderV2DesktopEnabled)(g.is_desktop)||(0,i.isDtraderV2MobileEnabled)(g.is_mobile);return o().createElement(p.GR,{id:"replay",barriers:C,bottomWidgets:re()?s.dO:void 0,chartControlsWidgets:null,chartType:B,endEpoch:V,margin:A,isMobile:E,enabledNavigationWidget:!E,enabledChartFooter:!1,granularity:G,requestAPI:ee,requestForget:Z,requestForgetStream:te,crosshair:E?0:void 0,maxTick:E?8:void 0,requestSubscribe:Q,settings:K,startEpoch:W?L.purchase_time:H,scrollToEpoch:J,stateChangeListener:O,symbol:P,allTicks:X,topWidgets:ae?function(){return o().createElement(o().Fragment,null)}:s.fy,isConnectionOpened:z,isStaticChart:!!n&&!!V&&Number(H)<Number(ne),shouldFetchTradingTimes:!1,should_zoom_out_on_yaxis:n,yAxisMargin:(t={top:E?96:148,bottom:re()?128:112},E&&(t.bottom=48,t.top=48),t),anchorChartToLeft:E,shouldFetchTickHistory:"seconds"!==(0,i.getDurationUnitText)((0,i.getDurationPeriod)(L))||"open"===L.status,shouldDrawTicksFromContractInfo:n,contractInfo:L,contracts_array:T(),isLive:!oe,isVerticalScrollEnabled:!f,startWithDataFitMode:!0},j.map((function(e){var t=e.content_config,r=e.marker_config,n=e.react_key,a=e.type;return o().createElement(d.A,{key:n,marker_config:r,marker_content_props:t,is_positioned_before:("SPOT_ENTRY"===a||"SPOT_EXIT"===a)&&2===I})})),l&&(null==L?void 0:L.reset_time)&&o().createElement(m,{contract_info:L}))}))},"./src/Stores/Modules/Trading/Helpers/end-time.ts":(e,t,r)=>{r.d(t,{X:()=>i,h:()=>l});var n=r("../../node_modules/moment/moment.js"),o=r.n(n),a=function(e,t){var r=o()(e);return r.minute(Math.ceil(r.minute()/t)*t)},i=function(e,t,r,n){for(var i=0;i<r.length;i++)if(t.isAfter(r[i])&&t.isBefore(n[i]))return a(t,5).format("HH:mm");for(var l=0;l<r.length;l++){var c=o()(r[l]);if(c.isAfter(e))return a(c,5).format("HH:mm")}return a(e,5).format("HH:mm")},l=function(e,t,r){var n={start:t.map((function(t){return e.isBefore(t)?o()(t).clone():e})),end:r};return n.start.length>0&&(n.start[0]=a(n.start[0],5)),n}},"./src/Stores/Modules/Trading/Helpers/logic.ts":(e,t,r)=>{r.d(t,{d:()=>o});var n=r("./src/_common/base/server_time.ts"),o=function(e){var t;return!(null===(t=e.cancellation)||void 0===t||!t.date_expiry)&&e.cancellation.date_expiry<n.A.get().unix()}}}]);
//# sourceMappingURL=trader.trader-app-v2.3cc798b369796d64eee5.js.map