"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_Passwords_index_ts"],{"./Components/sent-email-modal/index.ts":(e,t,i)=>{i.d(t,{default:()=>c});var s=i("@deriv-com/translations"),a=i("@deriv/components"),o=i("@deriv/shared"),n=i("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),l=i("@deriv/utils"),r=i("../../../node_modules/react/jsx-runtime.js");const c=e=>{let{identifier_title:t,is_modal_when_mobile:i=!1,is_open:c,has_live_chat:d=!1,onClickSendEmail:_,onClose:m}=e;const{isDesktop:u}=(0,n.Y)(),{localize:p}=(0,s.useTranslations)(),x=d?(0,r.jsx)(s.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[(0,r.jsx)("span",{className:"send-email-template__footer-live-chat",onClick:()=>{m(),l.Chat.open()},children:(0,r.jsx)(a.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:p("Live chat"),zIndex:"9999"})},0)]}):null,h=(0,r.jsx)(a.SendEmailTemplate,{className:"sent-email",subtitle:(()=>{let e="";switch(t){case o.CFD_PLATFORMS.DXTRADE:e=(0,r.jsx)(s.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[(0,r.jsx)("span",{className:"send-email-template__subtitle-platform"},0)],values:{platform_name_dxtrade:(0,o.getPlatformSettings)("dxtrade").name}});break;case o.CFD_PLATFORMS.MT5:e=p("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":e=p("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:t});break;case"Change_Email":e=p("Check your email and click the link in the email to proceed.");break;default:e=p("Please click on the link in the email to reset your password.")}return e})(),title:p("We’ve sent you an email"),lbl_no_receive:p("Didn't receive the email?"),txt_resend:p("Resend email"),txt_resend_in:p("Resend email in"),onClickSendEmail:_,live_chat:x,children:[{key:"email_spam",icon:"IcEmailSpam",content:(0,s.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,s.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,s.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,s.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((e=>(0,r.jsxs)("div",{className:"sent-email__content",children:[(0,r.jsx)(a.Icon,{icon:e.icon,size:32}),(0,r.jsx)(a.Text,{size:"xxs",as:"p",children:e.content})]},e.key)))});return u||i?(0,r.jsx)(a.Modal,{className:"sent-email__modal",is_open:c,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:m,width:"440px",children:(0,r.jsx)(a.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:u,height_offset:"80px",children:(0,r.jsxs)(a.Modal.Body,{children:[(0,r.jsx)("div",{onClick:m,className:"send-email-template__close","data-testid":"dt_send_email_template_close",children:(0,r.jsx)(a.Icon,{icon:"IcCross"})}),h]})})}):(0,r.jsx)(a.MobileDialog,{portal_element_id:"modal_root",title:p("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:c,onClose:m,has_content_scroll:!0,children:h})}},"./Sections/Security/Passwords/index.ts":(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var s=i("react"),a=i("@deriv/components"),o=i("@deriv/stores"),n=i("@deriv/api"),l=i("@deriv/shared"),r=i("@deriv-com/translations"),c=i("./Components/sent-email-modal/index.ts"),d=i("../../../node_modules/react/jsx-runtime.js");const _=(0,o.observer)((()=>{const{traders_hub:{is_eu_user:e,financial_restricted_countries:t}}=(0,o.useStore)(),i=(0,l.getBrandWebsiteName)(),s=(0,l.getPlatformSettings)("dbot").name,a=(0,l.getPlatformSettings)("go").name,n=(0,l.getPlatformSettings)("smarttrader").name,c=(0,l.getPlatformSettings)("trader").name,_=(0,l.getPlatformSettings)("ctrader").name;return e?(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv password</0> to log in to {{brand_website_name}} and {{platform_name_trader}}.",components:[(0,d.jsx)("strong",{},0)],values:{brand_website_name:i,platform_name_trader:c}}):t?(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv password</0> to log in to {{brand_website_name}}, {{platform_name_trader}} and {{platform_name_go}}.",components:[(0,d.jsx)("strong",{},0)],values:{brand_website_name:i,platform_name_trader:c,platform_name_go:a}}):(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv password</0> to log in to {{brand_website_name}}, {{platform_name_go}}, {{platform_name_trader}}, {{platform_name_smarttrader}}, {{platform_name_dbot}} and {{platform_name_ctrader}}.",components:[(0,d.jsx)("strong",{},0)],values:{brand_website_name:i,platform_name_trader:c,platform_name_dbot:s,platform_name_smarttrader:n,platform_name_go:a,platform_name_ctrader:_}})})),m=({color:e="#d6dadb",height:t="1px",margin:i,className:s})=>(0,d.jsx)("div",{style:{margin:i,backgroundColor:e,height:t},className:s});var u=i("@deriv/quill-icons");const p=e=>{let{icon:t,title:i}=e;const s={deriv_email:(0,d.jsx)(u.LegacyEmailIcon,{iconSize:"sm"}),deriv_password:(0,d.jsx)(u.BrandDerivLogoCoralIcon,{height:24,width:24}),deriv_mt5_password:(0,d.jsx)(u.PartnersProductBrandLightDerivMt5LogoIcon,{height:24,width:24}),deriv_x_password:(0,d.jsx)(u.AccountsDerivXIcon,{iconSize:"sm"})};return(0,d.jsxs)("div",{className:"email-password-title-wrapper",children:[s[t],(0,d.jsx)(a.Text,{weight:"bold",size:"xs",children:i})]})},x=e=>{let{title:t,title_icon:i,description:o,should_display_button:n=!0,onClick:l,button_text:r,button_icon:c}=e;return(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(p,{icon:i,title:t}),(0,d.jsx)(a.Text,{as:"p",color:"prominent",size:"xs",children:o}),n&&(0,d.jsx)(a.Button,{className:"account__passwords-footer-btn",type:"button",onClick:l,has_effect:!0,is_disabled:!1,is_loading:!1,text:r,icon:c,large:!0,secondary:!0})]})},h=(0,o.observer)((()=>{const{localize:e}=(0,r.useTranslations)(),{client:{social_identity_provider:t,is_social_signup:i,email:a}}=(0,o.useStore)(),{mutate:p}=(0,n.useVerifyEmail)(),[h,f]=(0,s.useState)(!1),v=()=>{p("apple"===t?{verify_email:a,type:"request_email"}:{verify_email:a,type:"reset_password"}),f(!0)},g=t?(0,l.toTitleCase)(t):"";return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(m,{className:"account__divider"}),(0,d.jsx)(x,{title:e("Deriv password"),title_icon:"deriv_password",description:(0,d.jsx)(_,{}),onClick:v,button_text:i&&t?e("Unlink from {{identifier_title}}",{identifier_title:g}):e("Change password"),button_icon:(()=>{const e={apple:(0,d.jsx)(u.SocialAppleBlackIcon,{iconSize:"xs"}),google:(0,d.jsx)(u.SocialGoogleBrandIcon,{iconSize:"xs"}),facebook:(0,d.jsx)(u.SocialFacebookBrandIcon,{iconSize:"xs"})};return i&&t?e[t]:null})()}),(0,d.jsx)(c.default,{is_open:h,onClose:()=>f(!1),identifier_title:g,onClickSendEmail:v,is_modal_when_mobile:!0})]})})})),f=e=>{let{onClose:t,is_open:i,identifier_title:s,onClickSendEmail:o}=e;const{localize:n}=(0,r.useTranslations)();return(0,d.jsxs)(a.Modal,{className:"unlink-account__modal",is_open:i,has_close_icon:!0,toggleModal:t,width:"440px",children:[(0,d.jsxs)(a.Modal.Body,{children:[(0,d.jsx)("div",{onClick:t,className:"unlink-account__modal-close",children:(0,d.jsx)(a.Icon,{icon:"IcCross"})}),(0,d.jsx)("div",{className:"unlink-account__modal-icon",children:(0,d.jsx)(a.Icon,{icon:"IcEmailChanged",size:128})}),(0,d.jsxs)("div",{className:"unlink-account__modal-content",children:[(0,d.jsx)(a.Text,{className:"unlink-account__modal-title",weight:"bold",size:"s",children:(0,d.jsx)(r.Localize,{i18n_default_text:"Change your login email"})}),(0,d.jsx)(a.Text,{className:"unlink-account__modal-description",size:"xs",children:(0,d.jsx)(r.Localize,{i18n_default_text:"To change your email address, you'll first need to unlink your email address from your {{identifier_title}} account.",values:{identifier_title:s}})})]})]}),(0,d.jsxs)(a.Modal.Footer,{className:"unlink-account__footer",children:[(0,d.jsx)(a.Button,{onClick:t,has_effect:!0,text:n("Cancel"),secondary:!0,large:!0}),(0,d.jsx)(a.Button,{onClick:()=>{t(),o()},has_effect:!0,primary:!0,large:!0,children:(0,d.jsx)(r.Localize,{i18n_default_text:"Unlink from {{identifier_title}}",values:{identifier_title:s}})})]})]})},v=(0,o.observer)((()=>{const{common:{is_from_derivgo:e},client:{social_identity_provider:t,is_social_signup:i,email:_}}=(0,o.useStore)(),{mutate:m}=(0,n.useVerifyEmail)(),{localize:u}=(0,r.useTranslations)(),[p,h]=(0,s.useState)(!1),[v,g]=(0,s.useState)(!1),j={verify_email:_,type:"request_email"};return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(x,{title:u("Email address"),title_icon:"deriv_email",description:(0,d.jsx)(r.Localize,{i18n_default_text:"This is the email address associated with your Deriv account. <0>{{ email }}</0>",components:[(0,d.jsx)(a.Text,{as:"span",weight:"bold",size:"xs"},0)],values:{email:_}}),should_display_button:!e,onClick:()=>{i?h(!0):(m(j),g(!0))},button_text:u("Change email")}),(0,d.jsx)(f,{is_open:p,onClose:()=>h(!1),identifier_title:(0,l.toTitleCase)(t),onClickSendEmail:()=>{m(j),h(!1),g(!0)}}),(0,d.jsx)(c.default,{is_open:v,onClose:()=>g(!1),identifier_title:"Change_Email",onClickSendEmail:()=>m({verify_email:_,type:"request_email"}),has_live_chat:!0,is_modal_when_mobile:!0})]})})})),g=(0,o.observer)((()=>{const{localize:e}=(0,r.useTranslations)(),[t,i]=(0,s.useState)(!1),{mutate:_}=(0,n.useMutation)("verify_email"),{client:{email:u}}=(0,o.useStore)(),p=()=>{_({payload:{verify_email:u,type:"trading_platform_mt5_password_reset",url_parameters:{redirect_to:3}}}),i(!0)};return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(m,{className:"account__divider"}),(0,d.jsx)(x,{title:e("Deriv MT5 password"),title_icon:"deriv_mt5_password",description:(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv MT5 password</0> to log in to your Deriv MT5 accounts on the desktop, web and mobile apps.",components:[(0,d.jsx)(a.Text,{as:"span",weight:"bold"},0)]}),onClick:p,button_text:e("Change password")}),(0,d.jsx)(c.default,{is_open:t,onClose:()=>i(!1),identifier_title:l.CFD_PLATFORMS.MT5,onClickSendEmail:p,is_modal_when_mobile:!0})]})})})),j=(0,o.observer)((()=>{const{localize:e}=(0,r.useTranslations)(),[t,i]=(0,s.useState)(!1),{mutate:_}=(0,n.useMutation)("verify_email"),{client:{email:u}}=(0,o.useStore)(),p=()=>{_({payload:{verify_email:u,type:"trading_platform_dxtrade_password_reset",url_parameters:{redirect_to:3}}}),i(!0)};return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)("div",{className:"account__passwords-wrapper",children:[(0,d.jsx)(m,{className:"account__divider"}),(0,d.jsx)(x,{title:e("Deriv X password"),title_icon:"deriv_x_password",description:(0,d.jsx)(r.Localize,{i18n_default_text:"Use your <0>Deriv X password</0> to log in to your Deriv X accounts on the web and mobile apps.",components:[(0,d.jsx)(a.Text,{as:"span",weight:"bold"},0)]}),onClick:p,button_text:e("Change password")}),(0,d.jsx)(c.default,{is_open:t,onClose:()=>i(!1),identifier_title:l.CFD_PLATFORMS.DXTRADE,onClickSendEmail:p,is_modal_when_mobile:!0})]})})})),w=(0,o.observer)((()=>{const{client:e,common:t}=(0,o.useStore)(),{is_populating_mt5_account_list:i,is_populating_dxtrade_account_list:n,is_social_signup:l,mt5_login_list:r,is_mt5_password_not_set:c,dxtrade_accounts_list:_,is_dxtrade_password_not_set:m}=e,{is_from_derivgo:u}=t,[p,x]=(0,s.useState)(!0),f=r?.length>0||!c,w=_?.length>0||!m;return(0,s.useEffect)((()=>{!1===i&&!1===n&&void 0!==l&&x(!1)}),[i,n,l]),p?(0,d.jsx)(a.Loading,{is_fullscreen:!1}):(0,d.jsxs)("div",{className:"account__passwords",children:[(0,d.jsx)(v,{}),(0,d.jsx)(h,{}),!u&&f&&(0,d.jsx)(g,{}),!u&&w&&(0,d.jsx)(j,{})]})}))}}]);